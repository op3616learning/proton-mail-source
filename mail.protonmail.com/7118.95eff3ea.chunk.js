(self.webpackChunkproton_mail=self.webpackChunkproton_mail||[]).push([[7118],{90321:function(e,t,n){var r={"./cc-american-express.svg":41073,"./cc-dankort.svg":97989,"./cc-diners-club.svg":66694,"./cc-forbrugs.svg":49371,"./cc-jcb.svg":55020,"./cc-maestro.svg":10738,"./cc-master.svg":70123,"./cc-paypal.svg":69511,"./cc-unionpay.svg":53324,"./cc-visa-electron.svg":8306,"./cc-visa.svg":45742};function webpackContext(e){var t=webpackContextResolve(e);return n(t)}function webpackContextResolve(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}webpackContext.keys=function webpackContextKeys(){return Object.keys(r)},webpackContext.resolve=webpackContextResolve,e.exports=webpackContext,webpackContext.id=90321},57753:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return app_MainContainer}});var r={};n.r(r),n.d(r,{COMPARATORS:function(){return B9},DOMAIN_MODE:function(){return U9},EMAIL_MODE:function(){return Y9},FILTER_VERSION:function(){return F9},OPERATORS:function(){return W9},TYPES:function(){return K9},getComparatorLabels:function(){return getComparatorLabels},getConditionTypeLabels:function(){return getConditionTypeLabels},getDefaultFolders:function(){return getDefaultFolders},getOperatorLabels:function(){return getOperatorLabels}});var a={};n.r(a),n.d(a,{computeFromTree:function(){return computeFromTree},computeTree:function(){return computeTree},convertModel:function(){return convertModel},default:function(){return Q9},isSieve:function(){return isSieve},newFilter:function(){return newFilter},normalize:function(){return normalize},sieveTemplates:function(){return V9}});var o=n(15841),s=n(38094),i=n(19788),c=n(62366);const getBreakpoint=()=>{const e=document.querySelector("body");return e?window.getComputedStyle(e,":before").getPropertyValue("content").replace(/['"]+/g,""):""};var l,hooks_useActiveBreakpoint=()=>{const[e,t]=(0,o.useState)((()=>getBreakpoint()));return(0,o.useEffect)((()=>{const onResize=()=>t(getBreakpoint()),e=(0,c.Ds)(onResize,250);return window.addEventListener("load",onResize),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]),(0,o.useMemo)((()=>{const t="mobile"===e,n="tinymobile"===e;return{breakpoint:e,isDesktop:"desktop"===e,isTablet:"tablet"===e,isMobile:t,isTinyMobile:n,isNarrow:t||n}}),[e])},d=n(82389),u=n(40635),p=n(13929),m=n(85345),g=n(5476),j=n(37010);var app_StandardErrorPage=({children:e})=>((0,g.Z)((0,u.c)("Error message").t(l||(l=(0,d.Z)(["Oops, something went wrong"])))),(0,j.jsx)(m.Z,{className:"flex flex-align-items-center pb4 scroll-if-needed",children:(0,j.jsx)(p.Z,{children:e})})),b=n(3150),y=n(25458),h=n(31329),I=n(85722),f=n(19745),M=n(11822),N=n(61289);const x={FLAG_RECEIVED:1,FLAG_SENT:2,FLAG_INTERNAL:4,FLAG_E2E:8,FLAG_AUTO:16,FLAG_REPLIED:32,FLAG_REPLIEDALL:64,FLAG_FORWARDED:128,FLAG_AUTOREPLIED:256,FLAG_IMPORTED:512,FLAG_OPENED:1024,FLAG_RECEIPT_SENT:2048,FLAG_RECEIPT_REQUEST:65536,FLAG_PUBLIC_KEY:131072,FLAG_SIGN:262144,FLAG_HAM_MANUAL:1<<27,FLAG_PHISHING_AUTO:1<<30,FLAG_DMARC_FAIL:1<<26,FLAG_UNSUBSCRIBED:1<<19,FLAG_SCHEDULED_SEND:1<<20};let v;!function(e){e[e.NOT_VERIFIED=-1]="NOT_VERIFIED",e[e.NOT_SIGNED=0]="NOT_SIGNED",e[e.SIGNED_AND_VALID=1]="SIGNED_AND_VALID",e[e.SIGNED_AND_INVALID=2]="SIGNED_AND_INVALID",e[e.SIGNED_NO_PUB_KEY=3]="SIGNED_NO_PUB_KEY"}(v||(v={}));const w={USER:1546300800,BULK:1/0};var D,S;const{PLAINTEXT:O,MIME:A}=M.LO,{FLAG_RECEIVED:C,FLAG_SENT:E,FLAG_RECEIPT_REQUEST:L,FLAG_RECEIPT_SENT:P,FLAG_IMPORTED:Z,FLAG_REPLIED:T,FLAG_REPLIEDALL:k,FLAG_FORWARDED:z,FLAG_INTERNAL:_,FLAG_AUTO:R,FLAG_E2E:G,FLAG_SIGN:Y,FLAG_PUBLIC_KEY:U,FLAG_UNSUBSCRIBED:F,FLAG_SCHEDULED_SEND:K}=x,B=["X-Autoreply","X-Autorespond","X-Autoreply-From","X-Mail-Autoreply"],hasMimeType=e=>t=>(null==t?void 0:t.MIMEType)===e,W=hasMimeType(A),V=hasMimeType(O),Q=(hasMimeType(M.LO.DEFAULT),e=>t=>(0,N.jl)(null==t?void 0:t.Flags,e)),H=Q(L),X=Q(P),J=Q(Z),q=Q(_),$=Q(R),ee=Q(C),te=Q(E),ne=(Q(T),Q(k),Q(z),Q(E|C)),messages_isDraft=e=>void 0!==(null==e?void 0:e.Flags)&&!te(e)&&!ee(e),isOutbox=e=>{var t;return null==e||null===(t=e.LabelIDs)||void 0===t?void 0:t.includes(M.C7.OUTBOX)},isScheduled=e=>{var t;return null==e||null===(t=e.LabelIDs)||void 0===t?void 0:t.includes(M.C7.SCHEDULED)},re=Q(K),ae=(Q(G),Q(G|E),Q(G|_),Q(Y)),oe=Q(U),se=Q(F),isEO=e=>!(null==e||!e.Password),addReceived=(e=0)=>(0,N.ft)(e,x.FLAG_RECEIVED),getSender=e=>null==e?void 0:e.Sender,getRecipients=e=>{const{ToList:t=[],CCList:n=[],BCCList:r=[]}=e||{};return[...t,...n,...r]},getRecipientsAddresses=e=>getRecipients(e).map((({Address:e})=>e||"")).filter(c.yR),getDate=({Time:e=0})=>new Date(1e3*e),getParsedHeaders=(e,t)=>{const{ParsedHeaders:n={}}=e||{};return n[t]},getParsedHeadersFirstValue=(e,t)=>{const n=getParsedHeaders(e,t);return Array.isArray(n)?n[0]:n},getParsedHeadersAsArray=(e,t)=>{const n=getParsedHeaders(e,t);return void 0===n?void 0:Array.isArray(n)?n:[n]},getOriginalTo=e=>getParsedHeadersFirstValue(e,"X-Original-To")||"",getAttachments=e=>(null==e?void 0:e.Attachments)||[],hasAttachments=e=>!!(null!=e&&e.NumAttachments&&(null==e?void 0:e.NumAttachments)>0),messages_formatSubject=(e="",t="")=>new RegExp("^".concat(t),"i").test(e)?e:"".concat(t," ").concat(e),ie="draft",ce=(0,u.c)("Message").t(D||(D=(0,d.Z)(["Re:"]))),le=(0,u.c)("Message").t(S||(S=(0,d.Z)(["Fw:"])));var de,ue,pe,me,ge,je,be,ye,he,Ie=n(19891),fe=n(36552),Me=n(29822),Ne=n(52509),xe=n(85682),ve=n(24974),we=n(33458),De=n(55500);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const{INBOX:Se,TRASH:Oe,SPAM:Ae,ARCHIVE:Ce,SENT:Ee,DRAFTS:Le,ALL_SENT:Pe,ALL_DRAFTS:Ze,SCHEDULED:Te,OUTBOX:ke}=M.C7,ze=[Se,Oe,Ae,Ce,Ee,Le,Te,ke],_e=[Le,Ze,Ee,Pe],getHumanLabelID=e=>ve.Y4[e]||e,getLabelName=(e,t=[],n=[])=>{if(e in ve.Y4)return(e=>(0,ve.UV)()[e]||getHumanLabelID(e))(e);const r=(0,Ne.qL)(t,"ID");var a;if(e in r)return(null===(a=r[e])||void 0===a?void 0:a.Name)||e;const o=(0,Ne.qL)(n,"ID");var s;return e in o&&(null===(s=o[e])||void 0===s?void 0:s.Name)||e},labels_isCustomLabel=(e,t=[])=>t.some((t=>t.ID===e)),getStandardFolders=()=>({[Se]:{icon:"inbox",name:(0,u.c)("Mailbox").t(de||(de=(0,d.Z)(["Inbox"]))),to:"/inbox"},[Oe]:{icon:"trash",name:(0,u.c)("Mailbox").t(ue||(ue=(0,d.Z)(["Trash"]))),to:"/trash"},[Ae]:{icon:"fire",name:(0,u.c)("Mailbox").t(pe||(pe=(0,d.Z)(["Spam"]))),to:"/spam"},[Ce]:{icon:"box-archive",name:(0,u.c)("Mailbox").t(me||(me=(0,d.Z)(["Archive"]))),to:"/archive"},[Ee]:{icon:"paper-plane",name:(0,u.c)("Mailbox").t(ge||(ge=(0,d.Z)(["Sent"]))),to:"/".concat(ve.Y4[Ee])},[Pe]:{icon:"paper-plane",name:(0,u.c)("Mailbox").t(je||(je=(0,d.Z)(["Sent"]))),to:"/".concat(ve.Y4[Pe])},[Le]:{icon:"file-lines",name:(0,u.c)("Mailbox").t(be||(be=(0,d.Z)(["Drafts"]))),to:"/".concat(ve.Y4[Le])},[Ze]:{icon:"file-lines",name:(0,u.c)("Mailbox").t(ye||(ye=(0,d.Z)(["Drafts"]))),to:"/".concat(ve.Y4[Ze])},[Te]:{icon:"clock",name:(0,u.c)("Mailbox").t(he||(he=(0,d.Z)(["Scheduled"]))),to:"/".concat(ve.Y4[Te])}}),getCurrentFolders=(e,t,n,r)=>{const{ShowMoved:a=M.zC.NONE}=r||{},o=Object.keys(elements_getLabelIDs(e,t)),s=getStandardFolders(),i=(0,Ne.qL)(n,"ID");return o.filter((e=>[Ee,Pe].includes(e)?((0,N.jl)(a,M.zC.SENT)?Pe:Ee)===e:![Le,Ze].includes(e)||((0,N.jl)(a,M.zC.DRAFTS)?Ze:Le)===e)).filter((e=>s[e]||i[e])).map((e=>{if(s[e])return s[e];const t=i[e];return{icon:"folder",name:null==t?void 0:t.Name,to:"/".concat(null==t?void 0:t.ID),color:null==t?void 0:t.Color,parentID:null==t?void 0:t.ParentID}}))},getCurrentFolderID=(e=[],t=[])=>{const n=[...ze,...t.map((({ID:e})=>e))];return e.find((e=>n.includes(e)))||""},getFolderName=(e,t=[])=>{const n=getStandardFolders();if(n[e])return n[e].name;const{Name:r=""}=t.find((({ID:t})=>t===e))||{};return r},labelIncludes=(e,...t)=>t.includes(e),isAutoRead=e=>ve.t3.includes(e),applyLabelChangesOnMessage=(e,t,n)=>{const{LabelIDs:r}=e,a=[...r];if(Object.keys(t).forEach((e=>{const n=a.findIndex((t=>t===e));t[e]?-1===n&&a.push(e):n>=0&&a.splice(n,1)})),n){var o;const t=null===(o=n.find((t=>t.id===e.ID)))||void 0===o?void 0:o.unread;if(t)return _objectSpread(_objectSpread({},e),{},{LabelIDs:a,Unread:t})}return _objectSpread(_objectSpread({},e),{},{LabelIDs:a})},applyLabelChangesOnConversation=(e,t,n)=>{const r=[...e.Labels||[]];if(Object.keys(t).forEach((n=>{const a=r.findIndex((e=>e.ID===n));t[n]?-1===a?r.push({ID:n,ContextNumMessages:e.NumMessages||1}):r[a]=_objectSpread(_objectSpread({},r[a]),{},{ContextNumMessages:e.NumMessages||1}):a>=0&&r.splice(a,1)})),n){var a;const t=null===(a=n.find((t=>t.id===e.ID)))||void 0===a?void 0:a.unread;if(t)return _objectSpread(_objectSpread({},e),{},{Labels:r,NumUnread:t})}return _objectSpread(_objectSpread({},e),{},{Labels:r})},applyLabelChangesOnOneMessageOfAConversation=(e,t)=>{const n=[...e.Labels||[]],r={};return Object.keys(t).forEach((e=>{var a;const o=n.findIndex((t=>t.ID===e)),s=o>=0,i=(null==n||null===(a=n[o])||void 0===a?void 0:a.ContextNumMessages)||0;t[e]?s?n[o]=_objectSpread(_objectSpread({},n[o]),{},{ContextNumMessages:i+1}):(n.push({ID:e,ContextNumMessages:1}),r[e]=!0):s&&(i<=1?(n.splice(o,1),r[e]=!1):n[o]=_objectSpread(_objectSpread({},n[o]),{},{ContextNumMessages:i-1}))})),{updatedConversation:_objectSpread(_objectSpread({},e),{},{Labels:n}),conversationChanges:r}};function mailboxUrl_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mailboxUrl_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mailboxUrl_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mailboxUrl_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const getUrlPathname=e=>(0,s.Gn)(ve.Gw,mailboxUrl_objectSpread(mailboxUrl_objectSpread({},e),{},{labelID:getHumanLabelID(e.labelID)})),setParamsInLocation=(e,t)=>mailboxUrl_objectSpread(mailboxUrl_objectSpread({},e),{},{pathname:getUrlPathname(t)}),stringToInt=e=>{if(void 0!==e)return(0,we.hj)(e)?parseInt(e,10):void 0},sortToString=e=>"Time"===e.sort?e.desc?void 0:"date":e.desc?"-size":"size",filterToString=e=>void 0===e.Unread?void 0:0===e.Unread?"read":"unread",keywordToString=e=>e.trim()||void 0,pageFromUrl=e=>(e=>{if(void 0===e)return 0;const t=parseInt(e,10);return Number.isNaN(t)?0:t-1})((0,De.Qw)(e.hash).page),sortFromUrl=(e,t)=>((e,t)=>{const n=t&&t===M.C7.SCHEDULED;switch(e){case"-size":return{sort:"Size",desc:!0};case"size":return{sort:"Size",desc:!1};case"date":return{sort:"Time",desc:!!n};default:return{sort:"Time",desc:!n}}})((0,De.Qw)(e.hash).sort,t),filterFromUrl=e=>(e=>{switch(e){case"read":return{Unread:0};case"unread":return{Unread:1};default:return{}}})((0,De.Qw)(e.hash).filter),extractSearchParameters=e=>{const{address:t,from:n,to:r,keyword:a,begin:o,end:s,attachments:i,wildcard:c}=(0,De.Qw)(e.hash);return{address:t,from:n,to:r,keyword:a,begin:stringToInt(o),end:stringToInt(s),attachments:stringToInt(i),wildcard:stringToInt(c)}},setSortInUrl=(e,t)=>(0,De.Nv)(e.pathname,e.hash,{page:void 0,sort:sortToString(t)}),isColumnMode=({ViewLayout:e=M.p9.COLUMN}={})=>e===M.p9.COLUMN,isConversationMode=(e="",{ViewMode:t=M.WF.GROUP}={},n)=>{const r=extractSearchParameters(n);return!(e=>_e.includes(e))(e)&&t===M.WF.GROUP&&!Object.entries(r).some((([,e])=>void 0!==e))},hasShowEmbedded=({ShowImages:e=0}={})=>(0,N.jl)(e,M.pn.EMBEDDED),hasShowRemote=({ShowImages:e=0}={})=>(0,N.jl)(e,M.pn.REMOTE);function conversation_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function conversation_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?conversation_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):conversation_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const getConversationContextValue=(e,t,n)=>{var r;const a=null==e||null===(r=e.Labels)||void 0===r?void 0:r.find((e=>e.ID===n)),o=null==a?void 0:a["Context".concat(t)];return void 0!==o?o:void 0!==(null==e?void 0:e[t])?e[t]:0},getNumAttachments=e=>(null==e?void 0:e.NumAttachments)||0,isUnread=(e,t)=>0!==((e,t)=>getConversationContextValue(e,"NumUnread",t))(e,t),getLabelIDs=(e,t)=>{var n;const r=((e,t)=>getConversationContextValue(e,"NumMessages",t))(e,t);return(null==e||null===(n=e.Labels)||void 0===n?void 0:n.reduce(((e,t)=>(e[t.ID]=t.ContextNumMessages===r,e)),{}))||{}};function elements_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function elements_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?elements_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):elements_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const{INBOX:Re,TRASH:Ge,SPAM:Ye,ARCHIVE:Ue,SCHEDULED:Fe}=M.C7,elements_isMessage=e=>"string"==typeof(null==e?void 0:e.ConversationID),elements_isConversation=e=>!elements_isMessage(e),elements_getDate=(e,t)=>{if(!e)return new Date;const n=elements_isMessage(e)?e.Time:((e,t)=>getConversationContextValue(e,"Time",t))(e,t);return new Date(1e3*(n||0))},elements_isUnread=(e,t)=>!!e&&(elements_isMessage(e)?0!==e.Unread:isUnread(e,t)),elements_getLabelIDs=(e,t)=>{var n;return elements_isMessage(e)?(null==e||null===(n=e.LabelIDs)||void 0===n?void 0:n.reduce(((e,t)=>(e[t]=!0,e)),{}))||{}:getLabelIDs(e,t)},hasLabel=(e,t)=>void 0!==elements_getLabelIDs(e,void 0)[t],elements_isStarred=e=>hasLabel(e,M.C7.STARRED),elements_getSize=e=>e.Size||0,elements_sort=(e,t,n)=>{const r={Time:(e,t)=>elements_getDate(e,t).getTime(),Size:elements_getSize}[t.sort];return[...e].sort(((e,a)=>((e,a)=>{let o=r(e,n),s=r(a,n);return o===s&&"Time"===t.sort&&(o=e.Order||0,s=a.Order||0),t.desc?s-o:o-s})(e,a)))},getCounterMap=(e,t,n,r,a)=>{const o=[...Object.values(M.C7),...e.map((e=>e.ID||""))],s=(0,Ne.qL)(t,"LabelID"),i=(0,Ne.qL)(n,"LabelID");return o.reduce(((e,t)=>{const n=isConversationMode(t,r,a)?s:i;return e[t]=n[t],e}),{})},parseLabelIDsInEvent=(e,t)=>{const n=(0,Ne.CE)(t,["LabelIDsRemoved","LabelIDsAdded"]);if(elements_isMessage(e)){if(null!=n&&n.LabelIDs)return elements_objectSpread(elements_objectSpread({},e),n);const r=(0,xe.Tw)((0,xe.Hg)(e.LabelIDs||[],t.LabelIDsRemoved||[]).concat(t.LabelIDsAdded||[]));return elements_objectSpread(elements_objectSpread(elements_objectSpread({},e),n),{},{LabelIDs:r})}return elements_objectSpread(elements_objectSpread({},e),n)},elements_isSearch=e=>!!(e.address||void 0!==e.attachments||e.begin||e.end||e.from||e.keyword||e.to||e.wildcard),isFilter=e=>Object.keys(e).length>0,getCurrentFolderIDs=(e,t)=>{const n=elements_getLabelIDs(e,void 0),r={[Re]:!0,[Ge]:!0,[Ye]:!0,[Ue]:!0,[Fe]:!0},a=(0,Ne.qL)(t,"ID");return Object.keys(n).filter((e=>r[e]||a[e]))||""};var Ke,Be,We,Ve;const Qe={B:1,KB:M.$A,MB:M.$A*M.$A,GB:M.$A*M.$A*M.$A},transformTo=(e,t,n,r=2)=>{var a;return(e/Qe[t]).toFixed(r)+(n?"":" ".concat((a=t,{B:(0,u.c)("file size format").t(Ke||(Ke=(0,d.Z)(["bytes"]))),KB:(0,u.c)("file size format").t(Be||(Be=(0,d.Z)(["KB"]))),MB:(0,u.c)("file size format").t(We||(We=(0,d.Z)(["MB"]))),GB:(0,u.c)("file size format").t(Ve||(Ve=(0,d.Z)(["GB"])))}[a])))};var helpers_humanSize=(e=0,t,n=!1)=>{const r=e;return t?transformTo(r,t,n):r<Qe.KB?transformTo(r,"B",n,0):transformTo(r,r<Qe.MB?"KB":r<Qe.GB?"MB":"GB",n)},He=n(87562);const toText=(e,t=!1)=>{const n=new He.Z({bulletListMarker:"-",strongDelimiter:"",emDelimiter:"",hr:""}),r={filter:"br",replacement(e,t){var n,r;return"DIV"===(null===(n=t.parentElement)||void 0===n?void 0:n.nodeName)&&1===t.parentElement.childElementCount?t.parentElement.textContent?"\n":"\n\n":(null===(r=t.parentElement)||void 0===r?void 0:r.lastChild)===t&&t.parentElement.textContent?"LI"!==t.parentElement.nodeName?"\n":"":"\n\n"}},a={filter:"img",replacement(e,n){if(!t)return"";const r=n,a=r.alt||r.src;return a?"[".concat(a,"]"):""}},o={filter:"a",replacement:(e,t)=>t.textContent},s={filter:["div"],replacement:e=>e};n.use([()=>n.addRule("replaceAnchor",o),()=>n.addRule("replaceDiv",s),()=>n.addRule("replaceImg",a),()=>n.addRule("replaceBreakLine",r)]),n.escape=c.yR;return n.turndown(e)};var Xe=n(79135);function addresses_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function addresses_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?addresses_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):addresses_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const getByEmail=(e,t="")=>{const n=(0,Xe.GZ)(t);return e.find((({Email:e})=>(0,Xe.GZ)(e)===n))},getAddressFromPlusAlias=(e,t="")=>{const n=t.indexOf("+"),r=t.indexOf("@");if(-1===n||-1===r)return;const a=getByEmail(e,t),{Status:o,Receive:s,Send:i}=a||{};if(!o||!s||!i)return;const c=t.substring(n+1,r);return addresses_objectSpread(addresses_objectSpread({},a),{},{Email:(0,Xe.rf)(null==a?void 0:a.Email,c)})};var Je;const getContactEmail=(e,t)=>e[(0,Xe.mQ)(t||"")],recipientsWithoutGroup=(e,t)=>e.filter((e=>e.Group!==t)),getRecipientLabelDetailed=(e,t)=>{var n;const{Name:r,Address:a}=e||{},o=getContactEmail(t,a);return null!=o&&null!==(n=o.Name)&&void 0!==n&&n.trim()?o.Name:r||a},addresses_getRecipientLabel=(e,t)=>{var n;const{Name:r,Address:a}=e||{},o=getContactEmail(t,a);return null!=o&&null!==(n=o.Name)&&void 0!==n&&n.trim()?o.Name:r&&r!==a?r||"":a},recipientOrGroupToRecipients=e=>e.map((e=>{var t;return e.recipient?e.recipient:null===(t=e.group)||void 0===t?void 0:t.recipients})).flat(),getRecipientOrGroupKey=e=>{var t,n;return e.recipient?e.recipient.Address:null===(t=e.group)||void 0===t||null===(n=t.group)||void 0===n?void 0:n.ID},matchRecipientOrGroup=(e,t)=>getRecipientOrGroupKey(e)===getRecipientOrGroupKey(t),getAddressFromEmail=(e,t="")=>{const n=getAddressFromPlusAlias(e,t);return n||getByEmail(e,t)},getFromAddresses=(e,t="")=>{const n=e.filter((({Status:e,Receive:t,Send:n})=>1===e&&1===t&&1===n)).sort(((e,t)=>(e.Order||0)-(t.Order||0))),r=getAddressFromPlusAlias(e,t);return r&&n.unshift(r),n},findSender=(e=[],t,n=!1)=>{const r=e.filter((e=>1===e.Status)).filter((e=>!n||1===e.Send)).sort(((e,t)=>(e.Order||0)-(t.Order||0)));if(null!=t&&t.AddressID){const e=r.find((e=>e.ID===(null==t?void 0:t.AddressID)));if(e)return e}return r[0]};var qe=n(12923),$e=n.n(qe),et=n(88723);const{OPEN_TAG_AUTOCOMPLETE:tt,CLOSE_TAG_AUTOCOMPLETE:nt,OPEN_TAG_AUTOCOMPLETE_RAW:rt,CLOSE_TAG_AUTOCOMPLETE_RAW:at}={OPEN_TAG_AUTOCOMPLETE:"‹",CLOSE_TAG_AUTOCOMPLETE:"›",OPEN_TAG_AUTOCOMPLETE_RAW:"<",CLOSE_TAG_AUTOCOMPLETE_RAW:">"};const htmlEntities=(e="")=>String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),replaceLineBreaks=e=>e.replace(/(?:\r\n|\r|\n)/g,"<br />");var ot=n(93466),st=n.n(ot),it=n(75153),ct=n.n(it),lt=n(19553),dt=n.n(lt);const ut=[".protonmail_quote",".gmail_quote",".yahoo_quoted",".gmail_extra",".zmail_extra",".moz-cite-prefix","#isForwardContent","#isReplyContent","#mailcontent:not(table)","#origbody","#reply139content","#oriMsgHtmlSeperator",'blockquote[type="cite"]','[name="quote"]'],pt=["-----Original Message-----"],mt=ut.map((e=>"".concat(e,":not(:empty)"))).join(","),split=(e,t)=>{const n=e.indexOf(t);return-1===n?[e,""]:[e.slice(0,n),e.slice(n+t.length)]},locateBlockquote=e=>{if(!e)return["",""];const t=e.querySelector("body")||e,n=t.innerHTML||"",r=t.textContent||"";let a=null;const testBlockquote=e=>{const t=e.textContent||"",[a="",o=""]=split(r,t);if(a.trim().length&&!o.trim().length){const t=e.outerHTML||"",[r=""]=split(n,t);return[r,t]}return null};return[...t.querySelectorAll(mt)].forEach((e=>{null===a&&(a=testBlockquote(e))})),null===a&&pt.forEach((e=>{null===a&&((e,t)=>{var n;const r=null===(n=e.ownerDocument)||void 0===n?void 0:n.evaluate("//*[text()='".concat(t,"']"),e,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null),a=[];let o=null;for(;o=null==r?void 0:r.iterateNext();)a.push(o);return a})(t,e).forEach((e=>{null===a&&(a=testBlockquote(e))}))})),a||[n,""]},gt={applyAttributesTableElements:!1,removeStyleTags:!0,preserveFontFaces:!1,preserveImportant:!1,preserveMediaQueries:!1,preserveKeyFrames:!1,preservePseudos:!1},jt={ignore:ut.filter((e=>e.startsWith("."))).map((e=>e.replace(".",""))).concat(/proton-.*/).concat(/protonmail.*/)},bt=["position","left","right","top","bottom"],matches=(e,t)=>(e.matches||e.msMatchesSelector).call(e,t),parseInDiv=e=>{const t=document.createElement("div");return t.innerHTML=e,t},isHTMLEmpty=e=>!e||"<div><br /></div>"===e||"<div><br></div>"===e;var yt,ht=n(8432);let It;!function(e){e.Georgia="georgia",e.Arial="arial",e.Helvetica="helvetica",e.Monospace="menlo, consolas, courier new, monospace",e.Tahoma="tahoma, sans-serif",e.Verdana="verdana",e["Times New Roman"]="times new roman",e["Trebuchet MS"]="trebuchet ms"}(It||(It={}));const ft=[10,12,14,16,18,20,22,24,26],Mt=["#FFFFFF","#DADADA","#B5B5B5","#909090","#6B6B6B","#464646","#222222","#F6CBCB","#EC9798","#E36667","#ED4139","#CF3932","#9A2B25","#681D19","#CDE1F2","#9CC3E5","#6CA6D9","#3B83C2","#2A47F6","#145390","#0F3A62","#D7EAD3","#B3D6A9","#8FC380","#77F241","#66A657","#3A762B","#29501F","#FFF2CD","#FEE59C","#FCD86F","#FDF84E","#F2C246","#BE8F35","#7F6124"],Nt=It.Arial,xt=14,vt=/rgb\((\d+)\s*,\s*(\d+),\s*(\d+)\)/,wt=["image/gif","image/jpeg","image/png","image/bmp"],getSquireRef=e=>e.current,SQUIRE_CONFIG=e=>({sanitizeToDOMFragment(t,n,r){const a=r._doc,o=t?e?(0,et.kQ)(t):(0,et.hh)(t):null;return o?a.importNode(o,!0):a.createDocumentFragment()}}),initSquire=async(e,t,r)=>{(e=>{const t=e.head||e.getElementsByTagName("head")[0],n=e.createElement("style");n.setAttribute("type","text/css"),n.setAttribute("rel","stylesheet"),n.appendChild(e.createTextNode('\n        // custom scroll\n        body:not(.isDarkMode) {\n            --scrollbar-thumb-color: rgba(0, 0, 0, 0.35);\n            --scrollbar-thumb-hover-color: rgba(0, 0, 0, 0.5);\n        }\n\n        body.isDarkMode {\n            --scrollbar-thumb-color: rgba(255, 255, 255, 0.2);\n            --scrollbar-thumb-hover-color: rgba(255, 255, 255, 0.5);\n        }\n\n        * {\n            scrollbar-width: thin;\n            scrollbar-color: var(--scrollbar-thumb-color) transparent;\n        }\n        *::-webkit-scrollbar {\n            width: 0.625rem; /* 10px */\n            height: 0.625rem;\n        }\n        *::-webkit-scrollbar-thumb {\n            border: .125rem solid transparent; /* 2px */\n            background-clip: padding-box;\n            border-radius: .3125rem; /* 5px */\n            background-color: var(--scrollbar-thumb-color, rgba(0, 0, 0, 0.35) );\n        }\n        *::-webkit-scrollbar-track {\n            background-color: transparent;\n        }\n        *::-webkit-scrollbar-thumb:horizontal:hover,\n        *::-webkit-scrollbar-thumb:vertical:hover {\n            background-color: var(--scrollbar-thumb-hover-color, rgba(0, 0, 0, 0.5) );\n        }\n        *::-webkit-scrollbar-corner {\n            visibility: hidden;\n        }\n\n        html {\n            height: 100%;\n            font-size: 100%;\n            cursor: text;\n        }\n\n        body {\n            box-sizing: border-box;\n            font-family: Arial, \'Helvetica Neue\', Helvetica, sans-serif;\n            font-size: .875rem; /* 14 */\n            line-height: 1.65;\n            color: #222;\n            background: #fff;\n            /* to fix, CSS var are not passing through the iframe */\n            word-wrap: break-word;\n            margin: 0;\n        }\n\n        body a {\n            color: #657ee4;\n        }\n\n        [id="squire"] {\n            outline: none;\n            padding: .5rem .5rem .5rem 0; // TODO: check other integrations\n        }\n\n        [id="ellipsis"] {\n            color: inherit;\n            border: 1px solid silver;\n            background-color: white;\n            border-radius: 3px;\n            text-decoration: none;\n            cursor: pointer;\n            font-size: 1.2em;\n            padding: 0 .5em;\n            margin: 0 0.5rem 0.5rem 0.5rem;\n        }\n\n        [id="ellipsis"]:hover,\n        [id="ellipsis"]:focus {\n            border-color: darkgrey;\n            background-color: whitesmoke;\n        }\n\n        blockquote {\n            padding: 0 0 0 1rem;\n            margin: 0;\n            border-left: 4px solid #e5e5e5;\n        }\n\n        blockquote blockquote blockquote {\n            padding-left: 0;\n            margin-left: 0;\n            border: none;\n        }\n\n        .proton-embedded:not([src]) {\n            position: relative;\n            min-height: 38px;\n            border: 1px solid;\n            border-color: #444 #CCC #CCC #444;\n            background: url(\'/assets/img/icons/broken-img.png\') no-repeat 0 50% white;\n        }\n\n        .proton-embedded:not([src]):not([alt]) {\n            background-position-x: 50%;\n        }\n\n        .proton-embedded[alt]:not([src])::after {\n            position: absolute;\n            top: 0;\n            left: 0;\n            right: 0;\n            bottom: 0;\n            content: " " attr(alt);\n            white-space: nowrap;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            padding: 10px 0 0 20px;\n            color: rgba(0,0,0,0.5);\n            background: url(\'/assets/img/icons/broken-img.png\') no-repeat 0 50% white;\n        }\n\n        /* see embedded.scss rules */\n        .proton-embedded:not([width]):not([style*="width"]) {\n            max-width: 100%;\n            min-width: 38px;\n        }\n\n        .protonmail_quote {\n            position: relative;\n        }\n\n        ul, ol {\n            padding-left: 1.4286em;\n        }\n\n        li {\n            list-style-position: inside;\n        }\n\n        // Handle outlook https://github.com/ProtonMail/Angular/issues/6711\n        p.MsoNormal, li.MsoNormal, div.MsoNormal {\n            margin: 0;\n        }\n   ')),t.appendChild(n),e.childNodes[0].className="editor-squire-iframe"})(e);const{default:a}=await n.e(5510).then(n.t.bind(n,15510,23)),o=(0,u.c)("Title").t(yt||(yt=(0,d.Z)(["Expand content"])));e.body.innerHTML='\n        <div id="squire"></div>\n        <div id="ellipsis-container">\n            <button id="ellipsis" title="'.concat(o,'" style="display: none;">&hellip;</button>\n        </div>\n    ');const s=e.body.querySelector("#squire"),i=e.querySelector("#ellipsis-container"),c=e.querySelector("#ellipsis"),l=new a(s,SQUIRE_CONFIG(t));((e,t)=>{const n=e.insertHTML;e.insertHTML=async(r,a)=>{if(a)try{const n=SQUIRE_CONFIG(t).sanitizeToDOMFragment(r,a,e),{firstElementChild:o,lastElementChild:s}=n;if(o&&o===s&&"IMG"===o.tagName)return}catch(e){console.error(e)}n.call(e,r,a)}})(l,t),null==c||c.addEventListener("click",r);const p=[e.documentElement,e.body,i];return e.addEventListener("click",(t=>{if(p.includes(t.target)){var n,r;if(null===(n=e.defaultView)||void 0===n||null===(r=n.getSelection())||void 0===r||!r.toString().length){const t=e.querySelectorAll("#squire > div:not(.protonmail_signature_block)"),n=t.length>0?t[t.length-1]:void 0,r=(null==n?void 0:n.querySelectorAll("br"))||[],a=(null==r?void 0:r.length)>0?r[(null==r?void 0:r.length)-1]:void 0,o=e.createRange();a?o.setStartBefore(a):n&&(o.selectNode(n),o.collapse(!1)),l.setSelection(o)}l.focus()}})),l};var Dt,St,Ot,At,Ct=n(35482),Et=n(24311),Lt=n(12972),Pt=n(67371),Zt=n(89234),Tt=n(76972),kt=n(8800);const formatSimpleDate=e=>(0,Ct.Z)(e)?(0,Et.Z)(e,"p",{locale:kt.RW}):(0,Lt.Z)(e)?(0,u.c)("Time").t(Dt||(Dt=(0,d.Z)(["Yesterday"]))):(0,Pt.Z)(e)?(0,Et.Z)(e,"EEEE",{locale:kt.RW}):(0,Et.Z)(e,"PPP",{locale:kt.RW}),formatFullDate=e=>(0,Et.Z)(e,"PPPPp",{locale:kt.RW}),formatScheduledDateString=e=>{if((0,Ct.Z)(e))return(0,u.c)("Date label").t(St||(St=(0,d.Z)(["today"])));if((0,Tt.Z)(e))return(0,u.c)("Date label").t(Ot||(Ot=(0,d.Z)(["tomorrow"])));const t=(0,Et.Z)(e,"PPPP",{locale:kt.RW});return(0,u.c)("Date label").t(At||(At=(0,d.Z)(["on ",""])),t)},formatScheduledTimeString=e=>(0,Et.Z)(e,"p",{locale:kt.RW}),formatDateToHuman=e=>({dateString:formatScheduledDateString(e),formattedTime:formatScheduledTimeString(e)});let zt=0;var helpers_generateUID=e=>"".concat(e||"id","-").concat(zt++),_t=n(58920),Rt=n(56033),Gt=n(98050),Yt=n(90470);var Ut=n(90688),Ft=n(83032),Kt=n(83165);const encryptAttachment=async(e,{name:t,type:n,size:r}={},a,o,s)=>{const{message:i,signature:c}=await(0,Ft.Z)({armor:!1,detached:!0,data:e,publicKeys:o,privateKeys:s}),{asymmetric:l,encrypted:d}=await(0,Rt.Pe)(i);return{Filename:t,MIMEType:n,FileSize:r,Inline:a,signature:c?c.packets.write():void 0,Preview:e,keys:l[0],data:d[0]}},getSessionKey=async(e,t)=>{const n=(0,Gt.h6)((0,Gt.NV)(e.KeyPackets)||""),r={message:await(0,Rt.FC)(n),privateKeys:t},a=await(0,Kt.U)(r);if(void 0===a)throw new Error("Error while decrypting session keys");return a},getDecryptedAttachment=async(e,t,n,r)=>{const a=await(({ID:e=""}={},t)=>t({method:"get",url:"mail/v4/attachments/".concat(e),output:"arrayBuffer"}))(e,r);try{const r=await getSessionKey(e,n.privateKeys),o=null!=t&&t.senderVerified?t.senderPinnedKeys:void 0;return await(async(e,t,n,r)=>{const a=new Uint8Array(e);try{return(0,_t.WB)({message:await(0,Rt.FC)(a),sessionKeys:[t],signature:n?await(0,Rt.o$)(n):void 0,publicKeys:r,format:"binary"})}catch(e){throw console.error(e),e}})(a,r,e.Signature,o)}catch(t){const n=(0,Gt.w3)([(0,Gt.h6)((0,Ut.N)(e.KeyPackets)||""),new Uint8Array(a)]),r=new Error("Attachment decryption error");throw Object.assign(r,{data:e,binary:n,error:t}),r}},getAndVerify=async(e={},t,n,r=!1,a,o,s)=>{let i;const c=e.ID||"";if(e.Preview)return{data:e.Preview,filename:"preview",signatures:[],verified:Yt.bR.NOT_SIGNED};const l=a(c);if(!r&&l)i=l;else{i=!e.KeyPackets?l:await getDecryptedAttachment(e,t,n,s)}return o(c,i),i},get=(e={},t,n,r,a,o)=>getAndVerify(e,t,n,!1,r,a,o);function messageEmbeddeds_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function messageEmbeddeds_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?messageEmbeddeds_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):messageEmbeddeds_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Bt=["image/gif","image/jpeg","image/png","image/bmp"],trimQuotes=e=>{const t="".concat(e||"").trim();return['"',"'","<"].indexOf(t.charAt(0))>-1&&['"',"'",">"].indexOf(t.charAt(t.length-1))>-1?t.substr(1,t.length-2):t},isEmbeddable=e=>Bt.includes(e),readContentIDandLocation=({Headers:e={}}={})=>{let t="",n="";return e["content-id"]&&(t=trimQuotes(e["content-id"])),e["content-location"]&&(n=trimQuotes(e["content-location"])),{cid:t,cloc:n}},matchSameCidOrLoc=(e,t,n)=>""!==t&&e.cid===t||""!==n&&e.cloc===n,generateCid=(e,t)=>{const n=((e,t)=>{const n=1<<t,r=Math.ceil(32/t),a=(r-1)*t,o=e&(1<<a)-1,s=e>>>a;if(0===s)return o.toString(n);const i=s.toString(n),c=o.toString(n),l=r-i.length-c.length;return i+"0".repeat(l)+c})(((e="")=>e.split("").reduce(((e,t)=>31*e+t.charCodeAt(0)|0),0))(e),4),[,r]=(0,Xe.Od)(t);return"".concat(n,"@").concat(r)},setEmbeddedAttr=(e,t,n)=>{e?n.setAttribute("data-embedded-img","cid:".concat(e)):t&&n.setAttribute("data-embedded-img","cloc:".concat(t))},createBlob=(e,t)=>{const n=new Blob([t],{type:e.MIMEType});return(window.URL||window.webkitURL).createObjectURL(n)},createEmbeddedImageFromUpload=e=>{const{cid:t,cloc:n}=readContentIDandLocation(e.attachment);return{type:"embedded",id:helpers_generateUID("embedded"),cid:t,cloc:n,tracker:void 0,attachment:e.attachment,status:"loaded"}},findEmbedded=(e,t,n)=>{let r=[];return e||t?(e&&(r=['img[src="'.concat(e,'"]'),'img[src="cid:'.concat(e,'"]'),'img[data-embedded-img="'.concat(e,'"]'),'img[data-embedded-img="cid:'.concat(e,'"]'),'img[data-src="cid:'.concat(e,'"]'),'img[proton-src="cid:'.concat(e,'"]')]),t&&(r=[...r,'img[proton-src="'.concat(t,'"]')]),querySelectorAll({document:n},r.join(", "))):[]},replaceEmbeddedAttachments=(e,t=[])=>{const n=getEmbeddedImages(e).map((e=>{const n=t.find((t=>{const{cid:n,cloc:r}=readContentIDandLocation(t);return matchSameCidOrLoc(e,n,r)}));return n?messageEmbeddeds_objectSpread(messageEmbeddeds_objectSpread({},e),{},{attachment:n}):e}));return updateImages(e.messageImages,void 0,void 0,n)},markEmbeddedImagesAsLoaded=(e,t)=>e.map((e=>{const n=t.find((t=>t.attachment===e.attachment));return n?messageEmbeddeds_objectSpread(messageEmbeddeds_objectSpread({},e),{},{url:null==n?void 0:n.blob,status:"loaded"}):e})),getImage=(e,t=0)=>({method:"get",url:"images",params:{Url:e,DryRun:t}});var Wt=n(26438);function messageRemotes_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function messageRemotes_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?messageRemotes_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):messageRemotes_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Vt=["url","xlink:href","srcset","src","svg","background","poster"],updateRemoteImages=(e,t,n)=>{const r=e.get(t);if(!r||!r.messageImages)return;const a=getRemoteImages(r).map((e=>n.find((t=>t.id===e.id))||e)),o=updateImages(r.messageImages,void 0,a,void 0);updateMessageCache(e,t,{messageImages:o})},removeProtonPrefix=e=>{Vt.forEach((t=>{const n="proton-".concat(t);e.hasAttribute(n)&&(e.setAttribute(t,e.getAttribute(n)),e.removeAttribute(n))}))},loadBackgroundImages=({images:e,document:t})=>{if(!t||!e)return;const n=null==t?void 0:t.querySelectorAll("[style]");null==n||n.forEach((t=>{const n=t.getAttribute("style");if(n&&n.includes("proton-url")){var r;const a=null===(r=n.match(/proton-url\((.*?)\)/))||void 0===r?void 0:r[1],o=null==a?void 0:a.replace(/('|")/g,""),s=e.find((e=>o===e.originalURL));s&&s.url&&a&&t.setAttribute("style",n.replace(a,s.url).replace("proton-url","url"))}}))},loadElementOtherThanImages=(e,t)=>{const n=e.filter((e=>{var t;return"IMG"!==(null===(t=e.original)||void 0===t?void 0:t.tagName)})),r=Vt.map((e=>"xlink:href"===e?"[*|href]:not([href])":"[proton-".concat(e,"]"))).join(",");(t?t.querySelectorAll(r):[]).forEach((e=>{Vt.forEach((t=>{const r="proton-".concat(t);if(e.hasAttribute(r)){const a=e.getAttribute(r),o=n.find((e=>a===e.originalURL));o&&o.url&&e.setAttribute(t,o.url),e.removeAttribute(r)}}))}))},loadImagesWithoutProxy=async(e,t,n,r)=>{const a=t.filter((e=>"not-loaded"===e.status)),o=Promise.all(a.map((async e=>{try{return await(async e=>new Promise(((t,n)=>{const r=document.createElement("img");r.src=e,r.onload=t,r.onerror=n})))(e.url),[e,void 0]}catch(t){return[e,t]}}))),s=a.map((e=>messageRemotes_objectSpread(messageRemotes_objectSpread({},e),{},{status:"loading"})));updateRemoteImages(n,e,s);const i=await o;a.forEach((e=>{removeProtonPrefix(e.original)}));const c=i.map((([e,t])=>messageRemotes_objectSpread(messageRemotes_objectSpread({},e),{},{originalURL:e.url,error:t,status:"loaded"})));loadElementOtherThanImages(c,r),loadBackgroundImages({document:r,images:c}),updateMessageCache(n,e,{document:r}),updateRemoteImages(n,e,c)},loadRemoteImages=async(e,t,n,r,a,o)=>(await(0,Wt.D)(0),e?(async(e,t,n,r,a)=>{const o=t.filter((e=>"not-loaded"===e.status)),s=Promise.all(o.map((async e=>{if(!e.url)return{image:e,error:"No URL"};try{const t=await r(messageRemotes_objectSpread(messageRemotes_objectSpread({},getImage(e.url)),{},{output:"raw",silence:!0}));return{image:e,blob:await t.blob(),tracker:t.headers.get("x-pm-tracker-provider")||""}}catch(t){return{image:e,error:t}}}))),i=o.map((e=>messageRemotes_objectSpread(messageRemotes_objectSpread({},e),{},{url:void 0,status:"loading"})));updateRemoteImages(n,e,i);const c=(await s).map((({image:e,blob:t,tracker:n,error:r})=>messageRemotes_objectSpread(messageRemotes_objectSpread({},e),{},{originalURL:e.url,url:t?(window.URL||window.webkitURL).createObjectURL(t):void 0,error:r,tracker:n,status:"loaded"})));loadElementOtherThanImages(c,a),loadBackgroundImages({document:a,images:c}),updateMessageCache(n,e,{document:a}),updateRemoteImages(n,e,c)})(t,n,r,a,o):loadImagesWithoutProxy(t,n,r,o));function messageImages_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function messageImages_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?messageImages_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):messageImages_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Qt=(()=>{const e=Vt.map((e=>"proton-".concat(e))).join("|");return"(".concat(e,")")})(),getAnchor=(e,t)=>e?e.querySelector(".proton-image-anchor[data-proton-".concat(t.type,'="').concat(t.id,'"]')):null,getRemoteImages=({messageImages:e})=>(null==e?void 0:e.images.filter((({type:e})=>"remote"===e)))||[],getEmbeddedImages=({messageImages:e})=>(null==e?void 0:e.images.filter((({type:e})=>"embedded"===e)))||[],updateImages=(e,t,n,r)=>{const a=messageImages_objectSpread(messageImages_objectSpread(messageImages_objectSpread({},{hasRemoteImages:!1,hasEmbeddedImages:!1,showRemoteImages:!1,showEmbeddedImages:!1,images:[]}),e||{}),t||{}),o=getRemoteImages({messageImages:a}),s=getEmbeddedImages({messageImages:a}),i=[...void 0!==n?n:o,...void 0!==r?r:s];return messageImages_objectSpread(messageImages_objectSpread({},a),{},{images:i})},insertImageAnchor=(e,t,n)=>{var r;const a=document.createElement("span");return a.classList.add("proton-image-anchor","inline-block"),a.setAttribute("data-proton-".concat(t),e),null===(r=n.parentElement)||void 0===r||r.replaceChild(a,n),e},Ht="PGPAttachment",getHeaders=({generatedFileName:e="",contentDisposition:t="",contentId:n="",transferEncoding:r="",contentType:a=""})=>{const o={},s="; filename=".concat(JSON.stringify(e));return o["content-disposition"]=t+s,/^.*@mailparser$/.test(n)||(o["content-id"]=/^<.*>$/.test(n)?n:"<".concat(n,">")),"inline"===t.toLowerCase()&&(o.embedded=1),r&&(o["content-transfer-encoding"]=r),o["content-type"]=a+s,o},convertSingle=(e,t,n,r,a)=>{const o=((e,t,n)=>"".concat(Ht,"_").concat(e.ID,"_").concat(t.checksum,"_").concat(n))(e,t,n),s={ID:o,Headers:getHeaders(t),Name:t.generatedFileName,KeyPackets:null,MIMEType:t.contentType,Size:t.length,Encrypted:ve.FB.PGP_MIME};return a(o,{data:t.content,filename:"",signatures:[],verified:Yt.bR.NOT_SIGNED}),s},convert=(e,t,n,r)=>t.map(((t,n)=>convertSingle(e,t,n,0,r)));var Xt;function messageDraft_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function messageDraft_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?messageDraft_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):messageDraft_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Jt="protonmail_quote",keepEmbeddeds=e=>{const t=getEmbeddedImages(e);return{Attachments:t.map((e=>e.attachment)),messageImages:updateImages(e.messageImages,void 0,[],t)}},handleActions=(e,t={},n=[])=>{const r=!(null==t||!t.decryptedSubject);switch(e){case ve.Xh.REPLY:return((e,t=!1)=>{var n,r,a;const o=messages_formatSubject(t?e.decryptedSubject:null===(n=e.data)||void 0===n?void 0:n.Subject,ce),s=te(e.data)||ne(e.data)?null===(r=e.data)||void 0===r?void 0:r.ToList:null===(a=e.data)||void 0===a?void 0:a.ReplyTos,{Attachments:i,messageImages:c}=keepEmbeddeds(e);return{data:{Subject:o,ToList:s,Attachments:i},messageImages:c}})(t,r);case ve.Xh.REPLY_ALL:return((e,t=!1,n)=>{const{data:r={},decryptedSubject:a=""}=e,o=messages_formatSubject(t?a:r.Subject,ce),{Attachments:s,messageImages:i}=keepEmbeddeds(e);if(te(e.data)||ne(e.data))return{data:{Subject:o,ToList:r.ToList,CCList:r.CCList,BCCList:r.BCCList,Attachments:s},messageImages:i};const c=r.ReplyTos,l=n.map((({Email:e=""})=>(0,Xe.GZ)(e)));return{data:{Subject:o,ToList:c,CCList:(0,xe.Tw)([...r.ToList||[],...r.CCList||[]]).filter((({Address:e=""})=>!l.includes((0,Xe.GZ)(e)))),Attachments:s},messageImages:i}})(t,r,n);case ve.Xh.FORWARD:return((e,t=!1)=>{const{data:n,decryptedSubject:r=""}=e,a=messages_formatSubject(t?r:null==n?void 0:n.Subject,le),o=null==n?void 0:n.Attachments,{messageImages:s}=keepEmbeddeds(e);return{data:{Subject:a,ToList:[],Attachments:o},messageImages:s}})(t,r);case ve.Xh.NEW:default:return(({data:{Subject:e="",ToList:t=[],CCList:n=[],BCCList:r=[]}={},decryptedSubject:a=""}={},o=!1)=>({data:{Subject:o?a:e,ToList:t,CCList:n,BCCList:r}}))(t,r)}},generateBlockquote=(e,t,n)=>{var r,a,o,s,i,c;const l=formatFullDate(elements_getDate(null==e?void 0:e.data,"")),p=null==e||null===(r=e.data)||void 0===r||null===(a=r.Sender)||void 0===a?void 0:a.Name,m="&lt;".concat(null==e||null===(o=e.data)||void 0===o||null===(s=o.Sender)||void 0===s?void 0:s.Address,"&gt;"),g=(0,u.c)("Message").t(Xt||(Xt=(0,d.Z)(["On ",", "," "," wrote:"])),l,p,m),j=null!==(i=e.errors)&&void 0!==i&&i.decryption?null===(c=e.data)||void 0===c?void 0:c.Body:V(e.data)?plainTextToHTML(e.data,e.decryptedBody,t,n):getDocumentContent(((e,t)=>{if(!e||!t)return e;const n=e.cloneNode(!0),{showEmbeddedImages:r,showRemoteImages:a}=t;return t.images.forEach((e=>{const t=getAnchor(n,e),o=null==t?void 0:t.parentElement,{original:s}=e;t&&o&&s&&("embedded"===e.type&&(setEmbeddedAttr(e.cid,e.cloc,s),s.classList.add("proton-embedded"),r&&s.setAttribute("src",(null==e?void 0:e.url)||"")),"remote"===e.type&&a&&s.setAttribute("src",(null==e?void 0:e.url)||""),o.replaceChild(s,t))})),n})(e.document,e.messageImages));return'<div class="'.concat(Jt,'">\n        ').concat("‐‐‐‐‐‐‐ Original Message ‐‐‐‐‐‐‐","<br>\n        ").concat(g,'<br>\n        <blockquote class="').concat(Jt,'" type="cite">\n            ').concat(j,"\n        </blockquote><br>\n    </div>")},createNewDraft=(e,t,n,r,a)=>{var o,s,i,c;const l=(null==t||null===(o=t.data)||void 0===o?void 0:o.MIMEType)||n.DraftMIMEType,{FontFace:d,FontSize:u,RightToLeft:p}=n;let m=0;n.AttachPublicKey&&(m=(0,N.ft)(m,x.FLAG_PUBLIC_KEY)),n.Sign&&(m=(0,N.ft)(m,x.FLAG_SIGN));const{data:{Subject:g="",ToList:j=[],CCList:b=[],BCCList:y=[],Attachments:h=[]}={},messageImages:I}=handleActions(e,t,r),[f,M]=((e,t)=>e.reduce(((e,n)=>{var r,a;return null!==(r=n.ID)&&void 0!==r&&r.startsWith(Ht)?e[1].push(new File([null===(a=t(n.ID))||void 0===a?void 0:a.data],n.Name||"",{type:n.MIMEType})):e[0].push(n),e}),[[],[]]))(h,a),v=getOriginalTo(null==t?void 0:t.data),w=null==t||null===(s=t.data)||void 0===s?void 0:s.AddressID,D=[...(null==t?void 0:t.initialAttachments)||[],...M],S=((e,t="",n)=>{const r=getFromAddresses(e,t);return r.find((e=>e.ID===n))||r[0]})(r,v,null==t||null===(i=t.data)||void 0===i?void 0:i.AddressID),O=(null==S?void 0:S.ID)||"",A=S?{Name:S.DisplayName,Address:S.Email}:{Name:"",Address:""},C=e===ve.Xh.NEW||null==t||null===(c=t.data)||void 0===c?void 0:c.ID;let E=e===ve.Xh.NEW?null!=t&&t.decryptedBody?null==t?void 0:t.decryptedBody:"":generateBlockquote(t||{},n,r);E=e===ve.Xh.NEW&&null!=t&&t.decryptedBody?insertSignature(E,null==S?void 0:S.Signature,e,n,!0):insertSignature(E,null==S?void 0:S.Signature,e,n),E=d||u?'<div style="font-family: '.concat(d||Nt,"; font-size: ").concat("".concat(u||xt,"px"),';">').concat(E,"</div>"):E;const L=V({MIMEType:l}),P=L?void 0:parseInDiv(E),Z=L?"\n\n".concat(exportPlainText(E)):void 0;return{localID:(0,ht.D)(ie),data:{ToList:j,CCList:b,BCCList:y,Subject:g,PasswordHint:"",Attachments:f,MIMEType:l,RightToLeft:p,Flags:m,Sender:A,AddressID:O,Unread:0},ParentID:C,document:P,plainText:Z,action:e,originalTo:v,originalAddressID:w,initialized:!0,messageImages:I,initialAttachments:D}};var qt;const $t="protonmail_signature_block",en="protonmail_signature_block-user",tn="protonmail_signature_block-empty",getProtonSignature=(e={})=>0===e.PMSignature?"":M.Zs,createSpace=(e="")=>{const t=e?'<div class="'.concat(e,'">'):"<div>";return"".concat(t,"<br /></div>")},getClassNamesSignature=(e,t)=>{const n=isHTMLEmpty(e),r=!t;return{userClass:n?tn:"",protonClass:r?tn:"",containerClass:n&&r?tn:""}},templateBuilder=(e="",t={},n=!1,r=!1)=>{const a=getProtonSignature(t),{userClass:o,protonClass:s,containerClass:i}=getClassNamesSignature(e,a),c=((e,t,n=!1)=>{const r=isHTMLEmpty(e);return{start:r&&!t?createSpace():createSpace()+createSpace(),end:n?createSpace():"",between:!r&&t?createSpace():""}})(e,a,n),l=((e,...t)=>function format(e=""){let t=-1;return e.replace(/\n(\s+)/g,((e,n)=>(t<0&&(t=n.replace(/\t/g,"    ").length),"\n".concat(n.slice(Math.min(n.length,t))))))}(e.slice(0,t.length+1).map(((e,n)=>(0===n?"":t[n-1])+e)).join("")))(qt||(qt=(0,d.Z)(['\n        <div class="'," ",'">\n            <div class="'," ",'">\n                ',"\n            </div>\n            ",'\n            <div class="'," ",'">\n                ',"\n            </div>\n        </div>\n    "])),$t,i,en,o,replaceLineBreaks(e),c.between,"protonmail_signature_block-proton",s,replaceLineBreaks(a));return r?(0,et.yw)(l):"".concat(c.start).concat((0,et.yw)(l)).concat(c.end)},insertSignature=(e="",t="",n,r,a=!1)=>{const o=a?"beforeend":"afterbegin",s=templateBuilder(t,r,n!==ve.Xh.NEW),i=parseInDiv(e);return i.insertAdjacentHTML(o,s),i.innerHTML},nn="--protonSignature--",rn=$e()("default",{breaks:!0,linkify:!0}),addNewLinePlaceholders=(e,t)=>(e.startsWith("\n")?e:"\n".concat(e)).replace(/((\r\n|\n)\s*(\r\n|\n))+/g,(e=>((e,t)=>e.replace(/(\r\n|\n)/g,(e=>e+t)).replace(new RegExp("".concat(t,"$"),"g"),""))(e,t))).replace(/^\n/g,"").replace(/(>[^\r\n]*(?:\r\n|\n))(\s*[^>])/g,((e,t,n)=>"".concat(t,"\n").concat(n))),textToHtml=(e="",t,n={})=>{const r=((e,t,n={})=>{const r=templateBuilder(t,n,!1,!0),a=toText(r).replace(/\u200B/g,"").trim();return e.replace(a,nn)})(e,t,n),a=(e=>{let t="";do{t=Math.random().toString(36).substring(3)+Math.random().toString(36).substring(3)}while(e.includes(t));return t})(r),o=addNewLinePlaceholders(((e="")=>e.replace(/\\/g,"\\\\"))(r),a);return((e,t,n,r={})=>{const a=templateBuilder(t,r,!1,!n.startsWith(nn));return e.replace(nn,a)})(((e,t)=>e.replace(new RegExp(t,"g"),""))(rn.render(o),a),t,r,n)},getPlainTextContent=e=>e.plainText||"",getDocumentContent=e=>{const t=(null==e?void 0:e.querySelector("body"))||e;return(null==t?void 0:t.innerHTML)||""},getContent=e=>V(e.data)?getPlainTextContent(e):getDocumentContent(e.document),setDocumentContent=(e,t)=>(e?e.innerHTML=t:e=parseInDiv(t),e),setContent=(e,t)=>{V(e.data)?((e,t)=>{e.plainText=t})(e,t):e.document=setDocumentContent(e.document,t)},exportPlainText=e=>toText(e,!0).replace(/\u200B/g,""),getPlainText=(e,t)=>V(e.data)?getPlainTextContent(e):t?exportPlainText(getContent(e)):void 0,plainTextToHTML=(e,t,n={},r)=>{const a=findSender(r,e);return textToHtml(t,(null==a?void 0:a.Signature)||"",n)},querySelectorAll=(e,t)=>{var n;return[...(null==e||null===(n=e.document)||void 0===n?void 0:n.querySelectorAll(t))||[]]};function messages_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function messages_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?messages_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):messages_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const{ALL_DRAFTS:an,ALL_SENT:on,DRAFTS:sn,SENT:cn,SPAM:ln,INBOX:dn}=M.C7,getAttachmentCounts=(e,t)=>{const n=getAttachments({Attachments:e}).reduce(((e,{Size:t=0}={})=>e+ +t),0);const r=helpers_humanSize(n),a=getEmbeddedImages({messageImages:t}).map((({attachment:e})=>e)),o=(0,xe.uw)(a,(e=>e.ID)),s=e.filter((e=>!o.find((t=>e.ID===t.ID)))).length,i=o.length;return{size:n,sizeLabel:r,pureAttachmentsCount:s,embeddedAttachmentsCount:i,attachmentsCount:s+i}},mergeMessages=(e,t)=>(null!=e&&e.document&&t.document&&setContent(e,getContent(t)),messages_objectSpread(messages_objectSpread(messages_objectSpread({},e),t),{},{data:messages_objectSpread(messages_objectSpread({},null==e?void 0:e.data),t.data),errors:messages_objectSpread(messages_objectSpread({},null==e?void 0:e.errors),t.errors)})),getMessagesAuthorizedToMove=(e,t)=>e.filter((e=>{const{LabelIDs:n}=e;return!(n.includes(sn)||n.includes(an)||n.includes(cn)||n.includes(on))||![ln,dn].includes(t)})),getMessageHasData=e=>!!e.data;function MessageProvider_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function MessageProvider_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MessageProvider_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MessageProvider_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const un=(0,o.createContext)(null),useMessageCache=()=>(0,o.useContext)(un),updateMessageCache=(e,t,n)=>{const r=e.get(t),a=mergeMessages(r,n);return e.set(t,a),a},getLocalID=(e,t)=>[...e.keys()].filter((e=>null==e?void 0:e.startsWith(ie))).find((n=>{var r,a;return(null===(r=e.get(n))||void 0===r||null===(a=r.data)||void 0===a?void 0:a.ID)===t}))||t;var containers_MessageProvider=({children:e,cache:t})=>{const{subscribe:n}=(0,Ie.Z)(),r=(0,fe.Z)((()=>(0,Me.Z)())),a=t||r;return(0,o.useEffect)((()=>n((e=>({Messages:t})=>{if(Array.isArray(t))for(const{ID:n,Action:r,Message:a}of t){const t=getLocalID(e,n);if(e.has(t)&&(r===M.P.DELETE&&e.delete(t),r===M.P.UPDATE_DRAFT||r===M.P.UPDATE_FLAGS)){const n=e.get(t),o=te(a),s=re(a),i=messages_isDraft(a);if(n.data){const c=parseLabelIDsInEvent(n.data,a);let l={};const d={};r===M.P.UPDATE_DRAFT&&(n.sending||(l={initialized:void 0,data:{Body:void 0}}),o&&!s&&(d.isSentDraft=!0)),i||delete c.NumAttachments,e.set(t,MessageProvider_objectSpread(MessageProvider_objectSpread(MessageProvider_objectSpread(MessageProvider_objectSpread({},n),l),d),{},{data:MessageProvider_objectSpread(MessageProvider_objectSpread(MessageProvider_objectSpread({},n.data),c),l.data)}))}}}})(a))),[]),(0,j.jsx)(un.Provider,{value:a,children:e})};const getWindowSize=()=>[window.innerWidth,window.innerHeight];var hooks_useWindowSize=()=>{const[e,t]=(0,o.useState)((()=>getWindowSize()));return(0,o.useEffect)((()=>{const reducer=(e,t)=>e[0]===t[0]&&e[1]===t[1]?e:t,e=(0,c.Ds)((()=>{t((e=>reducer(e,getWindowSize())))}),100);return window.addEventListener("resize",e),t((e=>reducer(e,getWindowSize()))),()=>{window.removeEventListener("resize",e)}}),[]),e},pn=n(69986),mn=n(4376);function composerPositioning_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function composerPositioning_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?composerPositioning_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):composerPositioning_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const gn=640,jn=15,computeRightPosition=(e,t,n)=>{if(gn*t+jn*(t+1)<n)return gn*e+jn*(e+1);return jn+(n-30-gn)/(t-1)*e},computeHeight=e=>{const t=e-10-80;return t>640?640:t};var bn=n(81557),yn=n(53939),hn=n(23577),In=n(22766),fn=n(79741),Mn=n(28734),Nn=n(34062);var xn,vn,wn,link_useSettingsLink=()=>{const e=(0,Mn.Z)(),t=(0,s.TH)(),{APP_NAME:n}=(0,Nn.Z)();return(0,o.useCallback)(((r,a,o)=>{if(n===M.ei.PROTONVPN_SETTINGS)return e(r,n,o);const s=n===M.ei.PROTONACCOUNT?(0,fn.ku)(t.pathname):void 0,i=(0,fn.Ti)(s||a||n);return e("/".concat(i).concat(r),M.ei.PROTONACCOUNT,o)}),[t,e])},Dn=n(1885),Sn=n(22572),On=n(62635);const An=["onClose","onConfirm","children","title","cancel","confirm","small","noTitleEllipsis"];function Confirm_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Confirm_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Confirm_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Confirm_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var modal_Confirm=e=>{let{onClose:t,onConfirm:n,children:r,title:a=(0,u.c)("Action").t(xn||(xn=(0,d.Z)(["Confirm"]))),cancel:o=(0,u.c)("Action").t(vn||(vn=(0,d.Z)(["Cancel"]))),confirm:s=(0,u.c)("Action").t(wn||(wn=(0,d.Z)(["Confirm"]))),small:i=!0,noTitleEllipsis:c=!0}=e,l=(0,Sn.Z)(e,An);return(0,j.jsx)(On.Z,Confirm_objectSpread(Confirm_objectSpread({onClose:t,onSubmit:()=>{null==n||n(),null==t||t()},title:a,close:o,submit:s,small:i,noTitleEllipsis:c},l),{},{children:r}))},Cn=n(93495),En=n(17789),Ln=n(44505),Pn=n(25523),Zn=n(47821);const useGetMailSettings=()=>{const e=(0,Dn.Z)(),t=(0,Ln.Z)();return(0,o.useCallback)((()=>(0,Zn.NC)(t,Pn.N9.key,(()=>Pn.N9.get(e)))),[t,e])},useMailSettings=()=>{const e=(0,Ln.Z)(),t=useGetMailSettings();return(0,Zn.ZP)(e,Pn.N9.key,t)};var Tn=n(91635),kn=n(51018);const zn=(0,kn.P1)([e=>e.attachments,(e,{ID:t})=>t],((e,t)=>e[t])),useGetAttachment=()=>{const e=(0,i.oR)();return(0,o.useCallback)((t=>zn(e.getState(),{ID:t})),[])};var _n,Rn,Gn;const Yn="Draft",useDraft=()=>{const e=(0,Ln.Z)(),t=useGetMailSettings(),n=(0,yn._2)(),r=useMessageCache(),a=(()=>{const e=(0,yn._2)(),t=(0,bn.pg)(),{createModal:n}=(0,In.Z)();return(0,o.useCallback)((async(r,a)=>{var o;const[s,i]=await Promise.all([t(),e()]);if(!(0,Tn.Om)(s)&&null!==(o=findSender(i,null==a?void 0:a.data))&&void 0!==o&&o.Email.endsWith("@pm.me")){var c;const e=null===(c=findSender(i,null==a?void 0:a.data,!0))||void 0===c?void 0:c.Email;await new Promise((t=>{n((0,j.jsx)(modal_Confirm,{onConfirm:()=>t(void 0),cancel:null,onClose:()=>t(void 0),title:(0,u.c)("Title").t(_n||(_n=(0,d.Z)(["Sending notice"]))),confirm:(0,u.c)("Action").t(Rn||(Rn=(0,d.Z)(["OK"]))),children:(0,j.jsx)(Cn.Z,{className:"mb1",children:(0,u.c)("Info").t(Gn||(Gn=(0,d.Z)(["Sending messages from @pm.me address is a paid feature. Your message will be sent from your default address ",""])),e)})}))}))}}),[t,e])})(),[s]=(0,yn.ZP)(),[i]=useMailSettings(),c=useGetAttachment();(0,o.useEffect)((()=>{(async()=>{if(!i||!s)return;const t=createNewDraft(ve.Xh.NEW,void 0,i,s,c);e.set(Yn,t)})()}),[e,s,i]);return(0,o.useCallback)((async(o,s)=>{const[i,l]=await Promise.all([t(),n()]);let d;var u,p;return await a(o,s),d=o===ve.Xh.NEW&&e.has(Yn)&&void 0===s?messageDraft_objectSpread(messageDraft_objectSpread({},u=e.get(Yn)),{},{data:messageDraft_objectSpread({},u.data),document:null===(p=u.document)||void 0===p?void 0:p.cloneNode(!0)}):createNewDraft(o,s,i,l,c),d.localID=(0,ht.D)("draft"),r.set(d.localID,d),d.localID}),[e,t,n,r,a])};var Un,Fn,Kn,Bn,Wn,Vn,Qn,Hn,Xn,Jn,qn;const getComposeExisting=e=>e.existingDraft?e:void 0,getComposeNew=e=>"number"==typeof e.action?e:void 0,useCompose=(e,t,n,r)=>{const a=(0,bn.pg)(),[o=[]]=(0,yn.ZP)(),{createNotification:s}=(0,hn.Z)(),{createModal:i}=(0,In.Z)(),c=useDraft(),l=useMessageCache(),p=link_useSettingsLink(),m=(0,Dn.Z)(),{call:g}=(0,Ie.Z)();return(0,mn.ZP)((async b=>{const y=await a();if(0===o.filter((e=>!(({Keys:e,Status:t})=>!e.length||t===M.bw.STATUS_DISABLED)(e))).length)return void s({type:"error",text:(0,j.jsxs)(j.Fragment,{children:[(0,u.c)("Error").t(Un||(Un=(0,d.Z)(["No address with keys available to compose a message"]))),(0,j.jsx)("br",{}),(0,u.c)("Error").t(Fn||(Fn=(0,d.Z)(["Contact your organization’s administrator to resolve this"])))]})});const h=100*y.UsedSpace/y.MaxSpace;if(!Number.isNaN(h)&&h>=100)return void i((0,j.jsx)(modal_Confirm,{title:(0,u.c)("Title").t(Kn||(Kn=(0,d.Z)(["Storage capacity warning"]))),confirm:(0,u.c)("Action").t(Bn||(Bn=(0,d.Z)(["Upgrade"]))),cancel:(0,u.c)("Action").t(Wn||(Wn=(0,d.Z)(["Close"]))),onConfirm:()=>{p("/dashboard")},children:(0,j.jsx)(Cn.Z,{className:"mb1",learnMore:"https://protonmail.com/support/knowledge-base/increase-my-storage-space/",type:"warning",children:(0,u.c)("Info").t(Vn||(Vn=(0,d.Z)(["You have reached 100% of your storage capacity. Consider freeing up some space or upgrading your account with additional storage space to compose new messages."])))})}));if(e.length>=r)return void s({type:"error",text:(0,u.c)("Error").ngettext((0,u.msgid)(Qn||(Qn=(0,d.Z)(["You cannot open more than "," composer window at a time"])),r),"You cannot open more than ".concat(r," composer windows at a time"),r)});const{composeExisting:I,composeNew:f,returnFocusTo:N}=(e=>({composeExisting:getComposeExisting(e),composeNew:getComposeNew(e),returnFocusTo:e.returnFocusTo||document.activeElement}))(b);if(I){const{existingDraft:r,fromUndo:a}=I,o=getLocalID(l,r.localID),s=e.find((e=>e===o));if(s)return void n(s);const i=l.get(o);if(null!=i&&i.sending&&!a)return;return i?updateMessageCache(l,o,{initialized:void 0,plainText:void 0,document:void 0,openDraftFromUndo:a,isSentDraft:!1,messageImages:void 0}):l.set(o,{localID:o,openDraftFromUndo:a}),t(o,N),void n(o)}if(f){const{action:e,referenceMessage:r}=f,a=null==r?void 0:r.data;if(isOutbox(a)){if(re(a))return void s({text:(0,u.c)("Error").t(Hn||(Hn=(0,d.Z)(["Message needs to be sent first"]))),type:"error"});await new Promise(((e,t)=>{i((0,j.jsx)(modal_Confirm,{onConfirm:e,onClose:t,title:(0,u.c)("Title").t(Xn||(Xn=(0,d.Z)(["Sending original message"]))),confirm:(0,u.c)("Action").t(Jn||(Jn=(0,d.Z)(["OK"]))),children:(0,j.jsx)(Cn.Z,{className:"mb1",children:(0,u.c)("Info").t(qn||(qn=(0,d.Z)(["The original message you are trying to forward / reply to is in the process of being sent. If you continue, you will not be able to undo sending of the original message any longer."])))})}))})),await m((0,En.Vf)(null==a?void 0:a.ID)),await g()}const o=await c(e,r);t(o,N),n(o)}}))};var $n,er,tr,nr,rr,ar,or,sr,ir,cr,lr=n(81441),dr=n(80892),ur=n(19857),pr=n(75622),mr=n(58818);const TitleBarButton=({onClick:e,children:t,className:n="",title:r,disabled:a=!1,dataTestId:o})=>(0,j.jsx)(ur.Z,{title:r,children:(0,j.jsx)("button",{type:"button",className:(0,ht.dh)(["composer-title-bar-button interactive flex p0-5",n]),onClick:e,disabled:a,"data-testid":o,children:t})});var composer_ComposerTitleBar=({title:e,minimized:t,maximized:n,toggleMinimized:r,toggleMaximized:a,handleStartDragging:o,onClose:s})=>{const i=(0,mr.G6)(),[{Shortcuts:c=0}={}]=useMailSettings(),l=c&&!i?(0,j.jsxs)(j.Fragment,{children:[t?(0,u.c)("Action").t($n||($n=(0,d.Z)(["Maximize composer"]))):(0,u.c)("Action").t(er||(er=(0,d.Z)(["Minimize composer"]))),(0,j.jsx)("br",{}),(0,j.jsx)("kbd",{className:"no-border",children:mr.OI})," + ",(0,j.jsx)("kbd",{className:"no-border",children:"M"})]}):t?(0,u.c)("Action").t(tr||(tr=(0,d.Z)(["Maximize composer"]))):(0,u.c)("Action").t(nr||(nr=(0,d.Z)(["Minimize composer"]))),p=c&&!i?(0,j.jsxs)(j.Fragment,{children:[n?(0,u.c)("Action").t(rr||(rr=(0,d.Z)(["Contract composer"]))):(0,u.c)("Action").t(ar||(ar=(0,d.Z)(["Expand composer"]))),(0,j.jsx)("br",{}),(0,j.jsx)("kbd",{className:"no-border",children:mr.OI})," + ",(0,j.jsx)("kbd",{className:"no-border",children:mr.AI})," +"," ",(0,j.jsx)("kbd",{className:"no-border",children:"M"})]}):n?(0,u.c)("Action").t(or||(or=(0,d.Z)(["Contract composer"]))):(0,u.c)("Action").t(sr||(sr=(0,d.Z)(["Expand composer"]))),m=c?(0,j.jsxs)(j.Fragment,{children:[(0,u.c)("Action").t(ir||(ir=(0,d.Z)(["Close composer"]))),(0,j.jsx)("br",{}),(0,j.jsx)("kbd",{className:"no-border",children:"Escape"})]}):(0,u.c)("Action").t(cr||(cr=(0,d.Z)(["Close composer"])));return(0,j.jsxs)("header",{className:"composer-title-bar ui-prominent flex flex-row flex-align-items-center flex-nowrap pl1 pr0-25 w100",onDoubleClick:()=>{t?r():a()},children:[(0,j.jsx)("span",{className:(0,ht.dh)(["flex-item-fluid p0-5 pr1 pl0-75 text-ellipsis user-select-none",(!n||t)&&"cursor-move"]),onMouseDown:o,children:e}),(0,j.jsx)(TitleBarButton,{className:(0,ht.dh)(["no-mobile",t&&"rotateX-180"]),title:l,onClick:r,dataTestId:"composer:minimize-button",children:(0,j.jsx)(pr.Z,{name:"minimize",alt:e,className:"mauto"})}),(0,j.jsx)(TitleBarButton,{title:p,className:"no-mobile",onClick:a,dataTestId:"composer:maximize-button",children:(0,j.jsx)(pr.Z,{name:n?"arrow-down-left-and-arrow-up-right-to-center":"arrow-up-right-and-arrow-down-left-from-center",alt:e,className:"mauto"})}),(0,j.jsx)(TitleBarButton,{title:m,onClick:s,dataTestId:"composer:close-button",children:(0,j.jsx)(pr.Z,{name:"xmark",alt:e,className:"mauto"})})]})},gr=n(42966),jr=n(64297),br=n(16728),yr=n(90397);function useDebounceInput(e,t=500){const[n,r]=(0,o.useState)(e),a=(0,o.useRef)(0),s=(0,o.useCallback)((()=>{window.clearInterval(a.current)}),[]);return(0,o.useEffect)((()=>t?(a.current=window.setTimeout((()=>{r(e)}),t),s):r(e)),[e,t]),(0,o.useEffect)((()=>s),[]),t?n:e}const hr=["delay","onChange","value"];function SearchInput_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Ir=(0,o.forwardRef)(((e,t)=>{let{delay:n=200,onChange:r=c.ZT,value:a=""}=e,s=(0,Sn.Z)(e,hr);const[i,l]=(0,o.useState)(a),d=useDebounceInput(i,n);return(0,o.useEffect)((()=>{r(d)}),[d]),(0,o.useEffect)((()=>{l(a)}),[a]),(0,j.jsx)(jr.Z,function SearchInput_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SearchInput_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SearchInput_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({ref:t,value:i,onChange:({target:e})=>l(e.value),type:"search"},s))})),fr=n(15707);const Mr=["id","className","title","loading","disabled","checked","indeterminate","color","backgroundColor","borderColor","children","labelOnClick"];function Checkbox_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Checkbox_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Checkbox_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Checkbox_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Checkbox=(e,t)=>{let{id:n,className:r,title:a,loading:s,disabled:i,checked:c,indeterminate:l=!1,color:d,backgroundColor:u,borderColor:p,children:m,labelOnClick:g}=e,b=(0,Sn.Z)(e,Mr);const y=(0,o.useRef)(null),h=(0,fr.Z)(y,t);return(0,o.useEffect)((()=>{y.current&&(y.current.indeterminate=l)}),[l]),(0,j.jsxs)("label",{htmlFor:n,className:(0,ht.dh)(["checkbox-container",!(null!=r&&r.includes("increase-click-surface"))&&"relative",r]),title:a,onClick:g,children:[(0,j.jsx)("input",Checkbox_objectSpread({ref:h,disabled:i||s,id:n,type:"checkbox",className:"checkbox-input",checked:c},b)),(0,j.jsx)("span",{className:"checkbox-fakecheck",style:{borderColor:p,background:u,color:d},children:!1===l?(0,j.jsx)(pr.Z,{className:"checkbox-fakecheck-img",size:16,name:"check",color:d}):(0,j.jsx)(pr.Z,{className:"checkbox-fakecheck-img color-disabled",size:16,name:"dash"})}),m]})};var Nr=(0,o.forwardRef)(Checkbox),xr=n(97237),vr=n(66406),wr=(0,vr.Z)(xr.i);const compareContactEmailByName=(e,t)=>e.Name.localeCompare(t.Name);var hooks_useContactEmailsSortedByName=()=>{const[e,t]=wr();return(0,o.useMemo)((()=>[[...e||[]].sort(compareContactEmailByName),t]),[e])},Dr=n(16880),Sr=n(4576);var ContactList=({rowCount:e,contactRowHeightComfort:t=54,contactRowHeightCompact:n=46,rowRenderer:r,className:a="",userSettings:s})=>{const i=(0,o.useRef)(null),c=(0,o.useRef)(null),l=s.Density===M.pw.COMPACT;return(0,j.jsx)("div",{ref:c,className:(0,ht.dh)(["h-custom",a]),style:{"--height-custom":"300px"},children:(0,j.jsx)(Sr.qj,{children:({height:a,width:o})=>(0,j.jsx)(Sr.aV,{className:"contact-list no-outline",ref:i,rowRenderer:r,rowCount:e,height:a,width:o-1,rowHeight:l?n:t})})})},Or=n(86919);const Ar=(0,Or.PO)(M.ei.PROTONCALENDAR);let Cr,Er,Lr,Pr,Zr;!function(e){e[e.CLEAR_TEXT=0]="CLEAR_TEXT",e[e.ENCRYPTED=1]="ENCRYPTED",e[e.SIGNED=2]="SIGNED",e[e.ENCRYPTED_AND_SIGNED=3]="ENCRYPTED_AND_SIGNED"}(Cr||(Cr={})),function(e){e[e.OWNER=32]="OWNER",e[e.ADMIN=16]="ADMIN",e[e.WRITE=8]="WRITE",e[e.READ_MEMBER_LIST=4]="READ_MEMBER_LIST",e[e.READ=2]="READ",e[e.AVAILABILITY=1]="AVAILABILITY"}(Er||(Er={})),function(e){e[e.SEE=1]="SEE",e[e.INVITE=2]="INVITE",e[e.SEE_AND_INVITE=3]="SEE_AND_INVITE",e[e.EDIT=4]="EDIT",e[e.DELETE=8]="DELETE"}(Lr||(Lr={})),function(e){e[e.INACTIVE=0]="INACTIVE",e[e.ACTIVE=1]="ACTIVE",e[e.UPDATE_PASSPHRASE=2]="UPDATE_PASSPHRASE",e[e.RESET_NEEDED=4]="RESET_NEEDED",e[e.INCOMPLETE_SETUP=8]="INCOMPLETE_SETUP",e[e.LOST_ACCESS=16]="LOST_ACCESS",e[e.SELF_DISABLED=32]="SELF_DISABLED",e[e.SUPER_OWNER_DISABLED=64]="SUPER_OWNER_DISABLED"}(Pr||(Pr={})),function(e){e.PUBLISH="PUBLISH",e.REQUEST="REQUEST",e.REPLY="REPLY",e.CANCEL="CANCEL",e.COUNTER="COUNTER",e.DECLINECOUNTER="DECLINECOUNTER",e.ADD="ADD",e.REFRESH="REFRESH"}(Zr||(Zr={}));const Tr=[Zr.REPLY,Zr.COUNTER,Zr.REFRESH],kr=[Zr.REQUEST,Zr.CANCEL,Zr.ADD,Zr.DECLINECOUNTER];let zr,_r,Rr,Gr,Yr;!function(e){e.TENTATIVE="TENTATIVE",e.CONFIRMED="CONFIRMED",e.CANCELLED="CANCELLED"}(zr||(zr={})),function(e){e.TRUE="TRUE",e.FALSE="FALSE"}(_r||(_r={})),function(e){e.REQUIRED="REQ-PARTICIPANT",e.OPTIONAL="OPT-PARTICIPANT",e.NON="NON-PARTICIPANT"}(Rr||(Rr={})),function(e){e.NEEDS_ACTION="NEEDS-ACTION",e.ACCEPTED="ACCEPTED",e.DECLINED="DECLINED",e.TENTATIVE="TENTATIVE",e.DELEGATED="DELEGATED"}(Gr||(Gr={})),function(e){e[e.NEEDS_ACTION=0]="NEEDS_ACTION",e[e.TENTATIVE=1]="TENTATIVE",e[e.DECLINED=2]="DECLINED",e[e.ACCEPTED=3]="ACCEPTED"}(Yr||(Yr={}));const Ur=191,Fr=100,Kr=255,Br=3e3,Wr=255,Vr=new Date(1970,0,1),Qr=new Date(Date.UTC(Vr.getFullYear(),Vr.getMonth(),Vr.getDate())),Hr=new Date(2037,11,31),Xr=new Date(Date.UTC(Hr.getFullYear(),Hr.getMonth(),Hr.getDate()));let Jr;!function(e){e.ONCE="ONCE",e.DAILY="DAILY",e.WEEKLY="WEEKLY",e.MONTHLY="MONTHLY",e.YEARLY="YEARLY",e.CUSTOM="CUSTOM",e.OTHER="OTHER"}(Jr||(Jr={}));const qr={[Jr.ONCE]:999,[Jr.DAILY]:999,[Jr.WEEKLY]:4999,[Jr.MONTHLY]:999,[Jr.YEARLY]:99,[Jr.CUSTOM]:999,[Jr.OTHER]:1};let $r,ea,ta,na,ra;!function(e){e[e.ALL_DAYS=0]="ALL_DAYS"}($r||($r={})),function(e){e[e.ON_DAYS=0]="ON_DAYS"}(ea||(ea={})),function(e){e[e.ON_MONTH_DAY=0]="ON_MONTH_DAY",e[e.ON_NTH_DAY=1]="ON_NTH_DAY",e[e.ON_MINUS_NTH_DAY=-1]="ON_MINUS_NTH_DAY"}(ta||(ta={})),function(e){e[e.BY_MONTH_ON_MONTH_DAY=0]="BY_MONTH_ON_MONTH_DAY"}(na||(na={})),function(e){e.NEVER="NEVER",e.AFTER_N_TIMES="COUNT",e.UNTIL="UNTIL"}(ra||(ra={}));const aa=["ics","ical","ifb","icalendar"],oa="text/calendar",sa="My calendar",ia=(M.dI[0],"");let ca,la,da;!function(e){e[e.DAY=1]="DAY",e[e.WEEK=2]="WEEK",e[e.MONTH=3]="MONTH",e[e.YEAR=4]="YEAR",e[e.AGENDA=5]="AGENDA",e[e.CUSTOM=6]="CUSTOM"}(ca||(ca={})),function(e){e.BEFORE="-",e.AFTER=""}(la||(la={})),function(e){e[e.WEEK=1]="WEEK",e[e.DAY=2]="DAY",e[e.HOURS=3]="HOURS",e[e.MINUTES=4]="MINUTES"}(da||(da={}));const ua={[da.WEEK]:999,[da.DAY]:6999,[da.HOURS]:999,[da.MINUTES]:9999},pa="#FFF";let ma,ga,ja;!function(e){e[e.SINGLE=1]="SINGLE",e[e.RECURRING=2]="RECURRING"}(ma||(ma={})),function(e){e[e.SINGLE=1]="SINGLE",e[e.RECURRING=2]="RECURRING"}(ga||(ga={})),function(e){e[e.ALL=1]="ALL",e[e.FUTURE=2]="FUTURE",e[e.SINGLE=3]="SINGLE"}(ja||(ja={}));M.$A,"".concat("https://protonmail.com/support/knowledge-base/import-calendar-to-protoncalendar","/#items_not_supported");let ba;!function(e){e[e.NO_FILE_SELECTED=0]="NO_FILE_SELECTED",e[e.NO_ICS_FILE=1]="NO_ICS_FILE",e[e.FILE_EMPTY=2]="FILE_EMPTY",e[e.FILE_TOO_BIG=3]="FILE_TOO_BIG",e[e.FILE_CORRUPTED=4]="FILE_CORRUPTED",e[e.INVALID_CALENDAR=5]="INVALID_CALENDAR",e[e.INVALID_METHOD=6]="INVALID_METHOD",e[e.NO_EVENTS=7]="NO_EVENTS",e[e.TOO_MANY_EVENTS=8]="TOO_MANY_EVENTS"}(ba||(ba={}));const ya=["uid","dtstamp","dtstart","dtend","recurrence-id","rrule","exdate","organizer","sequence"],ha=["uid","dtstamp","created","description","summary","location"],Ia=["uid","dtstamp","status","transp"],fa=["uid","dtstamp","comment"],Ma=["uid","dtstamp"],Na=[],xa=new Set(["uid","dtstamp"]),va=[...new Set([...ya,...ha,...Ia,...fa,...Ma,...Na,"uid","attendee"])];let wa,Da,Sa;var Oa,Aa;!function(e){e[e.EMAIL=0]="EMAIL",e[e.DEVICE=1]="DEVICE"}(wa||(wa={})),function(e){e[e.SUCCESSFUL=1]="SUCCESSFUL",e[e.NOT_VERIFIED=0]="NOT_VERIFIED",e[e.FAILED=-1]="FAILED"}(Da||(Da={})),function(e){e[e.DAY=0]="DAY",e[e.WEEK=1]="WEEK",e[e.MONTH=2]="MONTH",e[e.YEAR=3]="YEAR",e[e.PLANNING=4]="PLANNING"}(Sa||(Sa={}));var labelStack_LabelStack=({labels:e,showDelete:t=!1,isStacked:n=!1,maxNumber:r,className:a})=>{const o=e.slice(0,r),s=e.slice(r||e.length);return(0,j.jsxs)("ul",{className:(0,ht.dh)(["label-stack unstyled m0 inline-flex flew-row flex-align-items-center stop-propagation",n&&"is-stacked",a]),children:[o.map((e=>(0,j.jsxs)("li",{className:"label-stack-item flex flex-row flex-align-items-center flex-justify-start flex-nowrap",style:e.color?{"--background":e.color,"--foreground":pa}:void 0,children:[e.onClick?(0,j.jsx)("button",{type:"button",className:"label-stack-item-button text-ellipsis",onClick:e.onClick,title:e.title,children:(0,j.jsx)("span",{className:"label-stack-item-button-text",children:e.name})}):(0,j.jsx)("span",{className:"label-stack-item-button text-ellipsis",title:e.title,children:(0,j.jsx)("span",{className:"label-stack-item-button-text",children:e.name})}),t&&(0,j.jsx)("button",{type:"button",className:"label-stack-item-delete flex-item-noshrink",onClick:e.onDelete,title:"".concat((0,u.c)("Action").t(Oa||(Oa=(0,d.Z)(["Remove"])))," ").concat(e.title),children:(0,j.jsx)(pr.Z,{name:"xmark",size:12,className:"label-stack-item-delete-icon",alt:(0,u.c)("Action").t(Aa||(Aa=(0,d.Z)(["Remove"])))})})]},e.name))),s.length>0&&(0,j.jsx)("li",{className:"label-stack-overflow-count flex",children:(0,j.jsx)(ur.Z,{title:s.map((e=>e.name)).join(", "),children:(0,j.jsxs)("span",{children:["+",s.length]})})})]})},Ca=n(25763),Ea=n(52188),La=n(45610);const Pa=(0,vr.Z)(La.G),filterCategories=(e,t)=>{if(Array.isArray(e))return e.filter((({Type:e})=>e===t))},useLabels=()=>{const[e,t]=Pa();return[(0,o.useMemo)((()=>filterCategories(e,M.L7.MESSAGE_LABEL)),[e]),t]},useFolders=()=>{const[e,t]=Pa();return[(0,o.useMemo)((()=>filterCategories(e,M.L7.MESSAGE_FOLDER)),[e]),t]},useContactGroups=()=>{const[e,t]=Pa();return[(0,o.useMemo)((()=>filterCategories(e,M.L7.CONTACT_GROUP)),[e]),t]},filterContactGroups=e=>e.filter((({Type:e})=>e===M.L7.CONTACT_GROUP));var Za=n(70161);const Ta=["children","className","caption"];function Table_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Table_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Table_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Table_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var table_Table=e=>{let{children:t,className:n,caption:r}=e,a=(0,Sn.Z)(e,Ta);return(0,j.jsxs)("table",Table_objectSpread(Table_objectSpread({className:(0,ht.dh)(["simple-table",n])},a),{},{children:[r?(0,j.jsx)("caption",{className:"sr-only",children:r}):null,t]}))};const ka=["children","type"];function TableCell_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function TableCell_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?TableCell_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TableCell_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var table_TableCell=e=>{let{children:t,type:n="body"}=e,r=(0,Sn.Z)(e,ka);return"header"===n||"footer"===n?(0,j.jsx)("th",TableCell_objectSpread(TableCell_objectSpread({scope:"col"},r),{},{children:t})):(0,j.jsx)("td",TableCell_objectSpread(TableCell_objectSpread({},r),{},{children:t}))};const za=["cells","children"];function TableHeader_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function TableHeader_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?TableHeader_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TableHeader_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var table_TableHeader=e=>{let{cells:t=[],children:n}=e,r=(0,Sn.Z)(e,za);return(0,j.jsx)("thead",TableHeader_objectSpread(TableHeader_objectSpread({},r),{},{children:n||(0,j.jsx)("tr",{children:t.map(((e,t)=>(0,j.jsx)(table_TableCell,{type:"header",children:e},t.toString())))})}))},_a=n(48736);const Ra=["colSpan"];function TableRowBusy_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function TableRowBusy_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?TableRowBusy_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TableRowBusy_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var table_TableRowBusy=e=>{let{colSpan:t}=e,n=(0,Sn.Z)(e,Ra);return(0,j.jsx)("tr",TableRowBusy_objectSpread(TableRowBusy_objectSpread({"aria-busy":"true"},n),{},{children:(0,j.jsx)("td",{colSpan:t,className:"text-center",children:(0,j.jsx)(_a.Z,{})})}))};const Ga=["children","loading","colSpan"];function TableBody_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function TableBody_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?TableBody_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TableBody_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var table_TableBody=e=>{let{children:t,loading:n=!1,colSpan:r}=e,a=(0,Sn.Z)(e,Ga);return(0,j.jsx)("tbody",TableBody_objectSpread(TableBody_objectSpread({},a),{},{children:n?(0,j.jsx)(table_TableRowBusy,{colSpan:r}):t}))};const Ya=["cells","children"];function TableRow_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function TableRow_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?TableRow_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TableRow_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Ua=(0,o.forwardRef)(((e,t)=>{let{cells:n=[],children:r}=e,a=(0,Sn.Z)(e,Ya);return(0,j.jsx)("tr",TableRow_objectSpread(TableRow_objectSpread({ref:t},a),{},{children:r||n.map(((e,t)=>(0,j.jsx)(table_TableCell,{children:e},t.toString())))}))}));var Fa,Ka,Ba,Wa,Va,Qa=Ua;Ua.displayName="TableRow";var Ha,Xa,Ja,contacts_ContactGroupTable=({contactEmails:e,onDelete:t})=>(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("div",{className:"flex flex-column min-h-custom",style:{"--min-height-custom":"180px"},children:[(0,j.jsxs)(table_Table,{className:"no-border",children:[(0,j.jsx)(table_TableHeader,{children:(0,j.jsxs)("tr",{children:[(0,j.jsx)(table_TableCell,{type:"header",children:(0,u.c)("Table header").t(Fa||(Fa=(0,d.Z)(["Name"])))}),(0,j.jsx)(table_TableCell,{type:"header",children:(0,u.c)("Table header").t(Ka||(Ka=(0,d.Z)(["Address"])))}),t?(0,j.jsx)(table_TableCell,{type:"header",className:"w20",children:(0,u.c)("Table header").t(Ba||(Ba=(0,d.Z)(["Action"])))}):null]})}),e.length?(0,j.jsx)(table_TableBody,{children:e.map((({ID:e,Name:n,Email:r})=>{const a=[(0,j.jsx)("div",{className:"text-ellipsis max-w100",title:n,children:n},e),(0,j.jsx)("div",{className:"text-ellipsis max-w100",title:r,children:r},e),t?(0,j.jsx)(Ea.Z,{onClick:()=>t(r),color:"danger",shape:"outline",size:"small",children:(0,u.c)("Action").t(Wa||(Wa=(0,d.Z)(["Remove"])))},e||r):null].filter(Za.Z);return(0,j.jsx)(Qa,{cells:a},e||r)}))}):null]}),e.length?null:(0,j.jsx)("div",{className:"flex flex-align-items-center flex-justify-center min-h-custom",style:{"--min-height-custom":"150px"},children:(0,u.c)("Info").t(Va||(Va=(0,d.Z)(["No contacts added yet"])))})]})});const qa=["onConfirm","onClose"];function ContactUpgradeModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ContactUpgradeModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ContactUpgradeModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ContactUpgradeModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ContactUpgradeModal=e=>{let{onConfirm:t=c.ZT,onClose:n=c.ZT}=e,r=(0,Sn.Z)(e,qa);const a=link_useSettingsLink();return(0,j.jsx)(modal_Confirm,ContactUpgradeModal_objectSpread(ContactUpgradeModal_objectSpread({title:(0,u.c)("Title").t(Ha||(Ha=(0,d.Z)(["Upgrade required"]))),onConfirm:()=>{a("/dashboard"),t()},onClose:n,confirm:(0,u.c)("Action").t(Xa||(Xa=(0,d.Z)(["Upgrade"])))},r),{},{children:(0,j.jsx)(Cn.Z,{className:"mb1",type:"warning",children:(0,u.c)("Warning").t(Ja||(Ja=(0,d.Z)(["This feature requires a paid Proton account"])))})}))},$a=n(7706);const{GLOBAL_SUCCESS:eo,SINGLE_SUCCESS:to}=M.vB,allSucceded=({Code:e,Responses:t=[]})=>e===eo&&!t.some((({Response:{Code:e}})=>e!==to));var no=n(95533);function ErrorButton_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const ErrorButton=(e,t)=>(0,j.jsx)(Ea.Z,function ErrorButton_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ErrorButton_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ErrorButton_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({color:"danger",ref:t},e));var ro,ao,oo,so,io,co,lo,uo,po=(0,o.forwardRef)(ErrorButton);const mo=["groupIDs","onDelete","onClose"];function ContactGroupDeleteModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ContactGroupDeleteModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ContactGroupDeleteModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ContactGroupDeleteModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var modals_ContactGroupDeleteModal=e=>{let{groupIDs:t=[],onDelete:n,onClose:r=c.ZT}=e,a=(0,Sn.Z)(e,mo);const o=(0,Dn.Z)(),{createNotification:s}=(0,hn.Z)(),{call:i}=(0,Ie.Z)(),[l,p]=(0,no.Z)(),[m=[]]=useContactGroups(),g=(0,j.jsx)(po,{type:"submit",loading:l,children:(0,u.c)("Action").t(ro||(ro=(0,d.Z)(["Delete"])))}),b=t.length,{Name:y=""}=m.find((e=>e.ID===t[0]))||{},h=1===b?(0,u.c)("Title").t(so||(so=(0,d.Z)(["Delete ",""])),y):(0,u.c)("Title").ngettext((0,u.msgid)(io||(io=(0,d.Z)(["Delete "," contact group"])),b),"Delete ".concat(b," contact groups"),b),I=1===b?(0,u.c)("Warning").t(co||(co=(0,d.Z)(["Are you sure you want to permanently delete this contact group?"]))):(0,u.c)("Warning").ngettext((0,u.msgid)(lo||(lo=(0,d.Z)(["Are you sure you want to permanently delete "," contact group?"])),b),"Are you sure you want to permanently delete ".concat(b," contact groups?"),b);return(0,j.jsxs)(On.Z,ContactGroupDeleteModal_objectSpread(ContactGroupDeleteModal_objectSpread({title:h,onSubmit:()=>p((async()=>{const e=allSucceded(await o((0,$a.bd)(t)));if(await i(),null==n||n(),r(),!e)return s({text:(0,u.c)("Error").t(ao||(ao=(0,d.Z)(["Some groups could not be deleted"]))),type:"warning"});s({text:(0,u.c)("Success").ngettext((0,u.msgid)(oo||(oo=(0,d.Z)(["Contact group deleted"]))),"Contact groups deleted",t.length)})})()),onClose:r,submit:g,loading:l,className:"modal--smaller"},a),{},{children:[(0,j.jsx)(Cn.Z,{className:"mb1",type:"info",children:(0,u.c)("Info").t(uo||(uo=(0,d.Z)(["Please note that addresses assigned to this group will NOT be deleted."])))}),(0,j.jsx)(Cn.Z,{className:"mb1",type:"error",children:I})]}))};const go=/(.*?)\s*<([^>]*)>/,inputToRecipient=e=>{const t=e.trim(),n=go.exec(t);if(null!==n&&(n[1]||n[2])){const e=n.map((e=>e.trim()));return{Name:e[1],Address:e[2]||e[1]}}return{Name:t,Address:t}},contactToRecipient=(e,t)=>({Name:e.Name,Address:e.Email,ContactID:e.ContactID,Group:t}),recipientToInput=e=>e.Address&&e.Name&&e.Address!==e.Name?"".concat(e.Name," <").concat(e.Address,">"):e.Address===e.Name?e.Address||"":"".concat(e.Name," ").concat(e.Address),contactToInput=e=>recipientToInput(contactToRecipient(e));var jo;const compare=(e,t)=>"contact"===e.type&&"contact"===t.type&&e.score!==t.score?(t.score||0)-(e.score||0):e.label>t.label?1:e.label<t.label?-1:0,getContactsAutocompleteItems=(e=[],t)=>e.filter(t).map((e=>({label:contactToInput(e),value:e,type:"contact",key:e.ID,score:e.LastUsedTime||0}))).sort(compare),getContactGroupsAutocompleteItems=(e=[],t)=>e.filter(t).map((e=>({label:e.Name,value:e,key:e.ID,type:"group"}))).sort(compare),getNumberOfMembersText=(e,t)=>{var n;const r=t&&(null===(n=t[e])||void 0===n?void 0:n.contacts.length)||0;return(0,u.c)("Info").ngettext((0,u.msgid)(jo||(jo=(0,d.Z)(["("," member)"])),r),"(".concat(r," members)"),r)};var bo=n(1854),yo=n(9645),ho=n(4838),Io=n.n(ho),fo=n(40674),Mo=n(63813);var color_ColorSelector=({selected:e,onChange:t,className:n,colors:r=M.dI})=>(0,j.jsx)("ul",{className:(0,ht.dh)(["color-selector-container unstyled",n]),children:r.map(((n,r)=>{const a=(null==e?void 0:e.toLowerCase())===(null==n?void 0:n.toLowerCase());return(0,j.jsxs)("li",{className:(0,ht.dh)(["color-selector-item",a&&"is-selected"]),style:{color:n},children:[(0,j.jsx)(jr.Z,{type:"radio",onChange:()=>t(n),value:n,name:"paletteColor","aria-labelledby":"Color ".concat(n),className:"color-selector-input-color","data-test-id":"color-selector:".concat(n)}),(0,j.jsx)("div",{className:"color-selector-item-mask",children:(0,j.jsx)(pr.Z,{name:"check",className:"mauto"})})]},"mykey".concat(r))}))}),No=n(63890);const xo=["color","onChange","className"];function ColorPicker_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ColorPicker_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ColorPicker_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ColorPicker_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var input_ColorPicker=e=>{let{color:t="blue",onChange:n=c.ZT,className:r}=e,a=(0,Sn.Z)(e,xo);const s=Io()(t),i=s.isValid()?s.toHexString():"",[l]=(0,o.useState)((0,ht.D)("dropdown")),{anchorRef:d,isOpen:u,toggle:p,close:m}=(0,No.Z)();return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(fo.Z,ColorPicker_objectSpread(ColorPicker_objectSpread({as:"button",type:"button",className:(0,ht.dh)([r,!a.as&&"field select"]),hasCaret:!0},a),{},{ref:d,isOpen:u,onClick:p,children:(0,j.jsx)(pr.Z,{className:"flex-item-noshrink",name:"circle-filled",color:i})})),(0,j.jsx)(Mo.Z,{id:l,isOpen:u,noMaxSize:!0,anchorRef:d,onClose:m,disableDefaultArrowNavigation:!0,children:(0,j.jsx)(color_ColorSelector,{selected:t,onChange:n,className:"flex flex-row flex-wrap flex-justify-center m0 p1 "})})]})},vo=n(97528),wo=n(32778),Do=n(69024);const So=["type","value","selected","active","onChange","title","children","disableFocusOnActive","searchStrings"];function Option_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Option_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Option_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Option_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var option_Option=e=>{let{type:t="button",value:n,selected:r,active:a,onChange:s,title:i,children:c=i,disableFocusOnActive:l,searchStrings:d}=e,u=(0,Sn.Z)(e,So);const p=(0,o.useRef)(null),m=(0,wo.Z)(a);(0,o.useEffect)((()=>{var e;!m&&a&&(l?(0,vo.zT)(p.current,{block:"center"}):null===(e=p.current)||void 0===e||e.focus())}),[a]);return(0,j.jsx)("li",{className:"dropdown-item",children:(0,j.jsx)(Do.Z,Option_objectSpread(Option_objectSpread({ref:p,type:t,isSelected:r,onClick:()=>{null==s||s(n)},title:i,className:(0,ht.dh)(["block w100 text-ellipsis text-left no-outline",a&&"active"])},u),{},{children:c}))})};function Marks_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Marks_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Marks_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Marks_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Oo,Ao,text_Marks=({children:e,chunks:t})=>{if(!t.length)return(0,j.jsx)(j.Fragment,{children:e});const n=((e,t)=>{const n=[],append=(e,t,r)=>{t-e>0&&n.push({start:e,end:t,highlight:r})};if(0===e.length)append(0,t,!1);else{let n=0;e.forEach((e=>{append(n,e.start,!1),append(e.start,e.end,!0),n=e.end})),append(n,t,!1)}return n})((e=>e.sort(((e,t)=>e.start-t.start)).reduce(((e,t)=>{if(0===e.length)return[Marks_objectSpread(Marks_objectSpread({},t),{},{highlight:!1})];const n=e.pop();if(!n)return e;if(t.start<=n.end){const r=Math.max(n.end,t.end);e.push({start:n.start,end:r,highlight:!1})}else e.push(n,Marks_objectSpread(Marks_objectSpread({},t),{},{highlight:!1}));return e}),[]))(t),e.length);return(0,j.jsx)(j.Fragment,{children:n.map((({start:t,end:n,highlight:r})=>{const a=e.substring(t,n);return r?(0,j.jsx)("mark",{className:"is-light",children:a},"".concat(t,"-").concat(n)):a}),[])})};var autocomplete_AutocompleteList=({id:e,children:t,onClose:n,isOpen:r,highlightedIndex:a,anchorRef:s})=>{const i=o.Children.map(t,((e,t)=>(0,o.cloneElement)(e,{active:a===t})));return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("span",{className:"sr-only",id:"".concat(e,"-autocomplete-suggest-text"),children:(0,u.c)("Hint").t(Oo||(Oo=(0,d.Z)(["Use Up and Down keys to access and browse suggestions after input. Press Enter to confirm your choice, or Escape to close the suggestions box."])))}),(0,j.jsx)("div",{className:"sr-only","aria-atomic":"true","aria-live":"assertive",children:(0,u.c)("Hint").ngettext((0,u.msgid)(Ao||(Ao=(0,d.Z)(["Found "," suggestion, use keyboard to navigate."])),i.length),"Found ".concat(i.length," suggestions, use keyboard to navigate."),i.length)}),(0,j.jsx)(Mo.Z,{autoClose:!1,autoCloseOutside:!1,isOpen:i.length>0&&r,anchorRef:s,onClose:n,offset:4,noCaret:!0,noMaxWidth:!0,sameAnchorWidth:!0,disableFocusTrap:!0,disableDefaultArrowNavigation:!0,UNSTABLE_AUTO_HEIGHT:!0,children:(0,j.jsx)("ul",{id:e,className:"unstyled m0 p0",onMouseDown:e=>{e.preventDefault()},children:i})})]})};const escapeRegex=e=>e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),getMatches=(e,t)=>{const n=[];let r;do{if(r=e.exec(t),!r)break;const a=r.index,o=e.lastIndex;o>a&&n.push({start:a,end:o}),r.index===e.lastIndex&&e.lastIndex++}while(null!==r);return n};var Co=n(73746);const useAutocompleteFilter=(e,t,n,r=20,a=-1)=>(0,o.useMemo)((()=>{if(!Array.isArray(t))return[];const o=(0,br.Fv)(e,!0);return a>0&&e.length<a?[]:t.map((e=>{const t=n(e),r=(0,br.Fv)(t,!0),a=new RegExp(escapeRegex(o),"gi");return{text:t,option:e,chunks:getMatches(a,r)}})).filter((({chunks:e})=>0===a&&0===o.length||e.length>0)).slice(0,r)}),[e,t,n]),useAutocomplete=({id:e,options:t,onSelect:n,input:r,inputRef:a})=>{const[s,i]=(0,o.useState)(0),[c,l]=(0,o.useState)(!1),onOpen=()=>{l(!0)},onClose=()=>{l(!1)};(0,o.useEffect)((()=>{0!==s&&i(0)}),[r]),(0,Co.y)(a,[["Escape",e=>{c&&(e.preventDefault(),onClose(),e.stopPropagation())}]]);const getOptionID=t=>"".concat(e,"-").concat(t);return{onClose:onClose,getOptionID:getOptionID,suggestionProps:{id:e,isOpen:t.length>0&&c,onClose:onClose,highlightedIndex:s},inputProps:{id:e,autoComplete:"off","aria-owns":e,"aria-activedescendant":getOptionID(s),"aria-autocomplete":"list","aria-describedby":"".concat(e,"-autocomplete-suggest-text"),onFocus:onOpen,onBlur:onClose,onKeyDown:e=>{switch(e.key){case"ArrowUp":e.preventDefault(),i((e=>0===e?e:e-1));break;case"ArrowDown":e.preventDefault(),i((e=>e===t.length-1?e:e+1));break;case"Tab":case"Enter":{const r=t[s];if(r&&c)return e.preventDefault(),n(r.option),onClose(),!0;break}default:onOpen()}}}}},Eo=["id","value","onChange","onSelect","options","limit","searchMinLength","getData"];function Autocomplete_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Autocomplete_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Autocomplete_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Autocomplete_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var autocomplete_Autocomplete=e=>{let{id:t,value:n,onChange:r,onSelect:a,options:s,limit:i=20,searchMinLength:c=0,getData:l}=e,d=(0,Sn.Z)(e,Eo);const u=(0,o.useRef)(null),p=(0,o.useRef)(null),m=useAutocompleteFilter(n,s,l,i,c),handleSelect=e=>{a(e)},{onClose:g,getOptionID:b,inputProps:y,suggestionProps:h}=useAutocomplete({id:t,options:m,onSelect:handleSelect,input:n,inputRef:u}),handleSelectOption=e=>{handleSelect(e),g()};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(jr.Z,Autocomplete_objectSpread(Autocomplete_objectSpread(Autocomplete_objectSpread({},d),y),{},{containerRef:p,ref:u,value:n,onChange:e=>{r(e.currentTarget.value.trimStart())},onKeyDown:e=>{y.onKeyDown(e)||"Enter"===e.key&&(handleSelectOption(n),e.preventDefault())}})),(0,j.jsx)(autocomplete_AutocompleteList,Autocomplete_objectSpread(Autocomplete_objectSpread({anchorRef:p.current?p:u},h),{},{children:m.map((({chunks:e,text:t,option:n},r)=>(0,j.jsx)(option_Option,{id:b(r),title:t,value:n,disableFocusOnActive:!0,onChange:handleSelectOption,children:(0,j.jsx)(text_Marks,{chunks:e,children:t})},b(r))))}))]})},Lo=n(72292);const generateProtonWebUID=()=>{const s4=()=>Math.floor(65536*(1+Math.random())).toString(16).substring(1);return"proton-web-".concat(s4()).concat(s4(),"-").concat(s4(),"-").concat(s4(),"-").concat(s4(),"-").concat(s4()).concat(s4()).concat(s4())};var Po=n(58239),Zo=n.n(Po),To=n(98314);function properties_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function properties_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?properties_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):properties_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const ko=["fn","email","tel","adr","key"],hasPref=e=>ko.includes(e),properties_hasCategories=e=>e.some((({field:e,value:t})=>t&&"categories"===e)),getContactCategories=e=>e.filter((({field:e})=>"categories"===e)).map((({value:e,group:t})=>Array.isArray(e)?t?e.map((e=>({name:e,group:t}))):e.map((e=>({name:e}))):t?{name:e,group:t}:{name:e})).flat(),sanitizeProperties=(e=[])=>e.filter((({value:e})=>e)).map((e=>Array.isArray(e.value)?e:properties_objectSpread(properties_objectSpread({},e),{},{value:e.value.toString()}))).map((e=>{const{field:t}=e;let{value:n}=e;return!Array.isArray(n)&&n.startsWith("=")&&(n=n.replace(/^=+/,"")),Array.isArray(n)&&n.some((e=>e.startsWith("=")))&&(n=n.map((e=>e.startsWith("=")?e.slice(1):e))),"adr"!==t&&"org"!==t||Array.isArray(n)||(n=n.split(",").slice(0,6)),"categories"===t&&Array.isArray(n)?n.map((t=>properties_objectSpread(properties_objectSpread({},e),{},{value:t}))):properties_objectSpread(properties_objectSpread({},e),{},{value:n})})).flat(),addPref=(e=[])=>{const t=ko.reduce(((e,t)=>(e[t]=0,e)),Object.create(null));return e.map((e=>{if(!ko.includes(e.field))return e;const n=t[e.field]+1;return t[e.field]=n,properties_objectSpread(properties_objectSpread({},e),{},{pref:n})}))},sortByPref=(e,t)=>e.pref&&t.pref?e.pref-t.pref:0,generateNewGroupName=(e=[])=>{let t=1,n=!1;for(;!n;)e.includes("item".concat(t))?t++:n=!0;return"item".concat(t)},addGroup=(e=[])=>{const t=e.map((({group:e})=>e)).filter(Za.Z);return e.map((e=>{if(!["email"].includes(e.field)||e.group)return e;const n=generateNewGroupName(t);return t.push(n),properties_objectSpread(properties_objectSpread({},e),{},{group:n})}))},getPreferredValue=(e,t)=>{const n=e.filter((({field:e})=>e===t));if(n.length)return n.sort(sortByPref)[0].value},zo=/\\\\|\\,|\\;/gi,_o=/\\\\|\\:|\\,|\\;/gi,Ro=/\\;/gi,Go=/🐶 🐱 🐭 🐹 🐰 🦊 🐻 🐼/gi,cleanMultipleValue=(e="")=>e.replace(Ro,"🐶 🐱 🐭 🐹 🐰 🦊 🐻 🐼").split(";").map((e=>e.replace(Go,"\\;"))).map((e=>((e="",t=!1)=>{const n=!0!==t?zo:_o;return e.replace(n,(e=>e.substr(1)))})(e))),getValue=(e,t)=>{const n=(e=>{try{return e.getValues()}catch(t){const[,,,n=""]=e.jCal||[];return[n]}})(e).map((e=>Array.isArray(e)||"string"==typeof e?e:e.toString()));if(("adr"===t||"org"===t)&&"string"==typeof n[0])return cleanMultipleValue(n[0]);if("adr"!==t&&"org"!==t||(n[0]=n[0].map((e=>Array.isArray(e)?e.join(", "):e))),"categories"===t){return n.flat().map((e=>e.split(","))).flat()}return n[0]},clearType=(e="")=>e.toLowerCase().replace("x-",""),getType=(e=[])=>Array.isArray(e)?e.length?e[0]:"":e,formatAdr=e=>{let t=[];try{t=Array.isArray(e)?e:[e],t.length<7&&t.push(...(0,xe.w6)(0,7-t.length).map((()=>"")));const filterEmpty=e=>e.filter((e=>void 0!==e&&""!==e)),[n,r,a,o,s,i,c]=e;return filterEmpty([a,r,filterEmpty([i,o]).join(", "),n,filterEmpty([s,c]).join(", ")])}catch(e){return t}},Yo="1*",Uo="*1",Fo="*",Ko={fn:{cardinality:Yo},n:{cardinality:Uo},nickname:{cardinality:Fo},photo:{cardinality:Fo},bday:{cardinality:Uo},anniversary:{cardinality:Uo},gender:{cardinality:Uo},adr:{cardinality:Fo},tel:{cardinality:Fo},email:{cardinality:Fo},impp:{cardinality:Fo},lang:{cardinality:Fo},tz:{cardinality:Fo},geo:{cardinality:Fo},title:{cardinality:Fo},role:{cardinality:Fo},logo:{cardinality:Fo},org:{cardinality:Fo},member:{cardinality:Fo},related:{cardinality:Fo},categories:{cardinality:Fo},note:{cardinality:Fo},prodid:{cardinality:Uo},rev:{cardinality:Uo},sound:{cardinality:Fo},uid:{cardinality:Uo},clientpidmap:{cardinality:Fo},url:{cardinality:Fo},version:{cardinality:"1"},key:{cardinality:Fo},fburl:{cardinality:Fo},caladruri:{cardinality:Fo},caluri:{cardinality:Fo}},isCustomField=(e="")=>e.startsWith("x-"),parse=(e="")=>{const t=new(Zo().Component)(Zo().parse(e)).getAllProperties(),n=t.reduce(((e,t)=>{if(t.name.includes("x-ablabel")){const[n,r]=t.name.split("."),a=r&&r.length>0?r:n,o=getValue(t,a);return"string"==typeof o?[...e,{name:n,value:o}]:e}return e}),[]),r=t.reduce(((e,t)=>{const r=t.name.split("."),a=r[1]?r[1]:r[0],o=n.find((e=>e.name===r[0])),s=o?o.value:t.getParameter("type"),i=t.getParameter("pref"),c="string"==typeof i&&hasPref(a)?+i:void 0;if(!a)return e;if(!isCustomField(a)&&!Object.keys(Ko).includes(a))return e;const l={pref:c,field:a,group:r[1]?r[0]:void 0,type:s,value:getValue(t,a)};return e.push(l),e}),[]).sort(sortByPref);return addPref(r)},toICAL=(e=[])=>{const t=e.filter((({field:e})=>"version"!==e)),n=new(Zo().Component)("vcard"),r=new(Zo().Property)("version");return r.setValue("4.0"),n.addProperty(r),t.reduce(((e,{field:t,type:n,pref:r,value:a,group:o})=>{const s=[o,t].filter(Za.Z).join("."),i=new(Zo().Property)(s);return i.setValue(a),n&&i.setParameter("type",n),r&&i.setParameter("pref","".concat(r)),e.addProperty(i),e}),n)},Bo=["key","x-pm-mimetype","x-pm-encrypt","x-pm-sign","x-pm-scheme","x-pm-tls"],Wo=["version","prodid","categories"],Vo=["version","prodid","fn","uid","email"].concat(Bo);let Qo,Ho,Xo;!function(e){e[e.SUCCESS=0]="SUCCESS",e[e.SIGNATURE_NOT_VERIFIED=1]="SIGNATURE_NOT_VERIFIED",e[e.FAIL_TO_READ=2]="FAIL_TO_READ",e[e.FAIL_TO_LOAD=3]="FAIL_TO_LOAD",e[e.FAIL_TO_DECRYPT=4]="FAIL_TO_DECRYPT"}(Qo||(Qo={})),function(e){e[e.THROW_ERROR_IF_CONFLICT=0]="THROW_ERROR_IF_CONFLICT",e[e.OVERWRITE_CONTACT=1]="OVERWRITE_CONTACT"}(Ho||(Ho={})),function(e){e[e.IGNORE=0]="IGNORE",e[e.INCLUDE=1]="INCLUDE"}(Xo||(Xo={}));const Jo=["bday","anniversary","gender","lang","tz","geo","title","role","photo","logo","org","member","note","url"];let qo,$o;!function(e){e.INLINE="PGP/Inline",e.MIME="PGP/MIME"}(qo||(qo={})),function(e){e[e.POST_BOX=0]="POST_BOX",e[e.EXTENDED=1]="EXTENDED",e[e.STREET=2]="STREET",e[e.LOCALITY=3]="LOCALITY",e[e.REGION=4]="REGION",e[e.POSTAL_CODE=5]="POSTAL_CODE",e[e.COUNTRY=6]="COUNTRY"}($o||($o={}));const es=180,ts=1e4,ns=ts.toLocaleString(),rs=10*M.$A**2,as="10 MB";var os;const{CLEAR_TEXT:ss,ENCRYPTED_AND_SIGNED:is,SIGNED:cs}=M.BK,prepareCards=(e=[],t,n)=>{const r=[],{toEncryptAndSign:a=[],toSign:o=[],toClearText:s=[]}=(e=>{const t=properties_hasCategories(e);return e.reduce(((e,n)=>{const{field:r}=n;return t&&Wo.includes(r)?(e.toClearText.push(n),Vo.includes(r)&&e.toSign.push(n),e):Vo.includes(r)?(e.toSign.push(n),e):(e.toEncryptAndSign.push(n),e)}),{toEncryptAndSign:[],toSign:[],toClearText:[]})})(e);if(a.length>0){const e=toICAL(a).toString();r.push((0,Ft.Z)({data:e,publicKeys:n,privateKeys:t,armor:!0,detached:!0}).then((({data:e,signature:t})=>({Type:is,Data:e,Signature:t}))))}if(o.length>0){const e=o.some((e=>"uid"===e.field)),n=o.some((e=>"fn"===e.field));if(!e){const e=generateProtonWebUID();o.push({field:"uid",value:e})}if(!n){const e=(0,u.c)("Default display name vcard").t(os||(os=(0,d.Z)(["Unknown"])));o.push({field:"fn",value:e})}const a=toICAL(o).toString();r.push((0,Rt.l)({data:a,privateKeys:t,armor:!0,detached:!0}).then((({signature:e})=>({Type:cs,Data:a,Signature:e}))))}if(s.length>0){const e=toICAL(s).toString();r.push({Type:ss,Data:e,Signature:null})}return Promise.all(r)},prepareContact=async(e,{privateKey:t,publicKey:n})=>{const r=sanitizeProperties(e),a=addPref(r),o=addGroup(a);return{Cards:await prepareCards(o,[t],[n])}},prepareContacts=async(e=[],{privateKey:t,publicKey:n})=>{const r=e.reduce(((e,r)=>(t&&n&&e.push(prepareContact(r,{privateKey:t,publicKey:n})),e)),[]);return Promise.all(r)};var ls,ds,us=n(65794);var ps,ms,gs,js,bs,ys,hs,Is,fs,Ms,contacts_useUpdateGroup=()=>{const e=(0,Dn.Z)(),{call:t}=(0,Ie.Z)(),{createNotification:n}=(0,hn.Z)(),[r]=(0,us.Fj)();return(0,o.useCallback)((async({groupID:a,name:o,color:s,toAdd:i,toRemove:c,toCreate:l,onDelayedSave:p})=>{const m={Name:o,Color:s},{Label:{ID:g}}=await e(a?(0,$a.rK)(a,m):(0,$a.R7)(m));if(p&&p(g),l.length){const t=l.map((({Email:e})=>[{field:"fn",value:e},{field:"email",value:e,group:"item1"},{field:"categories",value:o,group:"item1"}])),n=await prepareContacts(t,r[0]);await e((0,Lo.el)({Contacts:n,Overwrite:Ho.THROW_ERROR_IF_CONFLICT,Labels:Xo.INCLUDE}))}await Promise.all([i.length&&e((0,Lo.S3)({LabelID:g,ContactEmailIDs:i.map((({ID:e})=>e))})),c.length&&e((0,Lo.LH)({LabelID:g,ContactEmailIDs:c.map((({ID:e})=>e))}))].filter(Boolean)),await t(),n({text:a?(0,u.c)("Notification").t(ls||(ls=(0,d.Z)(["Contact group updated"]))):(0,u.c)("Notification").t(ds||(ds=(0,d.Z)(["Contact group created"])))})}),[])};const Ns=["contactGroupID","onClose","selectedContactEmails","onDelayedSave"];function ContactGroupModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ContactGroupModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ContactGroupModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ContactGroupModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xs,vs,ws,Ds,Ss,Os,As,modals_ContactGroupModal=e=>{let{contactGroupID:t,onClose:n=c.ZT,selectedContactEmails:r=[],onDelayedSave:a}=e,s=(0,Sn.Z)(e,Ns);const[i,l]=(0,o.useState)(!1),[p=[]]=useContactGroups(),[m]=wr(),[g,b]=(0,o.useState)(""),y=contacts_useUpdateGroup(),h=(0,o.useMemo)((()=>(0,Xe.H6)(g)),[g]),I=t&&p.find((({ID:e})=>e===t)),f=t&&m.filter((({LabelIDs:e=[]})=>e.includes(t))),N=t?(0,u.c)("Title").t(ps||(ps=(0,d.Z)(["Edit contact group"]))):(0,u.c)("Title").t(ms||(ms=(0,d.Z)(["Create new group"]))),[x,v]=(0,o.useState)({name:t&&I?I.Name:"",color:t&&I?I.Color:M.dI[(0,c.lv)(0,M.dI.length-1)],contactEmails:t?f:r}),w=x.contactEmails.map((({ID:e})=>e)),D=(0,o.useMemo)((()=>[...getContactsAutocompleteItems(m,(({ID:e})=>!w.includes(e)))]),[m,w]),handleAdd=()=>{h&&(v((e=>ContactGroupModal_objectSpread(ContactGroupModal_objectSpread({},e),{},{contactEmails:[...e.contactEmails,{Name:g,Email:g}]}))),b(""))},S=x.contactEmails.length;return(0,j.jsxs)(On.Z,ContactGroupModal_objectSpread(ContactGroupModal_objectSpread({onSubmit:async()=>{try{l(!0);const e=x.contactEmails.filter((({ID:e})=>(0,Za.Z)(e))),o=a?x.contactEmails.filter((e=>!((0,Za.Z)(e.ID)||null!=r&&r.includes(e)))):x.contactEmails.filter((({ID:e})=>!(0,Za.Z)(e))),s=t?(0,xe.Hg)(f,e):[];await y({groupID:t,name:x.name,color:x.color,toAdd:e,toRemove:s,toCreate:o,onDelayedSave:a}),n()}catch(e){throw l(!1),e}},loading:i,submit:(0,u.c)("Action").t(gs||(gs=(0,d.Z)(["Save"]))),title:N,onClose:n},s),{},{children:[(0,j.jsxs)(bo.Z,{children:[(0,j.jsx)(gr.Z,{htmlFor:"contactGroupName",children:(0,u.c)("Label for contact group name").t(js||(js=(0,d.Z)(["Name"])))}),(0,j.jsx)(yo.Z,{className:"flex-item-fluid",children:(0,j.jsx)(jr.Z,{id:"contactGroupName",placeholder:(0,u.c)("Placeholder for contact group name").t(bs||(bs=(0,d.Z)(["Name"]))),value:x.name,onChange:({target:e})=>v(ContactGroupModal_objectSpread(ContactGroupModal_objectSpread({},x),{},{name:e.value}))})})]}),(0,j.jsxs)(bo.Z,{children:[(0,j.jsx)(gr.Z,{htmlFor:"contactGroupColor",children:(0,u.c)("Label for contact group color").t(ys||(ys=(0,d.Z)(["Color"])))}),(0,j.jsx)(yo.Z,{children:(0,j.jsx)(input_ColorPicker,{color:x.color,onChange:e=>v(ContactGroupModal_objectSpread(ContactGroupModal_objectSpread({},x),{},{color:e}))})})]}),D.length?(0,j.jsxs)("div",{className:"flex flex-nowrap mb1 on-mobile-flex-column",children:[(0,j.jsx)(gr.Z,{htmlFor:"contactGroupEmail",children:(0,u.c)("Label").t(hs||(hs=(0,d.Z)(["Add email address"])))}),(0,j.jsx)(yo.Z,{className:"flex-item-fluid",children:(0,j.jsx)(autocomplete_Autocomplete,{id:"contactGroupEmail",options:D,limit:6,value:g,onChange:b,getData:e=>e.label,type:"search",placeholder:(0,u.c)("Placeholder").t(Is||(Is=(0,d.Z)(["Start typing an email address"]))),onSelect:e=>{if("major"===e.type)handleAdd();else{const t=m.find((t=>t.ID===e.value.ID));t&&v((e=>ContactGroupModal_objectSpread(ContactGroupModal_objectSpread({},e),{},{contactEmails:[...e.contactEmails,t]}))),b("")}},autoComplete:"off"})}),(0,j.jsx)(Ea.Z,{className:"ml1 on-mobile-ml0 on-mobile-mt0-5",onClick:handleAdd,disabled:!h,children:(0,u.c)("Action").t(fs||(fs=(0,d.Z)(["Add"])))})]}):null,(0,j.jsx)(contacts_ContactGroupTable,{contactEmails:x.contactEmails,onDelete:e=>{const t=x.contactEmails.findIndex((({Email:t})=>t===e));if(t>-1){const e=[...x.contactEmails];e.splice(t,1),v(ContactGroupModal_objectSpread(ContactGroupModal_objectSpread({},x),{},{contactEmails:e}))}}}),S?(0,j.jsx)("div",{className:"text-center color-weak",children:(0,u.c)("Info").ngettext((0,u.msgid)(Ms||(Ms=(0,d.Z)([""," Member"])),S),"".concat(S," Members"),S)}):null]}))};const Cs=["contactGroupID","onClose"];function ContactGroupDetailsModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ContactGroupDetailsModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ContactGroupDetailsModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ContactGroupDetailsModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var modals_ContactGroupDetailsModal=e=>{let{contactGroupID:t,onClose:n=c.ZT}=e,r=(0,Sn.Z)(e,Cs);const{createModal:a}=(0,In.Z)(),[o]=(0,bn.ZP)(),[s=[],i]=useContactGroups(),[l=[],p]=wr(),m=s.find((({ID:e})=>e===t)),g=l.filter((({LabelIDs:e=[]})=>e.includes(t))),b=g.length,handleEdit=()=>{o.hasPaidMail?(a((0,j.jsx)(modals_ContactGroupModal,{contactGroupID:t})),n()):a((0,j.jsx)(ContactUpgradeModal,{}))};return(0,j.jsxs)(On.Z,ContactGroupDetailsModal_objectSpread(ContactGroupDetailsModal_objectSpread({onSubmit:handleEdit,loading:i||p,close:(0,u.c)("Action").t(xs||(xs=(0,d.Z)(["Close"]))),submit:(0,u.c)("Action").t(vs||(vs=(0,d.Z)(["Edit"]))),modalTitleID:"contact-group-details-modal",title:(0,j.jsxs)(Ca.Z,{id:"contact-group-details-modal",className:"flex flex-nowrap flex-align-items-center",children:[(0,j.jsx)("div",{className:"contact-group-details-chip rounded50 mr0-5 flex-item-noshrink",style:{backgroundColor:null==m?void 0:m.Color}}),(0,j.jsx)("span",{className:"text-ellipsis",title:null==m?void 0:m.Name,children:null==m?void 0:m.Name})]}),onClose:n},r),{},{children:[(0,j.jsxs)("div",{className:"flex flex-no-min-children flex-item-fluid",children:[(0,j.jsxs)("h4",{className:"mb1 flex flex-align-items-center flex-item-fluid",children:[(0,j.jsx)(pr.Z,{className:"mr0-5",name:"user-group"}),(0,j.jsx)("span",{children:(0,u.c)("Title").ngettext((0,u.msgid)(ws||(ws=(0,d.Z)([""," member"])),b),"".concat(b," members"),b)})]}),(0,j.jsxs)("div",{className:"flex-item-noshrink",children:[(0,j.jsx)(ur.Z,{title:(0,u.c)("Action").t(Ds||(Ds=(0,d.Z)(["Delete"]))),children:(0,j.jsx)(Ea.Z,{color:"weak",shape:"outline",icon:!0,onClick:()=>{a((0,j.jsx)(modals_ContactGroupDeleteModal,{groupIDs:[t]})),n()},className:"inline-flex ml0-5",children:(0,j.jsx)(pr.Z,{name:"trash",alt:(0,u.c)("Action").t(Ss||(Ss=(0,d.Z)(["Delete"])))})})}),(0,j.jsx)(ur.Z,{title:(0,u.c)("Action").t(Os||(Os=(0,d.Z)(["Edit"]))),children:(0,j.jsx)(Ea.Z,{icon:!0,shape:"solid",color:"norm",onClick:handleEdit,className:"inline-flex ml0-5",children:(0,j.jsx)(pr.Z,{name:"pen",alt:(0,u.c)("Action").t(As||(As=(0,d.Z)(["Edit"])))})})})]})]}),(0,j.jsx)(contacts_ContactGroupTable,{contactEmails:g})]}))};var contacts_ContactGroupLabels=({contactGroups:e,isStacked:t=!0,className:n})=>{const{createModal:r}=(0,In.Z)(),a=e.reduce(((e,t)=>t?[...e,{name:t.Name,color:t.Color,title:t.Name,onClick:e=>{r((0,j.jsx)(modals_ContactGroupDetailsModal,{contactGroupID:t.ID})),e.stopPropagation()}}]:e),[]);return(0,j.jsx)(labelStack_LabelStack,{className:n,labels:a,isStacked:t})};var Es,Ls,Ps,Zs,Ts,ks,zs,_s,Rs,Gs,Ys,Us,Fs,Ks,Bs,Ws,Vs,Qs,Hs,Xs,Js,qs,$s,ei,ti,ni,ri,ai,oi,si,ii,ci,li,di,ui,pi,mi,gi,ji,bi,yi,hi,Ii,fi,Mi,Ni,xi,vi,wi,Di,Si,Oi,Ai,Ci,Ei,Li,Pi,Zi,Ti,ki,zi,_i,Ri,Gi,Yi,Ui,Fi,Ki,Bi,Wi,Vi,Qi,Hi,Xi,Ji,qi,$i,ec,tc,nc,rc,ac,oc,sc,ic,cc,lc,dc,uc,pc,mc,gc,ContactListModalRow=({style:e,onCheck:t,contact:n,checked:r,contactGroupsMap:a={},isNarrow:o})=>{const s=n.LabelIDs.map((e=>a[e]));return(0,j.jsx)("div",{style:e,className:"flex",children:(0,j.jsx)("div",{className:(0,ht.dh)(["flex flex-nowrap flex-item-fluid h100 mtauto mbauto contact-list-row pl1 pr1",r&&"contact-list-row--selected"]),children:(0,j.jsx)(Nr,{className:"flex-nowrap w100 h100",checked:r,onChange:e=>t(e,n.ID),"aria-describedby":n.ID,id:n.ID,children:(0,j.jsxs)("div",{className:(0,ht.dh)(["flex-item-fluid flex-align-items-center max-w100 h100",!o&&"flex"]),children:[(0,j.jsx)("div",{className:(0,ht.dh)(["pl1 flex",!o&&"w33"]),children:(0,j.jsx)("span",{className:"inline-block text-ellipsis max-w100 pr1",children:n.Name})}),(0,j.jsx)("div",{className:"flex-item-fluid flex on-mobile-pl1",children:(0,j.jsx)("span",{className:"inline-block text-ellipsis max-w100 pr1",children:n.Email})}),!o&&s&&(0,j.jsx)("div",{className:"w25 text-right",children:(0,j.jsx)(contacts_ContactGroupLabels,{contactGroups:s})})]})})})})},jc=n(67944);const getOtherInformationFields=()=>[{text:(0,u.c)("Contact field label").t(mi||(mi=(0,d.Z)(["Photo"]))),value:"photo"},{text:(0,u.c)("Contact field label").t(gi||(gi=(0,d.Z)(["Organization"]))),value:"org"},{text:(0,u.c)("Contact field label").t(ji||(ji=(0,d.Z)(["Birthday"]))),value:"bday"},{text:(0,u.c)("Contact field label").t(bi||(bi=(0,d.Z)(["Anniversary"]))),value:"anniversary"},{text:(0,u.c)("Contact field label").t(yi||(yi=(0,d.Z)(["Title"]))),value:"title"},{text:(0,u.c)("Contact field label").t(hi||(hi=(0,d.Z)(["Role"]))),value:"role"},{text:(0,u.c)("Contact field label").t(Ii||(Ii=(0,d.Z)(["Member"]))),value:"member"},{text:(0,u.c)("Contact field label").t(fi||(fi=(0,d.Z)(["Note"]))),value:"note"},{text:(0,u.c)("Contact field label").t(Mi||(Mi=(0,d.Z)(["URL"]))),value:"url"},{text:(0,u.c)("Contact field label").t(Ni||(Ni=(0,d.Z)(["Gender"]))),value:"gender"},{text:(0,u.c)("Contact field label").t(xi||(xi=(0,d.Z)(["Language"]))),value:"lang"},{text:(0,u.c)("Contact field label").t(vi||(vi=(0,d.Z)(["Timezone"]))),value:"tz"},{text:(0,u.c)("Contact field label").t(wi||(wi=(0,d.Z)(["Geo"]))),value:"geo"},{text:(0,u.c)("Contact field label").t(Di||(Di=(0,d.Z)(["Logo"]))),value:"logo"}],getAllFieldLabels=()=>({fn:(0,u.c)("Contact field label").t(Si||(Si=(0,d.Z)(["Name"]))),email:(0,u.c)("Contact field label").t(Oi||(Oi=(0,d.Z)(["Email"]))),tel:(0,u.c)("Contact field label").t(Ai||(Ai=(0,d.Z)(["Phone"]))),adr:(0,u.c)("Contact field label").t(Ci||(Ci=(0,d.Z)(["Address"]))),photo:(0,u.c)("Contact field label").t(Ei||(Ei=(0,d.Z)(["Photo"]))),org:(0,u.c)("Contact field label").t(Li||(Li=(0,d.Z)(["Organization"]))),bday:(0,u.c)("Contact field label").t(Pi||(Pi=(0,d.Z)(["Birthday"]))),anniversary:(0,u.c)("Contact field label").t(Zi||(Zi=(0,d.Z)(["Anniversary"]))),title:(0,u.c)("Contact field label").t(Ti||(Ti=(0,d.Z)(["Title"]))),role:(0,u.c)("Contact field label").t(ki||(ki=(0,d.Z)(["Role"]))),note:(0,u.c)("Contact field label").t(zi||(zi=(0,d.Z)(["Note"]))),url:(0,u.c)("Contact field label").t(_i||(_i=(0,d.Z)(["URL"]))),gender:(0,u.c)("Contact field label").t(Ri||(Ri=(0,d.Z)(["Gender"]))),lang:(0,u.c)("Contact field label").t(Gi||(Gi=(0,d.Z)(["Language"]))),tz:(0,u.c)("Contact field label").t(Yi||(Yi=(0,d.Z)(["Timezone"]))),geo:(0,u.c)("Contact field label").t(Ui||(Ui=(0,d.Z)(["Geo"]))),logo:(0,u.c)("Contact field label").t(Fi||(Fi=(0,d.Z)(["Logo"]))),member:(0,u.c)("Contact field label").t(Ki||(Ki=(0,d.Z)(["Member"])))}),getAllTypes=()=>({fn:[],email:[{text:(0,u.c)("Property type").t($i||($i=(0,d.Z)(["Email"]))),value:""},{text:(0,u.c)("Property type").t(ec||(ec=(0,d.Z)(["Home"]))),value:"home"},{text:(0,u.c)("Property type").t(tc||(tc=(0,d.Z)(["Work"]))),value:"work"},{text:(0,u.c)("Property type").t(nc||(nc=(0,d.Z)(["Other"]))),value:"other"}],tel:[{text:(0,u.c)("Property type").t(rc||(rc=(0,d.Z)(["Phone"]))),value:""},{text:(0,u.c)("Property type").t(ac||(ac=(0,d.Z)(["Home"]))),value:"home"},{text:(0,u.c)("Property type").t(oc||(oc=(0,d.Z)(["Work"]))),value:"work"},{text:(0,u.c)("Property type").t(sc||(sc=(0,d.Z)(["Other"]))),value:"other"},{text:(0,u.c)("Property type").t(ic||(ic=(0,d.Z)(["Mobile"]))),value:"cell"},{text:(0,u.c)("Property type").t(cc||(cc=(0,d.Z)(["Main"]))),value:"main"},{text:(0,u.c)("Property type").t(lc||(lc=(0,d.Z)(["Fax"]))),value:"fax"},{text:(0,u.c)("Property type").t(dc||(dc=(0,d.Z)(["Pager"]))),value:"pager"}],adr:[{text:(0,u.c)("Property type").t(uc||(uc=(0,d.Z)(["Address"]))),value:""},{text:(0,u.c)("Property type").t(pc||(pc=(0,d.Z)(["Home"]))),value:"home"},{text:(0,u.c)("Property type").t(mc||(mc=(0,d.Z)(["Work"]))),value:"work"},{text:(0,u.c)("Property type").t(gc||(gc=(0,d.Z)(["Other"]))),value:"other"}],bday:[],anniversary:[],gender:[],lang:[],tz:[],geo:[],title:[],role:[],logo:[],photo:[],org:[],member:[],note:[],url:[]});var bc=n(25697),yc=(0,bc.JN)((({children:e})=>e)),hc=(0,bc.W8)((({children:e})=>e)),Ic=(0,bc.W6)((({children:e})=>e)),fc=n(20432);const Mc=["className"];function Vr_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var vr_Vr=e=>{let{className:t=""}=e,n=(0,Sn.Z)(e,Mc);return(0,j.jsx)("span",function Vr_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vr_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vr_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({className:(0,ht.dh)(["vr",t])},n))};const Nc=["children","color","shape","size","className"];function ButtonGroup_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ButtonGroup_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ButtonGroup_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ButtonGroup_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xc=(0,o.forwardRef)(((e,t)=>{let{children:n,color:r="weak",shape:a="outline",size:s="medium",className:i=""}=e,c=(0,Sn.Z)(e,Nc);const l=o.Children.toArray(n).filter((e=>null!==e&&(0,o.isValidElement)(e))).map(((e,t,n)=>{const r=(0,o.cloneElement)(e,{group:!0,size:s});return t===n.length-1?r:(0,j.jsxs)(o.Fragment,{children:[r,(0,j.jsx)(vr_Vr,{"aria-hidden":"true"})]},r.key||t)}));return(0,j.jsx)("div",ButtonGroup_objectSpread(ButtonGroup_objectSpread({className:(0,ht.dh)(["button-group","button-group-".concat(a,"-").concat(r),"button-group-".concat(s),i]),ref:t},c),{},{children:l}))}));const vc=["children","className","listRef"];function DropdownMenu_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function DropdownMenu_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DropdownMenu_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DropdownMenu_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var dropdown_DropdownMenu=e=>{let{children:t,className:n="",listRef:r}=e,a=(0,Sn.Z)(e,vc);return(0,j.jsx)("ul",DropdownMenu_objectSpread(DropdownMenu_objectSpread({className:(0,ht.dh)(["unstyled mt0 mb0",n]),ref:r},a),{},{children:o.Children.toArray(t).map(((e,t)=>(0,o.isValidElement)(e)?(0,j.jsx)("li",{className:(0,ht.dh)(["dropdown-item","delete"===e.props.actionType&&"dropdown-item--delete",e.props.liClassName]),children:e},e.key||t):null))}))};const wc=["content","children","originalPlacement","autoClose","hasCaret","dropdownClassName","dropdownStyle","disableDefaultArrowNavigation"];function SimpleDropdown_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SimpleDropdown_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SimpleDropdown_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SimpleDropdown_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Dc,Sc=(0,o.forwardRef)(((e,t)=>{let{content:n,children:r,originalPlacement:a,autoClose:s,hasCaret:i=!0,dropdownClassName:c,dropdownStyle:l,disableDefaultArrowNavigation:d=!1}=e,u=(0,Sn.Z)(e,wc);const[p]=(0,o.useState)((0,ht.D)("dropdown")),{anchorRef:m,isOpen:g,toggle:b,close:y}=(0,No.Z)();return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(fo.Z,SimpleDropdown_objectSpread(SimpleDropdown_objectSpread({},u),{},{ref:(0,fr.Z)(t,m),isOpen:g,onClick:b,hasCaret:i,children:n})),(0,j.jsx)(Mo.Z,{id:p,originalPlacement:a,autoClose:s,isOpen:g,anchorRef:m,onClose:y,className:c,style:l,disableDefaultArrowNavigation:d,children:r})]})}));const Oc=["loading","disabled","list","className","autoFocus","size"],Ac=["text","tooltip"],Cc=["text","tooltip"];function DropdownActions_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function DropdownActions_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DropdownActions_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DropdownActions_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const wrapTooltip=(e,t)=>t?"string"!=typeof e?e:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("span",{className:"mr0-5",children:e}),(0,j.jsx)(fc.Z,{title:t})]}):e;var dropdown_DropdownActions=e=>{let{loading:t=!1,disabled:n=!1,list:r=[],className:a="",autoFocus:o=!1,size:s}=e,i=(0,Sn.Z)(e,Oc);if(!r.length)return null;const[c,...l]=r,{text:p,tooltip:m}=c,g=(0,Sn.Z)(c,Cc);return 1===r.length?(0,j.jsx)(Ea.Z,DropdownActions_objectSpread(DropdownActions_objectSpread(DropdownActions_objectSpread({size:s,loading:t,disabled:n,className:a},g),i),{},{children:wrapTooltip(p,m)})):(0,j.jsxs)(xc,{size:s,children:[(0,j.jsx)(Ea.Z,DropdownActions_objectSpread(DropdownActions_objectSpread(DropdownActions_objectSpread({disabled:n,loading:t,className:a},g),i),{},{children:wrapTooltip(p,m)})),(0,j.jsx)(Sc,{as:Ea.Z,icon:!0,autoFocus:o,originalPlacement:"bottom-right",disabled:n,loading:t,className:(0,ht.dh)(["flex-item-noshrink",a]),title:(0,u.c)("Title").t(Dc||(Dc=(0,d.Z)(["Open actions dropdown"]))),"data-test-id":"dropdown:open",children:(0,j.jsx)(dropdown_DropdownMenu,{children:l.map(((e,t)=>{let{text:n,tooltip:r}=e,a=(0,Sn.Z)(e,Ac);return(0,j.jsx)(Do.Z,DropdownActions_objectSpread(DropdownActions_objectSpread({className:"text-left"},a),{},{children:wrapTooltip(n,r)}),t)}))})})]})},Ec=n(80763);const Lc=["field","type","className"];function ContactLabelProperty_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ContactLabelProperty_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ContactLabelProperty_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ContactLabelProperty_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var contacts_ContactLabelProperty=e=>{let{field:t,type:n,className:r}=e,a=(0,Sn.Z)(e,Lc);const o=getAllFieldLabels(),s=o[n]||n||o[t];return(0,j.jsx)("span",ContactLabelProperty_objectSpread(ContactLabelProperty_objectSpread({className:(0,ht.dh)(["text-capitalize text-semibold",r])},a),{},{children:s}))};var contacts_ContactModalLabel=({field:e,uid:t,type:n="",onChange:r,fixedType:a=!1,filteredTypes:o=[]})=>{const s=getAllTypes()[e],i=getOtherInformationFields(),handleChangeField=({target:e})=>r({value:e.value,key:"field",uid:t});if(!a&&i.map((({value:e})=>e)).includes(e)){const t=i.filter((e=>!o.includes(e.value)));return(0,j.jsx)(gr.Z,{className:"pt0 mr1 on-mobile-w100",children:(0,j.jsx)(Ec.Z,{value:e,options:t,onChange:handleChangeField})})}return"fn"===e||a||!s.map((({value:e})=>e)).includes(n)?(0,j.jsx)(contacts_ContactLabelProperty,{className:"pt0-5",field:e,type:n}):(0,j.jsx)(gr.Z,{className:"pt0 mr1 on-mobile-w100",children:(0,j.jsx)(Ec.Z,{value:n,options:s,onChange:({target:e})=>r({value:e.value,key:"type",uid:t})})})},Pc=n(1577),Zc=n(23569),Tc=n(85978),kc=n(2253);function TelInput_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var input_TelInput=e=>(0,j.jsx)(jr.Z,function TelInput_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?TelInput_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TelInput_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"tel"},e)),zc=n(75646),_c=n(27463),Rc=n(48113),Gc=n(68491),Yc=n(15569),Uc=n(32452),Fc=n(68006),Kc=n(73828),Bc=n(82216),Wc=n(87607),Vc=n(75562);const getFormattedWeekdays=(e,t)=>{const n=new Date(0);return(0,Gc.Z)({start:(0,Yc.Z)(n),end:(0,Uc.Z)(n)}).map((n=>(0,Et.Z)(n,e,t)))},getWeekStartsOn=({options:{weekStartsOn:e=0}={weekStartsOn:0}})=>e;var Qc=n(2876),Hc=n(87423),Xc=n(69247);const Jc=["bottom","height","left","right","top","width","x","y"],isEquivalent=(e,t)=>{if(!e&&t)return!1;if(e&&!t)return!1;for(const n of Jc)if((null==e?void 0:e[n])!==(null==t?void 0:t[n]))return!1;return!0},getElementRect=e=>{if(e)return e.getBoundingClientRect()},defaultReducer=(e,t,n)=>{const[r,a]=n;return isEquivalent(r,t)&&isEquivalent(a,e)?e:(n[0]=e,n[1]=t,((e,t)=>isEquivalent(e,t)?e:t)(e,t))};var hooks_useElementRect=(e,t=c.Ds,n=defaultReducer)=>{const r=(0,fe.Z)((()=>[])),[a,s]=(0,o.useState)((()=>getElementRect(e.current)));return(0,o.useLayoutEffect)((()=>{const a=e.current;if(!a)return;if("function"==typeof ResizeObserver){const e=new ResizeObserver(t((([{contentRect:e}])=>{s((e=>n(e,getElementRect(a),r)))}),100));return e.observe(a,{box:"border-box"}),s((e=>n(e,getElementRect(a),r))),()=>{e.disconnect()}}const o=t((()=>{s((e=>n(e,getElementRect(a),r)))}),100);return window.addEventListener("resize",o),s((e=>n(e,getElementRect(a),r))),()=>{window.removeEventListener("resize",o)}}),[e.current]),a},qc=n(77942),$c=n(57932),el=n(14726),tl=n(68735),nl=n(41652);const getDateTupleFromWeekNumber=(e,t,n)=>{const r=(0,tl.Z)((0,nl.Z)(e,1,{weekStartsOn:n}),t);return[(0,Yc.Z)(r,{weekStartsOn:n}),(0,Uc.Z)(r,{weekStartsOn:n})]};var rl=n(59616),al=n(37381);const getTargetDate=(e,t)=>{var n;const r=parseInt((null==e||null===(n=e.dataset)||void 0===n?void 0:n.i)||"",10);if(r>=0&&r<t.length)return t[r]},MonthDays=({days:e,onSelectDate:t,onSelectDateRange:n,dateRange:r,formatDay:a,now:s,min:i,max:c,selectedDate:l,activeDate:d,numberOfDays:u,numberOfWeeks:p,cellRef:m})=>{const[g,b]=(0,o.useState)(void 0),y=(0,o.useRef)(void 0),h=(0,o.useRef)(void 0),I={"--cols":u,"--rows":p},[f,M]=g||r||[];return(0,j.jsx)("ul",{className:"minicalendar-monthdays unstyled m0 text-center",style:I,onClick:({target:n})=>{const r=getTargetDate(n,e);r&&(null==t||t(r))},onMouseDown:({target:t})=>{const r=getTargetDate(t,e);if(y.current||!r||!n)return;b([r,void 0]),y.current=r;const handleMouseUp=()=>{h.current&&y.current&&n((0,Bc.Z)(h.current,y.current)?[y.current,h.current]:[h.current,y.current]),b(void 0),y.current=void 0,h.current=void 0,document.removeEventListener("mouseup",handleMouseUp)};document.addEventListener("mouseup",handleMouseUp)},onMouseOver:({target:t})=>{const r=getTargetDate(t,e);y.current&&r&&n&&(h.current=r,b((0,Bc.Z)(r,y.current)?[y.current,r]:[r,y.current]))},onFocus:()=>{},children:e.map(((e,t)=>{const n=!!i&&(0,rl.Z)(e,i),r=!!c&&(0,Bc.Z)(e,c),o=n||r,p=!o&&(0,Qc.Z)(e,d),g=(0,qc.Z)(s,e),b=f&&M&&(0,al.Z)(e,{start:f,end:M})||f&&(0,qc.Z)(f,e),y=!!l&&((0,qc.Z)(l,e)||b),h=b&&t%u==0||b&&f&&(0,qc.Z)(f,e),I=b&&t%u==u-1||b&&M&&(0,qc.Z)(M,e)||!M&&h,N=(0,ht.dh)(["minicalendar-day no-pointer-events-children",!p&&"minicalendar-day--out-of-month",b&&"minicalendar-day--range",h&&"minicalendar-day--range-bound-start",I&&"minicalendar-day--range-bound-end",l&&(0,qc.Z)(l,e)&&"minicalendar-day--selected"]);return(0,j.jsx)("li",{ref:0===t?m:void 0,children:(0,j.jsx)("button",{disabled:o,"aria-label":a(e),"aria-current":g?"date":void 0,"aria-pressed":!!y||void 0,className:N,"data-i":t,type:"button",children:(0,j.jsx)("span",{className:"minicalendar-day-number",children:e.getDate()})})},e.toString())}))})};var ol=(0,o.memo)(MonthDays);var sl,il,miniCalendar_WeekDays=({weekdaysShort:e,weekdaysLong:t,weekStartsOn:n=1,numberOfDays:r,activeDateDay:a})=>{const s={"--weekdays-count":r},i=(0,o.useMemo)((()=>e.map(((r,o)=>{const s=(o+n)%7,i=e[s],c=t[s],l=s===a;return(0,j.jsx)(ur.Z,{title:c,children:(0,j.jsxs)("span",{"aria-hidden":"true",className:(0,ht.dh)(["text-strong",l&&"color-primary"]),children:[i,(0,j.jsx)("span",{className:"sr-only",children:c})]})},i+o)}))),[e,n,a]);return(0,j.jsx)("div",{className:"text-center minicalendar-weekdays",style:s,children:i})},cl=n(47923);const getTargetWeek=e=>{var t;const n=parseInt((null==e||null===(t=e.dataset)||void 0===t?void 0:t.i)||"",10);if(n>=0&&n<=53)return n};var ll,miniCalendar_WeekNumbers=({days:e,numberOfWeeks:t,onClickWeekNumber:n,onSelectWeekRange:r})=>{const a={"--week-count":t+1},[s,i]=(0,o.useState)(void 0),c=(0,o.useRef)(void 0),l=(0,o.useRef)(void 0),p=(0,o.useMemo)((()=>Array.from({length:t},((t,n)=>{const r=7*n,a=((e,t,n)=>{for(let r=t;r<n;++r){const t=e[r];if(t&&1===t.getDay())return t}})(e,r,r+7)||e[r];return{monday:a,weekNumber:(0,cl.Z)(a)}}))),[e]);return(0,j.jsxs)("ul",{className:(0,ht.dh)(["minicalendar-weeknumbers unstyled m0 text-center",!r&&"no-pointer-events-children"]),style:a,onMouseDown:({target:e})=>{const t=getTargetWeek(e);if(c.current||!t||!r)return;i([t,void 0]),c.current=t;const handleMouseUp=()=>{l.current&&c.current&&r(l.current>c.current?[c.current,l.current]:[l.current,c.current]),i(void 0),c.current=void 0,l.current=void 0,document.removeEventListener("mouseup",handleMouseUp)};document.addEventListener("mouseup",handleMouseUp)},onMouseOver:({target:e})=>{const t=getTargetWeek(e);c.current&&t&&r&&(l.current=t,i(t>c.current?[c.current,t]:[t,c.current]))},onFocus:()=>{},children:[(0,j.jsx)("li",{children:(0,j.jsx)("span",{className:"sr-only",children:(0,u.c)("Info").t(sl||(sl=(0,d.Z)(["Week"])))})}),p.map((({monday:e,weekNumber:t})=>{const r=!!s&&(t>=s[0]&&t<=(s[1]||s[0]));return(0,j.jsx)("li",{children:(0,j.jsx)(ur.Z,{title:"".concat((0,u.c)("Info").t(il||(il=(0,d.Z)(["Week"])))," ").concat(t),originalPlacement:"bottom",children:(0,j.jsx)("button",{"data-i":t,"aria-pressed":r,type:"button",className:(0,ht.dh)(["minicalendar-weeknumber",!n&&"no-pointer-events"]),onClick:()=>null==n?void 0:n(t),children:(0,j.jsx)("span",{className:"no-pointer-events",children:t})})})},+e)}))]})};var dl,ul,miniCalendar_MiniCalendar=({hasCursors:e=!0,hasToday:t=!1,now:n=new Date,date:r,min:a,max:s,dateRange:i,onSelectDate:c,onSelectDateRange:l,formatDay:p=(e=>e.toString()),weekStartsOn:m=1,weekdaysLong:g=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:b=["S","M","T","W","T","F","S"],nextMonth:y="Next month",prevMonth:h="Previous month",months:I=["January","February","March","April","May","June","July","August","September","October","November","December"],numberOfDays:f=7,numberOfWeeks:M=6,displayWeekNumbers:N=!1,fixedSize:x=!1,preventLeaveFocus:v=!1})=>{const[w,D]=(0,o.useState)(),S=(0,o.useRef)(null),O=hooks_useElementRect(S),A=w||r,C=(0,Qc.Z)(n,A)?n.getDay():void 0,E=(0,o.useMemo)((()=>((e,{weekStartsOn:t,weeks:n})=>{const r=(0,Hc.Z)(e),a=(0,Yc.Z)(r,{weekStartsOn:t}),o=(0,qc.Z)(r,a)&&5===n?(0,$c.Z)(a,1):a,s=(0,Uc.Z)((0,el.Z)(o,n),{weekStartsOn:t});return(0,Gc.Z)({start:o,end:s})})(A,{weekStartsOn:m,weeks:M-1})),[A,m,M]),L=(0,o.useMemo)((()=>"".concat(I[A.getMonth()]," ").concat(A.getFullYear())),[A,I]),P=(0,u.c)("Today icon tooltip in mini calendar").t(ll||(ll=(0,d.Z)(["Today"]))),handleSwitchMonth=e=>{const t=(0,Kc.Z)(A,e),n=a&&(0,Hc.Z)(t)<(0,Hc.Z)(a),r=s&&(0,Xc.Z)(t)>(0,Xc.Z)(s);n||r||D(t)},Z=l&&(e=>{l(getDateTupleFromWeekNumber(A,e,m),!0)}),T=l&&(([e,t])=>{const[n]=getDateTupleFromWeekNumber(A,e,m),[,r]=getDateTupleFromWeekNumber(A,t,m);l([n,r])});(0,o.useEffect)((()=>{D(void 0)}),[r]);const k=v?e=>e.preventDefault():void 0;return(0,j.jsxs)("div",{className:"minicalendar",onMouseDown:k,"aria-label":L,children:[(0,j.jsxs)("div",{className:"flex flex-align-items-center flex-nowrap p1",children:[(0,j.jsx)("span",{className:"text-bold flex-item-fluid text-ellipsis",children:L}),t?(0,j.jsx)(ur.Z,{title:P,children:(0,j.jsx)(Ea.Z,{icon:!0,shape:"ghost",color:"weak",size:"small",onClick:()=>null==c?void 0:c(n),disabled:a&&+n<+a||s&&+n>+s,"data-testid":"minicalendar:today",children:(0,j.jsx)(pr.Z,{name:"calendar-day",className:"minicalendar-icon",alt:P})})}):null,e?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(ur.Z,{title:h,children:(0,j.jsx)(Ea.Z,{icon:!0,shape:"ghost",className:"on-rtl-mirror",color:"weak",size:"small",disabled:a&&(0,Hc.Z)((0,Kc.Z)(A,-1))<(0,Hc.Z)(a),onClick:()=>handleSwitchMonth(-1),"data-testid":"minicalendar:previous-month",children:(0,j.jsx)(pr.Z,{name:"angle-down",className:"rotateZ-90 minicalendar-icon",alt:h})})}),(0,j.jsx)(ur.Z,{title:y,children:(0,j.jsx)(Ea.Z,{icon:!0,shape:"ghost",className:"on-rtl-mirror",color:"weak",size:"small",disabled:s&&(0,Xc.Z)((0,Kc.Z)(A,1))>(0,Xc.Z)(s),onClick:()=>handleSwitchMonth(1),"data-testid":"minicalendar:next-month",children:(0,j.jsx)(pr.Z,{name:"angle-down",className:"rotateZ-270 minicalendar-icon",alt:y})})})]}):null]}),(0,j.jsxs)("div",{style:!x&&O&&O.width>0?{"--computed-cell-width":"".concat(O.width,"px")}:void 0,className:(0,ht.dh)(["minicalendar-grid pl0-75 pr0-75 pb1",N&&"with-weeknumbers",x&&"is-fixed-size"]),children:[N?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(miniCalendar_WeekNumbers,{numberOfWeeks:M,days:E,onClickWeekNumber:Z,onSelectWeekRange:T}),(0,j.jsx)(vr_Vr,{className:"minicalendar-vr","aria-hidden":"true"})]}):null,(0,j.jsx)(miniCalendar_WeekDays,{numberOfDays:f,weekdaysShort:b,weekdaysLong:g,weekStartsOn:m,activeDateDay:C}),(0,j.jsx)(ol,{min:a,max:s,numberOfWeeks:M,numberOfDays:f,days:E,formatDay:p,dateRange:i,onSelectDate:c,onSelectDateRange:l,now:n,activeDate:A,selectedDate:r,cellRef:S})]})]})};const pl=["weekStartsOn"];function LocalizedMiniCalendar_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ml,miniCalendar_LocalizedMiniCalendar=e=>{let{weekStartsOn:t}=e,n=(0,Sn.Z)(e,pl);const r=(0,o.useMemo)((()=>getFormattedWeekdays("cccc",{locale:kt.RW})),[kt.RW]),a=(0,o.useMemo)((()=>getFormattedWeekdays("ccccc",{locale:kt.RW})),[kt.RW]),s=(0,o.useMemo)((()=>((e,t)=>{const n=(0,Fc.Z)(new Date(0));return Array.from({length:12}).map(((e,t)=>(0,Kc.Z)(n,t))).map((n=>(0,Et.Z)(n,e,t)))})("LLLL",{locale:kt.RW})),[kt.RW]),i=(0,o.useCallback)((e=>(0,Et.Z)(e,"PPPP",{locale:kt.RW})),[kt.RW]);return(0,j.jsx)(miniCalendar_MiniCalendar,function LocalizedMiniCalendar_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?LocalizedMiniCalendar_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LocalizedMiniCalendar_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({nextMonth:(0,u.c)("Action").t(dl||(dl=(0,d.Z)(["Next month"]))),prevMonth:(0,u.c)("Action").t(ul||(ul=(0,d.Z)(["Previous month"]))),weekdaysLong:r,weekdaysShort:a,months:s,weekStartsOn:void 0!==t?t:getWeekStartsOn(kt.RW),formatDay:i},n))};const gl=["value","defaultDate","placeholder","autoFocus","onChange","onFocus","onBlur","displayWeekNumbers","weekStartsOn","min","max","preventValueReset","fromFormatter","toFormatter","hasToday"];function DateInput_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function DateInput_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DateInput_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DateInput_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const toFormatted=(e,t)=>(0,Et.Z)(e,"PP",{locale:t}),fromFormatted=(e,t)=>(0,_c.Z)(e,"PP",new Date,{locale:t}),getTemporaryInputFromValue=e=>e?toFormatted(e,kt.RW):"",jl=new Date(1900,0,1),bl=new Date(2200,0,1);var yl,hl,Il,fl,Ml,Nl,xl,input_DateInput=e=>{let{value:t,defaultDate:n,placeholder:r,autoFocus:a,onChange:s,onFocus:i,onBlur:c,displayWeekNumbers:l,weekStartsOn:p,min:m=jl,max:g=bl,preventValueReset:b=!1,fromFormatter:y=fromFormatted,toFormatter:h=toFormatted,hasToday:I=!0}=e,f=(0,Sn.Z)(e,gl);const[M]=(0,o.useState)((0,ht.D)("dropdown")),{anchorRef:N,isOpen:x,open:v,close:w}=(0,No.Z)(),[D,S]=(0,o.useState)(""),[O,A]=(0,o.useState)(!1);(0,o.useEffect)((()=>{S(getTemporaryInputFromValue(t))}),[t?+t:void 0]);const C=(0,o.useMemo)((()=>t?h(t,kt.RW):""),[t?+t:void 0]),E=(0,o.useMemo)((()=>{if(D)try{const e=y(D,kt.RW);if(e<m||e>g)return b?e:void 0;if(Number.isNaN(+e))return;return e}catch(e){}}),[D]),L=(0,o.useMemo)((()=>n||new Date),[n]),P=E||t||L,parseAndTriggerChange=()=>{const e=D;S(getTemporaryInputFromValue(t)),!E&&e||s(E)};(0,Co.y)(N,[["Escape",e=>{x&&(e.preventDefault(),e.stopPropagation(),parseAndTriggerChange(),w())}],["Enter",e=>{parseAndTriggerChange(),x?(e.preventDefault(),e.stopPropagation(),w()):(e.preventDefault(),e.stopPropagation(),v())}],["ArrowDown",e=>{x&&(e.preventDefault(),e.stopPropagation(),S(toFormatted((0,Rc.Z)(P,-1),kt.RW)))}],["ArrowUp",e=>{x&&(e.preventDefault(),e.stopPropagation(),S(toFormatted((0,Rc.Z)(P,1),kt.RW)))}]]);const Z=(0,o.useMemo)((()=>toFormatted(L,kt.RW)),[kt.RW,n]);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(jr.Z,DateInput_objectSpread({type:"text",ref:N,onFocus:e=>{null==i||i(e),v(),A(!0),S(C)},onBlur:e=>{null==c||c(e),parseAndTriggerChange(),w(),A(!1),S("")},value:O?D:C,onChange:({target:{value:e}})=>{S(e)},placeholder:void 0!==r?r:"".concat((0,u.c)("Placeholder").t(ml||(ml=(0,d.Z)(["E.g., "])))).concat(Z),autoFocus:a},f)),(0,j.jsx)(Mo.Z,{disableFocusTrap:!0,autoClose:!1,autoCloseOutside:!1,id:M,isOpen:x,anchorRef:N,onClose:w,disableDefaultArrowNavigation:!0,children:(0,j.jsx)(miniCalendar_LocalizedMiniCalendar,{date:P,min:m,max:g,onSelectDate:e=>{S(toFormatted(e,kt.RW)),setTimeout((()=>{var e;return null===(e=N.current)||void 0===e?void 0:e.blur()}))},displayWeekNumbers:l,weekStartsOn:p,fixedSize:!0,hasToday:I,preventLeaveFocus:!0})})]})},vl=n(4264),wl=n(53933);const Dl=["url","onSubmit","onClose"];function ContactImageModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ContactImageModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ContactImageModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ContactImageModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Sl,modals_ContactImageModal=e=>{let{url:t="",onSubmit:n,onClose:r}=e,a=(0,Sn.Z)(e,Dl);const[s,i]=(0,o.useState)(t),{createNotification:c}=(0,hn.Z)(),l=(0,u.c)("Title").t(yl||(yl=(0,d.Z)(["Edit image"]))),p=s.startsWith("data:image");return(0,j.jsxs)(On.Z,ContactImageModal_objectSpread(ContactImageModal_objectSpread({title:l,onSubmit:()=>{n(s),null==r||r()},submit:(0,u.c)("Action").t(Il||(Il=(0,d.Z)(["Save"]))),onClose:r},a),{},{children:[(0,j.jsxs)(bo.Z,{children:[(0,j.jsx)(gr.Z,{htmlFor:"contactImageModal-input-url",children:(0,u.c)("Label").t(fl||(fl=(0,d.Z)(["Add image URL"])))}),(0,j.jsx)(yo.Z,{children:(0,j.jsx)(jr.Z,{id:"contactImageModal-input-url",value:p?"":s,onChange:e=>{i(e.target.value.split("?")[0])},placeholder:(0,u.c)("Placeholder").t(Ml||(Ml=(0,d.Z)(["Image URL"])))})})]}),(0,j.jsxs)(bo.Z,{children:[(0,j.jsx)(gr.Z,{htmlFor:"contactImageModal-input-file",children:(0,u.c)("Label").t(Nl||(Nl=(0,d.Z)(["Upload picture"])))}),(0,j.jsx)(yo.Z,{children:(0,j.jsx)(wl.Z,{id:"contactImageModal-input-file",accept:"image/*",onChange:e=>{const t=e.target.files?e.target.files[0]:null,a=new FileReader;t&&(a.onloadend=async()=>{try{const e=await(0,vl.tg)({original:"".concat(a.result),maxWidth:es,maxHeight:es,finalMimeType:"image/jpeg",encoderOptions:1,bigResize:!0});n(e),null==r||r()}catch(e){throw c({text:(0,u.c)("Error").t(hl||(hl=(0,d.Z)(["Image upload failed"]))),type:"error"}),e}},a.readAsDataURL(t))},children:(0,u.c)("Action").t(xl||(xl=(0,d.Z)(["Upload picture"])))})})]})]}))};var Ol,Al,Cl,El,Ll,Pl,Zl,contacts_ContactImageField=({value:e,onChange:t})=>(0,j.jsx)("div",{children:e?(0,j.jsx)("img",{className:"max-w13e",src:(0,vl.Co)(e),referrerPolicy:"no-referrer"}):(0,j.jsx)(Ea.Z,{onClick:t,children:(0,u.c)("Action").t(Sl||(Sl=(0,d.Z)(["Upload picture"])))})});const{POST_BOX:Tl,EXTENDED:kl,STREET:zl,LOCALITY:_l,REGION:Rl,POSTAL_CODE:Gl,COUNTRY:Yl}=$o;var contacts_ContactAdrField=({value:e,onChange:t})=>{const[n]=(0,o.useState)((0,ht.D)("contact-adr")),[r,a]=(0,o.useState)((e=>{const t=Array.isArray(e)?e:e.split(",");return Array.from({length:7}).map(((e,n)=>t[n]||""))})(e)),handleChange=e=>({target:n})=>{const o=[...r];o[e]=n.value,a(o),t(o)};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:"mb1",children:(0,j.jsx)(jr.Z,{id:"".concat(n,"-street"),value:r[zl],placeholder:(0,u.c)("Label").t(Ol||(Ol=(0,d.Z)(["Street address"]))),onChange:handleChange(zl),"data-testid":"street"})}),r[kl]?(0,j.jsx)("div",{className:"mb1",children:(0,j.jsx)(jr.Z,{id:"".concat(n,"-extended"),value:r[kl],placeholder:(0,u.c)("Label").t(Al||(Al=(0,d.Z)(["Extended address"]))),onChange:handleChange(kl),"data-testid":"extended"})}):null,(0,j.jsx)("div",{className:"mb1",children:(0,j.jsx)(jr.Z,{id:"".concat(n,"-postalCode"),value:r[Gl],placeholder:(0,u.c)("Label").t(Cl||(Cl=(0,d.Z)(["Postal code"]))),onChange:handleChange(Gl),"data-testid":"postalCode"})}),(0,j.jsx)("div",{className:"mb1",children:(0,j.jsx)(jr.Z,{id:"".concat(n,"-locality"),value:r[_l],placeholder:(0,u.c)("Label").t(El||(El=(0,d.Z)(["City"]))),onChange:handleChange(_l),"data-testid":"city"})}),r[Tl]?(0,j.jsx)("div",{className:"mb1",children:(0,j.jsx)(jr.Z,{id:"".concat(n,"-postBox"),value:r[Tl],placeholder:(0,u.c)("Label").t(Ll||(Ll=(0,d.Z)(["Post office box"]))),onChange:handleChange(Tl),"data-testid":"postBox"})}):null,(0,j.jsxs)("div",{className:"mb1",children:[(0,j.jsx)("label",{className:"text-sm color-weak",htmlFor:"".concat(n,"-region")}),(0,j.jsx)(jr.Z,{id:"".concat(n,"-region"),value:r[Rl],placeholder:(0,u.c)("Label").t(Pl||(Pl=(0,d.Z)(["Region"]))),onChange:handleChange(Rl),"data-testid":"region"})]}),(0,j.jsx)("div",{children:(0,j.jsx)(jr.Z,{id:"".concat(n,"-country"),value:r[Yl],placeholder:(0,u.c)("Label").t(Zl||(Zl=(0,d.Z)(["Country"]))),onChange:handleChange(Yl),"data-testid":"country"})})]})};const Ul=["field","value","uid","onChange","isSubmitted"];function ContactFieldProperty_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ContactFieldProperty_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ContactFieldProperty_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ContactFieldProperty_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const ContactFieldProperty=(e,t)=>{let{field:n,value:r,uid:a,onChange:o,isSubmitted:s=!1}=e,i=(0,Sn.Z)(e,Ul);const{createModal:c}=(0,In.Z)(),l=getAllFieldLabels(),d=l[n],handleChange=({target:e})=>o({value:e.value,uid:a});if("email"===n)return(0,j.jsx)(kc.Z,ContactFieldProperty_objectSpread({value:r,placeholder:l.email,onChange:handleChange,"data-testid":d},i));if("tel"===n)return(0,j.jsx)(input_TelInput,ContactFieldProperty_objectSpread({value:r,placeholder:l.tel,onChange:handleChange,"data-testid":d},i));if("adr"===n){const handleChangeAdr=e=>o({value:e,uid:a});return(0,j.jsx)(contacts_ContactAdrField,{value:r,onChange:handleChangeAdr})}if("note"===n)return(0,j.jsx)(zc.Z,ContactFieldProperty_objectSpread({value:r,placeholder:l.note,onChange:handleChange,"data-testid":d},i));if("bday"===n||"anniversary"===n){const e=""===r?new Date:(0,Pc.Z)("".concat(r));if((0,Zc.Z)(e)){const handleSelectDate=e=>{e&&(0,Zc.Z)(e)&&o({value:(0,Tc.Z)(e,{representation:"date"}),uid:a})};return(0,j.jsx)(input_DateInput,ContactFieldProperty_objectSpread({placeholder:d,value:e,onChange:handleSelectDate,"data-testid":d},i))}}if("photo"===n||"logo"===n){const handleChangeImage=()=>{c((0,j.jsx)(modals_ContactImageModal,{url:r,onSubmit:e=>o({uid:a,value:e})}))};return(0,j.jsx)(contacts_ContactImageField,ContactFieldProperty_objectSpread({value:r,onChange:handleChangeImage,"data-testid":d},i))}return"fn"===n?(0,j.jsx)(jr.Z,ContactFieldProperty_objectSpread({ref:t,value:r,placeholder:d,onChange:handleChange,isSubmitted:s,"data-testid":d,required:!0},i)):(0,j.jsx)(jr.Z,ContactFieldProperty_objectSpread({value:r,placeholder:d,onChange:handleChange,"data-testid":d},i))};var Fl=(0,o.forwardRef)(ContactFieldProperty);const Mark=({children:e,value:t})=>{if(!t||"string"!=typeof e)return(0,j.jsx)(j.Fragment,{children:e});const n=(0,br.Fv)(t,!0),r=(0,br.Fv)(e,!0),a=new RegExp(escapeRegex(n),"gi"),o=getMatches(a,r);return(0,j.jsx)(text_Marks,{chunks:o,children:e})};var Kl=(0,o.memo)(Mark),Bl=n(53727),Wl=(0,vr.Z)(Bl.o);const Vl=["contacts","groupIDs","onSubmit","onClose"],Ql=["isChecked"];var Hl,Xl,Jl,ql,$l,ed,td,nd;function SelectEmailsModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SelectEmailsModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SelectEmailsModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SelectEmailsModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const enumerate=e=>{if(e.length<=1)return e.join("");const t=e.slice(0,-1).join(", "),n=e.slice(-1);return(0,u.c)("Info").t(Hl||(Hl=(0,d.Z)([""," and ",""])),t,n)};var rd,modals_SelectEmailsModal=e=>{let{contacts:t,groupIDs:n,onSubmit:r,onClose:a}=e,s=(0,Sn.Z)(e,Vl);const[i]=useContactGroups(),[c]=wr(),l=n.map((e=>null==i?void 0:i.find((t=>t.ID===e)))).filter(Za.Z),[p,m]=(0,o.useState)(t.map((e=>SelectEmailsModal_objectSpread(SelectEmailsModal_objectSpread({},e),{},{contactEmails:c.filter((({ContactID:t})=>t===e.ID)).map((e=>SelectEmailsModal_objectSpread(SelectEmailsModal_objectSpread({},e),{},{isChecked:!0})))})))),handleCheck=(e,t)=>({target:n})=>{const r=[...p],a=p.findIndex((({ID:t})=>t===e)),o=p[a].contactEmails.findIndex((({ID:e})=>e===t));r[a].contactEmails[o].isChecked=n.checked,m(r)},g=1===t.length,b=1===l.length,y=t[0].Name,h=enumerate(t.map((e=>e.Name))),I=l[0].Name,f=enumerate(l.map((e=>e.Name))),M=l.length,N=b?(0,u.c)("Title").t(Xl||(Xl=(0,d.Z)(["Add to ",""])),I):(0,u.c)("Title").ngettext((0,u.msgid)(Jl||(Jl=(0,d.Z)(["Add to "," group"])),M),"Add to ".concat(M," groups"),M);let x;return x=g?b?(0,u.c)("Info").t(ql||(ql=(0,d.Z)([""," contains multiple email addresses. Please select which email address or addresses to add to this group."])),y):(0,u.c)("Info").t($l||($l=(0,d.Z)([""," contains multiple email addresses. Please select which email address or addresses to add to ","."])),y,f):b?(0,u.c)("Info").t(ed||(ed=(0,d.Z)([""," contain multiple email addresses. Please select which email address or addresses to add to this group."])),h):(0,u.c)("Info").t(td||(td=(0,d.Z)([""," contain multiple email addresses. Please select which email address or addresses to add to ","."])),h,f),(0,j.jsxs)(On.Z,SelectEmailsModal_objectSpread(SelectEmailsModal_objectSpread({submit:(0,u.c)("Action").t(nd||(nd=(0,d.Z)(["Apply"]))),title:N,onSubmit:()=>{const e=p.reduce(((e,t)=>(t.contactEmails.forEach((t=>{let{isChecked:n}=t,r=(0,Sn.Z)(t,Ql);n&&e.push(r)})),e)),[]);r(e),null==a||a()},onClose:a},s),{},{children:[(0,j.jsx)(Cn.Z,{className:"mb1",children:x}),p.filter((({contactEmails:e=[]})=>e.length>1)).map((({ID:e,Name:t,contactEmails:n=[]})=>(0,j.jsxs)(bo.Z,{className:"border-bottom",children:[!g&&(0,j.jsx)(gr.Z,{className:"text-semibold pt0",children:t}),(0,j.jsx)(yo.Z,{className:"flex flex-column w100",children:n.map((({ID:t,Email:n,isChecked:r})=>(0,j.jsxs)("label",{className:"mb1",htmlFor:t,children:[(0,j.jsx)(Nr,{id:t,checked:r,className:"mr0-5",onChange:handleCheck(e,t)}),(0,j.jsx)("span",{children:n})]},t)))})]},e)))]}))};var ad,od,sd,id,cd,ld,contacts_useApplyGroups=()=>{const{createNotification:e}=(0,hn.Z)(),{call:t}=(0,Ie.Z)(),n=(0,Dn.Z)(),{createModal:r}=(0,In.Z)(),[a]=Wl(),[s=[]]=useContactGroups();return(0,o.useCallback)((async(o,s,i=!1)=>{const{contacts:c}=((e=[],t)=>e.reduce(((e,{ContactID:n})=>{if(e.duplicate[n]=(e.duplicate[n]||0)+1,2===e.duplicate[n]){const r=t.find((({ID:e})=>e===n));r&&e.contacts.push(r)}return e}),{contacts:[],duplicate:Object.create(null)}))(o,a),l=o.filter((e=>!c.find((t=>e.ContactID===t.ID))));let p=[];if(c.length){const e=Object.entries(s).filter((([,e])=>e)).map((([e])=>e));e.length&&(p=await new Promise(((t,n)=>{r((0,j.jsx)(modals_SelectEmailsModal,{groupIDs:e,contacts:c,onSubmit:t,onClose:n}))})))}const m=[...o],g=[...l,...p],b=Object.entries(s);await Promise.all(b.map((([e,t])=>{if(t){const t=g.filter((({LabelIDs:t=[]})=>!t.includes(e))).map((({ID:e})=>e));return t.length?n((0,Lo.S3)({LabelID:e,ContactEmailIDs:t})):Promise.resolve()}const r=m.filter((({LabelIDs:t=[]})=>t.includes(e))).map((({ID:e})=>e));return r.length?n((0,Lo.LH)({LabelID:e,ContactEmailIDs:r})):Promise.resolve()}))),await t(),i||e({text:(0,u.c)("Info").t(rd||(rd=(0,d.Z)(["Group assignment applied"])))})}),[a,s])};const dd=["children","className","contactEmails","disabled","forToolbar","tooltip","onDelayedSave"];function ContactGroupDropdown_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ContactGroupDropdown_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ContactGroupDropdown_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ContactGroupDropdown_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ud,pd,md,gd,jd,contacts_ContactGroupDropdown=e=>{let{children:t,className:n,contactEmails:r,disabled:a=!1,forToolbar:s=!1,tooltip:i=(0,u.c)("Action").t(ad||(ad=(0,d.Z)(["Add to group"]))),onDelayedSave:c}=e,l=(0,Sn.Z)(e,dd);const[p,m]=(0,o.useState)(""),[g,b]=(0,no.Z)(),{anchorRef:y,isOpen:h,toggle:I,close:f}=(0,No.Z)(),{createModal:M}=(0,In.Z)(),[N=[]]=useContactGroups(),[x,v]=(0,o.useState)(Object.create(null)),[w,D]=(0,o.useState)(Object.create(null)),[S]=(0,o.useState)((0,ht.D)("contactGroupDropdown")),O=contacts_useApplyGroups(),handleCheck=e=>({target:t})=>D(ContactGroupDropdown_objectSpread(ContactGroupDropdown_objectSpread({},w),{},{[e]:+t.checked})),handleCreateContactGroup=async e=>{handleCheck(e),c&&c({[e]:!0})};(0,o.useEffect)((()=>{if(h){const e=((e=[],t=[])=>t.length&&e.length?e.reduce(((e,{ID:n})=>{const r=t.filter((({LabelIDs:e=[]})=>e.includes(n)));return r.length?e[n]=t.length===r.length?1:2:e[n]=0,e}),Object.create(null)):Object.create(null))(N,r);v(e),D(e)}}),[N,r,h]);const A=(0,o.useMemo)((()=>{if(!Array.isArray(N))return[];const e=(0,br.Fv)(p,!0);return e.length?N.filter((({Name:t})=>(0,br.Fv)(t,!0).includes(e))):N}),[p,N]);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(ur.Z,{title:i,children:(0,j.jsx)(fo.Z,ContactGroupDropdown_objectSpread(ContactGroupDropdown_objectSpread({as:s?"button":Ea.Z,ref:y,isOpen:h,onClick:I,hasCaret:!0,disabled:a,caretClassName:s?"toolbar-icon":"",className:(0,ht.dh)([s&&"toolbar-button toolbar-button--dropdown","flex flex-align-items-center",n])},l),{},{children:t}))}),(0,j.jsx)(Mo.Z,{id:"contact-group-dropdown",className:"contactGroupDropdown",isOpen:h,anchorRef:y,onClose:f,autoClose:!1,noMaxSize:!0,children:(0,j.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),await b((async()=>{const e=Object.entries(w).reduce(((e,[t,n])=>(n!==x[t]&&(e[t]=1===n),e)),{});c?c(e):await O(r,e),f()})())},children:[(0,j.jsxs)("div",{className:"flex flex-justify-space-between flex-align-items-center m1 mb0",children:[(0,j.jsx)("strong",{children:(0,u.c)("Label").t(od||(od=(0,d.Z)(["Add to group"])))}),(0,j.jsx)(ur.Z,{title:(0,u.c)("Info").t(sd||(sd=(0,d.Z)(["Create a new contact group"]))),children:(0,j.jsxs)(Ea.Z,{icon:!0,size:"small",onClick:()=>{M((0,j.jsx)(modals_ContactGroupModal,{selectedContactEmails:r,onDelayedSave:c?handleCreateContactGroup:void 0})),f()},className:"flex flex-align-items-center","data-prevent-arrow-navigation":!0,children:[(0,j.jsx)(pr.Z,{name:"user-group"})," +"]})})]}),(0,j.jsx)("div",{className:"m1 mb0",children:(0,j.jsx)(Ir,{value:p,onChange:m,autoFocus:!0,placeholder:(0,u.c)("Placeholder").t(id||(id=(0,d.Z)(["Filter groups"]))),"data-prevent-arrow-navigation":!0})}),(0,j.jsxs)("div",{className:"scroll-if-needed scroll-smooth-touch mt1 contactGroupDropdown-list-container",children:[A.length?(0,j.jsx)("ul",{className:"unstyled mt0 mb0",children:A.map((({ID:e,Name:t,Color:n})=>{const r="".concat(S).concat(e);return(0,j.jsxs)("li",{className:"dropdown-item w100 flex flex-nowrap flex-align-items-center pt0-5 pb0-5 pl1 pr1",children:[(0,j.jsx)(Nr,{className:"flex-item-noshrink",id:r,checked:1===w[e],indeterminate:2===w[e],onChange:handleCheck(e)}),(0,j.jsxs)("label",{htmlFor:r,className:"flex flex-align-items-center flex-item-fluid flex-nowrap",children:[(0,j.jsx)(pr.Z,{name:"circle-filled",className:"ml0-25 mr0-5 flex-item-noshrink",size:12,color:n}),(0,j.jsx)("span",{className:"flex-item-fluid text-ellipsis",title:t,children:(0,j.jsx)(Kl,{value:p,children:t})})]})]},e)}))}):null,!A.length&&p?(0,j.jsxs)("div",{className:"w100 flex flex-nowrap flex-align-items-center pt0-5 pb0-5 pl1 pr1",children:[(0,j.jsx)(pr.Z,{name:"triangle-exclamation",className:"mr0-5"}),(0,u.c)("Info").t(cd||(cd=(0,d.Z)(["No group found"])))]}):null]}),(0,j.jsx)("div",{className:"m1",children:(0,j.jsx)(Ea.Z,{color:"norm",fullWidth:!0,loading:g,disabled:!A.length,"data-prevent-arrow-navigation":!0,type:"submit",children:(0,u.c)("Action").t(ld||(ld=(0,d.Z)(["Apply"])))})})]})})]})};function ContactModalRow_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ContactModalRow_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ContactModalRow_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ContactModalRow_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const ContactModalRow_ContactModalRow=({property:e,onChange:t,onRemove:n,isOrderable:r=!1,isSubmitted:a=!1,actionRow:s=!0,mainItem:i=!1,labelWidthClassName:c,fixedType:l,filteredTypes:p,contactEmail:m,onContactEmailChange:g},b)=>{const{field:y,value:h}=e,I=clearType(getType(e.type)),f=!("photo"===y&&!h),[{hasPaidMail:M}]=(0,bn.ZP)(),{createModal:N}=(0,In.Z)(),x=(0,o.useRef)(),v=["bday","anniversary","photo","logo"],w=[];f&&w.push({color:"weak",shape:"outline",text:(0,j.jsx)(pr.Z,{name:"trash",className:"mauto",alt:(0,u.c)("Action").t(ud||(ud=(0,d.Z)(["Delete"])))}),onClick:()=>{e.uid&&n(e.uid)}});return(0,o.useEffect)((()=>{x.current&&(y!==x.current&&v.includes(x.current)&&t(ContactModalRow_objectSpread(ContactModalRow_objectSpread({},e),{},{value:""})),v.includes(y)&&t(ContactModalRow_objectSpread(ContactModalRow_objectSpread({},e),{},{value:""}))),x.current=y}),[y]),(0,j.jsxs)("div",{className:"flex flex-nowrap flex-item-noshrink","data-contact-property-id":e.uid,children:[r?(0,j.jsx)(Ic,{children:(0,j.jsx)("div",{className:"cursor-row-resize mr0-5 flex flex-item-noshrink mb1",children:(0,j.jsx)(pr.Z,{name:"align-justify",className:"mt0-75 "})})},"icon"):(0,j.jsx)("div",{className:"mr0-5 flex flex-align-items-center flex-item-noshrink",children:(0,j.jsx)(pr.Z,{name:"align-justify",className:"visibility-hidden"})}),(0,j.jsxs)("div",{className:"contact-modal-field relative flex flex-nowrap on-mobile-flex-column w100 flex-align-items-start",children:[(0,j.jsx)("span",{className:(0,ht.dh)(["contact-modal-select flex flex-nowrap mb1 flex-align-items-start on-mobile-mb0-5 on-mobile-flex-align-self-start",i&&"text-semibold",c||"w30"]),children:(0,j.jsx)(contacts_ContactModalLabel,{field:y,type:I,uid:e.uid,onChange:t,fixedType:l,filteredTypes:p})}),(0,j.jsxs)("div",{className:"flex flex-nowrap flex-align-items-startoupas flex-item-fluid flex-item-noshrink",children:[(0,j.jsx)("span",{className:"flex-item-fluid mb1",children:(0,j.jsx)(Fl,{ref:b,field:y,value:e.value,uid:e.uid,onChange:t,isSubmitted:a})}),s&&(0,j.jsx)("span",{className:"mb1 flex ml0-5",children:w.length>0&&(0,j.jsxs)("div",{className:(0,ht.dh)(["flex flex-item-noshrink",y,Array.isArray(e.value)?e.value.join(" "):e.value,("photo"===y||"note"===y||"logo"===y||"adr"===y)&&"flex-align-items-start"]),children:["email"===y&&(M?(0,j.jsx)(contacts_ContactGroupDropdown,{icon:!0,color:"weak",shape:"outline",className:"mr0-5",contactEmails:m?[m]:[],onDelayedSave:e=>{if(m&&g){let t=[...m.LabelIDs];Object.entries(e).forEach((([e,n])=>{n?t.push(e):t=m.LabelIDs.filter((t=>t!==e))})),g(ContactModalRow_objectSpread(ContactModalRow_objectSpread({},m),{},{LabelIDs:t,changes:ContactModalRow_objectSpread(ContactModalRow_objectSpread({},m.changes),e)}))}},tooltip:(0,u.c)("Title").t(pd||(pd=(0,d.Z)(["Contact group"]))),children:(0,j.jsx)(pr.Z,{name:"user-group",alt:(0,u.c)("Action").t(md||(md=(0,d.Z)(["Contact group"])))})}):(0,j.jsx)(ur.Z,{title:(0,u.c)("Title").t(gd||(gd=(0,d.Z)(["Contact group"]))),children:(0,j.jsx)(Ea.Z,{icon:!0,onClick:()=>N((0,j.jsx)(ContactUpgradeModal,{})),className:"mr0-5",children:(0,j.jsx)(pr.Z,{name:"user-group",alt:(0,u.c)("Action").t(jd||(jd=(0,d.Z)(["Contact group"])))})})})),(0,j.jsx)(dropdown_DropdownActions,{icon:!0,list:w})]})})]})]})]})};var bd,yd=(0,o.forwardRef)(ContactModalRow_ContactModalRow),hd=n(42532);function EncryptedIcon_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function EncryptedIcon_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?EncryptedIcon_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EncryptedIcon_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Id,fd,Md,Nd,xd,vd,wd,contacts_EncryptedIcon=e=>{let t=(0,hd.Z)({},e);return(0,j.jsx)(ur.Z,{title:(0,u.c)("Tooltip").t(bd||(bd=(0,d.Z)(["Encrypted data with verified digital signature"]))),children:(0,j.jsx)(pr.Z,EncryptedIcon_objectSpread({name:"lock-filled",className:"flex flex-item-centered"},t))})};const Dd={fn:"user",email:"envelope",tel:"phone-rotary",adr:"map-marker",other:"circle-info"},Sd={fn:(0,u.c)("Title").t(Id||(Id=(0,d.Z)(["Other names"]))),email:(0,u.c)("Title").t(fd||(fd=(0,d.Z)(["Email addresses"]))),tel:(0,u.c)("Title").t(Md||(Md=(0,d.Z)(["Phone numbers"]))),adr:(0,u.c)("Title").t(Nd||(Nd=(0,d.Z)(["Addresses"]))),other:(0,u.c)("Title").t(xd||(xd=(0,d.Z)(["Other information"])))},ContactModalProperties=({properties:e,field:t,onChange:n,onOrderChange:r,onAdd:a,onRemove:s,isSubmitted:i=!1,contactEmails:c,onContactEmailChange:l},p)=>{const m=t?Sd[t]:Sd.other,g=t?Dd[t]:Dd.other,b=t?[t]:Jo,y=e.filter((({field:e})=>b.includes(e))),h=!b.includes("fn"),I=(0,o.useMemo)((()=>{const e=b===Jo?y.filter((e=>Ko[e.field].cardinality===Uo)).map((e=>e.field)):[];return y.map((t=>(0,j.jsx)(yd,{ref:p,isSubmitted:i,property:t,onChange:n,onRemove:s,isOrderable:!!r,filteredTypes:e.filter((e=>t.field!==e)),contactEmail:null==c?void 0:c[t.value],onContactEmailChange:l},t.uid)))}),[y,n,s,a,!!r]),f=(0,o.useCallback)((({newIndex:e,oldIndex:n})=>{const a=(0,xe.pB)(y,n,e);r&&t&&r(t,a)}),[y,t]);return"fn"!==t||y.length?(0,j.jsxs)("div",{className:"border-bottom mb1",children:[(0,j.jsxs)("h3",{className:"mb1 flex flex-nowrap flex-align-items-center flex-item-noshrink",children:[(0,j.jsx)(pr.Z,{className:"mr0-25 flex-item-noshrink",name:g}),(0,j.jsx)("span",{className:"ml0-1 mr0-5",children:m}),(t&&!["fn","email"].includes(t)||void 0===t)&&(0,j.jsx)(contacts_EncryptedIcon,{className:"flex flex-item-centered-vert flex-item-noshrink"})]}),t&&["email"].includes(t)&&(0,j.jsx)("span",{className:"text-semibold ml1-5 pl0-25 mb0-5",children:(0,u.c)("Info").t(vd||(vd=(0,d.Z)(["Primary"])))}),r?(0,j.jsx)(yc,{helperClass:"row--orderable",onSortEnd:f,useDragHandle:!0,children:(0,j.jsx)("div",{className:"mt0-5",children:I.map(((e,t)=>(0,j.jsx)(hc,{index:t,children:e},e.key||"row".concat(t))))})}):(0,j.jsx)("div",{children:I}),h&&(0,j.jsxs)("div",{className:"flex flex-nowrap flex-item-noshrink",children:[(0,j.jsx)("div",{className:"mr0-5 flex flex-align-items-center flex-item-noshrink",children:(0,j.jsx)(pr.Z,{name:"align-justify visibility-hidden"})}),(0,j.jsx)("div",{className:"flex flex-nowrap w95",children:(0,j.jsx)(Ea.Z,{color:"norm",shape:"outline",className:"mb1",onClick:a,"data-testid":t?"add-".concat(t):"add-other",children:(0,u.c)("Action").t(wd||(wd=(0,d.Z)(["Add"])))})})]})]}):null};var Od,Ad,Cd,Ed,Ld,Pd=(0,o.forwardRef)(ContactModalProperties);const Zd=["contactID","properties","onAdd","onClose","newField"];function ContactModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ContactModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ContactModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ContactModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Td=[{field:"fn",value:""},{field:"email",value:""},{field:"photo",value:""}],{OVERWRITE_CONTACT:kd,THROW_ERROR_IF_CONFLICT:zd}=Ho,{INCLUDE:_d,IGNORE:Rd}=Xo,{SINGLE_SUCCESS:Gd}=M.vB,Yd=[{text:(0,u.c)("Contact field label").t(Hs||(Hs=(0,d.Z)(["Name"]))),value:"fn"},{text:(0,u.c)("Contact field label").t(Xs||(Xs=(0,d.Z)(["Email"]))),value:"email"},{text:(0,u.c)("Contact field label").t(Js||(Js=(0,d.Z)(["Phone"]))),value:"tel"},{text:(0,u.c)("Contact field label").t(qs||(qs=(0,d.Z)(["Address"]))),value:"adr"},{text:(0,u.c)("Contact field label").t($s||($s=(0,d.Z)(["Photo"]))),value:"photo"},{text:(0,u.c)("Contact field label").t(ei||(ei=(0,d.Z)(["Organization"]))),value:"org"},{text:(0,u.c)("Contact field label").t(ti||(ti=(0,d.Z)(["Birthday"]))),value:"bday"},{text:(0,u.c)("Contact field label").t(ni||(ni=(0,d.Z)(["Anniversary"]))),value:"anniversary"},{text:(0,u.c)("Contact field label").t(ri||(ri=(0,d.Z)(["Title"]))),value:"title"},{text:(0,u.c)("Contact field label").t(ai||(ai=(0,d.Z)(["Role"]))),value:"role"},{text:(0,u.c)("Contact field label").t(oi||(oi=(0,d.Z)(["Member"]))),value:"member"},{text:(0,u.c)("Contact field label").t(si||(si=(0,d.Z)(["Note"]))),value:"note"},{text:(0,u.c)("Contact field label").t(ii||(ii=(0,d.Z)(["URL"]))),value:"url"},{text:(0,u.c)("Contact field label").t(ci||(ci=(0,d.Z)(["Gender"]))),value:"gender"},{text:(0,u.c)("Contact field label").t(li||(li=(0,d.Z)(["Language"]))),value:"lang"},{text:(0,u.c)("Contact field label").t(di||(di=(0,d.Z)(["Timezone"]))),value:"tz"},{text:(0,u.c)("Contact field label").t(ui||(ui=(0,d.Z)(["Geo"]))),value:"geo"},{text:(0,u.c)("Contact field label").t(pi||(pi=(0,d.Z)(["Logo"]))),value:"logo"}].map((({value:e})=>e)),Ud=getOtherInformationFields().map((({value:e})=>e)),Fd="contact-property";var Kd,Bd,Wd,modals_ContactModal=e=>{let{contactID:t,properties:n=[],onAdd:r=c.ZT,onClose:a=c.ZT,newField:s}=e,i=(0,Sn.Z)(e,Zd);const l=(0,Dn.Z)(),{createNotification:p}=(0,hn.Z)(),[m,g]=(0,no.Z)(),{call:b}=(0,Ie.Z)(),[y,h]=(0,o.useState)(!1),[I,f]=(0,us.Fj)(),[M,N]=(0,o.useState)(((e=[])=>e.length?(e.find((e=>"fn"===e.field))||e.push({field:"fn",value:""}),e.find((e=>"photo"===e.field))||e.push({field:"photo",value:""}),e.filter((({field:e})=>Yd.includes(e))).map((e=>ContactModal_objectSpread(ContactModal_objectSpread({},e),{},{uid:(0,ht.D)(Fd)})))):Td.map((e=>ContactModal_objectSpread(ContactModal_objectSpread({},e),{},{uid:(0,ht.D)(Fd)}))))(n)),[x,v]=(0,o.useState)(((e=[])=>e.filter((({field:e})=>!Yd.includes(e))))(n)),w=(0,o.useRef)(null),[D,S]=wr(),[O,A]=(0,o.useState)({}),C=contacts_useApplyGroups(),E=t?(0,u.c)("Title").t(Od||(Od=(0,d.Z)(["Edit contact"]))):(0,u.c)("Title").t(Ad||(Ad=(0,d.Z)(["Create contact"]))),L=(0,o.useMemo)((()=>M.find((e=>"fn"===e.field))),[M]),P=(0,o.useMemo)((()=>M.find((e=>"photo"===e.field))),[M]),Z=(0,o.useMemo)((()=>M.filter((e=>e!==L&&e!==P))),[M]);(0,o.useEffect)((()=>{if(S)return;const e=ContactModal_objectSpread({},O);M.filter((e=>"email"===e.field)).forEach((n=>{const r=n.uid,a=n.value,o=Object.values(e).find((e=>(null==e?void 0:e.uid)===r));if(o){if(o.Email!==a){const t=o.Email;e[a]=ContactModal_objectSpread(ContactModal_objectSpread({},o),{},{Email:a,Name:L.value}),delete e[t]}return}const s=D.find((e=>(0,Xe.mQ)(e.Email)===(0,Xe.mQ)(a)));e[a]=s?ContactModal_objectSpread(ContactModal_objectSpread({},s),{},{uid:r,changes:{},Name:L.value}):{uid:r,changes:{},Email:a,ContactID:t||"",LabelIDs:[],Name:L.value}})),A(e)}),[S,M]);const handleRemove=e=>{const t=M.find((({uid:t})=>t===e));if(null!=t&&t.group){const e=x.filter((e=>e.group!==t.group));v(e)}if("photo"===(null==t?void 0:t.field)){if(1===M.filter((({field:e})=>"photo"===e)).length){const e=M.map((e=>"photo"===e.field?ContactModal_objectSpread(ContactModal_objectSpread({},e),{},{value:""}):e));return void N(e)}}N(M.filter((({uid:t})=>t!==e)))},focusOnField=e=>{var t;const n=document.querySelector('[data-contact-property-id="'.concat(e,'"]'));null==n||null===(t=n.querySelector("input"))||void 0===t||t.focus()},handleAdd=e=>()=>{const t=(0,ht.D)(Fd);if(!e){const e=Ud.filter((e=>!M.find((t=>t.field===e)))),n=(0,c.lv)(0,e.length-1);return N([...M,{field:e[n],value:"",uid:t}]),void window.setTimeout((()=>focusOnField(t)))}N([...M,{field:e,value:"",uid:t}]),window.setTimeout((()=>focusOnField(t)))},T=(0,mn.ZP)((async()=>{await Promise.all(Object.values(O).map((async e=>{if(e){const t=D.find((t=>t.Email===(null==e?void 0:e.Email)));t&&await C([t],e.changes,!0)}})))})),handleSubmit=async()=>{var e;if(h(!0),null==L||!L.value)return void(null===(e=w.current)||void 0===e||e.focus());const n=await prepareContacts([M.concat(x)],I[0]),o=properties_hasCategories(x)?_d:Rd,{Responses:[{Response:{Code:s=null}={}}]}=await l((0,Lo.el)({Contacts:n,Overwrite:t?kd:zd,Labels:o}));if(s!==Gd)return a(),p({text:(0,u.c)("Error").t(Cd||(Cd=(0,d.Z)(["Contact could not be saved"]))),type:"error"});await b(),t||r(),await T(),a(),p({text:(0,u.c)("Success").t(Ed||(Ed=(0,d.Z)(["Contact saved"])))})},handleChange=({uid:e,value:t,key:n="value"})=>{const r=M.map((r=>r.uid===e?ContactModal_objectSpread(ContactModal_objectSpread({},r),{},{[n]:t}):r));N(r)},k=(0,o.useCallback)(((e,t)=>{const n=M.filter((t=>t.field!==e));n.unshift(...t),N(n)}),[Z]);return(0,o.useEffect)((()=>{s&&handleAdd(s)()}),[s]),(0,o.useEffect)((()=>{var e;null===(e=w.current)||void 0===e||e.focus()}),[]),(0,j.jsxs)(On.Z,ContactModal_objectSpread(ContactModal_objectSpread({loading:m||f,title:E,submit:(0,j.jsx)(yr.Z,{loading:m||f,onClick:()=>g(handleSubmit()),children:(0,u.c)("Action").t(Ld||(Ld=(0,d.Z)(["Save"])))}),onClose:a},i),{},{children:[(0,j.jsxs)("div",{className:"mb1",children:[(0,j.jsx)(yd,{ref:w,isSubmitted:y,property:L,onChange:handleChange,onRemove:handleRemove,isOrderable:!1,actionRow:!1,mainItem:!0}),(0,j.jsx)(yd,{isSubmitted:y,property:P,onChange:handleChange,onRemove:handleRemove,isOrderable:!1,actionRow:!0,fixedType:!0,mainItem:!0})]}),(0,j.jsx)(Pd,{ref:w,properties:Z,field:"fn",isSubmitted:y,onChange:handleChange,onRemove:handleRemove}),(0,j.jsx)(Pd,{properties:Z,field:"email",isSubmitted:y,onChange:handleChange,onRemove:handleRemove,onOrderChange:k,onAdd:handleAdd("email"),contactEmails:O,onContactEmailChange:e=>A((t=>ContactModal_objectSpread(ContactModal_objectSpread({},t),{},{[e.Email]:e})))}),(0,j.jsx)(Pd,{properties:Z,field:"tel",isSubmitted:y,onChange:handleChange,onRemove:handleRemove,onOrderChange:k,onAdd:handleAdd("tel")}),(0,j.jsx)(Pd,{properties:Z,field:"adr",isSubmitted:y,onChange:handleChange,onRemove:handleRemove,onOrderChange:k,onAdd:handleAdd("adr")}),(0,j.jsx)(Pd,{isSubmitted:y,properties:Z,onChange:handleChange,onRemove:handleRemove,onAdd:handleAdd()})]}))};var Vd,Qd,Hd,contacts_EmptyContacts=({onClose:e=c.ZT})=>{const{createModal:t}=(0,In.Z)(),n=(0,u.c)("Error message").t(Kd||(Kd=(0,d.Z)(["No results found"])));return(0,j.jsxs)("div",{className:"flex flex-column flex-align-items-center flex-item-fluid p0-5",children:[(0,j.jsx)("span",{className:"mb1",children:(0,u.c)("Error message").t(Bd||(Bd=(0,d.Z)(["You do not have any contact yet. Start by creating a new contact"])))}),(0,j.jsx)("img",{src:jc,alt:n,className:"p1 mb1"}),(0,j.jsx)(Ea.Z,{color:"norm",onClick:()=>{t((0,j.jsx)(modals_ContactModal,{properties:[]})),e()},children:(0,u.c)("Action").t(Wd||(Wd=(0,d.Z)(["Create new contact"])))})]})},Xd=n(58519),Jd=n(5863);var qd,$d,eu,tu,nu,ru,au,contacts_EmptyResults=({query:e="",onClearSearch:t})=>{const n=(0,u.c)("Error message").t(Vd||(Vd=(0,d.Z)(['No results found for "','"'])),e),r=(0,j.jsx)(Jd.Z,{className:"text-bold p0",onClick:t,children:(0,u.c)("Action").t(Qd||(Qd=(0,d.Z)(["clear it"])))},"button");return(0,j.jsxs)("div",{className:"flex flex-column flex-align-items-center flex-item-fluid p0-5",children:[(0,j.jsx)("h2",{children:n}),(0,j.jsx)("img",{src:Xd,alt:n,className:"pl1 pr1 pb1 mb1"}),(0,j.jsx)("span",{children:(0,u.c)("Info").jt(Hd||(Hd=(0,d.Z)(["You can either update your search query or ",""])),r)})]})};const ou=["onSubmit","onClose","inputValue"];function ContactListModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ContactListModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ContactListModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ContactListModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const convertContactToRecipient=({Name:e,ContactID:t,Email:n})=>({Name:e,ContactID:t,Address:n});var modals_ContactListModal=e=>{let{onSubmit:t,onClose:n,inputValue:r}=e,a=(0,Sn.Z)(e,ou);const{isNarrow:s}=hooks_useActiveBreakpoint(),i=(0,o.createRef)(),[c,l]=hooks_useContactEmailsSortedByName(),[p,m]=(0,Dr.Z)(),[g=[],b]=useContactGroups(),y=r.map((e=>e.Address)),h=(0,Ne.qL)(g),I=c.reduce(((e,t)=>(e[t.ID]=y.includes(t.Email),e)),Object.create(null)),[f,M]=(0,o.useState)(""),[N,x]=(0,o.useState)(""),[v,w]=(0,o.useState)(!1),[D,S]=(0,o.useState)(c),[O,A]=(0,o.useState)(I),[C,E]=(0,o.useState)([]),L=C.length,P=l||m||b,handleCheck=(e,t)=>{const{target:n,nativeEvent:r}=e,a=t?[t]:[];if(N&&r.shiftKey){const e=D.findIndex((e=>e.ID===t)),n=D.findIndex((e=>e.ID===N));a.push(...D.slice(Math.min(e,n),Math.max(e,n)+1).map((e=>e.ID)))}t&&(x(t),((e=[],t=!1)=>{const n=e.reduce(((e,n)=>(e[n]=t,e)),Object.create(null));A(ContactListModal_objectSpread(ContactListModal_objectSpread({},O),n))})(a,n.checked))},searchFilter=e=>{const t=(0,br.Fv)(f,!0).split(" "),n=e.LabelIDs.reduce(((e,t)=>[...e,...(0,br.Fv)(h[t].Name,!0).split(" ")]),[]);return t.some((t=>(0,br.Fv)(e.Name,!0).includes(t)))||t.some((t=>(0,br.Fv)(e.Email,!0).includes(t)))||t.some((e=>n.some((t=>t.includes(e)))))};(0,o.useEffect)((()=>{x(""),S(c.filter(searchFilter))}),[f]),(0,o.useEffect)((()=>{E(c.filter((e=>!!O[e.ID])))}),[O]),(0,o.useEffect)((()=>{w(!!D.length&&D.every((e=>!!O[e.ID])))}),[D,O]);const Z=1===L?(0,u.c)("Action").t(qd||(qd=(0,d.Z)(["Insert contact"]))):(0,u.c)("Action").ngettext((0,u.msgid)($d||($d=(0,d.Z)(["Insert "," contact"])),L),"Insert ".concat(L," contacts"),L);return(0,j.jsx)(On.Z,ContactListModal_objectSpread(ContactListModal_objectSpread({title:(0,u.c)("Title").t(eu||(eu=(0,d.Z)(["Insert contacts"]))),loading:P,onSubmit:()=>{t(C.map(convertContactToRecipient)),null==n||n()},submit:c.length?(0,j.jsx)(yr.Z,{loading:P,type:"submit",disabled:!L,children:Z}):null,onClose:n},a),{},{children:c.length?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:"mb0-5",children:(0,j.jsx)(Ir,{ref:i,value:f,onChange:e=>M(e),placeholder:(0,u.c)("Placeholder").t(tu||(tu=(0,d.Z)(["Search name, email or group"])))})}),D.length?(0,j.jsxs)(j.Fragment,{children:[!s&&(0,j.jsxs)("div",{className:"flex flex-nowrap flex-item-fluid contact-list-row p1",children:[(0,j.jsx)("div",{children:(0,j.jsx)(Nr,{className:"w100 h100",checked:v,onChange:e=>(e=>{const t=D.reduce(((t,n)=>(t[n.ID]=e,t)),Object.create(null));A(ContactListModal_objectSpread(ContactListModal_objectSpread({},O),t))})(e.target.checked)})}),(0,j.jsxs)("div",{className:"flex flex-item-fluid flex-align-self-center",children:[(0,j.jsx)("div",{className:"w33 pl1",children:(0,j.jsx)("strong",{className:"text-uppercase",children:(0,u.c)("Label").t(nu||(nu=(0,d.Z)(["Name"])))})}),(0,j.jsx)("div",{className:"flex-item-fluid",children:(0,j.jsx)("strong",{className:"text-uppercase",children:(0,u.c)("Label").t(ru||(ru=(0,d.Z)(["Email"])))})}),(0,j.jsx)("div",{className:"w25",children:(0,j.jsx)("strong",{className:"text-uppercase",children:(0,u.c)("Label").t(au||(au=(0,d.Z)(["Group"])))})})]})]}),(0,j.jsx)(ContactList,{rowCount:D.length,userSettings:p,className:(0,ht.dh)([s&&"mt1"]),rowRenderer:({index:e,style:t})=>(0,j.jsx)(ContactListModalRow,{onCheck:handleCheck,style:t,contact:D[e],checked:!!O[D[e].ID],contactGroupsMap:h,isNarrow:s},D[e].ID)})]}):(0,j.jsx)(contacts_EmptyResults,{onClearSearch:()=>{var e;M(""),null==i||null===(e=i.current)||void 0===e||e.focus()},query:f})]}):(0,j.jsx)(contacts_EmptyContacts,{onClose:n})}))};const su=["contactEmails","contactEmailsMap","contactGroups","groupsWithContactsMap","id","onKeyDown","recipients","onAddRecipients","anchorRef","hasEmailPasting","hasAddOnBlur","limit","onAddInvalidEmail","onChange","validate"];function AddressesAutocomplete_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function AddressesAutocomplete_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?AddressesAutocomplete_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AddressesAutocomplete_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var iu=(0,o.forwardRef)(((e,t)=>{let{contactEmails:n,contactEmailsMap:r,contactGroups:a,groupsWithContactsMap:s,id:i,onKeyDown:l,recipients:d,onAddRecipients:u,anchorRef:p,hasEmailPasting:m=!1,hasAddOnBlur:g=!1,limit:b=20,onAddInvalidEmail:y,onChange:h,validate:I=c.ZT}=e,f=(0,Sn.Z)(e,su);const[M,N]=(0,o.useState)(""),[x,v]=(0,o.useState)(""),w=(0,o.useRef)(null),[D,S]=(0,o.useMemo)((()=>d.reduce(((e,{Address:t,Group:n})=>(t&&e[0].add((0,Xe.mQ)(t)),n&&e[1].add(n),e)),[new Set,new Set])),[d]),O=[...(0,o.useMemo)((()=>[...getContactsAutocompleteItems(n,(({Email:e})=>!D.has((0,Xe.mQ)(e))&&!I(e))),...getContactGroupsAutocompleteItems(a,(({Path:e,ID:t})=>{return!(S.has(e)||(n=t,s&&((null===(r=s[n])||void 0===r?void 0:r.contacts.length)||0)<=0));var n,r}))]),[n,a,D,S])],safeAddRecipients=e=>{const t=e.filter((({Address:e})=>!I(e||"")));t.length&&u(t)},handleAddRecipient=e=>{N(""),v(""),safeAddRecipients(e)},handleAddRecipientFromInput=e=>{const t=e.trim();if(!t.length)return void N("");const n=inputToRecipient(t),r=I(n.Address||"");r?(null==y||y(),v(r)):handleAddRecipient([n])},handleSelect=e=>{handleAddRecipient(((e,t)=>{if("major"===t.type)return[(n=t.value,{Name:n,Address:n})];var n;if("contact"===t.type)return[contactToRecipient(t.value)];if("group"===t.type){const n=t.value;return(e||[]).filter((e=>{var t;return null===(t=e.LabelIDs)||void 0===t?void 0:t.includes(n.ID||"")})).map((e=>contactToRecipient(e,n.Path)))}throw new Error("Unknown type")})(n,e))},A=(0,o.useCallback)((e=>e.label),[]),C=useAutocompleteFilter(M,O,A,b,1),E=C.find((({option:{label:e,type:t}})=>e===M&&"group"===t)),L=E?[E,...C.filter((({option:{label:e}})=>e!==M))]:C,{getOptionID:P,inputProps:Z,suggestionProps:T}=useAutocomplete({id:i,options:C,onSelect:handleSelect,input:M,inputRef:w});return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(jr.Z,AddressesAutocomplete_objectSpread(AddressesAutocomplete_objectSpread(AddressesAutocomplete_objectSpread({},f),Z),{},{ref:(0,fr.Z)(t,w),value:M,onChange:e=>{(e=>{if(";"===e||","===e)return;if(!m)return void N(e);const t=e.split(/[,;]/).map((e=>e.trim()));if(t.length>1)return safeAddRecipients(t.slice(0,-1).map(inputToRecipient)),void N(t[t.length-1]);N(e)})(e.currentTarget.value.trimStart()),null==h||h(e)},onKeyDown:e=>{v(""),Z.onKeyDown(e)||"Enter"===e.key&&(handleAddRecipientFromInput(M),e.preventDefault()),null==l||l(e)},onBlur:()=>{Z.onBlur(),g&&handleAddRecipientFromInput(M)},error:x})),(0,j.jsx)(autocomplete_AutocompleteList,AddressesAutocomplete_objectSpread(AddressesAutocomplete_objectSpread({anchorRef:p},T),{},{children:L.map((({chunks:e,text:t,option:n},r)=>(0,j.jsx)(option_Option,{id:P(r),title:n.label,value:n,disableFocusOnActive:!0,onChange:handleSelect,children:"group"===n.type?(0,j.jsxs)("div",{className:"flex flex-nowrap flex-flex-align-items-center",children:[(0,j.jsx)(pr.Z,{name:"circle-filled",color:n.value.Color,size:12,className:"mr0-5 flex-item-noshrink flex-item-centered-vert"}),(0,j.jsx)("span",{className:"mr0-5 text-ellipsis",children:(0,j.jsx)(text_Marks,{chunks:e,children:t})}),getNumberOfMembersText(n.value.ID,s)]}):(0,j.jsx)(text_Marks,{chunks:e,children:t})},n.key)))}))]})})),cu=n(33244);var contacts_useContact=e=>{const t=(0,o.useContext)(cu.Z),n=(0,Dn.Z)(),r=(0,o.useCallback)((()=>n((0,Lo.vS)(e)).then((({Contact:e})=>e))),[]);return(0,Zn.ZP)(t,e,r)},lu=n(63378),du=n.n(lu);var uu,pu,mu,gu,helpers_downloadFile=(e,t)=>{if(!(0,mr.a1)())throw new Error("Download requires a newer browser.");du()(e,t)},ju=n(8206);function decrypt_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function decrypt_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?decrypt_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):decrypt_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const{SUCCESS:bu,SIGNATURE_NOT_VERIFIED:yu,FAIL_TO_READ:hu,FAIL_TO_LOAD:Iu,FAIL_TO_DECRYPT:fu}=Qo,{CLEAR_TEXT:Mu,ENCRYPTED_AND_SIGNED:Nu,ENCRYPTED:xu,SIGNED:vu}=M.BK,readSigned=async({Data:e,Signature:t=""},{publicKeys:n})=>{try{if(!t)throw new Error((0,u.c)("Error").t(uu||(uu=(0,d.Z)(["Missing signature"]))));const r=await(0,Rt.o$)(t),{verified:a,signatureTimestamp:o}=await(0,Rt.n5)({message:(0,Rt.b$)(e),publicKeys:n,signature:r});return a!==Yt.bR.SIGNED_AND_VALID?{data:e,type:yu,signatureTimestamp:void 0,error:new Error((0,u.c)("Error").t(pu||(pu=(0,d.Z)(["Contact signature not verified"]))))}:{type:bu,data:e,signatureTimestamp:o}}catch(t){return{type:yu,data:e,signatureTimestamp:void 0,error:t}}},wu={[Nu]:async({Data:e,Signature:t},{publicKeys:n,privateKeys:r})=>{let a,o;try{if(!t)return{type:Iu,error:new Error((0,u.c)("Error").t(mu||(mu=(0,d.Z)(["Missing signature"]))))};[a,o]=await Promise.all([(0,Rt.FC)(e),(0,Rt.o$)(t)])}catch(e){return{type:hu,error:e}}try{const{data:e,verified:t}=await(0,_t.WB)({message:a,privateKeys:r,publicKeys:n,signature:o});if(e&&"string"!=typeof e)throw new Error("Unknown data");return 1!==t?{data:e,type:yu,error:new Error((0,u.c)("Error").t(gu||(gu=(0,d.Z)(["Signature not verified"]))))}:{type:bu,data:e}}catch(e){return{type:fu,error:e}}},[vu]:readSigned,[xu]:async({Data:e},{privateKeys:t})=>{let n;try{n=await(0,Rt.FC)(e)}catch(e){return{type:hu,error:e}}try{const{data:e}=await(0,_t.WB)({message:n,privateKeys:t});if(e&&"string"!=typeof e)throw new Error("Unknown data");return{type:bu,data:e}}catch(e){return{type:fu,error:e}}},[Mu]:({Data:e})=>({type:bu,data:e})},decrypt_prepareContact=async(e,{publicKeys:t,privateKeys:n})=>{const{Cards:r}=e,a=(await Promise.all(r.map((async e=>wu[e.Type]?wu[e.Type](e,{publicKeys:t,privateKeys:n}):{error:hu})))).map(((e,t)=>[Nu,xu].includes(r[t].Type)&&e.data?decrypt_objectSpread(decrypt_objectSpread({},e),{},{data:e.data.replace(/\nUID:.*\n/i,"\n")}):e)),{vcards:o,errors:s}=a.reduce(((e,{type:t,data:n,error:r})=>(n&&e.vcards.push(n),r&&e.errors.push({type:t,error:r}),e)),{vcards:[],errors:[]});try{return{properties:sanitizeProperties(((e=[])=>e.reduce(((e,t)=>(t.forEach((t=>{const{field:n}=t,{cardinality:r=Fo}=Ko[n]||{};[Yo,Fo].includes(r)?e.push(t):e.find((({field:e})=>e===n))||e.push(t)})),e)),[]))(o.map(parse))),errors:s}}catch(e){return{properties:[],errors:[e instanceof Error?e:new Error("Corrupted vcard data")]}}};function export_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function export_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?export_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):export_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const getFileName=e=>{const t=e.filter((({field:e})=>["fn","email"].includes(e))).map((({value:e})=>Array.isArray(e)?e[0]:e))[0];return"".concat(t,"-").concat((0,Et.Z)(Date.now(),"yyyy-MM-dd"),".vcf")},exportContact=async(e,t)=>{const{publicKeys:n,privateKeys:r}=(0,ju.ee)(t),{properties:a=[],errors:o=[]}=await decrypt_prepareContact({Cards:e},{publicKeys:n,privateKeys:r});if(o.length)throw new Error("Error decrypting contact");return{properties:a,vcard:toICAL(a).toString()}};var Du,Su,Ou,Au,Cu,Eu,Lu,Pu;const Zu=["contactIDs","deleteAll","onDelete","onClose"];function ContactDeleteModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ContactDeleteModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ContactDeleteModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ContactDeleteModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ContactDeleteModal=e=>{let{contactIDs:t=[],deleteAll:n,onDelete:r,onClose:a=c.ZT}=e,o=(0,Sn.Z)(e,Zu);const s=(0,Dn.Z)(),{createNotification:i}=(0,hn.Z)(),{call:l}=(0,Ie.Z)(),[p,m]=(0,no.Z)(),[g=[]]=Wl(),b=(0,j.jsx)(po,{type:"submit",loading:p,children:(0,u.c)("Action").t(Du||(Du=(0,d.Z)(["Delete"])))}),y=t.length,h=g.find((e=>e.ID===t[0])),I=(null==h?void 0:h.Name)||(null==h?void 0:h.Email)||"",f=1===y?(0,u.c)("Title").t(Cu||(Cu=(0,d.Z)(["Delete ",""])),I):(0,u.c)("Title").ngettext((0,u.msgid)(Eu||(Eu=(0,d.Z)(["Delete "," contact"])),y),"Delete ".concat(y," contacts"),y),M=1===y?(0,u.c)("Warning").t(Lu||(Lu=(0,d.Z)(["Are you sure you want to permanently delete this contact?"]))):(0,u.c)("Warning").ngettext((0,u.msgid)(Pu||(Pu=(0,d.Z)(["Are you sure you want to permanently delete "," contact?"])),y),"Are you sure you want to permanently delete ".concat(y," contacts?"),y);return(0,j.jsx)(On.Z,ContactDeleteModal_objectSpread(ContactDeleteModal_objectSpread({title:f,onSubmit:()=>m((async()=>{const delayedClosing=async()=>{null==r||r(),a(),await(0,Wt.D)(1e3),await l()};if(n)return await s((0,Lo.Ou)()),delayedClosing(),i({text:(0,u.c)("Success").t(Su||(Su=(0,d.Z)(["Contacts deleted"])))});const e=allSucceded(await s((0,Lo._f)(t)));if(delayedClosing(),!e)return i({text:(0,u.c)("Error").t(Ou||(Ou=(0,d.Z)(["Some contacts could not be deleted"]))),type:"warning"});i({text:(0,u.c)("Success").ngettext((0,u.msgid)(Au||(Au=(0,d.Z)(["Contact deleted"]))),"Contacts deleted",t.length)})})()),onClose:a,submit:b,loading:p,className:"modal--smaller"},o),{},{children:(0,j.jsx)(Cn.Z,{className:"mb1",type:"error",children:M})}))},Tu=n(3735),ku=n(85446);const getKeyUsedForContact=async(e,t,n)=>((e,t)=>{const n=e.find((({ids:e})=>e.some((e=>t.some((t=>e.equals(t)))))));return null==n?void 0:n.key})(await(async e=>Promise.all(e.map((async e=>({key:e,ids:(await(0,ku.RR)(e.PrivateKey))[0].getKeyIds()})))))(t),await(async(e,t)=>{const n=(null==e?void 0:e.Cards.filter((e=>t?e.Type===M.BK.ENCRYPTED_AND_SIGNED||e.Type===M.BK.ENCRYPTED:e.Type===M.BK.ENCRYPTED_AND_SIGNED||e.Type===M.BK.SIGNED)))||[];return(await Promise.all(n.map((async e=>{const n=t?e.Data:e.Signature,r=await(0,Rt.FC)(n);return t?r.getEncryptionKeyIds():r.getSigningKeyIds()})))).flat()})(e,n));var zu,_u;const Ru=["value","onCopy","tooltipText"];function Copy_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Copy_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Copy_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Copy_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Copy=(e,t)=>{let{value:n,onCopy:r,tooltipText:a}=e,o=(0,Sn.Z)(e,Ru);return(0,j.jsx)(ur.Z,{title:a||(0,u.c)("Label").t(zu||(zu=(0,d.Z)(["Copy"]))),children:(0,j.jsx)(Ea.Z,Copy_objectSpread(Copy_objectSpread({icon:!0,color:"weak",shape:"outline",ref:t,onClick:e=>{e.stopPropagation(),(0,mr.XD)(n,e.currentTarget),null==r||r()}},o),{},{children:(0,j.jsx)(pr.Z,{name:"copy",alt:(0,u.c)("Label").t(_u||(_u=(0,d.Z)(["Copy"])))})}))})};var Gu=(0,o.forwardRef)(Copy);const resignCards=async({contactCards:e,privateKeys:t})=>{const n=e.filter((e=>e.Type===M.BK.SIGNED)),r=e.filter((e=>e.Type!==M.BK.SIGNED));return[...await Promise.all(n.map((async({Data:e})=>{const{signature:n}=await(0,Rt.l)({data:e,privateKeys:t,armor:!0,detached:!0});return{Type:M.BK.SIGNED,Data:e,Signature:n}}))),...r]};function globalOperations_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function globalOperations_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?globalOperations_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):globalOperations_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Yu=n(94396);const Uu=["value","max","id","className"];function Progress_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var progress_Progress=e=>{let{value:t=50,max:n=100,id:r,className:a}=e,o=(0,Sn.Z)(e,Uu);return(0,j.jsx)("progress",function Progress_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Progress_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Progress_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({"aria-describedby":r,className:(0,ht.dh)(["progress-bar w100",a]),value:t,max:n},o))};const Fu=["id","display","value","max","loading","success","partialSuccess"];function DynamicProgress_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function DynamicProgress_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DynamicProgress_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DynamicProgress_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ku,Bu,Wu,Vu,Qu,Hu,progress_DynamicProgress=e=>{let{id:t,display:n,value:r,max:a=100,loading:o,success:s=!0,partialSuccess:i}=e,c=(0,Sn.Z)(e,Fu);const{icon:l,progressClassname:d=""}=o?{icon:(0,j.jsx)(Yu.Z,{})}:s?{icon:(0,j.jsx)("span",{className:"inline-flex bg-success rounded50 p0-5",children:(0,j.jsx)(pr.Z,{name:"check",size:24})}),progressClassname:"progress-bar--success"}:i?{icon:(0,j.jsx)("span",{className:"inline-flex bg-warning rounded50 p0-5",children:(0,j.jsx)(pr.Z,{name:"xmark",size:24})}),progressClassname:"progress-bar--warning"}:{icon:(0,j.jsx)("span",{className:"inline-flex bg-danger rounded50 p0-5",children:(0,j.jsx)(pr.Z,{name:"xmark",size:24})}),progressClassname:"progress-bar--error"};return(0,j.jsxs)("div",{className:(0,ht.dh)(["text-center",!n&&"mb1"]),children:[l,(0,j.jsx)(progress_Progress,DynamicProgress_objectSpread({className:(0,ht.dh)(["mt1",d]),"aria-describedby":t,value:r,max:a},c)),!!n&&(0,j.jsx)("p",{"aria-atomic":"true","aria-live":"polite",id:t,children:n})]})};const Xu=["onClose","errorKey"];function ContactClearDataExecutionModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ContactClearDataExecutionModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ContactClearDataExecutionModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ContactClearDataExecutionModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ju,qu,$u,ep,modals_ContactClearDataExecutionModal=e=>{let{onClose:t=c.ZT,errorKey:n}=e,r=(0,Sn.Z)(e,Xu);const[a=[],s]=Wl(),i=(0,Dn.Z)(),{call:l}=(0,Ie.Z)(),[p]=(0,us.Fj)(),[m,g]=(0,o.useState)(0),[b,y]=(0,o.useState)(0),[h,I]=(0,o.useState)(!1),[f,N]=(0,o.useState)(!0),x=(0,o.useRef)(!1),v=a.length;(0,o.useEffect)((()=>{if(s)return;(async()=>{await(async(e,t,n,r,a,o)=>{let s=0;const{privateKeys:i}=(0,ju.ee)(n);for(let n=0;n<e.length&&!o.current;n++){const o=e[n].ID,{Contact:c}=await r((0,Lo.vS)(o));if(await getKeyUsedForContact(c,[t],!0)){s++;const e=await Promise.all(c.Cards.filter((e=>e.Type!==M.BK.ENCRYPTED&&e.Type!==M.BK.ENCRYPTED_AND_SIGNED)).map((async e=>{let{Signature:t}=e;if(e.Type===M.BK.SIGNED){const{signature:n}=await(0,Rt.l)({data:e.Data,privateKeys:[i[0]],armor:!0,detached:!0});t=n}return globalOperations_objectSpread(globalOperations_objectSpread({},e),{},{Signature:t})})));await r((0,Lo.Tk)(o,{Cards:e}))}a(n+1,s)}})(a,n,p,i,((e,t)=>{g(e),y(t)}),x),await l(),N(!1)})()}),[s]),(0,o.useEffect)((()=>{h&&!f&&t()}),[h,f]);const handleClose=()=>{x.current=!0,I(!0)};return(0,j.jsxs)(On.Z,ContactClearDataExecutionModal_objectSpread(ContactClearDataExecutionModal_objectSpread({title:(0,u.c)("Title").t(Ku||(Ku=(0,d.Z)(["Clearing data"]))),onSubmit:t,onClose:handleClose,submit:(0,j.jsx)(yr.Z,{disabled:f,type:"submit",children:(0,u.c)("Action").t(Bu||(Bu=(0,d.Z)(["Done"])))}),close:f?(0,j.jsx)(Ea.Z,{onClick:handleClose,children:(0,u.c)("Action").t(Wu||(Wu=(0,d.Z)(["Cancel"])))}):null},r),{},{children:[(0,j.jsx)(Cn.Z,{className:"mb1",type:"info",children:(0,u.c)("Info").t(Vu||(Vu=(0,d.Z)(["Please wait while we look for contacts that contain data encrypted with the inactive key."])))}),(0,j.jsx)(progress_DynamicProgress,{id:"clear-data-execution-progress",value:m,display:f?(0,u.c)("Info").t(Qu||(Qu=(0,d.Z)(["Checking contact "," of ","..."])),m,v):(0,u.c)("Info").ngettext((0,u.msgid)(Hu||(Hu=(0,d.Z)([""," contact updated successfully."])),b),"".concat(b," contacts updated successfully."),b),max:v,loading:f})]}))};const tp=["onClose","errorKey"];function ContactClearDataConfirmModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ContactClearDataConfirmModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ContactClearDataConfirmModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ContactClearDataConfirmModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var np,rp,ap,op,sp,ip,cp,lp,modals_ContactClearDataConfirmModal=e=>{let{onClose:t=c.ZT,errorKey:n}=e,r=(0,Sn.Z)(e,tp);const{createModal:a}=(0,In.Z)(),[s,i]=(0,o.useState)(""),l="DANGER",p=(0,j.jsx)("strong",{children:l},"danger");return(0,j.jsxs)(On.Z,ContactClearDataConfirmModal_objectSpread(ContactClearDataConfirmModal_objectSpread({title:(0,u.c)("Title").t(Ju||(Ju=(0,d.Z)(["Warning"]))),onSubmit:()=>{a((0,j.jsx)(modals_ContactClearDataExecutionModal,{errorKey:n})),null==t||t()},onClose:t,submit:(0,j.jsx)(po,{disabled:s!==l,type:"submit",children:(0,u.c)("Action").t(qu||(qu=(0,d.Z)(["Clear data"])))})},r),{},{children:[(0,j.jsx)(Cn.Z,{className:"mb1",type:"info",children:(0,u.c)("Warning").t($u||($u=(0,d.Z)(["If you don’t remember your password, it is impossible to re-activate your key. We can help you dismiss the alert banner but in the process you will permanently lose access to all the data encrypted with that key."])))}),(0,j.jsx)(Cn.Z,{className:"mb1",type:"error",children:(0,u.c)("Warning").jt(ep||(ep=(0,d.Z)(["This action is irreversible. Please enter the word "," in the field to proceed."])),p)}),(0,j.jsx)(bo.Z,{children:(0,j.jsx)(jr.Z,{value:s,placeholder:l,onChange:e=>i(e.target.value)})})]}))};const dp=["onClose","contactID"];function ContactDecryptionErrorModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ContactDecryptionErrorModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ContactDecryptionErrorModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ContactDecryptionErrorModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var up,pp,mp,gp,jp,bp,modals_ContactDecryptionErrorModal=e=>{let{onClose:t=c.ZT,contactID:n}=e,r=(0,Sn.Z)(e,dp);const{createModal:a}=(0,In.Z)(),{createNotification:s}=(0,hn.Z)(),[i]=(0,bn.ZP)(),[l]=contacts_useContact(n),[p,m]=(0,o.useState)(),g=(0,Mn.Z)();(0,o.useEffect)((()=>{i&&l&&(async()=>{const e=await getKeyUsedForContact(l,i.Keys,!0);m(e)})()}),[i,l]);return(0,j.jsxs)(On.Z,ContactDecryptionErrorModal_objectSpread(ContactDecryptionErrorModal_objectSpread({title:(0,u.c)("Title").t(np||(np=(0,d.Z)(["Recover data"]))),onSubmit:()=>{g("/mail/encryption-keys",M.ei.PROTONACCOUNT)},onClose:t,submit:(0,u.c)("Action").t(rp||(rp=(0,d.Z)(["Recover data"]))),close:(0,u.c)("Action").t(ap||(ap=(0,d.Z)(["Close"])))},r),{},{children:[(0,j.jsx)(Cn.Z,{className:"mb1",type:"info",children:(0,u.c)("Info").t(op||(op=(0,d.Z)(["To recover your data, you need to re-activate the contact encryption key used at the time when the data was created. This will require you to remember the password used when the key was generated."])))}),p&&(0,j.jsxs)("div",{className:"flex flex-align-items-center mb1",children:[(0,j.jsx)("span",{className:"mr1",children:(0,u.c)("Info").t(sp||(sp=(0,d.Z)(["Key fingerprint"])))}),(0,j.jsx)("span",{className:"flex-item-fluid text-ellipsis mr1",children:p.Fingerprint}),(0,j.jsx)(Gu,{value:p.Fingerprint,onCopy:()=>{s({text:(0,u.c)("Success").t(ip||(ip=(0,d.Z)(["Fingerprint copied to clipboard"])))})}})]}),(0,j.jsxs)(Cn.Z,{className:"mb1",type:"info",children:[(0,u.c)("Info").t(cp||(cp=(0,d.Z)(["Cannot remember your password? We can help you clear the encrypted data of all contacts encrypted with this key and in the process dismiss the alert."]))),(0,j.jsx)(Jd.Z,{className:"ml0-5",onClick:()=>{a((0,j.jsx)(modals_ContactClearDataConfirmModal,{errorKey:p})),t()},disabled:!p,children:(0,u.c)("Action").t(lp||(lp=(0,d.Z)(["Click here."])))})]})]}))};const yp=["onClose"];function ContactResignExecutionModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ContactResignExecutionModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ContactResignExecutionModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ContactResignExecutionModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var hp,Ip,fp,Mp,Np,modals_ContactResignExecutionModal=e=>{let{onClose:t=c.ZT}=e,n=(0,Sn.Z)(e,yp);const[r=[],a]=Wl(),[s]=(0,us.Fj)(),i=(0,Dn.Z)(),{call:l}=(0,Ie.Z)(),[p,m]=(0,o.useState)(0),[g,b]=(0,o.useState)(0),[y,h]=(0,o.useState)(!1),[I,f]=(0,o.useState)(!0),N=(0,o.useRef)(!1),x=r.length;(0,o.useEffect)((()=>{if(a)return;(async()=>{await(async(e,t,n,r,a)=>{let o=0;const{publicKeys:s,privateKeys:i}=(0,ju.ee)(t);for(let t=0;t<e.length&&!a.current;t++){const a=e[t].ID,{Contact:c}=await n((0,Lo.vS)(a)),l=c.Cards.find((e=>e.Type===M.BK.SIGNED));if(!l||!l.Signature){r(t+1,o);continue}const d=await(0,Rt.o$)(l.Signature),{verified:u}=await(0,Rt.n5)({message:(0,Rt.b$)(l.Data),publicKeys:s,signature:d});if(u!==Yt.bR.SIGNED_AND_VALID){o++;const e=await resignCards({contactCards:c.Cards,privateKeys:[i[0]]});await n((0,Lo.Tk)(a,{Cards:e}))}r(t+1,o)}})(r,s,i,((e,t)=>{m(e),b(t)}),N),await l(),f(!1)})()}),[a]),(0,o.useEffect)((()=>{y&&!I&&t()}),[y,I]);const handleClose=()=>{N.current=!0,h(!0)};return(0,j.jsxs)(On.Z,ContactResignExecutionModal_objectSpread(ContactResignExecutionModal_objectSpread({title:(0,u.c)("Title").t(up||(up=(0,d.Z)(["Re-signing contacts"]))),onSubmit:t,onClose:handleClose,submit:(0,j.jsx)(yr.Z,{disabled:I,type:"submit",children:(0,u.c)("Action").t(pp||(pp=(0,d.Z)(["Done"])))}),close:I?(0,j.jsx)(Ea.Z,{onClick:handleClose,children:(0,u.c)("Action").t(mp||(mp=(0,d.Z)(["Cancel"])))}):null},n),{},{children:[(0,j.jsx)(Cn.Z,{className:"mb1",type:"info",children:(0,u.c)("Info").t(gp||(gp=(0,d.Z)(["Please wait while we look for contacts that can be re-signed with the primary encryption key."])))}),(0,j.jsx)(progress_DynamicProgress,{id:"clear-data-execution-progress",value:p,display:I?(0,u.c)("Info").t(jp||(jp=(0,d.Z)(["Checking contact "," of ","..."])),p,x):(0,u.c)("Info").ngettext((0,u.msgid)(bp||(bp=(0,d.Z)([""," contact updated successfully."])),g),"".concat(g," contacts updated successfully."),g),max:x,loading:I})]}))};const xp=["onClose","contactID"];function ContactSignatureErrorModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ContactSignatureErrorModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ContactSignatureErrorModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ContactSignatureErrorModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var vp,wp,Dp,Sp,Op,Ap,Cp,modals_ContactSignatureErrorModal=e=>{let{onClose:t=c.ZT,contactID:n}=e,r=(0,Sn.Z)(e,xp);const{createModal:a}=(0,In.Z)();return(0,j.jsxs)(On.Z,ContactSignatureErrorModal_objectSpread(ContactSignatureErrorModal_objectSpread({title:(0,u.c)("Title").t(hp||(hp=(0,d.Z)(["Re-sign all contacts"]))),onSubmit:()=>{a((0,j.jsx)(modals_ContactResignExecutionModal,{})),t()},onClose:t,submit:(0,u.c)("Action").t(Ip||(Ip=(0,d.Z)(["Re-sign"]))),close:(0,u.c)("Action").t(fp||(fp=(0,d.Z)(["Close"]))),className:"pm-modal--smaller"},r),{},{children:[(0,j.jsx)(Cn.Z,{className:"mb1",type:"info",children:(0,u.c)("Info").t(Mp||(Mp=(0,d.Z)(["To re-sign your contacts, we need to check every contact against the list of encryption keys available in your account. If no match is found, your contact will be re-signed with the primary encryption key."])))}),(0,j.jsx)(Cn.Z,{className:"mb1",type:"info",children:(0,u.c)("Info").t(Np||(Np=(0,d.Z)(["Please note that this process may take some time depending on the size of your address book."])))})]}))};const{SIGNATURE_NOT_VERIFIED:Ep,FAIL_TO_READ:Lp,FAIL_TO_LOAD:Pp,FAIL_TO_DECRYPT:Zp}=Qo,Tp=[Pp,Lp,Zp,Ep],selectError=e=>{const{cryptoErrors:t,otherErrors:n}=(e=>e.reduce(((e,t)=>(t instanceof Error?e.otherErrors.push(t):e.cryptoErrors.push(t),e)),{cryptoErrors:[],otherErrors:[]}))(e);return n.length?n[0]:Tp.map((e=>((e,t)=>e.find((e=>e.type===t)))(t,e))).filter(Boolean)[0]};var kp,contacts_ContactViewErrors=({contactID:e,errors:t,onReload:n})=>{const{createModal:r}=(0,In.Z)();if(null==t||!t.length)return null;const a=selectError(t);if(!a)return null;if(a instanceof Error)return(0,j.jsxs)("div",{className:"bg-danger rounded p0-5 mt1 flex flex-nowrap flex-align-items-center",children:[(0,j.jsx)(pr.Z,{name:"triangle-exclamation",className:"flex-item-noshrink mtauto mbauto"}),(0,j.jsx)("span",{className:"flex-item-fluid pl0-5 pr0-5",children:(0,u.c)("Warning").t(Ap||(Ap=(0,d.Z)(["The contact data is corrupted and cannot be displayed."])))})]});const o=a.type===Ep?"bg-warning":"bg-danger",s=(e=>{switch(e){case Zp:return(0,u.c)("Warning").t(vp||(vp=(0,d.Z)(["The decryption of the encrypted content failed."])));case Ep:return(0,u.c)("Warning").t(wp||(wp=(0,d.Z)(["The verification of the contact details' signature failed."])));default:return(0,u.c)("Warning").t(Dp||(Dp=(0,d.Z)(["The contact failed to load."])))}})(a.type),i=(e=>{switch(e){case Zp:return(0,u.c)("Action").t(Sp||(Sp=(0,d.Z)(["Recover data"])));case Ep:return(0,u.c)("Action").t(Op||(Op=(0,d.Z)(["Re-sign"])));default:return null}})(a.type);return(0,j.jsxs)("div",{className:(0,ht.dh)([o,"rounded p0-5 mt1 flex flex-nowrap flex-align-items-center"]),children:[(0,j.jsx)(pr.Z,{name:"triangle-exclamation",className:"flex-item-noshrink mtauto mbauto"}),(0,j.jsxs)("span",{className:"flex-item-fluid pl0-5 pr0-5",children:[(0,j.jsx)("span",{className:"mr0-5",children:s}),(0,j.jsx)(Tu.Z,{className:"underline inline-block color-inherit",url:"https://protonmail.com/support/knowledge-base/encrypted-contacts/",children:(0,u.c)("Link").t(Cp||(Cp=(0,d.Z)(["Learn more"])))})]}),(0,j.jsx)("span",{className:"flex-item-noshrink flex",children:(0,j.jsx)(Ea.Z,{size:"small",onClick:()=>{a.type!==Zp?a.type!==Ep?n():r((0,j.jsx)(modals_ContactSignatureErrorModal,{contactID:e})):r((0,j.jsx)(modals_ContactDecryptionErrorModal,{contactID:e}))},children:i})})]})};var zp,_p,Rp,Gp,Yp,Up,contacts_ContactImageSummary=({photo:e,name:t})=>{const n=(0,we.dY)(e),[r,a]=(0,o.useState)(!1),[s,i]=(0,o.useState)({src:e}),[{ShowImages:l}={ShowImages:M.pn.NONE},p]=useMailSettings(),[m,g]=(0,no.Z)(!0),b=p||m,y=r||l===M.pn.ALL||!!n||l===M.pn.REMOTE;if((0,o.useEffect)((()=>{if(!e||!y)return;g((async()=>{const{src:t,width:n,height:r}=await(0,vl.Np)(e);if(n<=es&&r<=es)return void i({src:t,width:n,height:r,isSmall:!0});const a=await(0,vl.tg)({original:e,maxWidth:es,maxHeight:es,bigResize:!0});i({src:a})})().catch(c.ZT))}),[e,y,r]),!e)return(0,j.jsx)("div",{className:"bordered bg-norm rounded ratio-container-square mb0",children:(0,j.jsx)("span",{className:"inner-ratio-container flex",children:(0,j.jsx)("span",{className:"mauto color-weak h1",children:(0,br.Qm)(t)})})});if(y){if(b)return(0,j.jsx)("div",{className:"ratio-container-square rounded bordered",children:(0,j.jsx)("span",{className:"inner-ratio-container flex",children:(0,j.jsx)(Yu.Z,{})})});const e={backgroundImage:"url(".concat(s.src,")"),backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"};return s.isSmall?(0,j.jsx)("div",{className:"ratio-container-square mb0 rounded bordered",children:(0,j.jsx)("span",{className:"inner-ratio-container flex",children:(0,j.jsx)("div",{className:"mbauto mtauto flex center w-custom",style:{"--width-custom":"".concat(Math.min(s.width||0,s.height||0),"px")},children:(0,j.jsx)("div",{className:"ratio-container-square",style:e,children:(0,j.jsx)("span",{className:"inner-ratio-container"})})})})}):(0,j.jsx)("div",{className:"ratio-container-square rounded bordered",style:e,children:(0,j.jsx)("span",{className:"inner-ratio-container"})})}return(0,j.jsx)("button",{type:"button",className:"bordered rounded bg-norm ratio-container-square mb0",onClick:()=>a(!0),children:(0,j.jsx)("span",{className:"inner-ratio-container flex",children:(0,j.jsxs)("span",{className:"mauto lh-rg flex flex-column flex-align-items-center",children:[(0,j.jsx)(pr.Z,{name:"file-shapes"}),(0,j.jsx)("div",{className:"m0-5 color-primary",children:(0,u.c)("Action").t(kp||(kp=(0,d.Z)(["Load image"])))})]})})})};var Fp,contacts_ContactSummary=({properties:e,onEdit:t,onDelete:n,onExport:r,isPreview:a,leftBlockWidth:o="w30",hasError:s=!1})=>{const{isNarrow:i}=hooks_useActiveBreakpoint(),c=(0,vl.Co)(getPreferredValue(e,"photo")),l=getPreferredValue(e,"fn");return(0,j.jsxs)("div",{className:(0,ht.dh)(["contactsummary-container mt1 mb1",!i&&"flex flex-nowrap flex-align-items-center"]),children:[(0,j.jsx)("div",{className:(0,ht.dh)(["text-center contactsummary-photo-container pt0-5 on-mobile-mb0-5 on-mobile-center",o]),children:(0,j.jsx)(contacts_ContactImageSummary,{photo:c,name:l})}),(0,j.jsxs)("div",{className:"contactsummary-contact-name-container pl2 on-mobile-pl0 flex-no-min-children flex-item-fluid",children:[(0,j.jsx)("h2",{className:"contactsummary-contact-name on-mobile-text-center mb0 flex-item-fluid on-mobile-mb1 text-bold text-ellipsis-two-lines",title:l,children:l}),!a&&(0,j.jsxs)("div",{className:"contactsummary-action-buttons flex-item-noshrink on-mobile-text-center ",children:[!s&&(0,j.jsx)(ur.Z,{title:(0,u.c)("Action").t(zp||(zp=(0,d.Z)(["Export"]))),children:(0,j.jsx)(Ea.Z,{color:"weak",shape:"outline",icon:!0,onClick:r,className:"inline-flex ml0-5",children:(0,j.jsx)(pr.Z,{name:"arrow-up-from-screen",alt:(0,u.c)("Action").t(_p||(_p=(0,d.Z)(["Export"])))})})}),(0,j.jsx)(ur.Z,{title:(0,u.c)("Action").t(Rp||(Rp=(0,d.Z)(["Delete"]))),children:(0,j.jsx)(Ea.Z,{color:"weak",shape:"outline",icon:!0,onClick:n,className:"inline-flex ml0-5",children:(0,j.jsx)(pr.Z,{name:"trash",alt:(0,u.c)("Action").t(Gp||(Gp=(0,d.Z)(["Delete"])))})})}),!s&&(0,j.jsx)(ur.Z,{title:(0,u.c)("Action").t(Yp||(Yp=(0,d.Z)(["Edit"]))),children:(0,j.jsx)(Ea.Z,{icon:!0,shape:"solid",color:"norm",onClick:()=>t(),className:"inline-flex ml0-5",children:(0,j.jsx)(pr.Z,{name:"pen",alt:(0,u.c)("Action").t(Up||(Up=(0,d.Z)(["Edit"])))})})})]})]})]})};const Kp=["src","text"];function RemoteImage_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var image_RemoteImage=e=>{let{src:t,text:n=(0,u.c)("Action").t(Fp||(Fp=(0,d.Z)(["Load image"])))}=e,r=(0,Sn.Z)(e,Kp);const[{ShowImages:a}={ShowImages:M.pn.NONE},s]=useMailSettings(),[i,c]=(0,o.useState)(!(0,we.PX)(t));return!s&&a&M.pn.REMOTE||i?(0,j.jsx)("img",function RemoteImage_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?RemoteImage_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RemoteImage_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({src:t,referrerPolicy:"no-referrer"},r)):(0,j.jsx)(Ea.Z,{onClick:()=>c(!0),children:n})},Bp=n(25777),Wp=n(85602);const Vp=["Keys"];function getPublicKeysEmailHelper_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function getPublicKeysEmailHelper_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?getPublicKeysEmailHelper_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):getPublicKeysEmailHelper_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const{KEY_GET_ADDRESS_MISSING:Qp,KEY_GET_DOMAIN_MISSING_MX:Hp,KEY_GET_INPUT_INVALID:Xp}=Bp.KI,Jp=[Qp,Hp,Xp];var helpers_getPublicKeysEmailHelper=async(e,t,n=!1,r=!1)=>{try{const a=getPublicKeysEmailHelper_objectSpread(getPublicKeysEmailHelper_objectSpread({},(0,Wp.KZ)({Email:t})),{},{silence:n});r&&(a.cache="no-cache");const o=await e(a),{Keys:s=[]}=o,i=(0,Sn.Z)(o,Vp),l=await Promise.all(s.map((({PublicKey:e})=>(0,ku.RR)(e).then((([e])=>e)).catch(c.ZT))));return getPublicKeysEmailHelper_objectSpread(getPublicKeysEmailHelper_objectSpread({},i),{},{Keys:s,publicKeys:l})}catch(e){const{data:t={}}=e;if(Jp.includes(t.Code))return{Keys:[],publicKeys:[],Errors:[t.Error]};throw e}};const extractSign=(e,t)=>{const{sign:n}=e;return void 0!==n?n:t.Sign===M.g2},extractScheme=(e,t)=>{const{scheme:n}=e;return n===M.w.PGP_INLINE||n===M.w.PGP_MIME?n:t.PGPScheme===M.uG.SEND_PGP_INLINE?M.w.PGP_INLINE:M.w.PGP_MIME};var qp,$p=n(29644);const{TYPE_INTERNAL:em}=M.CL,getIsInternalUser=({RecipientType:e})=>e===em,isDisabledUser=e=>getIsInternalUser(e)&&!e.Keys.some((({Flags:e})=>(0,N.jl)(e,M.Tq.FLAG_NOT_OBSOLETE))),getEmailMismatchWarning=(e,t,n)=>{const r=n?(0,Xe.GZ)(t):(0,Xe.O6)(t),a=(e.users||[]).reduce(((e,{userId:t={}}={})=>{if(null==t||!t.userid)return e;const[,n=t.userid]=/<([^>]*)>/.exec(t.userid)||[];return e.push(n),e}),[]);if(!a.map((e=>n?(0,Xe.GZ)(e):(0,Xe.O6)(e))).includes(r)){const e=a.join(", ");return[(0,u.c)("PGP key warning").t(qp||(qp=(0,d.Z)(["Email address not found among user ids defined in sending key (",")"])),e)]}return[]},sortApiKeys=(e=[],t,n)=>e.reduce(((e,r)=>{const a=r.getFingerprint();return e[(0,Ne.vY)({isVerificationOnly:n.has(a),isNotTrusted:!t.has(a)})].push(r),e}),Array.from({length:4}).map((()=>[]))).flat(),sortPinnedKeys=(e=[],t)=>e.reduce(((e,n)=>{const r=n.getFingerprint();return e[(0,Ne.vY)({cannotSend:!t.has(r)})].push(n),e}),Array.from({length:2}).map((()=>[]))).flat(),getKeyEncryptionCapableStatus=async(e,t)=>{const n=t||+(0,$p.u)();return(0,ku.Gq)(e,new Date(n))},getIsValidForSending=(e,t)=>{const{verifyOnlyFingerprints:n,encryptionCapableFingerprints:r}=t;return!n.has(e)&&r.has(e)},getContactPublicKeyModel=async({emailAddress:e,apiKeysConfig:t,pinnedKeysConfig:n})=>{const{pinnedKeys:r=[],encrypt:a,sign:o,scheme:s,mimeType:i,isContact:c,isContactSignatureVerified:l,contactSignatureTimestamp:d}=n,u=new Set,p=new Set;await Promise.all(r.map((async e=>{const t=e.getFingerprint(),n=await getKeyEncryptionCapableStatus(e);u.add(t),n&&p.add(t)})));const m=sortPinnedKeys(r,p),g=getIsInternalUser(t),j=!g,b=new Set,y=t.publicKeys.filter(Za.Z);await Promise.all(y.map((async e=>{const n=e.getFingerprint();((e,t)=>{const n=e.getFingerprint(),r=t.publicKeys.findIndex((e=>(null==e?void 0:e.getFingerprint())===n));if(-1!==r)return!(0,N.jl)(t.Keys[r].Flags,M.Tq.FLAG_NOT_OBSOLETE)})(e,t)&&b.add(e.getFingerprint());await getKeyEncryptionCapableStatus(e)&&p.add(n)})));const h=sortApiKeys(y,u,b);return{encrypt:a,sign:o,scheme:s||M.nY.GLOBAL_DEFAULT,mimeType:i||M._5.AUTOMATIC,emailAddress:e,publicKeys:{apiKeys:h,pinnedKeys:m},trustedFingerprints:u,verifyOnlyFingerprints:b,encryptionCapableFingerprints:p,isPGPExternal:j,isPGPInternal:g,isPGPExternalWithWKDKeys:j&&!!y.length,isPGPExternalWithoutWKDKeys:j&&!y.length,pgpAddressDisabled:isDisabledUser(t),isContact:c,isContactSignatureVerified:l,contactSignatureTimestamp:d,emailAddressWarnings:t.Warnings,emailAddressErrors:t.Errors}},getKeyInfoFromProperties=async(e,t)=>{const{pinnedKeyPromises:n,mimeType:r,encrypt:a,scheme:o,sign:s}=e.filter((({field:e,group:n})=>Bo.includes(e)&&n===t)).reduce(((e,{field:t,value:n,pref:r})=>{if("key"===t&&n){const[,t=""]=n.split(","),a=(0,Gt.h6)((0,Gt.NV)(t));if(a.length){const t=(0,ku.RR)(a).then((([e])=>({publicKey:e,pref:r}))).catch(c.ZT);e.pinnedKeyPromises.push(t)}return e}return"x-pm-encrypt"===t&&n?(e.encrypt="true"===n,e):"x-pm-sign"===t&&n?(e.sign="true"===n,e):"x-pm-scheme"===t&&n?(e.scheme=(e=>{if(Object.values(M.w).includes(e))return e})(n),e):"x-pm-mimetype"===t&&n?(e.mimeType=(e=>e===M.LO.PLAINTEXT?e:void 0)(n),e):e}),{pinnedKeyPromises:[],encrypt:void 0,sign:void 0,scheme:void 0,mimeType:void 0});return{pinnedKeys:(await Promise.all(n)).filter(Za.Z).sort(sortByPref).map((({publicKey:e})=>e)),encrypt:a,scheme:o,mimeType:r,sign:s}},toKeyProperty=({publicKey:e,group:t,index:n})=>({field:"key",value:"data:application/pgp-keys;base64,".concat((0,Gt.oF)((0,Gt.Wf)(e.toPacketlist().write()))),group:t,pref:n+1});var tm,nm;var contacts_ContactMIMETypeSelect=({value:e,onChange:t,disabled:n})=>{const r=[{text:(0,u.c)("MIME type").t(tm||(tm=(0,d.Z)(["Automatic"]))),value:M._5.AUTOMATIC},{text:(0,u.c)("MIME type").t(nm||(nm=(0,d.Z)(["Plain text"]))),value:M.LO.PLAINTEXT}];return(0,j.jsx)(Ec.Z,{value:e,options:r,disabled:n,onChange:({target:e})=>t(e.value)})};const rm=/-----BEGIN PGP (PRIVATE|PUBLIC) KEY BLOCK-----(?:(?!-----)[\s\S])*-----END PGP (PRIVATE|PUBLIC) KEY BLOCK-----/g,parseKeys=(e=[])=>{const t=e.join("\n").match(rm)||[];return t.length?Promise.all(t.map((async e=>{try{const[t]=await(0,ku.RR)(e);return t}catch(e){}}))).then((e=>e.filter(Za.Z))):[]};var am;const SelectKeyFiles=({onUpload:e,autoClick:t=!1,multiple:n=!1,className:r="",children:a=(0,u.c)("Select files").t(am||(am=(0,d.Z)(["Upload"]))),disabled:s,shape:i,color:c},l)=>{const p=(0,o.useRef)(null);return(0,o.useEffect)((()=>{var e;t&&(null===(e=p.current)||void 0===e||e.click())}),[t]),(0,j.jsx)(wl.Z,{accept:".txt,.asc",ref:(0,fr.Z)(p,l),className:r,multiple:n,onChange:async({target:t})=>{const n=Array.from(t.files),r=await(async(e=[])=>{const t=await Promise.all(e.map((e=>(0,To.Z_)(e)))).catch((()=>[]));return parseKeys(t)})(n);e(r)},disabled:s,shape:i,color:c,children:a})};var om=(0,o.forwardRef)(SelectKeyFiles);const sm=["id","className","checked","loading","onChange","disabled","title"];function Toggle_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Toggle_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Toggle_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Toggle_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Toggle=(e,t)=>{let{id:n="toggle",className:r="",checked:a=!1,loading:o=!1,onChange:s,disabled:i,title:c}=e,l=(0,Sn.Z)(e,sm);const label=(e,t)=>(0,j.jsxs)("span",{className:"toggle-label-text","aria-hidden":"true",children:[(0,j.jsx)(pr.Z,{name:e,alt:"",size:16,className:"toggle-label-img"}),t&&(0,j.jsx)("span",{className:"toggle-label-loader",children:(0,j.jsx)(_a.Z,{})})]});return(0,j.jsxs)("label",{htmlFor:n,className:(0,ht.dh)(["toggle-label",r,i&&"toggle-label--disabled",a&&"toggle-label--checked",o&&"toggle-label--loading"]),title:c,children:[(0,j.jsx)("input",Toggle_objectSpread({disabled:o||i,id:n,onChange:e=>{!i&&s&&s(e)},type:"checkbox",className:(0,ht.dh)(["toggle-checkbox sr-only",r]),checked:a,"aria-busy":o,ref:t},l)),label("xmark",o&&!a),label("check",o&&a)]})};var im,cm=(0,o.forwardRef)(Toggle);const{INLINE:lm,MIME:dm}=qo,{PGP_MIME:um,PGP_INLINE:pm}=M.w;var contacts_ContactSchemeSelect=({value:e,mailSettings:t,onChange:n})=>{const r=(null==t?void 0:t.PGPScheme)===M.uG.SEND_PGP_INLINE?lm:dm,a=[{value:M.nY.GLOBAL_DEFAULT,text:(0,u.c)("Default encryption scheme").t(im||(im=(0,d.Z)(["Use global default (",")"])),r)},{value:um,text:dm},{value:pm,text:lm}];return(0,j.jsx)(Ec.Z,{options:a,value:e,onChange:({target:e})=>n(e.value)})};const mm={elgamal:"ElGamal"},gm=new Set(["ecdh","ecdsa","eddsa"]),isECC=(e="")=>gm.has(e.toLowerCase()),getFormattedAlgorithmName=({algorithm:e="",bits:t,curve:n}={algorithm:""})=>{const[r]=e.split("_");if(isECC(r))return"ECC (".concat((0,br.kC)("ed25519"===n?"curve25519":n),")");const a=mm[r]||r.toUpperCase();return"".concat(a," (").concat(t,")")};var jm,icon_WarningIcon=({warning:e,className:t})=>{if(!e.length)return null;const n=(0,j.jsx)(pr.Z,{name:"triangle-exclamation",className:(0,ht.dh)([t,"color-warning"])});return(0,j.jsx)(ur.Z,{title:e,children:n})};var icon_ContactKeyWarningIcon=({publicKey:e,emailAddress:t,isInternal:n,supportsEncryption:r,className:a})=>{if(!t)return null;const o=!1===r?[(0,u.c)("PGP key encryption warning").t(jm||(jm=(0,d.Z)(["Key cannot be used for encryption"])))]:[],s=getEmailMismatchWarning(e,t,n),i=o.concat(s);return i.length?(0,j.jsx)(icon_WarningIcon,{warning:i.join(" • "),className:a}):null};const bm={default:"badge-label-norm",origin:"badge-label-strong",light:"badge-label-weak",primary:"badge-label-primary",error:"badge-label-danger",warning:"badge-label-warning",success:"badge-label-success",info:"badge-label-info"};var ym,hm,Im,fm,Mm,Nm,xm,vm,wm,Dm,Sm,Om,Am,Cm,Em,Lm,Pm,Zm,Tm,km,zm,_m,Rm,badge_Badge=({children:e,type:t="default",tooltip:n,className:r="mr1"})=>{const a=(0,j.jsx)("span",{className:(0,ht.dh)([bm[t],r]),children:e});return n?(0,j.jsx)(ur.Z,{title:n,children:a}):a};function ContactKeysTable_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ContactKeysTable_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ContactKeysTable_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ContactKeysTable_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Gm,Ym,Um,Fm,Km,Bm,Wm,Vm,Qm,Hm,Xm,Jm,qm,$m,eg,tg,ng,contacts_ContactKeysTable=({model:e,setModel:t})=>{const[n,r]=(0,o.useState)([]),{isNarrow:a,isTinyMobile:s}=hooks_useActiveBreakpoint(),i=e.publicKeys.apiKeys.length,parse=async()=>{const t=e.isPGPInternal?[...e.publicKeys.apiKeys]:[...e.publicKeys.apiKeys,...e.publicKeys.pinnedKeys],n=(0,xe.uw)(t,(e=>e.getFingerprint())),a=await Promise.all(n.map((async(t,n)=>{const r=t.getFingerprint(),a=t.getCreationTime(),o=await t.getExpirationTime(),s=((e=[])=>{const t=e.map(getFormattedAlgorithmName);return(0,xe.Tw)(t).join(", ")})(t.getKeys().map((e=>e.getAlgorithmInfo()))),c=await(0,ku.wz)(t),l=await(0,ku.rw)(t),d=e.trustedFingerprints.has(r),u=e.encryptionCapableFingerprints.has(r),p=e.verifyOnlyFingerprints.has(r),m=!n&&u&&!p&&(!!i||e.encrypt),g=e.isPGPExternal&&n<i,j=n>=i;return{publicKey:t,fingerprint:r,algo:s,creationTime:a,expirationTime:o,isPrimary:m,isWKD:g,isExpired:c,isRevoked:l,isTrusted:d,supportsEncryption:u,isVerificationOnly:p,isUploaded:j,canBePrimary:!!n&&u&&!p&&(n<i?d:!i&&e.encrypt),canBeTrusted:!d&&!j,canBeUntrusted:d&&!j}})));r(a)};return(0,o.useEffect)((()=>{parse()}),[e.publicKeys,e.trustedFingerprints,e.encrypt]),(0,j.jsxs)(table_Table,{className:"simple-table--has-actions",children:[(0,j.jsx)("thead",{children:(0,j.jsxs)("tr",{children:[(0,j.jsx)("th",{scope:"col",className:"text-ellipsis",title:(0,u.c)("Table header").t(ym||(ym=(0,d.Z)(["Fingerprint"]))),children:(0,u.c)("Table header").t(hm||(hm=(0,d.Z)(["Fingerprint"])))}),!a&&(0,j.jsx)("th",{scope:"col",className:"text-ellipsis",title:(0,u.c)("Table header").t(Im||(Im=(0,d.Z)(["Created"]))),children:(0,u.c)("Table header").t(fm||(fm=(0,d.Z)(["Created"])))}),!s&&(0,j.jsx)("th",{scope:"col",className:"w10 text-ellipsis",title:(0,u.c)("Table header").t(Mm||(Mm=(0,d.Z)(["Expires"]))),children:(0,u.c)("Table header").t(Nm||(Nm=(0,d.Z)(["Expires"])))}),!a&&(0,j.jsx)("th",{scope:"col",className:"text-ellipsis",title:(0,u.c)("Table header").t(xm||(xm=(0,d.Z)(["Type"]))),children:(0,u.c)("Table header").t(vm||(vm=(0,d.Z)(["Type"])))}),(0,j.jsx)("th",{scope:"col",className:"text-ellipsis w15",title:(0,u.c)("Table header").t(wm||(wm=(0,d.Z)(["Status"]))),children:(0,u.c)("Table header").t(Dm||(Dm=(0,d.Z)(["Status"])))}),(0,j.jsx)("th",{scope:"col",className:(0,ht.dh)(["text-ellipsis",a&&"w40"]),title:(0,u.c)("Table header").t(Sm||(Sm=(0,d.Z)(["Actions"]))),children:(0,u.c)("Table header").t(Om||(Om=(0,d.Z)(["Actions"])))})]})}),(0,j.jsx)(table_TableBody,{children:n.map((({fingerprint:n,algo:r,creationTime:i,expirationTime:c,isPrimary:l,isWKD:p,publicKey:m,isExpired:g,isRevoked:b,isTrusted:y,supportsEncryption:h,isVerificationOnly:I,isUploaded:f,canBePrimary:M,canBeTrusted:N,canBeUntrusted:x})=>{const v=new Date(i),w=new Date(c),D=[{text:(0,u.c)("Action").t(Am||(Am=(0,d.Z)(["Download"]))),onClick:()=>{const t=new Blob([m.armor()],{type:"text/plain"}),r="publickey - ".concat(e.emailAddress," - 0x").concat(n.slice(0,8).toUpperCase(),".asc");helpers_downloadFile(t,r)}}];M&&D.push({text:(0,u.c)("Action").t(Cm||(Cm=(0,d.Z)(["Use for sending"]))),onClick:()=>{const r=e.publicKeys.apiKeys.findIndex((e=>e.getFingerprint()===n)),a=e.publicKeys.pinnedKeys.findIndex((e=>e.getFingerprint()===n)),o=-1!==r?(0,xe.pB)(e.publicKeys.apiKeys,r,0):e.publicKeys.apiKeys,s=-1!==a?(0,xe.pB)(e.publicKeys.pinnedKeys,a,0):e.publicKeys.pinnedKeys;t(ContactKeysTable_objectSpread(ContactKeysTable_objectSpread({},e),{},{publicKeys:{apiKeys:o,pinnedKeys:s}}))}}),N&&D.push({text:(0,u.c)("Action").t(Em||(Em=(0,d.Z)(["Trust"]))),onClick:()=>{const r=new Set(e.trustedFingerprints);r.add(n);const a=e.publicKeys.apiKeys.find((e=>e.getFingerprint()===n));a&&t(ContactKeysTable_objectSpread(ContactKeysTable_objectSpread({},e),{},{publicKeys:ContactKeysTable_objectSpread(ContactKeysTable_objectSpread({},e.publicKeys),{},{pinnedKeys:[...e.publicKeys.pinnedKeys,a]}),trustedFingerprints:r}))}}),x&&D.push({text:(0,u.c)("Action").t(Lm||(Lm=(0,d.Z)(["Untrust"]))),onClick:()=>{const r=new Set(e.trustedFingerprints);r.delete(n);const a=e.publicKeys.pinnedKeys.filter((e=>e.getFingerprint()!==n));t(ContactKeysTable_objectSpread(ContactKeysTable_objectSpread({},e),{},{publicKeys:ContactKeysTable_objectSpread(ContactKeysTable_objectSpread({},e.publicKeys),{},{pinnedKeys:a}),trustedFingerprints:r}))}}),f&&D.push({text:(0,u.c)("Action").t(Pm||(Pm=(0,d.Z)(["Remove"]))),onClick:()=>{const r=new Set(e.trustedFingerprints),a=new Set(e.encryptionCapableFingerprints);r.delete(n),a.delete(n),t(ContactKeysTable_objectSpread(ContactKeysTable_objectSpread({},e),{},{trustedFingerprints:r,encryptionCapableFingerprints:a,publicKeys:ContactKeysTable_objectSpread(ContactKeysTable_objectSpread({},e.publicKeys),{},{pinnedKeys:e.publicKeys.pinnedKeys.filter((e=>e.getFingerprint()!==n))})}))}});const S=[(0,j.jsxs)("div",{title:n,className:"flex flex-nowrap",children:[(0,j.jsx)(icon_ContactKeyWarningIcon,{className:"mr0-5 flex-item-noshrink",publicKey:m,emailAddress:e.emailAddress,isInternal:e.isPGPInternal,supportsEncryption:h}),(0,j.jsx)("span",{className:"flex-item-fluid text-ellipsis",children:n})]},n),!a&&((0,Zc.Z)(v)?(0,Et.Z)(v,"PP",{locale:kt.RW}):"-"),!s&&((0,Zc.Z)(w)?(0,Et.Z)(w,"PP",{locale:kt.RW}):"-"),!a&&r,(0,j.jsxs)(o.Fragment,{children:[l?(0,j.jsx)(badge_Badge,{type:"primary",children:(0,u.c)("Key badge").t(Zm||(Zm=(0,d.Z)(["Primary"])))}):null,I?(0,j.jsx)(badge_Badge,{type:"warning",children:(0,u.c)("Key badge").t(Tm||(Tm=(0,d.Z)(["Verification only"])))}):null,p?(0,j.jsx)(badge_Badge,{type:"origin",children:(0,u.c)("Key badge").t(km||(km=(0,d.Z)(["WKD"])))}):null,y?(0,j.jsx)(badge_Badge,{type:"success",children:(0,u.c)("Key badge").t(zm||(zm=(0,d.Z)(["Trusted"])))}):null,b?(0,j.jsx)(badge_Badge,{type:"error",children:(0,u.c)("Key badge").t(_m||(_m=(0,d.Z)(["Revoked"])))}):null,g?(0,j.jsx)(badge_Badge,{type:"error",children:(0,u.c)("Key badge").t(Rm||(Rm=(0,d.Z)(["Expired"])))}):null]},n),(0,j.jsx)(dropdown_DropdownActions,{size:"small",list:D},n)].filter(Boolean);return(0,j.jsx)(Qa,{cells:S},n)}))})]})};function ContactPgpSettings_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ContactPgpSettings_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ContactPgpSettings_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ContactPgpSettings_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var rg,ag,og,sg,ig,cg,lg,dg,ug,pg,mg,gg,jg,bg,contacts_ContactPgpSettings=({model:e,setModel:t,mailSettings:n})=>{const{createNotification:r}=(0,hn.Z)(),a=!!e.publicKeys.apiKeys.length,o=!!e.publicKeys.pinnedKeys.length,s=a&&e.trustedFingerprints.has(e.publicKeys.apiKeys[0].getFingerprint()),i=o&&!e.publicKeys.pinnedKeys.some((t=>getIsValidForSending(t.getFingerprint(),e))),c=o&&a&&(i||!s);return(0,j.jsxs)(j.Fragment,{children:[!a&&(0,j.jsx)(Cn.Z,{className:"mb1",learnMore:"https://protonmail.com/support/knowledge-base/how-to-use-pgp/",children:(0,u.c)("Info").t(Fm||(Fm=(0,d.Z)(["Setting up PGP allows you to send end-to-end encrypted emails with a non-ProtonMail user that uses a PGP compatible service."])))}),!!e.publicKeys.pinnedKeys.length&&c&&(0,j.jsx)(Cn.Z,{className:"mb1",type:"error",children:(0,u.c)("Info").t(Km||(Km=(0,d.Z)(["Address Verification with Trusted Keys is enabled for this address. To be able to send to this address, first trust public keys that can be used for sending."])))}),e.pgpAddressDisabled&&(0,j.jsx)(Cn.Z,{className:"mb1",type:"warning",children:(0,u.c)("Info").t(Bm||(Bm=(0,d.Z)(["This address is disabled. To be able to send to this address, the owner must first enable the address."])))}),a&&(0,j.jsx)(Cn.Z,{className:"mb1",learnMore:"https://protonmail.com/support/knowledge-base/address-verification/",children:(0,u.c)("Info").t(Wm||(Wm=(0,d.Z)(["To use Address Verification, you must trust one or more available public keys, including the one you want to use for sending. This prevents the encryption keys from being faked."])))}),!a&&!e.sign&&(0,j.jsx)(Cn.Z,{className:"mb1",learnMore:"https://protonmail.com/support/knowledge-base/how-to-use-pgp/",children:(0,u.c)("Info").t(Vm||(Vm=(0,d.Z)(["Only change these settings if you are using PGP with non-ProtonMail recipients."])))}),e.isPGPExternalWithoutWKDKeys&&i&&(0,j.jsx)(Cn.Z,{className:"mb1",type:"error",learnMore:"https://protonmail.com/support/knowledge-base/how-to-use-pgp/",children:(0,u.c)("Info").t(Qm||(Qm=(0,d.Z)(["None of the uploaded keys are valid for encryption. Encryption is automatically disabled."])))}),!a&&(0,j.jsxs)(bo.Z,{children:[(0,j.jsxs)(gr.Z,{htmlFor:"encrypt-toggle",children:[(0,u.c)("Label").t(Hm||(Hm=(0,d.Z)(["Encrypt emails"]))),(0,j.jsx)(fc.Z,{className:"ml0-5",title:(0,u.c)("Tooltip").t(Xm||(Xm=(0,d.Z)(["Email encryption forces email signature to help authenticate your sent messages"])))})]}),(0,j.jsx)(yo.Z,{className:"pt0-5",children:(0,j.jsx)(cm,{id:"encrypt-toggle",checked:e.encrypt,disabled:!e.publicKeys.pinnedKeys.length||i,onChange:({target:n})=>t(ContactPgpSettings_objectSpread(ContactPgpSettings_objectSpread({},e),{},{encrypt:n.checked,sign:!!n.checked||e.sign}))})})]}),!a&&(0,j.jsxs)(bo.Z,{children:[(0,j.jsxs)(gr.Z,{htmlFor:"sign-toggle",children:[(0,u.c)("Label").t(Jm||(Jm=(0,d.Z)(["Sign emails"]))),(0,j.jsx)(fc.Z,{className:"ml0-5",title:(0,u.c)("Tooltip").t(qm||(qm=(0,d.Z)(["Digitally signing emails helps authenticating that messages are sent by you"])))})]}),(0,j.jsx)(yo.Z,{className:"pt0-5",children:(0,j.jsx)(cm,{id:"sign-toggle",checked:e.sign,disabled:e.encrypt,onChange:({target:n})=>t(ContactPgpSettings_objectSpread(ContactPgpSettings_objectSpread({},e),{},{sign:n.checked,mimeType:M._5.AUTOMATIC}))})})]}),!e.isPGPInternal&&(0,j.jsxs)(bo.Z,{children:[(0,j.jsxs)(gr.Z,{children:[(0,u.c)("Label").t($m||($m=(0,d.Z)(["PGP scheme"]))),(0,j.jsx)(fc.Z,{className:"ml0-5",title:(0,u.c)("Tooltip").t(eg||(eg=(0,d.Z)(["Select the PGP scheme to be used when signing or encrypting to a user. Note that PGP/Inline forces plain text messages"])))})]}),(0,j.jsx)(yo.Z,{children:(0,j.jsx)(contacts_ContactSchemeSelect,{value:e.scheme,mailSettings:n,onChange:n=>t(ContactPgpSettings_objectSpread(ContactPgpSettings_objectSpread({},e),{},{scheme:n}))})})]}),(0,j.jsxs)(bo.Z,{children:[(0,j.jsxs)(gr.Z,{children:[(0,u.c)("Label").t(tg||(tg=(0,d.Z)(["Public keys"]))),(0,j.jsx)(fc.Z,{className:"ml0-5",title:(0,u.c)("Tooltip").t(ng||(ng=(0,d.Z)(["Upload a public key to enable sending end-to-end encrypted emails to this email"])))})]}),(0,j.jsx)(yo.Z,{className:"on-mobile-mt0-5",children:e.isPGPExternalWithoutWKDKeys&&(0,j.jsx)(om,{onUpload:async n=>{if(!n.length)return r({type:"error",text:(0,u.c)("Error").t(Gm||(Gm=(0,d.Z)(["Invalid public key file"])))});const a=[...e.publicKeys.pinnedKeys],o=new Set(e.trustedFingerprints),s=new Set(e.encryptionCapableFingerprints);await Promise.all(n.map((async e=>{if(!e.isPublic())return void r({type:"error",text:(0,u.c)("Error").t(Ym||(Ym=(0,d.Z)(["Invalid public key file"])))});const t=e.getFingerprint();if(await getKeyEncryptionCapableStatus(e)&&s.add(t),!o.has(t))return o.add(t),void a.push(e);const n=a.findIndex((e=>e.getFingerprint()===t));r({text:(0,u.c)("Info").t(Um||(Um=(0,d.Z)(["Duplicate key updated"]))),type:"warning"}),a.splice(n,1,e)}))),t(ContactPgpSettings_objectSpread(ContactPgpSettings_objectSpread({},e),{},{publicKeys:ContactPgpSettings_objectSpread(ContactPgpSettings_objectSpread({},e.publicKeys),{},{pinnedKeys:a}),trustedFingerprints:o,encryptionCapableFingerprints:s}))},multiple:!0})})]}),(a||o)&&(0,j.jsx)(contacts_ContactKeysTable,{model:e,setModel:t})]})},yg=n(5734),hg=n(60582),Ig=n(49013),fg=n(29988);const Mg=["userKeysList","contactID","properties","emailProperty","onClose"];function ContactEmailSettingsModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ContactEmailSettingsModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ContactEmailSettingsModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ContactEmailSettingsModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const{PGP_INLINE:Ng}=M.w,{INCLUDE:xg,IGNORE:vg}=Xo;var wg,Dg,Sg,Og,Ag,Cg,Eg,Lg,Pg,modals_ContactEmailSettingsModal=e=>{let{userKeysList:t,contactID:n,properties:r,emailProperty:a,onClose:s=c.ZT}=e,i=(0,Sn.Z)(e,Mg);const{value:l,group:p}=a,m=l,g=(0,Dn.Z)(),{call:b}=(0,Ie.Z)(),[y,h]=(0,o.useState)({}),[I,f]=(0,o.useState)(!1),[N,x]=(0,no.Z)(),{createNotification:v}=(0,hn.Z)(),[w,D]=useMailSettings(),S=N||D,O=(null==y||!y.isPGPInternal)&&(!(null==y||!y.isPGPExternalWithWKDKeys)||!(null==y||!y.sign)),A=!(!y||!w)&&extractScheme(y,w)===Ng,getKeysProperties=e=>{var t;const n=(null!=y&&y.isPGPInternal?[...null==y?void 0:y.publicKeys.apiKeys]:[...null==y?void 0:y.publicKeys.apiKeys,...null==y||null===(t=y.publicKeys)||void 0===t?void 0:t.pinnedKeys]).filter((e=>null==y?void 0:y.trustedFingerprints.has(e.getFingerprint())));return(0,xe.uw)(n,(e=>e.getFingerprint())).map(((t,n)=>toKeyProperty({publicKey:t,group:e,index:n})))},handleSubmit=async()=>{const e=r.filter((({field:e,group:t})=>!["email",...Bo].includes(e)||t&&t!==p)),o=[a,...getKeysProperties(p||"")];null!=y&&y.mimeType&&o.push({field:"x-pm-mimetype",value:null==y?void 0:y.mimeType,group:p}),null!=y&&y.isPGPExternalWithoutWKDKeys&&void 0!==(null==y?void 0:y.encrypt)&&o.push({field:"x-pm-encrypt",value:"".concat(null==y?void 0:y.encrypt),group:p}),null!=y&&y.isPGPExternalWithoutWKDKeys&&void 0!==(null==y?void 0:y.sign)&&o.push({field:"x-pm-sign",value:"".concat(null==y?void 0:y.sign),group:p}),null!=y&&y.isPGPExternal&&null!=y&&y.scheme&&o.push({field:"x-pm-scheme",value:null==y?void 0:y.scheme,group:p});const i=(e=>{const{withPref:t,withoutPref:n}=e.reduce(((e,t)=>(ko.includes(t.field)?e.withPref.push(t):e.withoutPref.push(t),e)),{withPref:[],withoutPref:[]});return t.sort(sortByPref).concat(n)})(e.concat(o)),c=await prepareContacts([i],t[0]),l=properties_hasCategories(i)?xg:vg,{Responses:[{Response:{Code:m}}]}=await g((0,Lo.el)({Contacts:c,Overwrite:+!!n,Labels:l}));if(m!==M.vB.SINGLE_SUCCESS)return s(),void v({text:(0,u.c)("Error").t(rg||(rg=(0,d.Z)(["Preferences could not be saved"]))),type:"error"});await b(),s(),v({text:(0,u.c)("Success").t(ag||(ag=(0,d.Z)(["Preferences saved"])))})};return(0,o.useEffect)((()=>{if(!y)return;const e=new AbortController;return D||x((async e=>{const t=await helpers_getPublicKeysEmailHelper(e,m,!0),n=await getKeyInfoFromProperties(r,p||""),a=await getContactPublicKeyModel({emailAddress:m,apiKeysConfig:t,pinnedKeysConfig:ContactEmailSettingsModal_objectSpread(ContactEmailSettingsModal_objectSpread({},n),{},{isContact:!0})});h(a)})((t=>g(ContactEmailSettingsModal_objectSpread(ContactEmailSettingsModal_objectSpread({},t),{},{signal:e.signal}))))),()=>{e.abort()}}),[D]),(0,o.useEffect)((()=>{var e,t;const n=!(null==y||null===(e=y.publicKeys)||void 0===e||!e.pinnedKeys.length||null!=y&&null!==(t=y.publicKeys)&&void 0!==t&&t.pinnedKeys.some((e=>getIsValidForSending(e.getFingerprint(),y))));h((e=>{var t,r,a;return ContactEmailSettingsModal_objectSpread(ContactEmailSettingsModal_objectSpread({},e),{},{encrypt:!n&&!(null==e||null===(t=e.publicKeys)||void 0===t||!t.pinnedKeys.length)&&e.encrypt,publicKeys:{apiKeys:sortApiKeys(null==e||null===(r=e.publicKeys)||void 0===r?void 0:r.apiKeys,e.trustedFingerprints,e.verifyOnlyFingerprints),pinnedKeys:sortPinnedKeys(null==e||null===(a=e.publicKeys)||void 0===a?void 0:a.pinnedKeys,e.encryptionCapableFingerprints)}})}))}),[null==y?void 0:y.trustedFingerprints,null==y?void 0:y.verifyOnlyFingerprints,null==y?void 0:y.encryptionCapableFingerprints]),(0,o.useEffect)((()=>{if(O)return A?h((e=>ContactEmailSettingsModal_objectSpread(ContactEmailSettingsModal_objectSpread({},e),{},{mimeType:M.LO.PLAINTEXT}))):void h((e=>ContactEmailSettingsModal_objectSpread(ContactEmailSettingsModal_objectSpread({},e),{},{mimeType:M._5.AUTOMATIC})))}),[O,A]),(0,j.jsxs)(yg.Z,ContactEmailSettingsModal_objectSpread(ContactEmailSettingsModal_objectSpread({modalTitleID:"modalTitle",onClose:s},i),{},{children:[(0,j.jsxs)("header",{className:"modal-header",children:[(0,j.jsx)(Ea.Z,{icon:!0,shape:"ghost",size:"small",className:"modal-close",title:(0,u.c)("Action").t(og||(og=(0,d.Z)(["Close modal"]))),onClick:s,children:(0,j.jsx)(pr.Z,{name:"xmark",alt:(0,u.c)("Action").t(sg||(sg=(0,d.Z)(["Close modal"])))})}),(0,j.jsx)("h1",{id:"modalTitle",className:"modal-title text-ellipsis",children:(0,u.c)("Title").t(ig||(ig=(0,d.Z)(["Email settings (",")"])),m)})]}),(0,j.jsxs)(hg.Z,{onSubmit:()=>x(handleSubmit()),onReset:s,children:[(0,j.jsxs)(Ig.Z,{children:[O?A?(0,j.jsx)(Cn.Z,{className:"mb1",children:(0,u.c)("Info").t(lg||(lg=(0,d.Z)(["PGP/Inline is only compatible with Plain Text format. Please note that ProtonMail always signs encrypted messages."])))}):(0,j.jsx)(Cn.Z,{className:"mb1",children:(0,u.c)("Info").t(dg||(dg=(0,d.Z)(["PGP/MIME automatically sends the message using the current composer mode. Please note that ProtonMail always signs encrypted messages"])))}):(0,j.jsx)(Cn.Z,{className:"mb1",children:(0,u.c)("Info").t(cg||(cg=(0,d.Z)(["Select the email format you want to be used by default when sending an email to this email address."])))}),(0,j.jsxs)(bo.Z,{children:[(0,j.jsxs)(gr.Z,{children:[(0,u.c)("Label").t(ug||(ug=(0,d.Z)(["Email format"]))),(0,j.jsx)(fc.Z,{className:"ml0-5",title:(0,u.c)("Tooltip").t(pg||(pg=(0,d.Z)(["Automatic indicates that the format in the composer is used to send to this user. Plain text indicates that the message will always be converted to plain text on send."])))})]}),(0,j.jsx)(yo.Z,{children:(0,j.jsx)(contacts_ContactMIMETypeSelect,{disabled:S||O,value:(null==y?void 0:y.mimeType)||"",onChange:e=>h(ContactEmailSettingsModal_objectSpread(ContactEmailSettingsModal_objectSpread({},y),{},{mimeType:e}))})})]}),(0,j.jsx)("div",{className:"mb1",children:(0,j.jsx)(Jd.Z,{onClick:()=>f(!I),disabled:S,children:I?(0,u.c)("Action").t(mg||(mg=(0,d.Z)(["Hide advanced PGP settings"]))):(0,u.c)("Action").t(gg||(gg=(0,d.Z)(["Show advanced PGP settings"])))})}),I&&y?(0,j.jsx)(contacts_ContactPgpSettings,{model:y,setModel:h,mailSettings:w}):null]}),(0,j.jsxs)(fg.Z,{children:[(0,j.jsx)(Ea.Z,{type:"reset",children:(0,u.c)("Action").t(jg||(jg=(0,d.Z)(["Cancel"])))}),(0,j.jsx)(yr.Z,{loading:S,type:"submit",children:(0,u.c)("Action").t(bg||(bg=(0,d.Z)(["Save"])))})]})]})]}))};var contacts_ContactViewProperty=({property:e,properties:t,contactID:n,contactEmail:r,contactGroups:a=[],ownAddresses:s,userKeysList:i,leftBlockWidth:c="w30",rightBlockWidth:l="w70",isPreview:p})=>{const[{hasPaidMail:m}]=(0,bn.ZP)(),{createModal:g}=(0,In.Z)(),{createNotification:b}=(0,hn.Z)(),y={work:(0,u.c)("Contact type label").t(Bi||(Bi=(0,d.Z)(["Work"]))),home:(0,u.c)("Contact type label").t(Wi||(Wi=(0,d.Z)(["Personal"]))),cell:(0,u.c)("Contact type label").t(Vi||(Vi=(0,d.Z)(["Mobile"]))),main:(0,u.c)("Contact type label").t(Qi||(Qi=(0,d.Z)(["Main"]))),yomi:(0,u.c)("Contact type label").t(Hi||(Hi=(0,d.Z)(["Yomi"]))),other:(0,u.c)("Contact type label").t(Xi||(Xi=(0,d.Z)(["Other"]))),fax:(0,u.c)("Contact type label").t(Ji||(Ji=(0,d.Z)(["Fax"]))),pager:(0,u.c)("Contact type label").t(qi||(qi=(0,d.Z)(["Pager"])))},{field:h}=e,I=clearType(getType(e.type)),f=y[I]||I,M=e.value,getActions=()=>{if(p)return null;switch(h){case"email":{if(!r)return null;const a=[...s].includes(M),handleSettings=()=>{g((0,j.jsx)(modals_ContactEmailSettingsModal,{userKeysList:i,contactID:n,emailProperty:e,properties:t}))};return(0,j.jsxs)(j.Fragment,{children:[!a&&(0,j.jsx)(ur.Z,{title:(0,u.c)("Title").t(wg||(wg=(0,d.Z)(["Email settings"]))),children:(0,j.jsx)(Ea.Z,{icon:!0,color:"weak",shape:"outline",onClick:handleSettings,children:(0,j.jsx)(pr.Z,{name:"gear",alt:(0,u.c)("Action").t(Dg||(Dg=(0,d.Z)(["Email settings"])))})})}),m?(0,j.jsx)(contacts_ContactGroupDropdown,{icon:!0,color:"weak",shape:"outline",className:"ml0-5",contactEmails:[r],tooltip:(0,u.c)("Title").t(Sg||(Sg=(0,d.Z)(["Contact group"]))),children:(0,j.jsx)(pr.Z,{name:"user-group",alt:(0,u.c)("Action").t(Og||(Og=(0,d.Z)(["Contact group"])))})}):(0,j.jsx)(ur.Z,{title:(0,u.c)("Title").t(Ag||(Ag=(0,d.Z)(["Contact group"]))),children:(0,j.jsx)(Ea.Z,{icon:!0,onClick:()=>g((0,j.jsx)(ContactUpgradeModal,{})),className:"ml0-5",children:(0,j.jsx)(pr.Z,{name:"user-group",alt:(0,u.c)("Action").t(Cg||(Cg=(0,d.Z)(["Contact group"])))})})}),(0,j.jsx)(Gu,{className:"ml0-5",value:M,onCopy:()=>{b({text:(0,u.c)("Success").t(Eg||(Eg=(0,d.Z)(["Email address copied to clipboard"])))})}})]})}case"tel":return(0,j.jsx)(Gu,{className:"ml0-5 pt0-5 pb0-5 mt0-1",value:M,onCopy:()=>{b({text:(0,u.c)("Success").t(Lg||(Lg=(0,d.Z)(["Phone number copied to clipboard"])))})}});case"adr":return(0,j.jsx)(Gu,{className:"ml0-5 pt0-5 pb0-5 mt0-1",value:formatAdr(e.value).join(", "),onCopy:()=>{b({text:(0,u.c)("Success").t(Pg||(Pg=(0,d.Z)(["Address copied to clipboard"])))})}});default:return null}};return(0,j.jsx)("div",{className:"contact-view-row flex flex-nowrap flex-align-items-start mb1",children:(0,j.jsxs)("div",{className:(0,ht.dh)(["contact-view-row-left flex flex-nowrap flex-item-fluid on-mobile-flex-column",l]),children:[(0,j.jsx)("div",{className:(0,ht.dh)(["contact-view-row-label flex-no-min-children on-mobile-max-w100 flex-item-noshrink flex-align-items-start",c]),children:(0,j.jsxs)("div",{className:"inline-flex flex-item-noshrink flex-item-fluid flex-align-items-center",children:[(0,j.jsx)("span",{role:"heading","aria-level":3,className:"mr0-5",children:(0,j.jsx)(contacts_ContactLabelProperty,{field:h,type:f})}),h&&["email","fn"].includes(h)?null:(0,j.jsx)(contacts_EncryptedIcon,{className:"flex"})]})}),(0,j.jsx)("span",{className:(0,ht.dh)(["contact-view-row-content mr0-5 flex-item-fluid pl2 pt0-5 on-mobile-pl0",!["note"].includes(h)&&"text-ellipsis"]),children:(()=>{if("email"===h)return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("span",{className:"w100 flex",children:[(0,j.jsx)("a",{className:"mr0-5 flex-item-fluid text-ellipsis",href:"mailto:".concat(M),title:M,children:M}),(0,j.jsx)("span",{className:"flex-item-noshrink flex contact-view-actions",children:getActions()})]}),!!a.length&&(0,j.jsx)("div",{className:"mt1",children:(0,j.jsx)(contacts_ContactGroupLabels,{className:"max-w100",contactGroups:a,isStacked:!1})})]});if("url"===h){const e=M.startsWith("http")||M.startsWith("//")?M:"//".concat(M);return(0,j.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",children:M})}if("tel"===h)return(0,j.jsxs)("span",{className:"w100 flex",children:[(0,j.jsx)("a",{className:"mr0-5 flex-item-fluid text-ellipsis",href:"tel:".concat(M),children:M}),(0,j.jsx)("span",{className:" flex-item-noshrink flex contact-view-actions",children:getActions()})]});if(["bday","anniversary"].includes(h)){const[e]=[(0,Pc.Z)(M),new Date(M)].filter(Zc.Z);return e?(0,Et.Z)(e,"PP",{locale:kt.RW}):M}if("logo"===h)return(0,j.jsx)(image_RemoteImage,{src:M});if("adr"===h){const t=formatAdr(e.value);return(0,j.jsxs)("span",{className:"w100 flex",children:[(0,j.jsx)("span",{className:"mr0-5 flex-item-fluid text-ellipsis",children:t.map(((e,n)=>(0,j.jsxs)(o.Fragment,{children:[e,n!==t.length-1&&(0,j.jsx)("br",{})]},n)))}),(0,j.jsx)("span",{className:"flex-item-noshrink flex contact-view-actions",children:getActions()})]})}return M})()})]})})};var contacts_ContactViewProperties=({properties:e,contactID:t,contactEmails:n,contactGroupsMap:r={},ownAddresses:a,field:o,userKeysList:s,leftBlockWidth:i="w30",rightBlockWidth:c="w70",isPreview:l=!1})=>{const d=["photo"],u=o?[o]:Jo.filter((e=>!d.includes(e))),p=e.filter((({field:e})=>u.includes(e)));return p.length?(0,j.jsx)("div",{className:(0,ht.dh)(["border-bottom mb0-5 pb0-25","fn"===o&&"mb1"]),children:p.map(((o,d)=>{const u=n&&n[d],p=u&&u.LabelIDs.map((e=>r[e])).filter(Boolean);return(0,j.jsx)(contacts_ContactViewProperty,{contactID:t,contactEmail:u,contactGroups:p,ownAddresses:a,property:o,properties:e,userKeysList:s,leftBlockWidth:i,rightBlockWidth:c,isPreview:l},d.toString())}))}):null};function ContactView_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ContactView_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ContactView_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ContactView_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var contacts_ContactView=({properties:e=[],contactID:t,contactEmails:n,contactGroupsMap:r,ownAddresses:a,userKeysList:o,errors:s,isModal:i,onDelete:c,onReload:l,isPreview:d=!1})=>{const{createModal:u}=(0,In.Z)(),handleEdit=n=>{u((0,j.jsx)(modals_ContactModal,{properties:e,contactID:t,newField:n}))},p=null==s?void 0:s.some((e=>e instanceof Error||e.type!==Qo.SIGNATURE_NOT_VERIFIED)),m={contactID:t,userKeysList:o,contactEmails:n,ownAddresses:a,properties:e,contactGroupsMap:r,leftBlockWidth:"label max-w100p",rightBlockWidth:"w100"},{hasEmail:g,hasTel:b,hasAdr:y}=e.reduce(((e,{field:t})=>(e.hasEmail=e.hasEmail||"email"===t,e.hasTel=e.hasTel||"tel"===t,e.hasAdr=e.hasAdr||"adr"===t,e)),{hasEmail:!1,hasTel:!1,hasAdr:!1}),h=e.find((e=>"fn"===e.field)),I=e.filter((e=>e!==h));return(0,j.jsxs)("div",{className:(0,ht.dh)([!i&&"contact-view view-column-detail flex-item-fluid scroll-if-needed p2 on-mobile-p1"]),children:[(0,j.jsxs)("div",{className:(0,ht.dh)(["contact-summary-wrapper border-bottom  pb1 mb1",!i&&" ml1 mr1 on-mobile-ml0-5 on-mobile-mr0-5 on-tiny-mobile-ml0"]),children:[(0,j.jsx)(contacts_ContactSummary,{onExport:()=>(e=>{const t=getFileName(e),n=toICAL(e).toString(),r=new Blob([n],{type:"data:text/plain;charset=utf-8;"});helpers_downloadFile(r,t)})(e),onEdit:handleEdit,onDelete:()=>{u((0,j.jsx)(ContactDeleteModal,{contactIDs:[t],onDelete:c}))},properties:e,leftBlockWidth:"w100 max-w100p on-mobile-wauto",isPreview:d,hasError:p}),(0,j.jsx)(contacts_ContactViewErrors,{errors:s,onReload:l,contactID:t})]}),(0,j.jsxs)("div",{className:(0,ht.dh)([!i&&"contact-view-contents pl1 pr1 on-mobile-pl0-5 on-mobile-pr0-5 on-tiny-mobile-pl0"]),children:[(0,j.jsx)(contacts_ContactViewProperties,ContactView_objectSpread(ContactView_objectSpread({field:"fn"},m),{},{properties:I})),(0,j.jsx)(contacts_ContactViewProperties,ContactView_objectSpread(ContactView_objectSpread({field:"email"},m),{},{isPreview:d})),(0,j.jsx)(contacts_ContactViewProperties,ContactView_objectSpread(ContactView_objectSpread({field:"tel"},m),{},{isPreview:d})),(0,j.jsx)(contacts_ContactViewProperties,ContactView_objectSpread(ContactView_objectSpread({field:"adr"},m),{},{isPreview:d})),(0,j.jsx)(contacts_ContactViewProperties,ContactView_objectSpread({},m))]}),(0,j.jsxs)("div",{className:(0,ht.dh)(["mt1-5 ",!i&&"contact-view-cta pl1 pr1 on-mobile-pl0-5 on-mobile-pr0-5 on-tiny-mobile-pl0"]),children:[g?null:(0,j.jsx)("div",{className:"mb0-5",children:(0,j.jsx)(Ea.Z,{shape:"outline",color:"norm",onClick:()=>handleEdit("email"),children:"Add email"})}),b?null:(0,j.jsx)("div",{className:"mb0-5",children:(0,j.jsx)(Ea.Z,{shape:"outline",color:"norm",onClick:()=>handleEdit("tel"),children:"Add phone number"})}),y?null:(0,j.jsx)("div",{className:"mb0-5",children:(0,j.jsx)(Ea.Z,{shape:"outline",color:"norm",onClick:()=>handleEdit("adr"),children:"Add address"})})]})]})};var contacts_useContactProperties=({contact:e,userKeysList:t})=>{const n=(0,o.useRef)(""),[r,a]=(0,o.useState)({}),[s,i]=(0,o.useState)({});(0,o.useEffect)((()=>{if(e&&t.length){n.current=e.ID;const{publicKeys:r,privateKeys:o}=(0,ju.ee)(t);decrypt_prepareContact(e,{publicKeys:r,privateKeys:o}).then((({properties:t,errors:r})=>{n.current===e.ID&&a({ID:e.ID,properties:t,errors:r})}))}}),[e,t,s]);return[r,()=>{a({}),i({})}]};var contacts_ContactContainer=({contactID:e,contactEmails:t,contactGroupsMap:n,ownAddresses:r,userKeysList:a=[],isModal:o=!1,onDelete:s})=>{const[i,c]=contacts_useContact(e),[{properties:l,errors:d,ID:u},p]=contacts_useContactProperties({contact:i,userKeysList:a});return c||!l||u!==e?(0,j.jsx)(Yu.Z,{}):(0,j.jsx)(contacts_ContactView,{properties:l,contactID:e,contactEmails:t,contactGroupsMap:n,ownAddresses:r,userKeysList:a,errors:d,isModal:o,onDelete:s,onReload:p})};var items_useItemsSelection=(e,t,n)=>{const[r,a]=(0,o.useState)({}),[s,i]=(0,o.useState)(""),isChecked=e=>!!r[e];(0,o.useEffect)((()=>a({})),n);const c=(0,o.useMemo)((()=>Object.entries(r).reduce(((e,[t,n])=>n?(e.push(t),e):e),[])),[r]),l=(0,o.useMemo)((()=>c.length?c:e?[e]:[]),[c,e]),d=(0,mn.ZP)(((e,n,r)=>{a(t.reduce(((t,a)=>{const o=isChecked(a);let s;return s=e.includes(a)?n:r?!n:o,t[a]=s,t}),{})),i("")})),u=(0,mn.ZP)((e=>d(e?t:[],!0,!0))),p=(0,mn.ZP)((e=>{d([e],!isChecked(e),!1),i(e)})),m=(0,mn.ZP)((e=>{const n=[e];if(s){const r=t.findIndex((t=>t===e)),a=t.findIndex((e=>e===s));n.push(...t.slice(Math.min(r,a),Math.max(r,a)+1))}d(n,!isChecked(e),!1),i(e)})),g=(0,mn.ZP)(((e,t)=>{const{shiftKey:n}=e.nativeEvent;n?m(t):p(t)}));return(0,o.useEffect)((()=>{const e=c.filter((e=>t.includes(e)));e.length!==c.length&&d(e,!0,!0)}),[t]),{checkedIDs:c,selectedIDs:l,handleCheck:d,handleCheckAll:u,handleCheckOne:g,handleCheckOnlyOne:p,handleCheckRange:m}};function useContactList_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function useContactList_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?useContactList_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):useContactList_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var contacts_useContactList=({search:e,contactID:t,contactGroupID:n})=>{const[r,a]=wr(),[s=[],i]=Wl(),[c=[],l]=useContactGroups(),d=(0,br.Fv)(e,!0),{contactGroupName:u,totalContactsInGroup:p}=(0,o.useMemo)((()=>{if(!c.length||!n)return Object.create(null);const e=c.find((({ID:e})=>e===n));return{contactGroupName:null==e?void 0:e.Name,totalContactsInGroup:s.filter((({LabelIDs:e=[]})=>e.includes(n))).length}}),[s,c,n]),m=(0,o.useMemo)((()=>Array.isArray(r)?r.reduce(((e,t)=>{const{ContactID:n}=t;return e[n]||(e[n]=[]),e[n].push(t),e}),Object.create(null)):{}),[r]),g=(0,o.useMemo)((()=>(0,Ne.qL)(c)),[c]),j=(0,o.useMemo)((()=>Array.isArray(s)?s.filter((({Name:e,ID:t,LabelIDs:r})=>{const a=m[t]?m[t].map((({Email:e})=>e)).join(" "):"",o=!d.length||(0,br.Fv)("".concat(e," ").concat(a),!0).includes(d),s=!n||r.includes(n);return o&&s})):[]),[s,n,d,m]),b=(0,o.useMemo)((()=>j.map((e=>{const{ID:t}=e;return useContactList_objectSpread(useContactList_objectSpread({},e),{},{emails:(m[t]||[]).map((({Email:e})=>e))})}))),[j,m]),y=(0,o.useMemo)((()=>b.map((e=>e.ID))),[b]),{checkedIDs:h,selectedIDs:I,handleCheck:f,handleCheckAll:M,handleCheckOne:N,handleCheckOnlyOne:x,handleCheckRange:v}=items_useItemsSelection(t,y,[t,n]),w=(0,o.useMemo)((()=>{const e=j.length,t=h.length;return!!e&&t===e}),[j,h]);return{loading:i||a||l,checkedIDs:h,selectedIDs:I,handleCheck:f,handleCheckAll:M,handleCheckOne:N,handleCheckOnlyOne:x,handleCheckRange:v,contactEmailsMap:m,contactGroupName:u,contactGroupsMap:g,totalContactsInGroup:p,formattedContacts:b,filteredContacts:j,contacts:s,contactGroups:c,hasCheckedAllFiltered:w}},Zg=n(91588);const getHostname=e=>{if(/^https?:\/\//.test(e)){const t=document.createElement("a");return t.href=e,t.hostname}return window.location.hostname};var Tg,kg,zg,_g,Rg,Gg,Yg,Ug,Fg=n(40203);const Kg=["onClose","link"];function LinkConfirmationModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function LinkConfirmationModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?LinkConfirmationModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LinkConfirmationModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Bg,notifications_LinkConfirmationModal=e=>{let{onClose:t,link:n=""}=e,r=(0,Sn.Z)(e,Kg);const a=(0,Dn.Z)(),{call:s}=(0,Ie.Z)(),[i,c]=(0,o.useState)(!1),l=/:\/\/xn--/.test(n),p=(0,mr.un)()||(0,mr.fq)()?(0,u.c)("Info").t(Tg||(Tg=(0,d.Z)(["This link may be a homograph attack and cannot be opened by Internet Explorer and Edge browsers. If you are certain the link is legitimate, please use a different browser to open it."]))):(0,u.c)("Info").t(kg||(kg=(0,d.Z)(["This link may be a homograph attack. Please verify this is the link you wish to visit, or don't open it."])));return(0,j.jsxs)(modal_Confirm,LinkConfirmationModal_objectSpread(LinkConfirmationModal_objectSpread(LinkConfirmationModal_objectSpread({onConfirm:async()=>{(0,mr.RB)(n),i&&(await a((0,Fg.ik)(0)),await s())},onClose:t,title:(0,u.c)("Title").t(zg||(zg=(0,d.Z)(["Link confirmation"]))),confirm:(0,j.jsx)(Ea.Z,{color:"norm",type:"submit",autoFocus:!0,"aria-label":(0,u.c)("Action").t(_g||(_g=(0,d.Z)(["Confirm opening of link ",""])),n),children:(0,u.c)("Action").t(Rg||(Rg=(0,d.Z)(["Confirm"])))})},r),{small:!1}),{},{children:[(0,j.jsxs)(Cn.Z,{className:"mb1 text-break",type:"warning",children:["".concat((0,u.c)("Info").t(Gg||(Gg=(0,d.Z)(["You are about to open another browser tab and visit:"])))," "),(0,j.jsx)("span",{className:"text-bold",children:n})]}),l&&(0,j.jsxs)(Cn.Z,{className:"mb1",type:"warning",children:["".concat(p," "),(0,j.jsx)(Tu.Z,{url:"https://protonmail.com/support/knowledge-base/homograph-attacks/",title:"What are homograph attacks?",children:(0,u.c)("Info").t(Yg||(Yg=(0,d.Z)(["Learn more"])))})]}),(0,j.jsxs)(gr.Z,{className:"flex",children:[(0,j.jsx)(Nr,{checked:i,onChange:()=>c(!i)}),(0,u.c)("Label").t(Ug||(Ug=(0,d.Z)(["Do not ask again"])))]})]}))};const useLinkHandler=(e,t)=>{const[n]=useMailSettings(),{createModal:r}=(0,In.Z)(),{createNotification:a}=(0,hn.Z)(),[s,i]=(0,o.useState)(),getSrc=e=>{try{return(()=>{try{return{encoded:e.toString()||"",raw:e.getAttribute("href")||""}}catch(t){const n=Array.from(e.attributes).find((e=>"href"===(e||{}).name));return{raw:(null==n?void 0:n.nodeValue)||""}}})()}catch(e){return a({text:(0,u.c)("Error").t(Bg||(Bg=(0,d.Z)(["This message may contain some link's URL that cannot be properly opened by your current browser"]))),type:"error"}),{raw:""}}},c=(0,mn.ZP)((async a=>{const o=a.target.closest("a");if(!o)return;const c=getSrc(o);if(!c)return a.preventDefault(),!1;c.raw.toLowerCase().startsWith("mailto:")&&t&&(a.preventDefault(),a.stopPropagation(),t(c.raw));const l=void 0===(null==n?void 0:n.ConfirmLink)?1:null==n?void 0:n.ConfirmLink,d=getHostname(c.raw),u=(0,De.TF)();if(void 0===s){if(c.raw.startsWith("#")){const t=c.raw.replace("#","");if(e.current){const n=e.current.querySelector('a[name="'.concat(t,'"], a[id="').concat(t,'"]'));n&&n.scrollIntoView({behavior:"smooth",block:"center"})}return a.preventDefault(),void a.stopPropagation()}if(l&&(e=>{try{return window.location.hostname!==getHostname(e)}catch(e){return!0}})(c.raw)&&![...M.Oc,u].filter(Za.Z).some((e=>((e,t)=>e===t||e.endsWith(".".concat(t)))(d,e)))){a.preventDefault(),a.stopPropagation();const e=await(async({raw:e="",encoded:t})=>{if((0,mr.fq)()||(0,mr.un)()||!/:\/\/xn--/.test(t||e)){const[t,n="",...r]=e.split("://"),a=[n,...r].map((e=>(e.startsWith("%")?decodeURIComponent(e):e).split("/").map(Zg.Z.toASCII).join("/"))).join("://");return"".concat(t,"://").concat(a)}return t})(c),t=r((0,j.jsx)(notifications_LinkConfirmationModal,{link:e,onClose:()=>i(void 0)}));i(t)}}}));(0,o.useEffect)((()=>{var t;return null===(t=e.current)||void 0===t||t.addEventListener("click",c,!1),()=>{var t;return null===(t=e.current)||void 0===t?void 0:t.removeEventListener("click",c,!1)}}),[])};var Wg,Vg,Qg;const Hg=["contactID","onClose","onMailTo"];function ContactDetailsModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ContactDetailsModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ContactDetailsModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ContactDetailsModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var modals_ContactDetailsModal=e=>{let{contactID:t,onClose:n=c.ZT,onMailTo:r}=e,a=(0,Sn.Z)(e,Hg);const{createModal:s}=(0,In.Z)(),[i=[],l]=useContactGroups(),[m,g]=(0,us.Fj)(),[b=[],y]=(0,yn.ZP)(),{loading:h,contactEmailsMap:f}=contacts_useContactList({}),[M,N]=contacts_useContact(t),x=(0,o.useRef)(null),v=(0,o.useRef)(null);useLinkHandler(v,r);const[{properties:w}]=contacts_useContactProperties({contact:M,userKeysList:m});(0,o.useEffect)((()=>{var e;const handleClick=e=>{const t=e.target.closest("a"),r=null==t?void 0:t.getAttribute("href");null!=r&&r.startsWith("mailto:")&&n()};return null===(e=x.current)||void 0===e||e.addEventListener("click",handleClick),()=>{var e;return null===(e=x.current)||void 0===e?void 0:e.removeEventListener("click",handleClick)}}),[]);const D=(0,o.useMemo)((()=>b.map((({Email:e})=>e))),[b]),S=(0,o.useMemo)((()=>(0,Ne.qL)(i)),[i]),O=h||l||g||y||N;return(0,j.jsx)(On.Z,ContactDetailsModal_objectSpread(ContactDetailsModal_objectSpread({title:(0,u.c)("Title").t(Wg||(Wg=(0,d.Z)(["Contact details"]))),loading:O,close:(0,u.c)("Action").t(Vg||(Vg=(0,d.Z)(["Close"]))),submit:(0,j.jsx)(yr.Z,{onClick:()=>{s((0,j.jsx)(modals_ContactModal,{properties:w,contactID:t})),n()},children:(0,u.c)("Action").t(Qg||(Qg=(0,d.Z)(["Edit"])))}),disabled:!0,onClose:n,innerRef:v},a),{},{children:(0,j.jsx)(I.Z,{component:(0,j.jsx)(p.Z,{className:"pt2 view-column-detail flex-item-fluid"}),children:(0,j.jsx)("div",{ref:x,children:(0,j.jsx)(contacts_ContactContainer,{contactID:t,contactEmails:f[t],contactGroupsMap:S,ownAddresses:D,userKeysList:m,onDelete:n,isModal:!0})})},t)}))};var hooks_useDragOver=(e=(()=>!0),t="move",{onDragOver:n,onDragEnter:r,onDragLeave:a,onDrop:s}={})=>{const[i,c]=(0,o.useState)(0);return[i>0,{onDragEnter:t=>{e(t)&&(t.preventDefault(),0===i&&(null==r||r(t)),c(i+1))},onDragLeave:t=>{e(t)&&(t.preventDefault(),1===i&&(null==a||a(t)),c(i-1))},onDragOver:r=>{e(r)&&("all"===r.dataTransfer.effectAllowed&&(r.dataTransfer.dropEffect=t),r.preventDefault(),null==n||n(r))},onDrop:e=>{c(0),null==s||s(e)}}]},Xg=n(67233);function ContextMenu_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ContextMenu_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ContextMenu_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ContextMenu_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var contextMenu_ContextMenu=({anchorRef:e,children:t,isOpen:n,position:r,close:a,autoClose:s=!0,noMaxHeight:i=!1})=>{const[c]=(0,o.useState)((0,ht.D)("context-menu"));(0,o.useEffect)((()=>{if(!n)return;const handleContextMenu=()=>{s&&a()};return document.addEventListener("contextmenu",handleContextMenu,{capture:!0}),()=>{document.removeEventListener("contextmenu",handleContextMenu,{capture:!0})}}),[n,s,a]);const l=r?ContextMenu_objectSpread(ContextMenu_objectSpread({},r),{},{"--arrow-offset":0}):void 0;return(0,j.jsx)(Mo.Z,{id:c,isOpen:n,originalPosition:l,availablePlacements:Xg.Zc,noCaret:!0,autoCloseOutsideAnchor:!1,originalPlacement:"bottom-left",offset:1,anchorRef:e,onClose:a,onContextMenu:e=>e.stopPropagation(),noMaxHeight:i,children:t})};let Jg,qg;var $g,ej,tj,nj,rj,aj,oj,sj,ij,cj,lj,dj,uj,pj,mj,gj,jj,bj,yj,hj,Ij,fj,Mj,Nj,xj,vj,wj,Dj,Sj,Oj,Aj,Cj,Ej,Lj,Pj,Zj,Tj,kj,zj,_j,Rj,Gj,Yj,Uj,Fj,Kj,Bj,Wj,Vj,Qj;function icon_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function icon_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?icon_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):icon_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e[e.PLAIN=0]="PLAIN",e[e.CHECKMARK=1]="CHECKMARK",e[e.SIGN=2]="SIGN",e[e.WARNING=3]="WARNING",e[e.FAIL=4]="FAIL"}(Jg||(Jg={})),function(e){e.NONE="none",e.PGP_INLINE="pgp-inline",e.PGP_INLINE_PINNED="pgp-inline-pinned",e.PGP_MIME="pgp-mime",e.PGP_MIME_PINNED="pgp-mime-pinned",e.PGP_PM="pgp-pm",e.PGP_PM_PINNED="pgp-pm-pinned",e.PGP_EO="pgp-eo",e.INTERNAL="internal",e.EXTERNAL="external",e.END_TO_END="end-to-end",e.ON_COMPOSE="on-compose",e.ON_DELIVERY="on-delivery"}(qg||(qg={}));const{SEND_PM:Hj,SEND_EO:Xj,SEND_PGP_INLINE:Jj,SEND_PGP_MIME:qj}=M.uG,{NOT_VERIFIED:$j,NOT_SIGNED:eb,SIGNED_AND_INVALID:tb,SIGNED_AND_VALID:nb}=v,{PLAIN:rb,CHECKMARK:ab,SIGN:ob,WARNING:sb,FAIL:ib}=Jg,{NONE:cb,PGP_INLINE:lb,PGP_INLINE_PINNED:db,PGP_MIME:ub,PGP_MIME_PINNED:pb,PGP_PM:mb,PGP_PM_PINNED:gb,PGP_EO:jb,INTERNAL:bb,EXTERNAL:yb,END_TO_END:hb,ON_COMPOSE:Ib,ON_DELIVERY:fb}=qg,getMapEmailHeaders=e=>{if(!e)return{};return e.split(";").map((e=>decodeURIComponent(e.trim()))).reduce(((e,t)=>{const n=t.match(/(.*)=(.*)/);if(!n)return e;const[,r,a]=n;return e[r]=a,e}),{})},getSendStatusIcon=e=>{const{encrypt:t,pgpScheme:n,hasApiKeys:r,isPublicKeyPinned:a,warnings:o,error:s}=e,i=null==o?void 0:o.join("; "),c=i?(0,u.c)("Key validation warning").t($g||($g=(0,d.Z)(["Recipient's key validation failed: ",""])),i):void 0;if(s)return{colorClassName:"color-danger",isEncrypted:!1,fill:ib,text:s.message};if(n===Hj){const e={colorClassName:"color-info",isEncrypted:!0};return icon_objectSpread(icon_objectSpread({},e),{},a?{fill:ab,text:(0,u.c)("Composer email icon").t(ej||(ej=(0,d.Z)(["End-to-end encrypted to verified recipient"])))}:{fill:rb,text:(0,u.c)("Composer email icon").t(tj||(tj=(0,d.Z)(["End-to-end encrypted"])))})}if(n===Xj)return{colorClassName:"color-info",isEncrypted:!0,fill:rb,text:(0,u.c)("Composer email icon").t(nj||(nj=(0,d.Z)(["End-to-end encrypted"])))};if([Jj,qj].includes(n)){const e={colorClassName:"color-success",isEncrypted:t};return icon_objectSpread(icon_objectSpread({},e),{},c?r?{fill:sb,text:(0,u.c)("Composer email icon").t(rj||(rj=(0,d.Z)(["End-to-end encrypted. ",""])),c)}:{fill:sb,text:(0,u.c)("Composer email icon").t(aj||(aj=(0,d.Z)(["PGP-encrypted. ",""])),c)}:t?a?r?{fill:ab,text:(0,u.c)("Composer email icon").t(oj||(oj=(0,d.Z)(["End-to-end encrypted to verified recipient"])))}:{fill:ab,text:(0,u.c)("Composer email icon").t(sj||(sj=(0,d.Z)(["PGP-encrypted to verified recipient"])))}:r?{fill:rb,text:(0,u.c)("Composer email icon").t(ij||(ij=(0,d.Z)(["End-to-end encrypted"])))}:{fill:ob,text:(0,u.c)("Composer email icon").t(cj||(cj=(0,d.Z)(["PGP-encrypted"])))}:{fill:ob,text:(0,u.c)("Composer email icon").t(lj||(lj=(0,d.Z)(["PGP-signed"])))})}},getSentStatusIcon=({mapAuthentication:e,mapEncryption:t,contentEncryption:n,emailAddress:r})=>{if(!r){const e=Object.values(t),r=!!e.length,a=r&&!e.some((e=>[mb,gb,jb].includes(e))),o=r&&!e.some((e=>![gb,pb,db].includes(e))),s=r&&!e.some((e=>e===cb));if(o){const t=n===hb?(0,u.c)("Sent email icon").ngettext((0,u.msgid)(dj||(dj=(0,d.Z)(["Sent by you with end-to-end encryption to verified recipient"]))),"Sent by you with end-to-end encryption to verified recipients",e.length):(0,u.c)("Sent email icon").ngettext((0,u.msgid)(uj||(uj=(0,d.Z)(["Sent by ProtonMail with zero-access encryption to verified recipient"]))),"Sent by ProtonMail with zero-access encryption to verified recipients",e.length);return{colorClassName:a?"color-success":"color-info",isEncrypted:!0,fill:ab,text:t}}return s?{colorClassName:a?"color-success":"color-info",isEncrypted:!0,fill:rb,text:n===hb?(0,u.c)("Sent email icon").t(pj||(pj=(0,d.Z)(["Sent by you with end-to-end encryption"]))):(0,u.c)("Sent email icon").t(mj||(mj=(0,d.Z)(["Sent by ProtonMail with zero-access encryption"])))}:{colorClassName:"color-info",isEncrypted:!0,fill:rb,text:(0,u.c)("Sent email icon").t(gj||(gj=(0,d.Z)(["Stored with zero-access encryption"])))}}const[a,o]=[e[r],t[r]];if(o===cb&&[lb,ub].includes(a)){if(n!==Ib)return;return{colorClassName:"color-success",isEncrypted:!1,fill:ob,text:(0,u.c)("Sent email icon").t(jj||(jj=(0,d.Z)(["PGP-signed"])))}}return[lb,ub].includes(o)&&[cb,lb,ub].includes(a)?{colorClassName:"color-success",isEncrypted:!0,fill:rb,text:n===hb?(0,u.c)("Sent email icon").t(bj||(bj=(0,d.Z)(["End-to-end encrypted to PGP recipient"]))):(0,u.c)("Sent email icon").t(yj||(yj=(0,d.Z)(["Encrypted by ProtonMail to PGP recipient"])))}:[db,pb].includes(o)&&[cb,lb,ub].includes(a)?{colorClassName:"color-success",isEncrypted:!0,fill:ab,text:n===hb?(0,u.c)("Sent email icon").t(hj||(hj=(0,d.Z)(["End-to-end encrypted to verified PGP recipient"]))):(0,u.c)("Sent email icon").t(Ij||(Ij=(0,d.Z)(["Encrypted by ProtonMail to verified PGP recipient"])))}:a===jb&&o===jb?{colorClassName:"color-info",isEncrypted:!0,fill:rb,text:n===hb?(0,u.c)("Sent email icon").t(fj||(fj=(0,d.Z)(["End-to-end encrypted"]))):(0,u.c)("Sent email icon").t(Mj||(Mj=(0,d.Z)(["Encrypted by ProtonMail"])))}:o===mb&&[cb,mb].includes(a)?{colorClassName:"color-info",isEncrypted:!0,fill:rb,text:n===hb?(0,u.c)("Sent email icon").t(Nj||(Nj=(0,d.Z)(["End-to-end encrypted"]))):(0,u.c)("Sent email icon").t(xj||(xj=(0,d.Z)(["Encrypted by ProtonMail"])))}:o===gb&&[cb,mb].includes(a)?{colorClassName:"color-info",isEncrypted:!0,fill:ab,text:n===hb?(0,u.c)("Sent email icon").t(vj||(vj=(0,d.Z)(["End-to-end encrypted to verified recipient"]))):(0,u.c)("Sent email icon").t(wj||(wj=(0,d.Z)(["Encrypted by ProtonMail to verified recipient"])))}:void 0},getReceivedStatusIcon=(e,t)=>{if(null==e||!e.ParsedHeaders||void 0===(null==t?void 0:t.verificationStatus))return;const n=e.ParsedHeaders["X-Pm-Origin"],r=e.ParsedHeaders["X-Pm-Content-Encryption"],{verificationStatus:a,senderVerified:o,senderPinnedKeys:s}=t,i=!(null==s||!s.length);if(n===bb){const n={colorClassName:"color-info",isEncrypted:!0};if(r===hb){var c;const r=null===(c=t.verificationErrors)||void 0===c?void 0:c.map((({message:e})=>e)).filter(Boolean).join("; "),s=(()=>{const t=(({Time:e=0})=>e>=Math.max(w.USER,w.BULK))(e)||i;return a===eb&&t?(0,u.c)("Signature verification warning").t(Dj||(Dj=(0,d.Z)(["Sender could not be verified: Message not signed"]))):r?(0,u.c)("Signature verification warning").t(Sj||(Sj=(0,d.Z)(["Sender verification failed: ",""])),r):void 0})();return icon_objectSpread(icon_objectSpread({},n),{},s?{fill:sb,text:s}:a===eb?{fill:rb,text:(0,u.c)("Received email icon").t(Oj||(Oj=(0,d.Z)(["End-to-end encrypted message"])))}:a===$j?{fill:rb,text:(0,u.c)("Received email icon").t(Aj||(Aj=(0,d.Z)(["End-to-end encrypted and signed message"])))}:a===tb?{fill:sb,text:(0,u.c)("Signature verification warning").t(Cj||(Cj=(0,d.Z)(["Sender verification failed"])))}:a===nb?o?{fill:ab,text:(0,u.c)("Received email icon").t(Lj||(Lj=(0,d.Z)(["End-to-end encrypted message from verified sender"])))}:{fill:sb,text:(0,u.c)("Signature verification warning").t(Ej||(Ej=(0,d.Z)(["Sender's trusted keys verification failed"])))}:{fill:rb,text:(0,u.c)("Received email icon").t(Pj||(Pj=(0,d.Z)(["End-to-end encrypted message"])))})}if(r===fb)return icon_objectSpread(icon_objectSpread({},n),{},{fill:rb,text:(0,u.c)("Received email icon").t(Zj||(Zj=(0,d.Z)(["Sent by ProtonMail with zero-access encryption"])))})}if(n===yb){if(r===hb){var l;const e={colorClassName:"color-success",isEncrypted:!0},n=null===(l=t.verificationErrors)||void 0===l?void 0:l.map((({message:e})=>e)).filter(Boolean).join("; "),r=n?(0,u.c)("Signature verification warning").t(Tj||(Tj=(0,d.Z)(["PGP-encrypted message. Sender verification failed: ",""])),n):void 0;return icon_objectSpread(icon_objectSpread({},e),{},r?{fill:sb,text:r}:a===eb?{fill:rb,text:(0,u.c)("Received email icon").t(kj||(kj=(0,d.Z)(["PGP-encrypted message"])))}:a===$j?{fill:ob,text:(0,u.c)("Received email icon").t(zj||(zj=(0,d.Z)(["PGP-encrypted and signed message"])))}:a===tb?{fill:sb,text:(0,u.c)("Signature verification warning").t(_j||(_j=(0,d.Z)(["Sender verification failed"])))}:a===nb?o?{fill:ab,text:(0,u.c)("Received email icon").t(Gj||(Gj=(0,d.Z)(["PGP-encrypted message from verified sender"])))}:{fill:sb,text:(0,u.c)("Signature verification warning").t(Rj||(Rj=(0,d.Z)(["Sender's trusted keys verification failed"])))}:{fill:rb,text:(0,u.c)("Received email icon").t(Yj||(Yj=(0,d.Z)(["PGP-encrypted message"])))})}if(r===fb){var p;if(a===eb)return{colorClassName:"color-norm",isEncrypted:!1,fill:rb,text:(0,u.c)("Received email icon").t(Uj||(Uj=(0,d.Z)(["Stored with zero-access encryption"])))};const e={colorClassName:"color-success",isEncrypted:!1},n=null===(p=t.verificationErrors)||void 0===p?void 0:p.map((({message:e})=>e)).filter(Boolean).join("; "),r=n?(0,u.c)("Signature verification warning").t(Fj||(Fj=(0,d.Z)(["PGP-signed message. Sender verification failed: ",""])),n):void 0;if(r)return icon_objectSpread(icon_objectSpread({},e),{},{fill:sb,text:r});if(a===$j)return icon_objectSpread(icon_objectSpread({},e),{},{fill:ob,text:(0,u.c)("Received email icon").t(Kj||(Kj=(0,d.Z)(["PGP-signed message"])))});if(a===nb)return icon_objectSpread(icon_objectSpread({},e),{},o?{fill:ab,text:(0,u.c)("Received email icon").t(Wj||(Wj=(0,d.Z)(["PGP-signed message from verified sender"])))}:{fill:sb,text:(0,u.c)("Signature verification warning").t(Bj||(Bj=(0,d.Z)(["Sender's trusted keys verification failed"])))});if(a===tb)return icon_objectSpread(icon_objectSpread({},e),{},{fill:sb,text:(0,u.c)("Received email icon").t(Vj||(Vj=(0,d.Z)(["PGP-signed message. Sender verification failed"])))})}}return{colorClassName:"color-norm",isEncrypted:!1,fill:rb,text:(0,u.c)("Received email icon").t(Qj||(Qj=(0,d.Z)(["Stored with zero-access encryption"])))}};var message_EncryptionStatusIcon=({colorClassName:e,isEncrypted:t,fill:n,text:r,loading:a,disabled:o,useTooltip:s=!0,className:i})=>{if(a)return(0,j.jsx)(Yu.Z,{className:"icon-16p mauto flex"});if(void 0===n&&void 0===t)return null;const c=(({isEncrypted:e,fill:t})=>t===ab||t===sb?"https://protonmail.com/support/knowledge-base/digital-signature/":e?void 0:"https://protonmail.com/support/knowledge-base/what-is-encrypted/")({isEncrypted:t,fill:n}),l=(({isEncrypted:e,fill:t})=>t===rb?"lock-filled":t===ab?e?"lock-check-filled":"unlock-check-filled":t===ob?e?"lock-pen-filled":"unlock-pen-filled":t===sb?e?"lock-triangle-exclamation-filled":"unlock-triangle-exclamation-filled":t===ib?"triangle-exclamation":"")({isEncrypted:t,fill:n}),d=s?r:void 0;return(0,j.jsx)(ur.Z,{title:d,children:(0,j.jsx)("span",{className:(0,ht.dh)(["inline-flex flex-item-noshrink align-middle",i]),children:(0,j.jsx)(Tu.Z,{href:c,className:"flex flex-item-noshrink mauto",tabIndex:o?-1:void 0,children:(0,j.jsx)(pr.Z,{size:16,name:l,className:e,alt:r||"","data-testid":"encryption-icon"})})})})};function getPublicKeysVcardHelper_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function getPublicKeysVcardHelper_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?getPublicKeysVcardHelper_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):getPublicKeysVcardHelper_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Mb,Nb,xb,vb,wb,Db,Sb,Ob,Ab,Cb,Eb,Lb,helpers_getPublicKeysVcardHelper=async(e,t,n,r,a={})=>{let o,s,i=!1;try{const c=await(async(e,t={},n)=>{const r=(0,Xe.mQ)(e);if(t[r])return t[r];const{ContactEmails:a=[]}=await n((0,Lo.fn)({Email:r}));return a[0]})(t,a,e);if(void 0===c)return{pinnedKeys:[],isContact:i};if(i=!0,1===c.Defaults)return{pinnedKeys:[],isContact:i};const{Contact:l}=await e((0,Lo.vS)(c.ContactID)),d=l.Cards.find((({Type:e})=>e===M.BK.SIGNED));if(!d)return{pinnedKeys:[],isContact:!!l.Cards.length};const{type:u,data:p,signatureTimestamp:m}=await readSigned(d,{publicKeys:n});o=u===Qo.SUCCESS,s=m;const g=parse(p),j=g.find((({field:e,value:n})=>{const a=r?Xe.jy.PROTON:Xe.jy.DEFAULT;return"email"===e&&(0,Xe.mQ)(n,a)===(0,Xe.mQ)(t,a)}));if(!j||!j.group)throw new Error("Invalid vcard");return getPublicKeysVcardHelper_objectSpread(getPublicKeysVcardHelper_objectSpread({},await getKeyInfoFromProperties(g,j.group)),{},{isContact:i,isContactSignatureVerified:o,contactSignatureTimestamp:s})}catch(e){return{pinnedKeys:[],isContact:i,isContactSignatureVerified:o,contactSignatureTimestamp:s,error:e}}};function encryptionPreferences_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function encryptionPreferences_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?encryptionPreferences_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):encryptionPreferences_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let Pb;!function(e){e[e.EMAIL_ADDRESS_ERROR=0]="EMAIL_ADDRESS_ERROR",e[e.INTERNAL_USER_DISABLED=1]="INTERNAL_USER_DISABLED",e[e.INTERNAL_USER_NO_API_KEY=2]="INTERNAL_USER_NO_API_KEY",e[e.INTERNAL_USER_NO_VALID_API_KEY=3]="INTERNAL_USER_NO_VALID_API_KEY",e[e.PRIMARY_NOT_PINNED=4]="PRIMARY_NOT_PINNED",e[e.WKD_USER_NO_VALID_WKD_KEY=5]="WKD_USER_NO_VALID_WKD_KEY",e[e.EXTERNAL_USER_NO_VALID_PINNED_KEY=6]="EXTERNAL_USER_NO_VALID_PINNED_KEY",e[e.CONTACT_SIGNATURE_NOT_VERIFIED=7]="CONTACT_SIGNATURE_NOT_VERIFIED"}(Pb||(Pb={}));class EncryptionPreferencesError extends Error{constructor(e,t){super(t),this.type=void 0,this.type=e,Object.setPrototypeOf(this,EncryptionPreferencesError.prototype)}}var encryptionPreferences=(e,t,n)=>{const r=!!e.encrypt,a=extractSign(e,t),o=extractScheme(e,t),s=((e,t)=>{const{mimeType:n}=e,r=extractSign(e,t),a=extractScheme(e,t);return r&&a===M.w.PGP_INLINE?M.LO.PLAINTEXT:n})(e,t),i=encryptionPreferences_objectSpread(encryptionPreferences_objectSpread({},e),{},{encrypt:r,sign:r||a,scheme:o,mimeType:s});return n?((e,t)=>{const{publicKeys:{apiKeys:n},emailAddress:r,scheme:a,mimeType:o,isContact:s,isContactSignatureVerified:i,contactSignatureTimestamp:c,emailAddressWarnings:l,emailAddressErrors:p}=e,{address:m,publicKey:g}=t,j=!!m.HasKeys,b=!!m.Receive,y={encrypt:!0,sign:!0,scheme:a,mimeType:o,isInternal:!0,apiKeys:n,pinnedKeys:[],hasApiKeys:j,hasPinnedKeys:!1,isContact:s,isContactSignatureVerified:i,contactSignatureTimestamp:c,emailAddressWarnings:l};if(null!=p&&p.length){const e=p[0];return encryptionPreferences_objectSpread(encryptionPreferences_objectSpread({},y),{},{error:new EncryptionPreferencesError(Pb.EMAIL_ADDRESS_ERROR,e)})}if(!b)return encryptionPreferences_objectSpread(encryptionPreferences_objectSpread({},y),{},{error:new EncryptionPreferencesError(Pb.INTERNAL_USER_DISABLED,(0,u.c)("Error").t(Mb||(Mb=(0,d.Z)(["Email address disabled"]))))});if(!j)return encryptionPreferences_objectSpread(encryptionPreferences_objectSpread({},y),{},{error:new EncryptionPreferencesError(Pb.INTERNAL_USER_NO_API_KEY,(0,u.c)("Error").t(Nb||(Nb=(0,d.Z)(["No keys retrieved for internal user"]))))});if(!g)return encryptionPreferences_objectSpread(encryptionPreferences_objectSpread({},y),{},{error:new EncryptionPreferencesError(Pb.INTERNAL_USER_NO_VALID_API_KEY,(0,u.c)("Error").t(xb||(xb=(0,d.Z)(["No valid keys retrieved for internal user"]))))});const h=getEmailMismatchWarning(g,r,!0);return encryptionPreferences_objectSpread(encryptionPreferences_objectSpread({},y),{},{sendKey:g,isSendKeyPinned:!1,warnings:h})})(i,n):e.isPGPInternal?(e=>{const{emailAddress:t,publicKeys:{apiKeys:n,pinnedKeys:r},scheme:a,mimeType:o,trustedFingerprints:s,isContact:i,isContactSignatureVerified:c,contactSignatureTimestamp:l,emailAddressWarnings:p,emailAddressErrors:m}=e,g=!!n.length,j=!!r.length,b={encrypt:!0,sign:!0,scheme:a,mimeType:o,apiKeys:n,pinnedKeys:r,isInternal:!0,hasApiKeys:g,hasPinnedKeys:j,isContact:i,isContactSignatureVerified:c,contactSignatureTimestamp:l,emailAddressWarnings:p};if(null!=m&&m.length){const e=m[0];return encryptionPreferences_objectSpread(encryptionPreferences_objectSpread({},b),{},{error:new EncryptionPreferencesError(Pb.EMAIL_ADDRESS_ERROR,e)})}if(i&&!1===c)return encryptionPreferences_objectSpread(encryptionPreferences_objectSpread({},b),{},{error:new EncryptionPreferencesError(Pb.CONTACT_SIGNATURE_NOT_VERIFIED,(0,u.c)("Error").t(vb||(vb=(0,d.Z)(["Contact signature could not be verified"]))))});if(!g)return encryptionPreferences_objectSpread(encryptionPreferences_objectSpread({},b),{},{error:new EncryptionPreferencesError(Pb.INTERNAL_USER_NO_API_KEY,(0,u.c)("Error").t(wb||(wb=(0,d.Z)(["No keys retrieved for internal user"]))))});const[y]=n,h=y.getFingerprint(),I=n.find((t=>getIsValidForSending(t.getFingerprint(),e)));if(!I)return encryptionPreferences_objectSpread(encryptionPreferences_objectSpread({},b),{},{error:new EncryptionPreferencesError(Pb.INTERNAL_USER_NO_VALID_API_KEY,(0,u.c)("Error").t(Db||(Db=(0,d.Z)(["No key retrieved for internal user is valid for sending"]))))});if(!j){const e=getEmailMismatchWarning(y,t,!0);return encryptionPreferences_objectSpread(encryptionPreferences_objectSpread({},b),{},{sendKey:y,isSendKeyPinned:!1,warnings:e})}const f=s.has(h)&&getIsValidForSending(h,e),M=r.find((e=>e.getFingerprint()===h));if(!f||!M)return encryptionPreferences_objectSpread(encryptionPreferences_objectSpread({},b),{},{sendKey:I,error:new EncryptionPreferencesError(Pb.PRIMARY_NOT_PINNED,(0,u.c)("Error").t(Sb||(Sb=(0,d.Z)(["Trusted keys are not valid for sending"]))))});const N=getEmailMismatchWarning(M,t,!0);return encryptionPreferences_objectSpread(encryptionPreferences_objectSpread({},b),{},{sendKey:M,isSendKeyPinned:!0,warnings:N})})(i):e.isPGPExternalWithWKDKeys?(e=>{const{emailAddress:t,publicKeys:{apiKeys:n,pinnedKeys:r},scheme:a,mimeType:o,trustedFingerprints:s,isContact:i,isContactSignatureVerified:c,contactSignatureTimestamp:l,emailAddressWarnings:p,emailAddressErrors:m}=e,g=!!r.length,j={encrypt:!0,sign:!0,scheme:a,mimeType:o,apiKeys:n,pinnedKeys:r,isInternal:!1,hasApiKeys:!0,hasPinnedKeys:g,isContact:i,isContactSignatureVerified:c,contactSignatureTimestamp:l,emailAddressWarnings:p};if(null!=m&&m.length){const e=m[0];return encryptionPreferences_objectSpread(encryptionPreferences_objectSpread({},j),{},{error:new EncryptionPreferencesError(Pb.EMAIL_ADDRESS_ERROR,e)})}if(i&&!1===c)return encryptionPreferences_objectSpread(encryptionPreferences_objectSpread({},j),{},{error:new EncryptionPreferencesError(Pb.CONTACT_SIGNATURE_NOT_VERIFIED,(0,u.c)("Error").t(Ob||(Ob=(0,d.Z)(["Contact signature could not be verified"]))))});const[b]=n,y=b.getFingerprint(),h=n.find((t=>getIsValidForSending(t.getFingerprint(),e)));if(!h)return encryptionPreferences_objectSpread(encryptionPreferences_objectSpread({},j),{},{error:new EncryptionPreferencesError(Pb.WKD_USER_NO_VALID_WKD_KEY,(0,u.c)("Error").t(Ab||(Ab=(0,d.Z)(["No WKD key retrieved for user is valid for sending"]))))});if(!g){const e=getEmailMismatchWarning(b,t,!1);return encryptionPreferences_objectSpread(encryptionPreferences_objectSpread({},j),{},{sendKey:b,isSendKeyPinned:!1,warnings:e})}const I=s.has(y)&&getIsValidForSending(y,e),f=r.find((e=>e.getFingerprint()===y));if(!I||!f)return encryptionPreferences_objectSpread(encryptionPreferences_objectSpread({},j),{},{sendKey:h,error:new EncryptionPreferencesError(Pb.PRIMARY_NOT_PINNED,(0,u.c)("Error").t(Cb||(Cb=(0,d.Z)(["Trusted keys are not valid for sending"]))))});const M=getEmailMismatchWarning(f,t,!1);return encryptionPreferences_objectSpread(encryptionPreferences_objectSpread({},j),{},{sendKey:f,isSendKeyPinned:!0,warnings:M})})(i):(e=>{const{emailAddress:t,publicKeys:{apiKeys:n,pinnedKeys:r},encrypt:a,sign:o,scheme:s,mimeType:i,isContact:c,isContactSignatureVerified:l,contactSignatureTimestamp:p,emailAddressWarnings:m,emailAddressErrors:g}=e,j=!!r.length,b={encrypt:a,sign:o,mimeType:i,scheme:s,apiKeys:n,pinnedKeys:r,isInternal:!1,hasApiKeys:!1,hasPinnedKeys:j,isContact:c,isContactSignatureVerified:l,contactSignatureTimestamp:p,emailAddressWarnings:m};if(null!=g&&g.length){const e=g[0];return encryptionPreferences_objectSpread(encryptionPreferences_objectSpread({},b),{},{error:new EncryptionPreferencesError(Pb.EMAIL_ADDRESS_ERROR,e)})}if(c&&!1===l)return encryptionPreferences_objectSpread(encryptionPreferences_objectSpread({},b),{},{error:new EncryptionPreferencesError(Pb.CONTACT_SIGNATURE_NOT_VERIFIED,(0,u.c)("Error").t(Eb||(Eb=(0,d.Z)(["Contact signature could not be verified"]))))});if(!j)return b;const[y]=r;if(!getIsValidForSending(y.getFingerprint(),e))return encryptionPreferences_objectSpread(encryptionPreferences_objectSpread({},b),{},{error:new EncryptionPreferencesError(Pb.EXTERNAL_USER_NO_VALID_PINNED_KEY,(0,u.c)("Error").t(Lb||(Lb=(0,d.Z)(["The sending key is not valid"]))))});const h=getEmailMismatchWarning(y,t,!1);return encryptionPreferences_objectSpread(encryptionPreferences_objectSpread({},b),{},{sendKey:y,isSendKeyPinned:!0,warnings:h})})(i)},Zb=n(66401);const Tb="PUBLIC_KEYS",kb=30*M.EB;var hooks_useGetPublicKeys=()=>{const e=(0,Ln.Z)(),t=(0,Dn.Z)();return(0,o.useCallback)(((n,r=kb,a=!1)=>{e.has(Tb)||e.set(Tb,new Map);const o=e.get(Tb);return(0,Zn.NC)(o,n,(()=>helpers_getPublicKeysEmailHelper(t,n,!0,a)),r)}),[t,e])};const zb="ENCRYPTION_PREFERENCES",_b=5*M.EB;var hooks_useGetEncryptionPreferences=()=>{const e=(0,Dn.Z)(),t=(0,Ln.Z)(),n=(0,yn._2)(),r=(0,us.df)(),a=(0,Zb.lW)(),s=hooks_useGetPublicKeys(),i=useGetMailSettings(),c=(0,o.useCallback)((async(t,o,c)=>{const[l,d]=await Promise.all([n(),i()]),u=(0,Xe.GZ)(t),p=l.filter((({Receive:e})=>!!e)).find((({Email:e})=>(0,Xe.GZ)(e)===u));let m,g,j;if(p){var b;m={address:p,publicKey:null===(b=(await a(p.ID))[0])||void 0===b?void 0:b.publicKey},g={Keys:[],publicKeys:[],RecipientType:M.CL.TYPE_INTERNAL},j={pinnedKeys:[],isContact:!1}}else{const{publicKeys:n}=(0,ju.ee)(await r());g=await s(t,o,!o);const a=g.RecipientType===M.CL.TYPE_INTERNAL;j=await helpers_getPublicKeysVcardHelper(e,t,n,a,c)}const y=await getContactPublicKeyModel({emailAddress:t,apiKeysConfig:g,pinnedKeysConfig:j});return encryptionPreferences(y,d,m)}),[e,a,n,s,i]);return(0,o.useCallback)(((e,n=_b,r)=>{t.has(zb)||t.set(zb,new Map);const a=t.get(zb),o=(0,Xe.mQ)(e);return(0,Zn.NC)(a,o,(()=>c(o,n,r)),n)}),[t,c])};var hooks_useIsMounted=()=>{const e=(0,o.useRef)(!1);return(0,o.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),(0,o.useCallback)((()=>e.current),[])};const processApiRequestsSafe=(e,t=10,n=1e3)=>{const r=[...e];let a=[];return new Promise((e=>{const run=()=>{const o=r.splice(0,t).map((e=>e()));a=a.concat(o),r.length?setTimeout(run,n):e(Promise.all(a))};run()}))},{SEND_PM:Rb,SEND_EO:Gb,SEND_CLEAR:Yb,SEND_PGP_INLINE:Ub,SEND_PGP_MIME:Fb}=M.uG,getPGPSchemeAndMimeType=({encrypt:e,sign:t,scheme:n,isInternal:r,mimeType:a},o)=>{const s=null==o?void 0:o.MIMEType,i=(({encrypt:e,sign:t,scheme:n,isInternal:r},a)=>r?Rb:!e&&isEO(a)?Gb:t?n===M.w.PGP_INLINE?Ub:Fb:Yb)({encrypt:e,sign:t,scheme:n,isInternal:r},o);if(t&&[Ub,Fb].includes(i)){return{pgpScheme:i,mimeType:i===Ub?M.LO.PLAINTEXT:M.LO.MIME}}return i===Gb||s===M.LO.PLAINTEXT?{pgpScheme:i,mimeType:s||a}:{pgpScheme:i,mimeType:a||s}};function getSendPreferences_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function getSendPreferences_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?getSendPreferences_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):getSendPreferences_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Kb,send_getSendPreferences=(e,t)=>{const{encrypt:n,sign:r,sendKey:a,isSendKeyPinned:o,hasApiKeys:s,hasPinnedKeys:i,warnings:c,error:l}=e,d=isEO(t),u=n||d,p=!d&&(r||ae(t)),{pgpScheme:m,mimeType:g}=getPGPSchemeAndMimeType(getSendPreferences_objectSpread(getSendPreferences_objectSpread({},e),{},{sign:p}),t);return{encrypt:u,sign:p,pgpScheme:m,mimeType:g,publicKeys:a?[a]:void 0,isPublicKeyPinned:o,hasApiKeys:s,hasPinnedKeys:i,warnings:c,error:l}};function keyPinning_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function keyPinning_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?keyPinning_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):keyPinning_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const pinKeyUpdateContact=async({contactCards:e,emailAddress:t,isInternal:n,bePinnedPublicKey:r,publicKeys:a,privateKeys:o})=>{const[s,...i]=e.reduce(((e,t)=>(t.Type===M.BK.SIGNED?e.unshift(t):e.push(t),e)),[]),c=await readSigned(s,{publicKeys:a});if(c.type!==Qo.SUCCESS){if(c.error)throw c.error;throw new Error("Unknown error")}const l=c.data,p=parse(l),m=p.find((({field:e,value:r})=>{const a=n?Xe.jy.PROTON:Xe.jy.DEFAULT;return"email"===e&&(0,Xe.mQ)(r,a)===(0,Xe.mQ)(t,a)})),g=null==m?void 0:m.group,j=g?p.filter((e=>"key"===e.field&&e.group===g)):void 0;if(!j)throw new Error((0,u.c)("Error").t(Kb||(Kb=(0,d.Z)(["The key properties for "," could not be extracted"])),t));const b=j.map((e=>keyPinning_objectSpread(keyPinning_objectSpread({},e),{},{pref:e.pref+1}))),y=[toKeyProperty({publicKey:r,group:g,index:0}),...b],h=[...p.filter((({field:e,group:t})=>"key"!==e||t!==g)),...y],I=toICAL(h).toString(),{signature:f}=await(0,Rt.l)({data:I,privateKeys:o,armor:!0,detached:!0});return[{Type:M.BK.SIGNED,Data:I,Signature:f},...i]},pinKeyCreateContact=async({emailAddress:e,name:t,isInternal:n,bePinnedPublicKey:r,privateKeys:a})=>{const o=[{field:"fn",value:t||e},{field:"uid",value:generateProtonWebUID()},{field:"email",value:e,group:"item1"},!n&&{field:"x-pm-encrypt",value:"true",group:"item1"},!n&&{field:"x-pm-sign",value:"true",group:"item1"},toKeyProperty({publicKey:r,group:"item1",index:0})].filter(Za.Z),s=toICAL(o).toString(),{signature:i}=await(0,Rt.l)({data:s,privateKeys:a,armor:!0,detached:!0});return[{Type:M.BK.SIGNED,Data:s,Signature:i}]};var Bb,Wb,Vb,Qb;const Hb=["contacts","onTrust","onClose","onNotTrust","onError"];function AskForKeyPinningModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function AskForKeyPinningModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?AskForKeyPinningModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AskForKeyPinningModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Xb,Jb,qb,addresses_AskForKeyPinningModal=e=>{let{contacts:t,onTrust:n,onClose:r,onNotTrust:a,onError:o}=e,s=(0,Sn.Z)(e,Hb);const i=(0,Dn.Z)(),[c,l]=(0,us.Fj)(),[p,m]=(0,no.Z)(!1),{createNotification:g}=(0,hn.Z)(),{privateKeys:b,publicKeys:y}=(0,ju.ee)(c),h=[b[0]],I=t.length,handleSubmit=async()=>{try{const e=t.map((e=>()=>(async({contact:e,api:t,publicKeys:n,privateKeys:r})=>{const{contactID:a,isInternal:o,emailAddress:s,bePinnedPublicKey:i}=e,{Contact:{Cards:c}}=await t((0,Lo.vS)(a)),l=await pinKeyUpdateContact({contactCards:c,emailAddress:s,isInternal:o,bePinnedPublicKey:i,publicKeys:n,privateKeys:r});await t((0,Lo.Tk)(a,{Cards:l}))})({contact:e,api:i,publicKeys:y,privateKeys:h})));await processApiRequestsSafe(e,100,1e4),n()}catch(e){g({text:e.message,type:"error"}),o()}finally{r()}};return(0,j.jsxs)(On.Z,AskForKeyPinningModal_objectSpread(AskForKeyPinningModal_objectSpread({title:(0,u.c)("Title").ngettext((0,u.msgid)(Bb||(Bb=(0,d.Z)(["Trust new key?"]))),"Trust new keys?",t.length),submit:(0,u.c)("Action").ngettext((0,u.msgid)(Wb||(Wb=(0,d.Z)(["Trust key"]))),"Trust keys",I),onSubmit:()=>m(handleSubmit()),onClose:()=>{a(),r()},loading:p||l},s),{},{children:[(0,j.jsx)(Cn.Z,{className:"mb1",learnMore:"https://protonmail.com/support/knowledge-base/address-verification",children:(0,u.c)("Key pinning").ngettext((0,u.msgid)(Vb||(Vb=(0,d.Z)(["You have enabled Address Verification with Trusted Keys for this email address,\n                        but no active encryption key has been trusted.\n                        You must trust a key valid for sending in order to send a message to this email address."]))),"You have enabled Address Verification with Trusted Keys for these email addresses,\n                        but no active encryption keys have been trusted.\n                        You must trust keys valid for sending in order to send a message to these email addresses.",I)}),(0,j.jsxs)("div",{children:[(0,u.c)("Key pinning").ngettext((0,u.msgid)(Qb||(Qb=(0,d.Z)(["Do you want to trust the primary public key with the following fingerprint?"]))),"Do you want to trust the primary public keys with the following fingerprints?",I),(0,j.jsx)("ul",{children:t.map((({contactID:e,emailAddress:t,bePinnedPublicKey:n},r)=>{const a=n.getFingerprint();return(0,j.jsx)("li",{className:(0,ht.dh)([r!==I&&"mb0-5"]),children:(0,j.jsx)("span",{className:"block max-w100 text-ellipsis",children:"".concat(t,": ").concat(a)})},e)}))})]})]}))};const $b=["title","contacts","children","submit","onResign","onNotResign","onError","onClose"];function ContactResignModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ContactResignModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ContactResignModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ContactResignModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var modals_ContactResignModal=e=>{let{title:t,contacts:n,children:r,submit:a=(0,u.c)("Action").t(Xb||(Xb=(0,d.Z)(["Re-sign"]))),onResign:s,onNotResign:i,onError:c,onClose:l}=e,p=(0,Sn.Z)(e,$b);const m=(0,us.df)(),{createNotification:g}=(0,hn.Z)(),[b,y]=(0,o.useState)({}),[h,I]=(0,o.useState)({}),[f,M]=(0,o.useState)(n.reduce(((e,{contactID:t})=>(e[t]=!0,e)),{})),[N,x]=(0,no.Z)(),v=hooks_useGetEncryptionPreferences(),w=(0,Dn.Z)();(0,o.useEffect)((()=>{Promise.all(n.map((({contactID:e})=>(async e=>{const{Contact:{Cards:t,ContactEmails:n}}=await w((0,Lo.vS)(e)),r={};await Promise.all(n.map((async({Email:e})=>{const{pinnedKeys:t}=await v(e),n=t.map((e=>e.getFingerprint()));n.length&&(r[e]=n)}))),y((e=>ContactResignModal_objectSpread(ContactResignModal_objectSpread({},e),r))),I((n=>ContactResignModal_objectSpread(ContactResignModal_objectSpread({},n),{},{[e]:t}))),M((t=>ContactResignModal_objectSpread(ContactResignModal_objectSpread({},t),{},{[e]:!1})))})(e))))}),[]);const D=Object.values(f).some((e=>!0===e)),S=Object.values(b),O=(0,j.jsx)(yr.Z,{disabled:D,loading:N,type:"submit","data-testid":"resign-contact",children:a}),A=S.length?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Cn.Z,{className:"mb1",type:"info",children:(0,u.c)("Info").t(Jb||(Jb=(0,d.Z)(["Do you want to re-sign the contact details and in the process trust the keys with the following fingerprints?"])))}),D?(0,j.jsx)(Yu.Z,{}):(0,j.jsx)("div",{children:(0,j.jsx)("ul",{children:Object.keys(b).map((e=>{const t=b[e];return t?(0,j.jsx)("li",{children:(0,j.jsxs)("span",{className:"flex max-w100 flex-nowrap on-mobile-flex-column",children:[(0,j.jsx)("strong",{className:"mr0-25",children:"".concat(e,":")}),(0,j.jsx)("span",{className:"flex-item-fluid",children:t.map(((e,n)=>(0,j.jsx)("span",{className:"text-ellipsis inline-block max-w100",title:e,children:"".concat(e).concat(n+1!==t.length?", ":"")},e)))})]})},e):null}))})})]}):(0,j.jsx)(Cn.Z,{className:"mb1",type:"info",children:(0,u.c)("Info").t(qb||(qb=(0,d.Z)(["Do you want to re-sign the contact details?"])))});return(0,j.jsxs)(On.Z,ContactResignModal_objectSpread(ContactResignModal_objectSpread({title:t,onSubmit:()=>x((async()=>{try{const{privateKeys:e}=(0,ju.ee)(await m()),t={};await Promise.all(n.map((async({contactID:n})=>{const r=h[n];if(!r||f[n])return;const a=await resignCards({contactCards:r,privateKeys:[e[0]]});t[n]=a})));const r=n.map((({contactID:e})=>()=>w((0,Lo.Tk)(e,{Cards:t[e]}))));await processApiRequestsSafe(r,100,1e4),s()}catch(e){g({text:e.message,type:"error"}),null==c||c()}finally{null==l||l()}})()),onClose:()=>{null==i||i(),null==l||l()},loading:N,submit:O},p),{},{children:[r,A]}))};function ContactProvider_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ContactProvider_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ContactProvider_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ContactProvider_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const ey=(0,o.createContext)(null),useContactCache=()=>(0,o.useContext)(ey),computeGroupsMap=(e,t)=>e.reduce(((e,n)=>{var r;return null===(r=n.LabelIDs)||void 0===r||r.forEach((r=>{if(e[r]){var a;null===(a=e[r])||void 0===a||a.contacts.push(n)}else{const a=t.find((e=>e.ID===r));a&&(e[r]={group:a,contacts:[n]})}})),e}),{});var ty,ny,ry,ay,oy,containers_ContactProvider=({children:e,cache:t})=>{const[n=[]]=wr(),[r=[]]=useContactGroups(),a=(0,o.useMemo)((()=>t||ContactProvider_objectSpread(ContactProvider_objectSpread({},(e=>{const t=e.reduce(((e,t)=>{const n=(0,Xe.mQ)(t.Email),r=e[n];return r?(r.push(t),r.sort(((e,t)=>e.Order-t.Order))):e[n]=[t],e}),{});return{contactsMap:Object.keys(t).reduce(((e,n)=>{var r;return e[n]=null===(r=t[n])||void 0===r?void 0:r[0],e}),{}),contactsMapWithDuplicates:t}})(n)),{},{contactGroupsMap:(0,Ne.qL)(r,"Path"),groupsWithContactsMap:computeGroupsMap(n,r),recipientsLabelCache:new Map,groupsLabelCache:new Map})),[t,n,r]);return(0,j.jsx)(ey.Provider,{value:a,children:e})};function useSendInfo_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function useSendInfo_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?useSendInfo_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):useSendInfo_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const{PRIMARY_NOT_PINNED:sy,CONTACT_SIGNATURE_NOT_VERIFIED:iy}=Pb,useUpdateGroupSendInfo=(e,t,n)=>{const r=hooks_useGetEncryptionPreferences(),{contactsMap:a}=useContactCache(),{createModal:s}=(0,In.Z)(),i=t.map((({Email:e})=>e));return(0,o.useEffect)((()=>{const n=new AbortController,loadSendIcons=async({abortController:n,checkForError:o})=>{const i=t.map((({Email:t,ContactID:s,Name:i})=>()=>(async({emailAddress:t,contactID:n,contactName:o,abortController:s,checkForError:i})=>{var c;const{signal:l}=s,d=null==e||null===(c=e.mapSendInfo[t])||void 0===c?void 0:c.sendIcon,u=(0,Xe.H6)(t);if(!u||!t||d||!e||e.mapSendInfo[t]||l.aborted)return;const{message:p,setMapSendInfo:m}=e;l.aborted||m((e=>{const n=e[t];return useSendInfo_objectSpread(useSendInfo_objectSpread({},e),{},{[t]:useSendInfo_objectSpread(useSendInfo_objectSpread({},n),{},{loading:!0,emailValidation:u})})}));const g=await r(t,0,a),j=send_getSendPreferences(g,p.data),b=getSendStatusIcon(j),y={isVerified:g.isContactSignatureVerified,creationTime:g.contactSignatureTimestamp};return l.aborted||m((e=>useSendInfo_objectSpread(useSendInfo_objectSpread({},e),{},{[t]:{sendPreferences:j,sendIcon:b,loading:!1,emailValidation:u,emailAddressWarnings:g.emailAddressWarnings||[],contactSignatureInfo:y}}))),i&&j.error?{error:j.error,contact:{contactID:n,contactName:o,emailAddress:t,isInternal:g.isInternal,bePinnedPublicKey:g.sendKey}}:void 0})({emailAddress:t,contactID:s,contactName:i,abortController:n,checkForError:o}))),l=await processApiRequestsSafe(i,100,1e4),p=l.filter(Za.Z).filter((({error:{type:e}})=>e===iy)).map((({contact:e})=>e)),m=p.length;if(m)return await new Promise((e=>{const t=(0,u.c)("Title").ngettext((0,u.msgid)(ay||(ay=(0,d.Z)(["Re-sign contact"]))),"Re-sign contacts",m),n=p.map((({contactName:e})=>e)).join(", "),r=p.map((({emailAddress:e})=>e)).join(", ");s((0,j.jsx)(modals_ContactResignModal,{title:t,contacts:p,onResign:()=>e(void 0),onClose:()=>e(void 0),onNotResign:c.ZT,onError:c.ZT,children:(0,j.jsx)(Cn.Z,{className:"mb1",type:"error",children:(0,u.c)("Info").ngettext((0,u.msgid)(oy||(oy=(0,d.Z)(["The verification of "," has failed: the contact is not signed correctly.\n                                    This may be the result of a password reset.\n                                    You must re-sign the contact in order to send a message to "," or edit the contact."])),n,r),"The verification of ".concat(n," has failed: the contacts are not signed correctly.\n                                    This may be the result of a password reset.\n                                    You must re-sign the contacts in order to send a message to ").concat(r," or edit the contacts."),m)})}))})),loadSendIcons({abortController:n,checkForError:!1});const g=l.filter(Za.Z).filter((({error:{type:e}})=>e===sy)).map((({contact:e})=>e));return g.length?(await new Promise((e=>{s((0,j.jsx)(addresses_AskForKeyPinningModal,{contacts:g,onTrust:()=>e(void 0),onClose:()=>e(void 0),onNotTrust:c.ZT,onError:c.ZT}))})),loadSendIcons({abortController:n,checkForError:!1})):void 0};return loadSendIcons({abortController:n,checkForError:!0}),()=>{n.abort()}}),[]),{handleRemove:()=>{if(e){const{setMapSendInfo:t}=e;t((e=>(0,Ne.CE)(e,i)))}n()}}},useReloadSendInfo=()=>{const e=hooks_useGetEncryptionPreferences(),{contactsMap:t}=useContactCache();return(0,o.useCallback)((async(n,r)=>{const{mapSendInfo:a,setMapSendInfo:o}=n||{};if(void 0===a||!o||!r.data)return;const s=getRecipientsAddresses(r.data),i=s.map((n=>()=>(async(e,t,n,r,a)=>{const o=await r(e,0,a),s=send_getSendPreferences(o,t.data),i=getSendStatusIcon(s),c={isVerified:o.isContactSignatureVerified,creationTime:o.contactSignatureTimestamp},l={sendPreferences:s,sendIcon:i,loading:!1,emailAddressWarnings:o.emailAddressWarnings||[],contactSignatureInfo:c};n((t=>{const n=t[e];return n?useSendInfo_objectSpread(useSendInfo_objectSpread({},t),{},{[e]:useSendInfo_objectSpread(useSendInfo_objectSpread({},n),l)}):useSendInfo_objectSpread({},t)}))})(n,r,o,e,t))),c=s.reduce(((e,t)=>{const n=e[t]||{emailValidation:(0,Xe.H6)(t)};return e[t]=useSendInfo_objectSpread(useSendInfo_objectSpread({},n),{},{loading:!0}),e}),useSendInfo_objectSpread({},a));o(c),await processApiRequestsSafe(i,100,1e4)}),[e,t])};var cy=n(60118);const ly=(0,o.createContext)(null),useOnCompose=()=>(0,o.useContext)(ly),useOnMailTo=()=>{const e=useOnCompose();return t=>{const n=(0,cy.ov)(t);e({action:ve.Xh.NEW,referenceMessage:n})}},ComposeProvider=({children:e,onCompose:t})=>(0,j.jsx)(ly.Provider,{value:t,children:e});var dy,uy,py,my,gy,jy,by,yy,hy;const Iy=["recipient","messageSendInfo","onChange","onRemove","dragged","onDragStart","onDragEnd","onDragOver"];function AddressesRecipientItem_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function AddressesRecipientItem_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?AddressesRecipientItem_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AddressesRecipientItem_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fy,My,addresses_AddressesRecipientItem=e=>{var t,n,r;let{recipient:a,messageSendInfo:s,onChange:i=c.ZT,onRemove:l,dragged:p=!1,onDragStart:m,onDragEnd:g,onDragOver:b}=e,y=(0,Sn.Z)(e,Iy);const{createNotification:h}=(0,hn.Z)(),{createModal:I}=(0,In.Z)(),{contactsMap:f}=useContactCache(),[M,N]=(0,o.useState)(!1),x=(0,o.useRef)(null),[v,w]=(0,o.useState)(),{anchorRef:D,isOpen:S,open:O,close:A}=(0,No.Z)(),{handleRemove:C}=((e,t,n)=>{const{createModal:r}=(0,In.Z)(),a=hooks_useGetEncryptionPreferences(),{contactsMap:s}=useContactCache(),i=t.Address,handleRemove=()=>{if(e){const{setMapSendInfo:t}=e;t((e=>(0,Ne.CE)(e,[i])))}n()};return(0,o.useEffect)((()=>{const updateRecipientIcon=async()=>{var n,o;if(!e||e.mapSendInfo[i])return;const{message:c,setMapSendInfo:l}=e,p=(0,Xe.H6)(i);if(!p)return void l((e=>useSendInfo_objectSpread(useSendInfo_objectSpread({},e),{},{[i]:{sendPreferences:void 0,sendIcon:{colorClassName:"color-danger",isEncrypted:!1,fill:Jg.FAIL,text:(0,u.c)("Composer email icon").t(ty||(ty=(0,d.Z)(["The address might be misspelled"])))},loading:!1,emailValidation:p,emailAddressWarnings:[],contactSignatureInfo:void 0}})));l((e=>useSendInfo_objectSpread(useSendInfo_objectSpread({},e),{},{[i]:{loading:!0,emailValidation:p}})));const m=await a(i,0,s),g=send_getSendPreferences(m,c.data);if((null===(n=g.error)||void 0===n?void 0:n.type)===iy)return await new Promise(((e,n)=>{if(!t.ContactID)return n(new Error("Invalid contact id"));const a={contactID:t.ContactID},o=t.Address,s=t.Name||o;r((0,j.jsx)(modals_ContactResignModal,{title:(0,u.c)("Title").t(ny||(ny=(0,d.Z)(["Re-sign contact"]))),contacts:[a],onResign:()=>e(void 0),onClose:n,onNotResign:handleRemove,onError:handleRemove,children:(0,j.jsx)(Cn.Z,{className:"mb1",type:"error",children:(0,u.c)("Info").t(ry||(ry=(0,d.Z)(["The verification of "," has failed: the contact is not signed correctly.\n                                    This may be the result of a password reset.\n                                    You must re-sign the contact in order to send a message to "," or edit the contact."])),s,o)})}))})),updateRecipientIcon();if((null===(o=g.error)||void 0===o?void 0:o.type)===sy)return await new Promise(((e,n)=>{if(!t.ContactID)return n(new Error("Invalid contact id"));const a=[{contactID:t.ContactID,emailAddress:i,isInternal:m.isInternal,bePinnedPublicKey:m.sendKey}];r((0,j.jsx)(addresses_AskForKeyPinningModal,{contacts:a,onTrust:()=>e(void 0),onClose:n,onNotTrust:handleRemove,onError:handleRemove}))})),updateRecipientIcon();const b=getSendStatusIcon(g),y={isVerified:m.isContactSignatureVerified,creationTime:m.contactSignatureTimestamp};l((e=>useSendInfo_objectSpread(useSendInfo_objectSpread({},e),{},{[i]:{sendPreferences:g,sendIcon:b,loading:!1,emailValidation:p,emailAddressWarnings:m.emailAddressWarnings||[],contactSignatureInfo:y}})))};updateRecipientIcon()}),[i,s]),{handleRemove:handleRemove}})(s,a,l),E=useOnMailTo(),L=a.Address||"",P=null==s?void 0:s.mapSendInfo[L],Z=null==P?void 0:P.sendIcon,T=null==P?void 0:P.loading,k=(null==Z?void 0:Z.fill)===Jg.FAIL,{ContactID:z}=getContactEmail(f,a.Address)||{},_=!P||T||(null==P?void 0:P.emailValidation)&&!(null!=P&&null!==(t=P.emailAddressWarnings)&&void 0!==t&&t.length),confirmInput=()=>{var e,t;i(inputToRecipient((null===(e=x.current)||void 0===e||null===(t=e.textContent)||void 0===t?void 0:t.trim())||""))},handleDoubleClick=()=>{N(!0),setTimeout((()=>{var e;return null===(e=x.current)||void 0===e?void 0:e.focus()}))},handleClickContact=e=>{e.stopPropagation(),I(z?(0,j.jsx)(modals_ContactDetailsModal,{contactID:z,onMailTo:E}):(0,j.jsx)(modals_ContactModal,{properties:[{field:"email",value:a.Address||""},{field:"fn",value:a.Name||a.Address||""}]})),A()};(0,o.useEffect)((()=>{const e=recipientToInput(a);x.current&&(x.current.textContent=e)}),[]);const[,R]=hooks_useDragOver((e=>e.dataTransfer.types.includes(ve.$)),"move",{onDragOver:null==b?void 0:b(D)}),G=null!=P&&null!==(n=P.emailAddressWarnings)&&void 0!==n&&n[0]?null==P||null===(r=P.emailAddressWarnings)||void 0===r?void 0:r[0]:(0,u.c)("Info").t(uy||(uy=(0,d.Z)(["Right-click for options"])));return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",AddressesRecipientItem_objectSpread(AddressesRecipientItem_objectSpread(AddressesRecipientItem_objectSpread({className:(0,ht.dh)(["composer-addresses-item mt0-25 mb0-25 mr0-5 flex flex-nowrap flex-row max-w100 stop-propagation rounded",!_&&"invalid",k&&"color-danger invalid",p&&"composer-addresses-item-dragged",!M&&"cursor-grab"]),"data-dragover":"composer-addresses-item","data-testid":"composer-addresses-item",draggable:!M,onDragStart:m,onDragEnd:g,ref:D},R),y),{},{children:[(0,j.jsxs)("span",{className:"interactive flex flex-row flex-nowrap",children:[(Z||T)&&(0,j.jsx)("span",{className:"flex pl0-5 flex-item-noshrink",children:(0,j.jsx)(message_EncryptionStatusIcon,AddressesRecipientItem_objectSpread({loading:T},Z))}),(0,j.jsx)(ur.Z,{title:G,children:(0,j.jsx)("span",{className:(0,ht.dh)(["composer-addresses-item-label mtauto mbauto text-ellipsis pr0-5",Z||T||!_?"pl0-25":"pl0-5"]),contentEditable:M,onDoubleClick:handleDoubleClick,onBlur:()=>{N(!1),x.current&&x.current.textContent!==recipientToInput(a)&&confirmInput()},onKeyDown:e=>{"Enter"===e.key&&(confirmInput(),e.preventDefault(),N(!1))},onContextMenu:e=>{e.stopPropagation(),e.preventDefault(),S&&A(),w({top:e.clientY,left:e.clientX}),O()},ref:x,"data-testid":"composer-addresses-item-label"})})]}),(0,j.jsx)(ur.Z,{title:(0,u.c)("Action").t(py||(py=(0,d.Z)(["Remove"]))),children:(0,j.jsxs)("button",{type:"button",className:"composer-addresses-item-remove flex flex-item-noshrink p0-5 interactive",onClick:C,"data-testid":"remove-address-button-".concat(a.Address),children:[(0,j.jsx)(pr.Z,{name:"xmark",size:12,className:"mauto"}),(0,j.jsx)("span",{className:"sr-only",children:(0,u.c)("Action").t(my||(my=(0,d.Z)(["Remove"])))})]})})]})),(0,j.jsx)(contextMenu_ContextMenu,{isOpen:S,close:A,position:v,anchorRef:D,children:(0,j.jsxs)(dropdown_DropdownMenu,{children:[(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap flex-align-items-center",onClick:e=>{e.stopPropagation(),(0,mr.XD)(a.Address,e.currentTarget),h({text:(0,u.c)("Info").t(dy||(dy=(0,d.Z)(["Copied to clipboard"])))}),A()},children:[(0,j.jsx)(pr.Z,{name:"copy",className:"mr0-5 mt0-25"}),(0,j.jsx)("span",{className:"flex-item-fluid mtauto mbauto",children:(0,u.c)("Action").t(gy||(gy=(0,d.Z)(["Copy address"])))})]}),(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap flex-align-items-center",onClick:handleDoubleClick,children:[(0,j.jsx)(pr.Z,{name:"pen",className:"mr0-5 mt0-25"}),(0,j.jsx)("span",{className:"flex-item-fluid mtauto mbauto",children:(0,u.c)("Action").t(jy||(jy=(0,d.Z)(["Edit address"])))})]}),z?(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap flex-align-items-center",onClick:handleClickContact,children:[(0,j.jsx)(pr.Z,{name:"user",className:"mr0-5 mt0-25"}),(0,j.jsx)("span",{className:"flex-item-fluid mtauto mbauto",children:(0,u.c)("Action").t(by||(by=(0,d.Z)(["View contact details"])))})]}):(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap flex-align-items-center",onClick:handleClickContact,children:[(0,j.jsx)(pr.Z,{name:"user-plus",className:"mr0-5 mt0-25"}),(0,j.jsx)("span",{className:"flex-item-fluid mtauto mbauto",children:(0,u.c)("Action").t(yy||(yy=(0,d.Z)(["Create new contact"])))})]}),(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap flex-align-items-center border-top",liClassName:"dropdown-item--delete",onClick:C,children:[(0,j.jsx)(pr.Z,{name:"circle-xmark",className:"mr0-5 mt0-25"}),(0,j.jsx)("span",{className:"flex-item-fluid mtauto mbauto",children:(0,u.c)("Action").t(hy||(hy=(0,d.Z)(["Remove"])))})]})]})})]})};const Ny=["recipientGroup","contacts","messageSendInfo","onSubmit","onClose"];function AddressesGroupModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function AddressesGroupModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?AddressesGroupModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AddressesGroupModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var addresses_AddressesGroupModal=e=>{var t;let{recipientGroup:n,contacts:r,messageSendInfo:a,onSubmit:s,onClose:i}=e,c=(0,Sn.Z)(e,Ny);const[l]=(0,o.useState)((0,ht.D)("addresses-group-modal")),[p,m]=(0,o.useState)(n),g=!r.some((({Email:e})=>{var t,n;return!0===(null==a||null===(t=a.mapSendInfo)||void 0===t||null===(n=t[e])||void 0===n?void 0:n.loading)})),isChecked=e=>{var t;return!(null==p||null===(t=p.recipients)||void 0===t||!t.find((t=>e.Email===t.Address)))},handleChange=e=>t=>{const{checked:r}=t.target,a=p.recipients||[];let o;var s;r?o=[...a,{Name:e.Name,Address:e.Email,Group:null==n||null===(s=n.group)||void 0===s?void 0:s.Path}]:o=a.filter((t=>t.Address!==e.Email));m({group:null==p?void 0:p.group,recipients:o})},b=(0,u.c)("Info").t(fy||(fy=(0,d.Z)(["Members"]))),y="".concat(null==n||null===(t=n.group)||void 0===t?void 0:t.Name," (").concat(r.length," ").concat(b,")"),h=(0,j.jsx)(yr.Z,{type:"submit",disabled:!g,children:(0,u.c)("Action").t(My||(My=(0,d.Z)(["Save"])))});return(0,j.jsx)(On.Z,AddressesGroupModal_objectSpread(AddressesGroupModal_objectSpread({submit:h,title:y,onSubmit:()=>{s(p),i()},onClose:i},c),{},{children:(0,j.jsx)("ul",{className:"unstyled",children:r.map((e=>{const t="".concat(l,"-").concat(e.ID),n=null==a?void 0:a.mapSendInfo[e.Email],r=null==n?void 0:n.sendIcon,o=null==n?void 0:n.loading,s=(null==r?void 0:r.fill)===Jg.FAIL&&!o;return(0,j.jsxs)("li",{className:"mb0-5",children:[(0,j.jsx)(Nr,{id:t,checked:isChecked(e),onChange:handleChange(e)}),(0,j.jsx)("span",{className:"min-w1-4e inline-flex align-middle",children:(r||o)&&(0,j.jsx)(message_EncryptionStatusIcon,AddressesGroupModal_objectSpread({loading:o},r))}),(0,j.jsx)(gr.Z,{htmlFor:t,className:(0,ht.dh)(["pt0 pl0-5",s&&"color-danger"]),children:contactToInput(e)})]},e.ID)}))})}))};const getRecipientKey=(e,t=!1)=>"".concat(e.Address,"-").concat(e.Name,"-").concat(t),useRecipientLabel=()=>{const{contactsMap:e,contactGroupsMap:t,groupsWithContactsMap:n,recipientsLabelCache:r,groupsLabelCache:a}=useContactCache(),getRecipientLabel=(t,n=!1)=>{if(!t)return"";const a=getRecipientKey(t,n);return r.has(a)?r.get(a):(n?addresses_getRecipientLabel:getRecipientLabelDetailed)(t,e)},getGroupLabel=e=>{var t,r;if(!e)return"";const o=(e=>{var t;return"".concat(null===(t=e.group)||void 0===t?void 0:t.Path,"-").concat(e.recipients.map((e=>getRecipientKey(e))).join("-"))})(e);return a.has(o)?a.get(o):((e,t=0)=>{var n;const r=null==e?void 0:e.recipients.length,a=(0,u.c)("Info").t(Je||(Je=(0,d.Z)(["members"])));return"".concat(null==e||null===(n=e.group)||void 0===n?void 0:n.Name," (").concat(r,"/").concat(t," ").concat(a,")")})(e,null===(t=n[(null===(r=e.group)||void 0===r?void 0:r.ID)||""])||void 0===t?void 0:t.contacts.length)},getRecipientOrGroupLabel=({recipient:e,group:t},n=!1)=>e?getRecipientLabel(e,n):getGroupLabel(t);return{getRecipientLabel:getRecipientLabel,getGroupLabel:getGroupLabel,getRecipientOrGroupLabel:getRecipientOrGroupLabel,getRecipientsOrGroupsLabels:(e,t=!1)=>e.map((e=>getRecipientOrGroupLabel(e,t))),getRecipientsOrGroups:e=>((e,t)=>e.reduce(((e,n)=>{if(n.Group){const a=e.find((e=>{var t,r;return(null===(t=e.group)||void 0===t||null===(r=t.group)||void 0===r?void 0:r.Path)===n.Group}));if(a){var r;null===(r=a.group)||void 0===r||r.recipients.push(n)}else{const r=t[n.Group];r?e.push({group:{group:r,recipients:[n]}}):e.push({recipient:n})}}else e.push({recipient:n});return e}),[]))(e,t)}};var xy,vy,wy,Dy,Sy,Oy,Ay;function AddressesGroupItem_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function AddressesGroupItem_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?AddressesGroupItem_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AddressesGroupItem_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var addresses_AddressesGroupItem=({recipientGroup:e,messageSendInfo:t,onChange:n,onRemove:r,dragged:a=!1,onDragStart:s,onDragEnd:i,onDragOver:c})=>{var l,p,m;const{createModal:g,getModal:b,hideModal:y,removeModal:h}=(0,In.Z)(),{createNotification:I}=(0,hn.Z)(),{groupsWithContactsMap:f}=useContactCache(),{getGroupLabel:M}=useRecipientLabel(),[N,x]=(0,o.useState)(),[v,w]=(0,o.useState)(),{anchorRef:D,isOpen:S,open:O,close:A}=(0,No.Z)(),C=(null===(l=f[(null==e||null===(p=e.group)||void 0===p?void 0:p.ID)||""])||void 0===l?void 0:l.contacts)||[],E=M(e),{handleRemove:L}=useUpdateGroupSendInfo(t,C,r),handleOpenGroupModal=()=>{x(g(void 0))},[,P]=hooks_useDragOver((e=>e.dataTransfer.types.includes(ve.$)),"move",{onDragOver:c(D)});return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",AddressesGroupItem_objectSpread(AddressesGroupItem_objectSpread({className:(0,ht.dh)(["composer-addresses-item mt0-25 mb0-25 mr0-5 flex flex-nowrap flex-row max-w100 stop-propagation cursor-grab rounded",a&&"composer-addresses-item-dragged"]),draggable:!0,onDragStart:s,onDragEnd:i,ref:D},P),{},{children:[(0,j.jsxs)("span",{className:"interactive flex flex-row flex-nowrap",children:[(0,j.jsx)("span",{className:"inline-flex composer-addresses-item-icon pl0-5 ml0-1 pr0-25 no-pointer-events-children h100",children:(0,j.jsx)(pr.Z,{name:"user-group",size:12,color:null==e||null===(m=e.group)||void 0===m?void 0:m.Color,className:"mauto"})}),(0,j.jsx)(ur.Z,{title:(0,u.c)("Info").t(vy||(vy=(0,d.Z)(["Click to view group details"]))),children:(0,j.jsx)("span",{className:"composer-addresses-item-label mtauto mbauto pl0-25 text-ellipsis pr0-5",onClick:handleOpenGroupModal,onContextMenu:e=>{e.stopPropagation(),e.preventDefault(),S&&A(),w({top:e.clientY,left:e.clientX}),O()},children:E})})]}),(0,j.jsx)(ur.Z,{title:(0,u.c)("Action").t(wy||(wy=(0,d.Z)(["Remove"]))),children:(0,j.jsxs)("button",{type:"button",className:"composer-addresses-item-remove inline-flex p0-5 no-pointer-events-children h100 interactive",onClick:L,children:[(0,j.jsx)(pr.Z,{name:"xmark",size:12,className:"mauto"}),(0,j.jsx)("span",{className:"sr-only",children:(0,u.c)("Action").t(Dy||(Dy=(0,d.Z)(["Remove"])))})]})})]})),N&&(0,j.jsx)(addresses_AddressesGroupModal,AddressesGroupItem_objectSpread({recipientGroup:e,contacts:C,messageSendInfo:t,onSubmit:n,onClose:()=>{void 0!==N&&y(N)},onExit:()=>{void 0!==N&&(h(N),x(void 0))}},b(N))),(0,j.jsx)(contextMenu_ContextMenu,{isOpen:S,close:A,position:v,anchorRef:D,children:(0,j.jsxs)(dropdown_DropdownMenu,{children:[(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap",onClick:t=>{t.stopPropagation(),(0,mr.XD)(e.recipients.map((e=>e.Address)).join(";"),t.currentTarget),I({text:(0,u.c)("Info").t(xy||(xy=(0,d.Z)(["Copied to clipboard"])))}),A()},children:[(0,j.jsx)(pr.Z,{name:"copy",className:"mr0-5 mt0-25"}),(0,j.jsx)("span",{className:"flex-item-fluid mtauto mbauto",children:(0,u.c)("Action").t(Sy||(Sy=(0,d.Z)(["Copy addresses"])))})]}),(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap",onClick:handleOpenGroupModal,children:[(0,j.jsx)(pr.Z,{name:"user",className:"mr0-5 mt0-25"}),(0,j.jsx)("span",{className:"flex-item-fluid mtauto mbauto",children:(0,u.c)("Action").t(Oy||(Oy=(0,d.Z)(["View recipients"])))})]}),(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap",liClassName:"dropdown-item--delete",onClick:L,children:[(0,j.jsx)(pr.Z,{name:"circle-xmark",className:"mr0-5 mt0-25"}),(0,j.jsx)("span",{className:"flex-item-fluid mtauto mbauto",children:(0,u.c)("Action").t(Ay||(Ay=(0,d.Z)(["Remove"])))})]})]})})]})};function useAddressesInputDrag_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function useAddressesInputDrag_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?useAddressesInputDrag_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):useAddressesInputDrag_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Cy="ADDRESS_DRAG";var Ey;!function(e){e.Success="success",e.None="none"}(Ey||(Ey={}));var Ly,Py;function AddressesInput_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function AddressesInput_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?AddressesInput_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AddressesInput_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Zy,Ty,ky,zy,_y,Ry,Gy,Yy,Uy,Fy,Ky,By,Wy,Vy,addresses_AddressesInput=({id:e,recipients:t=[],messageSendInfo:n,onChange:r,inputFocusRef:a,placeholder:s,expanded:i=!1,dataTestId:l,addContactButton:p,addContactAction:m,classname:g,hasLighterFieldDesign:b=!1})=>{const{contactsMap:y,groupsWithContactsMap:h}=useContactCache(),{getRecipientsOrGroups:I}=useRecipientLabel(),[f]=wr(),[M]=useContactGroups(),{createNotification:N}=(0,hn.Z)(),x=(0,o.useRef)(null),v=(0,o.useRef)(null),[w,D]=(0,o.useState)((()=>I(t)));(0,o.useEffect)((()=>D(I(t))),[t]),(0,o.useEffect)((()=>{var e;a&&(a.current=(null===(e=x.current)||void 0===e?void 0:e.focus.bind(x.current))||c.ZT)}),[]);const isNonEmptyRecipient=({Address:e})=>e.trim(),showDuplicateNotif=e=>{const t=e.length>1?e.join(", "):e[0],n=(0,u.c)("Error").ngettext((0,u.msgid)(Ly||(Ly=(0,d.Z)(["Removed duplicate recipient: ",""])),t),"Removed duplicate recipients: ".concat(t),e.length);N({text:n,type:"warning"})},handleRecipientRemove=e=>()=>{var n;r(t.filter((t=>t!==e))),null===(n=x.current)||void 0===n||n.focus()},handleGroupChange=e=>n=>{var a;r([...recipientsWithoutGroup(t,null==e||null===(a=e.group)||void 0===a?void 0:a.Path),...n.recipients])},handleGroupRemove=e=>()=>{var n,a;r(recipientsWithoutGroup(t,null==e||null===(n=e.group)||void 0===n?void 0:n.Path)),null===(a=x.current)||void 0===a||a.focus()},{draggedRecipient:S,placeholderPosition:O,placeholderSize:A,containerDragHandlers:C,itemDragHandlers:E}=((e,t,n)=>{const r=(0,Ln.Z)(),[a]=(0,o.useState)((0,ht.D)("drag-address")),[s,i]=(0,o.useState)(),[c,l]=(0,o.useState)(),[d,u]=(0,o.useState)(),getCache=()=>r.get(Cy),setCache=e=>r.set(Cy,e),handleContainerDragLeave=()=>{l(void 0)},[,p]=hooks_useDragOver((e=>e.dataTransfer.types.includes(ve.$)),"move",{onDragEnter:()=>{var e;const t=null===(e=getCache())||void 0===e?void 0:e.dragInfo;l(0),u(t.size),setCache({dragInfo:useAddressesInputDrag_objectSpread(useAddressesInputDrag_objectSpread({},t),{},{inputID:a})})},onDragLeave:handleContainerDragLeave,onDrop:()=>{var r;const a=(null===(r=getCache())||void 0===r?void 0:r.dragInfo).recipient,o=e.filter((e=>!matchRecipientOrGroup(e,a)));o.splice(c,0,a),setCache({dragStatus:Ey.Success}),t(o),n(recipientOrGroupToRecipients(o)),i(void 0),l(void 0)}}),handleItemDragStart=t=>n=>{n.dataTransfer.setData(ve.$,"true"),i(t),l(e.findIndex((e=>e===t)));const r=n.target;r.style.top="".concat(r.offsetTop,"px"),r.style.left="".concat(r.offsetLeft,"px"),setTimeout((()=>{r.style.top="-100000px",r.style.left="-100000px"}));const o=r.getBoundingClientRect(),s={width:o.width,height:o.height};u(s),setCache({dragInfo:{inputID:a,recipient:t,size:s}})},handleItemDragEndParsed=r=>{if(r===Ey.Success&&void 0!==s&&void 0===c){const r=e.filter((e=>!matchRecipientOrGroup(e,s)));t(r),n(recipientOrGroupToRecipients(r))}i(void 0),l(void 0)},handleItemDragEnd=e=>{const t="move"===e.dataTransfer.dropEffect?Ey.Success:Ey.None;handleItemDragEndParsed(t),setCache({dragStatus:t})},m=(0,mn.ZP)(((t,n,r)=>{if(!n.current)return;const a=e.findIndex((e=>e===t)),o=n.current.getBoundingClientRect(),s=o.left+(o.right-o.left)/2;r.clientX<s&&c!==a&&l(a),r.clientX>=s&&c!==a+1&&l(a+1)}),{throttle:100}),handleItemDragOver=e=>t=>n=>m(e,t,n),g=(0,mn.ZP)((e=>{if(e===Cy&&void 0!==c){const e=getCache();null!=e&&e.dragInfo&&e.dragInfo.inputID!==a&&handleContainerDragLeave(),null!=e&&e.dragStatus&&handleItemDragEndParsed(e.dragStatus)}}));return(0,o.useEffect)((()=>r.subscribe(g)),[r]),{draggedRecipient:s,placeholderPosition:c,placeholderSize:d,containerDragHandlers:p,itemDragHandlers:e=>({onDragStart:handleItemDragStart(e),onDragEnd:handleItemDragEnd,onDragOver:handleItemDragOver(e)})}})(w,D,r),L=(0,j.jsx)("div",{className:"composer-addresses-item-drag-placeholder mt0-25 mb0-25 mr0-5 max-w100 no-pointer-events h-custom w-custom",style:{"--width-custom":"".concat(null==A?void 0:A.width,"px"),"--height-custom":"".concat(null==A?void 0:A.height,"px")}});return(0,j.jsx)("div",{className:(0,ht.dh)(["composer-addresses-autocomplete w100 flex-item-fluid relative",g]),ref:v,children:(0,j.jsxs)("div",AddressesInput_objectSpread(AddressesInput_objectSpread({className:(0,ht.dh)(["composer-addresses-container flex-no-min-children flex-item-fluid",!i&&"composer-addresses-container-closed field",b&&"field-lighter"]),onClick:e=>{var t;e.target.closest(".stop-propagation")?e.stopPropagation():null===(t=x.current)||void 0===t||t.focus()}},C),{},{children:[(0,j.jsxs)("div",{className:"flex-item-fluid flex max-w100 max-h100 relative",children:[w.map(((e,a)=>{return(0,j.jsxs)(o.Fragment,{children:[a===O&&L,e.recipient?(0,j.jsx)(addresses_AddressesRecipientItem,AddressesInput_objectSpread({recipient:e.recipient,messageSendInfo:n,onChange:(s=e.recipient,e=>isNonEmptyRecipient(e)?t.some((({Address:t})=>t===e.Address))?(showDuplicateNotif([e.Address]),handleRecipientRemove(s)()):void r(t.map((t=>t===s?e:t))):handleRecipientRemove(s)()),onRemove:handleRecipientRemove(e.recipient),dragged:S===e},E(e))):(0,j.jsx)(addresses_AddressesGroupItem,AddressesInput_objectSpread({recipientGroup:e.group,messageSendInfo:n,onChange:handleGroupChange(e.group),onRemove:handleGroupRemove(e.group),dragged:S===e},E(e)))]},getRecipientOrGroupKey(e));var s})),O===w.length&&L,(0,j.jsx)("div",{className:"flex-item-fluid flex flex-align-items-center composer-addresses-input-container",children:(0,j.jsx)(iu,{id:e,anchorRef:v,ref:x,contactEmails:f,contactGroups:M,contactEmailsMap:y,groupsWithContactsMap:h,recipients:t,onAddRecipients:e=>{const n=e.filter(isNonEmptyRecipient),a=[],o=n.reduce(((e,n)=>t.some((({Address:e})=>e===n.Address))?(a.push(n),e):[...e,n]),[]);a.length&&showDuplicateNotif(a.map((({Address:e})=>e))),o.length&&r([...t,...o])},onKeyDown:e=>{if("Backspace"===e.key&&0===e.currentTarget.value.length&&w.length>0){const e=w[w.length-1];e.recipient?handleRecipientRemove(e.recipient)():handleGroupRemove(e.group)()}},placeholder:t.length>0?"":s,hasEmailPasting:!0,hasAddOnBlur:!0,"data-testid":l})})]}),p?(0,j.jsx)("span",{className:"flex-item-noshrink flex-align-self-start sticky-top",children:(0,j.jsx)(ur.Z,{title:(0,u.c)("Action").t(Py||(Py=(0,d.Z)(["Insert contacts"]))),children:(0,j.jsx)(Ea.Z,{type:"button",onClick:m,color:"weak",shape:"ghost",icon:!0,"data-testid":"composer:to-button",children:(0,j.jsx)(pr.Z,{name:"user-plus",size:16,alt:p})})})}):null]}))})};var addresses_AddressesEditor=({message:e,messageSendInfo:t,onChange:n,expanded:r,toggleExpanded:a,inputFocusRefs:s,handleContactModal:i})=>{var c,l,p;const[m]=(0,o.useState)((0,ht.D)("composer")),handleChange=e=>t=>{n({data:{[e]:t}})};return(0,j.jsxs)("div",{className:"flex flex-column flex-nowrap flex-align-items-start mt0",children:[(0,j.jsxs)("div",{className:"flex flex-row w100 relative on-mobile-flex-column",children:[(0,j.jsx)(gr.Z,{htmlFor:"to-".concat(m),className:"composer-meta-label text-semibold",children:(0,u.c)("Title").t(Zy||(Zy=(0,d.Z)(["To"])))}),(0,j.jsxs)("div",{className:(0,ht.dh)(["flex flex-nowrap field flex-align-items-center flex-nowrap flex-item-fluid composer-to-editor field-lighter",r?"composer-editor-expanded":"composer-editor-collapsed"]),children:[(0,j.jsx)(addresses_AddressesInput,{id:"to-".concat(m),recipients:null===(c=e.data)||void 0===c?void 0:c.ToList,messageSendInfo:t,onChange:handleChange("ToList"),inputFocusRef:s.to,placeholder:(0,u.c)("Placeholder").t(Ty||(Ty=(0,d.Z)(["Email address"]))),expanded:r,dataTestId:"composer:to",classname:"composer-editor-to"}),(0,j.jsxs)("span",{className:"flex flex-nowrap flex-item-noshrink on-mobile-max-w33 on-tiny-mobile-max-w50 flex-align-self-start pt0-5 sticky-top",children:[(0,j.jsx)(Ea.Z,{color:"norm",shape:"ghost",size:"small",icon:!0,title:(0,u.c)("Action").t(ky||(ky=(0,d.Z)(["Carbon Copy, Blind Carbon Copy"]))),onClick:a,"data-testid":"composer:cc-bcc-button",className:(0,ht.dh)(["ml1 composer-addresses-ccbcc text-left text-cut text-no-decoration text-strong relative rounded-xl",r&&"is-active"]),children:(0,u.c)("Action").t(zy||(zy=(0,d.Z)(["CC BCC"])))}),(0,j.jsx)(ur.Z,{title:(0,u.c)("Action").t(_y||(_y=(0,d.Z)(["Insert contacts"]))),children:(0,j.jsx)(Ea.Z,{type:"button",onClick:i("ToList"),color:"weak",className:"pt0-25 pb0-25 flex-item-noshrink",shape:"ghost",icon:!0,"data-testid":"composer:to-button",children:(0,j.jsx)(pr.Z,{name:"user-plus",size:16,alt:(0,u.c)("Title").t(Ry||(Ry=(0,d.Z)(["To"])))})})})]})]})]}),r&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"flex flex-row on-mobile-flex-column w100 mb0",children:[(0,j.jsx)(gr.Z,{htmlFor:"cc-".concat(m),className:"composer-meta-label text-semibold",title:(0,u.c)("Label").t(Gy||(Gy=(0,d.Z)(["Carbon Copy"]))),children:(0,u.c)("Title").t(Yy||(Yy=(0,d.Z)(["CC"])))}),(0,j.jsx)(addresses_AddressesInput,{id:"cc-".concat(m),recipients:null===(l=e.data)||void 0===l?void 0:l.CCList,messageSendInfo:t,onChange:handleChange("CCList"),placeholder:(0,u.c)("Placeholder").t(Uy||(Uy=(0,d.Z)(["Email address"]))),dataTestId:"composer:to-cc",inputFocusRef:s.cc,addContactButton:(0,u.c)("Title").t(Fy||(Fy=(0,d.Z)(["CC"]))),addContactAction:i("CCList"),classname:"composer-editor-cc",hasLighterFieldDesign:!0})]}),(0,j.jsxs)("div",{className:"flex flex-row on-mobile-flex-column w100",children:[(0,j.jsx)(gr.Z,{htmlFor:"bcc-".concat(m),className:"composer-meta-label text-semibold",title:(0,u.c)("Label").t(Ky||(Ky=(0,d.Z)(["Blind Carbon Copy"]))),children:(0,u.c)("Title").t(By||(By=(0,d.Z)(["BCC"])))}),(0,j.jsx)(addresses_AddressesInput,{id:"bcc-".concat(m),recipients:null===(p=e.data)||void 0===p?void 0:p.BCCList,messageSendInfo:t,onChange:handleChange("BCCList"),placeholder:(0,u.c)("Placeholder").t(Wy||(Wy=(0,d.Z)(["Email address"]))),dataTestId:"composer:to-bcc",addContactButton:(0,u.c)("Title").t(Vy||(Vy=(0,d.Z)(["BCC"]))),addContactAction:i("BCCList"),classname:"composer-editor-bcc",hasLighterFieldDesign:!0})]})]})]})};const Qy=["ToList","CCList","BCCList"];var Hy,Xy,Jy,qy,$y,eh,th,nh,rh,ah;function AddressesSummary_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function AddressesSummary_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?AddressesSummary_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AddressesSummary_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const AddressesSummary=({message:e,disabled:t,mapSendInfo:n,toggleExpanded:r,onFocus:a,handleContactModal:s})=>{const{getRecipientsOrGroups:i,getRecipientsOrGroupsLabels:c,getRecipientOrGroupLabel:l}=useRecipientLabel(),p=c(i(getRecipients(e))).join(", "),handleFocuButton=e=>{e.stopPropagation()};return(0,j.jsxs)("div",{className:"flex flex-row flex-nowrap on-mobile-flex-column flex-align-items-center relative mt0 mb0",children:[(0,j.jsx)(gr.Z,{className:(0,ht.dh)(["composer-meta-label pr0-5 pt0 text-semibold",t&&"placeholder"]),children:(0,u.c)("Title").t(Hy||(Hy=(0,d.Z)(["To"])))}),(0,j.jsxs)("div",{className:(0,ht.dh)(["field flex composer-addresses-fakefield composer-meta-fakefield-summary field-lighter flex-row flex-align-items-center flex-nowrap flex-item-fluid w100",t&&"disabled"]),onClick:a,onFocus:a,tabIndex:0,role:"button","data-testid":"composer:address",children:[(0,j.jsxs)("span",{className:"text-ellipsis flex-item-fluid composer-addresses-fakefield-inner pr1",title:p,children:[0===getRecipients(e).length?(0,j.jsx)("span",{className:"placeholder",children:(0,u.c)("Placeholder").t(Xy||(Xy=(0,d.Z)(["Email address"])))}):null,Qy.map((r=>{const a=(null==e?void 0:e[r])||[];if(0===a.length)return null;const s=i(a);return(0,j.jsxs)(o.Fragment,{children:["CCList"===r&&(0,j.jsxs)("span",{className:"mr0-5 color-primary",title:(0,u.c)("Title").t(Jy||(Jy=(0,d.Z)(["Carbon Copy"]))),children:[(0,u.c)("Title").t(qy||(qy=(0,d.Z)(["CC"]))),":"]}),"BCCList"===r&&(0,j.jsxs)("span",{className:"mr0-5 inline-flex color-primary",title:(0,u.c)("Title").t($y||($y=(0,d.Z)(["Blind Carbon Copy"]))),children:[(0,u.c)("Title").t(eh||(eh=(0,d.Z)(["BCC"]))),":"]}),s.map(((e,r)=>{var a;const o=null===(a=e.recipient)||void 0===a?void 0:a.Address,i=o?null==n?void 0:n[o]:void 0,c=null==i?void 0:i.sendIcon,d=(null==c?void 0:c.fill)===Jg.FAIL;return(0,j.jsxs)("span",{className:(0,ht.dh)(["mr0-5 align-top",d&&"color-danger"]),children:[(0,j.jsxs)("span",{children:[(0,j.jsx)("span",{className:"composer-addresses-addressIcon relative mr0-25",children:c&&(0,j.jsx)(message_EncryptionStatusIcon,AddressesSummary_objectSpread(AddressesSummary_objectSpread({},c),{},{disabled:t}))}),(0,j.jsx)("span",{className:"max-w100 text-ellipsis",children:l(e)})]}),r!==s.length-1&&","]},r)}))]},r)}))]}),(0,j.jsxs)("span",{className:"flex flex-nowrap flex-item-noshrink on-mobile-max-w33 on-tiny-mobile-max-w50",children:[(0,j.jsx)(Ea.Z,{color:"norm",shape:"ghost",size:"small",icon:!0,title:(0,u.c)("Action").t(th||(th=(0,d.Z)(["Carbon Copy, Blind Carbon Copy"]))),onClick:r,onFocus:handleFocuButton,disabled:t,className:"composer-addresses-ccbcc text-left text-ellipsis composer-addresses-ccbcc-fakefield text-no-decoration flex-item-noshrink text-strong relative rounded-xl",children:(0,u.c)("Action").t(nh||(nh=(0,d.Z)(["CC BCC"])))}),(0,j.jsx)(ur.Z,{title:(0,u.c)("Action").t(rh||(rh=(0,d.Z)(["Insert contacts"]))),children:(0,j.jsx)(Ea.Z,{type:"button",onClick:s("ToList"),onFocus:handleFocuButton,color:"weak",className:"pt0-25 pb0-25 flex-item-noshrink",shape:"ghost",icon:!0,"data-testid":"composer:to-button",children:(0,j.jsx)(pr.Z,{name:"user-plus",size:16,alt:(0,u.c)("Title").t(ah||(ah=(0,d.Z)(["To"])))})})})]})]})]})};var oh=(0,o.memo)(AddressesSummary);var addresses_Addresses=({message:e,messageSendInfo:t,disabled:n,onChange:r,addressesBlurRef:a,addressesFocusRef:s})=>{var i,l;const d={to:(0,o.useRef)(c.ZT),cc:(0,o.useRef)(c.ZT)},{createModal:u}=(0,In.Z)(),{state:p,set:m}=(0,lr.Z)(!1),{state:g,set:b}=(0,lr.Z)(!1);(0,o.useEffect)((()=>{a.current=()=>m(!1),s.current=()=>{var t,n;(null!==(t=e.data)&&void 0!==t&&t.CCList.length||null!==(n=e.data)&&void 0!==n&&n.BCCList.length)&&b(!0),m(!0),setTimeout((()=>d.to.current()),100)}}),[null===(i=e.data)||void 0===i?void 0:i.CCList,null===(l=e.data)||void 0===l?void 0:l.BCCList]);const y=(0,o.useCallback)((()=>{if(n)return!1;m(!0),b(!1),setTimeout((()=>s.current()),100)}),[n]),h=(0,o.useCallback)((e=>{if(e.stopPropagation(),n)return!1;p&&g?(b(!1),setTimeout((()=>d.to.current()),100)):(m(!0),b(!0),setTimeout((()=>d.cc.current()),100))}),[n,g,p]),handleContactModal=t=>async()=>{const n=await new Promise(((n,r)=>{var a;u((0,j.jsx)(modals_ContactListModal,{onSubmit:n,onClose:r,inputValue:null===(a=e.data)||void 0===a?void 0:a[t]}))})),a=(e.data&&e.data[t]?e.data[t]:[]).filter((e=>!e.ContactID));r({data:{[t]:[...a,...n]}})};return p?(0,j.jsx)(addresses_AddressesEditor,{message:e,messageSendInfo:t,onChange:r,expanded:g,toggleExpanded:h,inputFocusRefs:d,handleContactModal:handleContactModal}):(0,j.jsx)(oh,{message:e.data,disabled:n,mapSendInfo:t.mapSendInfo,onFocus:y,toggleExpanded:h,handleContactModal:handleContactModal})},sh=n(33389);const ih=["children"];var selectTwo_useSelect=({value:e,options:t,isOpen:n,onOpen:r,onClose:a,onChange:s,onValue:i})=>{const[c,l]=function useControlled(e,t){const n=void 0!==e,[r,a]=(0,o.useState)(t),s=(0,o.useCallback)((e=>{n||a(e)}),[]);return[n?e:r,s]}(n,!1),[d,u]=(0,o.useState)(null),p=(0,o.useMemo)((()=>{const n=t.findIndex((t=>t===e));return-1!==n?n:null}),[t,e]);return{open:()=>{null==r||r(),l(!0),u(p||0)},close:()=>{null==a||a(),l(!1)},isOpen:c||!1,focusedIndex:d,setFocusedIndex:u,focusPreviousIndex:()=>{null!==d&&0!==d&&u(d-1)},focusNextIndex:()=>{null!==d&&d!==t.length-1&&u(d+1)},handleChange:e=>{null==s||s(e),null==i||i(e.value)},selectedIndex:p}};const ch=(0,o.createContext)({}),SelectProvider=e=>{let{children:t}=e,n=(0,Sn.Z)(e,ih);return(0,j.jsx)(ch.Provider,{value:n,children:t})},lh=["children","disableFocusOnActive","selected","onChange","onKeyDown"];function SelectOptions_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SelectOptions_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SelectOptions_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SelectOptions_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var selectTwo_SelectOptions=e=>{let{children:t,disableFocusOnActive:n=!1,selected:r,onChange:a,onKeyDown:s}=e,i=(0,Sn.Z)(e,lh);const{focusedIndex:c,focusPreviousIndex:l,focusNextIndex:d,close:u}=(0,o.useContext)(ch),handleChildChange=e=>t=>{var n;n={value:t,selectedIndex:e},null==a||a(n)},p=o.Children.toArray(t).reduce(((e,t,n)=>(0,o.isValidElement)(t)&&t.type===option_Option?[...e,n]:e),[]),m=o.Children.map(t,((e,t)=>{const a=p.indexOf(t);return p.includes(t)?(0,o.cloneElement)(e,{disableFocusOnActive:n,selected:r===a,active:c===a,onChange:handleChildChange(a)}):e}));return(0,j.jsx)("ul",SelectOptions_objectSpread(SelectOptions_objectSpread({className:"unstyled m0 p0",onKeyDown:e=>{switch(null==s||s(e),e.key){case"ArrowUp":e.preventDefault(),l();break;case"ArrowDown":e.preventDefault(),d();break;case"Escape":e.preventDefault(),u()}},"data-testid":"select-list"},i),{},{children:m}))},dh=n(10368);const uh=["className","value","loading","isOpen","onOpen","children"];function SelectButton_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SelectButton_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SelectButton_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SelectButton_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ph=(0,o.forwardRef)(((e,t)=>{let{className:n,value:r,loading:a,isOpen:o,onOpen:s,children:i}=e,c=(0,Sn.Z)(e,uh);return(0,j.jsxs)("button",SelectButton_objectSpread(SelectButton_objectSpread({ref:t,type:"button",onKeyDown:e=>{switch(e.key){case" ":null==s||s()}},"aria-expanded":o,"aria-busy":a,"aria-live":"assertive","aria-atomic":"true",className:(0,ht.dh)(["no-outline select field w100 flex flex-justify-space-between flex-align-items-center flex-nowrap",n])},c),{},{children:[(0,j.jsx)("span",{className:"flex-item-fluid text-ellipsis text-left",children:i}),a?(0,j.jsx)(_a.Z,{className:"flex-item-noshrink ml0-5"}):(0,j.jsx)(dh.Z,{className:"flex-item-noshrink ml0-5",isOpen:o})]}))}));const mh=["children","value","placeholder","isOpen","onClose","onOpen","onChange","onValue","clearSearchAfter","getSearchableValue","noMaxWidth","originalPlacement","loading"];function SelectTwo_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SelectTwo_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SelectTwo_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SelectTwo_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gh,selectTwo_SelectTwo=e=>{var t,n,r;let{children:a,value:s,placeholder:i,isOpen:c,onClose:l,onOpen:d,onChange:u,onValue:p,clearSearchAfter:m=500,getSearchableValue:g,noMaxWidth:b=!0,originalPlacement:y,loading:h}=e,I=(0,Sn.Z)(e,mh);const f=(0,o.useRef)(null),[M,N]=(0,o.useState)(""),x=(0,o.useRef)(void 0),v=a.filter((e=>e.type===option_Option)),w=v.map((e=>e.props.value)),D=selectTwo_useSelect({value:s,options:w,onChange:u,onValue:p,onOpen:d,onClose:l}),{isOpen:S,selectedIndex:O,open:A,close:C,setFocusedIndex:E,handleChange:L}=D,[P,Z]=(0,o.useMemo)((()=>[a.every((e=>"string"==typeof e.props.children)),a.every((e=>Boolean(e.props.title)))]),[a]),T=P||Z,k=T||Boolean(g),z=(0,o.useMemo)((()=>T?P?a.map((e=>e.props.children)):a.map((e=>e.props.title)):g?w.map(g):[]),[P,a]);(0,o.useEffect)((()=>{if(!M||!k)return;window.clearTimeout(x.current),x.current=window.setTimeout((()=>{N("")}),m);const e=z.findIndex((e=>e.startsWith(M)));-1!==e&&E(e)}),[M]);const _=O||0===O?v[O]:null,R=(null==_||null===(t=_.props)||void 0===t?void 0:t.children)||(null==_||null===(n=_.props)||void 0===n?void 0:n.title)||i,G=null==_||null===(r=_.props)||void 0===r?void 0:r.title;return(0,j.jsxs)(SelectProvider,SelectTwo_objectSpread(SelectTwo_objectSpread({},D),{},{children:[(0,j.jsx)(ph,SelectTwo_objectSpread(SelectTwo_objectSpread({isOpen:S,onOpen:A,onClick:()=>{S?C():A()},"aria-label":G,ref:f},I),{},{children:R})),(0,j.jsx)(Mo.Z,{isOpen:S,anchorRef:f,onClose:C,offset:4,noCaret:!0,noMaxWidth:b,originalPlacement:y,sameAnchorWidth:!0,disableDefaultArrowNavigation:!0,children:(0,j.jsx)(selectTwo_SelectOptions,{selected:O,onKeyDown:e=>{var t;if("Escape"===e.key)return C(),void(null===(t=f.current)||void 0===t||t.focus());if(/^[a-z0-9]+$/i.test(e.key)&&k&&1===e.key.length){const{key:t}=e;N((e=>e+t))}},onChange:L,children:a})})]}))};var jh,bh,yh,hh,Ih,fh,Mh,addresses_SelectSender=({message:e,disabled:t,onChange:n,onChangeContent:r,addressesBlurRef:a})=>{var s,i;const[c={}]=useMailSettings(),[l=[]]=(0,yn.ZP)(),[p]=(0,bn.ZP)(),[m]=(0,o.useState)((0,ht.D)("select-sender")),g=getFromAddresses(l,e.originalTo).map((e=>(0,j.jsx)(option_Option,{value:e.Email,title:e.Email,children:(0,j.jsxs)("span",{className:"inline-flex flex-nowrap flex-row flex-align-items-center max-w100",children:[(0,j.jsx)("span",{className:"text-ellipsis",children:e.Email}),(0,j.jsx)(pr.Z,{name:"angle-down",className:"select--inline-caret-option flex-item-noshrink ml0-5"})]})},e.Email)));p.hasPaidMail&&g.push((0,j.jsx)("div",{className:"pl1 pt0-5 pb0-5 border-top",children:(0,j.jsx)(sh.Z,{path:"/identity-addresses#addresses",app:M.ei.PROTONMAIL,children:(0,u.c)("Label").t(gh||(gh=(0,d.Z)(["Manage my addresses"])))})},"create-new-adress"));return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(selectTwo_SelectTwo,{disabled:t,className:"field-lighter select--inline-caret composer-meta-select-sender",id:"sender-".concat(m),value:null===(s=e.data)||void 0===s||null===(i=s.Sender)||void 0===i?void 0:i.Address,onChange:t=>{var a;const o=t.value,s=getAddressFromEmail(l,null===(a=e.data)||void 0===a?void 0:a.Sender.Address),i=getAddressFromEmail(l,o),d=i?{Name:i.DisplayName,Address:o}:void 0;n({data:{AddressID:null==i?void 0:i.ID,Sender:d}}),r(((e,t,n,r)=>{if(V(e.data)){const a=templateBuilder(n,t,!1,!0),o=templateBuilder(r,t,!1,!0),s=getPlainTextContent(e),i=exportPlainText(a).trim(),c=exportPlainText(o).trim();return s.replace(i,c)}const a=e.document,o=[...a.querySelectorAll(".".concat(en))].find((e=>null===e.closest(".".concat(Jt))));if(o){const e=getProtonSignature(t),{userClass:n,containerClass:a}=getClassNamesSignature(r,e);o.innerHTML=replaceLineBreaks(r),o.className="".concat(en," ").concat(n);const s=null==o?void 0:o.closest(".".concat($t));s&&null!==s&&(s.className="".concat($t," ").concat(a))}return a.innerHTML})(e,c,(null==s?void 0:s.Signature)||"",(null==i?void 0:i.Signature)||""),!0)},onFocus:a.current,noMaxWidth:!1,originalPlacement:"bottom-left","data-testid":"composer:from",children:g})})},Nh=n(51991),xh=n(90298),vh=n(91821);const useExpiration=e=>{var t;const n=e.expiresIn?(0,xh.Z)(new Date,e.expiresIn).getTime()/1e3:0,r=(null===(t=e.data)||void 0===t?void 0:t.ExpirationTime)||n||0,[a,s]=(0,o.useState)(""),i=(0,o.useMemo)((()=>(0,vh.Z)(r)),[r]),c=(0,mn.ZP)((()=>{if(!r)return void s("");const e=new Date;if((0,Bc.Z)(e,i))s((0,u.c)("Info").t(Ih||(Ih=(0,d.Z)(["This message is expired!"]))));else if(n>0){const{dateString:e,formattedTime:t}=formatDateToHuman(1e3*n);s((0,u.c)("Info").t(fh||(fh=(0,d.Z)(["This message will expire "," at ",""])),e,t))}else{const t=((e,t)=>{let n=(0,Nh.Z)(t,e);const r=Math.floor(n/86400);n-=86400*r;const a=Math.floor(n/3600)%24;n-=3600*a;const o=Math.floor(n/60)%60;n-=60*o;const s=n%60;return[{diff:r,text:(0,u.c)("Time unit").ngettext((0,u.msgid)(jh||(jh=(0,d.Z)([""," day"])),r),"".concat(r," days"),r)},{diff:a,text:(0,u.c)("Time unit").ngettext((0,u.msgid)(bh||(bh=(0,d.Z)([""," hour"])),a),"".concat(a," hours"),a)},{diff:o,text:(0,u.c)("Time unit").ngettext((0,u.msgid)(yh||(yh=(0,d.Z)([""," minute"])),o),"".concat(o," minutes"),o)},{diff:s,text:(0,u.c)("Time unit").ngettext((0,u.msgid)(hh||(hh=(0,d.Z)([""," second"])),s),"".concat(s," seconds"),s)}].filter((({diff:e})=>0!==e)).map((({text:e})=>e)).join(", ")})(e,i);s((0,u.c)("Info").t(Mh||(Mh=(0,d.Z)(["This message will expire in ",""])),t))}}));return(0,o.useEffect)((()=>{if(c(),r&&!(n>0)){const e=window.setInterval(c,1e3);return()=>clearInterval(e)}}),[r]),[""!==a,a]};var wh,Dh,Sh,extras_ExtraExpirationTime=({message:e,marginBottom:t=!0})=>{const[n,r]=useExpiration(e),a=!!e.expiresIn;return n?(0,j.jsxs)("div",{className:(0,ht.dh)(["rounded p0-5 flex flex-nowrap",a?"bg-primary":"bg-warning",t&&"mb0-5"]),"data-testid":"expiration-banner",children:[(0,j.jsx)(pr.Z,{name:"hourglass-empty",className:"flex-item-noshrink mtauto mbauto"}),(0,j.jsx)("span",{className:"pl0-5 pr0-5 flex-item-fluid",children:r})]}):null};var composer_ComposerMeta=({message:e,messageSendInfo:t,disabled:n,onChange:r,onChangeContent:a,addressesBlurRef:s,addressesFocusRef:i})=>{var c;const[l]=(0,o.useState)((0,ht.D)("composer"));return(0,j.jsxs)("div",{className:"composer-meta flex-item-noshrink ml0-5 mr1-5 pl1-25 pr0-25",children:[(0,j.jsxs)("div",{className:"flex flex-row flex-nowrap on-mobile-flex-column flex-align-items-center w100",children:[(0,j.jsx)(gr.Z,{htmlFor:"from-".concat(l),className:(0,ht.dh)(["composer-meta-label pt0 text-semibold",n&&"placeholder"]),children:(0,u.c)("Info").t(wh||(wh=(0,d.Z)(["From"])))}),(0,j.jsx)(addresses_SelectSender,{message:e,disabled:n,onChange:r,onChangeContent:a,addressesBlurRef:s})]}),(0,j.jsx)(addresses_Addresses,{message:e,messageSendInfo:t,disabled:n,onChange:r,addressesBlurRef:s,addressesFocusRef:i}),(0,j.jsxs)("div",{className:"flex flex-row flex-nowrap on-mobile-flex-column flex-align-items-center mt0 mb0-5",children:[(0,j.jsx)(gr.Z,{htmlFor:"subject-".concat(l),className:(0,ht.dh)(["composer-meta-label pt0 text-semibold",n&&"placeholder"]),children:(0,u.c)("Info").t(Dh||(Dh=(0,d.Z)(["Subject"])))}),(0,j.jsx)(jr.Z,{id:"subject-".concat(l),value:(null===(c=e.data)||void 0===c?void 0:c.Subject)||"",placeholder:(0,u.c)("Placeholder").t(Sh||(Sh=(0,d.Z)(["Subject"]))),disabled:n,onChange:e=>{const t=e.target;r({data:{Subject:t.value}})},onFocus:s.current,"data-testid":"composer:subject",className:"field-lighter composer-meta-input-subject"})]}),(0,j.jsx)(extras_ExtraExpirationTime,{marginBottom:!1,message:e})]})},Oh=n(98725),Ah=n(50651);const Ch=["children","className","progress","rootRef","size"];function CircularProgress_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function CircularProgress_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CircularProgress_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CircularProgress_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var progress_CircularProgress=e=>{let{children:t,className:n,progress:r,rootRef:a,size:o=32}=e,s=(0,Sn.Z)(e,Ch);return(0,j.jsxs)("svg",CircularProgress_objectSpread(CircularProgress_objectSpread({ref:a,viewBox:"0 0 35.83098862 35.83098862",className:(0,ht.dh)(["circle-chart",n]),width:o,height:o,xmlns:"http://www.w3.org/2000/svg"},s),{},{children:[(0,j.jsx)("circle",{className:"circle-chart-background",strokeDasharray:"100, 100",cx:"17.91549431",cy:"17.91549431",r:"15.91549431"}),(0,j.jsx)("circle",{className:"circle-chart-circle",strokeDasharray:"".concat(r,", 100"),strokeLinecap:"butt",cx:"17.91549431",cy:"17.91549431",r:"15.91549431"}),t]}))};const isWebpSupported=()=>{const{name:e,version:t}=(0,mr.qs)();return"Safari"!==e||Number(null==t?void 0:t.split(".")[0])>=14},isSupportedImage=e=>["image/apng","image/bmp","image/gif","image/x-icon","image/vnd.microsoft.icon","image/jpeg","image/png","image/svg+xml",isWebpSupported()&&"image/webp"].filter(Boolean).includes(e),isSupportedText=e=>e.startsWith("text/")||["application/javascript","application/typescript"].includes(e),isVideo=e=>e.startsWith("video/"),isPDF=e=>"application/pdf"===e||"x-pdf"===e,isSupportedVideo=(e,t)=>isVideo(e)&&t&&t<104857600,Eh=["name","size"];function MimeIcon_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const Lh={sm:16,md:24,lg:48};var icon_MimeIcon=e=>{let{name:t,size:n=16}=e,r=(0,Sn.Z)(e,Eh);const a=(e=>e<20?"sm":e<40?"md":"lg")(n),o="".concat(a,"-").concat(t),s="0 0 ".concat(Lh[a]," ").concat(Lh[a]);return(0,j.jsx)(pr.Z,function MimeIcon_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MimeIcon_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MimeIcon_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({name:o,size:n,viewBox:s,nameSpaceSvg:"mime"},r))};const Ph=["mimeType"];function FileIcon_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const Zh={Folder:{name:"folder"},"application/x-rar-compressed":{name:"zip"},"application/x-zip-compressed":{name:"zip"},"application/zip":{name:"zip"},"application/x-7z-compressed":{name:"zip"},"application/x-arj":{name:"zip"},"application/x-debian-package":{name:"zip"},"application/octet-stream":{name:"zip"},"application/x-redhat-package-manager":{name:"zip"},"application/x-rpm":{name:"zip"},"application/vnd.rar":{name:"zip"},"application/gzip":{name:"zip"},"application/x-gzip":{name:"zip"},"application/x-compress":{name:"zip"},"application/vnd.apple.installer+xml":{name:"zip"},"application/msword":{name:"doc"},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{name:"doc"},"application/vnd.ms-powerpoint":{name:"ppt"},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{name:"ppt"},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{name:"xls"},"application/vnd.oasis.opendocument.spreadsheet":{name:"xls"},"application/vnd.oasis.opendocument.presentation":{name:"ppt"},"application/xliff+xml":{name:"xml"},"application/xml":{name:"xml"},"text/html":{name:"xml"},"application/xhtml+xml":{name:"xml"},"application/pgp-keys":{name:"keytrust"},"application/rtf":{name:"text"},"application/x-tex":{name:"text"},"application/vnd.oasis.opendocument.text":{name:"text"},"application/vnd.wordperfect":{name:"text"},"application/vnd.ms-fontobject":{name:"font"},"application/font-sfnt":{name:"font"},"application/vnd.oasis.opendocument.formula-template":{name:"font"}};var fileIcon_FileIcon=e=>{let{mimeType:t}=e,n=(0,Sn.Z)(e,Ph);const r=(e=>{let t="unknown";return Zh[e]?t=Zh[e].name:(e=>e.startsWith("image/"))(e)?t="image":"text/xml"===e?t="xml":(e=>e.startsWith("text/calendar"))(e)?t="calendar":isSupportedText(e)?t="text":isPDF(e)?t="pdf":isVideo(e)?t="video":e.startsWith("font/")?t="font":(e=>e.startsWith("application/vnd.ms-excel"))(e)&&(t="xls"),t})(t);return(0,j.jsx)(icon_MimeIcon,function FileIcon_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FileIcon_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FileIcon_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({name:r,className:"flex-item-noshrink mr0-5"},n))};const Th=["text","className","displayTitle","charsToDisplayEnd","direction"];function MiddleEllipsis_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function MiddleEllipsis_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MiddleEllipsis_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MiddleEllipsis_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ellipsis_MiddleEllipsis=e=>{let{text:t,className:n="",displayTitle:r=!0,charsToDisplayEnd:a=6,direction:s="ltr"}=e,i=(0,Sn.Z)(e,Th);const[c,l]=(0,o.useMemo)((()=>[t.slice(0,-a),t.slice(-a)]),[t]);return(0,j.jsxs)("span",MiddleEllipsis_objectSpread(MiddleEllipsis_objectSpread({"aria-label":t,title:r?t:void 0,className:(0,ht.dh)(["inline-flex flex-nowrap mw100",n]),dir:s},i),{},{children:[c&&(0,j.jsx)("span",{className:"text-ellipsis text-pre","aria-hidden":"true",children:c}),(0,j.jsx)("span",{className:"flex-item-noshrink text-pre","aria-hidden":"true",children:l})]}))};var kh,zh,_h,Rh,Gh,fileNameDisplay_FileNameDisplay=({text:e="",className:t,charsToDisplayEnd:n=6})=>{const r=(0,br.v7)(e),[,a]=(0,To.EQ)(r),o=a.length<n?a.length+3:n;return(0,j.jsx)(ellipsis_MiddleEllipsis,{charsToDisplayEnd:o,className:t,text:r})};const getActionTitle=(e,t)=>{switch(e){case BI.Download:return(0,u.c)("Action").t(kh||(kh=(0,d.Z)(["Download ",""])),t);case BI.Preview:return(0,u.c)("Action").t(zh||(zh=(0,d.Z)(["Preview ",""])),t);case BI.Remove:return(0,u.c)("Action").t(_h||(_h=(0,d.Z)(["Remove ",""])),t);default:return t}};var attachment_AttachmentItem=({attachment:e,pendingUpload:t,attachmentVerified:n,primaryAction:r,secondaryAction:a,onPrimary:s,onSecondary:i})=>{const[c,l]=(0,no.Z)(),[p,m]=(0,o.useState)(0),g=hooks_useIsMounted();(0,o.useEffect)((()=>{t&&t.upload.addProgressListener((e=>{g()&&m(e.loaded/e.total)}))}),[]);const b="".concat(e?e.Name||"":(null==t?void 0:t.file.name)||""),y=(0,br.v7)(b),h=Math.round(100*p),I=0!==p||!!t,f=I?"":"(".concat(helpers_humanSize(null==e?void 0:e.Size),")"),M="".concat(y," ").concat(f).concat((e=>{if(e===v.SIGNED_AND_INVALID){const e=(0,u.c)("Attachment signature verification").t(Rh||(Rh=(0,d.Z)(["Sender verification failed"])));return" - ".concat(e)}if(e===v.SIGNED_AND_VALID){const e=(0,u.c)("Attachment signature verification").t(Gh||(Gh=(0,d.Z)(["Sender verification passed"])));return" - ".concat(e)}return""})(n)),N=getActionTitle(r,M),x=a!==BI.None,w=(e=>{switch(e){case BI.Download:return"arrow-down-to-rectangle";case BI.Preview:return"arrow-up-right-and-arrow-down-left-from-center";case BI.Remove:return"xmark";default:return""}})(a),D=getActionTitle(a,y),handleAction=n=>()=>{const r=n?s:i;let a=Promise.resolve();if(e){a=r(e)}if(t){a=r(t)}l(a)};return(0,j.jsx)("div",{className:"message-attachmentList-item-container","data-testid":"attachment-item",children:(0,j.jsxs)("div",{className:(0,ht.dh)(["message-attachmentList-item flex bordered flex-nowrap pm_button p0 rounded",c&&"message-attachmentList-item--loading"]),children:[(0,j.jsxs)("span",{className:"relative flex flex-item-fluid message-attachmentPrimaryAction interactive",children:[(0,j.jsx)("button",{className:"pl0-5 pt0-5 pb0-5 flex flex-item-noshrink message-attachmentTypeIcon",type:"button",onClick:handleAction(!0),tabIndex:-1,children:I?(0,j.jsx)(progress_CircularProgress,{progress:h,size:20,className:"mr0-5"}):(0,j.jsx)(fileIcon_FileIcon,{mimeType:(null==e?void 0:e.MIMEType)||"unknown",size:20})}),(0,j.jsx)("button",{className:"flex-item-fluid flex flex-nowrap pr0-5",title:N,type:"button",onClick:handleAction(!0),children:(0,j.jsxs)("span",{className:"mtauto mbauto flex flex-align-items-baseline flex-nowrap",children:[(0,j.jsx)("span",{className:"text-ellipsis pr0-25 align-baseline inline-block",children:(0,j.jsx)(fileNameDisplay_FileNameDisplay,{text:y})}),(0,j.jsx)("span",{className:"message-attachmentSize align-baseline inline-block flex-item-noshrink",children:f})]})})]}),x&&(0,j.jsx)("button",{type:"button",className:"inline-flex p0-5 no-pointer-events-children flex-item-noshrink message-attachmentSecondaryAction interactive",onClick:handleAction(!1),title:D,disabled:c,"aria-busy":c,children:c?(0,j.jsx)(_a.Z,{className:"icon-16p mauto"}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(pr.Z,{name:w,className:"mauto"}),(0,j.jsx)("span",{className:"sr-only",children:D})]})})]})})},Yh=n(61539),Uh=n.n(Yh);const formatDownload=async(e,t,n,r,a,o)=>{try{var s;const i=!(null==t||!t.senderVerified||null===(s=t.senderPinnedKeys)||void 0===s||!s.length),{data:c,verified:l}=await getAndVerify(e,t,n,i,r,a,o);return{attachment:e,data:c,verified:i?l:v.NOT_VERIFIED}}catch(t){if(t.data)return{attachment:{Name:"".concat(e.Name,".pgp"),MIMEType:"application/pgp",ID:e.ID},data:t.binary,isError:!0,verified:v.NOT_VERIFIED};throw t}},generateDownload=async e=>{helpers_downloadFile(new Blob([e.data],{type:e.attachment.MIMEType}),e.attachment.Name)},useGetMessageKeys=()=>{const e=(0,Zb.ZP)();return(0,o.useCallback)((async t=>{const{publicKeys:n,privateKeys:r}=(0,ju.ee)(await e(t.AddressID));return{publicKeys:n,privateKeys:r}}),[e])};var Fh=n(50138);const Kh=(0,Fh.PH)("attachments/add"),Bh=(0,Fh.PH)("attachments/update");var Wh,Vh,Qh,Hh,Xh,Jh;const useShowConfirmModal=()=>{const{createModal:e}=(0,In.Z)();return(0,o.useCallback)((t=>new Promise(((n,r)=>{const a=t.length,o=t.some((({verified:e})=>e===v.SIGNED_AND_INVALID)),s=o?(0,u.c)("Title").t(Wh||(Wh=(0,d.Z)(["Verification error"]))):(0,u.c)("Title").t(Vh||(Vh=(0,d.Z)(["Decryption error"]))),i=o?"https://protonmail.com/support/knowledge-base/digital-signature/":void 0,c=o?(0,u.c)("Warning").ngettext((0,u.msgid)(Qh||(Qh=(0,d.Z)(["The attachment's signature failed verification.\n                        You can still download this attachment but it might have been tampered with."]))),"Some of the attachments' signatures failed verification.\n                        You can still download these attachments but they might have been tampered with.",a):(0,u.c)("Error").ngettext((0,u.msgid)(Hh||(Hh=(0,d.Z)(["The attachment could not be decrypted.\n                        If you have the corresponding private key, you will still be able to decrypt\n                        the file with a program such as GnuPG."]))),"Some of the attachments could not be decrypted.\n                        If you have the corresponding private key, you will still be able to decrypt\n                        the files with a program such as GnuPG.",a);e((0,j.jsxs)(modal_Confirm,{onConfirm:()=>n(void 0),onClose:r,title:s,confirm:(0,u.c)("Action").t(Xh||(Xh=(0,d.Z)(["Download"]))),children:[(0,j.jsx)(Cn.Z,{className:"mb1",type:"warning",learnMore:i,children:c}),(0,j.jsx)(Cn.Z,{className:"mb1",children:(0,u.c)("Info").ngettext((0,u.msgid)(Jh||(Jh=(0,d.Z)(["Do you want to download this attachment anyway?"]))),"Do you want to download these attachments anyway?",a)})]}))}))),[])},useSyncedMessageKeys=()=>{const e=useMessageCache(),t=useGetMessageKeys();return n=>{const r=e.get(n);return t(r.data)}},useDownload=()=>{const e=(0,Dn.Z)(),t=useGetAttachment(),n=(0,i.I0)(),r=useShowConfirmModal(),a=useSyncedMessageKeys(),onUpdateAttachment=(e,t)=>{n(Bh({ID:e,attachment:t}))};return(0,o.useCallback)((async(n,o)=>{const s=await a(n.localID),i=await formatDownload(o,n.verification,s,t,onUpdateAttachment,e);return(i.isError||i.verified===v.SIGNED_AND_INVALID)&&await r([i]),await generateDownload(i),i.verified}),[e])},useDownloadAll=()=>{const e=(0,Dn.Z)(),t=useGetAttachment(),n=(0,i.I0)(),r=useShowConfirmModal(),a=useSyncedMessageKeys(),onUpdateAttachment=(e,t)=>{n(Bh({ID:e,attachment:t}))};return(0,o.useCallback)((async n=>{const o=await a(n.localID),s=getAttachments(n.data),i=await(async(e,t,n,r,a,o)=>{const{list:s}=e.reduce(((e,t)=>{const n=t.Name||"";if(e.map[n]){e.map[n].index++;const[r,a]=(0,To.EQ)(n),o="".concat(r," (").concat(e.map[n].index,").").concat(a);t.Name=o}else e.map[n]={index:0};return e.list.push(t),e}),{list:[],map:{}});return Promise.all(s.map((e=>formatDownload(e,t,n,r,a,o))))})(s,n.verification,o,t,onUpdateAttachment,e),c=i.some((({isError:e})=>e)),l=i.some((({verified:e})=>e===v.SIGNED_AND_INVALID));(c||l)&&await r(i),await(async(e,t)=>{const n=new(Uh());t.forEach((({attachment:{Name:e=""},data:t})=>n.file(e,t)));const r=await n.generateAsync({type:"blob"}),a=(e=>"Attachments-".concat(e.Subject,".zip"))(e);helpers_downloadFile(r,a)})(n.data,i)}),[e])};var qh,$h,eI,tI,nI,rI,aI,oI,sI,iI;const cI={"":void 0,shared:"color-info",inactive:"color-weak"};var lI,dI,uI,pI,mI,filePreview_Header=({mimeType:e,name:t,sharedStatus:n,onClose:r,onSave:a,onDetail:o,onShare:s,children:i})=>(0,j.jsxs)("div",{className:"flex flex-justify-space-between flex-align-items-center p2 relative",children:[(0,j.jsxs)("div",{className:"file-preview-filename flex flex-align-items-center flex-nowrap",children:[e&&(0,j.jsx)(fileIcon_FileIcon,{mimeType:e}),(0,j.jsx)(fileNameDisplay_FileNameDisplay,{text:t})]}),i,(0,j.jsxs)("div",{className:"flex flex-align-items-center",children:[a&&(0,j.jsx)(Ea.Z,{icon:!0,shape:"ghost",title:(0,u.c)("Action").t(qh||(qh=(0,d.Z)(["Download"]))),onClick:a,className:"ml0-5",children:(0,j.jsx)(pr.Z,{name:"arrow-down-to-rectangle",size:20,alt:(0,u.c)("Action").t($h||($h=(0,d.Z)(["Download"])))})}),o&&(0,j.jsx)(Ea.Z,{icon:!0,shape:"ghost",title:(0,u.c)("Action").t(eI||(eI=(0,d.Z)(["Details"]))),onClick:o,className:"ml0-5 no-mobile",children:(0,j.jsx)(pr.Z,{name:"circle-info",size:20,alt:(0,u.c)("Action").t(tI||(tI=(0,d.Z)(["Details"])))})}),s&&(0,j.jsx)(Ea.Z,{icon:!0,shape:"ghost",title:""===n?(0,u.c)("Action").t(nI||(nI=(0,d.Z)(["Share via link"]))):(0,u.c)("Action").t(rI||(rI=(0,d.Z)(["Sharing options"]))),onClick:s,className:"ml0-5 no-mobile",children:(0,j.jsx)(pr.Z,{name:"link",size:20,alt:""===n?(0,u.c)("Action").t(aI||(aI=(0,d.Z)(["Share via link"]))):(0,u.c)("Action").t(oI||(oI=(0,d.Z)(["Sharing options"]))),className:cI[n||""]})}),r&&(0,j.jsx)(Ea.Z,{icon:!0,shape:"ghost",title:(0,u.c)("Action").t(sI||(sI=(0,d.Z)(["Close"]))),onClick:r,className:"ml0-5",children:(0,j.jsx)(pr.Z,{name:"xmark",size:20,alt:(0,u.c)("Action").t(iI||(iI=(0,d.Z)(["Close"])))})})]})]}),gI=n(10509),jI=n.n(gI),bI=n(60993);var yI,hI,II,filePreview_ZoomControl=({scale:e,onZoomIn:t,onZoomOut:n,onReset:r})=>{const a=e<=.005,o=e>=10;return(0,j.jsx)("div",{className:"w100 p2 flex",children:(0,j.jsxs)("div",{className:"center flex flex-align-items-center",children:[(0,j.jsx)(Ea.Z,{icon:!0,shape:"ghost",disabled:a,onClick:n,title:(0,u.c)("Action").t(lI||(lI=(0,d.Z)(["Zoom out"]))),children:(0,j.jsx)(pr.Z,{name:"dash",size:12,alt:(0,u.c)("Action").t(dI||(dI=(0,d.Z)(["Zoom out"])))})}),(0,j.jsx)(Ea.Z,{shape:"ghost",title:(0,u.c)("Action").t(uI||(uI=(0,d.Z)(["Reset zoom"]))),className:"ml0-5 mr0-5",onClick:r,children:(0,j.jsxs)("span",{children:[Math.round(100*e),"%"]})}),(0,j.jsx)(Ea.Z,{icon:!0,shape:"ghost",disabled:o,onClick:t,title:(0,u.c)("Action").t(pI||(pI=(0,d.Z)(["Zoom in"]))),children:(0,j.jsx)(pr.Z,{name:"plus",size:12,alt:(0,u.c)("Action").t(mI||(mI=(0,d.Z)(["Zoom in"])))})})]})})},fI=n(72761),MI=n(60654);var NI,filePreview_UnsupportedPreview=({onSave:e,type:t="file"})=>{const{isNarrow:n}=hooks_useActiveBreakpoint();return(0,j.jsxs)("div",{className:"centered-absolute text-center w100 pl1 pr1",children:[(0,j.jsx)("img",{className:(0,ht.dh)(["mb1",n?"w150p":"w200p"]),src:"file"===t?fI:MI,alt:(0,u.c)("Info").t(yI||(yI=(0,d.Z)(["Unsupported file"])))}),(0,j.jsx)("h2",{className:(0,ht.dh)(["p0-25 text-bold",n&&"h3"]),children:(0,u.c)("Info").t(hI||(hI=(0,d.Z)(["No preview available"])))}),e&&(0,j.jsx)(yr.Z,{size:n?void 0:"large",className:"text-bold",onClick:e,children:(0,u.c)("Action").t(II||(II=(0,d.Z)(["Download"])))})]})};const xI=window.innerHeight/2;function getImageNaturalDimensions(e){return{height:(null==e?void 0:e.naturalHeight)||xI,width:(null==e?void 0:e.naturalWidth)||xI}}var vI,filePreview_ImagePreview=({mimeType:e,contents:t,onSave:n})=>{const r=(0,o.useRef)(null),a=(0,o.useRef)(null),s=hooks_useElementRect(a),[i,c]=(0,o.useState)(!1),[l,p]=(0,o.useState)(0),[m,g]=(0,o.useState)({src:""});(0,o.useEffect)((()=>{let n;if(i&&c(!1),!t)return void g({src:""});const r=(e=>"image/svg+xml"===e)(e)?function sanitizeSVG(e){const t=e.map(bI.DA).join(""),n=jI().sanitize(t);return[(0,bI.sy)(n)]}(t):t,a=new Blob(r,{type:e});return g({src:URL.createObjectURL(a)}),()=>{n}}),[t,e]);const fitToContainer=()=>{if(!r.current||!s)return;const e=getImageNaturalDimensions(r.current),t=s.height/e.height,n=s.width/e.width,a=Math.min(1,t,n);p(a)},b=getImageNaturalDimensions(r.current),y={height:b.height*l,width:b.width*l};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{ref:a,className:"file-preview-container",children:i?(0,j.jsx)(filePreview_UnsupportedPreview,{onSave:n,type:"image"}):m.src&&(0,j.jsx)("div",{className:"flex-no-min-children mauto relative",style:y,children:(0,j.jsx)("img",{ref:r,onLoad:()=>fitToContainer(),onError:()=>{i||c(!0)},className:"file-preview-image",style:y,src:m.src,alt:(0,u.c)("Info").t(NI||(NI=(0,d.Z)(["Preview"])))})})}),!i&&(0,j.jsx)(filePreview_ZoomControl,{onReset:fitToContainer,scale:l,onZoomIn:()=>p((e=>e?1.1*e:1)),onZoomOut:()=>p((e=>e?.9*e:1))})]})},wI=n(74121),DI=n(89330);var filePreview_PreviewLoader=()=>(0,j.jsx)("div",{className:"file-preview-container",children:(0,j.jsxs)("div",{className:"centered-absolute text-center w100",children:[(0,j.jsx)(wI.Z,{size:100}),(0,j.jsx)(DI.Z,{children:(0,u.c)("Info").t(vI||(vI=(0,d.Z)(["Loading preview"])))})]})});var filePreview_TextPreview=({contents:e=[]})=>{const t=(new TextDecoder).decode((0,xe.Jm)(e));return(0,j.jsx)("div",{className:"file-preview-container",children:(0,j.jsx)("div",{className:"file-preview-text",children:t})})};var SI,filePreview_VideoPreview=({contents:e,mimeType:t,onSave:n})=>{var r;const a=(0,o.useRef)(null),s=(0,o.useRef)(null),i=hooks_useElementRect(s),[c,l]=(0,o.useState)(),[d,u]=(0,o.useState)(1),[p,m]=(0,o.useState)(!1);(0,o.useEffect)((()=>{const n=URL.createObjectURL(new Blob(e,{type:t}));return l(n),()=>{n&&URL.revokeObjectURL(n)}}),[e]);const g=null!==(r=a.current)&&void 0!==r&&r.videoHeight?{height:a.current.videoHeight*d,width:a.current.videoWidth*d}:{};return p?(0,j.jsx)("div",{className:"flex flex-item-fluid-auto relative",children:(0,j.jsx)(filePreview_UnsupportedPreview,{onSave:n,type:"video"})}):(0,j.jsx)("div",{ref:s,className:"flex w100 h100",children:(0,j.jsx)("div",{className:"mauto",children:(0,j.jsx)("video",{ref:a,onLoadedMetadata:()=>{if(!a.current||!i)return;const e=i.height/a.current.videoHeight,t=i.width/a.current.videoWidth,n=Math.min(1,e,t);u(n)},onError:()=>{m(!0)},src:c,style:g,controls:!0})})})};var OI,filePreview_PDFPreview=({filename:e="preview.pdf",contents:t})=>{const[n,r]=(0,o.useState)();return(0,o.useEffect)((()=>{const e=URL.createObjectURL(new Blob(t,{type:"application/pdf"}));return r(e),()=>{e&&URL.revokeObjectURL(e)}}),[t]),(0,j.jsx)(j.Fragment,{children:n&&(0,j.jsxs)("object",{data:n,className:"w100 flex-no-min-children flex-item-fluid-auto flex-column-reverse",type:"application/pdf",title:e,children:[(0,j.jsx)("embed",{src:n,className:"flex",type:"application/pdf"}),(0,j.jsx)("p",{className:"mauto",children:(0,u.c)("Info").t(SI||(SI=(0,d.Z)(["This browser does not support previewing PDF documents. Please download the file."])))})]})})},AI=n(5792);function FilePreview_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function FilePreview_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FilePreview_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FilePreview_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const FilePreview=({contents:e,fileName:t,mimeType:n,fileSize:r,loading:a,navigationControls:s,sharedStatus:i,onClose:c,onSave:l,onDetail:p,onShare:m},g)=>{const b=(0,o.useRef)(null),y=(0,fr.Z)(g,b),h=(0,AI.Z)({rootRef:b});(0,Co.y)(b,[["Escape",e=>{e.stopPropagation(),null==c||c()}]]);return(0,j.jsxs)("div",FilePreview_objectSpread(FilePreview_objectSpread({className:"file-preview ui-prominent",ref:y},h),{},{children:[(0,j.jsx)(filePreview_Header,{mimeType:n,name:t,sharedStatus:i,onClose:c,onSave:l,onDetail:p,onShare:m,children:s}),a?(0,j.jsx)(filePreview_PreviewLoader,{}):(()=>{if(!n||!((e,t)=>isSupportedImage(e)||isSupportedVideo(e,t)||isSupportedText(e)||(0,mr.y7)()&&isPDF(e))(n,r))return(0,j.jsx)("div",{className:"file-preview-container",children:(0,j.jsx)(filePreview_UnsupportedPreview,{onSave:l})});if(!e)throw new Error((0,u.c)("Error").t(OI||(OI=(0,d.Z)(["File has no contents to preview"]))));return isSupportedImage(n)?(0,j.jsx)(filePreview_ImagePreview,{contents:e,mimeType:n,onSave:l}):isSupportedVideo(n,r)?(0,j.jsx)(filePreview_VideoPreview,{contents:e,mimeType:n,onSave:l}):isSupportedText(n)?(0,j.jsx)(filePreview_TextPreview,{contents:e}):isPDF(n)?(0,j.jsx)(filePreview_PDFPreview,{contents:e,filename:t}):void 0})()]}))};var CI,EI,LI,PI,ZI,TI=(0,o.forwardRef)(FilePreview);var filePreview_NavigationControl=({current:e,total:t,rootRef:n,onNext:r,onPrev:a})=>{const o=1===e,s=e===t;return(0,Co.y)(n,[["ArrowLeft",e=>{e.stopPropagation(),o||a()}],["ArrowRight",e=>{e.stopPropagation(),s||r()}]]),(0,j.jsxs)("div",{className:"flex flex-align-items-center centered-absolute",children:[(0,j.jsx)(Ea.Z,{icon:!0,shape:"ghost",className:"on-rtl-mirror",disabled:o,onClick:a,title:(0,u.c)("Action").t(CI||(CI=(0,d.Z)(["Previous"]))),children:(0,j.jsx)(pr.Z,{name:"angle-down",rotate:90,size:16,alt:(0,u.c)("Action").t(EI||(EI=(0,d.Z)(["Previous"])))})}),(0,j.jsxs)("span",{className:"ml0-5 mr0-5",children:[(0,j.jsx)("span",{children:e}),(0,j.jsx)("span",{className:"ml0-25 mr0-25 color-weak text-sm",children:(0,u.c)("Info").t(LI||(LI=(0,d.Z)(["of"])))}),(0,j.jsx)("span",{children:t})]}),(0,j.jsx)(Ea.Z,{icon:!0,shape:"ghost",className:"on-rtl-mirror",disabled:s,onClick:r,title:(0,u.c)("Action").t(PI||(PI=(0,d.Z)(["Next"]))),children:(0,j.jsx)(pr.Z,{name:"angle-down",rotate:-90,size:16,alt:(0,u.c)("Action").t(ZI||(ZI=(0,d.Z)(["Next"])))})})]})},kI=n(63402);function AttachmentPreview_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function AttachmentPreview_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?AttachmentPreview_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AttachmentPreview_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const AttachmentPreview=({attachments:e,message:t,onDownload:n},r)=>{var a,s,c;const l=(()=>{const e=(0,Dn.Z)(),t=useGetAttachment(),n=(0,i.I0)(),r=useSyncedMessageKeys(),a=useShowConfirmModal(),onUpdateAttachment=(e,t)=>{n(Bh({ID:e,attachment:t}))};return(0,o.useCallback)((async(n,o)=>{const s=await r(n.localID),i=await formatDownload(o,n.verification,s,t,onUpdateAttachment,e);return(i.isError||i.verified===v.SIGNED_AND_INVALID)&&(async()=>{await a([i]),await generateDownload(i)})(),i}),[e])})(),d=useDownload(),[u,p]=(0,o.useState)(),m=(0,o.useRef)(null),handlePreview=async e=>{p({attachment:e});const r=await l(t,e);p((t=>void 0===t||t.attachment!==e?t:r.verified===v.SIGNED_AND_INVALID?{attachment:AttachmentPreview_objectSpread(AttachmentPreview_objectSpread({},e),{},{MIMEType:""}),contents:[]}:AttachmentPreview_objectSpread(AttachmentPreview_objectSpread({},t),{},{contents:[r.data]}))),n(e,r.verified)};if((0,o.useEffect)((()=>{r.current={preview:handlePreview}})),!u)return null;const g=e.findIndex((e=>e.ID===u.attachment.ID))+1,b=e.length;return(0,j.jsx)(kI.Z,{children:(0,j.jsx)(TI,{loading:!u.contents,contents:u.contents,fileName:null===(a=u.attachment)||void 0===a?void 0:a.Name,mimeType:null===(s=u.attachment)||void 0===s?void 0:s.MIMEType,fileSize:null===(c=u.attachment)||void 0===c?void 0:c.Size,onClose:()=>p(void 0),onSave:async()=>{const{attachment:e}=u,r=await d(t,e);n(e,r)},ref:m,navigationControls:(0,j.jsx)(filePreview_NavigationControl,{current:g,total:b,rootRef:m,onNext:()=>handlePreview(e[g]),onPrev:()=>handlePreview(e[g-2])})})})};var zI,_I,RI,GI,YI,UI,FI,KI=(0,o.forwardRef)(AttachmentPreview);function AttachmentList_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function AttachmentList_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?AttachmentList_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AttachmentList_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let BI;!function(e){e[e.Download=0]="Download",e[e.Preview=1]="Preview",e[e.Remove=2]="Remove",e[e.None=3]="None"}(BI||(BI={}));var attachment_AttachmentList=({attachments:e,pendingUploads:t=[],message:n,primaryAction:r,secondaryAction:a,collapsable:s,showDownloadAll:i,onRemoveAttachment:c,onRemoveUpload:l,className:p})=>{const m=useDownload(),g=useDownloadAll(),[b,y]=(0,o.useState)(!1),[h,I]=(0,o.useState)(!1),[f,M]=(0,o.useState)(!s),[N,x]=(0,o.useState)(!1),[v,w]=(0,o.useState)({}),D=(0,o.useRef)();(0,o.useEffect)((()=>{N&&0===t.length||!1===s||M(t.length>0)}),[t]);const{size:S,sizeLabel:O,pureAttachmentsCount:A,embeddedAttachmentsCount:C,attachmentsCount:E}=getAttachmentCounts(e,n.messageImages),noop=()=>Promise.resolve(),L={[BI.Download]:async e=>{const t=await m(n,e);w((n=>AttachmentList_objectSpread(AttachmentList_objectSpread({},n),{},{[e.ID||""]:t})))},[BI.Preview]:async e=>{var t;return null===(t=D.current)||void 0===t?void 0:t.preview(e)},[BI.Remove]:c||noop,[BI.None]:noop},P=s?f?(0,u.c)("Action").t(zI||(zI=(0,d.Z)(["Hide attachment details"]))):(0,u.c)("Action").t(_I||(_I=(0,d.Z)(["Show attachment details"]))):void 0,Z=s?"button":"div";return(0,j.jsxs)("div",{className:(0,ht.dh)(["flex flex-column pl1-25 pr1-5 relative w100 flex-nowrap",p,f&&"border-top"]),children:[(0,j.jsx)(KI,{ref:D,attachments:e,message:n,onDownload:(e,t)=>{w((n=>AttachmentList_objectSpread(AttachmentList_objectSpread({},n),{},{[e.ID||""]:t})))}}),(0,j.jsxs)("div",{className:"flex flex-row w100 p0-5 flex-justify-space-between","data-testid":"attachments-header",children:[(0,j.jsxs)(Z,{type:"button",title:P,tabIndex:-1,className:"flex flex-align-items-center no-outline",onClick:()=>{s&&(M(!f),x(!f))},children:[0!==S&&(0,j.jsx)("strong",{className:"mr0-5",children:O}),A>0&&(0,j.jsxs)("span",{className:"mr0-5",children:[(0,j.jsx)(pr.Z,{name:"paperclip",className:"mr0-25"}),(0,j.jsx)("span",{children:A})," ",(0,j.jsx)("span",{className:"no-mobile",children:(0,u.c)("Info").ngettext((0,u.msgid)(RI||(RI=(0,d.Z)(["file attached"]))),"files attached",A)})]}),C>0&&(0,j.jsxs)("span",{className:"mr0-5 inline-flex flex-align-items-center",children:[(0,j.jsx)(pr.Z,{name:"file-image",className:"mr0-25"}),(0,j.jsx)("span",{children:C})," ",(0,j.jsx)("span",{className:"no-mobile",children:(0,u.c)("Info").ngettext((0,u.msgid)(GI||(GI=(0,d.Z)(["embedded image"]))),"embedded images",C)})]}),s&&(0,j.jsx)("span",{className:"link align-baseline text-left mr0-5",children:f?(0,u.c)("Action").t(YI||(YI=(0,d.Z)(["Hide"]))):(0,u.c)("Action").t(UI||(UI=(0,d.Z)(["Show"])))})]}),i&&E>0&&(0,j.jsxs)("div",{children:[(0,j.jsx)("button",{type:"button",onClick:async()=>{y(!0);try{await g(n)}catch(e){console.log("error",e)}finally{y(!1),I(!0)}},className:"link text-strong",disabled:!n.initialized,children:(0,u.c)("Download attachments").t(FI||(FI=(0,d.Z)(["Download all"])))}),h&&(0,j.jsx)(pr.Z,{className:"ml0-5",name:"arrow-down-to-rectangle"}),b&&(0,j.jsx)(_a.Z,{className:"icon-16p ml0-5"})]})]}),f&&(0,j.jsxs)("div",{tabIndex:-1,className:"flex flex-row flex-wrap message-attachmentList pl0-5 pr0-5 pb0-5",children:[e.map((e=>(0,j.jsx)(attachment_AttachmentItem,{attachment:e,attachmentVerified:v[e.ID||""],primaryAction:r,secondaryAction:a,onPrimary:L[r],onSecondary:L[a]},e.ID))),null==t?void 0:t.map((e=>(0,j.jsx)(attachment_AttachmentItem,{pendingUpload:e,primaryAction:r,secondaryAction:BI.Remove,onPrimary:noop,onSecondary:l||noop},e.file.name)))]})]})},WI=n(3159),VI=n(86779);const QI=["onAddFiles","disabled","className","children"];function FileButton_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function FileButton_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FileButton_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FileButton_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const FileButton=(e,t)=>{let{onAddFiles:n,disabled:r,className:a,children:s}=e,i=(0,Sn.Z)(e,QI);const c=(0,o.useRef)(null),l=(0,fr.Z)(c,t);return(0,j.jsx)("div",{className:"file-button flex",children:(0,j.jsxs)(VI.Z,{icon:!0,as:"label",role:"button",tabIndex:0,className:(0,ht.dh)([r&&"is-disabled",a]),onKeyDown:e=>{var t;"Enter"!==e.key&&" "!==e.key||(null===(t=c.current)||void 0===t||t.click())},children:[s,(0,j.jsx)("input",FileButton_objectSpread({ref:l,type:"file",multiple:!0,onChange:e=>{const t=e.target;t.files&&(n([...t.files]),t.value="")}},i))]})})};var HI,XI,JI,qI,$I,ef,tf,nf,rf=(0,o.forwardRef)(FileButton);const af=["onAddUrl","onAddImages","onClose"];function InsertImageModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function InsertImageModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?InsertImageModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):InsertImageModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var of;!function(e){e[e.Initial=0]="Initial",e[e.Loading=1]="Loading",e[e.Error=2]="Error",e[e.Ok=3]="Ok"}(of||(of={}));var sf,cf,lf,df,uf,pf,mf,gf,jf,bf,yf,hf,If,ff,Mf,Nf,xf,vf,wf,Df,modals_InsertImageModal=e=>{let{onAddUrl:t,onAddImages:n,onClose:r}=e,a=(0,Sn.Z)(e,af);const[s]=(0,o.useState)((0,ht.D)("editor-image-modal")),[i,c]=(0,o.useState)(),[l,p]=(0,o.useState)(of.Initial),checkImageUrl=e=>{const t=new Image;t.onload=()=>p(of.Ok),t.onerror=()=>p(of.Error),t.src=e};(0,o.useEffect)((()=>{i&&checkImageUrl(i)}),[i]);return(0,j.jsxs)(On.Z,InsertImageModal_objectSpread(InsertImageModal_objectSpread({title:(0,u.c)("Info").t(HI||(HI=(0,d.Z)(["Insert image"]))),onSubmit:()=>{t(i),null==r||r()},onClose:r,footer:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Ea.Z,{type:"reset","data-testid":"insert-image:cancel",children:(0,u.c)("Action").t(XI||(XI=(0,d.Z)(["Cancel"])))}),(0,j.jsx)(yr.Z,{type:"submit",disabled:l!==of.Ok,"data-testid":"insert-image:save",children:(0,u.c)("Action").t(JI||(JI=(0,d.Z)(["Save"])))})]})},a),{},{children:[(0,j.jsxs)("div",{className:"flex flex-nowrap mb1 on-mobile-flex-column",children:[(0,j.jsx)(gr.Z,{htmlFor:"editor-image-address-".concat(s),children:(0,u.c)("Info").t(qI||(qI=(0,d.Z)(["Add image URL"])))}),(0,j.jsx)("div",{className:"flex-item-fluid",children:(0,j.jsx)(jr.Z,{id:"editor-image-address-".concat(s),type:"text",autoComplete:"off",placeholder:(0,u.c)("Info").t($I||($I=(0,d.Z)(["Image URL"]))),error:l===of.Error?(0,u.c)("Info").t(ef||(ef=(0,d.Z)(["Not a valid URL"]))):void 0,onChange:async e=>{c(e.target.value)},"data-testid":"insert-image:url",autoFocus:!0})})]}),(0,j.jsxs)("div",{className:"flex flex-nowrap mb1 on-mobile-flex-column",children:[(0,j.jsx)(gr.Z,{htmlFor:"editor-image-upload-".concat(s),children:(0,u.c)("Info").t(tf||(tf=(0,d.Z)(["Upload picture"])))}),(0,j.jsx)("div",{className:"flex-item-fluid","data-testid":"insert-image:upload",children:(0,j.jsx)(rf,{id:"editor-image-upload-".concat(s),className:"inline-flex relative flex-align-items-center",onAddFiles:e=>{n(e),null==r||r()},children:(0,u.c)("Action").t(nf||(nf=(0,d.Z)(["Upload picture"])))})})]})]}))};const Sf=["inputLink","onSubmit","onClose","onMailTo"];function InsertLinkModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function InsertLinkModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?InsertLinkModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):InsertLinkModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var InsertLinkModal=e=>{let{inputLink:t,onSubmit:n,onClose:r,onMailTo:a}=e,s=(0,Sn.Z)(e,Sf);const[i,c]=(0,o.useState)(t.link),[l,p]=(0,o.useState)(t.title),[m,g]=(0,o.useState)((0,De.nx)(t.link)||M.RZ.WEB),b=(0,o.useRef)(null);useLinkHandler(b,a);const y=[{value:M.RZ.WEB,text:(0,u.c)("Info").t(sf||(sf=(0,d.Z)(["Web URL"])))},{value:M.RZ.EMAIL,text:(0,u.c)("Info").t(cf||(cf=(0,d.Z)(["Email address"])))},{value:M.RZ.PHONE,text:(0,u.c)("Info").t(lf||(lf=(0,d.Z)(["Phone number"])))}],h={[M.RZ.WEB]:{label:(0,u.c)("Info").t(df||(df=(0,d.Z)(["URL link"]))),placeholder:(0,u.c)("Placeholder").t(uf||(uf=(0,d.Z)(["Link"]))),"test-placeholder":(0,u.c)("Placeholder").t(pf||(pf=(0,d.Z)(["Fill in the URL link and text to test your link"])))},[M.RZ.EMAIL]:{label:(0,u.c)("Info").t(mf||(mf=(0,d.Z)(["Email address"]))),placeholder:(0,u.c)("Placeholder").t(gf||(gf=(0,d.Z)(["Email address"]))),"test-placeholder":(0,u.c)("Placeholder").t(jf||(jf=(0,d.Z)(["Fill in the email address and text to test your link"])))},[M.RZ.PHONE]:{label:(0,u.c)("Info").t(bf||(bf=(0,d.Z)(["Phone number"]))),placeholder:(0,u.c)("Placeholder").t(yf||(yf=(0,d.Z)(["Phone number"]))),"test-placeholder":(0,u.c)("Placeholder").t(hf||(hf=(0,d.Z)(["Fill in the phone number and text to test your link"])))}};return(0,j.jsxs)(On.Z,InsertLinkModal_objectSpread(InsertLinkModal_objectSpread({title:(0,u.c)("Info").t(If||(If=(0,d.Z)(["Insert link"]))),close:(0,u.c)("Action").t(ff||(ff=(0,d.Z)(["Cancel"]))),submit:(0,j.jsx)(yr.Z,{type:"submit",disabled:!l||!i,children:(0,u.c)("Action").t(Mf||(Mf=(0,d.Z)(["Insert"])))}),onSubmit:()=>{n({link:(0,De.Dv)(i,m),title:l}),null==r||r()},onClose:r,innerRef:b},s),{},{children:[(0,j.jsx)(Cn.Z,{className:"mb1",children:(0,u.c)("Info").t(Nf||(Nf=(0,d.Z)(["Please select the type of link you want to insert and fill in all the fields."])))}),(0,j.jsxs)(bo.Z,{children:[(0,j.jsx)(gr.Z,{htmlFor:"link-modal-type",className:"flex flex-column",children:(0,u.c)("Info").t(xf||(xf=(0,d.Z)(["Link type"])))}),(0,j.jsx)(yo.Z,{children:(0,j.jsx)(Ec.Z,{id:"link-modal-type",value:m,onChange:e=>{g(e.target.value)},options:y,required:!0})})]}),(0,j.jsxs)(bo.Z,{children:[(0,j.jsx)(gr.Z,{htmlFor:"link-modal-url",className:"flex flex-column",children:h[m].label}),(0,j.jsx)(yo.Z,{children:(0,j.jsx)(jr.Z,{id:"link-modal-url",value:i,onChange:e=>{c(e.target.value),i===l&&p(e.target.value)},placeholder:h[m].placeholder,required:!0,autoFocus:!0})})]}),(0,j.jsxs)(bo.Z,{children:[(0,j.jsx)(gr.Z,{htmlFor:"link-modal-label",className:"flex flex-column",children:(0,u.c)("Info").t(vf||(vf=(0,d.Z)(["Text to display"])))}),(0,j.jsx)(yo.Z,{children:(0,j.jsx)(jr.Z,{id:"link-modal-label",value:l,onChange:e=>p(e.target.value),placeholder:(0,u.c)("Placeholder").t(wf||(wf=(0,d.Z)(["Text"]))),required:!0})})]}),(0,j.jsxs)(bo.Z,{children:[(0,j.jsx)(gr.Z,{children:(0,u.c)("Info").t(Df||(Df=(0,d.Z)(["Test link"])))}),(0,j.jsx)(yo.Z,{className:"pt0-5 text-ellipsis",children:i&&l?(0,j.jsx)(Tu.Z,{url:(0,De.Dv)(i,m),title:l,children:l}):(0,j.jsx)("span",{className:"placeholder",children:h[m]["test-placeholder"]})})]})]}))};function squireActions_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function squireActions_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?squireActions_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):squireActions_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Of={blockquote:/^blockquote$/,italic:/^i$/,underline:/^u$/,bold:/^b$/,unorderedList:/^ul$/,orderedList:/^ol$/,listElement:/^li$/,alignCenter:/\.align-center/,alignLeft:/\.align-left/,alignRight:/\.align-right/,alignJustify:/\.align-justify/},Af=/\[(dir=(rtl|ltr))]/g,testPresenceInSelection=(e,t,n)=>n.test(e.getPath())||e.hasFormat(t),toggleFormat=(e,t,n,r)=>a=>{testPresenceInSelection(a,e,t)?a[r]():a[n]()},toggleList=e=>t=>{const n=testPresenceInSelection(t,"OL",/>OL\b/),r=testPresenceInSelection(t,"UL",/>UL\b/);!n&&!r||e&&r||!e&&n?t[e?"makeOrderedList":"makeUnorderedList"]():t.removeList()},decimalToHex=e=>parseInt(e,10).toString(16),rgbToHex=(e="",t)=>{const n=vt.exec(e);return!n||n.length<4?t:"#".concat(decimalToHex(n[1])).concat(decimalToHex(n[2])).concat(decimalToHex(n[3]))},listenToCursor=(e,t)=>{if(e)return e.addEventListener("click",t),e.addEventListener("keyup",t),e.addEventListener("pathChange",t),t(),()=>{e.removeEventListener("click",t),e.removeEventListener("keyup",t),e.removeEventListener("pathChange",t)}},Cf=toggleFormat("b",/>B\b/,"bold","removeBold"),Ef=toggleFormat("i",/>I\b/,"italic","removeItalic"),Lf=toggleFormat("u",/>U\b/,"underline","removeUnderline"),Pf=toggleList(!0),Zf=toggleList(!1),Tf=toggleFormat("blockquote",/>BLOCKQUOTE\b/,"increaseQuoteLevel","decreaseQuoteLevel"),getPathInfo=e=>{const t=((e="")=>e.replace(Af,""))(e.getPath()).toLowerCase().split(">");return Object.keys(Of).reduce(((e,n)=>(e[n]=t.some((e=>Of[n].test(e))),e)),{})},getFontLabel=e=>{var t;return null===(t=Object.entries(It).find((([,t])=>t===e)))||void 0===t?void 0:t[0]},getLinkAtCursor=e=>{const t=e.getSelection(),n=(0,vo.sb)(t.commonAncestorContainer),r=null==n?void 0:n.closest("a");return{link:(null==r?void 0:r.href)||"",title:(null==r?void 0:r.textContent)||t.toString()||""}},makeLink=(e,{link:t="",title:n})=>{var r;const a=(e=>{const t=e.getSelection(),n=(0,vo.sb)(t.commonAncestorContainer);return null==n?void 0:n.querySelector("img")})(e),o=null===(r=(0,vo.sb)(e.getSelection().commonAncestorContainer))||void 0===r?void 0:r.closest("a"),s=e.getDocument().createRange(),i=e.getDocument().getSelection();if(o&&(s.selectNodeContents(o),null==i||i.removeAllRanges(),null==i||i.addRange(s),e.setSelection(s)),e.makeLink(t,{target:"_blank",title:t,rel:"nofollow"}),!a){const r=(0,vo.sb)(e.getSelection().commonAncestorContainer),a=(null==r?void 0:r.closest("a"))||(null==r?void 0:r.querySelector("a"));a&&(a.textContent=n||t)}},insertImage=(e,t,n={})=>{const r=squireActions_objectSpread(squireActions_objectSpread({},n),{},{class:"".concat(n.class?"".concat(n.class," "):"","proton-embedded")});e.focus(),e.insertImage(t,r)},rightToLeftToString=e=>{switch(e){case M.dD.ON:return"rtl";default:case M.dD.OFF:return"ltr"}},kf=["children","loading","disabled","className","title"];function SquireToolbarButton_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SquireToolbarButton_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SquireToolbarButton_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SquireToolbarButton_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var SquireToolbarButton=e=>{let{children:t,loading:n=!1,disabled:r=!1,className:a="",title:o}=e,s=(0,Sn.Z)(e,kf);return(0,j.jsx)(ur.Z,{title:o,children:(0,j.jsx)("button",SquireToolbarButton_objectSpread(SquireToolbarButton_objectSpread({type:"button",disabled:r||n,className:(0,ht.dh)(["editor-toolbar-button interactive m0 flex",a])},s),{},{children:t}))})};var toolbar_SquireToolbarSeparator=()=>(0,j.jsx)(vr_Vr,{});const zf=["buttonContent","extraContent","buttonRef","className","buttonClassName"];function DropdownMenuContainer_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function DropdownMenuContainer_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DropdownMenuContainer_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DropdownMenuContainer_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const DropdownMenuContainer=(e,t)=>{let{buttonContent:n,extraContent:r,buttonRef:a,className:o,buttonClassName:s}=e,i=(0,Sn.Z)(e,zf);return(0,j.jsxs)("div",{ref:t,className:(0,ht.dh)(["dropdown-item-container flex flex-justify-space-between flex-nowrap relative",o]),children:[(0,j.jsx)(Do.Z,DropdownMenuContainer_objectSpread(DropdownMenuContainer_objectSpread({ref:a,className:(0,ht.dh)(["increase-click-surface",s])},i),{},{children:n})),r||null]})};var _f=(0,o.forwardRef)(DropdownMenuContainer);const Rf=["title","content","className","children","onOpen","noMaxSize","autoClose","disabled","originalPlacement"];function SquireToolbarDropdown_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SquireToolbarDropdown_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SquireToolbarDropdown_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SquireToolbarDropdown_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Gf,Yf,toolbar_SquireToolbarDropdown=e=>{let{title:t,content:n,className:r,children:a,onOpen:s,noMaxSize:i,autoClose:c=!0,disabled:l=!1,originalPlacement:d="bottom"}=e,u=(0,Sn.Z)(e,Rf);const[p]=(0,o.useState)((0,ht.D)("dropdown")),{anchorRef:m,isOpen:g,toggle:b,close:y}=(0,No.Z)();return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(ur.Z,{title:t,children:(0,j.jsx)(fo.Z,SquireToolbarDropdown_objectSpread(SquireToolbarDropdown_objectSpread({as:"button",type:"button",ref:m,isOpen:g,onClick:()=>{g||null==s||s(),b()},hasCaret:!0,disabled:l,caretClassName:"editor-toolbar-icon",className:(0,ht.dh)(["editor-toolbar-button interactive composer-toolbar-fontDropDown max-w100 flex flex-align-items-center flex-nowrap",r]),tabIndex:-1,title:t},u),{},{children:n}))}),(0,j.jsx)(Mo.Z,{id:p,autoClose:c,autoCloseOutside:c,originalPlacement:d,isOpen:g,noMaxSize:i,anchorRef:m,onClose:y,className:"editor-toolbar-dropdown",children:a})]})};var Uf,Ff,toolbar_SquireToolbarFontFaceDropdown=({squireRef:e,editorReady:t,defaultValue:n,value:r,update:a,onDefaultClick:s})=>{(0,o.useEffect)((()=>listenToCursor(e.current,(()=>{const t=(e=>{var t;const{family:n}=e.getFontInfo(),r=null==n?void 0:n.split(",")[0].replace(/"/g,"").trim();return null===(t=Object.entries(It).find((([,e])=>r&&e.includes(r))))||void 0===t?void 0:t[1]})(e.current);a(t||n)}))),[t]);const handleClick=t=>()=>{a(t),e.current.setFontFace(t.toString())};return(0,j.jsx)(toolbar_SquireToolbarDropdown,{originalPlacement:"bottom-left",className:"composer-toolbar-fontDropDown flex-item-fluid text-right flex no-scroll",title:(0,u.c)("Action").t(Gf||(Gf=(0,d.Z)(["Font"]))),content:(0,j.jsx)("span",{className:"text-ellipsis text-left max-w100",style:{display:"inline-block",fontFamily:r.toString()},children:getFontLabel(r)}),children:(0,j.jsx)(dropdown_DropdownMenu,{children:Object.values(It).map((e=>(0,j.jsx)(_f,{className:(0,ht.dh)([e===r&&"dropdown-item--is-selected"]),buttonClassName:"text-left","aria-pressed":e===r,isSelected:e===r,onClick:handleClick(e),style:{fontFamily:e.toString()},buttonContent:(0,j.jsx)("span",{className:"pr0-5",children:getFontLabel(e)}),extraContent:e===n?(0,j.jsx)("div",{className:"flex pl0-5 pr0-5 flex-item-noshrink",children:(0,j.jsx)(Ea.Z,{color:"weak",shape:"ghost",className:"inline-flex flex-align-self-center text-no-decoration relative",onClick:s,children:(0,j.jsx)(badge_Badge,{className:"color-info",children:(0,u.c)("Font Face Default").t(Yf||(Yf=(0,d.Z)(["Default"])))})})}):null},e)))})})};var Kf,Bf,Wf,Vf,SquireToolbarFontSizeDropdown=({squireRef:e,editorReady:t,defaultValue:n,value:r,update:a,onDefaultClick:s})=>{(0,o.useEffect)((()=>listenToCursor(e.current,(()=>{const t=(e=>{var t;const{size:n}=e.getFontInfo(),r=n?null===(t=/(\d+)px/.exec(n))||void 0===t?void 0:t[1]:void 0,a=Number(r);if(a)return ft.reduce(((e,t)=>Math.abs(a-t)<Math.abs(a-e)?t:e),ft[0])})(e.current);a(t||r)}))),[t]);const handleClick=t=>()=>{a(t),e.current.setFontSize("".concat(t,"px"))};return(0,j.jsx)(toolbar_SquireToolbarDropdown,{originalPlacement:"bottom-left",content:r,className:"flex-item-noshrink",title:(0,u.c)("Action").t(Uf||(Uf=(0,d.Z)(["Size"]))),children:(0,j.jsx)(dropdown_DropdownMenu,{children:Object.values(ft).map((e=>(0,j.jsx)(_f,{className:(0,ht.dh)([e===r&&"dropdown-item--is-selected"]),buttonClassName:"text-left","aria-pressed":e===r,isSelected:e===r,onClick:handleClick(e),buttonContent:(0,j.jsx)("span",{children:e}),extraContent:e===n?(0,j.jsx)("div",{className:"flex pl0-5 pr0-5 flex-item-noshrink",children:(0,j.jsx)(Ea.Z,{color:"weak",shape:"ghost",className:"inline-flex flex-align-self-center text-no-decoration relative",onClick:s,children:(0,j.jsx)(badge_Badge,{className:"color-info",children:(0,u.c)("Font Size Default").t(Ff||(Ff=(0,d.Z)(["Default"])))})})}):null},e)))})})},Qf=n(52391);var toolbar_SquireToolbarFontColorsDropdown=({squireRef:e,editorReady:t})=>{const[n,r]=(0,o.useState)("#222222"),[a,s]=(0,o.useState)("#FFFFFF"),[i,c]=(0,o.useState)(0);(0,o.useEffect)((()=>listenToCursor(e.current,(()=>{const{font:t,bg:n}=(e=>{const{color:t,backgroundColor:n}=e.getFontInfo();return{font:rgbToHex(t,"#222222"),bg:rgbToHex(n,"#FFFFFF")}})(e.current);r(t),s(n)}))),[t]);const l=[{title:(0,u.c)("Info").t(Kf||(Kf=(0,d.Z)(["Text color"]))),content:(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(color_ColorSelector,{selected:n,onChange:t=>{r(t),e.current.setTextColour(t)},colors:Mt})})},{title:(0,u.c)("Info").t(Bf||(Bf=(0,d.Z)(["Background color"]))),content:(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(color_ColorSelector,{selected:a,onChange:t=>{s(t),e.current.setHighlightColour(t)},colors:Mt})})}];return(0,j.jsx)(toolbar_SquireToolbarDropdown,{noMaxSize:!0,autoClose:!1,content:(0,j.jsx)(pr.Z,{name:"color",alt:(0,u.c)("Action").t(Wf||(Wf=(0,d.Z)(["Color"])))}),className:"flex-item-noshrink",title:(0,u.c)("Action").t(Vf||(Vf=(0,d.Z)(["Color"]))),children:(0,j.jsx)("div",{className:"p1",children:(0,j.jsx)(Qf.Z,{tabs:l,value:i,onChange:c})})})};let Hf;var Xf,Jf,qf,$f,eM,tM;!function(e){e.Left="left",e.Center="center",e.Justify="justify",e.Right="right"}(Hf||(Hf={}));var nM,rM,aM,oM,sM,iM,cM,lM,dM,uM,pM,mM,gM,jM,bM,toolbar_SquireToolbarAlignmentDropdown=({handleAlignment:e,squireInfos:t})=>(0,j.jsx)(toolbar_SquireToolbarDropdown,{content:(0,j.jsx)(pr.Z,{name:"align-left",alt:(0,u.c)("Action").t(Xf||(Xf=(0,d.Z)(["Alignment"])))}),className:"flex-item-noshrink",title:(0,u.c)("Action").t(Jf||(Jf=(0,d.Z)(["Alignment"]))),children:(0,j.jsxs)(dropdown_DropdownMenu,{children:[(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap",isSelected:t.alignLeft,"aria-pressed":t.alignLeft,onClick:e(Hf.Left),children:[(0,j.jsx)(pr.Z,{name:"align-left",className:"mt0-25"}),(0,j.jsx)("span",{className:"ml0-5 mtauto mbauto flex-item-fluid",children:(0,u.c)("Info").t(qf||(qf=(0,d.Z)(["Align left"])))})]}),(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap",isSelected:t.alignCenter,"aria-pressed":t.alignCenter,onClick:e(Hf.Center),children:[(0,j.jsx)(pr.Z,{name:"align-center",className:"mt0-25"}),(0,j.jsx)("span",{className:"ml0-5 mtauto mbauto flex-item-fluid",children:(0,u.c)("Info").t($f||($f=(0,d.Z)(["Center"])))})]}),(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap",isSelected:t.alignRight,"aria-pressed":t.alignRight,onClick:e(Hf.Right),children:[(0,j.jsx)(pr.Z,{name:"align-right",className:"mt0-25"}),(0,j.jsx)("span",{className:"ml0-5 mtauto mbauto flex-item-fluid",children:(0,u.c)("Info").t(eM||(eM=(0,d.Z)(["Align right"])))})]}),(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap",isSelected:t.alignJustify,"aria-pressed":t.alignJustify,onClick:e(Hf.Justify),children:[(0,j.jsx)(pr.Z,{name:"align-justify",className:"mt0-25"}),(0,j.jsx)("span",{className:"ml0-5 mtauto mbauto flex-item-fluid",children:(0,u.c)("Info").t(tM||(tM=(0,d.Z)(["Justify"])))})]})]})});const getClassname=e=>e?void 0:"visibility-hidden";var toolbar_SquireToolbarMoreDropdown=({metadata:e,squireRef:t,onChangeMetadata:n,children:r,isNarrow:a=!1,squireInfos:o,squireActions:s})=>{const i=e.rightToLeft===M.dD.ON,{isPlainText:c}=e,handleChangeDirection=e=>()=>{n({rightToLeft:e}),setTimeout((()=>{return n=t.current,r=e,void n.setTextDirection(rightToLeftToString(r));var n,r}))},handleChangePlainText=t=>()=>{e.isPlainText!==t&&n(t?{isPlainText:!0}:{isPlainText:!1})};return(0,j.jsx)(toolbar_SquireToolbarDropdown,{className:"flex-item-noshrink mlauto editor-toolbar-more-dropdown",title:(0,u.c)("Action").t(nM||(nM=(0,d.Z)(["More"]))),"data-testid":"squire-more",children:(0,j.jsxs)(dropdown_DropdownMenu,{className:"editor-toolbar-more-menu flex-item-noshrink",children:[a&&[(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap",onClick:s.handleUnorderedList,children:[(0,j.jsx)(pr.Z,{name:"check",className:(0,ht.dh)(["mt0-25",getClassname(o.unorderedList)])}),(0,j.jsx)("span",{className:"ml0-5 mtauto mbauto flex-item-fluid",children:(0,u.c)("Action").t(rM||(rM=(0,d.Z)(["Unordered list"])))}),(0,j.jsx)(pr.Z,{name:"list",className:"mt0-25 mr0-5"})]},12),(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap",onClick:s.handleOrderedList,children:[(0,j.jsx)(pr.Z,{name:"check",className:(0,ht.dh)(["mt0-25",getClassname(o.orderedList)])}),(0,j.jsx)("span",{className:"ml0-5 mtauto mbauto flex-item-fluid",children:(0,u.c)("Action").t(aM||(aM=(0,d.Z)(["Ordered list"])))}),(0,j.jsx)(pr.Z,{name:"list-numbers",className:"mt0-25 mr0-5"})]},13),(0,j.jsx)("div",{className:"dropdown-item-hr"},"hr-1"),(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap",onClick:s.handleAlignment(Hf.Left),children:[(0,j.jsx)(pr.Z,{name:"check",className:(0,ht.dh)(["mt0-25",getClassname(o.alignLeft)])}),(0,j.jsx)("span",{className:"ml0-5 mtauto mbauto flex-item-fluid",children:(0,u.c)("Action").t(oM||(oM=(0,d.Z)(["Align left"])))}),(0,j.jsx)(pr.Z,{name:"align-left",className:"mt0-25 mr0-5"})]},8),(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap",onClick:s.handleAlignment(Hf.Center),children:[(0,j.jsx)(pr.Z,{name:"check",className:(0,ht.dh)(["mt0-25",getClassname(o.alignCenter)])}),(0,j.jsx)("span",{className:"ml0-5 mtauto mbauto flex-item-fluid",children:(0,u.c)("Action").t(sM||(sM=(0,d.Z)(["Align center"])))}),(0,j.jsx)(pr.Z,{name:"align-center",className:"mt0-25 mr0-5"})]},9),(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap",onClick:s.handleAlignment(Hf.Right),children:[(0,j.jsx)(pr.Z,{name:"check",className:(0,ht.dh)(["mt0-25",getClassname(o.alignRight)])}),(0,j.jsx)("span",{className:"ml0-5 mtauto mbauto flex-item-fluid",children:(0,u.c)("Action").t(iM||(iM=(0,d.Z)(["Align right"])))}),(0,j.jsx)(pr.Z,{name:"align-right",className:"mt0-25 mr0-5"})]},10),(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap",onClick:s.handleAlignment(Hf.Justify),children:[(0,j.jsx)(pr.Z,{name:"check",className:(0,ht.dh)(["mt0-25",getClassname(o.alignJustify)])}),(0,j.jsx)("span",{className:"ml0-5 mtauto mbauto flex-item-fluid",children:(0,u.c)("Action").t(cM||(cM=(0,d.Z)(["Justify"])))}),(0,j.jsx)(pr.Z,{name:"align-justify",className:"mt0-25 mr0-5"})]},11),(0,j.jsx)("div",{className:"dropdown-item-hr"},"hr-2"),(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap",onClick:s.handleBlockquote,children:[(0,j.jsx)(pr.Z,{name:"check",className:(0,ht.dh)(["mt0-25",getClassname(o.blockquote)])}),(0,j.jsx)("span",{className:"ml0-5 mtauto mbauto flex-item-fluid",children:(0,u.c)("Action").t(lM||(lM=(0,d.Z)(["Quote"])))}),(0,j.jsx)(pr.Z,{name:"quote-right",className:"mt0-25 mr0-5"})]},14),(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap",onClick:s.handleLink,children:[(0,j.jsx)(pr.Z,{name:"check",className:(0,ht.dh)(["mt0-25","visibility-hidden"])}),(0,j.jsx)("span",{className:"ml0-5 mtauto mbauto flex-item-fluid",children:(0,u.c)("Action").t(dM||(dM=(0,d.Z)(["Insert link"])))}),(0,j.jsx)(pr.Z,{name:"link",className:"mt0-25 mr0-5"})]},15),(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap",onClick:s.handleClearFormatting,children:[(0,j.jsx)(pr.Z,{name:"check",className:(0,ht.dh)(["mt0-25","visibility-hidden"])}),(0,j.jsx)("span",{className:"ml0-5 mtauto mbauto flex-item-fluid",children:(0,u.c)("Action").t(uM||(uM=(0,d.Z)(["Clear all formatting"])))}),(0,j.jsx)(pr.Z,{name:"eraser",className:"mt0-25 mr0-5"})]},16),(0,j.jsx)("div",{className:"dropdown-item-hr"},"hr-3"),e.supportImages&&[(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap",onClick:s.handleImage,children:[(0,j.jsx)(pr.Z,{name:"check",className:(0,ht.dh)(["mt0-25","visibility-hidden"])}),(0,j.jsx)("span",{className:"ml0-5 mtauto mbauto flex-item-fluid",children:(0,u.c)("Action").t(pM||(pM=(0,d.Z)(["Insert image"])))}),(0,j.jsx)(pr.Z,{name:"file-image",className:"mt0-25 mr0-5"})]},17),(0,j.jsx)("div",{className:"dropdown-item-hr"},"hr-4")]],e.supportRightToLeft&&!e.isPlainText&&[(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap",onClick:handleChangeDirection(M.dD.OFF),children:[(0,j.jsx)(pr.Z,{name:"check",className:(0,ht.dh)(["mt0-25",getClassname(!i)])}),(0,j.jsx)("span",{className:"ml0-5 mtauto mbauto flex-item-fluid",children:(0,u.c)("Info").t(mM||(mM=(0,d.Z)(["Left to Right"])))})]},1),(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap",onClick:handleChangeDirection(M.dD.ON),children:[(0,j.jsx)(pr.Z,{name:"check",className:(0,ht.dh)(["mt0-25",getClassname(i)])}),(0,j.jsx)("span",{className:"ml0-5 mtauto mbauto flex-item-fluid",children:(0,u.c)("Info").t(gM||(gM=(0,d.Z)(["Right to Left"])))})]},2),(0,j.jsx)("div",{className:"dropdown-item-hr"},"hr-5")],e.supportPlainText&&[(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap no-border-bottom",onClick:handleChangePlainText(!1),"data-testid":"squire-to-html",children:[(0,j.jsx)(pr.Z,{name:"check",className:(0,ht.dh)(["mt0-25",getClassname(!c)])}),(0,j.jsx)("span",{className:"ml0-5 mtauto mbauto flex-item-fluid",children:(0,u.c)("Info").t(jM||(jM=(0,d.Z)(["Normal"])))})]},3),(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap",onClick:handleChangePlainText(!0),"data-testid":"squire-to-plaintext",children:[(0,j.jsx)(pr.Z,{name:"check",className:(0,ht.dh)(["mt0-25",getClassname(c)])}),(0,j.jsx)("span",{className:"ml0-5 mtauto mbauto flex-item-fluid",children:(0,u.c)("Info").t(bM||(bM=(0,d.Z)(["Plain text"])))})]},4)],r]})})};const yM=["id","fontSize","onChange","loading"];function FontSizeSelect_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var layouts_FontSizeSelect=e=>{let{id:t,fontSize:n,onChange:r,loading:a}=e,o=(0,Sn.Z)(e,yM);const s=ft.map((e=>({text:e.toString(),value:e.toString()}))),i=null==n?xt:n;return(0,j.jsx)(Ec.Z,function FontSizeSelect_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FontSizeSelect_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FontSizeSelect_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:t,value:i,options:s,disabled:a,onChange:({target:e})=>{r(parseInt(e.value,10))}},o))};const hM=["id","fontFace","onChange","loading"];function FontFaceSelect_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var IM,fM,MM,NM,xM,layouts_FontFaceSelect=e=>{let{id:t,fontFace:n,onChange:r,loading:a}=e,o=(0,Sn.Z)(e,hM);const s=Object.entries(It).map((([e,t])=>({text:e,value:t}))),i=null==n?Nt:n;return(0,j.jsx)(Ec.Z,function FontFaceSelect_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FontFaceSelect_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FontFaceSelect_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:t,value:i,options:s,disabled:a,onChange:({target:e})=>{r(e.value)}},o))};const vM=["onChange","squireRef","onClose"];function UpdateFontModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function UpdateFontModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?UpdateFontModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UpdateFontModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wM,DM,SM,OM,AM,CM,EM,LM,PM,ZM,TM,kM,zM,_M,RM,GM,YM,UM,FM,modals_UpdateFontModal=e=>{let{onChange:t,squireRef:n,onClose:r}=e,a=(0,Sn.Z)(e,vM);const s=(0,Dn.Z)(),[{FontFace:i=Nt,FontSize:c=xt}={}]=useMailSettings(),[l,p]=(0,o.useState)(i),[m,g]=(0,o.useState)(c),[b,y]=(0,o.useState)(!1),{createNotification:h}=(0,hn.Z)(),{call:I}=(0,Ie.Z)(),f=l!==i,M=m!==c,N=f||M;(0,o.useEffect)((()=>{p(i)}),[i]),(0,o.useEffect)((()=>{g(c)}),[c]);return(0,j.jsx)(On.Z,UpdateFontModal_objectSpread(UpdateFontModal_objectSpread({},a),{},{onSubmit:async()=>{y(!0),f&&(await s((0,Fg.Qz)(l)),n.current.setFontFace(l)),M&&(await s((0,Fg.A1)(m)),n.current.setFontSize(m.toString())),N&&(await I(),h({text:(0,u.c)("Success").t(IM||(IM=(0,d.Z)(["Preference saved"])))})),t(l,m),y(!1),null==r||r()},loading:b,submitProps:{disabled:!N},onClose:r,submit:(0,u.c)("Action").t(fM||(fM=(0,d.Z)(["Update"]))),small:!0,children:(0,j.jsxs)("div",{children:[(0,j.jsx)(Ca.Z,{id:"update-font-modal",className:"mb1",children:(0,u.c)("Update font modal").t(MM||(MM=(0,d.Z)(["Update default font and size"])))}),(0,j.jsxs)("div",{className:"flex flex-row",children:[(0,j.jsx)("div",{className:"mr1",children:(0,j.jsx)(layouts_FontFaceSelect,{id:"fontFace",fontFace:l,onChange:p,loading:b})}),(0,j.jsx)("div",{children:(0,j.jsx)(layouts_FontSizeSelect,{id:"fontSize",fontSize:m,onChange:g,loading:b})})]}),(0,j.jsxs)("p",{children:[(0,j.jsx)("span",{className:"color-weak",children:(0,u.c)("Update font modal").t(NM||(NM=(0,d.Z)(["Your default font will look like following:"])))}),(0,j.jsx)("br",{}),(0,j.jsx)("span",{className:"mt0",style:{fontFamily:l,fontSize:"".concat(m,"px")},children:(0,u.c)("Update font modal").t(xM||(xM=(0,d.Z)(["Today is a good day to write an email"])))})]})]})}))};const SquireToolbar=({metadata:e,onChangeMetadata:t,isNarrow:n,squireRef:r,editorReady:a,onAddImages:s,defaultFont:i})=>{const c=hooks_useIsMounted(),[l,p]=(0,o.useState)({}),{createModal:m}=(0,In.Z)(),g=(null==i?void 0:i.FontSize)||xt,b=(null==i?void 0:i.FontFace)||Nt,[y,h]=(0,o.useState)(g),[I,f]=(0,o.useState)(b),M=(0,o.useCallback)((()=>{m((0,j.jsx)(modals_UpdateFontModal,{squireRef:r,onChange:(e,t)=>{f(e),h(t)}}))}),[]),N=(0,mn.ZP)((()=>{if(c()){const e=getPathInfo(r.current);(0,WI.Z)(l,e)||p(e)}})),x=(0,mn.ZP)(N,{debounce:500}),forceRefresh=e=>()=>{e(),N()};(0,o.useEffect)((()=>{const e=listenToCursor(r.current,x);return()=>{var t;null===(t=x.abort)||void 0===t||t.call(x),null==e||e()}}),[a]);const v=(0,o.useCallback)(forceRefresh((()=>Cf(r.current))),[]),w=(0,o.useCallback)(forceRefresh((()=>Ef(r.current))),[]),D=(0,o.useCallback)(forceRefresh((()=>Lf(r.current))),[]),S=(0,o.useCallback)((e=>forceRefresh((()=>{r.current.setTextAlignment(e)}))),[]),O=(0,o.useCallback)(forceRefresh((()=>Pf(r.current))),[]),A=(0,o.useCallback)(forceRefresh((()=>Zf(r.current))),[]),C=(0,o.useCallback)(forceRefresh((()=>Tf(r.current))),[]),E=(0,o.useCallback)((e=>{makeLink(r.current,e)}),[]),L=(0,o.useCallback)((e=>{var t;insertImage(r.current,e),null===(t=r.current)||void 0===t||t.fireEvent("input")}),[]),P=(0,o.useCallback)((()=>{const e=getLinkAtCursor(r.current);m((0,j.jsx)(InsertLinkModal,{inputLink:e,onSubmit:E}))}),[]),Z=(0,o.useCallback)((()=>{m((0,j.jsx)(modals_InsertImageModal,{onAddUrl:L,onAddImages:s}))}),[]),T=(0,o.useCallback)((()=>{r.current.removeAllFormatting()}),[]),k=(0,o.useMemo)((()=>({handleAlignment:S,handleUnorderedList:A,handleOrderedList:O,handleBlockquote:C,handleLink:P,handleClearFormatting:T,handleImage:Z})),[S,A,O,C,P,T,Z]),switchToPlainText=()=>{t({isPlainText:!1})};return e.isPlainText?(0,j.jsx)(Ea.Z,{className:"mlauto",onClick:switchToPlainText,"data-testid":"squire-to-html",children:(0,u.c)("Action").t(wM||(wM=(0,d.Z)(["Switch to rich text"])))}):(0,j.jsxs)(xc,{className:"rounded-xl editor-toolbar",children:[(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(toolbar_SquireToolbarFontFaceDropdown,{squireRef:r,editorReady:a,defaultValue:b,value:I,update:f,onDefaultClick:M}),(0,j.jsx)(toolbar_SquireToolbarSeparator,{}),(0,j.jsx)(SquireToolbarFontSizeDropdown,{squireRef:r,editorReady:a,defaultValue:g,value:y,update:h,onDefaultClick:M}),(0,j.jsx)(toolbar_SquireToolbarSeparator,{}),(0,j.jsx)(toolbar_SquireToolbarFontColorsDropdown,{squireRef:r,editorReady:a}),(0,j.jsx)(toolbar_SquireToolbarSeparator,{}),(0,j.jsx)(SquireToolbarButton,{onClick:v,"aria-pressed":l.bold,className:(0,ht.dh)(["flex-item-noshrink",l.bold&&"is-active"]),title:(0,u.c)("Action").t(DM||(DM=(0,d.Z)(["Bold"]))),tabIndex:-1,children:(0,j.jsx)(pr.Z,{name:"bold",className:"mauto",alt:(0,u.c)("Action").t(SM||(SM=(0,d.Z)(["Bold"])))})}),(0,j.jsx)(SquireToolbarButton,{onClick:w,"aria-pressed":l.italic,className:(0,ht.dh)(["flex-item-noshrink",l.italic&&"is-active"]),title:(0,u.c)("Action").t(OM||(OM=(0,d.Z)(["Italic"]))),tabIndex:-1,children:(0,j.jsx)(pr.Z,{name:"italic",className:"mauto",alt:(0,u.c)("Action").t(AM||(AM=(0,d.Z)(["Italic"])))})}),(0,j.jsx)(SquireToolbarButton,{onClick:D,"aria-pressed":l.underline,className:(0,ht.dh)(["flex-item-noshrink",l.underline&&"is-active"]),title:(0,u.c)("Action").t(CM||(CM=(0,d.Z)(["Underline"]))),tabIndex:-1,children:(0,j.jsx)(pr.Z,{name:"underline",className:"mauto",alt:(0,u.c)("Action").t(EM||(EM=(0,d.Z)(["Underline"])))})}),!n&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(toolbar_SquireToolbarSeparator,{}),(0,j.jsx)(SquireToolbarButton,{onClick:A,"aria-pressed":l.unorderedList,className:(0,ht.dh)(["flex-item-noshrink",l.unorderedList&&"is-active"]),title:(0,u.c)("Action").t(LM||(LM=(0,d.Z)(["Unordered list"]))),tabIndex:-1,children:(0,j.jsx)(pr.Z,{name:"list",className:"mauto on-rtl-mirror",alt:(0,u.c)("Action").t(PM||(PM=(0,d.Z)(["Unordered list"])))})}),(0,j.jsx)(SquireToolbarButton,{onClick:O,"aria-pressed":l.orderedList,className:(0,ht.dh)(["flex-item-noshrink",l.orderedList&&"is-active"]),title:(0,u.c)("Action").t(ZM||(ZM=(0,d.Z)(["Ordered list"]))),tabIndex:-1,children:(0,j.jsx)(pr.Z,{name:"list-numbers",className:"mauto on-rtl-mirror",alt:(0,u.c)("Action").t(TM||(TM=(0,d.Z)(["Ordered list"])))})}),(0,j.jsx)(toolbar_SquireToolbarSeparator,{}),(0,j.jsx)(toolbar_SquireToolbarAlignmentDropdown,{handleAlignment:S,squireInfos:l}),(0,j.jsx)(toolbar_SquireToolbarSeparator,{}),(0,j.jsx)(SquireToolbarButton,{onClick:C,"aria-pressed":l.blockquote,className:(0,ht.dh)(["flex-item-noshrink",l.blockquote&&"is-active"]),title:(0,u.c)("Action").t(kM||(kM=(0,d.Z)(["Quote"]))),tabIndex:-1,children:(0,j.jsx)(pr.Z,{name:"quote-right",className:"mauto",alt:(0,u.c)("Action").t(zM||(zM=(0,d.Z)(["Quote"])))})}),(0,j.jsx)(SquireToolbarButton,{onClick:P,className:"flex-item-noshrink",title:(0,u.c)("Action").t(_M||(_M=(0,d.Z)(["Insert link"]))),tabIndex:-1,children:(0,j.jsx)(pr.Z,{name:"link",className:"mauto",alt:(0,u.c)("Action").t(RM||(RM=(0,d.Z)(["Insert link"])))})}),(0,j.jsx)(SquireToolbarButton,{onClick:T,className:"flex-item-noshrink",title:(0,u.c)("Action").t(GM||(GM=(0,d.Z)(["Clear all formatting"]))),tabIndex:-1,children:(0,j.jsx)(pr.Z,{name:"eraser",className:"mauto",alt:(0,u.c)("Action").t(YM||(YM=(0,d.Z)(["Clear all formatting"])))})}),(0,j.jsx)(toolbar_SquireToolbarSeparator,{}),(0,j.jsx)(SquireToolbarButton,{onClick:Z,className:"flex-item-noshrink",title:(0,u.c)("Action").t(UM||(UM=(0,d.Z)(["Insert image"]))),tabIndex:-1,children:(0,j.jsx)(pr.Z,{name:"file-image",className:"mauto",alt:(0,u.c)("Action").t(FM||(FM=(0,d.Z)(["Insert image"])))})})]})]}),(e.supportRightToLeft||e.supportPlainText||n)&&(0,j.jsx)(toolbar_SquireToolbarMoreDropdown,{metadata:e,squireRef:r,onChangeMetadata:t,isNarrow:n,squireInfos:l,squireActions:k})]})};var KM,BM,WM=(0,o.memo)(SquireToolbar),VM=n(95589);const QM=["placeholder","metadata","onReady","onFocus","onInput","onAddImages","showEllipseButton","onEllipseClick","keydownHandler"];function SquireIframe_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SquireIframe_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SquireIframe_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SquireIframe_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const SquireIframe=(e,t)=>{let{placeholder:n,metadata:r,onReady:a,onFocus:s,onInput:i,onAddImages:c,showEllipseButton:l,onEllipseClick:p,keydownHandler:m}=e,g=(0,Sn.Z)(e,QM);const{createNotification:b}=(0,hn.Z)(),[y,h]=(0,o.useState)(!1),[I,f]=(0,o.useState)(!1),[M,N]=(0,o.useState)(!1),x=(0,o.useRef)(null);(0,o.useEffect)((()=>{var e,t,n,r;const handleLoad=()=>h(!0),a=(null===(e=x.current)||void 0===e?void 0:e.contentDocument)&&(null===(t=x.current)||void 0===t||null===(n=t.contentWindow)||void 0===n?void 0:n.document);return"complete"===(null==a?void 0:a.readyState)&&handleLoad(),null===(r=x.current)||void 0===r||r.addEventListener("load",handleLoad),()=>{var e;return null===(e=x.current)||void 0===e?void 0:e.removeEventListener("load",handleLoad)}}),[]),(0,o.useEffect)((()=>{if(y&&!I){var e,n;(async e=>{try{const n=await initSquire(e,r.supportImages,p);((e,t)=>{e.current=t})(t,n),f(!0),a()}catch(e){b({type:"error",text:(0,j.jsxs)(j.Fragment,{children:["".concat((0,u.c)("Error").t(KM||(KM=(0,d.Z)(["The composer failed to load."])))," "),(0,j.jsx)(VM.Z,{className:"text-bold",onClick:()=>{window.location.reload()},children:(0,u.c)("Error").t(BM||(BM=(0,d.Z)(["Please refresh the page."])))})]}),expiration:2e4})}})(null===(e=x.current)||void 0===e||null===(n=e.contentWindow)||void 0===n?void 0:n.document)}}),[y]),(0,o.useEffect)((()=>{var e,t;I&&((e,t)=>{var n;const r=e.body.querySelector("#ellipsis");null!=r&&null!==(n=r.style)&&void 0!==n&&n.display&&(r.style.display=t?"block":"none")})(null===(e=x.current)||void 0===e||null===(t=e.contentWindow)||void 0===t?void 0:t.document,l)}),[I,l]);const v=(0,mn.ZP)((()=>{s(),document.dispatchEvent(new CustomEvent("dropdownclose"))})),w=(0,mn.ZP)((()=>{const e=getSquireRef(t).getHTML();var n;N(!(n=e)||"<div><br /></div>"===n||"<div><br></div>"===n),i(e)})),D=(0,mn.ZP)((e=>{setTimeout((()=>{w()}),100),r.supportImages&&((e,t)=>{const{clipboardData:n}=e,r=Array.from((null==n?void 0:n.files)||(null==n?void 0:n.items)||[]);r.length&&r.every((e=>wt.includes(e.type)))&&t(r)})(e,c)})),handleCursor=()=>(e=>{const t=e.getDocument(),n=t.querySelector("html"),r=null==n?void 0:n.getBoundingClientRect(),a=t.body,o=e.getCursorPosition();if(n&&r&&a&&o&&o.bottom>r.height){var s;const e=window.getComputedStyle(a).getPropertyValue("paddingBottom"),t=parseInt((null===(s=/(\d+)px/.exec(e))||void 0===s?void 0:s[1])||"8",10);a.scroll({top:a.scrollTop+o.bottom-r.height+t})}})(getSquireRef(t)),S=(0,mn.ZP)((e=>{var t;const n=new CustomEvent(e.type,{bubbles:!0});n.dataTransfer=e.dataTransfer,null===(t=x.current)||void 0===t||t.dispatchEvent(n)})),{createModal:O}=(0,In.Z)(),handleKeyDown=(e,t)=>{const n=(0,mr.V5)()?e.metaKey:e.ctrlKey;if("k"===e.key&&n)return e.preventDefault(),e.stopPropagation(),void(e=>{const t=getLinkAtCursor(e);O((0,j.jsx)(InsertLinkModal,{inputLink:t,onSubmit:t=>makeLink(e,t)}))})(t);null==m||m(e)};return(0,o.useEffect)((()=>{if(I){var e;const n=getSquireRef(t),a=null===(e=x.current)||void 0===e?void 0:e.contentDocument,keydownHandler=e=>handleKeyDown(e,n),dropHandler=e=>((e,t)=>{if(!e.dataTransfer)return;if(e.dataTransfer.types.some((e=>"text/html"===e))||!r.supportImages){const n=e.dataTransfer.getData("text/html");e.preventDefault(),t.insertHTML((0,et.yw)(n))}})(e,n);return n.addEventListener("focus",v),n.addEventListener("input",w),n.addEventListener("paste",D),null==a||a.addEventListener("dragenter",S),null==a||a.addEventListener("dragleave",S),null==a||a.addEventListener("dragover",S),null==a||a.addEventListener("drop",dropHandler),n.addEventListener("cursor",handleCursor),n.addEventListener("keyup",w),n.addEventListener("keydown",keydownHandler),()=>{n.removeEventListener("focus",v),n.removeEventListener("input",w),n.removeEventListener("paste",D),null==a||a.removeEventListener("dragenter",S),null==a||a.removeEventListener("dragleave",S),null==a||a.removeEventListener("dragover",S),null==a||a.removeEventListener("drop",dropHandler),n.removeEventListener("cursor",handleCursor),n.removeEventListener("keyup",w),n.removeEventListener("keydown",keydownHandler)}}}),[I]),(0,j.jsxs)("div",{className:"editor-squire-wrapper fill w100 h100 scroll-if-needed flex-item-fluid relative",children:[n&&M&&(0,j.jsx)("div",{className:"absolute-only no-pointer-events placeholder",children:n}),(0,j.jsx)("iframe",SquireIframe_objectSpread({title:"Editor",ref:x,frameBorder:"0",className:"w100 h100 squireIframe","data-testid":"squire-iframe"},g))]})};var HM=(0,o.forwardRef)(SquireIframe);function SquireEditor_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SquireEditor_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SquireEditor_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SquireEditor_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const XM={supportImages:!0,supportPlainText:!1,isPlainText:!1,supportRightToLeft:!1,rightToLeft:M.dD.OFF},SquireEditor=({id:e,className:t,placeholder:n,metadata:r=XM,onChange:a=c.ZT,onChangeMetadata:s=c.ZT,isNarrow:i=!1,showEllipseButton:l=!1,onEllipseClick:d=c.ZT,disabled:u=!1,onReady:p=c.ZT,onFocus:m=c.ZT,onAddImages:g=c.ZT,keydownHandler:b,defaultFont:y},h)=>{const[I,f]=(0,o.useState)(!1),N=(0,o.useRef)(null),x=(0,o.useRef)(null),v=(0,o.useMemo)((()=>SquireEditor_objectSpread(SquireEditor_objectSpread({},XM),r)),[r]);(0,o.useEffect)((()=>{h.current={get value(){var e,t;return v.isPlainText?(null===(t=x.current)||void 0===t?void 0:t.value)||"":(null===(e=N.current)||void 0===e?void 0:e.getHTML())||""},set value(e){var t,n,r,a;v.isPlainText?x.current&&(x.current.value=e,setTimeout((()=>{var e;return null===(e=x.current)||void 0===e?void 0:e.setSelectionRange(0,0)}))):(null===(t=N.current)||void 0===t||t.setHTML(e),r=N.current,a=v.rightToLeft||M.dD.OFF,r.forEachBlock((e=>{a?e.setAttribute("dir",rightToLeftToString(a)):e.removeAttribute("dir")}),!0),null===(n=N.current)||void 0===n||n.fireEvent("input"))},get document(){if(!v.isPlainText)return N.current.getDocument()},focus:()=>{var e,t;v.isPlainText?null===(e=x.current)||void 0===e||e.focus():null===(t=N.current)||void 0===t||t.focus()},insertImage:(e,t={})=>{var n;insertImage(N.current,e,t),a(null===(n=N.current)||void 0===n?void 0:n.getHTML())},clearUndoHistory:()=>{var e;N.current&&(e=N.current).setHTML(e.getHTML())}}}),[v]),(0,o.useEffect)((()=>{v.isPlainText&&(p(),f(!1))}),[I,v.isPlainText]);return(0,j.jsxs)("div",{className:(0,ht.dh)([t,"editor w100 h100 rounded flex flex-column-reverse"]),children:[(0,j.jsx)("div",{className:(0,ht.dh)(["w100 h100 flex-item-fluid relative mt0-5",u&&"editor--disabled"]),children:v.isPlainText?(0,j.jsx)("textarea",{id:e,className:"covered-absolute w100 h100 pt0-5 pb1 pl0-5 pr0-5",ref:x,onFocus:m,onChange:e=>{a(e.target.value)},placeholder:n,"data-test-id":"composer:body","data-testid":"squire-textarea"}):(0,j.jsx)(HM,{id:e,ref:N,placeholder:n,metadata:v,onFocus:m,onReady:()=>{p(),f(!0)},onInput:a,onAddImages:g,showEllipseButton:l,onEllipseClick:d,"data-test-id":"composer:body",keydownHandler:b})}),(0,j.jsx)(WM,{metadata:v,onChangeMetadata:s,squireRef:N,isNarrow:i,editorReady:I,onAddImages:g,defaultFont:y})]})};var JM,qM=(0,o.memo)((0,o.forwardRef)(SquireEditor));function SquireEditorWrapper_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SquireEditorWrapper_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SquireEditorWrapper_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SquireEditorWrapper_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const SquireEditorWrapper=({message:e,disabled:t,breakpoints:n,onReady:r,onChange:a,onChangeContent:s,onAddAttachments:i,onRemoveAttachment:l,onFocus:p,contentFocusRef:m,editorActionsRef:g,keydownHandler:b=c.ZT})=>{var y,h;const[I]=useMailSettings(),[f]=(0,yn.ZP)(),N=hooks_useIsMounted(),[x,v]=(0,o.useState)(!1),[w,D]=(0,o.useState)(!1),[S,O]=(0,o.useState)(!0),[A,C]=(0,o.useState)(),E=(0,o.useRef)(!1),[L,P]=(0,o.useState)([]),Z=(0,o.useRef)(null),T=V(e.data),k=null!==(y=e.data)&&void 0!==y&&y.RightToLeft?M.dD.ON:M.dD.OFF,z=(0,o.useMemo)((()=>I?(0,Ne.ei)(I,["FontFace","FontSize"]):void 0),[I]),_=(0,o.useMemo)((()=>({supportPlainText:!0,isPlainText:T,supportRightToLeft:!0,rightToLeft:k,supportImages:!0})),[T,k]);(0,o.useEffect)((()=>{var t;T&&void 0!==e.plainText&&D(!0),!T&&null!==(t=e.document)&&void 0!==t&&t.innerHTML&&D(!0)}),[T,e.plainText,null===(h=e.document)||void 0===h?void 0:h.innerHTML]);const R=(0,mn.ZP)((()=>{var e;const t=(null===(e=Z.current)||void 0===e?void 0:e.value)||"";return S||""===A?t:t+A})),G=(0,mn.ZP)((()=>{if(!N())return;const t=(R().match(/(rel=("([^"]|"")*"))|(data-embedded-img=("([^"]|"")*"))/g)||[]).filter((e=>'rel="noreferrer nofollow noopener"'!==e)).map((e=>e.replace(/rel="|data-embedded-img="/,""))).map((e=>e.slice(4,-1)));const n=(0,xe.Hg)(L,t);var r;n.length&&(n.forEach((t=>{var n;const r=null===(n=getEmbeddedImages(e).find((e=>e.cid===t)))||void 0===n?void 0:n.attachment;r&&l(r)})),null===(r=Z.current)||void 0===r||r.clearUndoHistory());P(t)}),{debounce:500}),handleSetContent=e=>{let t;if(T)t=getContent(e);else{const[n,r]=locateBlockquote(e.document);void 0===A?(t=n,C(r),O(""===r)):t=S?n+r:n}E.current=!0,Z.current&&(Z.current.value=t),G()};(0,o.useEffect)((()=>{T&&v(!1),w&&(T||x)&&(handleSetContent(e),r())}),[x,w,T]),(0,o.useEffect)((()=>{w&&(T||x&&void 0!==A)&&s(R(),!1,!0)}),[w,T,x,void 0!==A]);const Y=(0,o.useCallback)((e=>{if(!T){if(E.current)return void(E.current=!1);G()}s(S?e:e+A)}),[s,T,S]),U=(0,mn.ZP)((t=>{void 0!==t.isPlainText&&(t.isPlainText?((()=>{const t=M.LO.PLAINTEXT,n=exportPlainText(R()),r=e.messageImages?SquireEditorWrapper_objectSpread(SquireEditorWrapper_objectSpread({},e.messageImages),{},{images:[]}):void 0;a({plainText:n,data:{MIMEType:t},messageImages:r})})(),O(!0)):(()=>{const t=M.LO.DEFAULT,n=plainTextToHTML(e.data,e.plainText,I,f),r=setDocumentContent(e.document,n);a({document:r,data:{MIMEType:t}})})()),void 0!==t.rightToLeft&&a({data:{RightToLeft:t.rightToLeft}})})),F=(0,mn.ZP)(((e,t)=>{var n;const{cid:r}=readContentIDandLocation(e),a=createBlob(e,t);null===(n=Z.current)||void 0===n||n.insertImage(a,{"data-embedded-img":"cid:".concat(r),alt:e.Name})})),K=(0,mn.ZP)((async e=>{var t;const n=null===(t=Z.current)||void 0===t?void 0:t.document;n&&((e,t)=>{const{cid:n,cloc:r}=readContentIDandLocation(t);findEmbedded(n,r,e).map((e=>e.remove()))})(n,e)}));(0,o.useEffect)((()=>{g.current={getContent:R,setContent:handleSetContent,insertEmbedded:F,removeEmbedded:K},m.current=()=>{var e;null===(e=Z.current)||void 0===e||e.focus()}}),[S,A,T]);const B=(0,mn.ZP)((()=>{if(O(!0),E.current=!0,Z.current){const e=Z.current.value;Z.current.value=e+A}})),W=(0,o.useCallback)((()=>v(!0)),[]);return(0,j.jsx)(qM,{ref:Z,placeholder:(0,u.c)("Placeholder").t(JM||(JM=(0,d.Z)(["Write your message"]))),metadata:_,disabled:t,isNarrow:n.isNarrow,onChange:Y,onChangeMetadata:U,onFocus:p,showEllipseButton:!S,onEllipseClick:B,onReady:W,onAddImages:i,keydownHandler:b,defaultFont:z})};var $M,eN,tN=(0,o.memo)(SquireEditorWrapper);var composer_ComposerContent=({message:e,disabled:t,breakpoints:n,onEditorReady:r,onChange:a,onChangeContent:s,onFocus:i,onAddAttachments:c,onRemoveAttachment:l,onRemoveUpload:p,pendingUploads:m,contentFocusRef:g,editorActionsRef:b,squireKeydownHandler:y})=>{const[h,I]=(0,o.useState)(!1),f=getAttachments(e.data),M=f.length+((null==m?void 0:m.length)||0)>0,onlyFiles=e=>t=>{if((e=>{var t;return null===(t=e.dataTransfer)||void 0===t?void 0:t.types.includes("Files")})(t))return e(t)},N=onlyFiles((e=>{e.preventDefault(),e.stopPropagation(),I(!1),c([...e.dataTransfer.files])})),x=onlyFiles((e=>{e.stopPropagation(),I(!1)})),v=onlyFiles((e=>{e.preventDefault(),e.stopPropagation(),I(!0)}));return(0,j.jsxs)("section",{className:(0,ht.dh)(["flex-item-fluid mb0-5 flex flex-column flex-nowrap relative composer-content pt0-5",(null==f?void 0:f.length)>0&&"composer-content--has-attachments",V(e.data)?"":"composer-content--rich-edition"]),onDragOver:v,children:[t&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:"absolute covered-absolute placeholder opacity-50"}),(0,j.jsxs)("div",{className:"absolute covered-absolute color-weak flex flex-justify-center flex-align-items-center",children:[(0,u.c)("Info").t($M||($M=(0,d.Z)(["Loading message"]))),(0,j.jsx)(Oh.Z,{})]})]}),(0,j.jsxs)("div",{className:"flex-item-fluid mb0-5 pl1-75 pr1-75 w100 flex flex-column flex-nowrap relative","data-testid":"composer-content",children:[(0,j.jsx)(tN,{message:e,disabled:t,breakpoints:n,onReady:r,onChange:a,onChangeContent:s,onFocus:i,onAddAttachments:c,onRemoveAttachment:l,contentFocusRef:g,editorActionsRef:b,keydownHandler:y}),h&&(0,j.jsx)("div",{onDragLeave:x,onDropCapture:N,className:"composer-editor-dropzone covered-absolute flex flex-justify-center flex-align-items-center rounded-xl",children:(0,j.jsxs)("span",{className:"composer-editor-dropzone-text no-pointer-events text-center color-weak",children:[(0,j.jsx)("img",{src:Ah,alt:"",className:"mb1"}),(0,j.jsx)("br",{}),(0,u.c)("Info").t(eN||(eN=(0,d.Z)(["Drop a file here to upload"])))]})})]}),M&&(0,j.jsx)("div",{onDragOver:e=>{e.stopPropagation(),e.preventDefault()},onDrop:N,children:(0,j.jsx)(attachment_AttachmentList,{attachments:f,pendingUploads:m,message:e,primaryAction:BI.Preview,secondaryAction:BI.Remove,collapsable:!0,showDownloadAll:!1,onRemoveAttachment:l,onRemoveUpload:p,className:"composer-attachments-list"})})]})},nN=n(82786);var rN,hooks_useSpotlightOnFeature=(e,t=!0)=>{const[n,r]=(0,o.useState)(!1),{feature:a,update:s,loading:i}=(0,nN.Z)(e);return{show:(0,o.useMemo)((()=>t&&!i&&!(null==a||!a.Value)&&!n),[t,i,n]),onDisplayed:(0,o.useCallback)((()=>{s(!1)}),[]),onClose:()=>r(!0)}},aN=n(65272),oN=n(20826),sN=n(48632);var spotlight_Spotlight=({children:e,show:t,content:n,onDisplayed:r,originalPlacement:a="top",hasClose:s=!0,anchorRef:i})=>{const[c]=(0,o.useState)((0,ht.D)("spotlight")),[l]=(0,aN.Z)(),p=a.includes("right")?a.replace("right","left"):a.replace("left","right"),[m,g]=(0,o.useState)(null),{anchorRef:b,open:y,close:h,isOpen:I}=(0,No.Z)(),f=i||b,{position:M,placement:N}=(0,sN.Z)({popperEl:m,anchorEl:f.current,isOpen:I,originalPlacement:l?p:a}),x=(0,Xg.cw)(M,N,8),[v,w,D]=(0,oN.Z)(I),S=o.Children.only(e),O=(0,fr.Z)(b,null==S?void 0:S.ref);if((0,o.useEffect)((()=>{t&&(y(),null==r||r())}),[t]),w||!t)return(0,o.cloneElement)(S,{ref:O});const A=(0,u.c)("Action").t(rN||(rN=(0,d.Z)(["Close"])));return(0,j.jsxs)(j.Fragment,{children:[(0,o.cloneElement)(S,{ref:O,"aria-describedby":c}),(0,j.jsx)(kI.Z,{children:(0,j.jsxs)("div",{ref:g,id:c,style:M,className:(0,ht.dh)(["spotlight","spotlight--".concat(N),v&&"is-spotlight-out",!x&&"spotlight--no-side-radius"]),onAnimationEnd:({animationName:e})=>{e.includes("anime-spotlight-out")&&v&&D()},children:[(0,j.jsx)("div",{className:"spotlight-inner",children:n}),s?(0,j.jsx)(Ea.Z,{icon:!0,shape:"ghost",size:"small",className:"spotlight-close",title:A,onClick:h,children:(0,j.jsx)(pr.Z,{name:"xmark",alt:A})}):null]})})]})};const iN=["onAddAttachments","disabled","isAttachments","attachmentTriggerRef"];function AttachmentsButton_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function AttachmentsButton_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?AttachmentsButton_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AttachmentsButton_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const AttachmentsButton=(e,t)=>{let{onAddAttachments:n,disabled:r,isAttachments:a,attachmentTriggerRef:s}=e,i=(0,Sn.Z)(e,iN);const c=(0,o.useRef)(null),triggerAttachment=()=>{var e;return null==c||null===(e=c.current)||void 0===e?void 0:e.click()};return(0,o.useEffect)((()=>{s.current=triggerAttachment}),[]),(0,j.jsx)("div",{className:"composer-attachments-button-wrapper flex flex-flex-align-items-center",children:(0,j.jsxs)(VI.Z,AttachmentsButton_objectSpread(AttachmentsButton_objectSpread({icon:!0,role:"button",as:"label",color:a?"norm":"weak",shape:"ghost",className:(0,ht.dh)(["inline-flex",r&&"is-disabled"]),ref:t},i),{},{"data-testid":"composer:attachment-button",children:[(0,j.jsx)(pr.Z,{name:"paperclip"}),(0,j.jsx)("input",{ref:c,type:"file",multiple:!0,disabled:r,onChange:e=>{const t=e.target;t.files&&(n([...t.files]),t.value="")},className:"composer-attachments-button","data-testid":"composer-attachments-button"})]}))})};var cN,lN=(0,o.forwardRef)(AttachmentsButton);const SendActions=({loading:e=!1,disabled:t=!1,color:n,shape:r,mainAction:a,secondAction:o,dropdownRef:s},i)=>(0,j.jsxs)(xc,{ref:i,shape:r,color:n,"data-testid":"composer:send-actions",children:[a,o&&(0,j.jsx)(Sc,{ref:s,as:Ea.Z,icon:!0,originalPlacement:"bottom-right",disabled:t,loading:e,className:(0,ht.dh)(["flex-item-noshrink"]),title:(0,u.c)("Title").t(cN||(cN=(0,d.Z)(["Open actions dropdown"]))),"data-test-id":"dropdown:open",children:(0,j.jsx)(dropdown_DropdownMenu,{children:o})})]});var dN,uN,pN=(0,o.forwardRef)(SendActions);const{FLAG_PUBLIC_KEY:mN,FLAG_RECEIPT_REQUEST:gN}=x,EditorToolbarExtension_getClassname=e=>e?void 0:"visibility-hidden",EditorToolbarExtension=({message:e,onChangeFlag:t})=>{const n=oe(e),r=H(e);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap",onClick:async()=>{const e=new Map([[mN,!n]]);t(e)},children:[(0,j.jsx)("span",{className:"mtauto mbauto flex-item-fluid pl0-25",children:(0,u.c)("Info").t(dN||(dN=(0,d.Z)(["Attach Public Key"])))}),(0,j.jsx)(pr.Z,{name:"check",className:(0,ht.dh)(["mt0-25 ml1",EditorToolbarExtension_getClassname(n)])})]}),(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap",onClick:()=>t(new Map([[gN,!r]])),children:[(0,j.jsx)("span",{className:"mtauto mbauto flex-item-fluid pl0-25",children:(0,u.c)("Info").t(uN||(uN=(0,d.Z)(["Request Read Receipt"])))}),(0,j.jsx)(pr.Z,{name:"check",className:(0,ht.dh)(["mt0-25 ml1",EditorToolbarExtension_getClassname(r)])})]})]})};var jN=(0,o.memo)(EditorToolbarExtension);const bN=["title","titleTooltip","content","className","children","onOpen","noMaxSize","autoClose","disabled","originalPlacement"];function ComposerMoreOptionsDropdown_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ComposerMoreOptionsDropdown_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ComposerMoreOptionsDropdown_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ComposerMoreOptionsDropdown_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var yN,hN,IN,fN,MN,NN,xN,vN,wN,DN,SN,ON,AN,CN,EN,LN,PN,ZN,TN,kN,zN,editor_ComposerMoreOptionsDropdown=e=>{let{title:t,titleTooltip:n,content:r,className:a,children:s,onOpen:i,noMaxSize:c,autoClose:l=!0,disabled:d=!1,originalPlacement:u="top-left"}=e,p=(0,Sn.Z)(e,bN);const[m]=(0,o.useState)((0,ht.D)("dropdown")),{anchorRef:g,isOpen:b,toggle:y,close:h}=(0,No.Z)();return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(ur.Z,{title:n,children:(0,j.jsx)(fo.Z,ComposerMoreOptionsDropdown_objectSpread(ComposerMoreOptionsDropdown_objectSpread({as:"button",type:"button",ref:g,isOpen:b,onClick:()=>{b||y(),y()},caretClassName:"editor-toolbar-icon",disabled:d,className:(0,ht.dh)(["editor-toolbar-button interactive composer-toolbar-fontDropDown max-w100 flex flex-align-items-center flex-nowrap",a]),tabIndex:-1,title:t},p),{},{children:r}))}),(0,j.jsx)(Mo.Z,{id:m,autoClose:l,autoCloseOutside:l,originalPlacement:u,isOpen:b,anchorRef:g,noMaxSize:c,onClose:h,className:"editor-toolbar-dropdown",children:s})]})};var composer_ComposerActions=({className:e,message:t,date:n,lock:r,opening:a,syncInProgress:s,onAddAttachments:i,onPassword:c,onExpiration:l,onScheduleSendModal:p,onSend:m,onDelete:g,addressesBlurRef:b,attachmentTriggerRef:h,loadingScheduleCount:I,onChangeFlag:f})=>{var M;const N=getAttachments(t.data).length>0,v=Q(x.FLAG_INTERNAL)(t.data)&&!(null===(M=t.data)||void 0===M||!M.Password),w=!!t.expiresIn,D=r,[{Shortcuts:S=0}={}]=useMailSettings(),[{hasPaidMail:O}]=(0,bn.ZP)();let A;if(a){const e=(0,j.jsx)(Oh.Z,{},"ellipsis1");A=(0,u.c)("Action").jt(yN||(yN=(0,d.Z)(["Loading",""])),e)}else if(s){const e=(0,j.jsx)(Oh.Z,{},"ellipsis2");A=(0,u.c)("Action").jt(hN||(hN=(0,d.Z)(["Saving",""])),e)}else if(0!==n.getTime()){const e=formatSimpleDate(n);A=(0,Ct.Z)(n)?(0,u.c)("Info").t(IN||(IN=(0,d.Z)(["Saved at ",""])),e):(0,Lt.Z)(n)?(0,u.c)("Info").t(fN||(fN=(0,d.Z)(["Saved ",""])),e):(0,u.c)("Info").t(MN||(MN=(0,d.Z)(["Saved on ",""])),e)}else A=(0,u.c)("Action").t(NN||(NN=(0,d.Z)(["Not saved"])));const C=S?(0,j.jsxs)(j.Fragment,{children:[(0,u.c)("Title").t(xN||(xN=(0,d.Z)(["Attachments"]))),(0,j.jsx)("br",{}),(0,j.jsx)("kbd",{className:"no-border",children:mr.OI})," + ",(0,j.jsx)("kbd",{className:"no-border",children:mr.AI})," +"," ",(0,j.jsx)("kbd",{className:"no-border",children:"A"})]}):(0,u.c)("Title").t(vN||(vN=(0,d.Z)(["Attachments"]))),E=S?(0,j.jsxs)(j.Fragment,{children:[(0,u.c)("Title").t(wN||(wN=(0,d.Z)(["Encryption"]))),(0,j.jsx)("br",{}),(0,j.jsx)("kbd",{className:"no-border",children:mr.OI})," + ",(0,j.jsx)("kbd",{className:"no-border",children:mr.AI})," +"," ",(0,j.jsx)("kbd",{className:"no-border",children:"E"})]}):(0,u.c)("Title").t(DN||(DN=(0,d.Z)(["Encryption"]))),L=(0,u.c)("Title").t(SN||(SN=(0,d.Z)(["More options"]))),P=S?(0,j.jsxs)(j.Fragment,{children:[(0,u.c)("Title").t(ON||(ON=(0,d.Z)(["Delete draft"]))),(0,j.jsx)("br",{}),(0,j.jsx)("kbd",{className:"no-border",children:mr.OI})," + ",(0,j.jsx)("kbd",{className:"no-border",children:mr.lw})," +"," ",(0,j.jsx)("kbd",{className:"no-border",children:"Backspace"})]}):(0,u.c)("Title").t(AN||(AN=(0,d.Z)(["Delete draft"]))),Z=S?(0,j.jsxs)(j.Fragment,{children:[(0,u.c)("Title").t(CN||(CN=(0,d.Z)(["Send email"]))),(0,j.jsx)("br",{}),(0,j.jsx)("kbd",{className:"no-border",children:mr.OI})," + ",(0,j.jsx)("kbd",{className:"no-border",children:"Enter"})]}):null,{feature:T,loading:k}=(0,nN.Z)(y.P.ScheduledSend),z=!k&&(null==T?void 0:T.Value)&&O,_=(0,o.useRef)(null),{show:R,onDisplayed:G,onClose:Y}=hooks_useSpotlightOnFeature(y.P.SpotlightScheduledSend,!a&&z),U=(0,o.useMemo)((()=>(0,j.jsx)(jN,{message:t.data,onChangeFlag:f})),[t.data,f]);return(0,j.jsx)("footer",{"data-testid":"composer:footer",className:(0,ht.dh)(["composer-actions flex-item-noshrink flex max-w100",e]),onClick:b.current,children:(0,j.jsxs)("div",{className:"flex flex-row-reverse flex-align-self-center w100 ml0-5 mr1-5 pl1-25 pr0-25 mb1",children:[(0,j.jsx)(spotlight_Spotlight,{originalPlacement:"top-right",show:R,onDisplayed:G,anchorRef:_,content:(0,j.jsxs)(j.Fragment,{children:[(0,u.c)("Spotlight").t(EN||(EN=(0,d.Z)(["You can now schedule your messages to be sent later"]))),(0,j.jsx)("br",{}),(0,j.jsx)(Tu.Z,{url:"https://protonmail.com/support/knowledge-base/scheduled-send/",title:"Scheduled send",children:(0,u.c)("Info").t(LN||(LN=(0,d.Z)(["Learn more"])))})]}),children:(0,j.jsx)(pN,{disabled:k||I,loading:k||I,shape:"solid",color:"norm",mainAction:(0,j.jsx)(ur.Z,{title:Z,children:(0,j.jsxs)(Ea.Z,{loading:k,onClick:m,disabled:D,className:"composer-send-button","data-testid":"composer:send-button",children:[(0,j.jsx)(pr.Z,{name:"paper-plane",className:"no-desktop no-tablet on-mobile-flex"}),(0,j.jsx)("span",{className:"pl1 pr1 no-mobile",children:(0,u.c)("Action").t(PN||(PN=(0,d.Z)(["Send"])))})]})}),secondAction:z?(0,j.jsx)(ur.Z,{children:(0,j.jsxs)(Do.Z,{className:"text-left flex flex-align-items-center",onClick:()=>{Y(),p()},"data-testid":"composer:schedule-send-button",children:[(0,j.jsx)(pr.Z,{name:"clock",className:"flex-item-noshrink"}),(0,j.jsx)("span",{className:"pl0-5 pr0-5 flex-item-fluid",children:(0,u.c)("Action").t(ZN||(ZN=(0,d.Z)(["Schedule send"])))})]})}):void 0,dropdownRef:_})}),(0,j.jsxs)("div",{className:"flex flex-item-fluid",children:[(0,j.jsxs)("div",{className:"flex",children:[(0,j.jsx)(ur.Z,{title:P,children:(0,j.jsx)(Ea.Z,{icon:!0,disabled:r,onClick:g,shape:"ghost",className:"mr0-5","data-testid":"composer:delete-draft-button",children:(0,j.jsx)(pr.Z,{name:"trash",alt:(0,u.c)("Action").t(TN||(TN=(0,d.Z)(["Delete draft"])))})})}),(0,j.jsx)(ur.Z,{title:E,children:(0,j.jsx)(Ea.Z,{icon:!0,color:v?"norm":void 0,shape:"ghost","data-testid":"composer:password-button",onClick:c,disabled:r,className:"mr0-5","aria-pressed":v,children:(0,j.jsx)(pr.Z,{name:"lock",alt:(0,u.c)("Action").t(kN||(kN=(0,d.Z)(["Encryption"])))})})}),(0,j.jsxs)(editor_ComposerMoreOptionsDropdown,{title:L,titleTooltip:L,className:"button button-for-icon composer-more-dropdown",content:(0,j.jsx)(pr.Z,{name:"ellipsis",alt:L,className:(0,ht.dh)([w&&"color-primary"])}),children:[U,(0,j.jsx)("div",{className:"dropdown-item-hr"},"hr-more-options"),(0,j.jsxs)(Do.Z,{className:(0,ht.dh)(["text-left flex flex-nowrap",w&&"color-primary"]),onClick:l,"aria-pressed":w,disabled:r,"data-testid":"composer:expiration-button",children:[(0,j.jsx)(pr.Z,{name:"hourglass-empty",className:"mt0-25"}),(0,j.jsx)("span",{className:"ml0-5 mtauto mbauto flex-item-fluid",children:(0,u.c)("Action").t(zN||(zN=(0,d.Z)(["Set expiration time"])))})]})]})]}),(0,j.jsxs)("div",{className:"flex-item-fluid flex pr1",children:[(0,j.jsx)("span",{className:"mr0-5 mauto no-mobile color-weak",children:A}),(0,j.jsx)(ur.Z,{title:C,children:(0,j.jsx)(lN,{isAttachments:N,disabled:r,onAddAttachments:i,attachmentTriggerRef:h,"data-testid":"composer:attachment-button"})})]})]})]})})},_N=n(37089);const useConversationCounts=()=>{const e=(0,Ln.Z)(),t=(()=>{const e=(0,Dn.Z)(),t=(0,Ln.Z)(),n=(0,o.useCallback)((()=>_N.E.get(e)),[e]);return(0,o.useCallback)((()=>(0,Zn.NC)(t,_N.E.key,n)),[t,n])})();return(0,Zn.ZP)(e,_N.E.key,t)};var RN=n(61726);const useGetMessageCounts=()=>{const e=(0,Dn.Z)(),t=(0,Ln.Z)(),n=(0,o.useCallback)((()=>RN.L.get(e)),[e]);return(0,o.useCallback)((()=>(0,Zn.NC)(t,RN.L.key,n)),[t,n])},useMessageCounts=()=>{const e=(0,Ln.Z)(),t=useGetMessageCounts();return(0,Zn.ZP)(e,RN.L.key,t)};var GN=n(6461);const pageCount=e=>Math.ceil(e/ve.IV)||0,expectedPageLength=(e,t,n)=>{const r=t+n;if(0===r)return 0;const a=pageCount(r);return e>=a?0:r%ve.IV==0?ve.IV:a-1===e?r%ve.IV:ve.IV};var YN=n(49492);var hooks_useWelcomeFlags=()=>{const e=(0,Ln.Z)(),[t,n]=(0,o.useState)((()=>{var t;const n=null===(t=e.get(YN.L.key))||void 0===t?void 0:t.value,r=0===n.WelcomeFlag,a=0===n.Flags.Welcomed;return{hasDisplayNameStep:a,isWelcomeFlow:a||r}}));return[t,(0,o.useCallback)((()=>{n({})}),[])]},UN=n(69081);var app_useOnLogout=e=>{const{onLogout:t}=(0,UN.Z)();(0,o.useEffect)((()=>t(e)),[e])},FN=n(87460),KN=n(6091),BN=n(21153);var WN,VN=async function runInQueue_runInQueue(e,t=1){const n=[];let r=0;const runNext=()=>{const t=r,a=e[t];return a?(r+=1,a().then((e=>(n[t]=e,runNext())))):Promise.resolve()},a=[];for(let e=0;e<t;e++)a.push(runNext());return await Promise.all(a),n},QN=n(44997);const{NOT_VERIFIED:HN,NOT_SIGNED:XN}=v,JN=QN.Z,binaryToString=e=>(0,Gt.Pp)(e).replace(/\r\n/g,"\n").replace(/\u00A0/g," "),decryptMessage=async(e,t,n,r)=>W(e)?(async(e,t,n,r)=>{var a,o;const s=(0,u.c)("Encrypted Headers").t(WN||(WN=(0,d.Z)(["Encrypted Headers filename"]))),i=null===(a=getSender(e))||void 0===a?void 0:a.Address;let c,l;try{c=await(0,_t.B1)({message:null==e?void 0:e.Body,messageDate:getDate(e),privateKeys:t,publicKeys:[],format:"binary"}),l=await JN({headerFilename:s,sender:i},binaryToString(c.data))}catch(e){return{decryptedBody:"",decryptedRawContent:new Uint8Array,attachments:[],errors:{decryption:[e]}}}return{decryptedBody:l.body,decryptedRawContent:c.data,attachments:r?convert(e,l.attachments,0,r):void 0,decryptedSubject:l.encryptedSubject,signature:c.signatures[0],mimetype:l.mimetype,errors:null!==(o=c.errors)&&void 0!==o&&o.length?{decryption:c.errors}:void 0}})(e,t,0,r):(async(e,t)=>{let n;try{n=await(0,_t.B1)({message:null==e?void 0:e.Body,messageDate:getDate(e),privateKeys:t,publicKeys:[],format:"binary"})}catch(e){return{decryptedBody:"",decryptedRawContent:new Uint8Array,errors:{decryption:[e]}}}const{data:r,signatures:[a]}=n;return{decryptedBody:binaryToString(r),decryptedRawContent:r,signature:a}})(e,t);var qN=n(90693);const isNetworkError=e=>"NetworkError"===e.name||"OfflineError"===e.name||"TimeoutError"===e.name,isNotExistError=e=>(null==e?void 0:e.data)&&(2061===e.data.Code||2501===e.data.Code||20052===e.data.Code),hasError=(e={})=>!!Object.values(e).flat().length,hasErrorType=(e={},t)=>{var n;return((null==e||null===(n=e[t])||void 0===n?void 0:n.length)||0)>0};function esAPI_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function esAPI_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?esAPI_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):esAPI_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const $N=[408,429,502,503],apiHelper=async(e,t,n,r,a)=>{let o;try{o=await e(esAPI_objectSpread(esAPI_objectSpread({},n),{},{silence:!0,headers:{Priority:"u=7"},signal:t}))}catch(o){if(isNotExistError(o))return;if(isNetworkError(o)||null!=o&&o.status&&$N.includes(o.status)){let s=1;const{response:i}=o;if(i){const{headers:e}=i;s=e?parseInt(e.get("retry-after")||"1",10):s}return a&&addESTimestamp(a,"stop"),await(0,Wt.D)(s*M.sh),apiHelper(e,t,n,r,a)}return void(o.message&&"Operation aborted"===o.message||o.name&&"AbortError"===o.name||esSentryReport("apiHelper: ".concat(r),{error:o}))}return o},esAPI_queryEvents=async(e,t,n)=>t?apiHelper(e,n,(0,qN.v)(t),"getEvents"):apiHelper(e,n,(0,qN.o)(),"getLatestID"),esAPI_queryMessagesMetadata=async(e,t,n,r)=>apiHelper(e,n,(0,En.jA)(esAPI_objectSpread({Limit:ve.C7,Location:"5",Sort:"Time",Desc:1},t)),"queryMessageMetadata",r),sendESMetrics=async(e,t,n)=>apiHelper(e,void 0,{method:"post",url:"metrics",data:{Log:"encrypted_search",Title:t,Data:n}},"metrics");var ex=n(10925),tx=n(50730),nx=n(76946);const rx=["LabelIDsRemoved","LabelIDsAdded"];function esSync_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function esSync_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?esSync_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):esSync_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const decryptFromDB=async(e,t)=>{const n=new TextDecoder,{aesGcmCiphertext:r}=e,a=await crypto.subtle.decrypt({iv:r.iv,name:ve.qW.name},t,r.ciphertext);return JSON.parse(n.decode(new Uint8Array(a)))},getMessageFromDB=async(e,t,n)=>{const r=await n.get("messages",e);if(r)return decryptFromDB(r,t)},storeToDB=async(e,t)=>{for(;;)try{return await t.put("messages",e),!0}catch(n){if(esSentryReport("storeToDB: put failed",{error:n}),"QuotaExceededError"!==n.name)return!1;{const n=await getOldestMessage(t);if(!n)return!1;const r=[n.Time,n.Order];if([e.Time,e.Order]<r)return!0;await t.delete("messages",n.ID)}}},executeIDBOperations=async(e,t,n)=>{const r=e.transaction("messages","readwrite");if(t.length)for(const e of t)r.store.delete(e);try{if(n.length)for(const e of n)r.store.put(e);await r.done}catch(t){if("QuotaExceededError"!==t.name)throw t;for(const t of n)if(!await storeToDB(t,e))throw new Error("Sync of some messages failed")}},correctDecryptionErrors=async(e,t,n,r,a,o)=>{const{resultsArray:s}=await esSearch_uncachedSearch(e,t,esSync_objectSpread(esSync_objectSpread({},esSearch_normaliseSearchParams({},"5")),{},{decryptionError:!0}),{});if(!s.length)return!1;a(0,s.length);let i=0;const c=(await Promise.all(s.map((async c=>{const l=await esBuild_fetchMessage(c.ID,n,r);if(!l||l.decryptionError)return;const d=await esBuild_encryptToDB(l,t),u=esCache_sizeOfCachedMessage(l);return esUtils_updateSizeIDB(e,u),o&&addToESCache(l,o,u),a(++i,s.length),d})))).filter(Za.Z),l=c.length;if(l){const t=await esUtils_openESDB(e);await executeIDBOperations(t,[],c),t.close()}return l},getEventFromLS=async(e,t)=>{const n=ox.Event(e);if(n)return esAPI_queryEvents(t,n)},ax=["wildcard","keyword","end","to","from"];function esSearch_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function esSearch_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?esSearch_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):esSearch_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const roundMilliseconds=e=>Math.floor(e/1e3),esSearch_normaliseSearchParams=(e,t,n,r)=>{const{wildcard:a,keyword:o,end:s,to:i,from:c}=e,l=(0,Sn.Z)(e,ax);let d,u;o&&(d=(e=>{const t=(0,br.GS)(e.trim().toLocaleLowerCase()),n=[];let r=0;for(;-1!==r;)r=t.indexOf('"',r),-1!==r&&(n.push(r),r++);const a=[];let o=-1;for(let e=0;e<n.length;e++){const r=t.slice(o+1,n[e]);e%2==1?a.push(r):a.push(...r.split(" ")),o=n[e]}return a.push(...t.slice(n[n.length-1]+1).split(" ")),a.filter(Za.Z)})(o)),s&&(u=roundMilliseconds((0,ex.Z)(1e3*s).getTime()));return{labelID:t,search:esSearch_objectSpread({end:u,from:c?c.toLocaleLowerCase():void 0,to:i?i.toLocaleLowerCase():void 0},l),normalisedKeywords:d,filter:n||{},sort:r||{sort:"Time",desc:!0}}},applySearch=(e,t)=>{const{Sender:n}=t,transformRecipients=e=>[...e.map((e=>e.Address.toLocaleLowerCase())),...e.map((e=>e.Name.toLocaleLowerCase()))],r=transformRecipients(getRecipients(t)),a=transformRecipients([n]);if(!((e,t,n,r)=>{const{search:a,labelID:o,decryptionError:s,filter:i}=e,{address:c,from:l,to:d,begin:u,end:p,attachments:m}=a||{},{AddressID:g,Time:j,LabelIDs:b,NumAttachments:y,decryptionError:h,Unread:I}=t;return!(!b.includes(o)||c&&g!==c||u&&j<u||p&&j>p||l&&!r.some((e=>e.includes(l)))||d&&!n.some((e=>e.includes(d)))||void 0!==m&&(0===m&&y>0||1===m&&0===y)||void 0!==s&&s!==h||void 0!==(null==i?void 0:i.Unread)&&(null==i?void 0:i.Unread)!==I)})(e,t,r,a))return!1;const{normalisedKeywords:o}=e;return!o||((e,t,n)=>{const{Subject:r,decryptedBody:a,decryptedSubject:o}=t,s=[o||r,...n,a||""].map((e=>(0,br.GS)(e.toLocaleLowerCase())));let i=!0,c=0;for(;i&&c!==e.length;){const t=e[c];i=i&&s.some((e=>e.includes(t))),c++}return i})(o,t,[...r,...a])},initialiseQuery=async(e,t,n,r)=>{const a=n||await getOldestTime(e);return{getTimes:e=>((e,t,n)=>{const r=e?e-1:n||roundMilliseconds((0,tx.Z)().getTime());return{lower:[Math.max(t||0,roundMilliseconds((0,nx.Z)((0,Vc.Z)(1e3*r,{days:1})).getTime())),0],upper:[r,Number.MAX_SAFE_INTEGER]}})(e,a,r),initialTime:a,lower:[0,0],upper:[0,0],startingOrder:t?t-1:void 0}},queryNewData=async(e,t,n,r,a)=>{const o=e(t[0]);({lower:t,upper:n}=o),r&&(n[1]=r,r=void 0);return{lower:t,upper:n,startingOrder:r,storedData:await a.getAllFromIndex("messages","byTime",IDBKeyRange.bound(t,n))}},cachedSearch=(e,t,n)=>{const r=[];return e.forEach((e=>{n.current.signal.aborted||applySearch(t,e)&&r.push(e)})),r},esSearch_uncachedSearch=async(e,t,n,r)=>{const{lastEmailTime:a}=r;return n.sort.desc?(async(e,t,n,r)=>{const a=await esUtils_openESDB(t),{messageLimit:o,beginOrder:s,setCache:i,abortSearchingRef:c}=r,l=[],d=await initialiseQuery(t,s,n.search.begin,n.search.end),{getTimes:u,initialTime:p}=d;let m,{lower:g,upper:j,startingOrder:b}=d;for(;!m;){if(c&&c.current.signal.aborted)return{resultsArray:l,lastEmail:m};let t;if(({lower:g,upper:j,startingOrder:b,storedData:t}=await queryNewData(u,g,j,b,a)),await Promise.all(t.map((async t=>{if(!t.LabelIDs.includes(n.labelID))return;const r=await decryptFromDB(t,e);applySearch(n,r)&&l.push(r)}))),o&&l.length>=o){const e=t[0];m={Time:e.Time,Order:e.Order}}if(g[0]===p)break;i&&l.length>0&&i(l)}return a.close(),{resultsArray:l,lastEmail:m}})(t,e,esSearch_objectSpread(esSearch_objectSpread({},n),{},{search:{end:a||n.search.end}}),r):(async(e,t,n,r)=>{const a=await esUtils_openESDB(t),{messageLimit:o,setCache:s,beginOrder:i,abortSearchingRef:c}=r,l=[];let d,u=[n.search.begin||await getOldestTime(t),i||0];for(;!d;){if(c&&c.current.signal.aborted)return{resultsArray:l,lastEmail:d};const t=await a.getAllFromIndex("messages","byTime",IDBKeyRange.lowerBound(u,!0),ve.We);if(!t.length)break;if(u=[t[t.length-1].Time,t[t.length-1].Order],await Promise.all(t.map((async t=>{if(!t.LabelIDs.includes(n.labelID))return;const r=await decryptFromDB(t,e);applySearch(n,r)&&l.push(r)}))),o&&l.length>=o){const e=t[t.length-1];d={Time:e.Time,Order:e.Order}}if(n.search.end&&t[t.length-1].Time>n.search.end)break;s&&l.length>0&&s(l)}return a.close(),{resultsArray:l,lastEmail:d}})(t,e,esSearch_objectSpread(esSearch_objectSpread({},n),{},{search:{begin:a||n.search.begin}}),r)},esCache_sizeOfCachedMessage=e=>{const sizeOfRecipient=e=>{let t,n=0;for(t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const r=e[t];if(!r)continue;n+=2*(t.length+r.length)}return n};let t,n=0;for(t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const r=e[t];if(!r)continue;if(n+=2*t.length,"boolean"==typeof r)n+=4;else if("string"==typeof r)n+=2*r.length;else if("number"==typeof r)n+=8;else if(Array.isArray(r))for(let e=0;e<r.length;e++){const t=r[e];n+="string"==typeof t?2*t.length:sizeOfRecipient(t)}else n+=sizeOfRecipient(r)}return n},checkIsCacheLimited=async(e,t)=>{const n=await getNumMessagesDB(e);return t.current.esCache.length<n},sortCachedMessages=(e,t)=>t.Time-e.Time||t.Order-e.Order,cacheDB=async(e,t,n,r,a)=>{const o=await initialiseQuery(t,a,void 0,r),{getTimes:s,initialTime:i}=o;let{lower:c,upper:l,startingOrder:d}=o;const u=await esUtils_openESDB(t);let p=!0;for(;p;){let t;({lower:c,upper:l,startingOrder:d,storedData:t}=await queryNewData(s,c,l,d,u)),await Promise.all(t.map((async t=>{const r=await decryptFromDB(t,e);n.current.cacheSize+=esCache_sizeOfCachedMessage(r),n.current.esCache.push(r)}))),(n.current.cacheSize>=ve.Az||c[0]===i)&&(p=!1)}u.close(),n.current.esCache.sort(sortCachedMessages),(e=>{let t=0;for(let n=0;n<e.current.esCache.length;n++){if(t>=ve.Az)return e.current.esCache=e.current.esCache.slice(0,n),void(e.current.cacheSize=t);t+=esCache_sizeOfCachedMessage(e.current.esCache[n])}})(n),n.current.isCacheLimited=await checkIsCacheLimited(t,n)},addToESCache=(e,t,n)=>{let r=!1;if(t.current.cacheSize<ve.Az)t.current.esCache.push(e),r=!0;else{const n=t.current.esCache.length-1,{Time:a,Order:o}=e,{Time:s,Order:i}=t.current.esCache[n];(a<s||a===s&&o<i)&&(t.current.cacheSize-=esCache_sizeOfCachedMessage(t.current.esCache[n]),t.current.esCache[n]=e,r=!0)}r&&(t.current.cacheSize+=n||esCache_sizeOfCachedMessage(e),t.current.esCache.sort(sortCachedMessages))},removeFromESCache=(e,t,n)=>{const r=t.current.esCache.findIndex((t=>t.ID===e));if(-1!==r){const e=n||esCache_sizeOfCachedMessage(t.current.esCache[r]);return t.current.cacheSize-=e,t.current.esCache.splice(r,1),e}},replaceInESCache=(e,t,n,r)=>{const{ID:a}=e,o=t.current.esCache.findIndex((e=>e.ID===a));-1!==o&&(t.current.cacheSize+=r||esCache_sizeOfCachedMessage(e)-esCache_sizeOfCachedMessage(t.current.esCache[o]),t.current.esCache.splice(o,1,e),n&&t.current.esCache.sort(sortCachedMessages))};function esBuild_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function esBuild_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?esBuild_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):esBuild_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const decryptIndexKey=async(e,t)=>{if(!t)return;const n=(await e())[0],r=await(0,_t.WB)({message:await(0,Rt.FC)(t),publicKeys:[n.publicKey],privateKeys:[n.privateKey]});if(!r)return;const{data:a}=r,o=await crypto.subtle.importKey("jwk",JSON.parse(a),{name:ve.qW.name},!0,ve.T8);return o.algorithm?o:void 0},getIndexKey=async(e,t)=>{try{return decryptIndexKey(e,ox.Key(t))}catch(e){esSentryReport("getIndexKey",{error:e})}},removeTag=(e,t)=>{let n=!0;for(;n;){const r=e.getElementsByTagName(t),a=r.item(0);a&&a.remove(),n=0!==r.length}},cleanText=(e,t)=>{const n=new DOMParser,{body:r}=n.parseFromString(e,"text/html");removeTag(r,"style"),removeTag(r,"script");let a=r.innerHTML;if(t){const[e]=locateBlockquote(r);a=e}return toText(a)},esBuild_prepareMessageMetadata=e=>({ID:e.ID,ConversationID:e.ConversationID,Subject:e.Subject,Unread:e.Unread,Sender:e.Sender,Flags:e.Flags,AddressID:e.AddressID,IsReplied:e.IsReplied,IsRepliedAll:e.IsRepliedAll,IsForwarded:e.IsForwarded,ToList:e.ToList,CCList:e.CCList,BCCList:e.BCCList,Size:e.Size,NumAttachments:e.NumAttachments,ExpirationTime:e.ExpirationTime,LabelIDs:e.LabelIDs,Time:e.Time,Order:e.Order}),esBuild_encryptToDB=async(e,t)=>{const n=JSON.stringify(e),r=new TextEncoder,a=new Uint8Array(12);crypto.getRandomValues(a);const o=await crypto.subtle.encrypt({iv:a,name:ve.qW.name},t,r.encode(n)),{ID:s,Time:i,Order:c,LabelIDs:l}=e;return{ID:s,Time:i,Order:c,LabelIDs:l,aesGcmCiphertext:{ciphertext:o,iv:a}}},isMessageForwarded=e=>!!e&&ve.EX.some((t=>e.slice(0,t.length).toLocaleLowerCase()===t)),esBuild_fetchMessage=async(e,t,n,r,a,o)=>{const s=await(async(e,t,n,r)=>{const a=await apiHelper(e,n,(0,En.FC)(t),"getMessage",r);return null==a?void 0:a.Message})(t,e,r,o);if(!s)return a?esBuild_objectSpread(esBuild_objectSpread({},esBuild_prepareMessageMetadata(a)),{},{decryptionError:!0}):void 0;let i,c,l=!0;try{const e=await n(s),t=await decryptMessage(s,e.privateKeys);t.errors||(({decryptedSubject:i,decryptedBody:c}=t),l=!1)}catch(e){}const d=s.LabelIDs.includes("2")||!isMessageForwarded(s.Subject);return esBuild_objectSpread(esBuild_objectSpread({},esBuild_prepareMessageMetadata(s)),{},{decryptedBody:"string"==typeof c?cleanText(c,d):void 0,decryptedSubject:i,decryptionError:l})},storeMessages=async(e,t,n,r,a,o,s,i)=>{let c=0,l=0;const d=await VN(e.map((e=>()=>(async e=>{if(o.current.signal.aborted)throw new Error("Operation aborted");const t=await esBuild_fetchMessage(e.ID,r,a,o.current.signal,e,i);return s(++l),c+=esCache_sizeOfCachedMessage(t),esBuild_encryptToDB(t,n)})(e))),ve.BD);if(o.current.signal.aborted)throw new Error("Operation aborted");const u={ID:d[d.length-1].ID,Time:d[d.length-1].Time},p=t.transaction("messages","readwrite");return await Promise.all(d.map((async e=>p.store.put(e)))),await p.done,{recoveryPoint:u,batchSize:c}},buildDB=async(e,t,n,r,a,o)=>{addESTimestamp(e,"start");const s=await esUtils_openESDB(e);let i;const c=await getOldestMessage(s);if(c){const{ID:e,Time:t}=c;i={ID:e,Time:t}}const l=await(async(e,t,n,r,a,o,s,i)=>{let c=await esAPI_queryMessagesMetadata(a,{EndID:null==s?void 0:s.ID,End:null==s?void 0:s.Time},o.current.signal,e);if(!c)return!1;let{Messages:l}=c,d=0,u=0;for(;l.length;){const s=u,recordLocalProgress=e=>{i(s+e)},p=await storeMessages(l,t,n,a,r,o,recordLocalProgress,e).catch((e=>{if(e.message&&"Operation aborted"===e.message||e.name&&"AbortError"===e.name||esSentryReport("storeMessagesBatches: storeMessages",{error:e}),"QuotaExceededError"===e.name)return{recoveryPoint:{ID:"QuotaExceededError",Time:-1},batchSize:0}}));if(!p||o.current.signal.aborted)return!1;const{recoveryPoint:m,batchSize:g}=p;if("QuotaExceededError"===m.ID&&-1===m.Time)return!0;if(esUtils_updateSizeIDB(e,g),u+=l.length,c=await esAPI_queryMessagesMetadata(a,{EndID:m.ID,End:m.Time},o.current.signal,e),!c)return!1;l=c.Messages,d++>=ve.FE&&(await esUtils_refreshOpenpgp(),d=0),addESTimestamp(e,"step")}return!0})(e,s,t,n,r,a,i,o);return s.close(),l},initialiseDB=async(e,t,n,r)=>{const a={notSupported:!1,indexKey:void 0};try{await deleteESDB(e)}catch(e){return"InvalidStateError"!==e.name&&esSentryReport("initialiseDB: deleteESDB",{error:e}),esBuild_objectSpread(esBuild_objectSpread({},a),{},{notSupported:!0})}const o=await(async(e,t)=>{const n=await esAPI_queryMessagesMetadata(e,{Limit:1,PageSize:1},t);if(n)return{Total:n.Total,firstMessage:n.Messages[0]}})(n);if(!o)return a;const s=await esAPI_queryEvents(n);if(!s||!s.EventID)return a;let i,c;sx.Progress(e,{totalMessages:o.Total,isRefreshed:r,numPauses:0,timestamps:[],originalEstimate:0}),sx.Event(e,s.EventID);try{i=await createESDB(e)}catch(t){return"InvalidStateError"!==t.name&&esSentryReport("initialiseDB: createESDB",{error:t}),ix.Event(e),ix.Progress(e),esBuild_objectSpread(esBuild_objectSpread({},a),{},{notSupported:!0})}i.close();try{c=await crypto.subtle.generateKey(ve.qW,!0,ve.T8),await(async(e,t,n)=>{const r=(await n())[0],a=await crypto.subtle.exportKey("jwk",e),{data:o}=await(0,Ft.Z)({data:JSON.stringify(a),publicKeys:[r.publicKey],privateKeys:[r.privateKey]});sx.Key(t,o)})(c,e,t)}catch(t){return esSentryReport("initialiseDB: key generation",{error:t}),ix.Event(e),ix.Progress(e),await deleteESDB(e),a}return sx.Size(e,0),esBuild_objectSpread(esBuild_objectSpread({},a),{},{indexKey:c})},estimateIndexingProgress=(e,t,n,r,a)=>{let o=0,s=0;if(0!==n&&r!==a.startTime&&t!==a.esPrevProgress){const i=n-t;setOriginalEstimate(e,Math.floor((r-a.startTime)/(t-a.esPrevProgress)*i/M.sh)),o=Math.ceil((r-a.startTime)/(t-a.esPrevProgress)*i/M.EB),s=Math.ceil(t/n*100)}return{estimatedMinutes:o,currentProgressValue:s}};function esUtils_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function esUtils_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?esUtils_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):esUtils_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const getESItem=(e,t)=>(0,FN.rV)("ES:".concat(e,":").concat(t)),setESItem=(e,t,n)=>(0,FN.LS)("ES:".concat(e,":").concat(t),n),removeESItem=(e,t)=>(0,FN.cl)("ES:".concat(e,":").concat(t)),ox={Key:e=>getESItem(e,"Key"),Event:e=>getESItem(e,"Event"),Progress:e=>JSON.parse(getESItem(e,"BuildProgress")||"null"),Size:e=>parseInt(getESItem(e,"SizeIDB")||"0",10)||0,Pause:e=>"true"===getESItem(e,"Pause"),Enabled:e=>"true"===getESItem(e,"ESEnabled")},sx={Key:(e,t)=>setESItem(e,"Key",t),Event:(e,t)=>setESItem(e,"Event",t),Progress:(e,t)=>setESItem(e,"BuildProgress",JSON.stringify(t)),Size:(e,t)=>setESItem(e,"SizeIDB","".concat(t)),Pause:e=>setESItem(e,"Pause","true"),Enabled:e=>setESItem(e,"ESEnabled","true")},ix={Key:e=>removeESItem(e,"Key"),Event:e=>removeESItem(e,"Event"),Progress:e=>removeESItem(e,"BuildProgress"),Size:e=>removeESItem(e,"SizeIDB"),Pause:e=>removeESItem(e,"Pause"),Enabled:e=>removeESItem(e,"ESEnabled")},esUtils_openESDB=async e=>(0,BN.X3)("ES:".concat(e,":DB")),deleteESDB=async e=>(0,BN.Lj)("ES:".concat(e,":DB")),createESDB=async e=>(0,BN.X3)("ES:".concat(e,":DB"),1,{upgrade(e){e.createObjectStore("messages",{keyPath:"ID"}).createIndex("byTime",["Time","Order"],{unique:!0})}}),esSentryReport=(e,t)=>{(0,GN.uT)("[EncryptedSearch] ".concat(e),{extra:t})},indexKeyExists=e=>!!ox.Key(e),isDBReadyAfterBuilding=e=>!ox.Progress(e),wasIndexingDone=e=>indexKeyExists(e)&&isDBReadyAfterBuilding(e),getOldestMessage=async e=>e.getFromIndex("messages","byTime",IDBKeyRange.lowerBound([0,0])),getOldestTime=async(e,t)=>(await(async e=>{const t=await esUtils_openESDB(e),n=await getOldestMessage(t);return t.close(),[(null==n?void 0:n.Time)||0,(null==n?void 0:n.Order)||0]})(e))[0]*(t||1),getNumMessagesDB=async e=>{const t=await esUtils_openESDB(e),n=await t.count("messages");return t.close(),n},getESTotal=e=>{var t;return(null===(t=ox.Progress(e))||void 0===t?void 0:t.totalMessages)||0},setESProgress=(e,t)=>{const n=ox.Progress(e);n&&sx.Progress(e,esUtils_objectSpread(esUtils_objectSpread({},n),t))},setESCurrent=(e,t)=>{setESProgress(e,{currentMessages:Math.floor(t/ve.C7)*ve.C7})},addESTimestamp=(e,t)=>{const n=ox.Progress(e);if(!n)return;const{timestamps:r}=n;r.push({type:t,time:roundMilliseconds(Date.now())}),setESProgress(e,{timestamps:r})},setOriginalEstimate=(e,t)=>{const n=ox.Progress(e);n&&0===n.originalEstimate&&setESProgress(e,{originalEstimate:t})},esUtils_updateSizeIDB=(e,t)=>{const n=ox.Size(e)+t;sx.Size(e,n)},esUtils_getTotalMessages=async e=>{var t;return(null===(t=e.find((e=>(null==e?void 0:e.LabelID)===M.C7.ALL_MAIL)))||void 0===t?void 0:t.Total)||0},canUseES=async e=>{if(!indexKeyExists)return!1;const t=await esUtils_openESDB(e),n=t.objectStoreNames.contains("messages");return t.close(),n},esUtils_refreshOpenpgp=async()=>{const{openpgp:e}=window,t=e.getWorker();if(t){for(;t.workers.some((e=>e.requests));)await(0,Wt.D)(200);await(0,KN.v8)(),await(0,KN.Rg)()}},parseSearchParams=e=>{const t=extractSearchParameters(e);return{filterParameter:filterFromUrl(e),sortParameter:sortFromUrl(e),isSearch:elements_isSearch(t),page:pageFromUrl(e),searchParameters:t}},recursiveBodyTraversal=(e,t)=>{if("STYLE"!==e.nodeName&&"SCRIPT"!==e.nodeName)if("#text"!==e.nodeName)for(const n of e.childNodes)recursiveBodyTraversal(n,t);else if(e.textContent){const r=t(e.textContent);var n;if(r)null===(n=e.parentNode)||void 0===n||n.replaceChild(r,e)}},findOccurrences=(e,t)=>{const n=[],r=(0,br.GS)(e.toLocaleLowerCase());for(const e of t){let t=0,a=0;for(;-1!==t;)t=r.indexOf(e,a),-1!==t&&(n.push([t,t+e.length]),a=t+e.length)}return(e=>{if(e.length<2)return e;e.sort(((e,t)=>e[0]-t[0]));const t=[];let n=e[0];for(let r=1;r<e.length;r+=1)n[1]>=e[r][0]?n=[n[0],Math.max(n[1],e[r][1])]:(t.push(n),n=e[r]);return t.push(n),t})(n)},highlightNode=(e,t)=>{const n=null==e?void 0:e.valueOf();if("string"==typeof n)return t(n).resultJSX;if(n&&Object.prototype.isPrototypeOf.call(Object.prototype,n)&&Object.prototype.hasOwnProperty.call(n,"props")){const{props:e}=n;if(Object.prototype.isPrototypeOf.call(Object.prototype,e)&&Object.prototype.hasOwnProperty.call(e,"children")){const{children:n}=e;if(Array.isArray(e.children)&&n.every((e=>"string"==typeof e)))return t(n.join("")).resultJSX}}return e};var cx,lx,dx,ux;function EncryptedSearchProvider_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function EncryptedSearchProvider_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?EncryptedSearchProvider_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EncryptedSearchProvider_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const px=(0,o.createContext)(null),useEncryptedSearchContext=()=>(0,o.useContext)(px);var containers_EncryptedSearchProvider=({children:e})=>{const t=(0,s.TH)(),n=(0,s.k6)(),r=(0,us.df)(),a=useGetMessageKeys(),i=(0,Dn.Z)(),[c]=(0,bn.ZP)(),{ID:l}=c,{createNotification:p}=(0,hn.Z)(),m=useGetMessageCounts(),{isSearch:g,page:h}=parseSearchParams(t),[{get:I},{update:f}]=(0,b.Z)([y.P.EnabledEncryptedSearch,y.P.SpotlightEncryptedSearch]),[x]=hooks_useWelcomeFlags(),[v,w]=(0,o.useState)(ve.m2),D=(0,o.useRef)(ve.Zy),S=(0,o.useRef)(new AbortController),O=(0,o.useRef)(new AbortController),A=(0,o.useRef)([0,0]),C=(0,o.useRef)(Promise.resolve()),E=(0,o.useRef)(0),addSyncing=async e=>{C.current=C.current.then((()=>e()))},esDelete=async e=>{S.current.abort(),O.current.abort();const t=e||l;return(e=>{Object.keys(window.localStorage).forEach((t=>{const n=t.split(":");"ES"===n[0]&&n[1]===e&&(0,FN.cl)(t)}))})(t),w((()=>ve.m2)),deleteESDB(t)};app_useOnLogout((async()=>{S.current.abort(),O.current.abort()}));const dbCorruptError=async e=>{await esDelete(e),p({text:(0,u.c)("Error").t(cx||(cx=(0,d.Z)(["Please activate your content search again"]))),type:"error"})},recordProgress=(e,t)=>{A.current=[e,t]},getProgressRecorderRef=()=>A,getESDBStatus=()=>{const{dbExists:e,isBuilding:t,isDBLimited:n,esEnabled:r,isRefreshing:a,isSearchPartial:o,isSearching:s,isCaching:i,dropdownOpened:c}=v,{isCacheLimited:l}=D.current;return{dbExists:e,isBuilding:t,isDBLimited:n,esEnabled:r,isCacheLimited:l,isRefreshing:a,isSearchPartial:o,isSearching:s,isCaching:i,dropdownOpened:c}},toggleEncryptedSearch=()=>{const e=v.esEnabled;if(w((t=>EncryptedSearchProvider_objectSpread(EncryptedSearchProvider_objectSpread({},t),{},{esEnabled:!e}))),e)O.current.abort(),ix.Enabled(l);else{const{isSearch:e}=parseSearchParams(n.location);e&&(e=>{e.push(setSortInUrl(e.location,{sort:"Time",desc:!0}))})(n),sx.Enabled(l)}canUseES(l).then((e=>{e||dbCorruptError()}))},cacheIndexedDB=async()=>{const{esEnabled:e,dbExists:t,cachedIndexKey:n,isCaching:a}=v;if(t&&e){const e=n||await getIndexKey(r,l),t=await canUseES(l);if(!e||!t)return dbCorruptError();const{isCacheReady:o}=D.current;if(a||o)return;w((t=>EncryptedSearchProvider_objectSpread(EncryptedSearchProvider_objectSpread({},t),{},{isCaching:!0,cachedIndexKey:e}))),await cacheDB(e,l,D),D.current.isCacheReady=!0,w((e=>EncryptedSearchProvider_objectSpread(EncryptedSearchProvider_objectSpread({},e),{},{isCaching:!1})))}},syncIndexedDB=async(e,t,r)=>{const{Messages:o,Addresses:s}=e,c=void 0!==r,d=s&&s.some((e=>e.Action===M.P.UPDATE));if(d&&(recordProgress(0,0),c||w((e=>EncryptedSearchProvider_objectSpread(EncryptedSearchProvider_objectSpread({},e),{},{isRefreshing:!0}))),await correctDecryptionErrors(l,t,i,a,recordProgress,D),c||w((e=>EncryptedSearchProvider_objectSpread(EncryptedSearchProvider_objectSpread({},e),{},{isRefreshing:!1})))),!o||!o.length)return;d&&recordProgress(0,0);const{labelID:u,permanentResults:p,setElementsCache:m}=v,{isSearch:g,searchParameters:j,filterParameter:b,sortParameter:y}=parseSearchParams(n.location),h=esSearch_normaliseSearchParams(j,u,b,y);await(async(e,t,n,r,a,o,s,i,c,l)=>{const d=await esUtils_openESDB(t);let u=!1;const updatePermanentResults=({resultIndex:e,messageToCache:t})=>{t?e?r.splice(e,1,t):r.push(t):r.splice(e,1),u=!0},p=[],m=[];for(let u=0;u<e.length;u+=ve.C7){const g=e.slice(u,Math.min(e.length,u+ve.C7)),j=(await Promise.all(g.map((async e=>{const{ID:t,Action:n}=e;if(n===M.P.CREATE||n===M.P.UPDATE_DRAFT)return esBuild_fetchMessage(t,o,s)})))).filter(Za.Z);for(const e of g){const{ID:o,Action:s,Message:u}=e;if(s===M.P.DELETE){p.push(o);const e=removeFromESCache(o,n)||0;esUtils_updateSizeIDB(t,-e);const s=r.findIndex((e=>e.ID===o));a&&-1!==s&&updatePermanentResults({resultIndex:s})}if(s===M.P.CREATE){if(!u)continue;const e=j.find((e=>e.ID===o));if(!e)continue;const r=await esBuild_encryptToDB(e,i);m.push(r);const s=esCache_sizeOfCachedMessage(e);esUtils_updateSizeIDB(t,s),addToESCache(e,n,s),a&&applySearch(c,e)&&updatePermanentResults({messageToCache:e})}if(s===M.P.UPDATE_DRAFT||s===M.P.UPDATE_FLAGS){if(!u)continue;const e=await getMessageFromDB(o,i,d);if(!e)continue;let l;if(s===M.P.UPDATE_DRAFT){const e=j.find((e=>e.ID===o));if(!e)continue;l=e}if(s===M.P.UPDATE_FLAGS){const{LabelIDsRemoved:t,LabelIDsAdded:n}=u,r=(0,Sn.Z)(u,rx);let{LabelIDs:a}=e;t&&(a=a.filter((e=>!t.includes(e)))),n&&(a=a.concat(n)),l=esSync_objectSpread(esSync_objectSpread(esSync_objectSpread({},e),r),{},{LabelIDs:a})}if(!l)throw new Error("Plaintext to store is undefined");const p=await esBuild_encryptToDB(l,i);m.push(p);const g=esCache_sizeOfCachedMessage(l)-esCache_sizeOfCachedMessage(e);if(esUtils_updateSizeIDB(t,g),replaceInESCache(l,n,s===M.P.UPDATE_DRAFT,g),a)if(applySearch(c,e)){const e=r.findIndex((e=>e.ID===o));applySearch(c,l)?updatePermanentResults({resultIndex:e,messageToCache:l}):updatePermanentResults({resultIndex:e})}else applySearch(c,l)&&updatePermanentResults({messageToCache:l})}l&&l()}}return await executeIDBOperations(d,p,m),d.close(),u})(o,l,D,p,g,i,a,t,h,r)&&(m(p,E.current),w((e=>EncryptedSearchProvider_objectSpread(EncryptedSearchProvider_objectSpread({},e),{},{permanentResults:p}))))},finaliseSyncing=async(e,t)=>{e.EventID&&sx.Event(l,e.EventID),await(async(e,t,n)=>{const{cacheSize:r,isCacheReady:a}=n.current,o=await checkIsCacheLimited(e,n);if(r<ve.Az&&o&&a){const{Time:r,Order:a}=n.current.esCache[n.current.esCache.length-1];await cacheDB(t,e,n,r,a)}n.current.isCacheLimited=await checkIsCacheLimited(e,n)})(l,t,D);const n=await m(),r=await(async(e,t)=>await getNumMessagesDB(e)<await esUtils_getTotalMessages(t))(l,n);w((e=>EncryptedSearchProvider_objectSpread(EncryptedSearchProvider_objectSpread({},e),{},{isRefreshing:!1,isDBLimited:r})))},catchUpFromEvent=async(e,t)=>{try{await syncIndexedDB(t,e)}catch(n){return esSentryReport("catchUpFromEvent: syncIndexedDB",{error:n}),w((e=>EncryptedSearchProvider_objectSpread(EncryptedSearchProvider_objectSpread({},e),{},{isRefreshing:!1}))),catchUpFromEvent(e,t)}return finaliseSyncing(t,e)},catchUpFromLS=async(e,t)=>{if(!await canUseES(l))return dbCorruptError();w((e=>EncryptedSearchProvider_objectSpread(EncryptedSearchProvider_objectSpread({},e),{},{isRefreshing:!0}))),recordProgress(0,0),recordProgress(0,0);let n=!0,r=0;const a=[t];for(;n;)try{const e=a[r++],t=await esAPI_queryEvents(i,e.EventID);if(!t||!t.EventID)throw new Error("No event found");n=1===e.More||t.EventID!==e.EventID,n&&a.push(t)}catch(n){return esSentryReport("catchUpFromLS: queryEvents",{error:n}),w((e=>EncryptedSearchProvider_objectSpread(EncryptedSearchProvider_objectSpread({},e),{},{isRefreshing:!1}))),catchUpFromLS(e,t)}const o=a.reduce(((e,t)=>{var n;const r=(t.Addresses||[]).filter((e=>e.Action===M.P.UPDATE)).length;return e+((null===(n=t.Messages)||void 0===n?void 0:n.length)||0)+r}),0),recordProgressLocal=()=>{const[e]=A.current;recordProgress(e+1,o)};try{for(const t of a)await syncIndexedDB(t,e,recordProgressLocal)}catch(n){return esSentryReport("catchUpFromLS: syncIndexedDB",{error:n}),w((e=>EncryptedSearchProvider_objectSpread(EncryptedSearchProvider_objectSpread({},e),{},{isRefreshing:!1}))),catchUpFromLS(e,t)}return finaliseSyncing(a[a.length-1],e)},pauseIndexing=async()=>{S.current.abort(),w((e=>EncryptedSearchProvider_objectSpread(EncryptedSearchProvider_objectSpread({},e),{},{isBuilding:!1}))),sx.Pause(l),(e=>{var t;setESProgress(e,{numPauses:((null===(t=ox.Progress(e))||void 0===t?void 0:t.numPauses)||0)+1})})(l),addESTimestamp(l,"stop");if(!await canUseES(l))return dbCorruptError()},resumeIndexing=async({notify:e,isRefreshed:t}={notify:!0,isRefreshed:!1})=>{const n=ox.Pause(l);w((e=>EncryptedSearchProvider_objectSpread(EncryptedSearchProvider_objectSpread({},e),{},{esEnabled:!0}))),sx.Enabled(l);let o;if(ix.Pause(l),S.current=new AbortController,indexKeyExists(l)||n){const e=await getIndexKey(r,l);if(!e)return dbCorruptError();o=e}else{const{notSupported:n,indexKey:a}=await initialiseDB(l,r,i,t||!1);if(!a)return(t=>{e&&p({text:t?(0,u.c)("Error").t(lx||(lx=(0,d.Z)(["Content search cannot be enabled in this browser. Please quit private browsing mode or use another browser."]))):(0,u.c)("Error").t(dx||(dx=(0,d.Z)(["A problem occurred, please try again"]))),type:"error"}),w((()=>ve.m2))})(n);o=a}const s=getESTotal(l),c=0===s;recordProgress(await getNumMessagesDB(l),s),w((e=>EncryptedSearchProvider_objectSpread(EncryptedSearchProvider_objectSpread({},e),{},{isBuilding:!0})));let m=c;for(;!m;){const e=await getNumMessagesDB(l);recordProgress(e,s);const recordProgressLocal=t=>{const n=e+t;setESCurrent(l,n),recordProgress(n,s)};if(m=await buildDB(l,o,a,i,S,recordProgressLocal),S.current.signal.aborted||ox.Pause(l))return;if(!await canUseES(l))return dbCorruptError();await(0,Wt.D)(2*M.sh)}await(async(e,t)=>{addESTimestamp(t,"stop");const n=ox.Progress(t);if(!n)return;const{totalMessages:r,isRefreshed:a,numPauses:o,timestamps:s,originalEstimate:i}=n,{indexTime:c,totalInterruptions:l}=(e=>{let t=0,n=0;for(let r=0;r<e.length-1;r++){const[a,o]=e.slice(r,r+2);"stop"!==a.type&&"start"!==o.type?t+=o.time-a.time:"stop"===a.type&&"stop"===o.type||n++}return{indexTime:t,totalInterruptions:n}})(s);return sendESMetrics(e,"index",{numInterruptions:l-o,indexSize:ox.Size(t),originalEstimate:i,indexTime:c,numMessagesIndexed:r,isRefreshed:a,numPauses:o})})(i,l),w((e=>EncryptedSearchProvider_objectSpread(EncryptedSearchProvider_objectSpread({},e),{},{isBuilding:!1})));const g=await getEventFromLS(l,i);if(!g||(0,N.jl)(g.Refresh,Bp.fb.MAIL))return dbCorruptError();const j=catchUpFromLS(o,g);addSyncing((()=>j)),await j,ix.Progress(l),w((e=>EncryptedSearchProvider_objectSpread(EncryptedSearchProvider_objectSpread({},e),{},{dbExists:!0}))),e&&p({text:(0,u.c)("Success").t(ux||(ux=(0,d.Z)(["Message content search activated"])))})},encryptedSearch=async(e,t)=>{O.current.abort(),w((e=>EncryptedSearchProvider_objectSpread(EncryptedSearchProvider_objectSpread({},e),{},{isSearching:!1,isSearchPartial:!1})));const a=performance.now(),{dbExists:o,esEnabled:s,previousNormSearchParams:c,permanentResults:d,isSearchPartial:u,cachedIndexKey:p,isCaching:m,isFirstSearch:g}=v;if(!o||!s)return!1;if(!await canUseES(l))return dbCorruptError().then((()=>!1));O.current=new AbortController,m||D.current.isCacheReady||cacheIndexedDB();const{searchParameters:j,filterParameter:b,sortParameter:y}=parseSearchParams(n.location),h=esSearch_normaliseSearchParams(j,e,b,y);if(!u&&c){if(((e,t)=>{const{labelID:n,filter:r,search:{address:a,from:o,to:s,begin:i,end:c,attachments:l},normalisedKeywords:d,decryptionError:u}=e,{labelID:p,filter:m,search:{address:g,from:j,to:b,begin:y,end:h,attachments:I},normalisedKeywords:f,decryptionError:M}=t;if(n!==p||a!==g||o!==j||s!==b||i!==y||c!==h||l!==I||u!==M||!!d!=!!f||(null==r?void 0:r.Unread)!==(null==m?void 0:m.Unread))return!1;if(d&&f){if(d.length!==f.length)return!1;for(let e=0;e<d.length;e++)if(d[e]!==f[e])return!1}return!0})(h,c))return t(d,E.current),!0}w((e=>EncryptedSearchProvider_objectSpread(EncryptedSearchProvider_objectSpread({},e),{},{isSearching:!0,isSearchPartial:!0,isFirstSearch:!1})));const controlledSetCache=e=>{O.current.signal.aborted||t(e,E.current)};let I,f=[],M=!1;try{({searchResults:f,isSearchPartial:M,lastEmail:I}=await(async(e,t,n,r,a,o,s)=>{let i,c=[],l=!1;const d=t.sort.desc;if(d||e.current.isCacheReady&&!e.current.isCacheLimited){let n=e.current.esCache.length;c=cachedSearch(e.current.esCache,t,s);let r=c.length;for(0===r||e.current.isCacheReady&&!e.current.isCacheLimited||o(c);!e.current.isCacheReady;){if(s.current.signal.aborted)return{searchResults:c,isSearchPartial:l,lastEmail:i};const a=e.current.esCache.length;c.push(...cachedSearch(e.current.esCache.slice(n),t,s)),c.length>r&&o(c),r=c.length,n=a,await(0,Wt.D)(200)}if(c.push(...cachedSearch(e.current.esCache.slice(n),t,s)),!e.current.isCacheLimited||s.current.signal.aborted)return{searchResults:c,isSearchPartial:l,lastEmail:i};if(c.length>=2*ve.IV||s.current.signal.aborted){const{Time:t,Order:n}=e.current.esCache[e.current.esCache.length-1];return{searchResults:c,isSearchPartial:!0,lastEmail:{Time:t,Order:n}}}c.length>r&&o(c)}let u,p=!s.current.signal.aborted;if(d){const{Time:n,Order:r}=e.current.esCache[e.current.esCache.length-1];u=r;const a=Math.min(n,t.search.end||Number.MAX_SAFE_INTEGER),o=t.search.begin||0;p=o<n,t=esSearch_objectSpread(esSearch_objectSpread({},t),{},{search:{begin:o,end:a}})}if(p){const e=2*ve.IV-c.length,setCacheIncremental=e=>{o(c.concat(e))},d=n||await getIndexKey(r,a);if(!d)throw new Error("Key not found");const p=await esSearch_uncachedSearch(a,d,t,{messageLimit:e,setCache:setCacheIncremental,beginOrder:u,abortSearchingRef:s});c.push(...p.resultsArray),i=p.lastEmail,l=!!i}return{searchResults:c,isSearchPartial:l,lastEmail:i}})(D,h,p,r,l,controlledSetCache,O))}catch(e){if(esSentryReport("encryptedSearch: hybridSearch",{error:e}),"Key not found"===e.message)return dbCorruptError().then((()=>!1));throw e}if(!O.current.signal.aborted){w((n=>EncryptedSearchProvider_objectSpread(EncryptedSearchProvider_objectSpread({},n),{},{permanentResults:f,labelID:e,setElementsCache:t,lastEmail:I,previousNormSearchParams:h,page:0,isSearchPartial:M,isSearching:!1}))),t(f,E.current);const n=performance.now();(async(e,t,n,r,a,o)=>{const s=await getNumMessagesDB(t);await(0,Wt.D)(1e3*Math.floor(180*Math.random()+1)),sendESMetrics(e,"search",{indexSize:ox.Size(t),numMessagesIndexed:s,cacheSize:n,searchTime:r,isFirstSearch:a,isCacheLimited:o})})(i,l,D.current.cacheSize,Math.ceil(n-a),g,D.current.isCacheLimited)}return!0},incrementSearch=async(e,t,a)=>{const{isCacheLimited:o}=D.current,{dbExists:s,esEnabled:i,labelID:c,permanentResults:d,lastEmail:u,isSearchPartial:p,cachedIndexKey:m,isSearching:g}=v;if(!s||!i||!o||O.current.signal.aborted||g)return;const j=Math.ceil(d.length/ve.IV)-1;if(e<=E.current||e<j-1)return;const{isSearch:b,searchParameters:y,filterParameter:h,sortParameter:I}=parseSearchParams(n.location);if(!b||!p)return;const f=ve.IV*(j+2);let M=0;if(!(d.length<f))return;M=f-d.length,a&&(M+=ve.IV),w((e=>EncryptedSearchProvider_objectSpread(EncryptedSearchProvider_objectSpread({},e),{},{isSearching:!0})));const N=esSearch_normaliseSearchParams(y,c,h,I),x=m||await getIndexKey(r,l);if(!x)return dbCorruptError();const S=await esSearch_uncachedSearch(l,x,N,{messageLimit:M,beginOrder:null==u?void 0:u.Order,lastEmailTime:null==u?void 0:u.Time,abortSearchingRef:O});if(!O.current.signal.aborted){d.push(...S.resultsArray);const n=!!S.lastEmail;w((e=>EncryptedSearchProvider_objectSpread(EncryptedSearchProvider_objectSpread({},e),{},{permanentResults:d,lastEmail:S.lastEmail,isSearchPartial:n,isSearching:!1}))),t(d,e)}},shouldHighlight=()=>{const{isSearch:e,searchParameters:t}=parseSearchParams(n.location);if(!e)return!1;const{labelID:r}=v,{normalisedKeywords:a}=esSearch_normaliseSearchParams(t,r);return!!a},highlightString=(e,t)=>{const{searchParameters:r}=parseSearchParams(n.location),{labelID:a}=v,{normalisedKeywords:o}=esSearch_normaliseSearchParams(r,a);return o?((e,t,n)=>{const r=(new DOMParser).parseFromString(e,"text/html");var a;recursiveBodyTraversal(r.body,(e=>{const n=findOccurrences(e,t);if(!n.length)return;const a=r.createElement("span");let o=0;for(const t of n){const n=o;[,o]=t,a.appendChild(r.createTextNode(e.slice(n,t[0])));const s=r.createElement("mark");s.setAttribute("class","proton-search-highlight");const i=r.createTextNode(e.slice(t[0],t[1]));s.appendChild(i),a.appendChild(s)}return a.appendChild(r.createTextNode(e.slice(n[n.length-1][1]))),a})),n&&(null===(a=r.body.getElementsByClassName("proton-search-highlight").item(0))||void 0===a||a.setAttribute("data-auto-scroll","true"));return r.documentElement.outerHTML})(e,o,t):e},highlightMetadata=(e,t,r)=>{const{searchParameters:a}=parseSearchParams(n.location),{labelID:o}=v,{normalisedKeywords:s}=esSearch_normaliseSearchParams(a,o);return s?((e,t,n=!1,r=!1)=>{const a=findOccurrences(e,t);if(!a.length)return{numOccurrences:0,resultJSX:(0,j.jsx)("span",{children:e})};let o=0;return{numOccurrences:a.length,resultJSX:(0,j.jsx)("span",{children:a.map(((t,s)=>{const i=o;[,o]=t;const c=Math.max(0,t[0]-ve.cq);let l=c;if(0!==c){const t=e.slice(c).indexOf(" ");-1!==t&&(l=c+t+1)}const d=0===s&&r?"".concat(0!==l?"…":"").concat(e.slice(l,t[0])):e.slice(i,t[0]);return(0,j.jsxs)("span",{children:[d,(0,j.jsx)("mark",{className:(0,ht.dh)([n&&"text-bold"]),children:e.slice(t[0],t[1])}),s===a.length-1?e.slice(a[a.length-1][1]):null]},s)}))})}})(e,s,t,r):{numOccurrences:0,resultJSX:(0,j.jsx)("span",{children:e})}},isSearchResult=e=>{const{dbExists:t,esEnabled:r,permanentResults:a}=v,{isSearch:o}=parseSearchParams(n.location);return!!(t&&r&&o)&&-1!==a.findIndex((t=>t.ID===e))},restartIndexing=async()=>(await esDelete(),resumeIndexing({isRefreshed:!0})),openDropdown=()=>{w((e=>EncryptedSearchProvider_objectSpread(EncryptedSearchProvider_objectSpread({},e),{},{dropdownOpened:!0})))},closeDropdown=()=>{w((e=>EncryptedSearchProvider_objectSpread(EncryptedSearchProvider_objectSpread({},e),{},{dropdownOpened:!1})))};(0,mn.ko)((async e=>{const{dbExists:t,cachedIndexKey:n}=v;if(!t)return;const a=n||await getIndexKey(r,l),o=await canUseES(l);return a&&o?(0,N.jl)(e.Refresh,Bp.fb.MAIL)?restartIndexing():void addSyncing((()=>catchUpFromEvent(a,e))):dbCorruptError()})),(0,o.useEffect)((()=>{E.current=h}),[h]),(0,o.useEffect)((()=>{g||(O.current.abort(),w((e=>EncryptedSearchProvider_objectSpread(EncryptedSearchProvider_objectSpread({},e),{},{permanentResults:ve.m2.permanentResults,setElementsCache:ve.m2.setElementsCache,labelID:ve.m2.labelID,lastEmail:ve.m2.lastEmail,previousNormSearchParams:ve.m2.previousNormSearchParams,isSearchPartial:ve.m2.isSearchPartial,isSearching:ve.m2.isSearching}))))}),[g]),(0,o.useEffect)((()=>{(async()=>{try{const e=await I();if(x.isWelcomeFlow&&!(0,mr.tq)()&&e.Value&&!indexKeyExists(l)&&(0,Tn.Om)(c))return await f(!1),resumeIndexing({notify:!1});const t=await(async e=>(await Promise.all(Object.keys(window.localStorage).map((async t=>{const n=t.split(":");if("ES"===n[0]&&"Key"===n[2]){const r=n[1];try{const n=await decryptIndexKey(e,(0,FN.rV)(t));if(n)return{userID:r,indexKey:n}}catch(e){}}})))).filter(Za.Z))(r);if(0===t.length)return;if(t.length>1)return await Promise.all(t.map((async({userID:e})=>{await esDelete(e)}))),restartIndexing();const{userID:n,indexKey:a}=t[0];if(n!==l)return await esDelete(n),restartIndexing();const o=await canUseES(l);if(!a||!o)return dbCorruptError();if(w((e=>EncryptedSearchProvider_objectSpread(EncryptedSearchProvider_objectSpread({},e),{},{dbExists:wasIndexingDone(l),esEnabled:ox.Enabled(l)}))),!isDBReadyAfterBuilding(l))return void(ox.Pause(l)||await resumeIndexing());const s=await getEventFromLS(l,i);if(!s)return dbCorruptError();if((0,N.jl)(s.Refresh,Bp.fb.MAIL))return restartIndexing();addSyncing((()=>catchUpFromLS(a,s)))}catch(e){console.log("ES effect error",e)}})()}),[]);const L=(0,o.useMemo)((()=>({encryptedSearch:encryptedSearch,cacheIndexedDB:cacheIndexedDB,getESDBStatus:getESDBStatus,toggleEncryptedSearch:toggleEncryptedSearch,resumeIndexing:resumeIndexing,pauseIndexing:pauseIndexing,getProgressRecorderRef:getProgressRecorderRef,incrementSearch:incrementSearch,highlightString:highlightString,highlightMetadata:highlightMetadata,shouldHighlight:shouldHighlight,isSearchResult:isSearchResult,esDelete:esDelete,openDropdown:openDropdown,closeDropdown:closeDropdown})),[l,v]);return(0,j.jsx)(px.Provider,{value:L,children:e})},mx=n(77550);function elementQuery_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function elementQuery_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?elementQuery_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):elementQuery_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const newRetry=(e,t,n)=>({payload:t,count:n&&(0,WI.Z)(t,e.payload)?e.count+1:1,error:n}),gx=(0,Fh.PH)("elements/reset"),jx=(0,Fh.PH)("elements/updatePage"),bx=(0,Fh.PH)("elements/retry"),yx=(0,Fh.hg)("elements/load",(async(e,{getState:t,dispatch:n})=>{const r=(({page:e,params:{labelID:t,sort:n,search:r,filter:a}})=>({Page:e,PageSize:ve.IV,Limit:ve.ku,LabelID:t,Sort:n.sort,Desc:n.desc?1:0,Begin:r.begin,End:r.end,Keyword:r.keyword,To:r.to,From:r.from,Attachments:r.attachments,Unread:a.Unread,AddressID:r.address,AutoWildcard:r.wildcard}))(e);try{return await(async(e,t,n,r)=>{null==t||t.abort();const a=new AbortController,o=n?mx.Zy:En.jA,s=await e(elementQuery_objectSpread(elementQuery_objectSpread({},o(r)),{},{signal:a.signal}));return{abortController:a,Total:s.Total,Elements:n?s.Conversations:s.Messages}})(e.api,e.abortController,e.conversationMode,r)}catch(e){throw setTimeout((()=>{const a=t().elements.retry;n(bx(newRetry(a,r,e)))}),2e3),e}})),hx=(0,Fh.PH)("elements/removeExpired"),Ix=(0,Fh.PH)("elements/invalidate"),fx=(0,Fh.hg)("elements/eventUpdates",(async({api:e,conversationMode:t,toLoad:n})=>Promise.all(n.map((async n=>(async(e,t,n)=>{const r=t?mx.cc:En.FC,a=await e(elementQuery_objectSpread(elementQuery_objectSpread({},r(n)),{},{silence:!0}));return t?a.Conversation:a.Message})(e,t,n).catch(c.ZT)))))),Mx=(0,Fh.PH)("elements/manualPending"),Nx=(0,Fh.PH)("elements/manualFulfilled"),xx=(0,Fh.PH)("elements/addESResults"),vx=(0,Fh.PH)("elements/optimistic/applyLabels"),wx=(0,Fh.PH)("elements/optimistic/delete"),Dx=(0,Fh.PH)("elements/optimistic/restoreDelete"),Sx=(0,Fh.PH)("elements/optimistic/emptyLabel"),Ox=(0,Fh.PH)("elements/optimistic/restoreEmptyLabel"),Ax=(0,Fh.PH)("elements/optimistic/markAs"),beforeFirstLoad=e=>e.elements.beforeFirstLoad,elementsSelectors_elementsMap=e=>e.elements.elements,elementsSelectors_params=e=>e.elements.params,page=e=>e.elements.page,pages=e=>e.elements.pages,bypassFilter=e=>e.elements.bypassFilter,pendingRequest=e=>e.elements.pendingRequest,elementsSelectors_retry=e=>e.elements.retry,invalidated=e=>e.elements.invalidated,total=e=>e.elements.total,currentPage=(e,{page:t})=>t,currentESDBStatus=(e,{esDBStatus:t})=>t,Cx=(0,kn.P1)([elementsSelectors_elementsMap,elementsSelectors_params,page,pages,bypassFilter],((e,t,n,r,a)=>{const{labelID:o,sort:s,filter:i}=t,c=(n-r.reduce(((e,t)=>t<e?t:e),r[0]))*ve.IV,l=c+ve.IV,d=Object.values(e).filter((e=>hasLabel(e,o))).filter((e=>{if(!isFilter(i))return!0;if(a.includes(e.ID||""))return!0;const t=elements_isUnread(e,o);return i.Unread?t:!t}));return elements_sort(d,s,o).slice(c,l)})),Ex=(0,kn.P1)(Cx,(e=>e.map((e=>e.ID)).filter(Za.Z))),Lx=(0,kn.P1)(Cx,(e=>e.length)),Px=(0,kn.P1)([total,page,Lx],((e,t,n)=>{if(void 0===e)return!1;const r=e-t*ve.IV;return n<ve.IV&&r>ve.ku})),Zx=(0,kn.P1)([elementsSelectors_params,(e,{params:t})=>t],((e,t)=>t.labelID!==e.labelID||t.conversationMode!==e.conversationMode||t.sort!==e.sort||t.filter!==e.filter||t.search!==e.search||t.esEnabled!==e.esEnabled&&elements_isSearch(t.search))),Tx=(0,kn.P1)([pages,currentPage],((e,t)=>e.includes(t))),kx=(0,kn.P1)([page,currentPage],((e,t)=>e!==t)),zx=(0,kn.P1)([pages,currentPage],((e,t)=>0===e.length||e.some((e=>e===t||e===t-1||e===t+1)))),_x=(0,kn.P1)([Zx,zx],((e,t)=>e||!t)),Rx=(0,kn.P1)([_x,pendingRequest,elementsSelectors_retry,Px,invalidated,Tx],((e,t,n,r,a,o)=>e||!t&&n.count<ve.$O&&(r||a||!o))),Gx=(0,kn.P1)([elementsSelectors_params,pages],((e,t)=>!elements_isSearch(e.search)&&t.includes(0))),Yx=(0,kn.P1)([kx,Tx],((e,t)=>e&&t)),Ux=(0,kn.P1)([currentESDBStatus,(e,{search:t})=>t],(({dbExists:e,esEnabled:t,isCacheLimited:n},r)=>e&&t&&elements_isSearch(r)&&(!!r.keyword||!n))),Fx=(0,kn.P1)([currentESDBStatus,Ux,kx,Tx],(({isCacheLimited:e,isSearchPartial:t},n,r,a)=>n&&e&&t&&r&&!a)),Kx=(0,kn.P1)([elementsSelectors_params,(e,{counts:t})=>t],((e,{counts:t,loading:n})=>{if(!elements_isSearch(e.search)&&!n)return((e,t,n)=>{const r=e.find((e=>e.LabelID===t));if(!r)return 0;const a=n.Unread;return void 0===a?r.Total||0:a>0?r.Unread||0:(r.Total||0)-(r.Unread||0)})(t,e.labelID,e.filter)})),Bx=(0,kn.P1)([page,Kx,elementsSelectors_params,bypassFilter],((e,t,n,r)=>{if(void 0!==t)return expectedPageLength(e,t,isFilter(n.filter)?r.length:0)})),Wx=(0,kn.P1)([page,total,elementsSelectors_params,Bx],((e,t,n,r)=>r||(void 0!==t?expectedPageLength(e,t,isFilter(n.filter)?bypassFilter.length:0):ve.MP))),Vx=(0,kn.P1)([beforeFirstLoad,pendingRequest,invalidated],((e,t,n)=>(e||t)&&!n)),Qx=(0,kn.P1)([Kx,total],((e,t)=>e||t)),Hx=(0,kn.P1)([Bx],(e=>0===e)),Xx=(0,kn.P1)([beforeFirstLoad,pendingRequest,total],((e,t,n)=>!e&&!1===t&&0===n)),Jx=(0,kn.P1)([Ux,currentESDBStatus],((e,t)=>e&&t.isCacheLimited&&t.isSearchPartial)),qx=(0,kn.P1)([beforeFirstLoad,pendingRequest,elementsSelectors_retry,Ux],((e,t,n,r)=>!e&&!t&&void 0===n.error&&3===n.count&&!r));function useElementsEvents_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const useElementsEvents=(e,t)=>{const n=(0,Dn.Z)(),{getESDBStatus:r}=useEncryptedSearchContext(),a=r(),o=(0,i.I0)(),s=(0,i.v9)(Ex),c=(0,i.v9)(Gx),l=(0,i.v9)((e=>Ux(e,{search:t,esDBStatus:a})));(0,mn.ko)((async({Conversations:t=[],Messages:r=[]})=>{const a=e?t:r;if(l)return;if(!a.length)return;if(!c)return void(a.length&&o(Ix()));const{toCreate:i,toUpdate:d,toDelete:u}=a.reduce((({toCreate:t,toUpdate:n,toDelete:r},a)=>{const{ID:o,Action:s}=a,i=e?a.Conversation:a.Message;return s===M.P.CREATE?t.push(i):s===M.P.UPDATE_DRAFT||s===M.P.UPDATE_FLAGS?n.push(function useElementsEvents_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?useElementsEvents_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):useElementsEvents_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({ID:o},i)):s===M.P.DELETE&&r.push(o),{toCreate:t,toUpdate:n,toDelete:r}}),{toCreate:[],toUpdate:[],toDelete:[]}),{toUpdate:p,toLoad:m}=d.filter((({ID:e=""})=>!u.includes(e))).reduce((({toUpdate:e,toLoad:t},n)=>(s.includes(n.ID||"")?e.push(n):t.push(n.ID||""),{toUpdate:e,toLoad:t})),{toUpdate:[],toLoad:[]});o(fx({api:n,conversationMode:e,toCreate:i,toUpdate:p,toLoad:m,toDelete:u}))}))},conversationsSelectors_conversations=e=>e.conversations,$x=(0,kn.P1)([conversationsSelectors_conversations,(e,{ID:t})=>t],((e,t)=>e[t])),ev=(0,kn.P1)([conversationsSelectors_conversations],(e=>Object.values(e)));function useElements_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const useElements=({conversationMode:e,labelID:t,search:n,page:r,sort:a,filter:s,onPage:c})=>{const l=(0,i.oR)(),d=(0,i.I0)(),u=(0,Dn.Z)(),p=(0,o.useRef)(),[m=[],g]=useConversationCounts(),[j=[],b]=useMessageCounts(),y=e?m:j,h=e?g:b,{getESDBStatus:I}=useEncryptedSearchContext(),M=I(),{esEnabled:N}=M,x=(0,Ln.Z)(),v={labelID:t,conversationMode:e,page:r,sort:a,filter:s,search:n,esEnabled:N},w={counts:y,loading:h},D=(0,i.v9)(elementsSelectors_params),S=(0,i.v9)(elementsSelectors_elementsMap),O=(0,i.v9)(Cx),A=(0,i.v9)(Ex),C=(0,i.v9)((e=>Fx(e,{page:r,search:n,esDBStatus:M}))),E=(0,i.v9)((e=>_x(e,{page:r,params:v}))),L=(0,i.v9)((e=>Rx(e,{page:r,params:v}))),P=(0,i.v9)((e=>Yx(e,{page:r}))),Z=(0,i.v9)((e=>Kx(e,{counts:w}))),T=(0,i.v9)((e=>Wx(e,{counts:w}))),k=(0,i.v9)((e=>Vx(e))),z=(0,i.v9)((e=>Qx(e,{counts:w}))),_=(0,i.v9)((e=>Hx(e,{counts:w}))),R=(0,i.v9)(Xx),G=(0,i.v9)((e=>Jx(e,{search:n,esDBStatus:M}))),Y=(0,i.v9)((e=>qx(e,{search:n,esDBStatus:M})));return((e,t)=>{(0,mn.Yz)(ve.if,(()=>{const n=new Date;e.forEach((e=>{const{ExpirationTime:r}=e;if(r){const a=(0,vh.Z)(r);(0,Bc.Z)(n,a)&&t(e)}}))}))})(Object.values(S),(e=>{d(hx(e)),x.delete(_N.E.key),x.delete(RN.L.key)})),(0,o.useEffect)((()=>{E&&d(gx({page:r,params:{labelID:t,conversationMode:e,sort:a,filter:s,esEnabled:N,search:n}})),L&&!elements_isSearch(n)&&d(yx({api:u,abortController:p.current,conversationMode:e,page:r,params:v})),P&&!C&&d(jx(r))}),[E,L,P,C,n]),(0,o.useEffect)((()=>{if(0!==r&&!G&&(_||R)){const e=Z?pageCount(Z):0;0===e?c(0):r!==e-1&&c(e-1)}}),[r,G,_,R,Z]),(0,o.useEffect)((()=>{if(Y){if(!N){const o="Elements list inconsistency error",i=l.getState(),c=function useElements_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?useElements_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):useElements_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({conversationMode:e,labelID:t,search:n,page:r,sort:a,filter:s,dynamicTotal:Z,state:(0,Ne.CE)(i,["elements"])},i.elements);console.error(o,c),(0,GN.uT)(o,{extra:{context:c}})}d(gx({page:r,params:{labelID:t,sort:a,filter:s,esEnabled:N,search:n},beforeFirstLoad:!N&&elements_isSearch(n)}))}}),[Y]),useElementsEvents(e,n),{labelID:D.labelID,elements:O,elementIDs:A,placeholderCount:T,loading:k,total:z}},useGetElementByID=()=>{const e=(0,i.oR)();return(0,o.useCallback)((t=>e.getState().elements.elements[t]),[])},useGetElementsFromIDs=()=>{const e=(0,i.oR)(),t=useMessageCache();return(0,o.useCallback)((n=>{const r=e.getState();return n.map((e=>{var n;if(r.elements.elements[e])return r.elements.elements[e];const a=getLocalID(t,e),o=$x(r,{ID:e});return(null===(n=t.get(a))||void 0===n?void 0:n.data)||(null==o?void 0:o.Conversation)})).filter(Za.Z)}),[])},tv=(0,Fh.PH)("conversations/initialize"),nv=(0,Fh.hg)("conversations/load",(async({api:e,conversationID:t,messageID:n})=>{try{return await e((0,mx.cc)(t,n))}catch(e){throw console.log(e),e}})),rv=(0,Fh.PH)("conversations/retryLoading"),av=(0,Fh.PH)("conversations/optimistic/applyLabels/messages"),ov=(0,Fh.PH)("conversations/optimistic/applyLabels/conversation"),sv=(0,Fh.PH)("conversations/optimistic/delete/conversation"),iv=(0,Fh.PH)("conversations/optimistic/delete/messages"),cv=(0,Fh.PH)("conversations/optimistic/restore"),lv=(0,Fh.PH)("conversations/optimistic/markAs/messages"),dv=(0,Fh.PH)("conversations/optimistic/markAs/conversation"),uv=(0,Fh.PH)("conversations/delete"),pv=(0,Fh.PH)("conversations/update"),mv=(0,Fh.PH)("conversations/event/messages"),gv=(0,Fh.PH)("conversations/event/delete"),jv=(0,Fh.PH)("conversations/event/update"),useGetConversation=()=>{const e=(0,i.oR)();return(0,o.useCallback)((t=>$x(e.getState(),{ID:t})),[])},useGetAllConversations=()=>{const e=(0,i.oR)();return(0,o.useCallback)((()=>ev(e.getState())),[])},useConversation=(e,t)=>{var n,r,a;const s=(0,i.I0)(),c=(0,Dn.Z)(),l=useGetElementsFromIDs(),d=useGetConversation(),u=(0,i.v9)((t=>$x(t,{ID:e}))),init=e=>{if(u)return s(tv(u)),u;const[t]=l([e]);return t?(s(tv({Conversation:t,Messages:void 0,loadRetry:0,errors:{}})),{Conversation:t,Messages:void 0,loadRetry:0,errors:{}}):{Conversation:void 0,Messages:void 0,loadRetry:0,errors:{}}},[p,m]=(0,o.useState)(e),[g,j]=(0,o.useState)(!1),[b,y]=(0,o.useState)((()=>init(p)));(0,o.useEffect)((()=>{if(g)return;const n=init(e);m(e),y(n),n&&n.Messages&&n.Messages.length||(async(e,t)=>{const n=d(e);if(((null==n?void 0:n.loadRetry)||0)>ve.Z1)return;if(hasErrorType(null==n?void 0:n.errors,"notExist"))return;j(!0),await s(nv({api:c,conversationID:e,messageID:t}));const r=d(e);r&&hasError(r.errors)&&!hasErrorType(r.errors,"notExist")&&await(0,Wt.D)(ve.HE),j(!1)})(e,t)}),[e,t,g]),(0,o.useEffect)((()=>{u&&y(u)}),[u]);const h=(0,o.useCallback)((()=>{s(rv({ID:p}))}),[p]),I=hasError(null==b?void 0:b.errors)&&((null==b?void 0:b.loadRetry)||0)>ve.Z1,f=!(I||null!=b&&b.Conversation),M=!(I||null!=b&&null!==(n=b.Messages)&&void 0!==n&&n.length),N=(null==b||null===(r=b.Messages)||void 0===r?void 0:r.length)||(null==b||null===(a=b.Conversation)||void 0===a?void 0:a.NumMessages);return{conversationID:p,conversation:b,pendingRequest:g,loadingConversation:f,loadingMessages:M,numMessages:N,handleRetry:h}},useMessage=(e,t="")=>{var n;const r=useMessageCache(),a=useGetElementsFromIDs(),s=useGetConversation(),i=(0,o.useMemo)((()=>getLocalID(r,e)),[e]),initMessage=()=>{var e;if(r.has(i))return r.get(i);const[n]=a([i]),o=s(t),c=null==o||null===(e=o.Messages)||void 0===e?void 0:e.find((e=>e.ID===i)),l=n||c,d=l?{localID:i,data:l}:{localID:i};return r.set(i,d),d},[c,l]=(0,o.useState)(initMessage);(0,o.useEffect)((()=>(l(initMessage()),r.subscribe((e=>{e===i&&r.has(i)&&l(r.get(i))})))),[i,r]);return{message:c,messageLoaded:!(null===(n=c.data)||void 0===n||!n.Subject),bodyLoaded:!!c.initialized}};function messageRead_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function messageRead_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?messageRead_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):messageRead_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const loadMessage=async(e,t)=>{var n;if(null===(n=e.data)||void 0===n||!n.Body){var r;const{Message:n}=await t((0,En.FC)(null===(r=e.data)||void 0===r?void 0:r.ID));return messageRead_objectSpread(messageRead_objectSpread({},e),{},{data:n})}return e},bv="data-proton-replace-base",removeBase64=(e,t)=>e.replace(/src="data:image\/([a-zA-Z]*);base64,([^\"]*)\"/g,(e=>{const n="pt".concat(Math.random().toString(32).slice(2,12),"-").concat(Date.now());return t&&t.set(n,e),"".concat(bv,'="').concat(n,'"')})),transformEscape=(e="",t)=>{const n=removeBase64(e,t),r=(0,et.oz)(n,!0);return(e=>{try{const t=dt().load(e.innerHTML);ct().juiceDocument(t,gt),st().pruneAttrs(["id","class"],t,jt.ignore),t("style").remove(),t("[style]").each(((e,t)=>{const n=dt()(t);bt.forEach((e=>{n.css(e)&&n.css(e,"")}))})),e.innerHTML=t.html()}catch(e){console.error(e)}})(r),r},yv=[{selector:'a:not([href^="http"]):not([href^="mailto:"])',attribute:"href"},{selector:'img:not([src^="http"]):not([proton-src^="cid"]):not(['.concat(bv,"])"),attribute:"src"}],hv=["ftp://","http://","https://","xmpp:","tel:","callto:"],Iv=hv.concat(["mailto:"]),fv=hv.reduce(((e,t)=>(e[t]=!0,e)),{}),Mv=':not([href=""]):not([href^="#"])',getNormalizedHref=e=>(e.getAttribute("href")||"").trim().toLowerCase(),sanitizeRelativeHttpLinks=e=>{if(matches(e,Mv)&&!(e=>Iv.some((t=>getNormalizedHref(e).startsWith(t))))(e)&&"A"===e.nodeName){const t=e.getAttribute("href");e.setAttribute("href","http://".concat(t))}},disableAnchors=e=>{(e=>{const t=getNormalizedHref(e);return""===t||fv[t]})(e)&&(e.style.pointerEvents="none")},transformLinks=e=>{[...e.querySelectorAll("[href]")].forEach((e=>{(e=>{if(matches(e,Mv)){const t=e.getAttribute("href")||"",n=0===t.indexOf("http"),r=0===t.indexOf("/");(n||r)&&e.setAttribute("target","_blank")}})(e),(e=>{e.setAttribute("rel","noreferrer nofollow noopener")})(e),sanitizeRelativeHttpLinks(e),disableAnchors(e)}))},transformEmbedded=async(e,t,n,r,a,o,s)=>{var i;const c=messages_isDraft(e.data),l=!0===(null===(i=e.messageImages)||void 0===i?void 0:i.showEmbeddedImages)||hasShowEmbedded(s),d=getEmbeddedImages(e);let u=[];e.document&&(u=getAttachments(e.data).map((t=>{const{cid:n,cloc:r}=readContentIDandLocation(t);if(d.find((e=>matchSameCidOrLoc(e,n,r))))return[];return findEmbedded(n,r,e.document).map((e=>{var a;const o=helpers_generateUID("embedded");return c?setEmbeddedAttr(n,r,e):insertImageAnchor(o,"embedded",e),{type:"embedded",original:e,id:o,cid:n,cloc:r,tracker:null===(a=t.Headers)||void 0===a?void 0:a["x-pm-tracker-provider"],attachment:t,status:"not-loaded"}}))})).flat());let p=[...d,...u];const m=!!p.length;if(l){const{updatedImages:s,downloadPromise:i}=((e,t,n,r,a,o,s,i)=>{const c=(0,xe.Tw)(e.filter((({status:e})=>"not-loaded"===e)).filter((e=>e.attachment.KeyPackets||e.attachment.Encrypted===ve.FB.PGP_MIME)).map((e=>e.attachment)));return{updatedImages:e.map((e=>c.includes(e.attachment)&&"not-loaded"===e.status?messageEmbeddeds_objectSpread(messageEmbeddeds_objectSpread({},e),{},{status:"loading"}):e)),downloadPromise:(async()=>{const e=await Promise.all(c.map((async e=>{const t=await get(e,n,r,o,s,i);return{attachment:e,blob:createBlob(e,t.data)}}))),l=a.get(t);if(l&&l.messageImages){const n=getEmbeddedImages(l),r=markEmbeddedImagesAsLoaded(n,e),o=updateImages(l.messageImages,void 0,void 0,r);a.set(t,messageEmbeddeds_objectSpread(messageEmbeddeds_objectSpread({},l),{},{messageImages:o}))}return e})()}})(p,e.localID,e.verification,t,n,r,a,o);if(p=s,c){const t=await i;p=markEmbeddedImagesAsLoaded(p,t),e.document&&((e,t)=>{t.forEach((t=>{const{cid:n,cloc:r,url:a}=t;a&&findEmbedded(n,r,e).forEach((e=>{e.removeAttribute("proton-src"),e.setAttribute("src",a)}))}))})(e.document,p)}}return{showEmbeddedImages:m?l:void 0,embeddedImages:p,hasEmbeddedImages:m}},Nv=["notify@protonmail.com"],xv=Vt.map((e=>"src"===e?'[proton-src]:not([proton-src^="cid"]):not([proton-src^="data"])':"xlink:href"===e?"[*|href]:not([href])":"[proton-".concat(e,"]"))).join(","),transformRemote=(e,t,n,r)=>{var a,o,s;const i=(null===(a=e.messageImages)||void 0===a?void 0:a.showRemoteImages)||hasShowRemote(t)||Nv.includes((null===(o=e.data)||void 0===o||null===(s=o.Sender)||void 0===s?void 0:s.Address)||""),c=messages_isDraft(e.data),l=(0,N.jl)(null==t?void 0:t.ImageProxy,M.C8.PROXY),{matchedElements:d,hasRemoteImages:u}=(e=>{const t=querySelectorAll(e,xv),n=querySelectorAll(e,"[style]").reduce(((e,t)=>{const n=t.getAttribute("style"),r=t.hasAttribute("src");return n&&!r&&n.includes("proton-url")&&e.push(t),e}),[]);return{matchedElements:[...t,...n],hasRemoteImages:t.length+n.length>0}})(e),p=getRemoteImages(e);return d.forEach((e=>{var t;if(p.find((({original:t})=>t===e)))return;const n=helpers_generateUID("remote");"IMG"===e.tagName&&(c?removeProtonPrefix(e):insertImageAnchor(n,"remote",e));let r="";if(Vt.some((t=>(r=e.getAttribute("proton-".concat(t))||"",r&&""!==r))),!r&&e.hasAttribute("style")&&null!==(t=e.getAttribute("style"))&&void 0!==t&&t.includes("proton-url")){const t=e.getAttribute("style");if(null!==t){var a;const e=null===(a=t.match(/proton-url\((.*?)\)/))||void 0===a?void 0:a[1].replace(/('|")/g,"");e&&(r=e)}}p.push({type:"remote",url:r,original:e,id:n,tracker:void 0,status:"not-loaded"})})),i?loadRemoteImages(l,e.localID,p,r,n,null==e?void 0:e.document):l&&(async(e,t,n,r)=>{await(0,Wt.D)(0);const a=(await Promise.all(t.filter((e=>void 0===e.tracker)).map((async e=>{if(!e.url)return{image:e,error:"No URL"};try{return{image:e,tracker:(await r(messageRemotes_objectSpread(messageRemotes_objectSpread({},getImage(e.url,1)),{},{output:"raw",silence:!0}))).headers.get("x-pm-tracker-provider")||""}}catch(t){return{image:e,error:t}}})))).map((({image:e,tracker:t,error:n})=>messageRemotes_objectSpread(messageRemotes_objectSpread({},e),{},{error:n,originalURL:e.url,tracker:t})));updateRemoteImages(n,e,a)})(e.localID,p,r,n),{document:document,showRemoteImages:u?i:void 0,remoteImages:p,hasRemoteImages:u}};var vv=n(61163);const wv=new(n.n(vv)());function transforms_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function transforms_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?transforms_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):transforms_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const prepareHtml=async(e,t,n,r,a,o,s,i)=>{const c=transformEscape(e.decryptedBody,r);(e=>{const t=e.querySelector("base");if(!t||!t.getAttribute("href"))return{document:e};const n=(e=>{const t=e.getAttribute("href")||"";return"/"!==t.substr(-1,1)?"".concat(t,"/"):t})(t),bindAttribute=(e,t,r="")=>{r.startsWith("http")||e.setAttribute(t,n+r)};yv.forEach((({selector:t,attribute:n})=>{[...e.querySelectorAll(t)].forEach((e=>{const t="proton-".concat(n),r=e.getAttribute(n)||"",a=e.getAttribute(t)||"",o="/"===r.charAt(0)?r.slice(1):r;a||"src"===n&&!r?bindAttribute(e,t,a):bindAttribute(e,n,o)}))})),e.querySelectorAll("base").forEach((e=>{var t;null===(t=e.parentElement)||void 0===t||t.removeChild(e)}))})(c),transformLinks(c);const{showEmbeddedImages:l,hasEmbeddedImages:d,embeddedImages:u}=await transformEmbedded(transforms_objectSpread(transforms_objectSpread({},e),{},{document:c}),t,n,a,o,s,i);(e=>{const t=[...e.querySelectorAll('img[src="/img/app/welcome_lock.gif"]')];t.length>0&&t.forEach((e=>{e.src="/assets/img/emails/welcome_lock.gif"}))})(c),(e=>{const t=e.firstElementChild;t&&/absolute/.test(t.style.position)&&(t.style.position="inherit")})(c);const{showRemoteImages:p,hasRemoteImages:m,remoteImages:g}=transformRemote(transforms_objectSpread(transforms_objectSpread({},e),{},{document:c}),i,s,n);return((e,t)=>{[...e.querySelectorAll("[".concat(bv,"]"))].forEach((e=>{const n=e.getAttribute(bv),r=(t.get(n||"")||"").replace(/^src="/,"").replace(/"$/,"").replace(/\n/,"");r&&e.setAttribute("src",r),e.removeAttribute(bv)}))})(c,r),{document:c,showRemoteImages:p,showEmbeddedImages:l,hasRemoteImages:m,remoteImages:g,hasEmbeddedImages:d,embeddedImages:u}},preparePlainText=async(e,t)=>({plainText:t?e:((e="")=>{const t=wv.match(e);if(!t)return htmlEntities(e);let n=0;const r=t.reduce(((t,r)=>(n<r.index&&t.push(htmlEntities(e.slice(n,r.index))),t.push('<a target="_blank" rel="noreferrer nofollow noopener" href="'),t.push(htmlEntities(r.url)),t.push('">'),t.push(htmlEntities(r.text)),t.push("</a>"),n=r.lastIndex,t)),[]);return n<e.length&&r.push(htmlEntities(e.slice(n))),r.join("")})(e)}),Dv="Base64",undoActions=e=>({url:"mail/v4/undoactions",method:"post",data:{Token:e}});var Sv;var notifications_UndoButton=({onUndo:e,disabled:t,className:n})=>(0,j.jsx)(VM.Z,{onClick:e,disabled:t,className:n,children:(0,u.c)("Action").t(Sv||(Sv=(0,d.Z)(["Undo"])))});var notifications_UndoActionNotification=({children:e,onUndo:t})=>(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("span",{className:(0,ht.dh)([t&&"mr1"]),children:e}),t?(0,j.jsx)(notifications_UndoButton,{onUndo:t}):null]}),Ov=n(71830);function counter_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function counter_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?counter_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):counter_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const replaceCounter=(e,t)=>e.map((e=>e.LabelID===t.LabelID?t:e)),updateCounters=(e,t,n)=>(e=>Object.entries(e).map((([,e])=>e)))(Object.entries(n).reduce(((t,[n,r])=>{if((e=>ve.hK.includes(e))(n))return t;t[n]=t[n]||{Total:0,Unread:0,LabelID:n};const a=elements_isUnread(e,n);return r?(t[n].Total=(t[n].Total||0)+1,a&&!isAutoRead(n)&&(t[n].Unread=(t[n].Unread||0)+1)):(t[n].Total=(t[n].Total||0)-1,a&&!isAutoRead(n)&&(t[n].Unread=(t[n].Unread||0)-1)),t}),(0,Ne.qL)(t,"LabelID"))),updateCountersForMarkAs=(e,t,n)=>n.map((n=>{if(!hasLabel(e,n.LabelID||""))return n;const r=elements_isUnread(e,n.LabelID),a=elements_isUnread(t,n.LabelID);let o=n.Unread||0;return r&&!a&&(o-=1),!r&&a&&(o+=1),counter_objectSpread(counter_objectSpread({},n),{},{Unread:o})}));function useOptimisticMarkAs_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function useOptimisticMarkAs_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?useOptimisticMarkAs_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):useOptimisticMarkAs_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const computeRollbackMarkAsChanges=(e,t,n)=>{const r=elements_isUnread(e,t),{status:a}=n;return r&&a===zv.UNREAD||!r&&a===zv.READ?n:{status:r?zv.UNREAD:zv.READ}},applyMarkAsChangesOnMessage=(e,{status:t})=>useOptimisticMarkAs_objectSpread(useOptimisticMarkAs_objectSpread({},e),{},{Unread:t===zv.UNREAD?1:0}),applyMarkAsChangesOnConversation=(e,t,{status:n})=>{const{NumUnread:r=0,Labels:a=[]}=e,{ContextNumUnread:o=0}=a.find((({ID:e})=>e===t))||{},s=n===zv.UNREAD?r+1:Math.max(r-o,0),i=n===zv.UNREAD?o+1:0,c=a.map((e=>e.ID===t?useOptimisticMarkAs_objectSpread(useOptimisticMarkAs_objectSpread({},e),{},{ContextNumUnread:i}):e));return useOptimisticMarkAs_objectSpread(useOptimisticMarkAs_objectSpread({},e),{},{NumUnread:s,ContextNumUnread:i,Labels:c})},applyMarkAsChangesOnConversationWithMessages=(e,t,{status:n})=>{const{NumUnread:r=0,Labels:a=[]}=e,{ContextNumUnread:o=0}=a.find((({ID:e})=>e===t))||{},s=n===zv.UNREAD?r+1:Math.max(r-1,0),i=n===zv.UNREAD?o+1:Math.max(o-1,0),c=a.map((e=>e.ID===t?useOptimisticMarkAs_objectSpread(useOptimisticMarkAs_objectSpread({},e),{},{ContextNumUnread:i}):e));return useOptimisticMarkAs_objectSpread(useOptimisticMarkAs_objectSpread({},e),{},{NumUnread:s,ContextNumUnread:i,Labels:c})};var Av,Cv,Ev,Lv,Pv,Zv,Tv,kv;let zv;!function(e){e.READ="read",e.UNREAD="unread"}(zv||(zv={}));const useMarkAs=()=>{const e=(0,Dn.Z)(),{call:t,start:n,stop:r}=(0,Ie.Z)(),a=(()=>{const e=(0,i.I0)(),t=useGetElementByID(),n=useMessageCache(),r=(0,Ln.Z)(),[a]=useMailSettings(),o=(0,s.k6)(),c=useGetConversation(),l=(0,mn.ZP)(((s,i,d)=>{const u=[],p=[];let{value:m}=r.get(RN.L.key),{value:g}=r.get(_N.E.key);if(s.forEach((r=>{if(u.push({element:r,changes:computeRollbackMarkAsChanges(r,i,d)}),elements_isMessage(r)){const a=r,o=getLocalID(n,a.ID),s=n.get(o);s&&s.data&&n.set(o,useOptimisticMarkAs_objectSpread(useOptimisticMarkAs_objectSpread({},s),{},{data:applyMarkAsChangesOnMessage(s.data,d)}));const l=c(a.ConversationID);if(l&&l.Conversation){const t=l.Conversation,n=applyMarkAsChangesOnConversationWithMessages(t,i,d);e(lv({ID:a.ConversationID,messageID:a.ID,updatedConversation:n,changes:d})),g=updateCountersForMarkAs(t,n,g)}const u=t(a.ID);if(u&&u.ID){const e=applyMarkAsChangesOnMessage(u,d);p.push(e),m=updateCountersForMarkAs(a,e,m)}const j=t(a.ConversationID);j&&j.ID&&p.push(applyMarkAsChangesOnConversationWithMessages(j,i,d))}else{const o=r;e(dv({ID:o.ID,labelID:i,changes:d}));const s=t(o.ID);if(s&&s.ID){const e=applyMarkAsChangesOnConversation(s,i,d);p.push(e),g=updateCountersForMarkAs(s,e,g)}if(d.status===zv.READ){var a;const e=null===(a=c(o.ID))||void 0===a?void 0:a.Messages;null==e||e.forEach((e=>{if(!e.LabelIDs.find((e=>e===i)))return;const t=getLocalID(n,e.ID),r=n.get(t);r&&r.data&&n.set(t,useOptimisticMarkAs_objectSpread(useOptimisticMarkAs_objectSpread({},r),{},{data:applyMarkAsChangesOnMessage(r.data,d)}))}))}}})),p.length){const t=isConversationMode(i,a,o.location);e(Ax({elements:p,bypass:!0,conversationMode:t}))}return r.set(RN.L.key,{value:m,status:Ov.Q.RESOLVED}),r.set(_N.E.key,{value:g,status:Ov.Q.RESOLVED}),()=>{u.forEach((({element:e,changes:t})=>l([e],i,t)))}}));return l})(),{createNotification:c}=(0,hn.Z)();return(0,o.useCallback)(((o,s="",i,l=!0)=>{if(!o.length)return;const p=elements_isMessage(o[0]),m=p?En.RC:mx._t,g=p?En.Lx:mx.ox,b=i===zv.READ?m:g,y=a(o,s,{status:i}),h=(async()=>{let a;try{r();const{UndoToken:i}=await e(b(o.map((e=>e.ID)),s));a=i.Token}catch(e){throw y(),e}finally{n(),await t()}return a})();if(!l){const a=((e,t,n)=>e?1===t?n===zv.READ?(0,u.c)("Success").t(Av||(Av=(0,d.Z)(["Message marked as read."]))):(0,u.c)("Success").t(Cv||(Cv=(0,d.Z)(["Message marked as unread."]))):n===zv.READ?(0,u.c)("Success").ngettext((0,u.msgid)(Ev||(Ev=(0,d.Z)([""," message marked as read."])),t),"".concat(t," messages marked as read."),t):(0,u.c)("Success").ngettext((0,u.msgid)(Lv||(Lv=(0,d.Z)([""," message marked as unread."])),t),"".concat(t," messages marked as unread."),t):1===t?n===zv.READ?(0,u.c)("Success").t(Pv||(Pv=(0,d.Z)(["Conversation marked as read."]))):(0,u.c)("Success").t(Zv||(Zv=(0,d.Z)(["Conversation marked as unread."]))):n===zv.READ?(0,u.c)("Success").ngettext((0,u.msgid)(Tv||(Tv=(0,d.Z)([""," conversation marked as read."])),t),"".concat(t," conversations marked as read."),t):(0,u.c)("Success").ngettext((0,u.msgid)(kv||(kv=(0,d.Z)([""," conversation marked as unread."])),t),"".concat(t," conversations marked as unread."),t))(p,o.length,i),handleUndo=async()=>{try{r(),y();const a=await h;await e(undoActions(a))}finally{n(),await t()}};c({text:(0,j.jsx)(notifications_UndoActionNotification,{onUndo:handleUndo,children:a}),expiration:ve.lY})}}),[])};var _v,Rv,Gv,Yv,Uv,Fv;var notifications_DecryptionErrorNotification=({onDiscard:e,keyFound:t=!1})=>(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:"flex flex-nowrap text-center relative",children:(0,j.jsx)("span",{className:"flex-item-fluid",children:(()=>{const e=(0,j.jsx)(Tu.Z,{url:ve.dJ,className:"text-bold link align-baseline color-inherit",children:(0,u.c)("Action").t(_v||(_v=(0,d.Z)(["Learn more"])))},"learn-more-link");if(t){const t=(0,j.jsx)(sh.Z,{path:ve.ph,className:"text-bold link align-baseline color-inherit",app:M.ei.PROTONMAIL,children:(0,u.c)("Error").t(Rv||(Rv=(0,d.Z)(["re-activate the previous key"])))},"re-activate-link");return(0,u.c)("Error").jt(Gv||(Gv=(0,d.Z)(["Your emails cannot be decrypted due to a recent password reset. If you remember your previous password, you can "," in order to access your messages. ",""])),t,e)}return(0,u.c)("Error").jt(Yv||(Yv=(0,d.Z)(["Your emails cannot be decrypted. This may be due to a password reset. ",""])),e)})()})}),(0,j.jsx)(Ea.Z,{icon:!0,size:"small",shape:"ghost",className:" top-right absolute",onClick:e,title:(0,u.c)("Action").t(Uv||(Uv=(0,d.Z)(["Close this banner"]))),children:(0,j.jsx)(pr.Z,{name:"xmark",alt:(0,u.c)("Action").t(Fv||(Fv=(0,d.Z)(["Close this banner"])))})})]});const useKeyVerification=()=>{const{createNotification:e,hideNotification:t}=(0,hn.Z)(),[n]=(0,yn.ZP)();return{verifyKeys:async r=>{const a=n.find((e=>e.ID===r.data.AddressID));if(!a)return;const{matchingKey:o}=await(async(e,t)=>{const n=(await(0,Rt.FC)(t.data.Body)).getEncryptionKeyIds(),r=[];let a;return await Promise.all(e.Keys.map((async t=>{(await(0,ku.RR)(t.PrivateKey)).forEach((n=>{const a=n.getKeyIds();r.push({address:e,key:t,keyIDs:a})}))}))),{keyFound:r.find((({keyIDs:e})=>e.some((e=>n.some((t=>{const n=t.equals(e);return n&&(a=e),n})))))),matchingKey:a}})(a,r);if(o){const n=(0,FN.rV)("DecryptionErrorEncounteredKeys"),r=n?JSON.parse(n):[];if(!r.some((e=>o.equals(e)))){const n=e({text:(0,j.jsx)(notifications_DecryptionErrorNotification,{onDiscard:()=>t(n),keyFound:!0}),type:"error",expiration:-1,disableAutoClose:!0}),a=JSON.stringify([...r,o]);(0,FN.LS)("DecryptionErrorEncounteredKeys",a)}}else{const n=e({text:(0,j.jsx)(notifications_DecryptionErrorNotification,{onDiscard:()=>t(n)}),type:"error",expiration:-1,disableAutoClose:!0})}}}};function useInitializeMessage_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function useInitializeMessage_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?useInitializeMessage_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):useInitializeMessage_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const useInitializeMessage=(e,t)=>{const n=(0,Dn.Z)(),r=useMarkAs(),a=useMessageCache(),s=useGetMessageKeys(),c=useGetAttachment(),l=(0,i.I0)(),d=(()=>{const e=(0,Ln.Z)();return e.has(Dv)||e.set(Dv,(0,Me.Z)()),e.get(Dv)})(),[u]=useMailSettings(),{verifyKeys:p}=useKeyVerification(),onUpdateAttachment=(e,t)=>{l(Bh({ID:e,attachment:t}))};return(0,o.useCallback)((async()=>{const getData=()=>a.get(e).data,o=a.get(e);o&&o.data||(o.data={ID:e}),updateMessageCache(a,e,{initialized:!1});const i={},{loadRetry:l=0}=o;let m,g,j,b,y=!0;try{const v=await loadMessage(o,n);updateMessageCache(a,e,{data:v.data}),j={};const w=await s(v.data);m=await decryptMessage(getData(),w.privateKeys,0,onUpdateAttachment),m.mimetype&&(j=useInitializeMessage_objectSpread(useInitializeMessage_objectSpread({},j),{},{MIMEType:m.mimetype}));const D=m.attachments||[],S=[...getData().Attachments,...D];j=useInitializeMessage_objectSpread(useInitializeMessage_objectSpread({},j),{},{Attachments:S,NumAttachments:getData().NumAttachments+D.length}),m.errors&&(Object.assign(i,m.errors),await p(v)),(e=>elements_isUnread(e,void 0))(getData())&&(r([getData()],t,zv.READ),j=useInitializeMessage_objectSpread(useInitializeMessage_objectSpread({},j),{},{Unread:0}));const O=j.MIMEType||getData().MIMEType;g=V({MIMEType:O})?await preparePlainText(m.decryptedBody,messages_isDraft(v.data)):await prepareHtml(useInitializeMessage_objectSpread(useInitializeMessage_objectSpread({},v),{},{decryptedBody:m.decryptedBody,data:useInitializeMessage_objectSpread(useInitializeMessage_objectSpread({},v.data),{},{Attachments:S})}),w,a,d,c,onUpdateAttachment,n,u),V({MIMEType:O})||(b={hasRemoteImages:g.hasRemoteImages,showRemoteImages:g.showRemoteImages,hasEmbeddedImages:g.hasEmbeddedImages,showEmbeddedImages:g.showEmbeddedImages,images:[...g.remoteImages||[],...g.embeddedImages||[]]})}catch(e){isNetworkError(e)?(i.network=[e],l<ve.Z1&&(y=void 0,await(0,Wt.D)(ve.HE))):i.processing=[e],console.error("Message initialization error",e)}finally{var h,I,f,M,N,x;updateMessageCache(a,e,{data:j,document:null===(h=g)||void 0===h?void 0:h.document,plainText:null===(I=g)||void 0===I?void 0:I.plainText,decryptedBody:null===(f=m)||void 0===f?void 0:f.decryptedBody,decryptedRawContent:null===(M=m)||void 0===M?void 0:M.decryptedRawContent,signature:null===(N=m)||void 0===N?void 0:N.signature,decryptedSubject:null===(x=m)||void 0===x?void 0:x.decryptedSubject,errors:i,loadRetry:l+1,initialized:y,messageImages:b})}}),[e])};var Kv=n(12189),Bv=n(31037),Wv=n(23277),Vv=n(91147);function upload_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function upload_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?upload_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):upload_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let Qv,Hv;!function(e){e.GET="get",e.POST="post",e.PUT="put",e.DELETE="delete"}(Qv||(Qv={})),function(e){e.FORM_DATA="form"}(Hv||(Hv={}));const Xv=(0,Or.kU)(Vv.APP_NAME),Jv={"X-Requested-With":"XMLHttpRequest",Accept:"application/vnd.protonmail.v1+json","x-pm-appversion":"".concat(Xv,"_").concat(Vv.APP_VERSION),"x-pm-apiversion":Vv.API_VERSION};var qv,$v,ew;function attachmentUploader_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function attachmentUploader_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?attachmentUploader_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):attachmentUploader_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let tw;!function(e){e.ATTACHMENT="attachment",e.INLINE="inline"}(tw||(tw={}));const uploadFile=(e,t,n,r,a,o="")=>{var s,i;const c=(0,u.c)("Title").t(ew||(ew=(0,d.Z)(["Image"]))),l=e.name||"".concat(c," ").concat(getAttachments(t.data).length+1),p=r?o||generateCid(generateProtonWebUID(),(null===(s=t.data)||void 0===s||null===(i=s.Sender)||void 0===i?void 0:i.Address)||""):"",m=n.publicKeys&&n.publicKeys.length>0?[n.publicKeys[0]]:[],g=n.privateKeys&&n.privateKeys.length>0?[n.privateKeys[0]]:[];let j;const b=((e,t)=>{const n=new XMLHttpRequest,{notify:r,subscribe:a}=(0,Wv.Z)(),o=(0,Bv.L0)(e);return{xhr:n,addProgressListener:a,abort:()=>n.abort(),resultPromise:(async()=>{const e=await t,{body:a,headers:s={}}=(0,Kv.Lg)(e.data,e.input),i=upload_objectSpread(upload_objectSpread(upload_objectSpread({},Jv),s),o);return await new Promise(((t,o)=>{n.upload.onprogress=r,n.onload=t,n.upload.onerror=o,n.onerror=o,n.open(e.method,"".concat(Vv.API_URL,"/").concat(e.url)),n.withCredentials=!0,Object.keys(i).forEach((e=>n.setRequestHeader(e,i[e]))),n.send(a)})),JSON.parse(n.responseText)})()}})(a,(async()=>(j=await(async(e,t,n,r)=>{if(!e)throw new TypeError((0,u.c)("Error").t(qv||(qv=(0,d.Z)(["You did not provide a file."]))));try{const a=await(0,To.JM)(e);return encryptAttachment(new Uint8Array(a),e,t,n,r)}catch(e){throw new Error((0,u.c)("Error").t($v||($v=(0,d.Z)(["Failed to encrypt attachment. Please try again."]))))}})(e,r,m,g),{method:"post",url:"mail/v4/attachments",input:"form",data:{Filename:j.Filename||l,MessageID:t.data.ID,ContentID:p,MIMEType:j.MIMEType,KeyPackets:new Blob([j.keys]),DataPacket:new Blob([j.data]),Signature:j.signature?new Blob([j.signature]):void 0}}))());return attachmentUploader_objectSpread(attachmentUploader_objectSpread({},b),{},{resultPromise:(async()=>{const e=await b.resultPromise;if(e.Code===ve.xh.MESSAGE_ALREADY_SENT)throw new Error(ve.Q_);return{attachment:e.Attachment,packets:j,addressID:t.data.AddressID}})()})},upload=(e=[],t,n,r=tw.ATTACHMENT,a,o="")=>e.map((e=>{const s=isEmbeddable(e.type)&&r===tw.INLINE;return uploadFile(e,t,n,s,a,o)})),useLongLivingState=e=>{const t=hooks_useIsMounted(),[n,r]=(0,o.useState)(e),a=(0,o.useRef)(n);return[n,e=>{a.current=e instanceof Function?e(a.current):e,t()&&r(a.current)},()=>a.current]};function usePromise_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function usePromise_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?usePromise_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):usePromise_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const nw={promise:Promise.resolve(),resolver:c.ZT,rejecter:c.ZT,renew:c.ZT,isPending:!1},usePromise=()=>{const e=hooks_useIsMounted(),[,t]=(0,o.useState)({}),n=(0,o.useRef)(nw),renew=()=>{let r=c.ZT,a=c.ZT;const o=new Promise(((o,s)=>{r=r=>{e()&&(n.current.isPending=!1,t({})),o(r)},a=r=>{e()&&(n.current.isPending=!1,t({})),s(r)}}));return Object.assign(n.current,{promise:o,resolver:r,rejecter:a,renew:renew,isPending:!0}),e()&&t({}),o};return n.current===nw&&(n.current=usePromise_objectSpread(usePromise_objectSpread({},nw),{},{renew:renew})),n.current};var rw;const useAttachments=({message:e,onChange:t,onSaveNow:n,editorActionsRef:r,onMessageAlreadySent:a})=>{const s=(0,Dn.Z)(),{createNotification:c}=(0,hn.Z)(),l=(0,UN.Z)(),p=useMessageCache(),m=useGetMessageKeys(),g=(0,i.I0)(),[j,b]=(0,o.useState)(),[y,h,I]=useLongLivingState([]),{promise:f,resolver:M,rejecter:N,renew:x,isPending:v}=usePromise(),{localID:w}=e,D=(0,mn.ZP)(((e,t)=>{const n=I();h(e),t?N(t):!e.length&&n.length&&M()})),removePendingUpload=(e,t)=>{D(I().filter((t=>t!==e)),t)},S=(0,mn.ZP)((async(e,n)=>{try{const a=await n.upload.resultPromise,s=new Uint8Array(await(0,To.JM)(n.file)),i=n.file.name;var o;if(g(Kh({ID:a.attachment.ID||"",attachment:{data:s,verified:1,filename:i,signatures:[]}})),t((t=>{const n=[...getAttachments(t.data),a.attachment],r=getEmbeddedImages(t);e===tw.INLINE&&r.push(createEmbeddedImageFromUpload(a));return{data:{Attachments:n},messageImages:updateImages(t.messageImages,void 0,void 0,r)}})),e===tw.INLINE)null===(o=r.current)||void 0===o||o.insertEmbedded(a.attachment,a.packets.Preview);removePendingUpload(n)}catch(e){(null==e?void 0:e.message)===ve.Q_&&a(),removePendingUpload(n,e)}})),checkSize=t=>{const n=y.map((e=>e.file)),r=((e,t=[])=>getAttachments(e.data).reduce(((e,t)=>e+(t.Size||0)),0)+t.reduce(((e,t)=>e+(t.size||0)),0)>ve.ZA)(e,[...t,...n]);return r&&c({type:"error",text:(0,u.c)("Error").t(rw||(rw=(0,d.Z)(["Attachments are limited to 25 MB"])))}),r},O=(0,mn.ZP)((async(e,t=j||[])=>{b(void 0),0===I().length&&x();const r=await(async()=>(await n(),p.get(w)))(),o=await m(r.data);if(r.isSentDraft)return void a();const s=upload(t,r,o,e,l.UID),i=t.map(((e,t)=>({file:e,upload:s[t]})));(e=>{D([...I(),...e])})(i),i.forEach((t=>S(e,t)))})),A=(0,mn.ZP)((async t=>{const n=t.every((e=>isEmbeddable(e.type))),r=V(e.data);checkSize(t)||(!r&&n?b(t):O(tw.ATTACHMENT,t))})),C=(0,mn.ZP)((async n=>{var a,o,i;n.ID&&null!==(a=e.data)&&void 0!==a&&a.ID&&await s((o=n.ID,i=e.data.ID,{method:"delete",url:"mail/v4/attachments/".concat(o),params:{MessageID:i}})),t((e=>{var t,a;const o=(null===(t=e.data)||void 0===t||null===(a=t.Attachments)||void 0===a?void 0:a.filter((e=>e.ID!==n.ID)))||[],{cid:s,cloc:i}=readContentIDandLocation(n),c=getEmbeddedImages(e),l=c.find((e=>matchSameCidOrLoc(e,s,i))),d=c.filter((e=>!matchSameCidOrLoc(e,s,i)));l&&setTimeout((()=>{var e;null===(e=r.current)||void 0===e||e.removeEmbedded(l.attachment)}));return{data:{Attachments:o},messageImages:updateImages(e.messageImages,void 0,void 0,d)}}))}));return{pendingFiles:j,pendingUploads:y,promiseUpload:f,uploadInProgress:v,handleAddAttachmentsStart:A,handleAddEmbeddedImages:async e=>{checkSize(e)||O(tw.INLINE,e)},handleAddAttachmentsUpload:O,handleCancelAddAttachment:()=>b(void 0),handleRemoveAttachment:C,handleRemoveUpload:async e=>{e.upload.abort(),removePendingUpload(e)}}};var aw,ow,sw,iw,cw,lw,dw=n(42472);function SendingMessageNotification_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const createSendingMessageNotificationManager=()=>{const e=(0,Wv.Z)();return function SendingMessageNotification_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SendingMessageNotification_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SendingMessageNotification_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({ID:-1,setProperties:(t,n)=>{e.notify(t,n)}},e)};var uw;!function(e){e[e.sending=0]="sending",e[e.sent=1]="sent",e[e.sentWithUndo=2]="sentWithUndo"}(uw||(uw={}));var notifications_SendingMessageNotification=({manager:e,scheduledAt:t,localID:n,messageCache:r,viewMode:a})=>{const[s,i]=(0,o.useState)(uw.sending),c=(0,o.useRef)(),l=hooks_useIsMounted(),getScheduledNotification=(e,t)=>{var o,s,i,c;const l=1e3*e,{dateString:p,formattedTime:m}=formatDateToHuman(l),g=(0,u.c)("Info").t(aw||(aw=(0,d.Z)(["Message will be sent "," at ",""])),p,m),b=a===M.WF.GROUP?null===(o=r.get(n))||void 0===o||null===(s=o.data)||void 0===s?void 0:s.ConversationID:null===(i=r.get(n))||void 0===i||null===(c=i.data)||void 0===c?void 0:c.ID;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("span",{className:"mr1",children:g}),t&&(0,j.jsx)(notifications_UndoButton,{className:"mr1",onUndo:t}),(0,j.jsx)(dw.Z,{to:"/scheduled/".concat(b),children:(0,u.c)("Action").t(ow||(ow=(0,d.Z)(["View message"])))})]})};if((0,o.useLayoutEffect)((()=>e.subscribe((async(e,t)=>{c.current=t;const{undoTimeout:n}=await e;l()&&i(n?uw.sentWithUndo:uw.sent),n&&(await(0,Wt.D)(n),l()&&i(uw.sent))}))),[]),s===uw.sent)return(0,j.jsx)(j.Fragment,{children:t?getScheduledNotification(t,void 0):(0,u.c)("Info").t(sw||(sw=(0,d.Z)(["Message sent"])))});const p=c.current;return s===uw.sentWithUndo&&p?t?getScheduledNotification(t,p):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("span",{className:"mr1",children:(0,u.c)("Info").t(iw||(iw=(0,d.Z)(["Message sent."])))}),(0,j.jsx)(notifications_UndoButton,{onUndo:p})]}):(0,j.jsx)(j.Fragment,{children:t?(0,u.c)("Info").t(cw||(cw=(0,d.Z)(["Scheduling message..."]))):(0,u.c)("Info").t(lw||(lw=(0,d.Z)(["Sending message..."])))})},pw=n(57035),mw=n(68785);const extractContentValue=(e="")=>{const t=e.indexOf(";");return-1===t?e:e.substr(0,t)},getAttachmentsByType=(e,t,n)=>e.filter((e=>{const{cid:r,cloc:a}=readContentIDandLocation(e.attachment);return!!(null==t?void 0:t.images.find((e=>e.cid===r||e.cloc===a)))===n})),buildAttachments=e=>e.map((({attachment:e,data:t})=>{const n=JSON.stringify(e.Name),r=e.Headers||{},a=extractContentValue(r["content-type"])||e.MIMEType||"application/octet-stream",o=extractContentValue(r["content-disposition"])||"attachment",s=mw.ZP.factory({contentType:"".concat(a,"; filename=").concat(n,"; name=").concat(n),contentTransferEncoding:"base64",body:(0,Gt.Wf)(t)});return s.header("content-disposition","".concat(o,"; filename=").concat(n,"; name=").concat(n)),r["content-id"]&&s.header("content-id",r["content-id"]),s})),buildEmbeddedHtml=(e,t,n)=>{const r=mw.ZP.factory({contentType:"text/html;charset=utf-8",contentTransferEncoding:"base64",body:e}),a=((e,t)=>getAttachmentsByType(e,t,!0))(t,n),o=buildAttachments(a),s=[r].concat(o);return mw.ZP.factory({contentType:"multipart/related",body:s})},buildPlaintextEntity=e=>mw.ZP.factory({body:e,contentTransferEncoding:"quoted-printable"}),buildBodyEntity=(e,t,n,r)=>void 0!==t&&void 0!==e?((e,t,n,r)=>mw.ZP.factory({contentType:"multipart/alternative",body:[buildPlaintextEntity(e),buildEmbeddedHtml(t,n,r)]}))(e,t,n,r):void 0!==t?buildEmbeddedHtml(t,n,r):buildPlaintextEntity(e),build=(e,t,n,r)=>{const a=buildBodyEntity(e,t,n,r),o=((e,t)=>getAttachmentsByType(e,t,!1))(n,r),s=buildAttachments(o),i=[a].concat(s),c=mw.ZP.factory({contentType:"multipart/mixed",body:i});return"".concat(c.toString(),"\r\n")},fetchMimeDependencies=async(e,t,n,r,a)=>Promise.all(getAttachments(e.data).map((async o=>formatDownload(o,e.verification,t,n,r,a)))),constructMime=async(e,t,n,r,a,o=!0)=>{var s;const i=getPlainText(e,o),c=(null===(s=e.data)||void 0===s?void 0:s.MIMEType)!==M.LO.PLAINTEXT?prepareExport(e):void 0,l=await fetchMimeDependencies(e,t,n,r,a);return build(i,c,l,e.messageImages)},gw=QN.h,combineHeaders=async(e,t)=>{const{headers:n}=await gw(t);return Object.keys(n).reduce(((e,t)=>{const r=t.replace(/(^|-)./g,(e=>e.toUpperCase())),a=((e=[])=>Array.isArray(e)?e:[e])(n[t]).map((e=>"".concat(r,": ").concat(e))).join("\r\n"),o=e.replace(new RegExp("^".concat(t,":.*(?=$[^ ])"),"im"),a);return-1===o.indexOf(r)?"".concat(e+a,"\r\n"):o}),e)};function messageExport_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function messageExport_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?messageExport_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):messageExport_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const jw={Password:void 0,PasswordHint:void 0},prepareExport=e=>{if(!e.document)return"";const t=e.document.cloneNode(!0);(e=>{querySelectorAll({document:e},"[data-embedded-img]").forEach((e=>{const t=e.getAttribute("data-embedded-img");e.removeAttribute("data-embedded-img"),e.removeAttribute("proton-src"),e.removeAttribute("src"),null!=t&&t.startsWith("cid")?e.setAttribute("src","cid:".concat(t.slice(4))):null!=t&&t.startsWith("cloc")&&e.setAttribute("src",t.slice(5))}))})(t);let n=getDocumentContent(t);return n=(e=>{const t=new RegExp(Qt,"g");return e.replace(t,((e,t)=>t.substring(7)))})(n),n},prepareAndEncryptBody=async(e,t)=>(async(e,t)=>{const n=t.publicKeys.slice(0,1),r=t.privateKeys.slice(0,1),{data:a}=await(0,Ft.Z)({data:e,publicKeys:n,privateKeys:r});return a})(V(e.data)?getPlainTextContent(e):prepareExport(e),t),encryptAttachmentKeyPackets=async(e,t=[],n=[])=>Object.fromEntries(await Promise.all(e.filter((({ID:e=""})=>e.indexOf("PGPAttachment"))).map((async e=>{const r=await getSessionKey(e,t),a=await(0,pw.i)({data:r.data,algorithm:r.algorithm,publicKeys:n});return[e.ID||"",(0,Gt.oF)((0,Gt.Wf)(a.message.packets.write()))]})))),exportBlob=async(e,t,n,r,a)=>{var o;const s=await(async(e,t,n,r,a)=>{var o,s;let i,c;if(null!==(o=e.errors)&&void 0!==o&&null!==(s=o.decryption)&&void 0!==s&&s.length){var l;i=null===(l=e.data)||void 0===l?void 0:l.Body}else{const t=V(e.data);i=t?e.decryptedBody:void 0,c=t?void 0:e.decryptedBody}const d=await fetchMimeDependencies(e,t,n,r,a);return build(i,c,d,e.messageImages)})(e,t,n,r,a),{body:i,headers:c}=(e=>{const t=e.search(/\r?\n\r?\n/);return-1===t?{headers:e,body:""}:{headers:e.substring(0,t),body:e.substring(t).trimLeft()}})(s),l=await combineHeaders((null===(o=e.data)||void 0===o?void 0:o.Header)||"",c);return new Blob(["".concat(l,"\r\n").concat(i)],{type:"data:text/plain;charset=utf-8;"})},{PLAINTEXT:bw,DEFAULT:yw,MIME:hw}=M.LO,generateTopPackages=async(e,t,n,r,a,o)=>{const s=Object.values(n).filter(Za.Z).reduce(((e,{encrypt:t,sign:n,pgpScheme:r,mimeType:a})=>({[bw]:e[bw]||a===M.LO.PLAINTEXT,[yw]:e[yw]||a===yw||r===M.uG.SEND_PGP_MIME&&!t&&!n,[hw]:e[hw]||r===M.uG.SEND_PGP_MIME&&(t||n)})),{[bw]:!1,[yw]:!1,[hw]:!1}),i=Object.values(M.LO).filter((e=>s[e])),c={};return await Promise.all(i.map((async n=>{switch(n){case hw:return void(c[hw]=await(async(e,t,n,r,a)=>{var o;return{Flags:addReceived(null===(o=e.data)||void 0===o?void 0:o.Flags),Addresses:{},MIMEType:hw,Body:await constructMime(e,t,n,r,a)}})(e,t,r,a,o));case bw:return void(c[bw]=await(async e=>{var t;return{Flags:addReceived(null===(t=e.data)||void 0===t?void 0:t.Flags),Addresses:{},MIMEType:bw,Body:getPlainText(e,!0)}})(e));case yw:return void(c[yw]=await(async e=>{var t;return{Flags:addReceived(null===(t=e.data)||void 0===t?void 0:t.Flags),Addresses:{},MIMEType:yw,Body:prepareExport(e)}})(e));default:throw new Error}}))),c};var Iw=n(12871);const{PLAINTEXT:fw,DEFAULT:Mw,MIME:Nw}=M.LO,{SEND_PM:xw,SEND_CLEAR:vw,SEND_PGP_INLINE:ww,SEND_PGP_MIME:Dw,SEND_EO:Sw,SEND_CLEAR_MIME:Ow}=M.uG,{SIGNATURES_NONE:Aw,SIGNATURES_ATTACHMENTS:Cw}=M.oH,getSignatureFlag=({sign:e},t)=>e&&getAttachments(t).every((({Signature:e})=>e))?Cw:Aw,sendPMEncryptedOutside=async(e,t)=>{try{const n=await(0,ku.zt)(M.xK),r=(0,Gt.oF)((0,Gt.Wf)(n)),[{data:a},{Auth:o}]=await Promise.all([(0,Ft.Z)({data:r,publicKeys:[],passwords:[e.Password]}),(0,Iw.PL)({api:t,credentials:{password:e.Password||""}})]);return{Auth:o,Type:M.uG.SEND_EO,PasswordHint:e.PasswordHint,Token:r,EncToken:a,Signature:+e.Attachments.every((({Signature:e})=>e))}}catch(e){throw console.error(e),e}},sendClear=async()=>({Type:vw,Signature:0}),attachSubPackages=async(e,t,n,r,a)=>{const bindPackageSet=async(t,n,r)=>{const a=await t,o=e[r];o.Addresses||(o.Addresses={}),o.Type||(o.Type=0),o.Addresses[n]=a,o.Type|=a.Type||0},o=n.map((e=>{const n=r[e];if(!n)throw new Error("Missing send preferences");const{encrypt:o,sign:s,pgpScheme:i,mimeType:c}=n,l="text/html"===c?Mw:fw;switch(i){case xw:return bindPackageSet((async(e,t)=>{var n;return{Type:xw,PublicKey:(null===(n=e.publicKeys)||void 0===n?void 0:n.length)&&e.publicKeys[0]||void 0,Signature:getSignatureFlag(e,t)}})(n,t.data),e,l);case Dw:return s||o?bindPackageSet((async({encrypt:e,sign:t,publicKeys:n})=>e?{Type:Dw,PublicKey:(null==n?void 0:n.length)&&n[0]||void 0}:{Type:Ow,Signature:+t})(n),e,Nw):bindPackageSet(sendClear(),e,Mw);case ww:return bindPackageSet((async(e,t)=>{var n;return e.encrypt?{Type:ww,PublicKey:(null===(n=e.publicKeys)||void 0===n?void 0:n.length)&&e.publicKeys[0]||void 0,Signature:getSignatureFlag(e,t)}:{Type:vw,Signature:getSignatureFlag(e,t)}})(n,t.data),e,fw);case Sw:case vw:default:return isEO(t.data)?bindPackageSet(sendPMEncryptedOutside(t.data,a),e,l):bindPackageSet(sendClear(),e,l)}}));return await Promise.all(o),e},serializeJsonToFormData=(e,t,n)=>{n&&"boolean"!=typeof n&&"number"!=typeof n&&"string"!=typeof n?n instanceof Uint8Array?e[t]=new Blob([n]):Object.entries(n).forEach((([n,r])=>{serializeJsonToFormData(e,"".concat(t,"[").concat(n,"]"),r)})):e[t]=n};var Ew=n(96211);const arrayToBase64=e=>(0,bI.oG)(e)||"",{SEND_CLEAR:Lw,SEND_EO:Pw,SEND_CLEAR_MIME:Zw}=M.uG,packToBase64=({data:e,algorithm:t=M.xK})=>({Key:arrayToBase64(e),Algorithm:t}),encryptKeyPacket=async({sessionKeys:e=[],publicKeys:t=[],passwords:n=[]})=>Promise.all(e.map((async e=>{const{message:r}=await(0,pw.i)({data:e.data,algorithm:e.algorithm,publicKeys:t.length>0?t:void 0,passwords:n}),a=r.packets.write();return arrayToBase64(a)}))),encryptAttachmentKeys=async(e,t,n)=>{if(e.MIMEType===M.LO.MIME)return;const r=Object.values(e.Addresses||{}).map((async e=>{var r;const a=(0,N.jl)(e.Type,M.uG.SEND_EO);if(!a&&!e.PublicKey)return;const o=await encryptKeyPacket({sessionKeys:n.map((({SessionKey:e})=>e)),passwords:a?[(null===(r=t.data)||void 0===r?void 0:r.Password)||""]:void 0,publicKeys:a?void 0:[e.PublicKey]}),s={};n.forEach((({Attachment:e},t)=>{s[e.ID||""]=o[t]})),e.AttachmentKeyPackets=s}));if((0,N.jl)(e.Type,M.uG.SEND_CLEAR)){const t={};n.forEach((({Attachment:e,SessionKey:n})=>{t[e.ID||""]=packToBase64(n)})),e.AttachmentKeys=t}return Promise.all(r)},generateSessionKeyHelper=async()=>({algorithm:M.xK,data:await(0,ku.zt)(M.xK)}),encryptBodyPackage=async(e,t,n,r)=>{const a=n.filter(c.yR),o=t.privateKeys.slice(0,1),s=e.MIMEType===M.LO.MIME&&getAttachments(r.data).length>0&&e.Body.length>1048576,{data:i,sessionKey:l}=await(0,Ft.Z)({data:e.Body||"",publicKeys:a,sessionKey:a.length?void 0:await generateSessionKeyHelper(),privateKeys:o,returnSessionKey:!0,compression:s?Ew.enums.compression.zlib:Ew.enums.compression.uncompressed}),{asymmetric:d,encrypted:u}=await(0,Rt.Pe)(i);return{keys:d,encrypted:u,sessionKey:l}},encryptDraftBodyPackage=async(e,t,n,r)=>{const a=[...t.publicKeys,...n].filter(c.yR),o=t.privateKeys.slice(0,1),{data:s,sessionKey:i}=await(0,Ft.Z)({data:e.Body||"",publicKeys:a,privateKeys:o,returnSessionKey:!0}),l=await(0,Rt.Pe)(s),{asymmetric:d,encrypted:u}=l;l.asymmetric=l.asymmetric.slice(0,t.publicKeys.length);const p=(0,Gt.w3)(Object.values(l).flat());return r.data.Body=await(0,Rt.m)(p),{keys:d.slice(t.publicKeys.length),encrypted:u,sessionKey:i}},sendEncrypt_encryptBody=async(e,t,n)=>{var r;const a=Object.keys(e.Addresses||{}),o=Object.values(e.Addresses||{}),s=o.map((({PublicKey:e})=>e)),i=(null===(r=n.data)||void 0===r?void 0:r.MIMEType)===e.MIMEType?encryptDraftBodyPackage:encryptBodyPackage,{keys:c,encrypted:l,sessionKey:d}=await i(e,t,s,n);let u=0;s.forEach(((t,n)=>{if(!t)return;const r=c[u++];(e.Addresses||{})[a[n]].BodyKeyPacket=arrayToBase64(r)})),await Promise.all(o.map((async e=>{var t;if(e.Type!==Pw)return;const[r]=await encryptKeyPacket({sessionKeys:[d],passwords:[(null===(t=n.data)||void 0===t?void 0:t.Password)||""]});e.BodyKeyPacket=r}))),(e.Type||0)&(Lw|Zw)&&(e.BodyKey=packToBase64(d)),e.Body=l[0]},encryptPackages=async(e,t,n)=>{const r=await(async(e,t)=>Promise.all(getAttachments(e.data).map((async e=>({Attachment:e,SessionKey:await getSessionKey(e,t.privateKeys)})))))(e,t),a=Object.values(n);return await Promise.all(a.map((n=>(async(e,t,n,r)=>(await Promise.all([sendEncrypt_encryptBody(e,n,t),encryptAttachmentKeys(e,t,r)]),Object.values(e.Addresses||{}).forEach((e=>delete e.PublicKey)),e))(n,e,t,r)))),n};var hooks_useDelaySendSeconds=()=>{const[e]=useMailSettings(),{DelaySendSeconds:t=0}=e||{};return t},Tw=n(6982);const attachPublicKey=async(e,t,n)=>{var r,a;const o=(null===(r=e.data)||void 0===r?void 0:r.Attachments)||[],s=null===(a=t.privateKeys)||void 0===a?void 0:a[0],i=((e,{publicKeyArmored:t,fingerprint:n})=>{var r,a;const o="publickey - ".concat(null===(r=e.data)||void 0===r||null===(a=r.Sender)||void 0===a?void 0:a.Address," - 0x").concat(n.slice(0,8).toUpperCase(),".asc");return new File([t],o,{type:"application/pgp-keys"})})(e,await(0,Tw.Z)(s.armor()));if(o.some((e=>((e,t)=>t.Name===e.name&&t.MIMEType===e.type&&e.size>.8*(t.Size||0)&&e.size<1.2*(t.Size||0))(i,e))))return;const[c]=upload([i],e,t,tw.ATTACHMENT,n);return(await c.resultPromise).attachment},replaceDataUrl=e=>e.document?[...e.document.querySelectorAll("img")].map((e=>({image:e,src:e.src||""}))).filter((({src:e})=>/data:image/.test(e))).filter((({src:e})=>e.includes(","))).map((({image:t,src:n})=>{var r,a;const o=generateCid(generateProtonWebUID(),(null===(r=e.data)||void 0===r||null===(a=r.Sender)||void 0===a?void 0:a.Address)||""),s=((e,t)=>{const[n="",r=""]=t.split(","),a=n.split(":")[1].split(";")[0];try{const t=(0,bI.bh)(decodeURIComponent(r));return new File([t],e,{type:a})}catch(t){return new File([r],e,{type:a})}})(t.alt||"image".concat(Date.now()),n);return setEmbeddedAttr(o,"",t),t.removeAttribute("src"),{cid:o,file:s}})):[];var kw;function useSendMessage_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function useSendMessage_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?useSendMessage_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):useSendMessage_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const useSendMessage=()=>{const e=(0,Dn.Z)(),t=useGetMessageKeys(),n=useGetAttachment(),r=(0,i.I0)(),{call:a}=(0,Ie.Z)(),c=useMessageCache(),l=(0,s.k6)(),p=hooks_useDelaySendSeconds(),{createNotification:m,hideNotification:g}=(0,hn.Z)(),j=(()=>{const e=useMessageCache(),t=useGetMessageKeys(),n=(0,UN.Z)();return(0,o.useCallback)((async r=>{const a=e.get(r.localID),o=await t(a.data),s=[...a.data.Attachments],i=getEmbeddedImages(r);if(oe(a.data)){const e=await attachPublicKey(a,o,n.UID);e&&s.push(e)}const c=replaceDataUrl(a);if(c.length)for(const{cid:e,file:t}of c){const[r]=upload([t],a,o,tw.INLINE,n.UID,e),c=await r.resultPromise;s.push(c.attachment),i.push(createEmbeddedImageFromUpload(c))}return updateMessageCache(e,r.localID,{data:{Attachments:s,Flags:r.data.Flags},messageImages:updateImages(a.messageImages,void 0,void 0,i)})}),[])})(),onUpdateAttachment=(e,t)=>{r(Bh({ID:e,attachment:t}))};return(0,o.useCallback)((async({inputMessage:r,mapSendPrefs:o,onCompose:i,sendingMessageNotificationManager:b,useSilentApi:y=!1})=>{const{localID:h,data:I}=r,f=!!p,v=(async()=>{var a;const s=await t(r.data),i=await j(r),c=(0,xe.Tw)(getRecipientsAddresses(r.data));if(Object.values(o).some((e=>(null==e?void 0:e.mimeType)===M.LO.DEFAULT))&&void 0===i.document){const e="Sending with missing document error";throw(0,GN.uT)(e,{extra:{message:i}}),new Error(e)}let l=await generateTopPackages(i,s,o,n,onUpdateAttachment,e);l=await attachSubPackages(l,i,c,o,e),l=await encryptPackages(i,s,l);const{expiresIn:d,autoSaveContacts:u,scheduledAt:m}=r,g=(({ID:e,packages:t,expiresIn:n,delaySendSeconds:r,autoSaveContacts:a,scheduledAt:o})=>{const s={};return serializeJsonToFormData(s,"Packages",t),n&&(s.ExpiresIn=n),r&&(s.DelaySeconds=r),a&&(s.AutoSaveContacts=a),o&&(s.DeliveryTime=o),(0,En.GV)(e,s)})({ID:null===(a=i.data)||void 0===a?void 0:a.ID,packages:l,expiresIn:d,delaySendSeconds:p,autoSaveContacts:u,scheduledAt:m});return e(useSendMessage_objectSpread(useSendMessage_objectSpread({},g),{},{silence:y,timeout:6e4}))})().then((e=>{const t=Date.now(),n=t+1e3*p-t,r=n>0?n:0;return useSendMessage_objectSpread(useSendMessage_objectSpread({},e),{},{undoTimeout:r})}));null==b||b.setProperties(v,(async()=>{b&&g(b.ID);const t=c.get(h);await e((0,En.vD)(t.data.ID)),m({text:(0,u.c)("Message notification").t(kw||(kw=(0,d.Z)(["Sending undone"])))}),await a(),i({existingDraft:{localID:h,data:I},fromUndo:!0})}));try{const{Sent:e,undoTimeout:t}=await v;(async()=>{if(await(0,Wt.D)(Math.max(t,2500)),b&&g(b.ID),f){const t=c.get(h);updateMessageCache(c,h,{data:{LabelIDs:t.data.LabelIDs.filter((e=>e!==M.C7.OUTBOX)),Flags:(e=x.FLAG_SENT,t=>(0,N.ft)(null==t?void 0:t.Flags,e))(t.data)}})}var e})(),updateMessageCache(c,h,{data:e,initialized:void 0,plainText:void 0,document:void 0,messageImages:void 0});const{params:{labelID:n,elementID:r}}=(D=l.location.pathname,(0,s.LX)(D,{path:ve.Gw}));r===e.ConversationID&&l.push(setParamsInLocation(l.location,{labelID:n,elementID:e.ConversationID,messageID:e.ID}))}catch(e){var w;throw[ve.p9.MESSAGE_ALREADY_SENT,ve.At.MESSAGE_ALREADY_SENT,ve.p9.DRAFT_DOES_NOT_EXIST].includes(null==e||null===(w=e.data)||void 0===w?void 0:w.Code)||i({existingDraft:{localID:h,data:I},fromUndo:!0}),e}var D}),[p,c])};var zw,_w,Rw,Gw,Yw,Uw,Fw,Kw;const Bw=["mapErrors","cannotSend","onSubmit","onClose"];function SendWithErrorsModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SendWithErrorsModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SendWithErrorsModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SendWithErrorsModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var addresses_SendWithErrorsModal=e=>{let{mapErrors:t,cannotSend:n,onSubmit:r,onClose:a}=e,o=(0,Sn.Z)(e,Bw);const s=Object.keys(t),getErrorMessage=(e,t)=>e.type===Pb.EXTERNAL_USER_NO_VALID_PINNED_KEY?(0,u.c)("Error").t(zw||(zw=(0,d.Z)([""," for <",">. You can add another key or disable encryption for this contact to resolve the issue."])),e.message,t):"".concat(e.message," <").concat(t,">");return n?(0,j.jsxs)(On.Z,SendWithErrorsModal_objectSpread(SendWithErrorsModal_objectSpread({title:(0,u.c)("Title").t(_w||(_w=(0,d.Z)(["Sending error"]))),hasSubmit:!1,close:(0,j.jsx)(Ea.Z,{color:"norm",onClick:a,children:(0,u.c)("Action").t(Rw||(Rw=(0,d.Z)(["Close"])))}),onClose:a},o),{},{children:[(0,j.jsx)(Cn.Z,{className:"mb1",type:"error",children:(0,u.c)("Send email with errors").ngettext((0,u.msgid)(Gw||(Gw=(0,d.Z)(["We have detected errors. Your email cannot be sent to the email address entered due to the following reason:"]))),"We have detected errors. Your email cannot be sent to any of the email addresses entered due to the following reasons:",s.length)}),(0,j.jsx)("ul",{children:s.map(((e,n)=>(0,j.jsx)("li",{className:(0,ht.dh)([n!==s.length&&"mb0-5"]),children:(0,j.jsx)("span",{className:"block max-w100",children:getErrorMessage(t[e],e)})},n)))})]})):(0,j.jsxs)(On.Z,SendWithErrorsModal_objectSpread(SendWithErrorsModal_objectSpread({title:(0,u.c)("Title").t(Yw||(Yw=(0,d.Z)(["Sending error"]))),submit:(0,u.c)("Action").t(Uw||(Uw=(0,d.Z)(["Send"]))),onSubmit:()=>{r(),a()},onClose:a},o),{},{children:[(0,j.jsx)(Cn.Z,{className:"mb1",type:"error",children:(0,u.c)("Send email with errors").t(Fw||(Fw=(0,d.Z)(["We have detected some errors. Your email cannot be sent to one or more of the email addresses entered due to the following reasons:"])))}),(0,j.jsx)("ul",{children:s.map(((e,n)=>(0,j.jsx)("li",{className:(0,ht.dh)([n!==s.length&&"mb0-5"]),children:(0,j.jsx)("span",{className:"block max-w100",children:getErrorMessage(t[e],e)})},n)))}),(0,j.jsx)(Cn.Z,{className:"mb1",children:(0,u.c)("Send email with errors").t(Kw||(Kw=(0,d.Z)(["Do you want to send the email anyway?"])))})]}))};function cleanMessage_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cleanMessage_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cleanMessage_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cleanMessage_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const uniqueRecipientList=e=>{const t=new Set;return e.reduce(((e,n)=>(t.has(n.Address)||(t.add(n.Address),e.push(n)),e)),[])},uniqueMessageRecipients=e=>{const t=uniqueRecipientList(e.ToList),n=uniqueRecipientList(e.CCList),r=uniqueRecipientList(e.BCCList);return cleanMessage_objectSpread(cleanMessage_objectSpread({},e),{},{ToList:t,CCList:n,BCCList:r})},removeMessageRecipients=(e,t)=>{var n,r,a;const o=null===(n=e.ToList)||void 0===n?void 0:n.filter((({Address:e})=>!(null!=t&&t.includes(e)))),s=null===(r=e.CCList)||void 0===r?void 0:r.filter((({Address:e})=>!(null!=t&&t.includes(e)))),i=null===(a=e.BCCList)||void 0===a?void 0:a.filter((({Address:e})=>!(null!=t&&t.includes(e))));return cleanMessage_objectSpread(cleanMessage_objectSpread({},e),{},{ToList:o,CCList:s,BCCList:i})};var Ww,Vw,Qw,Hw;const Xw=["mapWarnings","onSubmit","onClose"];function SendWithWarningsModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SendWithWarningsModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SendWithWarningsModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SendWithWarningsModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Jw,qw,$w,eD,tD,addresses_SendWithWarningsModal=e=>{let{mapWarnings:t,onSubmit:n,onClose:r}=e,a=(0,Sn.Z)(e,Xw);const o=Object.keys(t);return(0,j.jsxs)(On.Z,SendWithWarningsModal_objectSpread(SendWithWarningsModal_objectSpread({title:(0,u.c)("Title").t(Ww||(Ww=(0,d.Z)(["Confirm recipient address?"]))),submit:(0,u.c)("Action").t(Vw||(Vw=(0,d.Z)(["Send anyway"]))),onSubmit:()=>{n(),r()},onClose:r},a),{},{children:[(0,j.jsx)(Cn.Z,{className:"mb1",type:"warning",children:(0,u.c)("Send email with warnings").ngettext((0,u.msgid)(Qw||(Qw=(0,d.Z)(["We have detected some warnings. The following email address may not receive emails:"]))),"We have detected some warnings. The following email addresses may not receive emails:",o.length)}),(0,j.jsx)("ul",{children:o.map(((e,n)=>(0,j.jsx)("li",{className:(0,ht.dh)([n!==o.length&&"mb0-5"]),children:(0,j.jsx)("span",{className:"block max-w100",children:"".concat(t[e].join(", ")," <").concat(e,">")})},n)))}),(0,j.jsx)(Cn.Z,{className:"mb1",children:(0,u.c)("Send email with warnings").t(Hw||(Hw=(0,d.Z)(["Do you want to send the email anyway?"])))})]}))};const nD=["emails","onSubmit","onClose"];function SendWithExpirationModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SendWithExpirationModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SendWithExpirationModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SendWithExpirationModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var rD,aD,oD,addresses_SendWithExpirationModal=e=>{let{emails:t,onSubmit:n,onClose:r}=e,a=(0,Sn.Z)(e,nD);return(0,j.jsxs)(On.Z,SendWithExpirationModal_objectSpread(SendWithExpirationModal_objectSpread({title:(0,u.c)("Title").t(Jw||(Jw=(0,d.Z)(["Send without expiration?"]))),submit:(0,u.c)("Action").t(qw||(qw=(0,d.Z)(["Send anyway"]))),"data-testid":"composer:send-anyway",onSubmit:()=>{n(),r()},onClose:r},a),{},{children:[(0,j.jsxs)(Cn.Z,{className:"mb1",children:[(0,u.c)("Info").t($w||($w=(0,d.Z)(["Message expiration works out-of-the-box when sending emails to other ProtonMail users. To send expiring emails to non-ProtonMail users, please cancel and add password protection to your email."]))),(0,j.jsx)("br",{}),(0,j.jsx)(Tu.Z,{url:"https://protonmail.com/support/knowledge-base/expiration/",children:(0,u.c)("Info").t(eD||(eD=(0,d.Z)(["Learn more"])))})]}),(0,j.jsx)(Cn.Z,{className:"mb1",type:"warning",children:(0,u.c)("Send email with warnings").ngettext((0,u.msgid)(tD||(tD=(0,d.Z)(["If you decide to send the message anyway, the following recipient will receive the email without expiration:"]))),"If you decide to send the message anyway, the following recipients will receive the email without expiration:",t.length)}),(0,j.jsx)("ul",{children:t.map(((e,n)=>(0,j.jsx)("li",{className:(0,ht.dh)([n!==t.length&&"mb0-5"]),children:(0,j.jsx)("span",{className:"block max-w100",children:e})},n)))})]}))};const sD=["emails","onSubmit","onClose"];function SendWithChangedPreferencesModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SendWithChangedPreferencesModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SendWithChangedPreferencesModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SendWithChangedPreferencesModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var iD,addresses_SendWithChangedPreferencesModal=e=>{let{emails:t,onSubmit:n,onClose:r}=e,a=(0,Sn.Z)(e,sD);return(0,j.jsxs)(On.Z,SendWithChangedPreferencesModal_objectSpread(SendWithChangedPreferencesModal_objectSpread({title:(0,u.c)("Title").t(rD||(rD=(0,d.Z)(["Send with changed preferences?"]))),submit:(0,u.c)("Action").t(aD||(aD=(0,d.Z)(["Send anyway"]))),onSubmit:()=>{n(),r()},onClose:r},a),{},{children:[(0,j.jsx)(Cn.Z,{className:"mb1",type:"warning",children:(0,u.c)("Send email with changed preferences").t(oD||(oD=(0,d.Z)(["The contacts for the following addresses have been deleted, so the corresponding encryption preferences have been updated accordingly:"])))}),(0,j.jsx)("ul",{children:t.map(((e,n)=>(0,j.jsx)("li",{className:(0,ht.dh)([n!==t.length&&"mb0-5"]),children:(0,j.jsx)("span",{className:"block max-w100",children:e})},n)))})]}))};function useSendVerifications_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function useSendVerifications_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?useSendVerifications_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):useSendVerifications_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const cD=/voir pi\u00e8ce jointe|voir pi\u00e8ces jointes|voir fichier joint|voir fichiers joints|voir fichier associ\u00e9|voir fichiers associ\u00e9s|joint|joints|jointe|jointes|joint \u00e0 cet e-mail|jointe \u00e0 cet e-mail|joints \u00e0 cet e-mail|jointes \u00e0 cet e-mail|joint \u00e0 ce message|jointe \u00e0 ce message|joints \u00e0 ce message|jointes \u00e0 ce message|je joins|j'ai joint|ci-joint|pi\u00e8ce jointe|pi\u00e8ces jointes|fichier joint|fichiers joints|voir le fichier joint|voir les fichiers joints|voir la pi\u00e8ce jointe|voir les pi\u00e8ces jointes/gi,lD=/see attached|see attachment|see included|is attached|attached is|are attached|attached are|attached to this email|attached to this message|I'm attaching|I am attaching|I've attached|I have attached|I attach|I attached|find attached|find the attached|find included|find the included|attached file|see the attached|see attachments|attached files|see the attachment|here is the attachment|attached you will find/gi,dD=/siehe Anhang|angeh\u00e4ngt|anbei|hinzugef\u00fcgt|ist angeh\u00e4ngt|angeh\u00e4ngt ist|sind angeh\u00e4ngt|angeh\u00e4ngt sind|an diese E-Mail angeh\u00e4ngt|an diese Nachricht angeh\u00e4ngt|Anhang hinzuf\u00fcgen|Anhang anbei|Anhang hinzugef\u00fcgt|anbei finden|anbei|im Anhang|mit dieser E-Mail sende ich|angeh\u00e4ngte Datei|siehe angeh\u00e4ngte Datei|siehe Anh\u00e4nge|angeh\u00e4ngte Dateien|siehe Anlage|siehe Anlagen/gi,uD=/ver adjunto|ver archivo adjunto|ver archivo incluido|se ha adjuntado|adjuntado|se han adjuntado|adjuntados|se ha adjuntado a este correo|se ha adjuntado a este mensaje|Adjunto te env\u00edo|He adjuntado|He adjuntado un archivo|adjunto|adjunto el archivo|incluyo el archivo|archivo adjunto|mira el archivo adjunto|ver archivos adjuntos|archivos adjuntos|ver el archivo adjunto/gi,pD=/прикрепленный файл|прикреплённый файл|прикреплен|прикреплён|прикрепил|прикрепила/gi,mD=/vedi in allegato|vedi allegato|vedi accluso|\u00e8 allegato|in allegato|sono allegati|in allegato vi sono|in allegato a questa email|in allegato a questo messaggio|invio in allegato|allego|ho allegato|in allegato trovi|trova in allegato|trova accluso|incluso troverai|file allegato|vedi allegato|vedi allegati|file allegati|vedi l'allegato|ti allego/gi,gD=/ver em anexo|ver anexo|ver inclu\u00eddo|est\u00e1 anexado|est\u00e1 em anexo|est\u00e3o anexados|est\u00e3o em anexo|anexado a este email|anexado a esta mensagem|estou a anexar|anexo|anexei|anexei|anexo|anexei|queira encontrar em anexo|segue em anexo|encontra-se inclu\u00eddo|segue inclu\u00eddo|ficheiro anexado|ver o anexo|ver anexos|ficheiros anexados|ver o anexo/gi,jD=/ver anexado|ver anexo|ver inclu\u00eddo|est\u00e1 anexado|anexado|est\u00e3o anexados|anexados|anexado a este e-mail|anexado a esta mensagem|estou anexando|eu estou anexando|anexei|eu anexei|estou incluindo|eu estou incluindo|inclu\u00ed|eu inclu\u00ed|enviar anexo|enviar o anexo|enviar inclu\u00eddo|ver anexos|arquivo anexado|arquivos anexados|em anexo|anexo|veja em anexo|veja o anexo|veja os anexos/gi,bD=/zie bijgevoegd|zie bijlage|zie toegevoegd|is bijgevoegd|bijgevoegd is|zijn bijgevoegd|bijgevoegd zijn|toegevoegd aan dit e-mailbericht|toegevoegd aan dit bericht|Ik voeg bij|Ik heb bijgevoegd|Ik voeg een bijlage bij|Ik heb een bijlage bijgevoegd|bijlage bijvoegen|bijlagen bijvoegen|bijlage opgenomen|opgenomen bijlage|bijgevoegd bestand|zie de bijlage|zie bijlagen|bijgevoegde bestanden|de bijlage bekijken/gi,yD=/patrz w za\u0142\u0105czeniu|patrz za\u0142\u0105cznik|patrz do\u0142\u0105czony|jest do\u0142\u0105czony|w za\u0142\u0105czeniu|s\u0105 za\u0142\u0105czone|za\u0142\u0105czone s\u0105|za\u0142\u0105czone do tego e-maila|do\u0142\u0105czone do tej wiadomo\u015bci|do\u0142\u0105czam|za\u0142\u0105czam|za\u0142\u0105czy\u0142em|za\u0142\u0105czy\u0142am|dodaj\u0119|wysy\u0142am|do\u0142\u0105czy\u0142em|do\u0142\u0105czy\u0142am|patrz za\u0142\u0105czniki|w za\u0142\u0105czniku|patrz za\u0142\u0105czony|patrz za\u0142\u0105czone|masz w za\u0142\u0105czeniu|za\u0142\u0105czony plik|zobacz za\u0142\u0105cznik|zobacz za\u0142\u0105czniki|za\u0142\u0105czone pliki/gi,useSendVerifications=(e,t,n)=>{const{createModal:r}=(0,In.Z)(),{createNotification:a}=(0,hn.Z)(),s=hooks_useGetEncryptionPreferences(),{contactsMap:i}=useContactCache(),c=useMessageCache();return{preliminaryVerifications:(0,o.useCallback)((async r=>{const{isSentDraft:a}=c.get(r.localID);if(a)throw new Error(ve.Q_);getRecipients(r.data).length||e&&await e(),r.data.Subject||t&&await t();const[o]=locateBlockquote(r.document),s=(0,br.Fv)("".concat(r.data.Subject," ").concat(o||"")),[i]="en"===kt.E4&&s.match(lD)||"fr"===kt.E4&&s.match(cD)||"de"===kt.E4&&s.match(dD)||"es"===kt.E4&&s.match(uD)||"ru"===kt.E4&&s.match(pD)||"it"===kt.E4&&s.match(mD)||"pt"===kt.E4&&s.match(gD)||"pt"===kt.E4&&"pt_BR"===kt.o$&&s.match(jD)||"nl"===kt.E4&&s.match(bD)||"pl"===kt.E4&&s.match(yD)||[];i&&!r.data.Attachments.length&&n&&await n(i)}),[]),extendedVerifications:(0,o.useCallback)((async(e,t)=>{const n=useSendVerifications_objectSpread(useSendVerifications_objectSpread({},e),{},{data:uniqueMessageRecipients(e.data)}),o=(0,xe.Tw)(getRecipientsAddresses(n.data)),c=o.filter((e=>!(0,Xe.H6)(e)));if(c.length>0){const e=c.join(", ");throw a({text:(0,u.c)("Send email with warnings").ngettext((0,u.msgid)(iD||(iD=(0,d.Z)(["The following address is not valid: ",""])),e),"The following addresses are not valid: ".concat(e),c.length),type:"error"}),new Error}const l={},p={},m={},g=[],b=[];await Promise.all(o.map((async n=>{var r,a;let o;const c=await s(n,0,i);null!==(r=c.emailAddressWarnings)&&void 0!==r&&r.length&&(l[n]=c.emailAddressWarnings);const d=t[n];if(d&&null!==(a=d.contactSignatureInfo)&&void 0!==a&&a.isVerified)if(c.isContactSignatureVerified){const t=d.contactSignatureInfo.creationTime,n=c.contactSignatureTimestamp,r=Math.abs(+n-(0,$p.u)());o=+n<+t||+n!=+t&&r>24*M.kr?d.sendPreferences:send_getSendPreferences(c,e.data)}else{var u,j;null!==(u=d.sendPreferences)&&void 0!==u&&u.encrypt&&null!==(j=d.sendPreferences)&&void 0!==j&&j.isPublicKeyPinned&&g.push(n),o=send_getSendPreferences(c,e.data)}else o=send_getSendPreferences(c,e.data);p[n]=o,o.error&&(m[n]=o.error),e.expiresIn&&!o.encrypt&&b.push(n)})));Object.keys(l).length>0&&await new Promise(((e,t)=>{r((0,j.jsx)(addresses_SendWithWarningsModal,{mapWarnings:l,onSubmit:()=>e(void 0),onClose:t}))}));const y=Object.keys(m);y.length>0&&await new Promise(((e,t)=>{r((0,j.jsx)(addresses_SendWithErrorsModal,{mapErrors:m,cannotSend:y.length===o.length,onSubmit:()=>{for(const e of y){const t=o.findIndex((t=>t===e));o.splice(t,1),delete p[e]}e(void 0)},onClose:t}))})),g.length>0&&await new Promise(((e,t)=>{r((0,j.jsx)(addresses_SendWithChangedPreferencesModal,{emails:g,onSubmit:()=>e(void 0),onClose:t}))})),b.length>0&&await new Promise(((e,t)=>{r((0,j.jsx)(addresses_SendWithExpirationModal,{emails:b,onSubmit:()=>e(void 0),onClose:t}))}));return{cleanMessage:useSendVerifications_objectSpread(useSendVerifications_objectSpread({},e),{},{data:removeMessageRecipients(n.data,y)}),mapSendPrefs:p,hasChanged:y.length>0}}),[i])}};var hD,ID;var fD,MD,ND,xD;!function(e){e[e.saving=0]="saving",e[e.sent=1]="sent"}(xD||(xD={}));const SavingDraftNotification=({onDiscard:e},t)=>{const[n,r]=(0,o.useState)(xD.saving);return(0,o.useImperativeHandle)(t,(()=>({saved:()=>r(xD.sent)}))),n===xD.sent?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("span",{className:"mr1",children:(0,u.c)("Info").t(fD||(fD=(0,d.Z)(["Draft saved."])))}),(0,j.jsx)(VM.Z,{onClick:e,children:(0,u.c)("Action").t(MD||(MD=(0,d.Z)(["Discard"])))})]}):(0,j.jsx)(j.Fragment,{children:(0,u.c)("Info").t(ND||(ND=(0,d.Z)(["Saving draft…"])))})};var vD,wD,DD=(0,o.forwardRef)(SavingDraftNotification);function attachment_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function attachment_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?attachment_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):attachment_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var SD,OD,AD;function useScheduleSend_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function useScheduleSend_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?useScheduleSend_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):useScheduleSend_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var CD;function useSaveDraft_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function useSaveDraft_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?useSaveDraft_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):useSaveDraft_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const{ALL_DRAFTS:ED}=M.C7,mergeSavedMessage=(e,t)=>useSaveDraft_objectSpread(useSaveDraft_objectSpread({},e),{},{ID:t.ID,Time:t.Time,ConversationID:t.ConversationID,LabelIDs:t.LabelIDs}),useCreateDraft=()=>{const e=(0,Dn.Z)(),t=useMessageCache(),{call:n}=(0,Ie.Z)(),r=useGetMessageKeys();return(0,o.useCallback)((async a=>{const o=await r(a.data),s=await(async(e,t,n)=>{const r=await n(e.data),a=await prepareAndEncryptBody(e,r),o=getAttachments(e.data);let s;if(null!=o&&o.length){var i;const t=await n({AddressID:e.originalAddressID||(null===(i=e.data)||void 0===i?void 0:i.AddressID)});s=await encryptAttachmentKeyPackets(o,t.privateKeys,r.publicKeys)}const{Message:c}=await t((0,En.P2)({Action:e.action!==ve.Xh.NEW?e.action:void 0,Message:messageExport_objectSpread(messageExport_objectSpread({},e.data),{},{Body:a},jw),ParentID:e.ParentID,AttachmentKeyPackets:s}));return c})(a,e,r),i=replaceEmbeddedAttachments(a,s.Attachments);updateMessageCache(t,a.localID,useSaveDraft_objectSpread(useSaveDraft_objectSpread({data:useSaveDraft_objectSpread(useSaveDraft_objectSpread({},mergeSavedMessage(a.data,s)),{},{Attachments:s.Attachments,Subject:s.Subject})},o),{},{document:a.document,plainText:a.plainText,messageImages:i})),await n()}),[])},useUpdateDraft=()=>{const e=(0,Dn.Z)(),t=useMessageCache(),{call:n}=(0,Ie.Z)(),r=useGetMessageKeys(),{createNotification:a}=(0,hn.Z)();return(0,o.useCallback)((async(o,s)=>{try{var i;const a=t.get(o.localID),s=(null===(i=a.data)||void 0===i?void 0:i.AddressID)||"",c=await r(o.data),l=mergeMessages(a,o),d=await(async(e,t,n,r)=>{var a;const o=await r(e.data),s=await prepareAndEncryptBody(e,o),i=getAttachments(e.data);let c;if(null!=i&&i.length&&t!==e.data.AddressID){const e=await r({AddressID:t});c=await encryptAttachmentKeyPackets(i,e.privateKeys,o.publicKeys)}const{Message:l}=await n(messageExport_objectSpread(messageExport_objectSpread({},(0,En.XD)(null===(a=e.data)||void 0===a?void 0:a.ID,messageExport_objectSpread(messageExport_objectSpread({},e.data),{},{Body:s},jw),c)),{},{silence:!0}));return l})(l,s,e,r);updateMessageCache(t,o.localID,useSaveDraft_objectSpread(useSaveDraft_objectSpread({},c),{},{data:useSaveDraft_objectSpread(useSaveDraft_objectSpread({},mergeSavedMessage(o.data,d)),{},{Attachments:d.Attachments}),document:o.document,plainText:o.plainText,messageImages:o.messageImages})),await n()}catch(e){if(!e.data){const t=(0,u.c)("Error").t(CD||(CD=(0,d.Z)(["Error while saving draft. Please try again."])));throw a({text:t,type:"error"}),isNetworkError(e)||(0,GN.uT)(t,{extra:{message:o,error:e}}),e}if(e.data.Code===ve.p9.MESSAGE_ALREADY_SENT)throw null==s||s(),e;throw e.data.Code===ve.p9.DRAFT_DOES_NOT_EXIST&&t.delete(o.localID),a({text:e.data.Error,type:"error"}),e}}),[])},useSaveDraft=({onMessageAlreadySent:e}={})=>{const t=useMessageCache(),n=useUpdateDraft(),r=useCreateDraft();return(0,o.useCallback)((async a=>{var o;const s=t.get(a.localID);null!=s&&null!==(o=s.data)&&void 0!==o&&o.ID?await n(a,e):await r(a)}),[])};var LD;function useHandleMessageAlreadySent_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function useHandleMessageAlreadySent_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?useHandleMessageAlreadySent_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):useHandleMessageAlreadySent_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const useAutoSave=({onMessageAlreadySent:e})=>{const t=usePromise(),n=usePromise(),r=(0,o.useRef)(!1),a=(0,o.useRef)(),s=useSaveDraft({onMessageAlreadySent:e}),c=(()=>{const e=(0,Dn.Z)(),[t]=useMailSettings(),[n=[]]=useFolders(),r=(0,i.I0)(),a=useMessageCache(),{call:s}=(0,Ie.Z)(),{createNotification:c}=(0,hn.Z)(),l=useGetConversation();return(0,o.useCallback)((async o=>{var i,d,u,p,m,g,j;const b=(0,N.jl)((null==t?void 0:t.ShowMoved)||0,M.zC.DRAFTS)?ED:getCurrentFolderID(null===(i=o.data)||void 0===i?void 0:i.LabelIDs,n),y=await e((0,En.qP)([null===(d=o.data)||void 0===d?void 0:d.ID],b));if(null!=y&&null!==(u=y.Responses)&&void 0!==u&&null!==(p=u[0])&&void 0!==p&&null!==(m=p.Response)&&void 0!==m&&m.Error){const{Response:e}=y.Responses[0];c({text:e.Error,type:"error"});const t=new Error(e.Error);throw t.code=e.Code,t}a.delete(o.localID||"");const h=(null===(g=o.data)||void 0===g?void 0:g.ConversationID)||"",I=l(h);I&&1===(null===(j=I.Messages)||void 0===j?void 0:j.length)&&r(uv(h)),await s()}),[e,a,t])})();let l,d;const u=(0,mn.ZP)((async e=>{l();try{await n.promise}catch(e){}try{a.current=void 0,n.renew(),await s(e)}finally{n.resolver(),d()}})),p=(0,mn.ZP)((e=>(t.resolver(),u(e))),{debounce:2e3});l=(0,mn.ZP)((()=>{r.current=!0})),d=(0,mn.ZP)((()=>{r.current=!1,void 0!==a.current&&p(a.current)}));const m=(0,mn.ZP)((e=>{if(t.isPending||t.renew(),a.current=e,!r.current)return p(e)})),g=(0,mn.ZP)((()=>{var e;null===(e=p.abort)||void 0===e||e.call(p),t.resolver(),r.current=!1}));m.abort=g;return{autoSave:m,saveNow:e=>(g(),u(e)),deleteDraft:(0,mn.ZP)((async e=>{g();try{await n.promise}catch(e){}try{n.renew(),await c(e)}finally{n.resolver(),d()}})),pendingSave:n,pendingAutoSave:t,pause:l,restart:d}};var PD,ZD,TD=n(24619),kD=n(86106),zD=n(6267);const _D=["disabled"];function PasswordInput_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function PasswordInput_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PasswordInput_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PasswordInput_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var RD,GD,PasswordInput=e=>{let{disabled:t}=e,n=(0,Sn.Z)(e,_D);const[r,a]=(0,o.useState)("password");return(0,j.jsx)(zD.Z,PasswordInput_objectSpread(PasswordInput_objectSpread({autoComplete:"off",autoCapitalize:"off",autoCorrect:"off",spellCheck:"false"},n),{},{type:r,disabled:t,icon:(0,j.jsx)("button",{title:"password"===r?(0,u.c)("Label").t(PD||(PD=(0,d.Z)(["Reveal password"]))):(0,u.c)("Label").t(ZD||(ZD=(0,d.Z)(["Hide password"]))),className:"inline-flex flex-item-noshrink",tabIndex:-1,disabled:t,type:"button",onClick:()=>{a("password"===r?"text":"password")},children:(0,j.jsx)(pr.Z,{className:"mauto",name:"password"===r?"eye":"eye-slash"})})}))},YD=n(89880);function ComposerInnerModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ComposerInnerModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ComposerInnerModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ComposerInnerModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var UD,FD,KD,BD,WD,VD,QD,HD,XD,JD,qD,$D,eS,tS,modals_ComposerInnerModal=({title:e,disabled:t=!1,children:n,onCancel:r,onSubmit:a,submit:s,submitActions:i,displayCancel:c=!0})=>{const l=(0,o.useRef)(null),p=(0,AI.Z)({rootRef:l});return(0,Co.y)(l,[["Escape",e=>{e.stopPropagation(),null==r||r()}]]),(0,j.jsx)("div",ComposerInnerModal_objectSpread(ComposerInnerModal_objectSpread({className:"composer-inner-modal absolute z10 w100 h100 flex flex-justify-center flex-align-items-center",ref:l},p),{},{children:(0,j.jsxs)("div",{className:"modal",children:[(0,j.jsx)(YD.Z,{modalTitleID:"",noEllipsis:!0,hasClose:!1,onClose:r,children:e}),(0,j.jsxs)(hg.Z,{onSubmit:a,onReset:r,children:[(0,j.jsx)(Ig.Z,{children:n}),(0,j.jsxs)(fg.Z,{className:"flex flex-nowrap flex-column",children:[i,!i&&(0,j.jsx)(yr.Z,{type:"submit",disabled:t,"data-testid":"modal-footer:set-button",className:"w100",children:s||(0,u.c)("Action").t(RD||(RD=(0,d.Z)(["Set"])))}),c&&(0,j.jsx)(Ea.Z,{type:"reset","data-testid":"modal-footer:cancel-button",children:(0,u.c)("Action").t(GD||(GD=(0,d.Z)(["Cancel"])))})]})]})]})}))};var nS,rS,aS,oS,sS,iS,cS,lS,dS,modals_ComposerPasswordModal=({message:e,onClose:t,onChange:n})=>{const[r]=(0,o.useState)((0,ht.D)("password-modal")),[a,s]=(0,o.useState)((null==e?void 0:e.Password)||""),[i,c]=(0,o.useState)((null==e?void 0:e.Password)||""),[l,p]=(0,o.useState)((null==e?void 0:e.PasswordHint)||""),[m,g]=(0,o.useState)(!1),[b,y]=(0,o.useState)(!1),{createNotification:h}=(0,hn.Z)(),{validator:I,onFormSubmit:f}=(0,TD.Z)();(0,o.useEffect)((()=>{""!==a?g(!0):""===a&&g(!1),m&&a!==i?y(!1):m&&a===i&&y(!0)}),[a,i]);const handleChange=e=>t=>{e(t.target.value)},getErrorText=(e=!1)=>void 0===m||m?void 0===b||b?"":(0,u.c)("Error").t(BD||(BD=(0,d.Z)(["Passwords do not match"]))):e?(0,u.c)("Error").t(FD||(FD=(0,d.Z)(["Please repeat the password"]))):(0,u.c)("Error").t(KD||(KD=(0,d.Z)(["Please set a password"])));return(0,j.jsxs)(modals_ComposerInnerModal,{title:(0,u.c)("Info").t(WD||(WD=(0,d.Z)(["Encrypt for non-ProtonMail users"]))),onSubmit:()=>{f(),m&&b&&(n((e=>{var t;return{data:{Flags:(0,N.ft)(null===(t=e.data)||void 0===t?void 0:t.Flags,x.FLAG_INTERNAL),Password:a,PasswordHint:l}}}),!0),h({text:(0,u.c)("Notification").t(UD||(UD=(0,d.Z)(["Password has been set successfully"])))}),t())},onCancel:()=>{n((e=>{var t;return{data:{Flags:(0,N.oD)(null===(t=e.data)||void 0===t?void 0:t.Flags,x.FLAG_INTERNAL),Password:void 0,PasswordHint:void 0}}}),!0),t()},children:[(0,j.jsxs)("p",{className:"mt0 mb1 color-weak",children:[(0,u.c)("Info").t(VD||(VD=(0,d.Z)(["Encrypted messages to non-ProtonMail recipients will expire in 28 days unless a shorter expiration time is set."]))),(0,j.jsx)("br",{}),(0,j.jsx)(Tu.Z,{url:"https://protonmail.com/support/knowledge-base/encrypt-for-outside-users/",children:(0,u.c)("Info").t(QD||(QD=(0,d.Z)(["Learn more"])))})]}),(0,j.jsx)(kD.Z,{id:"composer-password-".concat(r),label:(0,u.c)("Label").t(HD||(HD=(0,d.Z)(["Message Password"]))),"data-testid":"encryption-modal:password-input",value:a,as:PasswordInput,placeholder:(0,u.c)("Placeholder").t(XD||(XD=(0,d.Z)(["Password"]))),onChange:handleChange(s),error:I([getErrorText()])}),(0,j.jsx)(kD.Z,{id:"composer-password-verif-".concat(r),label:(0,u.c)("Label").t(JD||(JD=(0,d.Z)(["Confirm Password"]))),"data-testid":"encryption-modal:confirm-password-input",value:i,as:PasswordInput,placeholder:(0,u.c)("Placeholder").t(qD||(qD=(0,d.Z)(["Confirm Password"]))),onChange:handleChange(c),autoComplete:"off",error:I([getErrorText(!0)])}),(0,j.jsx)(kD.Z,{id:"composer-password-hint-".concat(r),label:(0,u.c)("Label").t($D||($D=(0,d.Z)(["Password Hint"]))),hint:(0,u.c)("info").t(eS||(eS=(0,d.Z)(["Optional"]))),"data-testid":"encryption-modal:password-hint",value:l,placeholder:(0,u.c)("Placeholder").t(tS||(tS=(0,d.Z)(["Hint"]))),onChange:handleChange(p),autoComplete:"off"})]})};const optionRange=e=>(0,xe.w6)(0,e).map((e=>(0,j.jsx)("option",{value:e,children:e},e)));var modals_ComposerExpirationModal=({message:e,onClose:t,onChange:n})=>{const r=useMessageCache(),a=null!=e&&e.localID?r.get(null==e?void 0:e.localID):void 0,[s]=(0,o.useState)((0,ht.D)("password-modal")),i=(({expiresIn:e=604800}={})=>{const t=e/3600;return{days:Math.floor(t/24),hours:t%24}})(e),[c,l]=(0,o.useState)(i.days),[p,m]=(0,o.useState)(i.hours),{createNotification:g}=(0,hn.Z)(),b=(({days:e,hours:t})=>t+24*e)({days:c,hours:p}),handleChange=e=>t=>{const n=Number(t.target.value);e(n),e===l&&28===n&&m(0)},handleCancel=()=>{n({expiresIn:void 0}),t()},y=Number.isNaN(b),h=(0,u.c)("Info").t(aS||(aS=(0,d.Z)(["Expiration time"])));return(0,j.jsxs)(modals_ComposerInnerModal,{title:(0,u.c)("Info").t(oS||(oS=(0,d.Z)(["Expiration Time"]))),disabled:y,onSubmit:()=>{Number.isNaN(b)?g({type:"error",text:(0,u.c)("Error").t(nS||(nS=(0,d.Z)(["Invalid expiration time"])))}):0!==b?b>ve.iY?g({type:"error",text:(0,u.c)("Error").t(rS||(rS=(0,d.Z)(["The maximum expiration is 4 weeks"])))}):(n({expiresIn:3600*b}),a&&(a.expiresIn=3600*b),t()):handleCancel()},onCancel:handleCancel,children:[(0,j.jsxs)("p",{className:"mt0 color-weak",children:[(0,u.c)("Info").t(sS||(sS=(0,d.Z)(["If you are sending this message to a non ProtonMail user, please be sure to set a password for your message."]))),(0,j.jsx)("br",{}),(0,j.jsx)(Tu.Z,{url:"https://protonmail.com/support/knowledge-base/expiration/",children:(0,u.c)("Info").t(iS||(iS=(0,d.Z)(["Learn more"])))})]}),(0,j.jsxs)("div",{className:"flex flex-column flex-nowrap mt1 mb1",children:[(0,j.jsx)("span",{className:"sr-only",id:"composer-expiration-string-".concat(s),children:h}),(0,j.jsxs)("div",{className:"flex flex-gap-0-5 flex-row flex",children:[(0,j.jsxs)("div",{className:"flex-item-fluid flex flex-column flex-nowrap",children:[(0,j.jsx)("label",{htmlFor:"composer-expiration-days-".concat(s),className:"mr0-5 text-semibold",children:(0,u.c)("Info").ngettext((0,u.msgid)(cS||(cS=(0,d.Z)(["Day"]))),"Days",c)}),(0,j.jsx)("select",{id:"composer-expiration-days-".concat(s),className:"field mr0-25",value:c,onChange:handleChange(l),placeholder:(0,u.c)("Info").ngettext((0,u.msgid)(lS||(lS=(0,d.Z)(["Day"]))),"Days",c),"aria-describedby":"composer-expiration-string-".concat(s),"data-testid":"composer:expiration-days",children:optionRange(29)})]}),(0,j.jsxs)("div",{className:"flex-item-fluid flex flex-column flex-nowrap",children:[(0,j.jsx)("label",{htmlFor:"composer-expiration-hours-".concat(s),className:"text-semibold",children:(0,u.c)("Info").ngettext((0,u.msgid)(dS||(dS=(0,d.Z)(["Hour"]))),"Hours",p)}),(0,j.jsx)("select",{id:"composer-expiration-hours-".concat(s),className:"field mr0-25",value:p,onChange:handleChange(m),disabled:28===c,"aria-describedby":"composer-expiration-string-".concat(s),"data-testid":"composer:expiration-hours",children:optionRange(24)})]})]})]})]})},uS=n(80606),pS=n(39782),mS=n(34043),gS=n(16685),jS=n(97056),bS=n(36675);const mod=(e,t)=>(e%t+t)%t,yS=["onChange","value","interval","min","displayDuration","max","preventNextDayOverflow"];var hS,IS;function TimeInput_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function TimeInput_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?TimeInput_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TimeInput_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const TimeInput_toFormatted=(e,t)=>(0,Et.Z)(e,"p",{locale:t}),formatDuration=(e,t)=>{const n=((e,t)=>{const n=10**Math.round(t);return n>Number.MAX_VALUE?e:n<Number.MIN_VALUE?0:Math.round(e*n)/n})(t/60,1),r=Math.ceil(n);return n>=1?(0,u.c)("Time unit").ngettext((0,u.msgid)(hS||(hS=(0,d.Z)([""," hour"])),n),"".concat(n," hours"),r):(0,u.c)("Time unit").ngettext((0,u.msgid)(IS||(IS=(0,d.Z)([""," minute"])),t),"".concat(t," minutes"),t)},TimeInput_getMinutes=e=>60*e.getHours()+e.getMinutes();var fS,MS,NS,xS,vS,wS,DS,SS,OS,AS,input_TimeInput=e=>{let{onChange:t,value:n,interval:r=30,min:a,displayDuration:s=!1,max:i,preventNextDayOverflow:c=!1}=e,l=(0,Sn.Z)(e,yS);const[d]=(0,o.useState)((0,ht.D)("dropdown")),{anchorRef:u,isOpen:p,open:m,close:g}=(0,No.Z)(),[b,y]=(0,o.useState)((()=>TimeInput_toFormatted(n,kt.RW)));(0,o.useEffect)((()=>{y(TimeInput_toFormatted(n,kt.RW))}),[n]);const h=(0,o.useMemo)((()=>a||(0,nx.Z)(n)),[a,n]),I=TimeInput_getMinutes(h),f=TimeInput_getMinutes(n),M=f-I,handleSelectDate=e=>{const n=TimeInput_getMinutes(e);if(f===n)return;const r=n-I,a=new Date(h.getFullYear(),h.getMonth(),h.getDate(),0,I+(r<0&&!c?r+1440:r));t(a)},parseAndSetDate=e=>{try{const t=((e,t)=>(0,_c.Z)(e,"p",new Date,{locale:t}))(e,kt.RW),n=+t;Number.isNaN(n)||handleSelectDate(t)}catch(e){}y(TimeInput_toFormatted(n,kt.RW))};(0,Co.y)(u,[["Escape",e=>{p&&(e.preventDefault(),e.stopPropagation(),parseAndSetDate(b),g())}],["Enter",e=>{parseAndSetDate(b),p?(e.preventDefault(),e.stopPropagation(),g()):(e.preventDefault(),e.stopPropagation(),m())}],["ArrowDown",e=>{p&&(e.preventDefault(),e.stopPropagation(),handleSelectDate((0,jS.Z)(n,r)))}],["ArrowUp",e=>{p&&(e.preventDefault(),e.stopPropagation(),handleSelectDate((0,jS.Z)(n,-1*r)))}]]);const N=(0,o.useRef)(null),x=(0,o.useRef)(null),v=(0,o.useMemo)((()=>{const e=c?((e,t)=>{const n=e.getMinutes();let r=0;return n>t&&(r=Math.floor(n/t)*t),60*(24-e.getHours())-r})(h,r):1440,t=Math.floor(e/r);return Array.from({length:t},((e,t)=>t*r)).map((e=>{const t=(0,jS.Z)(h,e),n=TimeInput_toFormatted(t,kt.RW);return{minutes:e,value:t,label:s?"".concat(n," (").concat(formatDuration(0,e),")"):n}}))}),[M,h]),w=(0,o.useMemo)((()=>v.filter((({value:e})=>(!a||e>=a)&&(!i||e<=i)))),[v,a,i]),D=(0,o.useMemo)((()=>{const e=(0,br.CR)(w.map((({label:e})=>e)),b);return-1===e?void 0:e}),[w,b]),scrollToSelection=()=>{if(!p)return;if(!x.current||!N.current||void 0===D)return;const e=x.current.children[D];e&&(N.current.scrollTop=e.offsetTop-(N.current.clientHeight-e.clientHeight)/2)};return(0,o.useEffect)((()=>{requestAnimationFrame(scrollToSelection)}),[p]),(0,o.useEffect)((()=>{scrollToSelection()}),[D]),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(jr.Z,TimeInput_objectSpread({type:"text",ref:u,onFocus:()=>m(),onBlur:()=>{parseAndSetDate(b),g()},onClick:()=>m(),value:b,onChange:({target:{value:e}})=>y(e)},l)),(0,j.jsx)(Mo.Z,{id:d,isOpen:p,anchorRef:u,onClose:g,disableFocusTrap:!0,autoClose:!1,autoCloseOutside:!1,contentProps:{onMouseDown:e=>{e.preventDefault()},ref:N},disableDefaultArrowNavigation:!0,children:(0,j.jsx)(dropdown_DropdownMenu,{listRef:x,children:w.map((({label:e,value:t},n)=>{const r=n===D&&e.includes(b);return(0,j.jsx)(Do.Z,{isSelected:r,style:{pointerEvents:"auto"},onClick:()=>{handleSelectDate(t),g()},children:e},n)}))})})]})};const formatDateInput=(e,t)=>(0,Ct.Z)(e)?(0,u.c)("Date label").t(fS||(fS=(0,d.Z)(["Today"]))):(0,Tt.Z)(e)?(0,u.c)("Date label").t(MS||(MS=(0,d.Z)(["Tomorrow"]))):(0,Et.Z)(e,"PP",{locale:t});var CS,ES,LS,PS,modals_ComposerScheduleSendModal=({onClose:e,onSubmit:t,messageLocalID:n})=>{const r=useMessageCache().get(n),a=r&&r.scheduledAt?new Date(1e3*r.scheduledAt):(0,Rc.Z)(new Date,1);(!r||r&&!r.scheduledAt)&&a.setHours(9,0,0,0);const[s,i]=(0,o.useState)(a),[c,l]=(0,o.useState)(a),[p]=(0,o.useState)((0,ht.D)("schedule-send-modal")),m=(0,o.useMemo)((()=>{const e=s,t=(0,uS.Z)(c),n=(0,pS.Z)(c);return e.setHours(t,n,0,0),r&&(r.scheduledAt=(0,mS.Z)(e)),e}),[s,c]),g=(0,gS.Z)(),b=(0,ex.Z)((0,Rc.Z)(g,ve.Ph)),y=(0,o.useMemo)((()=>s<g?(0,u.c)("Error").t(NS||(NS=(0,d.Z)(["Choose a date in the future."]))):s>b?(0,u.c)("Error").ngettext((0,u.msgid)(xS||(xS=(0,d.Z)(["Choose a date within the next "," day."])),ve.Ph),"Choose a date within the next ".concat(ve.Ph," days."),ve.Ph):void 0),[s]),h=(0,o.useMemo)((()=>{const e=(0,gS.Z)();return e.setHours(c.getHours(),c.getMinutes()),(0,Ct.Z)(s)&&e<=new Date?(0,u.c)("Error").t(vS||(vS=(0,d.Z)(["Choose a date in the future."]))):void 0}),[c,s]),I=(0,o.useMemo)((()=>{const e=(0,xh.Z)(new Date,120);return!s||!c||m<e||m>(0,ex.Z)(b)}),[s,c,m,g,b]);return(0,j.jsxs)(modals_ComposerInnerModal,{title:(0,u.c)("Title").t(wS||(wS=(0,d.Z)(["Schedule send"]))),disabled:I,submit:(0,u.c)("Action").t(DS||(DS=(0,d.Z)(["Schedule message"]))),onSubmit:()=>{t((0,mS.Z)(m)),e()},onCancel:()=>{e()},children:[(0,j.jsx)(Cn.Z,{className:"mb1",learnMore:"https://protonmail.com/support/knowledge-base/schedule-email-send/",children:(0,u.c)("Info").t(SS||(SS=(0,d.Z)(["When do you want your message to be sent?"])))}),(0,j.jsxs)("div",{className:"flex flex-gap-0-5 flex-row flex",children:[(0,j.jsxs)("div",{className:"flex-item-fluid flex flex-column flex-nowrap",children:[(0,j.jsx)(gr.Z,{htmlFor:"composer-schedule-date-".concat(p),children:(0,u.c)("Label").t(OS||(OS=(0,d.Z)(["Date"])))}),(0,j.jsx)(input_DateInput,{id:"composer-schedule-date-".concat(p),onChange:e=>{e&&i(e)},value:s,min:g,max:b,toFormatter:formatDateInput,preventValueReset:!0,error:y,errorZoneClassName:"hidden","data-testid":"composer:schedule-date-input"}),y&&(0,j.jsx)(bS.Z,{children:y})]}),(0,j.jsxs)("div",{className:"flex-item-fluid flex flex-column flex-nowrap",children:[(0,j.jsx)(gr.Z,{htmlFor:"composer-schedule-time-".concat(p),children:(0,u.c)("Label").t(AS||(AS=(0,d.Z)(["Time"])))}),(0,j.jsx)(input_TimeInput,{id:"composer-schedule-time-".concat(p),onChange:e=>{l(e)},value:c,min:(()=>{if(!(0,Ct.Z)(s))return;const e=new Date;e.setMinutes(0,0);const t=(0,xh.Z)(e,120),n=Array.from(Array(2)).map(((t,n)=>(0,jS.Z)(e,30*(n+1))));return t<=n[0]?n[1]:n[0]})(),max:(0,Ct.Z)(s)?(0,tx.Z)():void 0,error:h,errorZoneClassName:"hidden",isSubmitted:!0,"data-testid":"composer:schedule-time-input"}),h&&(0,j.jsx)(bS.Z,{children:h})]})]})]})};var modals_ComposerInsertImageModal=({files:e,onSelect:t,onClose:n})=>{const r=(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Ea.Z,{color:"norm",fullWidth:!0,onClick:()=>t(tw.ATTACHMENT),"data-testid":"composer:insert-image-attachment",autoFocus:!0,children:(0,u.c)("Action").t(CS||(CS=(0,d.Z)(["Attachment"])))}),(0,j.jsx)(Ea.Z,{color:"norm",fullWidth:!0,onClick:()=>t(tw.INLINE),"data-testid":"composer:insert-image-inline",children:(0,u.c)("Action").t(ES||(ES=(0,d.Z)(["Inline"])))})]});return(0,j.jsx)(modals_ComposerInnerModal,{title:(0,u.c)("Info").ngettext((0,u.msgid)(LS||(LS=(0,d.Z)(["Insert image"]))),"Insert images",e.length),onCancel:n,submitActions:r,children:(0,j.jsx)("p",{className:"text-left",children:(0,u.c)("Info").t(PS||(PS=(0,d.Z)(["You can add it as an attachment or display it inline in your mail body."])))})})};let ZS;!function(e){e[e.None=0]="None",e[e.Password=1]="Password",e[e.Expiration=2]="Expiration",e[e.ScheduleSend=3]="ScheduleSend",e[e.InsertImage=4]="InsertImage",e[e.DeleteDraft=5]="DeleteDraft",e[e.NoRecipients=6]="NoRecipients",e[e.NoSubjects=7]="NoSubjects",e[e.NoAttachments=8]="NoAttachments"}(ZS||(ZS={}));var TS,kS,zS,_S,RS,GS,YS,US,FS,KS,BS,WS;var VS,QS,modals_ComposerInnerModals=({innerModal:e,message:t,handleChange:n,pendingFiles:r,handleCloseInnerModal:a,handleScheduleSend:o,handleCloseInsertImageModal:s,handleAddAttachmentsUpload:i,handleDelete:c,handleSendAnyway:l,handleCancelSend:p,attachmentsFoundKeyword:m})=>(0,j.jsxs)(j.Fragment,{children:[e===ZS.Password&&(0,j.jsx)(modals_ComposerPasswordModal,{message:t.data,onClose:a,onChange:n}),e===ZS.Expiration&&(0,j.jsx)(modals_ComposerExpirationModal,{message:t,onClose:a,onChange:n}),e===ZS.ScheduleSend&&(0,j.jsx)(modals_ComposerScheduleSendModal,{onClose:a,onSubmit:o,messageLocalID:t.localID}),e===ZS.InsertImage&&r&&(0,j.jsx)(modals_ComposerInsertImageModal,{files:r,onClose:s,onSelect:i}),e===ZS.DeleteDraft&&(0,j.jsx)(modals_ComposerInnerModal,{title:(0,u.c)("Title").t(TS||(TS=(0,d.Z)(["Delete draft"]))),onCancel:a,onSubmit:c,submitActions:(0,j.jsx)(po,{type:"submit",children:(0,u.c)("Action").t(kS||(kS=(0,d.Z)(["Delete"])))}),children:(0,j.jsx)(Cn.Z,{className:"mb1",type:"error",children:(0,u.c)("Info").t(zS||(zS=(0,d.Z)(["Are you sure you want to permanently delete this draft?"])))})}),e===ZS.NoRecipients&&(0,j.jsx)(modals_ComposerInnerModal,{title:(0,u.c)("Title").t(_S||(_S=(0,d.Z)(["Recipient missing"]))),onCancel:()=>p("recipient missing"),onSubmit:()=>p("recipient missing"),displayCancel:!1,submit:(0,u.c)("Action").t(RS||(RS=(0,d.Z)(["Got it"]))),children:(0,j.jsx)("p",{className:"text-left m0",children:(0,u.c)("Info").t(GS||(GS=(0,d.Z)(["Please add at least one recipient."])))})}),e===ZS.NoSubjects&&(0,j.jsx)(modals_ComposerInnerModal,{title:(0,u.c)("Title").t(YS||(YS=(0,d.Z)(["Subject missing"]))),onCancel:()=>p("subject missing"),onSubmit:l,submit:(0,u.c)("Action").t(US||(US=(0,d.Z)(["Send anyway"]))),children:(0,j.jsx)("p",{className:"text-left m0",children:(0,u.c)("Info").t(FS||(FS=(0,d.Z)(["You have not given your email any subject. Do you want to send the message anyway?"])))})}),e===ZS.NoAttachments&&(0,j.jsx)(modals_ComposerInnerModal,{title:(0,u.c)("Title").t(KS||(KS=(0,d.Z)(["No attachment found"]))),onCancel:()=>p("attachments missing"),onSubmit:l,submit:(0,u.c)("Action").t(BS||(BS=(0,d.Z)(["Send anyway"]))),children:(0,j.jsx)(Cn.Z,{learnMore:"https://protonmail.com/support/knowledge-base/attachment-reminders/",children:(0,u.c)("Info").t(WS||(WS=(0,d.Z)(["You wrote “","”, but no attachment has been added. Do you want to send your message anyway?"])),m)})})]});function Composer_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Composer_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Composer_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Composer_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Composer=({messageID:e,composerFrameRef:t,breakpoints:n,toggleMinimized:r,toggleMaximized:a,onFocus:i,onClose:l,onSubject:p,isFocused:m},g)=>{var b,y,h;const I=useMessageCache(),{createNotification:f}=(0,hn.Z)(),x=(0,o.useRef)(null),[v]=(e=>{const[t,n]=(0,o.useState)(!1),[r,a]=(0,o.useState)(!1),s=(0,mn.ZP)((()=>{const t=e.current;t&&(n(t.scrollHeight>t.clientHeight),a(t.scrollWidth>t.clientWidth))}));return(0,o.useEffect)((()=>{s();const t=e.current;if(!t)return;t.addEventListener("resize",s);const n=new MutationObserver(s);return n.observe(t,{attributes:!0,childList:!0,subtree:!0}),()=>{t.removeEventListener("resize",s),n.disconnect()}}),[]),[t,r]})(x),[w,D]=(0,o.useState)(!0),[S,O]=(0,o.useState)(!1),[A,C]=useLongLivingState({localID:e}),E=(e=>{const t=hooks_useIsMounted(),[n,r]=(0,o.useState)({}),safeSetMapSendInfo=e=>t()&&r(e);return(0,o.useMemo)((()=>({message:e,mapSendInfo:n,setMapSendInfo:safeSetMapSendInfo})),[e,n])})(A),L=useReloadSendInfo(),{message:P}=useMessage(e),Z=(0,mn.ZP)(l),T=(({modelMessage:e,onClose:t})=>{const{createNotification:n}=(0,hn.Z)(),r=useCreateDraft(),a=useMessageCache(),o=(0,mn.ZP)((()=>{const t=a.get(e.localID);r(useHandleMessageAlreadySent_objectSpread(useHandleMessageAlreadySent_objectSpread({},t),{},{localID:"",data:useHandleMessageAlreadySent_objectSpread(useHandleMessageAlreadySent_objectSpread({},t.data),{},{ID:""})})),a.delete(e.localID)}));return()=>{o(),n({text:(0,u.c)("Error").t(LD||(LD=(0,d.Z)(["This message has already been sent. A new draft has been saved."]))),type:"error"}),t()}})({modelMessage:A,onClose:Z}),k=useInitializeMessage(P.localID),z=getRecipients(A.data).length>0,_=w,R=(0,o.useRef)(c.ZT),G=(0,o.useRef)(c.ZT),Y=(0,o.useRef)(c.ZT),U=(0,o.useRef)(),{autoSave:F,saveNow:K,deleteDraft:B,pendingSave:W,pendingAutoSave:V,pause:Q,restart:H}=useAutoSave({onMessageAlreadySent:T});(0,o.useEffect)((()=>{var e,t,n;W.isPending||(null===(e=P.data)||void 0===e||!e.ID)&&(null!==(t=P.data)&&void 0!==t&&t.ID||null!=(n=P.localID)&&n.startsWith(ie))||void 0!==P.initialized||void 0!==A.initialized||k()}),[W.isPending,P.localID,null===(b=P.data)||void 0===b?void 0:b.ID,P.initialized,A.initialized]),(0,o.useEffect)((()=>{var e,t;if((null===(e=A.data)||void 0===e?void 0:e.ID)!==(null===(t=P.data)||void 0===t?void 0:t.ID)){var n,r;const e=Composer_objectSpread(Composer_objectSpread(Composer_objectSpread({},P),A),{},{data:Composer_objectSpread(Composer_objectSpread(Composer_objectSpread({},P.data),A.data),{},{Attachments:null===(n=P.data)||void 0===n?void 0:n.Attachments}),messageImages:replaceEmbeddedAttachments(A,null===(r=P.data)||void 0===r?void 0:r.Attachments)});C(e)}else{const{changed:e,Attachments:t}=((e,t)=>{var n,r;let a=!1;const o=null===(n=e.data)||void 0===n||null===(r=n.Attachments)||void 0===r?void 0:r.map((e=>{var n;const r=null==t||null===(n=t.data)||void 0===n?void 0:n.Attachments.find((t=>e.ID===t.ID));return r&&e.KeyPackets!==r.KeyPackets?(a=!0,attachment_objectSpread(attachment_objectSpread({},e),{},{KeyPackets:r.KeyPackets})):e}));return{changed:a,Attachments:o}})(A,P);e&&C(Composer_objectSpread(Composer_objectSpread({},A),{},{data:Composer_objectSpread(Composer_objectSpread({},A.data),{},{Attachments:t}),messageImages:replaceEmbeddedAttachments(A,t)}))}}),[W.isPending,null===(y=P.data)||void 0===y?void 0:y.ID]),(0,o.useEffect)((()=>{if(!A.initialized&&P.initialized){var e;const t=!0===P.openDraftFromUndo?{}:{Password:void 0,PasswordHint:void 0},n=Composer_objectSpread(Composer_objectSpread(Composer_objectSpread({},P),A),{},{document:P.document,plainText:P.plainText,messageImages:P.messageImages,initialized:!0,data:Composer_objectSpread(Composer_objectSpread(Composer_objectSpread(Composer_objectSpread({},P.data),t),A.data),{},{Attachments:null===(e=P.data)||void 0===e?void 0:e.Attachments})});C(n),L(E,n)}}),[W.isPending,P.document,P.plainText,P.initialized]);const X=(0,o.useRef)(0);(0,o.useEffect)((()=>(!w&&m&&(X.current=window.setTimeout((()=>{0===getRecipients(P.data).length?G.current():Y.current()}))),()=>{X.current&&clearTimeout(X.current)})),[w,m]),(0,o.useEffect)((()=>{var e;p((null===(e=A.data)||void 0===e?void 0:e.Subject)||(0,u.c)("Title").t(VS||(VS=(0,d.Z)(["New message"]))))}),[null===(h=A.data)||void 0===h?void 0:h.Subject]),(0,mn.ko)((({Contacts:e=[]})=>{if(!e.length)return;let t=!1;const n=e.map((({Action:e,Contact:n})=>(e===M.P.DELETE&&(t=!0),(null==n?void 0:n.ContactEmails.map((({Email:e})=>(0,Xe.mQ)(e))))||[]))).flat(),r=getRecipients(A.data).map((({Address:e})=>(0,Xe.mQ)(e))),a=n.find((e=>r.includes(e)));t=t||!!a,t&&L(E,A)}));const J=(0,mn.ZP)(((e,t)=>{C((n=>{const r=e instanceof Function?e(n):e,a=mergeMessages(n,r);return t&&L(E,a),F(a),a}))})),q=(0,mn.ZP)(((e,t=!1,n=!1)=>{C((r=>{setContent(r,e);const a=Composer_objectSpread({},r);var o;(n||F(a),t)&&(null===(o=U.current)||void 0===o||o.setContent(a));return a}))})),$=(0,mn.ZP)(((e,t=!1)=>{J((t=>{var n;let r=(null===(n=t.data)||void 0===n?void 0:n.Flags)||0;return e.forEach(((e,t)=>{const n=e?N.ft:N.oD;r=n(r,t)})),{data:{Flags:r}}}),t)})),ensureMessageContent=()=>{if(!U.current)return!0;const e=U.current.getContent(),t=getContent(A);e.trim()!==t.trim()&&q(e)},{pendingFiles:ee,pendingUploads:te,promiseUpload:ne,uploadInProgress:re,handleAddAttachmentsStart:ae,handleAddAttachmentsUpload:oe,handleCancelAddAttachment:se,handleRemoveAttachment:ce,handleRemoveUpload:le}=useAttachments({message:A,onChange:J,onSaveNow:async()=>{var e;if(null===(e=A.data)||void 0===e||!e.ID)return K(A)},editorActionsRef:U,onMessageAlreadySent:T});(0,o.useEffect)((()=>{var t;const n=!(null===(t=P.initialAttachments)||void 0===t||!t.length);if(n){(async()=>{const t=P.initialAttachments;updateMessageCache(I,e,{initialAttachments:void 0}),await K(P),await oe(tw.ATTACHMENT,t)})()}S&&P.initialized&&!n&&D(!1)}),[S,P.data,P.initialized]),(0,o.useEffect)((()=>{re?Q():H()}),[re]);const handleDiscard=async()=>{var e;const t=I.get(A.localID);null!==(e=t.data)&&void 0!==e&&e.ID&&await B(t),f({text:(0,u.c)("Info").t(QS||(QS=(0,d.Z)(["Draft discarded"])))})},handleDelete=async()=>{var e;null===(e=F.abort)||void 0===e||e.call(F);try{await handleDiscard()}finally{Z()}},{saving:de,handleManualSave:ue,handleClose:pe}=(({modelMessage:e,lock:t,ensureMessageContent:n,saveNow:r,uploadInProgress:a,pendingAutoSave:s,promiseUpload:i,onClose:c,onDicard:l,onMessageAlreadySent:p})=>{const{createNotification:m,hideNotification:g}=(0,hn.Z)(),b=useMessageCache(),y=hooks_useIsMounted(),h=useOnCompose(),[I,f]=(0,o.useState)(!1),setSaving=e=>{y()&&f(e)},M=(0,o.useRef)(),N=(0,mn.ZP)((async t=>{try{var n;await r(e),null===(n=M.current)||void 0===n||n.saved(),await(0,Wt.D)(3e3)}finally{g(t),setSaving(!1)}})),x=(0,mn.ZP)((async()=>{if(b.get(e.localID).isSentDraft)return void p();const t=m({text:(0,j.jsx)(DD,{ref:M,onDiscard:()=>{t&&g(t),l()}}),expiration:-1,disableAutoClose:!0});setSaving(!0),n();try{await i}catch(e){throw g(t),setSaving(!1),e}await N(t)}));return{handleClose:(0,mn.ZP)((async()=>{if(c(),b.get(e.localID).isSentDraft)m({text:(0,u.c)("Error").t(vD||(vD=(0,d.Z)(["This message has already been sent"]))),type:"error"});else if(!t&&(n(),s.isPending||a))try{await x()}catch(t){m({text:(0,u.c)("Error").t(wD||(wD=(0,d.Z)(["Draft could not be saved. Try again."]))),type:"error"}),h({existingDraft:e,fromUndo:!0})}})),handleManualSave:x,saving:I}})({modelMessage:A,lock:_,ensureMessageContent:ensureMessageContent,autoSave:F,saveNow:K,onClose:Z,onDicard:handleDiscard,pendingAutoSave:V,promiseUpload:ne,uploadInProgress:re,onMessageAlreadySent:T}),{innerModal:me,setInnerModal:ge,attachmentsFoundKeyword:je,handlePassword:be,handleExpiration:ye,handleCloseInnerModal:he,handleDeleteDraft:fe,handleNoRecipients:Me,handleNoSubjects:xe,handleNoAttachments:we,handleCloseInsertImageModal:De,handleSendAnyway:Se,handleCancelSend:Oe}=(({pendingFiles:e,handleCancelAddAttachment:t})=>{const[n,r]=(0,o.useState)(ZS.None),[a,s]=(0,o.useState)(""),i=usePromise();(0,o.useEffect)((()=>{e&&e.length>0&&r(ZS.InsertImage)}),[e]);const handleCloseInnerModal=()=>{r(ZS.None)};return{innerModal:n,setInnerModal:r,attachmentsFoundKeyword:a,handlePassword:()=>{r(ZS.Password)},handleExpiration:()=>{r(ZS.Expiration)},handleCloseInnerModal:handleCloseInnerModal,handleDeleteDraft:()=>{r(ZS.DeleteDraft)},handleNoRecipients:()=>(r(ZS.NoRecipients),i.renew()),handleNoSubjects:()=>(r(ZS.NoSubjects),i.renew()),handleNoAttachments:e=>(r(ZS.NoAttachments),s(e),i.renew()),handleCloseInsertImageModal:()=>{t(),handleCloseInnerModal()},handleSendAnyway:()=>{i.resolver(),handleCloseInnerModal()},handleCancelSend:e=>{i.rejecter(e),handleCloseInnerModal()}}})({pendingFiles:ee,handleCancelAddAttachment:se}),Ae=(({modelMessage:e,ensureMessageContent:t,mapSendInfo:n,promiseUpload:r,pendingSave:a,pendingAutoSave:o,autoSave:s,saveNow:i,onClose:c,onMessageAlreadySent:l,handleNoRecipients:p,handleNoSubjects:m,handleNoAttachments:g})=>{const{createNotification:b,hideNotification:y}=(0,hn.Z)(),{call:h}=(0,Ie.Z)(),{preliminaryVerifications:I,extendedVerifications:f}=useSendVerifications(p,m,g),M=useSendMessage(),[N]=useMailSettings(),x=useOnCompose(),v=useMessageCache(),w=(0,mn.ZP)((async t=>{let r,c,p,m;try{var g,j;await a.promise,r=await f(e,n),p=r.mapSendPrefs;const t=v.get(e.localID);m=!(null==t||null===(g=t.data)||void 0===g||!g.ID||o.isPending||r.hasChanged),null===(j=s.abort)||void 0===j||j.call(s),c=m?t:r.cleanMessage,m||(await i(c),await h())}catch(n){throw y(t.ID),x({existingDraft:e,fromUndo:!0}),n}try{await M({inputMessage:c,mapSendPrefs:p,onCompose:x,alreadySaved:m,sendingMessageNotificationManager:t,useSilentApi:!0})}catch(e){var I,N,w;if(y(t.ID),[ve.p9.MESSAGE_ALREADY_SENT,ve.At.MESSAGE_ALREADY_SENT].includes(null===(I=e.data)||void 0===I?void 0:I.Code))throw l(),e;if(null!==(N=e.data)&&void 0!==N&&N.Error)throw b({text:null===(w=e.data)||void 0===w?void 0:w.Error,type:"error"}),e;throw b({text:(0,u.c)("Error").t(hD||(hD=(0,d.Z)(["Error while sending the message. Message is not sent."]))),type:"error"}),console.error("Error while sending the message.",e),e}}));return(0,mn.ZP)((async()=>{const{localID:n,scheduledAt:a}=e,o=createSendingMessageNotificationManager();if(!a)try{await I(e)}catch(e){throw(null==e?void 0:e.message)===ve.Q_&&l(),e}o.ID=b({text:(0,j.jsx)(notifications_SendingMessageNotification,{scheduledAt:a,manager:o,localID:n,messageCache:v,viewMode:(null==N?void 0:N.ViewMode)||0}),expiration:-1,disableAutoClose:!0}),t();try{updateMessageCache(v,n,{sending:!0}),c();try{await r}catch(t){throw y(o.ID),b({text:(0,u.c)("Error").t(ID||(ID=(0,d.Z)(["Error while uploading attachments. Message is not sent."]))),type:"error"}),console.error("Error while uploading attachments.",t),x({existingDraft:e,fromUndo:!0}),t}await w(o)}finally{(async()=>{await h(),updateMessageCache(v,n,{sending:!1})})()}}))})({modelMessage:A,ensureMessageContent:ensureMessageContent,mapSendInfo:E.mapSendInfo,promiseUpload:ne,pendingSave:W,pendingAutoSave:V,autoSave:F,saveNow:K,onClose:Z,onMessageAlreadySent:T,handleNoRecipients:Me,handleNoSubjects:xe,handleNoAttachments:we}),{loadingScheduleCount:Ce,handleScheduleSendModal:Ee,handleScheduleSend:Le}=(({modelMessage:e,setInnerModal:t,ComposerInnerModal:n,setModelMessage:r,handleSend:a,handleNoRecipients:o,handleNoSubjects:i,handleNoAttachments:c})=>{const l=(0,s.TH)(),{createModal:p}=(0,In.Z)(),[m,g]=useMailSettings(),[b,y]=useConversationCounts(),[h,I]=useMessageCounts(),{preliminaryVerifications:f}=useSendVerifications(o,i,c),N=(0,Ne.qL)(isConversationMode(M.C7.SCHEDULED,m,l)?b:h,"LabelID")[M.C7.SCHEDULED];return{scheduleCount:N,loadingScheduleCount:g||y||I,handleScheduleSendModal:async()=>{if(N.Total&&N.Total>=ve.vd)p((0,j.jsx)(modal_Confirm,{title:(0,u.c)("Confirm modal title").t(SD||(SD=(0,d.Z)(["Message saved to Drafts"]))),confirm:(0,j.jsx)(Ea.Z,{color:"norm",type:"submit",children:(0,u.c)("Action").t(OD||(OD=(0,d.Z)(["Got it"])))}),cancel:null,children:(0,u.c)("Info").t(AD||(AD=(0,d.Z)(["Too many messages waiting to be sent. Please wait until another message has been sent to schedule this one."])))}));else try{await f(e),t(n.ScheduleSend)}catch(e){}},handleScheduleSend:t=>{r(useScheduleSend_objectSpread(useScheduleSend_objectSpread({},e),{},{scheduledAt:t})),setTimeout(a)}}})({modelMessage:A,setInnerModal:ge,ComposerInnerModal:ZS,setModelMessage:C,handleSend:Ae,handleNoRecipients:Me,handleNoSubjects:xe,handleNoAttachments:we});(0,o.useImperativeHandle)(g,(()=>({close:pe})));const Pe=(0,o.useCallback)((()=>O(!0)),[]),Ze=(0,o.useCallback)((()=>{R.current(),i()}),[]),{squireKeydownHandler:Te,attachmentTriggerRef:ke}=(({composerRef:e,handleClose:t,handleSend:n,handleDelete:r,handleManualSave:a,toggleMaximized:s,toggleMinimized:i,handlePassword:l,handleExpiration:d,lock:u,saving:p})=>{const m=(0,mr.G6)(),[{Shortcuts:g=0}={}]=useMailSettings(),j=(0,o.useRef)(c.ZT),b={close:async e=>{e.preventDefault(),e.stopPropagation(),await t()},send:async e=>{e.preventDefault(),e.stopPropagation(),u||await n()},delete:async e=>{e.preventDefault(),e.stopPropagation(),await r()},save:async e=>{e.preventDefault(),e.stopPropagation(),p||u||await a()},minimize:e=>{e.preventDefault(),e.stopPropagation(),i()},maximize:e=>{e.preventDefault(),e.stopPropagation(),s()},addAttachment:e=>{var t;e.preventDefault(),e.stopPropagation(),null===(t=j.current)||void 0===t||t.call(j)},encrypt:e=>{e.preventDefault(),e.stopPropagation(),l()},addExpiration:e=>{e.preventDefault(),e.stopPropagation(),d()}},ctrlOrMetaKey=e=>(0,mr.V5)()?e.metaKey:e.ctrlKey,y=(0,mn.ZP)((async e=>{if(e.key)switch(e.key.toLowerCase()){case"escape":g&&await(null==b?void 0:b.close(e));break;case"enter":g&&ctrlOrMetaKey(e)&&await(null==b?void 0:b.send(e));break;case"backspace":g&&ctrlOrMetaKey(e)&&e.altKey&&await(null==b?void 0:b.delete(e));break;case"s":g&&ctrlOrMetaKey(e)&&await(null==b?void 0:b.save(e));break;case"m":if(!m&&g&&ctrlOrMetaKey(e)){if(e.shiftKey)return void(null==b||b.maximize(e));null==b||b.minimize(e)}break;case"a":g&&ctrlOrMetaKey(e)&&e.shiftKey&&(null==b||b.addAttachment(e));break;case"e":g&&ctrlOrMetaKey(e)&&e.shiftKey&&(null==b||b.encrypt(e));break;case"x":g&&ctrlOrMetaKey(e)&&e.shiftKey&&(null==b||b.addExpiration(e))}}));return(0,Co.y)(e,[[["Escape"],b.close],[["Meta","Enter"],b.send],[["Meta","Alt","Backspace"],b.delete],[["Meta","S"],b.save],[["Meta","M"],e=>{m||b.minimize(e)}],[["Meta","Shift","M"],e=>{m||b.maximize(e)}],[["Meta","Shift","A"],b.addAttachment],[["Meta","Shift","E"],b.encrypt],[["Meta","Shift","X"],b.addExpiration]]),{composerRef:e,squireKeydownHandler:y,attachmentTriggerRef:j}})({composerRef:t,handleClose:pe,handleDelete:handleDelete,handleExpiration:ye,handleManualSave:ue,handlePassword:be,handleSend:Ae,toggleMinimized:r,toggleMaximized:a,lock:_||!z,saving:de});return(0,j.jsxs)("div",{className:"composer-container flex flex-column flex-item-fluid relative w100",onDragEnter:e=>{var t;null!==(t=e.dataTransfer)&&void 0!==t&&t.types.includes(ve.$)&&i()},children:[(0,j.jsx)(modals_ComposerInnerModals,{innerModal:me,message:A,attachmentsFoundKeyword:je,handleChange:J,pendingFiles:ee,handleCloseInnerModal:he,handleScheduleSend:Le,handleCloseInsertImageModal:De,handleAddAttachmentsUpload:oe,handleDelete:handleDelete,handleSendAnyway:Se,handleCancelSend:Oe}),(0,j.jsxs)("div",{className:(0,ht.dh)(["composer-blur-container flex flex-column flex-item-fluid max-w100",me===ZS.None?"flex":"hidden"]),children:[(0,j.jsxs)("div",{ref:x,className:"composer-body-container flex flex-column flex-nowrap flex-item-fluid max-w100 mt0-5",children:[(0,j.jsx)(composer_ComposerMeta,{message:A,messageSendInfo:E,disabled:_,onChange:J,onChangeContent:q,addressesBlurRef:R,addressesFocusRef:G}),(0,j.jsx)(composer_ComposerContent,{message:A,disabled:_,breakpoints:n,onEditorReady:Pe,onChange:J,onChangeContent:q,onFocus:Ze,onAddAttachments:ae,onRemoveAttachment:ce,onRemoveUpload:le,pendingUploads:te,contentFocusRef:Y,editorActionsRef:U,squireKeydownHandler:Te})]}),(0,j.jsx)(composer_ComposerActions,{className:v?"composer-actions--has-scroll":void 0,message:A,date:elements_getDate(P.data,""),lock:_,opening:w,syncInProgress:W.isPending,onAddAttachments:ae,onExpiration:ye,onPassword:be,onScheduleSendModal:Ee,onSend:Ae,onDelete:fe,addressesBlurRef:R,attachmentTriggerRef:ke,loadingScheduleCount:Ce,onChangeFlag:$})]})]})};var HS=(0,o.forwardRef)(Composer);function useComposerDrag_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function useComposerDrag_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?useComposerDrag_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):useComposerDrag_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const moveReducer=(e,t)=>{switch(t.type){case"start":case"move":return useComposerDrag_objectSpread(useComposerDrag_objectSpread({},e),t.payload);case"stop":return useComposerDrag_objectSpread(useComposerDrag_objectSpread({},e),{},{lastOffset:e.offset},t.payload);case"reset-offset":return useComposerDrag_objectSpread(useComposerDrag_objectSpread({},e),{},{offset:0});default:throw new Error("This action does not exist")}};var composer_useComposerDrag=({windowWidth:e,maximized:t,minimized:n,totalComposers:r,composerIndex:a})=>{const[s]=useMailSettings(),i=(0,o.useRef)(n),l=(0,o.useRef)(t),d=computeRightPosition(a,r,e),[{isDragging:u,initialCursorPosition:p,offset:m,lastOffset:g},j]=(0,o.useReducer)(moveReducer,{isDragging:!1,initialCursorPosition:null,offset:0,lastOffset:0}),handleStopDragging=()=>{j({type:"stop",payload:{isDragging:!1,initialCursorPosition:null}})},b=(0,o.useCallback)((r=>{if(!p||!u||t&&!n)return;let a=m+(r.clientX-p);const o=e+a-d;if(e+a-d-640<jn){a=-(e-d-640)+jn}o>e-jn&&(a=d-jn),j({type:"move",payload:{offset:a}})}),[u,p,t]);return(0,o.useEffect)((()=>{const e=(0,c.P2)(b,20),t=(0,c.Ds)(handleStopDragging,50);return u&&(document.addEventListener("mousemove",e),document.addEventListener("mouseup",t),document.addEventListener("mouseleave",t)),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t),document.removeEventListener("mouseleave",t)}}),[u]),(0,o.useEffect)((()=>{j({type:"reset-offset"})}),[d,r]),(0,o.useEffect)((()=>{(null==s?void 0:s.ComposerMode)===M.yq.MAXIMIZED&&j({type:"reset-offset"})}),[null==s?void 0:s.ComposerMode]),(0,o.useEffect)((()=>{!1===n&&!0===t&&!0===l.current&&!0===i.current&&j({type:"reset-offset"}),i.current=n}),[n]),(0,o.useEffect)((()=>{!1!==n||!1!==t||!0!==l.current||!0!==i.current?(j({type:"reset-offset"}),l.current=t):l.current=t}),[t]),{start:e=>{j({type:"start",payload:{isDragging:!0,initialCursorPosition:e.clientX}})},offset:m,isDragging:!0===u&&(m>g+10||m<g-10)}};function ComposerFrame_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ComposerFrame_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ComposerFrame_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ComposerFrame_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var composer_ComposerFrame=({messageID:e,index:t,count:n,focus:r,windowSize:a,breakpoints:s,onFocus:i,onClose:c})=>{const[l]=useMailSettings(),d=(0,o.useRef)(null),u=(0,o.useRef)(null),{state:p,toggle:m}=(0,lr.Z)(!1),{state:g,toggle:b}=(0,lr.Z)((null==l?void 0:l.ComposerMode)===M.yq.MAXIMIZED),y=((e,t,n,r,a,o,s)=>{if(o)return{position:"fixed","--top-custom":0,"--bottom-custom":0,"--left-custom":0,"--right-custom":0,"--height-custom":"auto","--width-custom":"auto"};const i={"--right-custom":"".concat(computeRightPosition(e,t,s.width),"px"),zIndex:n?301:300,computeHeight:"".concat(computeHeight(s.height),"px")};return r?composerPositioning_objectSpread(composerPositioning_objectSpread({},i),{},{"--height-custom":"35px"}):a?composerPositioning_objectSpread(composerPositioning_objectSpread({},i),{},{"--right-custom":"".concat(jn,"px"),"--width-custom":"".concat(s.width-jn-45,"px"),"--height-custom":"".concat(s.height-20,"px")}):i})(t,n,r,p,g,s.isNarrow,a),h=(0,dr.P)(y),{start:f,offset:N,isDragging:x}=composer_useComposerDrag({composerIndex:t,isNarrow:s.isNarrow,maximized:g,minimized:p,windowWidth:a.width,totalComposers:n}),v=(0,mn.ZP)(c),[w,D]=(0,o.useState)("");(0,o.useEffect)((()=>{const e=a.height<540;!g&&e&&b()}),[a.height]);return(0,j.jsxs)("div",{ref:d,className:(0,ht.dh)(["composer rounded-xl flex flex-column no-outline ".concat(h),!r&&"composer--is-blur",p&&"composer--is-minimized",g&&"composer--is-maximized"]),style:ComposerFrame_objectSpread(ComposerFrame_objectSpread({},y),{},{"--composer-drag-offset":"".concat(N,"px")}),onFocus:i,onClick:()=>{p&&!x&&m(),i()},onDragEnter:e=>{var t;null!==(t=e.dataTransfer)&&void 0!==t&&t.types.includes(ve.$)&&i()},tabIndex:-1,children:[(0,j.jsx)(composer_ComposerTitleBar,{title:w,minimized:p,maximized:g,toggleMinimized:m,toggleMaximized:b,onClose:()=>{var e;null==u||null===(e=u.current)||void 0===e||e.close()},handleStartDragging:f}),(0,j.jsx)(I.Z,{children:(0,j.jsx)(HS,{ref:u,messageID:e,composerFrameRef:d,breakpoints:s,toggleMinimized:m,toggleMaximized:b,onFocus:i,onClose:v,onSubject:e=>D(e),isFocused:r})})]})};const XS=(0,o.createContext)(null),useClickMailContent=e=>{const t=(0,mn.ZP)(e),n=(0,o.useContext)(XS);(0,o.useEffect)((()=>{var e,r;return null===(e=n.current)||void 0===e||e.addEventListener("click",t,{passive:!0}),null===(r=n.current)||void 0===r||r.addEventListener("touchstart",t,{passive:!0}),()=>{var e,r;null===(e=n.current)||void 0===e||e.removeEventListener("click",t),null===(r=n.current)||void 0===r||r.removeEventListener("touchstart",t)}}),[])},MailContentRefProvider=({children:e,mailContentRef:t})=>(0,j.jsx)(XS.Provider,{value:t,children:e});var JS;const ComposerContainer=({breakpoints:e,children:t})=>{const[n,r]=(0,o.useState)([]),[a,s]=(0,o.useState)(),[i,c]=hooks_useWindowSize(),l={width:i,height:c},p=useMessageCache();useClickMailContent((()=>s(void 0)));const m=(0,o.useRef)(null);(0,pn.Z)(n.length?(0,u.c)("Info").t(JS||(JS=(0,d.Z)(["The data you have entered in the draft may not be saved if you leave the page."]))):"");const g=!!n.length,b=e.isNarrow?1:3,handleClose=e=>()=>r((t=>{const n=t.filter((t=>t!==e));return n.length&&s(n[0]),n})),y=(0,mn.ZP)((e=>{n.includes(e)&&!p.has(e)&&handleClose(e)()}));(0,o.useEffect)((()=>{0===n.length&&m.current&&(m.current.focus(),m.current=null)}),[n]),(0,o.useEffect)((()=>p.subscribe(y)),[p]);const h=useCompose(n,((e,t)=>{r((t=>[...t,e])),t&&(m.current=t)}),s,b),handleFocus=e=>()=>{s(e)};return(0,j.jsxs)(ComposeProvider,{onCompose:h,children:[t({isComposerOpened:g}),(0,j.jsx)("div",{className:"composer-container",children:n.map(((t,r)=>(0,j.jsx)(composer_ComposerFrame,{messageID:t,index:r,count:n.length,focus:t===a,windowSize:l,breakpoints:e,onFocus:handleFocus(t),onClose:handleClose(t)},t)))})]})};var qS=(0,o.memo)(ComposerContainer),$S=n(23272);const{PROTONVPN_SETTINGS:eO}=M.ei;var hooks_useIsMnemonicAvailable=()=>{var e;const{APP_NAME:t}=(0,Nn.Z)(),[n,r]=(0,bn.ZP)(),a=(0,nN.Z)(y.P.Mnemonic),[o=[],s]=(0,yn.ZP)(),i=(0,$S.k_)(o),c=!(null!=n&&n.isPrivate);return[!(null===(e=a.feature)||void 0===e||!e.Value)&&i&&!c&&t!==eO,s||r]},tO=n(42763),nO=n(56211);const rO=["description","img","children","title"];function OnboardingContent_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function OnboardingContent_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?OnboardingContent_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OnboardingContent_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var onboarding_OnboardingContent=e=>{let{description:t,img:n,children:r,title:a}=e,o=(0,Sn.Z)(e,rO);return(0,j.jsxs)("div",OnboardingContent_objectSpread(OnboardingContent_objectSpread({},o),{},{children:[n&&(0,j.jsx)("div",{className:"pb1 text-center mauto w66 on-mobile-w100",children:n}),a&&(0,j.jsx)("h1",{className:"mb0-5 text-2xl text-bold text-center",children:a}),t&&(0,j.jsx)("div",{className:"mb2 text-center",children:t}),r]}))};var onboarding_OnboardingStep=({children:e})=>(0,j.jsx)(j.Fragment,{children:e}),aO=n(44366),oO=n(32619),sO=n(6069);const{PLAN:iO,ADDON:cO}=M.kR,{MAIL:lO}=M.pH,{PLUS:dO,VPNPLUS:uO,VPNBASIC:pO,VISIONARY:mO,PROFESSIONAL:gO}=M.Xf,getPlan=({Plans:e=[]},t=lO)=>e.find((({Services:e,Type:n})=>n===iO&&e&t)),getPlanName=(e,t=lO)=>{const n=getPlan(e,t);return null==n?void 0:n.Name},hasLifetime=e=>{const{CouponCode:t=""}=e;return"LIFETIME"===t},hasVisionary=e=>{const{Plans:t=[]}=e;return t.some((({Name:e})=>e===mO))},hasMailPlus=e=>{const{Plans:t=[]}=e;return t.some((({Name:e})=>e===dO))},hasMailProfessional=e=>{const{Plans:t=[]}=e;return t.some((({Name:e})=>e===gO))},hasVpnBasic=e=>{const{Plans:t=[]}=e;return t.some((({Name:e})=>e===pO))},hasVpnPlus=e=>{const{Plans:t=[]}=e;return t.some((({Name:e})=>e===uO))},jO=["value","onChange","children","className"];function StepDots_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function StepDots_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?StepDots_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):StepDots_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var bO,yO,stepDots_StepDots=e=>{let{value:t,onChange:n,children:r,className:a}=e,s=(0,Sn.Z)(e,jO);const i=o.Children.map(r,((e,r)=>(0,o.cloneElement)(e,{active:r===t,index:r,onChange:n})));return(0,j.jsx)("nav",StepDots_objectSpread(StepDots_objectSpread({},s),{},{className:(0,ht.dh)([a,"step-dots-container"]),children:(0,j.jsx)("ul",{className:"step-dots-list unstyled inline-flex flex-row",role:"tablist",children:i})}))};const hO=["index","className","onChange","active","role"];function StepDot_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function StepDot_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?StepDot_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):StepDot_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var stepDot_StepDot=e=>{let{index:t,className:n,onChange:r,active:a,role:o="presentation"}=e,s=(0,Sn.Z)(e,hO);return(0,j.jsx)("li",{className:"step-dots-item",role:o,children:(0,j.jsx)("button",StepDot_objectSpread(StepDot_objectSpread({type:"button",role:"tab","aria-selected":a,className:(0,ht.dh)([n,"step-dots-dot","rounded50",!r&&"no-pointer-events"]),title:r?(0,u.c)("Action").t(bO||(bO=(0,d.Z)(["Go to panel ",""])),t):void 0,onClick:function handleClick(){void 0!==t&&(null==r||r(t))}},s),{},{children:(0,j.jsx)("span",{className:"sr-only",children:(0,u.c)("Action").t(yO||(yO=(0,d.Z)(["Go to panel ",""])),t)})}))})},IO=n(2403),fO=n(36007),MO=n(91376);var NO,xO,vO,wO,DO,hooks_useSubscription=()=>{const e=(0,Ln.Z)(),t=(0,Dn.Z)(),n=(0,o.useCallback)((()=>{const{value:n={}}=e.get(MO.T_.key)||{};return n.isAdmin?fO.H.get(t):Promise.resolve(M.Md)}),[t,e]);return(0,Zn.ZP)(e,fO.H.key,n)},SO=n(22011);const OO=["displayName","setDisplayName","displayNameError"];function OnboardingSetDisplayName_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function OnboardingSetDisplayName_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?OnboardingSetDisplayName_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OnboardingSetDisplayName_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var AO,CO,onboarding_OnboardingSetDisplayName=e=>{let{displayName:t,setDisplayName:n,displayNameError:r}=e,a=(0,Sn.Z)(e,OO);return(0,j.jsx)(onboarding_OnboardingContent,OnboardingSetDisplayName_objectSpread(OnboardingSetDisplayName_objectSpread({description:(0,u.c)("Onboarding Proton").t(NO||(NO=(0,d.Z)(["This is what people will see when you send them an email, invite them to an event, or share a file with them."]))),img:(0,j.jsx)("img",{src:SO,alt:(0,u.c)("Onboarding Proton").t(xO||(xO=(0,d.Z)(["Choose a display name"])))}),title:(0,u.c)("Onboarding Proton").t(vO||(vO=(0,d.Z)(["Choose a display name"])))},a),{},{children:(0,j.jsx)(kD.Z,{id:"displayName",label:(0,u.c)("Label").t(wO||(wO=(0,d.Z)(["Display name"]))),autoFocus:!0,placeholder:(0,u.c)("Placeholder").t(DO||(DO=(0,d.Z)(["e.g. Julia Smith"]))),value:t,onValue:n,error:r})}))};var themes_ThemeCard=({label:e,id:t,src:n,selected:r,onChange:a,disabled:o})=>(0,j.jsx)(Ea.Z,{name:"themeCard",shape:"outline",color:r?"norm":"weak",id:t,className:(0,ht.dh)([r&&"is-active no-pointer-events text-bold"]),"aria-pressed":r,onClick:a,disabled:o,type:"button","aria-label":(0,u.c)("Action").t(AO||(AO=(0,d.Z)(["Use "," theme"])),e),title:(0,u.c)("Action").t(CO||(CO=(0,d.Z)(["Use "," theme"])),e),children:(0,j.jsxs)("span",{className:"flex flex-nowrap flex-column",children:[(0,j.jsx)("img",{alt:"",src:n,className:"mb0-5 theme-card-image on-rtl-mirror"}),(0,j.jsx)("span",{children:e})]})});var EO,LO,themes_ThemeCards=({themeIdentifier:e,onChange:t,disabled:n,className:r,liClassName:a,list:o})=>(0,j.jsx)("ul",{className:(0,ht.dh)(["unstyled m0",r]),children:o.map((({identifier:r,label:o,src:s})=>{const i="id_".concat(r);return(0,j.jsx)("li",{className:a,children:(0,j.jsx)(themes_ThemeCard,{label:o,id:i,src:s,selected:e===r,onChange:()=>t(r),disabled:n})},o)}))});const PO=["themes","themeIdentifier","onChange"];function OnboardingThemes_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function OnboardingThemes_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?OnboardingThemes_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OnboardingThemes_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ZO,TO,kO,onboarding_OnboardingThemes=e=>{let{themes:t,themeIdentifier:n,onChange:r}=e,a=(0,Sn.Z)(e,PO);return(0,j.jsx)(onboarding_OnboardingContent,OnboardingThemes_objectSpread(OnboardingThemes_objectSpread({title:(0,u.c)("Onboarding Proton").t(EO||(EO=(0,d.Z)(["Select a theme"]))),description:(0,u.c)("Onboarding Proton").t(LO||(LO=(0,d.Z)(["You can change this anytime in your settings."])))},a),{},{children:(0,j.jsx)("div",{className:"flex mb0-5",children:(0,j.jsx)(themes_ThemeCards,{className:"theme-modal-list",list:t,themeIdentifier:n,onChange:r})})}))},zO=n(12375);function OnboardingDiscoverApps_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var _O,RO,GO,onboarding_OnboardingDiscoverApps=e=>(0,j.jsx)(onboarding_OnboardingContent,function OnboardingDiscoverApps_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?OnboardingDiscoverApps_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OnboardingDiscoverApps_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({title:(0,u.c)("Onboarding Proton").t(ZO||(ZO=(0,d.Z)(["Discover all Proton services"]))),description:(0,u.c)("Onboarding Proton").t(TO||(TO=(0,d.Z)(["Use the app selector in the top left to access other Proton services, including VPN, Calendar and Drive."]))),img:(0,j.jsx)("img",{src:zO,alt:(0,u.c)("Onboarding Proton").t(kO||(kO=(0,d.Z)(["Discover all Proton services"])))})},e)),YO=n(30984);function OnboardingWelcome_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var UO,FO,KO,onboarding_OnboardingWelcome=e=>(0,j.jsx)(onboarding_OnboardingContent,function OnboardingWelcome_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?OnboardingWelcome_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OnboardingWelcome_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({title:(0,u.c)("Onboarding Proton").t(_O||(_O=(0,d.Z)(["Welcome to Proton"]))),description:(0,u.c)("Onboarding Proton").t(RO||(RO=(0,d.Z)(["Our mission is to build an internet where you are in control of your data and your privacy. We have recently updated Proton - welcome to the secure internet."]))),img:(0,j.jsx)("img",{src:YO,alt:(0,u.c)("Onboarding Proton").t(GO||(GO=(0,d.Z)(["Welcome to Proton"])))})},e)),BO=n(71948);function OnboardingSetupOrganization_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var WO,VO,QO,HO,XO,JO,qO,$O,eA,onboarding_OnboardingSetupOrganization=e=>(0,j.jsx)(onboarding_OnboardingContent,function OnboardingSetupOrganization_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?OnboardingSetupOrganization_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OnboardingSetupOrganization_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({title:(0,u.c)("Onboarding Proton").t(UO||(UO=(0,d.Z)(["Set up your organization"]))),description:(0,u.c)("Onboarding Proton").t(FO||(FO=(0,d.Z)(["Configure your organization, link your domain name, and create accounts to ensure all members of your organization are protected."]))),img:(0,j.jsx)("img",{src:BO,alt:(0,u.c)("Onboarding Proton").t(KO||(KO=(0,d.Z)(["Set up your organization"])))})},e)),tA=n(59347);const nA=["children","showGenericSteps","allowClose","setWelcomeFlags","hideDisplayName","onDone"];function OnboardingModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function OnboardingModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?OnboardingModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OnboardingModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var rA,aA,oA,sA,onboarding_OnboardingModal=e=>{let{children:t,showGenericSteps:n,allowClose:r=!1,setWelcomeFlags:a=!0,hideDisplayName:i=!1,onDone:l}=e,p=(0,Sn.Z)(e,nA);const[m]=(0,bn.ZP)(),g=(0,s.k6)(),b=(0,s.TH)(),y=link_useSettingsLink(),[h,I]=(0,IO.o)(),[f,M]=hooks_useSubscription(),[N,x]=(0,o.useState)(m.DisplayName||m.Name||""),[v,w]=(0,tA.Fg)(),D=(0,yn._2)(),S=(0,Dn.Z)(),{call:O}=(0,Ie.Z)(),[A]=hooks_useWelcomeFlags(),C=!I&&!M&&m.isAdmin&&h.MaxMembers>1&&1===h.UsedMembers&&!h.HasKeys&&!hasVisionary(f),[E,L]=(0,o.useState)(0),handleNext=()=>{var e;if(Y)return null==l||l(),void(null==p||null===(e=p.onClose)||void 0===e||e.call(p));L((e=>e+1))},handleBack=()=>{L((e=>e-1))},P=(0,j.jsx)(onboarding_OnboardingStep,{submit:(0,u.c)("Action").t(WO||(WO=(0,d.Z)(["Get started"]))),close:null,onSubmit:handleNext,children:(0,j.jsx)(onboarding_OnboardingWelcome,{})}),Z=(0,j.jsx)(onboarding_OnboardingStep,{submit:(0,u.c)("Action").t(VO||(VO=(0,d.Z)(["Next"]))),close:null,onSubmit:()=>{(async()=>{const e=(await D())[0];e&&(await Promise.all([A.isWelcomeFlow&&S((0,oO.hY)({Welcomed:1})).catch(c.ZT),S((0,aO.y3)(e.ID,{DisplayName:N,Signature:e.Signature}))].filter(Za.Z)),await O())})(),handleNext()},children:(0,j.jsx)(onboarding_OnboardingSetDisplayName,{id:"onboarding-0",displayName:N,setDisplayName:x})}),T=(0,j.jsx)(onboarding_OnboardingStep,{submit:(0,u.c)("Action").t(QO||(QO=(0,d.Z)(["Start setup"]))),close:(0,j.jsx)(Ea.Z,{size:"large",color:"norm",shape:"ghost",className:"mb1",fullWidth:!0,onClick:handleNext,children:(0,u.c)("Action").t(HO||(HO=(0,d.Z)(["Skip"])))}),onSubmit:()=>{y("/multi-user-support",void 0,!0),handleNext()},children:(0,j.jsx)(onboarding_OnboardingSetupOrganization,{})}),k=(0,j.jsx)(onboarding_OnboardingStep,{submit:(0,u.c)("Action").t(XO||(XO=(0,d.Z)(["Next"]))),close:null,onSubmit:handleNext,children:(0,j.jsx)(onboarding_OnboardingThemes,{themeIdentifier:v,themes:sO.Db,onChange:async e=>{w(e),await S((0,oO.Rg)(e))}})}),z=(0,j.jsx)(onboarding_OnboardingStep,{submit:t?(0,u.c)("Action").t(JO||(JO=(0,d.Z)(["Next"]))):(0,u.c)("Action").t(qO||(qO=(0,d.Z)(["Done"]))),close:null,onSubmit:handleNext,children:(0,j.jsx)(onboarding_OnboardingDiscoverApps,{})}),_=(null==A?void 0:A.hasDisplayNameStep)&&!i,R=n||_,G=[...R?[P,_&&Z,C&&T,k,z].filter(Za.Z):[],...t?(Array.isArray(t)?t:[t]).map((e=>{var t;return null!==(t=null==e?void 0:e({onNext:handleNext,onBack:handleBack,displayGenericSteps:R}))&&void 0!==t?t:null})).filter((e=>null!==e)):[]],Y=G.length-1===E,U=G[E],F=G.length>1&&E<G.length,K=E>0;var B;G.length||(null==p||null===(B=p.onClose)||void 0===B||B.call(p));if(!(0,o.isValidElement)(U))throw new Error("Missing step");const W=U.props,V=(0,o.useRef)(!1);return(0,o.useEffect)((()=>{Y&&!V.current&&(V.current=!0,(async()=>{if(a)S((0,oO.nO)()).catch(c.ZT)})())}),[Y]),(0,o.useEffect)((()=>{const e=new URLSearchParams(b.search);e.has("welcome")&&(e.delete("welcome"),g.replace({search:e.toString()}))}),[]),(0,j.jsxs)(On.Z,OnboardingModal_objectSpread(OnboardingModal_objectSpread(OnboardingModal_objectSpread({},p),{},{hasClose:r,disableCloseOnOnEscape:!r},W),{},{title:K?(0,j.jsx)("span",{className:"absolute top-left mt1 ml1",children:(0,j.jsx)(Ea.Z,{icon:!0,shape:"ghost",title:(0,u.c)("Action").t($O||($O=(0,d.Z)(["Back"]))),onClick:handleBack,children:(0,j.jsx)(pr.Z,{name:"arrow-left",alt:(0,u.c)("Action").t(eA||(eA=(0,d.Z)(["Back"])))})})}):null,intermediate:!0,footer:null,children:[U,(0,j.jsxs)("footer",{className:"flex flex-nowrap flex-column",children:["string"==typeof W.submit?(0,j.jsx)(Ea.Z,{shape:"solid",size:"large",color:"norm",fullWidth:!0,loading:W.loading,type:"submit",className:"mb0-25","data-focus-fallback":1,children:W.submit}):W.submit,"string"==typeof W.close?(0,j.jsx)(Ea.Z,{shape:"ghost",size:"large",color:"norm",fullWidth:!0,disabled:W.loading,onClick:W.onClose||handleBack,children:W.close}):W.close]}),F?(0,j.jsx)("div",{className:"text-center",children:(0,j.jsx)(stepDots_StepDots,{value:E,children:(0,xe.w6)(0,G.length).map((e=>(0,j.jsx)(stepDot_StepDot,{index:e,"aria-controls":"onboarding-".concat(e)},e)))})}):(0,j.jsx)("div",{className:"pt1 pb1"})]}))};function BetaOnboardingModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function BetaOnboardingModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?BetaOnboardingModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BetaOnboardingModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var iA,cA,lA,dA,uA,pA,mA,gA,jA,bA,yA,hA,IA,fA,MA,NA,xA,vA,wA,DA,SA,OA,AA,CA,EA,LA,PA,ZA,TA,kA,zA,_A,RA,GA,YA,UA,FA,KA,BA,WA,VA,QA,HA,XA,JA,qA,$A,eC,tC,nC,rC,aC,oC,sC,iC,cC,lC,dC,onboarding_BetaOnboardingModal=e=>{const t=(0,nO.ZP)(),[n,r]=(0,no.Z)(),handleSubmit=()=>{r(t.update(!0).then((()=>{window.location.reload()})).catch(c.ZT))};return(0,j.jsx)(onboarding_OnboardingModal,BetaOnboardingModal_objectSpread(BetaOnboardingModal_objectSpread({setWelcomeFlags:!1,showGenericSteps:!1,hideDisplayName:!0},e),{},{children:()=>(0,j.jsx)(onboarding_OnboardingStep,{close:null,submit:(0,u.c)("Onboarding Beta").t(rA||(rA=(0,d.Z)(["Got it"]))),onSubmit:handleSubmit,loading:n||!t.canUpdate,children:(0,j.jsx)(onboarding_OnboardingContent,{title:(0,u.c)("Onboarding Beta").t(aA||(aA=(0,d.Z)(["Beta enabled"]))),description:(0,u.c)("Onboarding Beta").t(oA||(oA=(0,d.Z)(["To disable beta, open the settings dropdown menu and click on the “Beta Access” option."]))),img:(0,j.jsx)("img",{src:tO,alt:(0,u.c)("Onboarding Beta").t(sA||(sA=(0,d.Z)(["Beta enabled"])))})})})}))};var uC,pC;const mC=["onClose","children","title"];function ShortcutsModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ShortcutsModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ShortcutsModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ShortcutsModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var shortcuts_ShortcutsModal=e=>{let{onClose:t=c.ZT,children:n,title:r=(0,u.c)("Title").t(uC||(uC=(0,d.Z)(["Keyboard Shortcuts"])))}=e,a=(0,Sn.Z)(e,mC);return(0,j.jsx)(On.Z,ShortcutsModal_objectSpread(ShortcutsModal_objectSpread({title:r,close:(0,u.c)("Action").t(pC||(pC=(0,d.Z)(["Close"]))),hasSubmit:!1,onClose:t,className:"shortcut-modal"},a),{},{children:n}))};var shortcuts_ShortcutsSectionView=({name:e,shortcuts:t})=>(0,j.jsxs)("div",{className:"pr2 on-mobile-pr0 mb2",children:[(0,j.jsx)("h2",{className:"h5 mb0-5",children:e}),t.length>0&&(0,j.jsx)("ul",{className:"unstyled mt1 on-mobile-pr0 list-2columns-no-break",children:t.map((({name:e,keys:t})=>(0,j.jsxs)("li",{className:"flex flex-align-items-center flex-justify-space-between mb0-5",children:[(0,j.jsx)("span",{children:e}),"string"==typeof t?(0,j.jsx)("kbd",{children:t}):(0,j.jsx)("span",{children:t.map(((t,n)=>(0,j.jsx)("kbd",{className:(0,ht.dh)([n>0&&"ml0-5"]),children:t},"".concat(e," - ").concat(t))))})]},e)))})]});function useAsync_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function useAsync_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?useAsync_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):useAsync_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const gC={loading:!1},reducer=(e,t)=>{switch(t.type){case"loading":return useAsync_objectSpread(useAsync_objectSpread({},e),{},{loading:!0});case"success":return{error:void 0,loading:!1,result:t.payload};default:case"error":return{result:void 0,loading:!1,error:t.payload}}};var hooks_useAsync=(e=!0)=>{const[{loading:t,result:n,error:r},a]=(0,o.useReducer)(reducer,gC),s=hooks_useIsMounted(),i=(0,o.useRef)();return{result:n,error:r,loading:t,run:(0,o.useCallback)((async t=>{const isCurrentPromise=()=>i.current===t;i.current=t,a({type:"loading"});try{const n=await t;return s()&&isCurrentPromise()&&a({type:"success",payload:e?n:void 0}),n}catch(t){throw s()&&isCurrentPromise()&&"AbortError"!==t.name&&a({type:"error",payload:e?t:void 0}),t}}),[])}};var jC,hooks_useApiWithoutResult=e=>{const t=(0,Dn.Z)(),{loading:n,run:r}=hooks_useAsync(!1);return{loading:n,request:(0,o.useCallback)(((...n)=>{const a=t(e(...n));return r(a),a}),[t,r,e])}};var bC,yC,hC,general_ShortcutsToggle=({id:e,className:t})=>{const{call:n}=(0,Ie.Z)(),[{Shortcuts:r}={Shortcuts:0}]=useMailSettings(),{createNotification:a}=(0,hn.Z)(),{request:o,loading:s}=hooks_useApiWithoutResult(Fg.w$),{state:i,toggle:c}=(0,lr.Z)(!!r);return(0,j.jsx)(cm,{id:e,className:t,checked:i,onChange:async({target:e})=>{await o(+e.checked),n(),c(),a({text:(0,u.c)("Success").t(jC||(jC=(0,d.Z)(["Keyboard shortcuts preferences updated"])))})},loading:s})};function MailShortcutsModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function MailShortcutsModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MailShortcutsModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MailShortcutsModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var MailShortcutsModal=e=>{let t=(0,hd.Z)({},e);const n=(0,Or.PO)(M.ei.PROTONMAIL),r=(0,u.c)("Title").t(bC||(bC=(0,d.Z)([""," Keyboard Shortcuts"])),n),[{Shortcuts:a}={Shortcuts:0}]=useMailSettings(),o=(()=>{const e=(0,mr.G6)();return[{name:(0,u.c)("Keyboard shortcut section name").t(iA||(iA=(0,d.Z)(["Basic navigation"]))),alwaysActive:!0,shortcuts:[{name:(0,u.c)("Keyboard shortcut name").t(cA||(cA=(0,d.Z)(["Move up"]))),keys:"↑"},{name:(0,u.c)("Keyboard shortcut name").t(lA||(lA=(0,d.Z)(["Jump to first"]))),keys:"".concat(mr.OI," + ↑")},{name:(0,u.c)("Keyboard shortcut name").t(dA||(dA=(0,d.Z)(["Move down"]))),keys:"↓"},{name:(0,u.c)("Keyboard shortcut name").t(uA||(uA=(0,d.Z)(["Jump to last"]))),keys:"".concat(mr.OI," + ↓")},{name:(0,u.c)("Keyboard shortcut name").t(pA||(pA=(0,d.Z)(["Move right / expand"]))),keys:"→"},{name:(0,u.c)("Keyboard shortcut name").t(mA||(mA=(0,d.Z)(["Move left / collapse"]))),keys:"←"}]},{name:(0,u.c)("Keyboard shortcut section name").t(gA||(gA=(0,d.Z)(["Basic actions"]))),alwaysActive:!0,shortcuts:[{name:(0,u.c)("Keyboard shortcut name").t(jA||(jA=(0,d.Z)(["Apply / open"]))),keys:"Enter"},{name:(0,u.c)("Keyboard shortcut name").t(bA||(bA=(0,d.Z)(["Cancel / close"]))),keys:"Escape"},{name:(0,u.c)("Keyboard shortcut name").t(yA||(yA=(0,d.Z)(["Open this modal"]))),keys:"?"},{name:(0,u.c)("Keyboard shortcut name").t(hA||(hA=(0,d.Z)(["Select / unselect"]))),keys:"Space"}]},{name:(0,u.c)("Keyboard shortcut section name").t(IA||(IA=(0,d.Z)(["Folder shortcuts"]))),shortcuts:[{name:(0,u.c)("Keyboard shortcut name").t(fA||(fA=(0,d.Z)(["Go to Inbox"]))),keys:["G","I"]},{name:(0,u.c)("Keyboard shortcut name").t(MA||(MA=(0,d.Z)(["Go to Archive"]))),keys:["G","A"]},{name:(0,u.c)("Keyboard shortcut name").t(NA||(NA=(0,d.Z)(["Go to Sent"]))),keys:["G","E"]},{name:(0,u.c)("Keyboard shortcut name").t(xA||(xA=(0,d.Z)(["Go to Starred"]))),keys:["G","*"]},{name:(0,u.c)("Keyboard shortcut name").t(vA||(vA=(0,d.Z)(["Go to Drafts"]))),keys:["G","D"]},{name:(0,u.c)("Keyboard shortcut name").t(wA||(wA=(0,d.Z)(["Go to Trash"]))),keys:["G","T"]},{name:(0,u.c)("Keyboard shortcut name").t(DA||(DA=(0,d.Z)(["Go to Spam"]))),keys:["G","S"]},{name:(0,u.c)("Keyboard shortcut name").t(SA||(SA=(0,d.Z)(["Go to All Mail"]))),keys:["G","M"]}]},{name:(0,u.c)("Keyboard shortcut section name").t(OA||(OA=(0,d.Z)(["Composer shortcuts"]))),shortcuts:[{name:(0,u.c)("Keyboard shortcut name").t(AA||(AA=(0,d.Z)(["Save draft"]))),keys:"".concat(mr.OI," + S")},{name:(0,u.c)("Keyboard shortcut name").t(CA||(CA=(0,d.Z)(["Send email"]))),keys:"".concat(mr.OI," + Enter")},{name:(0,u.c)("Keyboard shortcut name").t(EA||(EA=(0,d.Z)(["Close draft"]))),keys:"Escape"},!e&&{name:(0,u.c)("Keyboard shortcut name").t(LA||(LA=(0,d.Z)(["Minimize / maximize composer"]))),keys:"".concat(mr.OI," + M")},!e&&{name:(0,u.c)("Keyboard shortcut name").t(PA||(PA=(0,d.Z)(["Expand / contract composer"]))),keys:"".concat(mr.OI," + ").concat(mr.AI," + M")},{name:(0,u.c)("Keyboard shortcut name").t(ZA||(ZA=(0,d.Z)(["Attach file"]))),keys:"".concat(mr.OI," + ").concat(mr.AI," + A")},{name:(0,u.c)("Keyboard shortcut name").t(TA||(TA=(0,d.Z)(["Add expiration time"]))),keys:"".concat(mr.OI," + ").concat(mr.AI," + X")},{name:(0,u.c)("Keyboard shortcut name").t(kA||(kA=(0,d.Z)(["Add encryption"]))),keys:"".concat(mr.OI," + ").concat(mr.AI," + E")},{name:(0,u.c)("Keyboard shortcut name").t(zA||(zA=(0,d.Z)(["Discard draft"]))),keys:"".concat(mr.OI," + ").concat(mr.lw," + Backspace")}].filter(Za.Z)},{name:(0,u.c)("Keyboard shortcut section name").t(_A||(_A=(0,d.Z)(["List shortcuts"]))),shortcuts:[{name:(0,u.c)("Keyboard shortcut name").t(RA||(RA=(0,d.Z)(["Open previous message"]))),keys:"K"},{name:(0,u.c)("Keyboard shortcut name").t(GA||(GA=(0,d.Z)(["Open next message"]))),keys:"J"},{name:(0,u.c)("Keyboard shortcut name").t(YA||(YA=(0,d.Z)(["Select / unselect"]))),keys:"X"},{name:(0,u.c)("Keyboard shortcut name").t(UA||(UA=(0,d.Z)(["Show unread emails"]))),keys:"".concat(mr.AI," + U")},{name:(0,u.c)("Keyboard shortcut name").t(FA||(FA=(0,d.Z)(["Show all emails"]))),keys:"".concat(mr.AI," + A")},{name:(0,u.c)("Keyboard shortcut name").t(KA||(KA=(0,d.Z)(["Select / unselect all"]))),keys:"".concat(mr.OI," + A")},{name:(0,u.c)("Keyboard shortcut name").t(BA||(BA=(0,d.Z)(["Search"]))),keys:"/"}]},{name:(0,u.c)("Keyboard shortcut section name").t(WA||(WA=(0,d.Z)(["Action shortcuts"]))),shortcuts:[{name:(0,u.c)("Keyboard shortcut name").t(VA||(VA=(0,d.Z)(["New message"]))),keys:"N"},{name:(0,u.c)("Keyboard shortcut name").t(QA||(QA=(0,d.Z)(["Star"]))),keys:"*"},{name:(0,u.c)("Keyboard shortcut name").t(HA||(HA=(0,d.Z)(["Mark as unread"]))),keys:"U"},{name:(0,u.c)("Keyboard shortcut name").t(XA||(XA=(0,d.Z)(["Label as..."]))),keys:"L"},{name:(0,u.c)("Keyboard shortcut name").t(JA||(JA=(0,d.Z)(["Create filter with..."]))),keys:"F"},{name:(0,u.c)("Keyboard shortcut name").t(qA||(qA=(0,d.Z)(["Move to..."]))),keys:"M"},{name:(0,u.c)("Keyboard shortcut name").t($A||($A=(0,d.Z)(["Move to Inbox"]))),keys:"I"},{name:(0,u.c)("Keyboard shortcut name").t(eC||(eC=(0,d.Z)(["Move to Archive"]))),keys:"A"},{name:(0,u.c)("Keyboard shortcut name").t(tC||(tC=(0,d.Z)(["Move to Spam"]))),keys:"S"},{name:(0,u.c)("Keyboard shortcut name").t(nC||(nC=(0,d.Z)(["Move to Trash"]))),keys:"T"},{name:(0,u.c)("Keyboard shortcut name").t(rC||(rC=(0,d.Z)(["Delete permanently"]))),keys:"".concat(mr.OI," + Backspace")}]},{name:(0,u.c)("Keyboard shortcut section name").t(aC||(aC=(0,d.Z)(["Message shortcuts"]))),shortcuts:[{name:(0,u.c)("Keyboard shortcut name").t(oC||(oC=(0,d.Z)(["Reply"]))),keys:"R"},{name:(0,u.c)("Keyboard shortcut name").t(sC||(sC=(0,d.Z)(["Reply all"]))),keys:"".concat(mr.AI," + R")},{name:(0,u.c)("Keyboard shortcut name").t(iC||(iC=(0,d.Z)(["Forward"]))),keys:"".concat(mr.AI," + F")},{name:(0,u.c)("Keyboard shortcut name").t(cC||(cC=(0,d.Z)(["Load remote content"]))),keys:"".concat(mr.AI," + C")},{name:(0,u.c)("Keyboard shortcut name").t(lC||(lC=(0,d.Z)(["Load embedded images"]))),keys:"".concat(mr.AI," + E")},{name:(0,u.c)("Keyboard shortcut name").t(dC||(dC=(0,d.Z)(["Show original message"]))),keys:"O"}]}]})(),s=o.filter((e=>e.alwaysActive)),i=o.filter((e=>!e.alwaysActive));return(0,j.jsxs)(shortcuts_ShortcutsModal,MailShortcutsModal_objectSpread(MailShortcutsModal_objectSpread({title:r},t),{},{children:[(0,j.jsx)(Cn.Z,{className:"mb1",children:(0,u.c)("Info").t(yC||(yC=(0,d.Z)(["Basic navigation and actions remain available regardless of keyboard shortcuts being active or not in the settings."])))}),(0,j.jsx)("div",{className:"list-2columns on-mobile-list-1column mr-2 on-mobile-mr0",children:s.map((e=>(0,j.jsx)(shortcuts_ShortcutsSectionView,MailShortcutsModal_objectSpread({},e),e.name)))}),(0,j.jsx)("hr",{className:"mt2 mb2 border-bottom"}),(0,j.jsxs)(bo.Z,{className:"mb2",children:[(0,j.jsx)(gr.Z,{htmlFor:"toggle-shortcuts",className:"mr1",children:(0,u.c)("Label").t(hC||(hC=(0,d.Z)(["Keyboard shortcuts"])))}),(0,j.jsx)(yo.Z,{className:"pt0-5",children:(0,j.jsx)(general_ShortcutsToggle,{id:"toggle-shortcuts"})})]}),(0,j.jsx)("div",{className:(0,ht.dh)(["list-2columns on-mobile-list-1column mr-2 on-mobile-mr0",!a&&"opacity-50"]),children:i.map((e=>(0,j.jsx)(shortcuts_ShortcutsSectionView,MailShortcutsModal_objectSpread({},e),e.name)))})]}))};var app_LocationErrorBoundary=({children:e,component:t})=>{const n=(0,s.TH)();return(0,j.jsx)(I.Z,{resetKey:n.key,component:t,children:e})};let IC;!function(e){e[e.DISABLED=0]="DISABLED",e[e.ENABLED=1]="ENABLED",e[e.OUTDATED=2]="OUTDATED",e[e.SET=3]="SET",e[e.PROMPT=4]="PROMPT"}(IC||(IC={}));var fC=n(16850),MC=n(95854),NC=n.n(MC),xC=n(813);const generateMnemonicWithSalt=async()=>{const e=(0,fC.Bl)(),t=(()=>{const e=NC()(new Uint8Array(16));return(0,bI.oG)(e)})();return{salt:e,randomBytes:t,mnemonic:await(e=>{const t=(0,bI.bh)(e);return(0,xC.JJ)(t)})(t)}};var vC=n(53630);const wC=["className","bordered","rounded","background"];function Card_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var DC,SC,OC,AC,CC,EC,card_Card=e=>{let{className:t,bordered:n=!0,rounded:r=!1,background:a=!0}=e,o=(0,Sn.Z)(e,wC);return(0,j.jsx)("div",function Card_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Card_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Card_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({className:(0,ht.dh)([r&&"rounded",n&&"bordered",a&&"bg-weak","p1",t])},o))};const MnemonicPhraseStepContent=({mnemonic:e,loading:t})=>{const{createNotification:n}=(0,hn.Z)();return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("p",{className:"mt0",children:(0,u.c)("Info").t(SC||(SC=(0,d.Z)(["Your recovery phrase is a series of 12 words in a specific order."])))}),(0,j.jsxs)("p",{className:"color-danger",children:[(0,j.jsx)(pr.Z,{className:"mr0-5 float-left mt0-25",name:"circle-exclamation-filled"}),(0,u.c)("Info").t(OC||(OC=(0,d.Z)(["Please keep it safe. You'll need it to access your account and decrypt your data in case of a password reset."])))]}),!e||t?(0,j.jsx)(Yu.Z,{}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("span",{className:"text-semibold",children:(0,u.c)("Label").t(AC||(AC=(0,d.Z)(["Recovery phrase"])))}),(0,j.jsxs)(card_Card,{className:"mt0-5 flex flex-justify-space-between flex-align-items-center flex-nowrap",bordered:!1,rounded:!0,children:[(0,j.jsx)("span",{className:"mr0-5",children:e}),(0,j.jsx)(Gu,{className:"bg-norm flex-item-noshrink",value:e,onCopy:()=>{n({text:(0,u.c)("Info").t(DC||(DC=(0,d.Z)(["Recovery phrase copied to clipboard"])))})}})]})]})]})},MnemonicPhraseStepButtons=({mnemonic:e,disabled:t,onDone:n})=>(0,j.jsxs)("div",{className:"w100",children:[(0,j.jsx)(Ea.Z,{disabled:!e||t,onClick:async()=>{if(!e)return;const t=new Blob([e],{type:"text/plain;charset=utf-8"});helpers_downloadFile(t,"proton_recovery_phrase.txt")},fullWidth:!0,color:"norm",children:(0,u.c)("Action").t(CC||(CC=(0,d.Z)(["Download"])))}),(0,j.jsx)(Ea.Z,{className:"mt1",disabled:!e||t,onClick:n,fullWidth:!0,children:(0,u.c)("Action").t(EC||(EC=(0,d.Z)(["Done"])))})]});var LC,PC,ZC,TC,kC;const zC=["onClose"],_C=["section"];function MnemonicPromptModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function MnemonicPromptModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MnemonicPromptModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MnemonicPromptModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var RC;!function(e){e[e.INFO=0]="INFO",e[e.MNEMONIC_PHRASE=1]="MNEMONIC_PHRASE"}(RC||(RC={}));var mnemonic_MnemonicPromptModal=e=>{const{onClose:t=(()=>{})}=e,n=(0,Sn.Z)(e,zC),[r,a]=(0,o.useState)(RC.INFO),s=(0,Dn.Z)(),i=(0,us.df)(),[c,l]=(0,o.useState)(!1),[{Name:p}]=(0,bn.ZP)(),[m,g]=(0,o.useState)();(0,o.useEffect)((()=>{(async()=>{const e=await generateMnemonicWithSalt();g(e)})()}),[]);const{feature:b,update:h}=(0,nN.Z)(y.P.SeenMnemonicPrompt);(0,o.useEffect)((()=>{!1===(null==b?void 0:b.Value)&&h(!0)}),[b]);const I=(()=>{if(r===RC.INFO){const handleSubmit=async()=>{var e;if(m)try{l(!0);const t=await i(),{randomBytes:n,salt:r}=m,o=await(async({randomBytes:e,salt:t,userKeys:n,api:r,username:a})=>{const o=await(0,fC.zq)(e,t),s=await Promise.all(n.map((async({ID:e,privateKey:t})=>({ID:e,PrivateKey:await(0,pw.b)(t,o)})))),{Auth:i}=await(0,Iw.PL)({api:r,credentials:{username:a,password:e}});return{MnemonicUserKeys:s,MnemonicSalt:t,MnemonicAuth:i}})({randomBytes:n,salt:r,userKeys:t,api:s,username:p});await s((e=o,{url:"settings/mnemonic/reactivate",method:"put",data:e})),a(RC.MNEMONIC_PHRASE)}catch(e){l(!1)}};return{section:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:"pb1 text-center mauto w66 on-mobile-w100",children:(0,j.jsx)("img",{src:vC,alt:""})}),(0,j.jsx)("h1",{className:"mb0-5 text-2xl text-bold text-center",children:(0,u.c)("Info").t(LC||(LC=(0,d.Z)(["Set a recovery phrase"])))}),(0,j.jsx)("p",{className:"mt0 mb0",children:(0,u.c)("Info").t(PC||(PC=(0,d.Z)(["A recovery phrase is one of the safest ways to protect access to your account. You can use it to access your account and recover your encrypted data if you ever forget your password."])))})]}),footer:(0,j.jsxs)("div",{className:"w100",children:[(0,j.jsx)(Ea.Z,{onClick:handleSubmit,fullWidth:!0,loading:!m||c,color:"norm",children:(0,u.c)("Action").t(ZC||(ZC=(0,d.Z)(["Generate recovery phrase"])))}),(0,j.jsx)(Ea.Z,{className:"mt1",onClick:t,fullWidth:!0,children:(0,u.c)("Action").t(TC||(TC=(0,d.Z)(["Skip"])))})]})}}if(!m)throw new Error("No mnemonic data");if(r===RC.MNEMONIC_PHRASE){const{mnemonic:e}=m;return{title:(0,u.c)("Info").t(kC||(kC=(0,d.Z)(["Your recovery phrase"]))),section:(0,j.jsx)(MnemonicPhraseStepContent,{mnemonic:e}),footer:(0,j.jsx)(MnemonicPhraseStepButtons,{mnemonic:e,onDone:t})}}throw new Error("Unknown step")})(),{section:f}=I,M=(0,Sn.Z)(I,_C);return(0,j.jsx)(On.Z,MnemonicPromptModal_objectSpread(MnemonicPromptModal_objectSpread(MnemonicPromptModal_objectSpread({small:!0,noTitleEllipsis:!0,onClose:t},n),M),{},{children:f}))},GC=n(63980);var YC,UC,hooks_useApiStatus=()=>(0,o.useContext)(GC.Z);var FC,KC,topBanners_TopBanner=({children:e,className:t,onClose:n})=>(0,j.jsxs)("div",{className:(0,ht.dh)(["flex flex-nowrap text-center relative text-bold",t]),children:[(0,j.jsx)("div",{className:"flex-item-fluid p0-5",children:e}),n?(0,j.jsx)(Ea.Z,{icon:!0,shape:"ghost",className:"flex-item-noshrink",onClick:n,title:(0,u.c)("Action").t(YC||(YC=(0,d.Z)(["Close this banner"]))),children:(0,j.jsx)(pr.Z,{name:"xmark",alt:(0,u.c)("Action").t(UC||(UC=(0,d.Z)(["Close this banner"])))})}):null]});var BC,WC,VC,QC,topBanners_BadAppVersionBanner=()=>{const{APP_NAME:e}=(0,Nn.Z)(),{appVersionBad:t}=hooks_useApiStatus();if(!t)return null;const n=M.mN[e].name,r=(0,j.jsx)(VM.Z,{className:"color-inherit",onClick:()=>window.location.reload(),children:(0,u.c)("Action").t(FC||(FC=(0,d.Z)(["Refresh the page"])))},"reload-button");return(0,j.jsx)(topBanners_TopBanner,{className:"bg-danger",children:(0,u.c)("Message display when a new app version is available").jt(KC||(KC=(0,d.Z)(["A new version of "," is available. ","."])),n,r)})};var HC,XC,JC,qC,$C,topBanners_DelinquentTopBanner=()=>{const[e]=(0,bn.ZP)(),{APP_NAME:t}=(0,Nn.Z)();if(!e.Delinquent)return null;const n=(0,j.jsx)(sh.Z,{className:"color-inherit",path:(0,Or.$m)(t),children:(0,u.c)("Link").t(BC||(BC=(0,d.Z)(["Pay invoice"])))},"pay-invoices");return e.canPay?e.Delinquent===M.W$.NO_RECEIVE?(0,j.jsx)(topBanners_TopBanner,{className:"bg-danger",children:(0,u.c)("Info").jt(WC||(WC=(0,d.Z)(["Your account has at least one overdue invoice. Your access has been restricted. ",""])),n)}):(0,j.jsx)(topBanners_TopBanner,{className:"bg-danger",children:(0,u.c)("Info").jt(VC||(VC=(0,d.Z)(["Your account has at least one overdue invoice. Your access will soon get restricted. ",""])),n)}):e.isMember?(0,j.jsx)(topBanners_TopBanner,{className:"bg-danger",children:(0,u.c)("Info").t(QC||(QC=(0,d.Z)(["Account access restricted due to unpaid invoices. Please contact your administrator."])))}):null};const eE="ignore-storage-limit";var topBanners_StorageLimitTopBanner=()=>{const[e]=(0,bn.ZP)(),t=100*e.UsedSpace/e.MaxSpace,n=Number.isNaN(t)?0:Math.floor(t),[r,a]=(0,o.useState)("true"===(0,FN.rV)("".concat(eE).concat(e.ID)));(0,o.useEffect)((()=>{r&&(0,FN.LS)("".concat(eE).concat(e.ID),"true")}),[r]);const s=e.canPay?(0,j.jsx)(sh.Z,{className:"color-inherit",path:"/dashboard",children:(0,u.c)("Link").t(HC||(HC=(0,d.Z)(["Upgrade account"])))},"storage-link"):"",i=e.canPay?(0,u.c)("Info").t(XC||(XC=(0,d.Z)(["Free up some space or add more storage space."]))):(0,u.c)("Info").t(JC||(JC=(0,d.Z)(["Free up some space or contact your administrator."])));return t>=100?(0,j.jsx)(topBanners_TopBanner,{className:"bg-danger",children:(0,u.c)("Info").jt(qC||(qC=(0,d.Z)(["You reached 100% of your storage capacity. You cannot send or receive new emails. "," ",""])),i,s)}):!r&&t>=80&&t<100?(0,j.jsx)(topBanners_TopBanner,{className:"bg-warning",onClose:()=>a(!0),children:(0,u.c)("Info").jt($C||($C=(0,d.Z)(["You reached ","% of your storage capacity. "," ",""])),n,i,s)}):null};var tE,nE,hooks_useOnline=()=>{const[e,t]=(0,o.useState)("undefined"==typeof navigator||"boolean"!=typeof navigator.onLine||navigator.onLine);return(0,o.useEffect)((()=>{const goOnline=()=>t(!0),goOffline=()=>t(!1);return window.addEventListener("online",goOnline),window.addEventListener("offline",goOffline),()=>{window.removeEventListener("online",goOnline),window.removeEventListener("offline",goOffline)}}),[]),e};var rE,topBanners_OnlineTopBanner=()=>{const{apiUnreachable:e,offline:t}=hooks_useApiStatus(),n=hooks_useOnline()&&!t,r=useDebounceInput(n,n?0:2500),a=(0,Dn.Z)(),s=(0,o.useRef)(r),[i,l]=(0,o.useState)(!1),handlePing=()=>{a({url:"tests/ping",method:"get"}).catch(c.ZT)};return(0,o.useEffect)((()=>{if(s.current===r)return;if(s.current=r,!r){const e=window.setInterval((()=>{handlePing()}),5e3);return()=>window.clearInterval(e)}l(!0);const e=window.setTimeout((()=>{l(!1),handlePing()}),2e3);return()=>window.clearTimeout(e)}),[r]),r&&i?(0,j.jsx)(topBanners_TopBanner,{className:"bg-success",children:(0,u.c)("Info").t(tE||(tE=(0,d.Z)(["Internet connection restored."])))}):r?e?(0,j.jsx)(topBanners_TopBanner,{className:"bg-danger",children:e}):null:(0,j.jsx)(topBanners_TopBanner,{className:"bg-danger",children:(0,u.c)("Info").t(nE||(nE=(0,d.Z)(["Internet connection lost. Please check your device's connectivity."])))})};var topBanners_SubUserTopBanner=()=>{const[e]=(0,bn.ZP)();return e.isSubUser?(0,j.jsx)(topBanners_TopBanner,{className:"bg-info",children:(0,u.c)("Info").t(rE||(rE=(0,d.Z)(["You are currently signed in as "," (",") and have restricted access."])),e.Name,e.Email)}):null},aE=n(12475),oE=n.n(aE);let sE;!function(e){e.DENIED="denied",e.DEFAULT="default",e.GRANTED="granted"}(sE||(sE={}));const getStatus=()=>{switch(oE().Permission.get()){case sE.DENIED:return sE.DENIED;case sE.GRANTED:return sE.GRANTED;default:return sE.DEFAULT}},create=async(e="",t={})=>{if(oE().Permission.has())return oE().create(e,t)};var iE,cE,hooks_useLocalState=(e,t)=>{const[n,r]=(0,o.useState)((()=>{const n=(0,FN.rV)(t);return null!=n?JSON.parse(n):e}));return(0,o.useEffect)((()=>{(0,FN.LS)(t,JSON.stringify(n))}),[t,n]),[n,r]};var topBanners_DeskopNotificationTopBanner=()=>{const[e,t]=(0,o.useState)(getStatus()),[n,r]=hooks_useLocalState(!1,"dont-ask-desktop-notification"),{APP_NAME:a}=(0,Nn.Z)(),s=(0,Or.PO)(a);if(![M.ei.PROTONMAIL,M.ei.PROTONCALENDAR].includes(a))return null;if(n)return null;if([sE.GRANTED,sE.DENIED].includes(e))return null;const i=(0,j.jsx)("button",{className:"link align-baseline text-left color-inherit",type:"button",onClick:()=>{((e=c.ZT,t=c.ZT)=>{try{oE().Permission.request(e,t)}catch(e){t()}})((()=>t(getStatus())),(()=>t(getStatus())))},children:(0,u.c)("Action").t(iE||(iE=(0,d.Z)(["enable desktop notifications"])))},"enable-desktop-notifications");return(0,j.jsx)(topBanners_TopBanner,{onClose:()=>r(!0),className:"bg-info",children:(0,u.c)("Info").jt(cE||(cE=(0,d.Z)([""," needs your permission to ","."])),s,i)})},lE=n(34012),dE=n(30191),uE=n(14477);var pE,hooks_useApiServerTime=()=>(0,o.useContext)(uE.Z);var topBanners_TimeOutOfSyncTopBanner=()=>{const[e,t]=(0,o.useState)(!1),n=hooks_useApiServerTime(),r=!e&&n&&(e=>Math.abs(e.getTime()-Date.now())>24*M.kr)(n),a=(0,o.useRef)(!1);if((0,o.useEffect)((()=>{r&&!a.current&&(a.current=!0,(0,GN.uT)("Client time difference larger than 24 hours",{level:lE.z.Info,extra:{serverTime:null==n?void 0:n.toString(),localTime:(new Date).toString()}}))}),[r]),!r)return null;const s=(0,j.jsx)(dE.Z,{url:"https://protonmail.com/support/knowledge-base/device-time-warning/"});return(0,j.jsx)(topBanners_TopBanner,{onClose:()=>t(!0),className:"bg-warning",children:(0,u.c)("Warning").jt(pE||(pE=(0,d.Z)(["The date and time settings on your device are out of sync. ",""])),s)})};var topBanners_TopBanners=({children:e})=>(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(topBanners_DelinquentTopBanner,{}),(0,j.jsx)(topBanners_OnlineTopBanner,{}),(0,j.jsx)(topBanners_TimeOutOfSyncTopBanner,{}),(0,j.jsx)(topBanners_StorageLimitTopBanner,{}),(0,j.jsx)(topBanners_BadAppVersionBanner,{}),(0,j.jsx)(topBanners_SubUserTopBanner,{}),(0,j.jsx)(topBanners_DeskopNotificationTopBanner,{}),e]});var mE,gE,jE,app_PrivateAppContainer=({header:e,sidebar:t,children:n,topBanners:r,hasTopBanners:a=!0,isBlurred:o=!1,containerRef:s})=>(0,j.jsxs)("div",{className:(0,ht.dh)(["content-container flex flex-column flex-nowrap no-scroll",o&&"filter-blur"]),ref:s,children:[a?r||(0,j.jsx)(topBanners_TopBanners,{}):null,(0,j.jsxs)("div",{className:"content ui-prominent flex-item-fluid flex flex-column flex-nowrap reset4print",children:[e,(0,j.jsxs)("div",{className:"flex flex-item-fluid flex-nowrap",children:[t,(0,j.jsx)("div",{className:"main ui-standard flex flex-column flex-nowrap flex-item-fluid",children:n})]})]})]});var search_Searchbox=({delay:e,className:t="",advanced:n,placeholder:r="",value:a="",onSearch:o,onChange:s,onFocus:i})=>(0,j.jsxs)("form",{role:"search",name:"searchbox",className:(0,ht.dh)(["searchbox-container relative flex-item-centered-vert",t,""!==a&&n&&"searchbox-container--reset-advanced"]),onSubmit:e=>{e.preventDefault(),null==o||o(a)},onReset:e=>{e.preventDefault(),s(""),null==o||o("")},children:[(0,j.jsxs)("label",{htmlFor:"global_search",children:[(0,j.jsx)("span",{className:"sr-only",children:r}),(0,j.jsx)(Ir,{delay:e,value:a,onKeyDown:e=>{"Escape"===e.key&&e.target.blur()},onChange:s,id:"global_search",placeholder:r,className:"searchbox-field",iconSearchDisplayed:!1,"data-shorcut-target":"searchbox-field",onFocus:i})]}),(0,j.jsxs)(Ea.Z,{type:"submit",icon:!0,shape:"ghost",color:"weak",className:"searchbox-search-button flex",title:(0,u.c)("Action").t(mE||(mE=(0,d.Z)(["Search"]))),children:[(0,j.jsx)(pr.Z,{name:"magnifying-glass",size:22,className:"mauto searchbox-search-button-icon"}),(0,j.jsx)("span",{className:"sr-only",children:(0,u.c)("Action").t(gE||(gE=(0,d.Z)(["Search"])))})]}),a.length?(0,j.jsxs)(Ea.Z,{type:"reset",icon:!0,shape:"ghost",color:"weak",className:"searchbox-advanced-search-button flex",children:[(0,j.jsx)(pr.Z,{name:"xmark",className:"mauto searchbox-search-button-icon"}),(0,j.jsx)("span",{className:"sr-only",children:(0,u.c)("Action").t(jE||(jE=(0,d.Z)(["Clear"])))})]}):null,n]});var logo_AccountLogo=({className:e="logo"})=>(0,j.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 174 22",className:e,"aria-labelledby":"logo__title",children:[(0,j.jsxs)("g",{children:[(0,j.jsx)("path",{d:"M8.355 8.416A2.423 2.423 0 0110 7.708a2.423 2.423 0 012.354 2.354A2.423 2.423 0 0110 12.415a2.423 2.423 0 01-2.354-2.353 2.423 2.423 0 01.709-1.646zM5.292 15.6c0-1.662 2.908-2.354 4.985-2.354 2.077 0 4.43.97 4.43 2.354a5.012 5.012 0 01-4.43 2.354A5.72 5.72 0 015.292 15.6z"}),(0,j.jsx)("path",{d:"M5 4.517A9 9 0 0110 3a8.986 8.986 0 019 9A9 9 0 115 4.517zm7.65 1.087a6.923 6.923 0 10-5.3 12.792 6.923 6.923 0 005.3-12.792zM30.041 4.886H25.85V20.3h2.642v-5.44h1.571c1.779 0 3.239-.404 4.351-1.242 1.14-.859 1.69-2.163 1.69-3.852 0-1.591-.53-2.829-1.623-3.657-1.075-.828-2.568-1.223-4.44-1.223zm-1.549 7.762v-5.57h1.528c1.126 0 1.94.23 2.483.647l.003.002c.53.398.826 1.059.826 2.06 0 1.146-.304 1.853-.822 2.23l-.003.002c-.543.405-1.372.629-2.53.629h-1.485zM102.322 4.886h-3.018L94.36 20.3h2.698l1.118-3.72h5.166l1.118 3.72h2.783l-4.921-15.414zm.346 9.439h-3.817l1.917-6.392 1.9 6.392z"}),(0,j.jsx)("path",{d:"M61.039 5.536V8.37h2.733l-.3 2.127h-2.433v6.451c0 .559.096.908.237 1.105.137.16.384.272.817.272.378 0 .83-.129 1.363-.416l.257-.138 1.035 1.804-.226.157c-.798.552-1.704.827-2.708.827-1.02 0-1.856-.29-2.47-.905l-.005-.005c-.6-.633-.878-1.52-.878-2.615v-6.537h-1.978V8.369h1.978V5.845l2.578-.309zM167.865 8.37V5.535l-2.578.309v2.524h-1.978v2.127h1.978v6.537c0 1.095.278 1.982.877 2.614l.006.006c.614.614 1.45.905 2.47.905 1.004 0 1.91-.275 2.707-.827l.227-.157-1.035-1.804-.257.138c-.533.287-.985.416-1.363.416-.434 0-.68-.113-.817-.272-.141-.197-.237-.546-.237-1.105v-6.451h2.433l.299-2.127h-2.732zM41.138 8.826a3.035 3.035 0 011.998-.715 4.9 4.9 0 011.19.138l.276.07-.478 2.525-.308-.077a3.776 3.776 0 00-.916-.12c-.618 0-1.098.221-1.468.665-.382.459-.703 1.197-.941 2.25V20.3h-2.578V8.37h2.274l.122 1.447c.236-.394.511-.726.83-.991z"}),(0,j.jsx)("path",{d:"M50.333 8.111c-1.109 0-2.078.263-2.894.802-.813.521-1.43 1.264-1.852 2.214-.422.934-.628 2.01-.628 3.218 0 1.869.457 3.385 1.403 4.515.955 1.139 2.285 1.698 3.95 1.698 1.094 0 2.055-.256 2.87-.779l.004-.002c.81-.535 1.427-1.276 1.85-2.212v-.002c.422-.948.628-2.03.628-3.239 0-1.868-.456-3.384-1.402-4.513-.94-1.14-2.264-1.7-3.929-1.7zm-2.645 6.234c0-1.423.243-2.437.684-3.088.428-.63 1.065-.954 1.961-.954.881 0 1.507.32 1.928.947.435.648.675 1.658.675 3.074 0 1.423-.242 2.438-.68 3.09-.425.63-1.056.953-1.944.953-.89 0-1.52-.322-1.945-.948-.438-.648-.68-1.658-.68-3.074zM67.763 8.912c.816-.538 1.786-.8 2.894-.8 1.665 0 2.989.558 3.93 1.699l-.002-.001-.23.192.232-.19V9.81c.945 1.13 1.401 2.645 1.401 4.513 0 1.21-.206 2.291-.627 3.24l-.001.001c-.423.936-1.04 1.677-1.85 2.212l-.003.002c-.816.523-1.777.779-2.871.779-1.665 0-2.995-.559-3.95-1.698-.946-1.13-1.403-2.646-1.403-4.514 0-1.21.207-2.285.629-3.22.422-.95 1.039-1.692 1.851-2.214zm0 0l-.002.002.166.25-.162-.253-.002.001zm.933 2.345c-.441.65-.684 1.665-.684 3.088 0 1.416.241 2.426.68 3.074.423.626 1.055.948 1.944.948.888 0 1.52-.323 1.944-.953.439-.652.68-1.667.68-3.09 0-1.416-.24-2.426-.675-3.074-.42-.627-1.047-.947-1.928-.947-.896 0-1.533.323-1.96.954z"}),(0,j.jsx)("path",{d:"M83.858 8.111c-.767 0-1.478.185-2.127.556l-.002.002a4.679 4.679 0 00-1.11.904l-.124-1.204h-2.269V20.3h2.578v-8.254c.374-.587.765-1.027 1.17-1.33a2.28 2.28 0 011.411-.457c.531 0 .884.148 1.111.397.224.245.374.715.374 1.496V20.3h2.578v-8.427c0-1.13-.31-2.057-.964-2.743-.642-.69-1.532-1.019-2.626-1.019zM110.261 8.915c.801-.54 1.743-.804 2.812-.804.702 0 1.352.105 1.947.318.598.2 1.167.528 1.706.978l.221.183-1.296 1.707-.237-.169a4.21 4.21 0 00-1.103-.583l-.013-.004a3.151 3.151 0 00-1.139-.196c-.822 0-1.446.32-1.904.969-.451.659-.699 1.669-.699 3.075 0 1.407.248 2.391.694 3.003.438.588 1.06.889 1.909.889.413 0 .786-.06 1.122-.175a6.462 6.462 0 001.186-.636l.243-.16 1.231 1.759-.218.176c-1.084.872-2.303 1.313-3.65 1.313-1.609 0-2.908-.545-3.861-1.652l-.002-.002c-.934-1.102-1.382-2.606-1.382-4.473 0-1.236.206-2.333.628-3.282.421-.948 1.021-1.696 1.803-2.232l.002-.002zM122.855 8.111c-1.069 0-2.01.265-2.812.804l-.002.002c-.782.536-1.381 1.284-1.803 2.232-.421.949-.628 2.046-.628 3.283 0 1.866.449 3.37 1.383 4.472l.002.002c.953 1.107 2.252 1.652 3.86 1.652 1.347 0 2.567-.44 3.65-1.313l.219-.176-1.231-1.759-.244.16a6.426 6.426 0 01-1.185.636 3.427 3.427 0 01-1.123.175c-.848 0-1.47-.3-1.908-.889-.446-.612-.694-1.596-.694-3.003 0-1.406.247-2.416.699-3.075.458-.649 1.081-.969 1.903-.969.428 0 .806.067 1.14.196l.013.004c.353.118.721.31 1.103.583l.237.17 1.295-1.708-.22-.183a5.296 5.296 0 00-1.706-.978 5.744 5.744 0 00-1.948-.318z"}),(0,j.jsx)("path",{d:"M130.293 8.913c.816-.539 1.785-.802 2.894-.802 1.664 0 2.988.56 3.929 1.7l-.001-.001-.23.192.232-.19-.001-.001c.946 1.13 1.402 2.645 1.402 4.513 0 1.21-.206 2.291-.628 3.24l-.001.001c-.422.936-1.039 1.677-1.849 2.212l-.003.002c-.816.523-1.777.779-2.871.779-1.665 0-2.995-.559-3.95-1.698-.946-1.13-1.403-2.646-1.403-4.514 0-1.21.206-2.285.628-3.22.423-.95 1.039-1.692 1.852-2.213zm.933 2.344c-.441.65-.684 1.665-.684 3.088 0 1.416.241 2.426.679 3.074.424.626 1.055.948 1.945.948.888 0 1.519-.323 1.944-.953.438-.652.68-1.667.68-3.09 0-1.416-.24-2.426-.675-3.074-.421-.627-1.047-.947-1.928-.947-.897 0-1.533.323-1.961.954z"}),(0,j.jsx)("path",{d:"M158.256 8.111c-.767 0-1.478.185-2.126.556l-.003.002a4.69 4.69 0 00-1.11.904l-.123-1.204h-2.27V20.3h2.578v-8.254c.374-.587.766-1.027 1.17-1.33a2.281 2.281 0 011.411-.457c.532 0 .884.148 1.112.397.223.245.373.715.373 1.496V20.3h2.578v-8.427c0-1.13-.31-2.057-.963-2.743-.643-.69-1.532-1.019-2.627-1.019zM140.648 8.37h2.578v8.211c0 .752.135 1.215.338 1.462.193.222.534.367 1.104.367.942 0 1.791-.538 2.538-1.741v-8.3h2.578V20.3h-2.274l-.104-1.22a4.206 4.206 0 01-1.102.963l-.005.003c-.614.347-1.349.512-2.19.512-1.054 0-1.915-.323-2.542-.999-.626-.674-.919-1.61-.919-2.762V8.369z"})]}),(0,j.jsx)("title",{id:"logo__title",children:"Proton Account"})]});const bE=(0,Or.PO)(M.ei.PROTONCALENDAR);var logo_CalendarLogo=({className:e="logo"})=>(0,j.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 182 22",className:e,"aria-labelledby":"logo__title",children:[(0,j.jsxs)("g",{children:[(0,j.jsx)("path",{d:"M6.886 15.62a1.85 1.85 0 01-1.376-.688l-.84.841a2.765 2.765 0 002.37.994c1.68 0 2.598-.917 2.598-2.064l.001-.038.002-.03a1.573 1.573 0 00-1.532-1.613 1.564 1.564 0 001.3-1.605c0-.917-.841-1.758-2.218-1.682a3.11 3.11 0 00-2.293.917l.764.84a1.75 1.75 0 011.3-.611c.535 0 .916.306.916.764 0 .612-.382.917-.993.917h-.383l-.153 1.07h.536c.687 0 1.07.306 1.07.994a.984.984 0 01-1.068.995z"}),(0,j.jsx)("path",{d:"M15.447 13.251c0 2.293-.917 3.592-2.6 3.592-1.68 0-2.598-1.3-2.598-3.592 0-2.293.917-3.516 2.599-3.516 1.682 0 2.599 1.223 2.599 3.516zm-1.606 0c0-1.834-.305-2.37-.917-2.37-.687 0-.916.535-.916 2.37s.305 2.37.916 2.37c.688 0 .917-.536.917-2.37z"}),(0,j.jsx)("path",{d:"M15.9 4.182H14.76v-.403a1.074 1.074 0 10-2.15 0v.403H7.306v-.403a1.06 1.06 0 00-1.044-1.075h-.03A.989.989 0 005.156 3.78v.403H4.082A2.107 2.107 0 002 6.314v12.038A2.164 2.164 0 004.15 20.5H15.9a2.164 2.164 0 002.15-2.148V6.263a2.354 2.354 0 00-2.15-2.081zm.605 14.101a.6.6 0 01-.595.605H4.082a.6.6 0 01-.605-.596V8.076h13.025l.003 10.207z"}),(0,j.jsx)("path",{d:"M116.525 3.537v14.184c0 .285.046.437.091.508.04.045.123.095.319.095.241 0 .445-.038.619-.108l.285-.113.715 1.907-.229.124a3.52 3.52 0 01-1.713.424c-.793 0-1.456-.235-1.953-.733l-.007-.007c-.482-.515-.705-1.213-.705-2.054V3.845l2.578-.308z"}),(0,j.jsx)("path",{d:"M150.171 3.537l2.578.308V20.3h-2.307l-.136-1.105c-.303.336-.649.62-1.037.849l-.005.002a4.04 4.04 0 01-2.018.512c-1.44 0-2.586-.574-3.404-1.716l-.002-.002c-.792-1.128-1.172-2.621-1.172-4.451 0-1.192.183-2.263.558-3.207.376-.946.922-1.696 1.646-2.236.729-.558 1.582-.834 2.546-.834 1.026 0 1.946.34 2.753 1.004V3.537zm-4.115 7.705c-.426.66-.66 1.68-.66 3.104 0 1.442.221 2.464.622 3.11.39.63.932.933 1.658.933.554 0 1.011-.125 1.385-.36.371-.249.743-.617 1.11-1.115v-5.346c-.335-.422-.687-.732-1.052-.939l-.01-.006a2.336 2.336 0 00-1.261-.342c-.773 0-1.36.314-1.792.961zM96.348 4.629c-1.2 0-2.296.308-3.277.927-.988.623-1.76 1.545-2.326 2.748-.568 1.197-.846 2.626-.846 4.279 0 1.65.263 3.084.8 4.292l.002.005c.55 1.19 1.317 2.112 2.302 2.748l.005.003c.997.62 2.128.927 3.383.927.966 0 1.832-.163 2.593-.498.746-.328 1.368-.743 1.858-1.249l.182-.187-1.35-1.725-.235.171a8.392 8.392 0 01-1.452.872c-.427.194-.934.296-1.531.296-1.142 0-2.043-.438-2.73-1.324-.686-.898-1.055-2.323-1.055-4.331 0-2.07.37-3.505 1.052-4.372.702-.873 1.611-1.305 2.754-1.305.924 0 1.813.334 2.67 1.03l.228.183 1.507-1.767-.237-.194c-.65-.531-1.302-.923-1.955-1.166-.646-.246-1.43-.363-2.342-.363zm2.342.363h.001l-.107.28.105-.28zm-4.967 3.22l-.234-.187.235.185v.001zm.003 8.702l.001.001-.238.183.237-.184zm-2.98-8.61l.27.13-.271-.128v-.002zM25.85 4.887h4.191c1.872 0 3.365.394 4.44 1.222 1.093.829 1.622 2.066 1.622 3.657 0 1.69-.55 2.993-1.689 3.852-1.112.838-2.573 1.243-4.351 1.243h-1.57v5.44H25.85V4.886zm2.642 2.19v5.571h1.485c1.158 0 1.987-.224 2.53-.629l.003-.002c.518-.377.822-1.083.822-2.23 0-1-.295-1.662-.826-2.06l-.003-.002c-.543-.417-1.357-.647-2.483-.647h-1.527z"}),(0,j.jsx)("path",{d:"M61.039 8.37V5.537l-2.578.308V8.37h-1.978v2.126h1.978v6.537c0 1.095.278 1.982.878 2.615l.005.005c.614.614 1.45.905 2.47.905 1.004 0 1.91-.275 2.708-.827l.226-.157-1.035-1.804-.257.138c-.533.287-.985.416-1.363.416-.433 0-.68-.113-.817-.272-.14-.197-.237-.546-.237-1.105v-6.45h2.433l.3-2.127h-2.733zM41.138 8.826a3.035 3.035 0 011.998-.714 4.9 4.9 0 011.19.138l.276.068-.478 2.526-.308-.077a3.776 3.776 0 00-.916-.12c-.618 0-1.098.221-1.468.666-.382.458-.703 1.196-.941 2.249V20.3h-2.578V8.37h2.274l.122 1.447c.236-.394.511-.726.83-.99z"}),(0,j.jsx)("path",{d:"M50.333 8.112c-1.109 0-2.078.262-2.894.8-.813.522-1.43 1.265-1.852 2.215-.422.934-.628 2.01-.628 3.219 0 1.868.457 3.384 1.403 4.514.955 1.139 2.285 1.698 3.95 1.698 1.094 0 2.055-.255 2.87-.778l.004-.003c.81-.535 1.427-1.276 1.85-2.212v-.002c.422-.947.628-2.03.628-3.239 0-1.868-.456-3.384-1.402-4.513-.94-1.14-2.264-1.7-3.929-1.7zm-2.645 6.234c0-1.424.243-2.438.684-3.09.428-.63 1.065-.953 1.961-.953.881 0 1.507.32 1.928.947.435.648.675 1.658.675 3.074 0 1.424-.242 2.438-.68 3.09-.425.63-1.056.953-1.944.953-.89 0-1.52-.322-1.945-.948-.438-.648-.68-1.657-.68-3.073zM67.763 8.913c.816-.539 1.786-.801 2.894-.801 1.665 0 2.989.558 3.93 1.699l-.002-.001-.23.192.232-.19V9.81c.945 1.13 1.401 2.645 1.401 4.513 0 1.21-.206 2.292-.627 3.24l-.001.001c-.423.936-1.04 1.677-1.85 2.212l-.003.003c-.816.523-1.777.778-2.871.778-1.665 0-2.995-.559-3.95-1.698-.946-1.13-1.403-2.646-1.403-4.514 0-1.21.207-2.285.629-3.219.422-.95 1.039-1.693 1.851-2.214zm0 0l.002-.001.162.252-.166-.25.002-.001zm.933 2.344c-.441.65-.684 1.665-.684 3.089 0 1.416.241 2.425.68 3.073.423.626 1.055.948 1.944.948.888 0 1.52-.323 1.944-.953.439-.652.68-1.667.68-3.09 0-1.416-.24-2.426-.675-3.074-.42-.627-1.047-.947-1.928-.947-.896 0-1.533.323-1.96.954z"}),(0,j.jsx)("path",{d:"M83.858 8.112c-.767 0-1.478.184-2.127.555l-.002.002a4.679 4.679 0 00-1.11.904l-.124-1.203h-2.269V20.3h2.578v-8.254c.374-.587.765-1.027 1.17-1.33a2.28 2.28 0 011.411-.456c.531 0 .884.147 1.111.396.224.245.374.715.374 1.497V20.3h2.578v-8.427c0-1.13-.31-2.057-.964-2.743-.642-.69-1.532-1.018-2.626-1.018z"}),(0,j.jsx)("path",{d:"M102.728 8.904c1.431-.525 2.77-.792 4.017-.792 1.377 0 2.463.34 3.199 1.075.733.717 1.078 1.729 1.078 2.987v5.182c0 .43.075.701.182.858.114.154.295.287.567.386l.273.1-.619 1.886-.244-.03c-.622-.076-1.147-.253-1.558-.549a2.282 2.282 0 01-.701-.847c-.806.934-1.915 1.398-3.295 1.398-1.177 0-2.141-.334-2.854-1.031-.711-.695-1.058-1.6-1.058-2.687 0-1.286.465-2.305 1.41-3.014l.002-.001c.945-.697 2.249-1.026 3.876-1.026h1.441v-.539c0-.764-.185-1.234-.479-1.496-.309-.274-.818-.44-1.586-.44-.786 0-1.77.19-2.958.587l-.282.094-.686-2 .275-.101zm2.357 6.328c-.432.32-.663.8-.663 1.5 0 .628.154 1.05.411 1.319.255.266.652.424 1.245.424.981 0 1.767-.487 2.366-1.542V14.71h-1.183c-1.018 0-1.727.19-2.176.522zM124.33 8.112c-1.017 0-1.918.274-2.691.83l-.002.002c-.752.552-1.328 1.315-1.733 2.275l-.001.002c-.39.946-.581 2.025-.581 3.232 0 1.853.449 3.349 1.382 4.451l.002.002c.955 1.109 2.276 1.652 3.925 1.652 1.505 0 2.888-.498 4.141-1.483l.228-.179-1.202-1.652-.241.165c-.484.333-.94.57-1.368.716-.424.146-.892.22-1.407.22-.784 0-1.404-.263-1.887-.785-.435-.47-.727-1.205-.839-2.248h7.173l.023-.275c.029-.352.044-.697.044-1.035 0-1.793-.412-3.237-1.271-4.296-.871-1.072-2.118-1.594-3.695-1.594zm2.407 5.138h-4.685c.094-.998.332-1.72.686-2.198.379-.51.91-.77 1.635-.77.816 0 1.385.265 1.76.761.369.488.582 1.211.604 2.207z"}),(0,j.jsx)("path",{d:"M134.93 8.667a4.212 4.212 0 012.126-.555c1.095 0 1.985.329 2.627 1.019.653.685.963 1.612.963 2.742V20.3h-2.578v-8.147c0-.782-.15-1.252-.373-1.497-.228-.249-.58-.396-1.112-.396a2.28 2.28 0 00-1.411.456c-.404.303-.796.743-1.17 1.33V20.3h-2.578V8.37h2.27l.123 1.203a4.69 4.69 0 011.11-.904l.003-.002z"}),(0,j.jsx)("path",{d:"M159.752 8.112c-1.247 0-2.587.267-4.017.792l-.275.101.686 2 .282-.094c1.188-.396 2.171-.587 2.958-.587.768 0 1.277.166 1.585.44.295.262.48.732.48 1.496v.539h-1.441c-1.627 0-2.932.329-3.876 1.026l-.002.001c-.946.71-1.41 1.728-1.41 3.014 0 1.087.347 1.992 1.057 2.687.714.697 1.678 1.031 2.855 1.031 1.38 0 2.489-.464 3.294-1.398.177.35.409.636.701.847.411.296.937.473 1.558.549l.245.03.619-1.886-.273-.1c-.272-.099-.453-.232-.568-.386-.106-.157-.181-.428-.181-.858v-5.182c0-1.258-.345-2.27-1.078-2.986-.736-.736-1.822-1.076-3.199-1.076zm-2.323 8.62c0-.7.231-1.18.663-1.5.448-.332 1.158-.522 2.176-.522h1.183v2.223c-.599 1.055-1.386 1.542-2.366 1.542-.593 0-.99-.158-1.245-.424-.258-.269-.411-.69-.411-1.319z"}),(0,j.jsx)("path",{d:"M170.287 8.826a3.035 3.035 0 011.998-.714c.423 0 .82.045 1.191.138l.274.068-.477 2.526-.308-.077a3.781 3.781 0 00-.917-.12c-.617 0-1.097.221-1.468.666-.381.458-.702 1.196-.941 2.249V20.3h-2.578V8.37h2.275l.122 1.447a3.83 3.83 0 01.829-.99z"})]}),(0,j.jsx)("title",{id:"logo__title",children:bE})]});var logo_ContactsLogo=({className:e="logo"})=>(0,j.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 174 22",className:e,"aria-labelledby":"logo__title",children:[(0,j.jsxs)("g",{children:[(0,j.jsx)("path",{d:"M16.378 3.5H4.622A1.601 1.601 0 003 5.08v13.926a1.601 1.601 0 001.58 1.622h11.798A1.601 1.601 0 0018 19.048V5.121A1.667 1.667 0 0016.378 3.5zm-4.262 5.067h.008a1.277 1.277 0 011.319 1.236v.082a1.434 1.434 0 01-1.317 1.418 1.45 1.45 0 01-1.421-1.418 1.365 1.365 0 011.411-1.318zm-5.87 11.047H4.624a.642.642 0 01-.508-.608h.002V5.122a.478.478 0 01.51-.508h1.619l-.001 15zm8.816-4.355a.324.324 0 01-.304.305h-5.37a.324.324 0 01-.305-.305v-.508a2.534 2.534 0 012.432-2.432h1.115a2.466 2.466 0 012.432 2.432v.508z"}),(0,j.jsx)("path",{d:"M96.348 4.629c-1.2 0-2.296.308-3.277.927-.988.623-1.76 1.545-2.326 2.748-.568 1.197-.846 2.626-.846 4.278 0 1.651.263 3.085.8 4.293l.002.005c.55 1.19 1.317 2.112 2.302 2.748l.005.003c.997.62 2.128.927 3.383.927.966 0 1.832-.163 2.593-.498.746-.328 1.368-.743 1.858-1.249l.182-.188-1.35-1.724-.235.171a8.391 8.391 0 01-1.452.872c-.427.194-.934.296-1.531.296-1.142 0-2.043-.438-2.73-1.324-.686-.898-1.055-2.323-1.055-4.332 0-2.069.37-3.504 1.052-4.37.702-.874 1.611-1.306 2.754-1.306.924 0 1.813.334 2.67 1.03l.228.183 1.507-1.767-.237-.194c-.65-.531-1.302-.923-1.955-1.166-.646-.246-1.43-.363-2.342-.363zm-5.332 3.804l-.27-.129-.001.002.271.127zm7.568-3.16l.107-.28-.001-.001h-.001l-.105.28zM93.49 17.097l.237-.184.001.001-.238.183zm.234-8.887v.001l-.234-.187.235.185v.001zM30.041 4.887H25.85V20.3h2.642v-5.44h1.571c1.779 0 3.239-.404 4.351-1.242 1.14-.859 1.69-2.163 1.69-3.852 0-1.59-.53-2.828-1.623-3.657-1.075-.828-2.568-1.222-4.44-1.222zm-1.549 7.761v-5.57h1.528c1.126 0 1.94.23 2.483.647l.003.002c.53.398.826 1.059.826 2.06 0 1.146-.304 1.853-.822 2.23l-.003.002c-.543.405-1.372.629-2.53.629h-1.485z"}),(0,j.jsx)("path",{d:"M61.039 8.37V5.537l-2.578.308V8.37h-1.978v2.126h1.978v6.537c0 1.095.278 1.982.878 2.615l.005.005c.614.614 1.45.905 2.47.905 1.004 0 1.91-.275 2.708-.827l.226-.157-1.035-1.804-.257.138c-.533.287-.985.416-1.363.416-.433 0-.68-.113-.817-.272-.14-.197-.237-.546-.237-1.105v-6.451h2.433l.3-2.126h-2.733zM129.145 8.37V5.537l-2.578.308V8.37h-1.978v2.126h1.978v6.537c0 1.095.278 1.982.878 2.615l.006.005c.614.614 1.45.905 2.469.905 1.004 0 1.91-.275 2.708-.827l.227-.157-1.035-1.804-.257.138c-.533.287-.985.416-1.363.416-.434 0-.68-.113-.818-.272-.14-.197-.237-.546-.237-1.105v-6.451h2.433l.3-2.126h-2.733zM158.876 8.37V5.537l-2.578.308V8.37h-1.978v2.126h1.978v6.537c0 1.095.278 1.982.878 2.614l.005.006c.614.614 1.451.905 2.47.905 1.004 0 1.91-.275 2.707-.827l.227-.157-1.035-1.804-.257.138c-.533.287-.985.416-1.363.416-.433 0-.68-.113-.817-.272-.141-.197-.237-.546-.237-1.105v-6.451h2.433l.299-2.126h-2.732zM43.136 8.112c-.756 0-1.427.238-1.998.714a3.837 3.837 0 00-.83.991l-.121-1.447h-2.274V20.3h2.578v-6.738c.238-1.053.559-1.791.94-2.25.37-.444.85-.665 1.469-.665.288 0 .593.039.916.12l.308.077.477-2.526-.274-.069a4.9 4.9 0 00-1.19-.137z"}),(0,j.jsx)("path",{d:"M50.333 8.112c-1.109 0-2.078.262-2.894.8-.813.522-1.43 1.265-1.852 2.215-.422.934-.628 2.01-.628 3.218 0 1.869.457 3.385 1.403 4.515.955 1.139 2.285 1.698 3.95 1.698 1.094 0 2.055-.255 2.87-.778l.004-.003c.81-.535 1.427-1.276 1.85-2.212v-.002c.422-.947.628-2.03.628-3.239 0-1.868-.456-3.384-1.402-4.513-.94-1.14-2.264-1.7-3.929-1.7zm-2.645 6.233c0-1.423.243-2.437.684-3.088.428-.63 1.065-.954 1.961-.954.881 0 1.507.32 1.928.947.435.648.675 1.658.675 3.074 0 1.424-.242 2.438-.68 3.09-.425.63-1.056.953-1.944.953-.89 0-1.52-.322-1.945-.948-.438-.648-.68-1.657-.68-3.074zM70.657 8.112c-1.108 0-2.078.262-2.894.8-.812.522-1.429 1.265-1.852 2.215-.421.934-.628 2.01-.628 3.218 0 1.869.457 3.385 1.403 4.515.955 1.139 2.285 1.698 3.95 1.698 1.094 0 2.056-.255 2.87-.778l.004-.003c.81-.535 1.427-1.276 1.85-2.212v-.002c.422-.947.628-2.03.628-3.239 0-1.868-.456-3.383-1.402-4.513-.94-1.14-2.264-1.7-3.929-1.7zm-2.73 1.052l-.162-.252h-.002l-.002.002.166.25zm6.428.838l.232-.19V9.81l-.002-.001-.23.192zm-6.343 4.343c0-1.423.243-2.437.684-3.088.428-.63 1.065-.954 1.961-.954.881 0 1.507.32 1.928.947.435.648.675 1.658.675 3.074 0 1.424-.241 2.438-.68 3.09-.424.63-1.056.953-1.944.953-.89 0-1.52-.322-1.945-.948-.438-.648-.68-1.657-.68-3.074z"}),(0,j.jsx)("path",{d:"M83.858 8.112c-.767 0-1.478.184-2.127.555l-.002.002a4.679 4.679 0 00-1.11.904l-.124-1.203h-2.269V20.3h2.578v-8.254c.374-.587.765-1.027 1.17-1.33a2.28 2.28 0 011.411-.457c.531 0 .884.148 1.111.397.224.245.374.715.374 1.496V20.3h2.578v-8.427c0-1.13-.31-2.057-.964-2.743-.642-.69-1.532-1.018-2.626-1.018z"}),(0,j.jsx)("path",{d:"M107.132 8.112c-1.109 0-2.078.262-2.894.8-.813.522-1.429 1.265-1.852 2.215-.422.934-.628 2.01-.628 3.218 0 1.869.456 3.385 1.403 4.515.955 1.139 2.285 1.698 3.949 1.698 1.095 0 2.056-.255 2.871-.778l.004-.003c.81-.535 1.426-1.276 1.849-2.212l.001-.002c.421-.947.628-2.03.628-3.239 0-1.868-.456-3.383-1.402-4.513-.941-1.14-2.265-1.7-3.929-1.7zm3.698 1.89l.23-.192h.001v.002l-.231.19zm-6.344 4.343c0-1.423.243-2.437.685-3.088.428-.63 1.064-.954 1.961-.954.881 0 1.507.32 1.928.947.435.648.674 1.658.674 3.074 0 1.424-.241 2.438-.679 3.09-.425.63-1.056.953-1.945.953s-1.52-.322-1.944-.948c-.438-.648-.68-1.657-.68-3.074z"}),(0,j.jsx)("path",{d:"M119.903 8.112c-.767 0-1.478.184-2.127.555l-.003.002a4.69 4.69 0 00-1.11.904l-.123-1.203h-2.269V20.3h2.578v-8.254c.374-.587.765-1.027 1.17-1.33a2.28 2.28 0 011.411-.457c.531 0 .883.148 1.111.397.223.245.373.715.373 1.496V20.3h2.578v-8.427c0-1.13-.31-2.057-.963-2.742-.642-.69-1.532-1.02-2.626-1.02z"}),(0,j.jsx)("path",{d:"M138.377 8.112c-1.247 0-2.587.267-4.017.792l-.275.101.686 2 .282-.094c1.188-.396 2.171-.587 2.958-.587.768 0 1.277.166 1.585.44.295.262.48.732.48 1.496v.539h-1.441c-1.627 0-2.931.329-3.876 1.026l-.002.001c-.946.71-1.41 1.728-1.41 3.014 0 1.087.347 1.992 1.058 2.686.713.698 1.677 1.032 2.854 1.032 1.38 0 2.489-.464 3.295-1.398.176.35.408.636.701.847.41.296.936.473 1.557.549l.245.03.619-1.887-.273-.099c-.272-.099-.453-.232-.567-.386-.107-.157-.182-.428-.182-.858v-5.182c0-1.258-.345-2.27-1.078-2.987-.736-.735-1.822-1.075-3.199-1.075zm-2.323 8.62c0-.7.231-1.181.663-1.5.449-.332 1.158-.522 2.176-.522h1.183v2.223c-.599 1.055-1.385 1.541-2.366 1.541-.593 0-.99-.157-1.245-.423-.257-.269-.411-.69-.411-1.319z"}),(0,j.jsx)("path",{d:"M149.685 8.112c-1.07 0-2.011.264-2.812.803l-.003.002c-.781.536-1.381 1.284-1.803 2.232-.421.949-.627 2.046-.627 3.283 0 1.866.448 3.37 1.382 4.472l.002.002c.953 1.107 2.252 1.652 3.861 1.652 1.347 0 2.566-.44 3.649-1.313l.219-.176-1.231-1.758-.243.16c-.445.291-.84.501-1.186.635a3.425 3.425 0 01-1.122.175c-.849 0-1.471-.3-1.909-.889-.446-.612-.694-1.595-.694-3.003 0-1.406.247-2.416.699-3.075.458-.648 1.081-.969 1.904-.969.427 0 .805.067 1.139.196l.013.004c.353.118.721.31 1.103.583l.237.17 1.295-1.708-.22-.183a5.285 5.285 0 00-1.706-.978 5.742 5.742 0 00-1.947-.317zM167.742 8.112c-.809 0-1.552.142-2.225.432-.66.277-1.192.681-1.586 1.216l-.001.002a2.942 2.942 0 00-.573 1.767c0 .889.291 1.641.883 2.233l.003.003c.598.582 1.53 1.022 2.755 1.343.739.2 1.284.387 1.646.561l.008.004c.357.159.572.335.687.513l.005.006c.112.164.183.406.183.755 0 .43-.172.762-.539 1.023-.363.254-.882.397-1.59.397-1.093 0-2.09-.342-3.001-1.035l-.222-.17-1.436 1.641.226.197c1.195 1.044 2.694 1.558 4.476 1.558 1.295 0 2.41-.306 3.329-.933.962-.648 1.443-1.597 1.443-2.807 0-1.02-.344-1.852-1.049-2.462-.667-.589-1.657-1.034-2.939-1.354-.909-.242-1.499-.481-1.81-.704-.262-.197-.394-.463-.394-.834 0-.361.139-.627.43-.828l.006-.004c.304-.223.743-.351 1.349-.351.485 0 .939.074 1.365.22l.002.001c.445.148.918.38 1.417.7l.247.157 1.159-1.724-.223-.171a6.57 6.57 0 00-1.847-1.013c-.653-.228-1.383-.34-2.184-.34z"})]}),(0,j.jsx)("title",{id:"logo__title",children:"ProtonContacts"})]});var logo_DriveLogo=({className:e="logo"})=>{const t=(0,Or.PO)(M.ei.PROTONDRIVE);return(0,j.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 148 22",className:e,"aria-labelledby":"logo__title",children:[(0,j.jsxs)("g",{children:[(0,j.jsx)("path",{d:"M112.826 3.405c.321-.32.729-.475 1.202-.475.483 0 .9.153 1.222.475.318.318.475.718.475 1.18 0 .46-.157.861-.475 1.18l-.006.005c-.323.305-.738.448-1.216.448-.468 0-.874-.145-1.195-.448l-.007-.006a1.611 1.611 0 01-.474-1.18c0-.46.156-.861.474-1.18z"}),(0,j.jsx)("path",{d:"M25.85 4.887h4.191c1.872 0 3.365.394 4.44 1.222 1.093.829 1.622 2.066 1.622 3.657 0 1.69-.55 2.993-1.689 3.852-1.112.838-2.573 1.243-4.351 1.243h-1.57v5.44H25.85V4.886zm2.642 2.19v5.571h1.485c1.158 0 1.987-.224 2.53-.629l.003-.002c.518-.377.822-1.084.822-2.23 0-1.001-.295-1.662-.826-2.06l-.003-.002c-.543-.417-1.357-.647-2.483-.647h-1.527zM94.263 4.887h-3.396V20.3h3.847c1.997 0 3.709-.579 5.115-1.746 1.461-1.215 2.151-3.258 2.151-6.036 0-2.842-.687-4.883-2.16-6-1.414-1.098-3.276-1.631-5.557-1.631zm-.754 13.2V7.122h1.205c.902 0 1.67.138 2.314.406l.005.002c.604.24 1.123.737 1.544 1.538v.002c.411.768.632 1.907.632 3.45 0 2.202-.43 3.629-1.2 4.386-.796.783-1.835 1.183-3.144 1.183h-1.356z"}),(0,j.jsx)("path",{d:"M61.039 5.537V8.37h2.733l-.3 2.126h-2.433v6.451c0 .559.096.908.237 1.105.137.16.384.272.817.272.378 0 .83-.129 1.363-.416l.257-.138 1.035 1.804-.226.157c-.798.552-1.704.827-2.708.827-1.02 0-1.856-.29-2.47-.905l-.005-.005c-.6-.633-.878-1.52-.878-2.615v-6.537h-1.978V8.37h1.978V5.845l2.578-.308zM43.136 8.112c-.756 0-1.427.238-1.998.714a3.837 3.837 0 00-.83.991l-.121-1.447h-2.274V20.3h2.578v-6.738c.238-1.053.559-1.791.94-2.25.37-.444.85-.665 1.469-.665.288 0 .593.039.916.12l.308.077.477-2.526-.274-.068a4.9 4.9 0 00-1.19-.138z"}),(0,j.jsx)("path",{d:"M47.439 8.913c.816-.539 1.785-.801 2.894-.801 1.665 0 2.988.558 3.929 1.699.946 1.13 1.402 2.645 1.402 4.513 0 1.21-.206 2.292-.628 3.24v.001c-.423.936-1.04 1.677-1.85 2.212l-.003.003c-.816.523-1.777.778-2.871.778-1.665 0-2.995-.559-3.95-1.698-.946-1.13-1.403-2.646-1.403-4.514 0-1.21.206-2.285.628-3.219.423-.95 1.04-1.693 1.852-2.214zm.933 2.344c-.441.65-.684 1.665-.684 3.089 0 1.416.24 2.425.68 3.073.423.626 1.054.948 1.944.948.888 0 1.52-.323 1.944-.953.438-.652.68-1.667.68-3.09 0-1.416-.24-2.426-.675-3.074-.42-.627-1.047-.947-1.928-.947-.896 0-1.533.323-1.96.954zM70.657 8.112c-1.108 0-2.078.262-2.894.8-.812.522-1.429 1.265-1.852 2.215-.421.934-.628 2.01-.628 3.219 0 1.868.457 3.384 1.403 4.514.955 1.139 2.285 1.698 3.95 1.698 1.094 0 2.056-.255 2.87-.778l.004-.003c.81-.535 1.427-1.276 1.85-2.212v-.002c.422-.947.628-2.03.628-3.239 0-1.868-.456-3.383-1.402-4.513-.94-1.14-2.264-1.7-3.929-1.7zm3.93 1.699l-.232.191.23-.192h.001zm-6.824-.898h-.002l.166.251-.162-.252h-.002zm.249 5.433c0-1.424.243-2.438.684-3.09.428-.63 1.065-.953 1.961-.953.881 0 1.507.32 1.928.947.435.648.675 1.658.675 3.074 0 1.424-.241 2.438-.68 3.09-.424.63-1.056.953-1.944.953-.89 0-1.52-.322-1.945-.948-.438-.648-.68-1.657-.68-3.073z"}),(0,j.jsx)("path",{d:"M81.731 8.667a4.217 4.217 0 012.127-.555c1.094 0 1.984.329 2.626 1.018.653.686.964 1.613.964 2.743V20.3H84.87v-8.147c0-.782-.15-1.252-.374-1.497-.227-.249-.58-.396-1.111-.396a2.28 2.28 0 00-1.411.456c-.405.303-.796.743-1.17 1.33V20.3h-2.578V8.37h2.27l.123 1.203c.325-.36.695-.662 1.11-.904l.002-.002zM109.755 8.112c-.757 0-1.427.238-1.998.714a3.833 3.833 0 00-.83.991l-.122-1.447h-2.274V20.3h2.578v-6.738c.239-1.053.559-1.791.941-2.25.37-.444.85-.665 1.468-.665.288 0 .593.039.916.12l.309.077.477-2.526-.275-.068a4.895 4.895 0 00-1.19-.138z"}),(0,j.jsx)("path",{d:"M130.698 8.942c.772-.556 1.673-.83 2.69-.83 1.578 0 2.825.522 3.695 1.594.86 1.06 1.271 2.504 1.271 4.296 0 .338-.015.683-.044 1.035l-.023.275h-7.173c.113 1.043.404 1.779.839 2.248.483.522 1.104.786 1.887.786.515 0 .984-.075 1.407-.22a5.77 5.77 0 001.369-.717l.24-.165 1.202 1.652-.227.179c-1.253.984-2.636 1.483-4.142 1.483-1.648 0-2.97-.543-3.925-1.652l-.001-.002c-.934-1.102-1.383-2.598-1.383-4.45 0-1.208.191-2.287.582-3.233l.001-.002c.405-.96.98-1.723 1.732-2.275l.003-.002zm.413 4.308h4.685c-.022-.996-.236-1.72-.604-2.207-.376-.496-.944-.762-1.761-.762-.725 0-1.256.26-1.634.77-.355.48-.593 1.201-.686 2.2z"}),(0,j.jsx)("path",{d:"M115.338 8.37h-2.578V20.3h2.578V8.37zM116.815 8.37h2.792l2.745 8.85 2.725-8.85h2.726L123.75 20.3h-2.815l-4.12-11.93zM14.87 6.335a4.399 4.399 0 01.19 8.794v.004h-3.2v2.023h2.256L10.1 21.17l-4.016-4.015h2.323v-2.023h3.419V13.11h2.322l-4.016-4.015L6.12 13.11h2.255v2.023H5.292a4.29 4.29 0 01-.339-8.568 5.18 5.18 0 019.764-.227c.05-.003.101-.003.152-.003z"})]}),(0,j.jsx)("title",{id:"logo__title",children:t})]})};var logo_MailLogo=({className:e="logo"})=>(0,j.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 132 22",className:e,"aria-labelledby":"logo__title",children:[(0,j.jsxs)("g",{children:[(0,j.jsx)("path",{d:"M4 6.926C5.231.305 11.2.5 11.2.5s5.969-.195 7.2 6.425v4.51s-.051.482-1.408 1.462c-.236.17-.537.394-.877.648-1.622 1.208-4.155 3.093-4.915 3.093-.76 0-3.293-1.885-4.915-3.093-.34-.254-.641-.478-.877-.648C4.051 11.918 4 11.435 4 11.435v-4.51zm3.113 0v2.458h8.174V6.926c-.83-3.288-4.087-3.334-4.087-3.334s-3.258.046-4.087 3.334z"}),(0,j.jsx)("path",{d:"M9.55 17.062c.725.503 1.65.593 1.65.593s.926-.091 1.65-.594c.724-.503 5.55-3.952 5.55-3.952v6.829s-.041.794-.916.794H4.916c-.875 0-.915-.794-.915-.794V13.11s4.826 3.449 5.55 3.951zM120.326 2.93c-.472 0-.881.155-1.201.475a1.612 1.612 0 00-.475 1.18c0 .46.157.861.475 1.18l.006.005c.321.303.728.448 1.195.448.479 0 .894-.143 1.217-.448l.006-.006c.318-.318.475-.718.475-1.18 0-.46-.157-.861-.475-1.18-.322-.321-.739-.474-1.223-.474zM127.533 17.721V3.537l-2.578.308v13.92c0 .84.222 1.538.704 2.053l.007.007c.497.498 1.16.733 1.954.733.62 0 1.193-.14 1.713-.424l.229-.124-.715-1.907-.285.113c-.174.07-.379.108-.62.108-.195 0-.279-.05-.318-.095-.045-.07-.091-.223-.091-.508z"}),(0,j.jsx)("path",{d:"M25.85 4.887h4.191c1.872 0 3.365.394 4.44 1.222 1.093.829 1.622 2.066 1.622 3.657 0 1.69-.55 2.993-1.689 3.852-1.112.838-2.573 1.243-4.351 1.243h-1.57v5.44H25.85V4.886zm2.642 2.19v5.571h1.485c1.158 0 1.987-.224 2.53-.629l.003-.002c.518-.377.822-1.084.822-2.23 0-1.001-.295-1.662-.826-2.06l-.003-.002c-.543-.417-1.357-.647-2.483-.647h-1.527z"}),(0,j.jsx)("path",{d:"M94.553 4.887h-3.254L90.024 20.3h2.539l.515-6.813c.124-1.565.207-3.007.249-4.327l2.885 9.463h2.361l2.751-9.489c.061 1.166.16 2.568.294 4.204l.537 6.962h2.582l-1.276-15.413h-3.278l-2.746 9.967-2.884-9.967zM61.039 5.537V8.37h2.733l-.3 2.126h-2.433v6.451c0 .559.096.908.237 1.105.137.16.384.272.817.272.378 0 .83-.129 1.363-.416l.257-.138 1.035 1.804-.226.157c-.798.552-1.704.827-2.708.827-1.02 0-1.856-.29-2.47-.905l-.005-.005c-.6-.633-.878-1.52-.878-2.615v-6.537h-1.978V8.37h1.978V5.845l2.578-.308zM43.136 8.112c-.756 0-1.427.238-1.998.714a3.837 3.837 0 00-.83.991l-.121-1.447h-2.274V20.3h2.578v-6.738c.238-1.053.559-1.791.94-2.25.37-.444.85-.665 1.469-.665.288 0 .593.039.916.12l.308.077.477-2.526-.274-.068a4.9 4.9 0 00-1.19-.138z"}),(0,j.jsx)("path",{d:"M47.439 8.913c.816-.539 1.785-.801 2.894-.801 1.665 0 2.988.558 3.929 1.699.946 1.13 1.402 2.645 1.402 4.513 0 1.21-.206 2.292-.628 3.24v.001c-.423.936-1.04 1.677-1.85 2.212l-.003.003c-.816.523-1.777.778-2.871.778-1.665 0-2.995-.559-3.95-1.698-.946-1.13-1.403-2.646-1.403-4.514 0-1.21.206-2.285.628-3.219.423-.95 1.04-1.693 1.852-2.214zm.933 2.344c-.441.65-.684 1.665-.684 3.089 0 1.416.24 2.425.68 3.073.423.626 1.054.948 1.944.948.888 0 1.52-.323 1.944-.953.438-.652.68-1.667.68-3.09 0-1.416-.24-2.426-.675-3.074-.42-.627-1.047-.947-1.928-.947-.896 0-1.533.323-1.96.954zM70.657 8.112c-1.108 0-2.078.262-2.894.8-.812.522-1.429 1.265-1.852 2.215-.421.934-.628 2.01-.628 3.219 0 1.868.457 3.384 1.403 4.514.955 1.139 2.285 1.698 3.95 1.698 1.094 0 2.056-.255 2.87-.778l.004-.003c.81-.535 1.427-1.276 1.85-2.212v-.002c.422-.947.628-2.03.628-3.239 0-1.868-.456-3.383-1.402-4.513-.94-1.14-2.264-1.7-3.929-1.7zm3.93 1.699l-.232.191.23-.192h.001zm-6.824-.898l.002-.001.162.252-.166-.25.002-.001zm.249 5.433c0-1.424.243-2.438.684-3.09.428-.63 1.065-.953 1.961-.953.881 0 1.507.32 1.928.947.435.648.675 1.658.675 3.074 0 1.424-.241 2.438-.68 3.09-.424.63-1.056.953-1.944.953-.89 0-1.52-.322-1.945-.948-.438-.648-.68-1.657-.68-3.073z"}),(0,j.jsx)("path",{d:"M81.731 8.667a4.217 4.217 0 012.127-.555c1.094 0 1.984.329 2.626 1.018.653.686.964 1.613.964 2.743V20.3H84.87v-8.147c0-.782-.15-1.252-.374-1.497-.227-.249-.58-.396-1.111-.396a2.28 2.28 0 00-1.411.456c-.405.303-.796.743-1.17 1.33V20.3h-2.578V8.37h2.27l.123 1.203c.325-.36.695-.662 1.11-.904l.002-.002z"}),(0,j.jsx)("path",{d:"M111.384 8.112c-1.247 0-2.587.267-4.017.792l-.276.101.687 2 .282-.094c1.188-.396 2.171-.587 2.958-.587.768 0 1.276.166 1.585.44.295.262.48.732.48 1.496v.539h-1.441c-1.627 0-2.932.329-3.877 1.026l-.001.001c-.946.71-1.41 1.728-1.41 3.014 0 1.087.347 1.992 1.057 2.687.714.697 1.678 1.031 2.855 1.031 1.38 0 2.489-.464 3.294-1.398.177.35.409.636.701.847.411.296.937.473 1.558.549l.245.03.619-1.887-.273-.099c-.272-.099-.453-.232-.568-.386-.106-.157-.181-.428-.181-.858v-5.182c0-1.258-.346-2.27-1.078-2.987-.736-.735-1.822-1.075-3.199-1.075zm-2.323 8.62c0-.7.231-1.18.663-1.5.448-.332 1.157-.522 2.176-.522h1.183v2.223c-.599 1.055-1.386 1.542-2.366 1.542-.593 0-.99-.158-1.245-.424-.258-.269-.411-.69-.411-1.319z"}),(0,j.jsx)("path",{d:"M119.059 8.37h2.578V20.3h-2.578V8.37z"})]}),(0,j.jsx)("title",{id:"logo__title",children:"ProtonMail"})]});var logo_VpnLogo=({className:e="logo"})=>(0,j.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 130 22",className:e,"aria-labelledby":"logo__title",children:[(0,j.jsxs)("g",{children:[(0,j.jsx)("path",{d:"M19.262 2.453c.118.286.18.592.18.9l-.014-.001a2.322 2.322 0 01-2.124 2.317l-3.575 12.105a2.314 2.314 0 01.638 2.678 2.358 2.358 0 01-3.081 1.226l-.02-.009a2.32 2.32 0 01-1.221-3.046l-6.73-8.413c-.229.081-.47.123-.714.124a2.348 2.348 0 01-2.01-1.039 2.315 2.315 0 01.637-3.211 2.363 2.363 0 013.267.612l10.238-3.268v-.074a2.354 2.354 0 014.53-.901zM11.127 17.42c.323-.164.68-.252 1.042-.257l-.002-.005h.011L15.71 5.236a3.17 3.17 0 01-.36-.329L4.887 8.214c-.037.343-.15.674-.332.968l6.571 8.238zM30.041 4.886H25.85V20.3h2.642v-5.44h1.571c1.779 0 3.239-.404 4.351-1.242 1.14-.859 1.69-2.163 1.69-3.852 0-1.591-.53-2.829-1.623-3.657-1.075-.828-2.568-1.223-4.44-1.223zm-1.549 7.762v-5.57h1.528c1.126 0 1.94.23 2.483.647l.003.002c.53.398.826 1.059.826 2.06 0 1.146-.304 1.853-.822 2.23l-.003.002c-.543.405-1.372.629-2.53.629h-1.485z"}),(0,j.jsx)("path",{d:"M91.563 4.886h-2.83L93.7 20.3h2.63l4.922-15.414h-2.699l-3.495 11.84-3.495-11.84z"}),(0,j.jsx)("path",{d:"M102.749 4.886h4.191c1.872 0 3.365.395 4.44 1.223 1.093.828 1.622 2.066 1.622 3.657 0 1.69-.549 2.993-1.689 3.852-1.112.838-2.573 1.242-4.351 1.242h-1.571v5.44h-2.642V4.886zm2.642 2.191v5.571h1.485c1.158 0 1.987-.224 2.53-.629l.002-.002c.519-.377.823-1.084.823-2.23 0-1.001-.295-1.662-.826-2.06l-.003-.002c-.543-.417-1.357-.648-2.483-.648h-1.528z"}),(0,j.jsx)("path",{d:"M118.331 4.886h-3.154l.3.652V20h1.914v-6.794c0-1.19-.029-2.2-.086-3.031a59.195 59.195 0 00-.044-.763l.343.745a69.86 69.86 0 00-.069-1.154l5.407 11.297h3.22V4.886h-2.514v8.384c0 .784.036 1.644.109 2.582l.024.32-5.45-11.286zM61.039 5.536V8.37h2.733l-.3 2.127h-2.433v6.451c0 .559.096.908.237 1.105.137.16.384.272.817.272.378 0 .83-.129 1.363-.416l.257-.138 1.035 1.804-.226.157c-.798.552-1.704.827-2.708.827-1.02 0-1.856-.29-2.47-.905l-.005-.005c-.6-.633-.878-1.52-.878-2.615v-6.537h-1.978V8.369h1.978V5.845l2.578-.309zM43.136 8.111c-.756 0-1.427.239-1.998.715a3.837 3.837 0 00-.83.991l-.121-1.448h-2.274V20.3h2.578v-6.738c.238-1.053.559-1.791.94-2.25.37-.444.85-.665 1.469-.665.288 0 .593.039.916.12l.308.077.477-2.526-.274-.069a4.9 4.9 0 00-1.19-.138z"}),(0,j.jsx)("path",{d:"M47.439 8.913c.816-.539 1.785-.802 2.894-.802 1.665 0 2.988.56 3.929 1.7.946 1.13 1.402 2.645 1.402 4.513 0 1.21-.206 2.291-.628 3.24v.001c-.423.936-1.04 1.677-1.85 2.212l-.003.002c-.816.523-1.777.779-2.871.779-1.665 0-2.995-.559-3.95-1.698-.946-1.13-1.403-2.646-1.403-4.514 0-1.21.206-2.285.628-3.22.423-.95 1.04-1.692 1.852-2.213zm.933 2.344c-.441.65-.684 1.665-.684 3.088 0 1.416.24 2.426.68 3.074.423.626 1.054.948 1.944.948.888 0 1.52-.323 1.944-.953.438-.652.68-1.667.68-3.09 0-1.416-.24-2.426-.675-3.074-.42-.627-1.047-.947-1.928-.947-.896 0-1.533.323-1.96.954zM70.657 8.111c-1.108 0-2.078.263-2.894.801-.812.522-1.429 1.265-1.852 2.215-.421.934-.628 2.01-.628 3.218 0 1.869.457 3.385 1.403 4.515.955 1.139 2.285 1.698 3.95 1.698 1.094 0 2.056-.256 2.87-.779l.004-.002c.81-.535 1.427-1.276 1.85-2.212v-.002c.422-.948.628-2.03.628-3.239 0-1.868-.456-3.384-1.402-4.513-.94-1.14-2.264-1.7-3.929-1.7zm-2.894.801h.002l.162.252-.166-.25.002-.002zm6.822.898h.001v.002l-.23.19.23-.192zm-6.573 4.535c0-1.423.243-2.437.684-3.088.428-.63 1.065-.954 1.961-.954.881 0 1.507.32 1.928.947.435.648.675 1.658.675 3.074 0 1.423-.241 2.438-.68 3.09-.424.63-1.056.953-1.944.953-.89 0-1.52-.322-1.945-.948-.438-.648-.68-1.658-.68-3.074z"}),(0,j.jsx)("path",{d:"M81.731 8.667a4.217 4.217 0 012.127-.556c1.094 0 1.984.33 2.626 1.02.653.685.964 1.612.964 2.742V20.3H84.87v-8.148c0-.781-.15-1.251-.374-1.496-.227-.25-.58-.397-1.111-.397a2.28 2.28 0 00-1.411.457c-.405.303-.796.743-1.17 1.33V20.3h-2.578V8.37h2.27l.123 1.203c.325-.36.695-.662 1.11-.904l.002-.002z"})]}),(0,j.jsx)("title",{id:"logo__title",children:"ProtonVPN"})]});const yE=["appName","className"];function Logo_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Logo_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Logo_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Logo_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const{MAIL:hE,VPN:IE}=M.pH,{PROTONACCOUNT:fE,PROTONCALENDAR:ME,PROTONCONTACTS:NE,PROTONDRIVE:xE,PROTONMAIL:vE,PROTONVPN_SETTINGS:wE}=M.ei;var logo_Logo=e=>{let{appName:t,className:n}=e,r=(0,Sn.Z)(e,yE);const[a]=hooks_useSubscription(),o=(0,ht.dh)(["logo-link flex text-no-decoration",n]),s=((e,t)=>{if(e)return hasLifetime(e)?"Lifetime":getPlanName(e,t===wE?IE:hE)})(a,t),i=t===vE?(0,j.jsx)(logo_MailLogo,{}):t===ME?(0,j.jsx)(logo_CalendarLogo,{}):t===NE?(0,j.jsx)(logo_ContactsLogo,{}):t===wE?(0,j.jsx)(logo_VpnLogo,{}):t===xE?(0,j.jsx)(logo_DriveLogo,{}):t===fE?(0,j.jsx)(logo_AccountLogo,{}):null;return(0,j.jsxs)(dw.Z,Logo_objectSpread(Logo_objectSpread({},r),{},{className:(0,ht.dh)([o,s&&"color-".concat(s),"text-no-decoration"]),children:[i,s&&(0,j.jsx)("span",{className:"plan text-uppercase text-bold",children:s})]}))};function MainLogo_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var DE,SE,OE,AE,logo_MainLogo=e=>{const{APP_NAME:t}=(0,Nn.Z)();return(0,j.jsx)(logo_Logo,function MainLogo_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MainLogo_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MainLogo_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({appName:t},e))};const CE=["sidebarId","expanded","onToggle"];function Hamburger_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hamburger_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hamburger_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hamburger_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var sidebar_Hamburger=e=>{let{sidebarId:t,expanded:n=!0,onToggle:r}=e,a=(0,Sn.Z)(e,CE);return(0,j.jsx)(Ea.Z,Hamburger_objectSpread(Hamburger_objectSpread({shape:"ghost",color:"weak",className:"hamburger ml0-5 no-desktop no-tablet","aria-expanded":!1!==n&&void 0,"aria-controls":t,onClick:r},a),{},{title:n?(0,u.c)("Action").t(DE||(DE=(0,d.Z)(["Close navigation"]))):(0,u.c)("Action").t(SE||(SE=(0,d.Z)(["Open navigation"]))),icon:!0,children:(0,j.jsx)(pr.Z,{size:24,name:n?"xmark":"bars",alt:n?(0,u.c)("Action").t(OE||(OE=(0,d.Z)(["Close navigation"]))):(0,u.c)("Action").t(AE||(AE=(0,d.Z)(["Open navigation"])))})}))};const EE=["children"];function Header_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Header_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Header_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Header_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var header_Header=e=>{let{children:t}=e,n=(0,Sn.Z)(e,EE);return(0,j.jsx)("header",Header_objectSpread(Header_objectSpread({className:"header flex flex-nowrap reset4print"},n),{},{children:t}))},LE=n(50830),PE=n(33552),ZE=n(62873);const TE=["className","children"];function DropdownMenuLink_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function DropdownMenuLink_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DropdownMenuLink_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DropdownMenuLink_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const kE=Tu.Z;var dropdown_DropdownMenuLink=e=>{let{className:t="",children:n}=e,r=(0,Sn.Z)(e,TE);return(0,j.jsx)(ZE.x,DropdownMenuLink_objectSpread(DropdownMenuLink_objectSpread({as:kE},r),{},{className:(0,ht.dh)(["dropdown-item-link w100 pr1 pl1 pt0-5 pb0-5 block text-no-decoration",t]),children:n}))};const zE=["className"];function NotificationDot_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var notificationDot_NotificationDot=e=>{let{className:t}=e,n=(0,Sn.Z)(e,zE);return(0,j.jsx)("span",function NotificationDot_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?NotificationDot_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NotificationDot_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({className:(0,ht.dh)([t,"notification-dot bg-danger rounded50"])},n))};const _E=["user","isOpen","showNotification"];function UserDropdownButton_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function UserDropdownButton_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?UserDropdownButton_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UserDropdownButton_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const UserDropdownButton=(e,t)=>{let{user:n,isOpen:r,showNotification:a}=e,o=(0,Sn.Z)(e,_E);const{Email:s,DisplayName:i,Name:c}=n,l=i||c,d=(0,br.Qm)(l||s||"");return(0,j.jsxs)("button",UserDropdownButton_objectSpread(UserDropdownButton_objectSpread({type:"button","aria-expanded":r,ref:t},o),{},{className:"max-w100 flex flex-align-items-center flex-nowrap user-dropdown-button relative",title:"".concat(l," <").concat(s,">"),children:[l?(0,j.jsxs)("span",{className:"text-right flex-item-fluid mr0-75 lh130 user-dropdown-text",children:[(0,j.jsx)("span",{className:"block text-ellipsis user-dropdown-displayName",children:l}),s?(0,j.jsx)("span",{className:"block text-ellipsis color-weak text-xs m0 lh-rg user-dropdown-email",children:s}):null]}):(0,j.jsx)("span",{className:"text-right mr0-75 lh130 user-dropdown-text",children:(0,j.jsx)("span",{className:"block text-ellipsis user-dropdown-displayName",children:s})}),(0,j.jsx)("span",{className:"mtauto mbauto text-semibold rounded bordered p0-25 inline-block user-initials relative flex flex-item-noshrink",children:(0,j.jsx)("span",{className:"mtauto mbauto center",children:d})}),a&&(0,j.jsx)(notificationDot_NotificationDot,{className:"absolute top-right notification-dot--top-right"})]}))};var RE=(0,o.forwardRef)(UserDropdownButton),GE=n(3923);function AuthenticatedBugModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var YE,UE,FE,KE,BE,WE,VE,QE,HE,XE,JE,qE,support_AuthenticatedBugModal=e=>{var t,n;const[{Name:r="",Email:a}]=(0,bn.ZP)(),[o]=(0,Dr.Z)(),[s=[]]=(0,yn.ZP)(),i=a||(null===(t=s[0])||void 0===t?void 0:t.Email)||(null==o||null===(n=o.Email)||void 0===n?void 0:n.Value);return(0,j.jsx)(GE.Z,function AuthenticatedBugModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?AuthenticatedBugModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AuthenticatedBugModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({username:r,email:i},e))};const $E=["onOpenChat"];function UserDropdown_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function UserDropdown_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?UserDropdown_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UserDropdown_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var heading_UserDropdown=e=>{let{onOpenChat:t}=e,n=(0,Sn.Z)(e,$E);const{UID:r}=(0,UN.Z)(),a=!!r,{APP_NAME:s}=(0,Nn.Z)(),[i]=(0,IO.o)(),{Name:c}=i||{},[l]=(0,bn.ZP)(),{Email:p,DisplayName:m,Name:g}=l,b=m||g,{logout:y}=(0,UN.Z)(),[h]=(0,o.useState)((0,ht.D)("dropdown")),{anchorRef:I,isOpen:f,toggle:N,close:x}=(0,No.Z)(),{createModal:v}=(0,In.Z)(),{createNotification:w}=(0,hn.Z)(),{MAIL:D,VPN:S}=M.pH,{PROTONVPN_SETTINGS:O}=M.ei,[A]=hooks_useSubscription();let C;A&&(C=hasLifetime(A)?"Lifetime":getPlanName(A,D)||getPlanName(A,S),s===O&&(C=getPlanName(A,S)));const E={[M.ei.PROTONMAIL]:"https://protonmail.uservoice.com/",[M.ei.PROTONCALENDAR]:"https://protonmail.uservoice.com/forums/932842-proton-calendar",[M.ei.PROTONDRIVE]:"https://protonmail.uservoice.com/forums/932839-proton-drive",[M.ei.PROTONVPN_SETTINGS]:"https://protonmail.uservoice.com/forums/932836-protonvpn"};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(RE,UserDropdown_objectSpread(UserDropdown_objectSpread({"data-testid":"heading:userdropdown"},n),{},{user:l,ref:I,isOpen:f,onClick:N})),(0,j.jsx)(Mo.Z,{id:h,className:"userDropdown",style:{"--min-width":"18em","--max-width":"30em"},isOpen:f,noMaxSize:!0,anchorRef:I,autoClose:!1,onClose:x,originalPlacement:"bottom-right",children:(0,j.jsxs)(dropdown_DropdownMenu,{children:[(0,j.jsxs)("div",{className:"pr1 pl1 pt0-25 pb0-25",children:[c&&s!==M.ei.PROTONVPN_SETTINGS?(0,j.jsx)("div",{className:"text-ellipsis-two-lines text-bold",title:c,"data-testid":"userdropdown:label:org-name",children:c}):null,b?(0,j.jsx)("div",{className:(0,ht.dh)(["text-ellipsis-two-lines",(!c||s===M.ei.PROTONVPN_SETTINGS)&&"text-bold"]),title:b,"data-testid":"userdropdown:label:display-name",children:b}):null,p?(0,j.jsxs)("div",{className:"flex flex-nowrap flex-justify-space-between flex-align-items-center button-show-on-hover",children:[(0,j.jsx)("span",{className:(0,ht.dh)(["text-ellipsis user-select",!b&&(!c||s===M.ei.PROTONVPN_SETTINGS)&&"text-bold",(b||c&&s!==M.ei.PROTONVPN_SETTINGS)&&"color-weak"]),title:p,"data-testid":"userdropdown:label:email",children:p}),(0,j.jsx)(Gu,{value:p,className:"mr-6p button-show-on-hover-element",onCopy:()=>{w({type:"success",text:(0,u.c)("Success").t(YE||(YE=(0,d.Z)(["Email address copied to clipboard"])))})},tooltipText:(0,u.c)("Action").t(UE||(UE=(0,d.Z)(["Copy email to clipboard"]))),size:"small",shape:"ghost","data-testid":"userdropdown:button:copy-email"})]}):null,C?(0,j.jsx)("div",{className:"pt0-25",children:(0,j.jsx)("span",{className:"badge-label-primary","data-testid":"userdropdown:label:plan-name",children:C})}):null]}),(0,j.jsx)("hr",{className:"mt0-5 mb0-5"}),s!==M.ei.PROTONVPN_SETTINGS&&(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap flex-justify-space-between flex-align-items-center",onClick:()=>{v((0,j.jsx)(onboarding_OnboardingModal,{showGenericSteps:!0,allowClose:!0,hideDisplayName:!0}))},"data-testid":"userdropdown:button:introduction",children:[(0,u.c)("Action").t(FE||(FE=(0,d.Z)([""," introduction"])),M.RS),(0,j.jsx)(pr.Z,{className:"ml1",name:"presentation-screen"})]}),(0,j.jsx)(Sc,{as:Do.Z,originalPlacement:"left-top",hasCaret:!1,dropdownStyle:{"--min-width":"15em"},title:(0,u.c)("Title").t(KE||(KE=(0,d.Z)(["Open help menu"]))),content:(0,j.jsxs)("span",{className:"flex flex-nowrap flex-justify-space-between flex-align-items-center",children:[(0,u.c)("Header").t(BE||(BE=(0,d.Z)(["Get help"]))),(0,j.jsx)("span",{className:"on-rtl-mirror ml1",children:(0,j.jsx)(pr.Z,{className:"rotateZ-270",name:"angle-down"})})]}),"data-testid":"userdropdown:button:help",children:(0,j.jsxs)(dropdown_DropdownMenu,{children:[t&&(0,j.jsx)(Do.Z,{className:"text-left flex flex-nowrap flex-justify-space-between flex-align-items-center",onClick:()=>{x(),t()},children:(0,u.c)("Action").t(WE||(WE=(0,d.Z)(["Chat with us"])))}),(0,j.jsxs)(dropdown_DropdownMenuLink,{className:"text-left flex flex-nowrap flex-justify-space-between flex-align-items-center",href:s===O?"https://protonvpn.com/support/":"https://protonmail.com/support/",target:"_blank","data-testid":"userdropdown:help:link:question",children:[(0,u.c)("Action").t(VE||(VE=(0,d.Z)(["I have a question"]))),(0,j.jsx)(pr.Z,{className:"ml1 on-rtl-mirror",name:"arrow-up-right-from-square"})]}),(0,j.jsxs)(dropdown_DropdownMenuLink,{className:"text-left flex flex-nowrap flex-justify-space-between flex-align-items-center",href:E[s]||E[M.ei.PROTONMAIL],target:"_blank","data-testid":"userdropdown:help:link:request-feature",children:[(0,u.c)("Action").t(QE||(QE=(0,d.Z)(["Request a feature"]))),(0,j.jsx)(pr.Z,{className:"ml1 on-rtl-mirror",name:"arrow-up-right-from-square"})]}),(0,j.jsx)(Do.Z,{className:"text-left",onClick:()=>{v(a?(0,j.jsx)(support_AuthenticatedBugModal,{}):(0,j.jsx)(GE.Z,{}))},"data-testid":"userdropdown:help:button:bugreport",children:(0,u.c)("Action").t(HE||(HE=(0,d.Z)(["Report a problem"])))})]})}),(0,j.jsxs)(dropdown_DropdownMenuLink,{className:"text-left flex flex-nowrap flex-justify-space-between flex-align-items-center",href:"https://shop.protonmail.com",target:"_blank","data-testid":"userdropdown:link:shop",children:[(0,u.c)("Action").t(XE||(XE=(0,d.Z)([""," shop"])),M.RS),(0,j.jsx)(pr.Z,{className:"ml1 on-rtl-mirror",name:"arrow-up-right-from-square"})]}),(0,j.jsx)("hr",{className:"mt0-5 mb0-5"}),M.VV?(0,j.jsxs)(Do.Z,{className:"flex flex-nowrap flex-justify-space-between flex-align-items-center",onClick:()=>{if(s===M.ei.PROTONACCOUNT){const e=(0,Or.fw)(M.J7.SWITCH,M.ei.PROTONACCOUNT),t=(0,fn.ku)(window.location.pathname),n=t?(0,fn.Ti)(t):void 0,r=n?"?service=".concat(n):"";return document.location.assign("".concat(e).concat(r))}return(0,LE.nT)(s,void 0,PE.c.SWITCH)},"data-testid":"userdropdown:button:switch-account",children:[(0,u.c)("Action").t(JE||(JE=(0,d.Z)(["Switch account"]))),(0,j.jsx)(pr.Z,{className:"ml1 on-rtl-mirror",name:"switch"})]}):null,(0,j.jsx)("div",{className:"pr1 pl1 pt0-25 pb0-75",children:(0,j.jsxs)(Ea.Z,{shape:"solid",color:"norm",className:"w100 flex flex-justify-center flex-align-items-center",onClick:()=>{y(),x()},"data-testid":"userdropdown:button:logout",children:[(0,j.jsx)("span",{className:"mr0-5",children:(0,u.c)("Action").t(qE||(qE=(0,d.Z)(["Sign out"])))}),(0,j.jsx)(pr.Z,{name:"arrow-right-from-rectangle",className:"on-rtl-mirror"})]})})]})})]})};const{PROTONMAIL:eL,PROTONCALENDAR:tL,PROTONDRIVE:nL}=M.ei;var rL,aL,oL,hooks_useApps=()=>[eL,tL,nL];var app_AppsDropdown=()=>{const e=hooks_useApps().map((e=>({id:e,icon:M.mN[e].icon,title:M.mN[e].bareName}))),t=M.mN[M.ei.PROTONVPN_SETTINGS].bareName;return(0,j.jsx)(Sc,{as:"button",type:"button",hasCaret:!1,content:(0,j.jsx)(pr.Z,{name:"grid-3",className:"apps-dropdown-button-icon flex-item-noshrink"}),className:"apps-dropdown-button flex-item-noshrink",dropdownClassName:"apps-dropdown",originalPlacement:"bottom-left",title:(0,u.c)("Apps dropdown").t(rL||(rL=(0,d.Z)(["Proton applications"]))),disableDefaultArrowNavigation:!0,children:(0,j.jsxs)("ul",{className:"apps-dropdown-list unstyled m1 scroll-if-needed",children:[e.map((({id:e,icon:t,title:n},r)=>(0,j.jsxs)(o.Fragment,{children:[(0,j.jsx)("li",{children:(0,j.jsxs)(dw.Z,{to:"/",toApp:e,className:"apps-dropdown-link",title:(0,u.c)("Apps dropdown").t(aL||(aL=(0,d.Z)(["Go to ",""])),n),children:[(0,j.jsx)(pr.Z,{name:t,size:28,className:"apps-dropdown-icon"}),(0,j.jsx)("div",{children:M.RS}),(0,j.jsx)("div",{className:"text-bold",children:n}),e===M.ei.PROTONDRIVE&&(0,j.jsx)("div",{className:"bg-info rounded1e text-sm m0 mt0-5",children:"BETA"})]})}),r%2!=0&&(0,j.jsx)("li",{className:"apps-dropdown-item-hr dropdown-item-hr","aria-hidden":"true"})]},e))),(0,j.jsx)("li",{children:(0,j.jsxs)(sh.Z,{path:"/",app:M.ei.PROTONVPN_SETTINGS,title:(0,u.c)("Apps dropdown").t(oL||(oL=(0,d.Z)(["Go to ",""])),t),className:"apps-dropdown-link",children:[(0,j.jsx)(pr.Z,{name:"brand-proton-vpn",size:28,className:"apps-dropdown-icon apps-dropdown-icon-vpn"}),(0,j.jsx)("div",{children:M.RS}),(0,j.jsx)("div",{className:"text-bold",children:t})]})})]})})},sL=n(48345),iL=n(6297),cL=n(43640);function _toPropertyKey(e){var t=function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function planIDs_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function planIDs_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?planIDs_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):planIDs_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const{PLUS:lL,VPNPLUS:dL,VPNBASIC:uL,VISIONARY:pL,PROFESSIONAL:mL}=M.Xf,{VPN:gL,SPACE:jL,MEMBER:bL,ADDRESS:yL,DOMAIN:hL}=M.P$,hasPlanIDs=e=>Object.values(e).some((e=>e>0)),clearPlanIDs=e=>Object.entries(e).reduce(((e,[t,n=0])=>(n<=0||(e[t]=n),e)),{}),getAddonQuantity=(e,t=0,n,r)=>{const a=(null==e?void 0:e[n])||0;if(!e)return 0;if(t<=a)return 0;if(!r)return 0;const o=r[n]||0;return Math.ceil((t-a)/o)},switchPlan=({planIDs:e,plans:t,planID:n,service:r,organization:a})=>{if(void 0===n)return((e,t,n=M.pH.MAIL)=>{const r=(0,Ne.qL)(t);return Object.entries(e).reduce(((e,[t="",a=0])=>{const{Services:o}=r[t];return(0,N.jl)(o,n)||(e[t]=a),e}),{})})(e,t,r);const o=(0,Ne.qL)(t,"Name");if(n===o[pL].ID)return{[o[pL].ID]:1};const{UsedDomains:s=0,UsedAddresses:i=0,UsedSpace:c=0,UsedVPN:l=0,UsedMembers:d=0,BonusVPN:u=0}=a||{},p=t.find((({ID:e})=>e===n)),transferDomains=(t,n)=>{const r=e[o[hL].ID]?o[t].MaxDomains-o[n].MaxDomains+e[o[hL].ID]:0;if(r<0)return 0;const a=M.tI-o[lL].MaxDomains;return r>a?a:r};if(o[lL].ID===n)return clearPlanIDs(planIDs_objectSpread(planIDs_objectSpread({},(0,Ne.CE)(e,[o[lL].ID,o[mL].ID,o[pL].ID,o[bL].ID])),{},{[o[hL].ID]:transferDomains(mL,lL)||getAddonQuantity(p,s,"MaxDomains",o[hL])||0,[o[yL].ID]:getAddonQuantity(p,i,"MaxAddresses",o[yL])||0,[o[jL].ID]:getAddonQuantity(p,c,"MaxSpace",o[jL])||0,[n]:1}));if(o[mL].ID===n){const t=getAddonQuantity(p,l,"MaxVPN",o[gL])||0;return clearPlanIDs(planIDs_objectSpread(planIDs_objectSpread(planIDs_objectSpread({},(0,Ne.CE)(e,[o[lL].ID,o[mL].ID,o[pL].ID,o[yL].ID,o[jL].ID])),{},{[o[bL].ID]:Math.max(getAddonQuantity(p,d,"MaxMembers",o[bL]),getAddonQuantity(p,i,"MaxAddresses",o[bL]),getAddonQuantity(p,c,"MaxSpace",o[bL]))||0,[o[hL].ID]:transferDomains(lL,mL)||getAddonQuantity(p,s,"MaxDomains",o[hL])||0},e[o[uL].ID]?void 0:{[o[dL].ID]:t||e[o[dL].ID]?1:0,[o[gL].ID]:t?t-o[dL].MaxVPN-u:0}),{},{[n]:1}))}return o[uL].ID===n?clearPlanIDs(planIDs_objectSpread(planIDs_objectSpread({},(0,Ne.CE)(e,[o[uL].ID,o[dL].ID,o[pL].ID,o[gL].ID])),{},{[n]:1})):o[dL].ID===n?clearPlanIDs(planIDs_objectSpread(planIDs_objectSpread({},(0,Ne.CE)(e,[o[uL].ID,o[dL].ID,o[pL].ID])),{},{[o[gL].ID]:e[o[mL].ID]?getAddonQuantity(p,l,"MaxVPN",o[gL]):0,[n]:1})):{}};function freePlans_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function freePlans_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?freePlans_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):freePlans_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const IL={ID:"free",Name:"free_mail",Title:"Free",Type:M.kR.PLAN,Currency:M.a7,Cycle:M.jX,Amount:0,MaxDomains:0,MaxAddresses:0,MaxSpace:0,MaxMembers:0,MaxVPN:1,MaxTier:0,Services:M.pH.MAIL+M.pH.VPN,Quantity:1,Features:0,Pricing:{[M.d1.MONTHLY]:0,[M.d1.YEARLY]:0,[M.d1.TWO_YEARS]:0}},fL=freePlans_objectSpread(freePlans_objectSpread({},IL),{},{Name:"free_vpn"});let ML,NL,xL,vL;!function(e){e[e.OK=0]="OK",e[e.ERROR=1]="ERROR",e[e.INVALID_ICS=2]="INVALID_ICS",e[e.CALENDAR_SOFT_DELETED=3]="CALENDAR_SOFT_DELETED",e[e.CALENDAR_NOT_FOUND=4]="CALENDAR_NOT_FOUND",e[e.USER_NOT_EXIST=5]="USER_NOT_EXIST",e[e.ICS_SIZE_EXCEED_LIMIT=6]="ICS_SIZE_EXCEED_LIMIT",e[e.SYNCHRONIZING=7]="SYNCHRONIZING",e[e.CALENDAR_MISSING_PRIMARY_KEY=8]="CALENDAR_MISSING_PRIMARY_KEY",e[e.HTTP_REQUEST_FAILED_GENERIC=20]="HTTP_REQUEST_FAILED_GENERIC",e[e.HTTP_REQUEST_FAILED_BAD_REQUEST=21]="HTTP_REQUEST_FAILED_BAD_REQUEST",e[e.HTTP_REQUEST_FAILED_UNAUTHORIZED=22]="HTTP_REQUEST_FAILED_UNAUTHORIZED",e[e.HTTP_REQUEST_FAILED_FORBIDDEN=23]="HTTP_REQUEST_FAILED_FORBIDDEN",e[e.HTTP_REQUEST_FAILED_NOT_FOUND=24]="HTTP_REQUEST_FAILED_NOT_FOUND",e[e.HTTP_REQUEST_FAILED_INTERNAL_SERVER_ERROR=25]="HTTP_REQUEST_FAILED_INTERNAL_SERVER_ERROR",e[e.PROTON_CALENDAR_NOT_FOUND=26]="PROTON_CALENDAR_NOT_FOUND",e[e.PROTON_CALENDAR_NOT_DECRYPTABLE=27]="PROTON_CALENDAR_NOT_DECRYPTABLE"}(ML||(ML={})),function(e){e[e.PERSONAL=0]="PERSONAL",e[e.SUBSCRIPTION=1]="SUBSCRIPTION"}(NL||(NL={})),function(e){e[e.HIDDEN=0]="HIDDEN",e[e.VISIBLE=1]="VISIBLE"}(xL||(xL={})),function(e){e[e.DAY=0]="DAY",e[e.WEEK=1]="WEEK",e[e.MONTH=2]="MONTH",e[e.YEAR=3]="YEAR",e[e.PLANNING=4]="PLANNING"}(vL||(vL={}));const{OK:wL,INVALID_ICS:DL,ICS_SIZE_EXCEED_LIMIT:SL,SYNCHRONIZING:OL,HTTP_REQUEST_FAILED_BAD_REQUEST:AL,HTTP_REQUEST_FAILED_UNAUTHORIZED:CL,HTTP_REQUEST_FAILED_FORBIDDEN:EL,HTTP_REQUEST_FAILED_NOT_FOUND:LL,HTTP_REQUEST_FAILED_GENERIC:PL,HTTP_REQUEST_FAILED_INTERNAL_SERVER_ERROR:ZL,PROTON_CALENDAR_NOT_FOUND:TL,PROTON_CALENDAR_NOT_DECRYPTABLE:kL}=ML,getIsPersonalCalendar=e=>e.Type===NL.PERSONAL,getPersonalCalendars=e=>e.filter(getIsPersonalCalendar);function useVPNCountriesCount_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function useVPNCountriesCount_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?useVPNCountriesCount_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):useVPNCountriesCount_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const zL={free_vpn:{count:4},[M.Xf.VPNBASIC]:{count:14},[M.Xf.VPNPLUS]:{count:15}};var hooks_useVPNCountriesCount=()=>{const e=(0,Dn.Z)(),[t,n]=(0,no.Z)(),[r,a]=(0,o.useState)(zL);return(0,o.useEffect)((()=>{n((async()=>{const{Counts:t=[]}=await e({method:"get",url:"vpn/countries/count"}),n=[[0,"free_vpn"],[1,M.Xf.VPNBASIC],[2,M.Xf.VPNPLUS]].reduce(((e,[n,r])=>{var a;const o=(null===(a=t[n])||void 0===a?void 0:a.Count)||0;return useVPNCountriesCount_objectSpread(useVPNCountriesCount_objectSpread({},e),{},{[r]:{count:o}})}),useVPNCountriesCount_objectSpread({},zL));n[M.Xf.VPNBASIC]={count:10*Math.floor(n[M.Xf.VPNBASIC].count/10)},a(n)})())}),[]),[r,t]};var hooks_usePlans=e=>{const t=(0,Dn.Z)(),n=(0,Ln.Z)(),r=(0,o.useCallback)((()=>((e,t)=>e((0,iL.Q)({Currency:t})).then((({Plans:e})=>e)))(t,e)),[t,e]);return(0,Zn.ZP)(n,"plans",r)};var _L,RL,GL,YL,UL,FL,paragraph_Paragraph=({className:e="",children:t})=>(0,j.jsx)("div",{className:(0,ht.dh)(["pt1 pb1",e]),children:t});const KL=["organization"];function LossLoyaltyModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function LossLoyaltyModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?LossLoyaltyModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LossLoyaltyModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var BL,payments_LossLoyaltyModal=e=>{let{organization:t}=e,n=(0,Sn.Z)(e,KL);const r=t.BonusSpace&&helpers_humanSize(t.BonusSpace,"GB");return(0,j.jsxs)(modal_Confirm,LossLoyaltyModal_objectSpread(LossLoyaltyModal_objectSpread({title:(0,u.c)("Title").t(_L||(_L=(0,d.Z)(["Confirm loss of Proton bonuses"]))),confirm:(0,j.jsx)(po,{type:"submit",children:(0,u.c)("Action").t(RL||(RL=(0,d.Z)(["Remove bonuses"])))})},n),{},{children:[(0,j.jsx)(paragraph_Paragraph,{children:(0,u.c)("Info").t(GL||(GL=(0,d.Z)(["Since you're a loyal user, your account has additional features enabled."])))}),(0,j.jsxs)(Cn.Z,{className:"mb1",type:"warning",children:[(0,u.c)("Info").t(YL||(YL=(0,d.Z)(["By downgrading to a Free plan, you will permanently lose these benefits, even if you upgrade again in the future."]))),(0,j.jsxs)("ul",{children:[t.BonusSpace?(0,j.jsx)("li",{children:(0,u.c)("Info").t(UL||(UL=(0,d.Z)(["+"," bonus storage"])),r)}):null,t.BonusVPN?(0,j.jsx)("li",{children:(0,u.c)("Info").ngettext((0,u.msgid)(FL||(FL=(0,d.Z)(["+"," connection for ProtonVPN (allows you to connect more devices to VPN)"])),t.BonusVPN),"+".concat(t.BonusVPN," connections for ProtonVPN (allows you to connect more devices to VPN)"),t.BonusVPN)}):null]})]})]}))},WL=n(80864);var alert_DoNotWindowOpenAlertError=()=>(0,j.jsx)(Cn.Z,{className:"mb1",type:"error",children:(0,u.c)("Error").t(BL||(BL=(0,d.Z)(["The browser you are using does not allow the payment to be fully authorized. Please use a different browser or log in via a computer."])))});function paymentTokenToParams_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function paymentTokenToParams_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?paymentTokenToParams_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):paymentTokenToParams_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const toParams=(e,t,n)=>paymentTokenToParams_objectSpread(paymentTokenToParams_objectSpread({},e),{},{type:n,Payment:{Type:M.zr.TOKEN,Details:{Token:t}}});var VL=n(64741),QL=n.n(VL),HL=n(8886),XL=n(73543),JL=n(1657),qL=n(33195),$L=n(5864);const PaymentVerificationImage_getImage=e=>({"american-express":XL,mastercard:JL,visa:qL}[e]||HL);var eP,tP,nP,rP,aP,oP,sP,iP,cP,lP,dP,uP,pP,mP,gP,jP,bP,yP,hP,IP,fP,MP,NP,xP,vP,wP,DP,SP,payments_PaymentVerificationImage=({payment:e={},type:t=M.zr.CARD})=>{if([M.zr.PAYPAL,M.zr.PAYPAL_CREDIT].includes(t))return(0,j.jsx)("img",{src:$L,alt:"PayPal"});const{Details:n={}}=e,[{type:r,niceType:a}={}]=QL()(n.Number)||[];return(0,j.jsx)("img",{src:PaymentVerificationImage_getImage(r),alt:a})};const OP=["params","token","onSubmit","payment","mode","type","onProcess","initialProcess"];function PaymentVerificationModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function PaymentVerificationModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PaymentVerificationModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PaymentVerificationModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const AP="do_not_window_open",CP="redirect",EP="redirecting",LP="redirected",PP="fail";var ZP,TP,kP,zP,_P,RP,GP,YP,payments_PaymentVerificationModal=e=>{let{params:t,token:n,onSubmit:r,payment:a={},mode:s,type:i=M.zr.CARD,onProcess:c,initialProcess:l}=e,p=(0,Sn.Z)(e,OP);const m=s===M.x6,g=[M.zr.PAYPAL,M.zr.PAYPAL_CREDIT].includes(i),b={[AP]:(0,u.c)("Title").t(eP||(eP=(0,d.Z)(["Unsupported browser"]))),[CP]:m?(0,u.c)("Title").t(tP||(tP=(0,d.Z)(["Card verification"]))):(0,u.c)("Title").t(nP||(nP=(0,d.Z)(["Payment verification"]))),[EP]:(0,u.c)("Title").t(rP||(rP=(0,d.Z)(["Processing..."]))),[LP]:m?(0,u.c)("Title").t(aP||(aP=(0,d.Z)(["Card verification in progress"]))):(0,u.c)("Title").t(oP||(oP=(0,d.Z)(["Payment verification in progress"]))),[PP]:g?(0,u.c)("Title").t(sP||(sP=(0,d.Z)(["PayPal verification failed"]))):(0,u.c)("Title").t(iP||(iP=(0,d.Z)(["3-D Secure verification failed"])))},[y,h]=(0,o.useState)((()=>(0,mr.YH)()?AP:CP)),[I,f]=(0,o.useState)({}),{createNotification:N}=(0,hn.Z)(),x=(0,o.useRef)(),v=(0,o.useRef)(),handleCancel=()=>{var e;null===(e=x.current)||void 0===e||e.abort(),p.onClose()},handleSubmit=async({abort:e,promise:a})=>{try{h(EP),v.current=window.setTimeout((()=>{h(LP)}),5e3),x.current=e,await a,r(toParams(t,n,i)),p.onClose()}catch(e){window.clearTimeout(v.current),h(PP),f(e),e.message&&!e.config&&N({text:e.message,type:"error"})}};return(0,o.useEffect)((()=>{l&&handleSubmit(l)}),[]),(0,j.jsx)(On.Z,PaymentVerificationModal_objectSpread(PaymentVerificationModal_objectSpread({title:b[y],onSubmit:()=>handleSubmit(c()),onClose:handleCancel,small:!0,hasClose:!1,footer:y===CP?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Ea.Z,{type:"reset",children:(0,u.c)("Action").t(cP||(cP=(0,d.Z)(["Cancel"])))}),(0,j.jsx)(yr.Z,{type:"submit",children:(0,u.c)("Action").t(lP||(lP=(0,d.Z)(["Verify"])))})]}):null},p),{},{children:{[CP]:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("p",{className:"text-center",children:(0,u.c)("Info").t(dP||(dP=(0,d.Z)(["Your bank requires 3-D Secure verification for security purposes."])))}),(0,j.jsx)("p",{className:"text-center",children:(0,j.jsx)(payments_PaymentVerificationImage,{payment:a,type:i})}),(0,j.jsx)(Cn.Z,{className:"mb1",children:m?(0,u.c)("Info").t(uP||(uP=(0,d.Z)(["Verification will open a new tab, please disable any popup blockers. You will not be charged. Any amount used to verify the card will be refunded immediately."]))):(0,u.c)("Info").t(pP||(pP=(0,d.Z)(["Verification will open a new tab, please disable any popup blockers."])))})]}),[EP]:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("p",{className:"text-center",children:g?(0,u.c)("Info").t(mP||(mP=(0,d.Z)(["You will soon be redirected to PayPal to verify your payment."]))):(0,u.c)("Info").t(gP||(gP=(0,d.Z)(["You will be soon redirected to your bank to verify your payment."])))}),(0,j.jsx)(Yu.Z,{}),(0,j.jsx)(Cn.Z,{className:"mb1",children:(0,u.c)("Info").t(jP||(jP=(0,d.Z)(["Verification will open a new tab, please disable any popup blockers."])))})]}),[LP]:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("p",{className:"text-center",children:m&&!g?(0,u.c)("Info").t(bP||(bP=(0,d.Z)(["Please verify the card in the new tab which was opened."]))):(0,u.c)("Info").t(yP||(yP=(0,d.Z)(["Please verify payment at the new tab which was opened."])))}),(0,j.jsx)(Yu.Z,{}),(0,j.jsx)("p",{className:"text-center",children:(0,j.jsx)(Ea.Z,{onClick:handleCancel,children:(0,u.c)("Action").t(hP||(hP=(0,d.Z)(["Cancel"])))})}),(0,j.jsx)(Cn.Z,{className:"mb1",children:m&&g?(0,u.c)("Info").t(IP||(IP=(0,d.Z)(["Verification can take a few minutes."]))):(0,u.c)("Info").t(fP||(fP=(0,d.Z)(["Payment can take a few minutes to fully verify."])))})]}),[AP]:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(alert_DoNotWindowOpenAlertError,{}),(0,j.jsx)(Ea.Z,{onClick:handleCancel,children:(0,u.c)("Action").t(MP||(MP=(0,d.Z)(["Close"])))})]}),[PP]:(0,j.jsxs)("div",{className:"text-center",children:[(0,j.jsx)("p",{children:g?(0,u.c)("Info").t(NP||(NP=(0,d.Z)(["Please try again, use a different payment method, or contact PayPal for assistance."]))):(0,u.c)("Info").t(xP||(xP=(0,d.Z)(["Please try again, use a different payment method, or call your bank for assistance."])))}),(0,j.jsx)("img",{src:WL,alt:(0,u.c)("Title").t(vP||(vP=(0,d.Z)(["Error"])))}),null!=I&&I.tryAgain?(0,j.jsx)("p",{children:(0,j.jsx)(Ea.Z,{type:"submit",children:(0,u.c)("Action").t(wP||(wP=(0,d.Z)(["Try again"])))})}):null,(0,j.jsx)("p",{children:(0,j.jsx)(yr.Z,{onClick:handleCancel,children:m?(0,u.c)("Action").t(DP||(DP=(0,d.Z)(["Use a different card"]))):(0,u.c)("Action").t(SP||(SP=(0,d.Z)(["Use a different payment method"])))})})]})}[y]}))};function paymentTokenHelper_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function paymentTokenHelper_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?paymentTokenHelper_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):paymentTokenHelper_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const{STATUS_PENDING:UP,STATUS_CHARGEABLE:FP,STATUS_FAILED:KP,STATUS_CONSUMED:BP,STATUS_NOT_SUPPORTED:WP}=M.qD,{TOKEN:VP,BITCOIN:QP,CASH:HP}=M.zr,XP=5e3,pull=async({timer:e=0,Token:t,api:n,signal:r})=>{if(r.aborted)throw new Error((0,u.c)("Error").t(ZP||(ZP=(0,d.Z)(["Process aborted"]))));if(e>15e4)throw new Error((0,u.c)("Error").t(TP||(TP=(0,d.Z)(["Payment process cancelled"]))));const{Status:a}=await n(paymentTokenHelper_objectSpread(paymentTokenHelper_objectSpread({},(0,iL.KU)(t)),{},{signal:r}));if(a===KP)throw new Error((0,u.c)("Error").t(kP||(kP=(0,d.Z)(["Payment process failed"]))));if(a===BP)throw new Error((0,u.c)("Error").t(zP||(zP=(0,d.Z)(["Payment process consumed"]))));if(a===WP)throw new Error((0,u.c)("Error").t(_P||(_P=(0,d.Z)(["Payment process not supported"]))));if(a!==FP){if(a===UP)return await(0,Wt.D)(XP),pull({Token:t,api:n,timer:e+XP,signal:r});throw new Error((0,u.c)("Error").t(RP||(RP=(0,d.Z)(["Unknown payment token status"]))))}},process=({Token:e,api:t,ApprovalURL:n,ReturnHost:r,signal:a})=>{const o=window.open(n);return new Promise(((n,s)=>{let i=!1;const reset=()=>{i=!1,window.removeEventListener("message",onMessage,!1),a.removeEventListener("abort",abort)},listenTab=async()=>{if(i){if(o&&o.closed)try{reset();const{Status:r}=await t(paymentTokenHelper_objectSpread(paymentTokenHelper_objectSpread({},(0,iL.KU)(e)),{},{signal:a}));if(r===FP)return n();throw new Error((0,u.c)("Error").t(GP||(GP=(0,d.Z)(["Tab closed"]))))}catch(e){return s(paymentTokenHelper_objectSpread(paymentTokenHelper_objectSpread({},e),{},{tryAgain:!0}))}return await(0,Wt.D)(1e3),listenTab()}},onMessage=i=>{if((0,De.Fo)(i.origin)!==r)return;reset(),null==o||o.close();const{cancel:c}=i.data;if("1"===c)return s();pull({Token:e,api:t,signal:a}).then(n).catch(s)},abort=()=>{reset(),null==o||o.close(),s(new Error((0,u.c)("Error").t(YP||(YP=(0,d.Z)(["Process aborted"])))))};a.addEventListener("abort",abort),window.addEventListener("message",onMessage,!1),i=!0,listenTab()}))},JP={Token:"",ApprovalURL:"",ReturnHost:""};var qP,$P,eZ,tZ,nZ,payments_usePayPal=({amount:e=0,currency:t="",type:n,onPay:r})=>{const a=(0,Dn.Z)(),[s,i]=(0,o.useState)(JP),[c,l]=(0,no.Z)(),[d,u]=(0,no.Z)(),{createModal:p}=(0,In.Z)(),clear=()=>i(JP);return{isReady:!!s.Token,loadingToken:d,loadingVerification:c,onToken:()=>u((async()=>{try{const r=await a((0,iL.V3)({Amount:e,Currency:t,Payment:{Type:n}}));i(r)}catch(e){throw clear(),e}})()),onVerification:()=>l((async()=>{const{Token:o,ApprovalURL:i,ReturnHost:c}=s,l=await new Promise(((r,s)=>{const onProcess=()=>{const e=new AbortController;return{promise:process({Token:o,api:a,ReturnHost:c,ApprovalURL:i,signal:e.signal}),abort:e}};p((0,j.jsx)(payments_PaymentVerificationModal,{params:{Amount:e,Currency:t},token:o,onSubmit:r,onClose:s,type:n,onProcess:onProcess,initialProcess:onProcess()}))}));r(l)})()),clear:clear}},rZ=n(98826),aZ=n.n(rZ);const check=(e,t)=>{const n=e[t];switch(t){case"fullname":if((0,we.xb)(n))return(0,u.c)("Error").t(qP||(qP=(0,d.Z)(["Name on card required"])));break;case"month":case"year":if(r=e.month,a=e.year,!aZ().expirationDate({month:r,year:a}).isValid)return(0,u.c)("Error").t($P||($P=(0,d.Z)(["Invalid expiration date"])));break;case"number":if(!(e=>aZ().number(e).isValid)(n))return(0,u.c)("Error").t(eZ||(eZ=(0,d.Z)(["Invalid card number"])));break;case"cvc":{const{number:t=""}=e||{},[{code:r={}}={}]=QL()(t)||[],{name:a="CVC",size:o=3}=r;if(!((e,t)=>aZ().cvv(e,t).isValid)(n,o))return(0,u.c)("Error").t(tZ||(tZ=(0,d.Z)(["Invalid "," code"])),a);break}case"zip":if(!(e=>aZ().postalCode(e).isValid)(n))return(0,u.c)("Error").t(nZ||(nZ=(0,d.Z)(["Invalid postal code"])))}var r,a};function countries_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function countries_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?countries_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):countries_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const oZ=[{label:"United States",value:"US"},{label:"United Kingdom",value:"GB"},{label:"Switzerland",value:"CH"},{label:"France",value:"FR"},{label:"Germany",value:"DE"},{label:"Canada",value:"CA"}],sZ={label:"------------------",value:"",disabled:!0},iZ=[{value:"AF",label:"Afghanistan"},{value:"AL",label:"Albania"},{value:"DZ",label:"Algeria"},{value:"AD",label:"Andorra"},{value:"AO",label:"Angola"},{value:"AI",label:"Anguilla"},{value:"AG",label:"Antigua and Barbuda"},{value:"AR",label:"Argentina"},{value:"AM",label:"Armenia"},{value:"AW",label:"Aruba"},{value:"AU",label:"Australia"},{value:"AT",label:"Austria"},{value:"AZ",label:"Azerbaijan"},{value:"BS",label:"Bahamas"},{value:"BH",label:"Bahrain"},{value:"BD",label:"Bangladesh"},{value:"BB",label:"Barbados"},{value:"BY",label:"Belarus"},{value:"BE",label:"Belgium"},{value:"BZ",label:"Belize"},{value:"BJ",label:"Benin"},{value:"BM",label:"Bermuda"},{value:"BT",label:"Bhutan"},{value:"BO",label:"Bolivia"},{value:"BA",label:"Bosnia Herzegovina"},{value:"BW",label:"Botswana"},{value:"BV",label:"Bouvet Island"},{value:"BR",label:"Brazil"},{value:"IO",label:"British Indian Ocean Territory"},{value:"VG",label:"British Virgin Islands"},{value:"BN",label:"Brunei Darussalam"},{value:"BG",label:"Bulgaria"},{value:"BF",label:"Burkina Faso"},{value:"BI",label:"Burundi"},{value:"KH",label:"Cambodia"},{value:"CM",label:"Cameroon"},{value:"CA",label:"Canada"},{value:"CV",label:"Cape Verde"},{value:"KY",label:"Cayman Islands"},{value:"CF",label:"Central African Republic"},{value:"TD",label:"Chad"},{value:"CL",label:"Chile"},{value:"CN",label:"China"},{value:"CX",label:"Christmas Island"},{value:"CC",label:"Cocos (Keeling) Islands"},{value:"CO",label:"Colombia"},{value:"KM",label:"Comoros"},{value:"CG",label:"Congo"},{value:"CD",label:"Congo (The Democratic Republic of the)"},{value:"CK",label:"Cook Islands"},{value:"CR",label:"Costa Rica"},{value:"CI",label:"Cote d Ivoire (Ivory Coast)"},{value:"HR",label:"Croatia"},{value:"CU",label:"Cuba"},{value:"CW",label:"Curaçao"},{value:"CY",label:"Cyprus"},{value:"CZ",label:"Czech Republic"},{value:"DK",label:"Denmark"},{value:"DJ",label:"Djibouti"},{value:"DM",label:"Dominica"},{value:"DO",label:"Dominican Republic"},{value:"TL",label:"East Timor"},{value:"EC",label:"Ecuador"},{value:"EG",label:"Egypt"},{value:"SV",label:"El Salvador"},{value:"GQ",label:"Equatorial Guinea"},{value:"ER",label:"Eritrea"},{value:"EE",label:"Estonia"},{value:"ET",label:"Ethiopia"},{value:"FK",label:"Falkland Islands (Malvinas)"},{value:"FO",label:"Faroe Islands"},{value:"FJ",label:"Fiji"},{value:"FI",label:"Finland"},{value:"FR",label:"France"},{value:"GF",label:"French Guiana"},{value:"PF",label:"French Polynesia"},{value:"TF",label:"French Southern Territories"},{value:"GA",label:"Gabon"},{value:"GM",label:"Gambia"},{value:"GE",label:"Georgia"},{value:"DE",label:"Germany"},{value:"GH",label:"Ghana"},{value:"GI",label:"Gibraltar"},{value:"GR",label:"Greece"},{value:"GL",label:"Greenland"},{value:"GD",label:"Grenada"},{value:"GP",label:"Guadeloupe"},{value:"GT",label:"Guatemala"},{value:"GN",label:"Guinea"},{value:"GW",label:"Guinea-Bissau"},{value:"GY",label:"Guyana"},{value:"HT",label:"Haiti"},{value:"HM",label:"Heard Island and McDonald Islands"},{value:"VA",label:"Holy See (Vatican City State)"},{value:"HN",label:"Honduras"},{value:"HK",label:"Hong Kong"},{value:"HU",label:"Hungary"},{value:"IS",label:"Iceland"},{value:"IN",label:"India"},{value:"ID",label:"Indonesia"},{value:"IQ",label:"Iraq"},{value:"IE",label:"Ireland"},{value:"IR",label:"Islamic Republic of Iran"},{value:"IL",label:"Israel"},{value:"IT",label:"Italy"},{value:"JM",label:"Jamaica"},{value:"JP",label:"Japan"},{value:"JO",label:"Jordan"},{value:"KZ",label:"Kazakhstan"},{value:"KE",label:"Kenya"},{value:"KI",label:"Kiribati"},{value:"KP",label:"Korea (Democratic People s Republic of)"},{value:"KR",label:"Korea (Republic of)"},{value:"KW",label:"Kuwait"},{value:"KG",label:"Kyrgzstan"},{value:"LA",label:"Lao People s Democratic Republic"},{value:"LV",label:"Latvia"},{value:"LB",label:"Lebanon"},{value:"LS",label:"Lesotho"},{value:"LR",label:"Liberia"},{value:"LY",label:"Libyan Arab Jamahiriya"},{value:"LI",label:"Liechtenstein"},{value:"LT",label:"Lithuania"},{value:"LU",label:"Luxembourg"},{value:"MO",label:"Macao"},{value:"MK",label:"Macedonia"},{value:"MG",label:"Madagascar"},{value:"MW",label:"Malawi"},{value:"MY",label:"Malaysia"},{value:"MV",label:"Maldives"},{value:"ML",label:"Mali"},{value:"MT",label:"Malta"},{value:"MH",label:"Marshall Islands"},{value:"MQ",label:"Martinique"},{value:"MR",label:"Mauritania"},{value:"MU",label:"Mauritius"},{value:"YT",label:"Mayotte"},{value:"MX",label:"Mexico"},{value:"MD",label:"Moldova"},{value:"MC",label:"Monaco"},{value:"MN",label:"Mongolia"},{value:"ME",label:"Montenegro"},{value:"MS",label:"Montserrat"},{value:"MA",label:"Morocco"},{value:"MZ",label:"Mozambique"},{value:"MM",label:"Myanmar"},{value:"NA",label:"Namibia"},{value:"NR",label:"Nauru"},{value:"NP",label:"Nepal"},{value:"NL",label:"Netherlands"},{value:"AN",label:"Netherlands Antilles"},{value:"NC",label:"New Caledonia"},{value:"NZ",label:"New Zealand"},{value:"NI",label:"Nicaragua"},{value:"NE",label:"Niger"},{value:"NG",label:"Nigeria"},{value:"NU",label:"Niue"},{value:"NF",label:"Norfolk Island"},{value:"NO",label:"Norway"},{value:"OM",label:"Oman"},{value:"PK",label:"Pakistan"},{value:"PW",label:"Palau"},{value:"PA",label:"Panama"},{value:"PG",label:"Papua New Guinea"},{value:"PY",label:"Paraguay"},{value:"PE",label:"Peru"},{value:"PH",label:"Philippines"},{value:"PN",label:"Pitcairn"},{value:"PL",label:"Poland"},{value:"PT",label:"Portugal"},{value:"QA",label:"Qatar"},{value:"RE",label:"Reunion"},{value:"RO",label:"Romania"},{value:"RU",label:"Russian Federation"},{value:"RW",label:"Rwanda"},{value:"SH",label:"Saint Helena"},{value:"KN",label:"Saint Kitts and Nevis"},{value:"LC",label:"Saint Lucia"},{value:"PM",label:"Saint Pierre and Miquelon"},{value:"VC",label:"Saint Vincent and the Grenadines"},{value:"WS",label:"Samoa"},{value:"SM",label:"San Marino"},{value:"ST",label:"Sao Tome and Principe"},{value:"SA",label:"Saudi Arabia"},{value:"SN",label:"Senegal"},{value:"RS",label:"Serbia"},{value:"SC",label:"Seychelles"},{value:"SL",label:"Sierra Leone"},{value:"SG",label:"Singapore"},{value:"SK",label:"Slovakia"},{value:"SI",label:"Slovenia"},{value:"SB",label:"Solomon Islands"},{value:"SO",label:"Somalia"},{value:"ZA",label:"South Africa"},{value:"GS",label:"South Georgia and the South Sandwich Islands"},{value:"ES",label:"Spain"},{value:"LK",label:"Sri Lanka"},{value:"SD",label:"Sudan"},{value:"SR",label:"Suriname"},{value:"SJ",label:"Svalbard and Jan Mayen"},{value:"SZ",label:"Swaziland"},{value:"SE",label:"Sweden"},{value:"CH",label:"Switzerland"},{value:"SY",label:"Syrian Arab Republic"},{value:"TW",label:"Taiwan"},{value:"TJ",label:"Tajikstan"},{value:"TZ",label:"Tanzania United Republic"},{value:"TH",label:"Thailand"},{value:"TG",label:"Togo"},{value:"TK",label:"Tokelau"},{value:"TO",label:"Tonga"},{value:"TT",label:"Trinidad and Tobago"},{value:"TN",label:"Tunisia"},{value:"TR",label:"Turkey"},{value:"TM",label:"Turkmenistan"},{value:"TC",label:"Turks and Caicos Islands"},{value:"TV",label:"Tuvalu"},{value:"UG",label:"Uganda"},{value:"UA",label:"Ukraine"},{value:"AE",label:"United Arab Emirates"},{value:"GB",label:"United Kingdom"},{value:"US",label:"United States"},{value:"UY",label:"Uruguay"},{value:"UZ",label:"Uzbekistan"},{value:"VU",label:"Vanuatu"},{value:"VE",label:"Venezuela"},{value:"VN",label:"Vietnam"},{value:"WF",label:"Wallis and Futuna"},{value:"EH",label:"Western Sahara"},{value:"YE",label:"Yemen"},{value:"ZM",label:"Zambia"},{value:"ZW",label:"Zimbabwe"}];iZ.reduce(((e,t)=>countries_objectSpread(countries_objectSpread({},e),{},{[t.value]:t.label})),{});var getDefaultCard=()=>{const{value:e}=oZ[0];return{fullname:"",number:"",month:"",year:"",cvc:"",zip:"",country:e}};function useCard_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function useCard_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?useCard_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):useCard_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var payments_useCard=(e=getDefaultCard())=>{const[t,n]=(0,o.useState)(e),r=(e=>["fullname","number","month","year","cvc","zip","country"].reduce(((t,n)=>{const r=check(e,n);return r&&(t[n]=r),t}),Object.create(null)))(t);return{card:t,setCard:(e,t)=>n((n=>useCard_objectSpread(useCard_objectSpread({},n),{},{[e]:t}))),errors:r,isValid:!Object.keys(r).length}};const formatYear=e=>{const t=2===String(e).length?"20":"";return"".concat(t).concat(e)};var payments_toDetails=({number:e,month:t,year:n,cvc:r,fullname:a,zip:o,country:s})=>{return{Name:(i=a,String(i).trim()),Number:String(e).replace(/\s+/g,""),ExpMonth:t,ExpYear:formatYear(n),CVC:r,ZIP:o,Country:s};var i};const{CARD:cZ,BITCOIN:lZ,CASH:dZ,PAYPAL:uZ,PAYPAL_CREDIT:pZ}=M.zr;var payments_usePayment=({amount:e,currency:t,onPay:n})=>{const{card:r,setCard:a,errors:s,isValid:i}=payments_useCard(),[c,l]=(0,o.useState)(),[d,u]=(0,o.useState)({}),p=c===uZ,m=payments_usePayPal({amount:e,currency:t,type:uZ,onPay:n}),g=payments_usePayPal({amount:e,currency:t,type:pZ,onPay:n});return(0,o.useEffect)((()=>{c&&([cZ,uZ,dZ,lZ].includes(c)||u({PaymentMethodID:c}),c===cZ&&u({Payment:{Type:cZ,Details:payments_toDetails(r)}}),[uZ,dZ,lZ].includes(c)&&u({}))}),[c,r]),(0,o.useEffect)((()=>{m.clear(),g.clear(),p&&e&&m.onToken().then((()=>g.onToken()))}),[p,e,t]),{paypal:m,paypalCredit:g,card:r,setCard:a,errors:s,method:c,setMethod:l,parameters:d,setParameters:u,canPay:!(e&&(!c||[lZ,dZ].includes(c)||c===cZ&&!i||c===uZ&&!(()=>{const{Payment:e}=d,{Details:t}=e||{},{Token:n=""}=t||{};return!!n})()))}};var helpers_humanPrice=(e=0,t=100)=>Number(e/t).toFixed(2).replace(".00","").replace("-","");const mZ={USD:"$",EUR:"€",CHF:"CHF"};var price_Price=({children:e=0,currency:t="",className:n="",divisor:r=100,suffix:a="",prefix:o="",isDisplayedInSentence:s=!1})=>{const i=helpers_humanPrice(e,r),[c,l]="".concat(i).split("."),d=e<0?(0,j.jsx)("span",{className:"prefix",children:"-"}):null,u=(0,j.jsxs)("span",{className:"amount",children:[(0,j.jsx)("span",{className:"integer",children:c}),l?(0,j.jsxs)("span",{className:"decimal",children:[".",l]}):null]}),p=a?(0,j.jsx)("span",{className:(0,ht.dh)(["suffix",!s&&"ml0-25"]),children:a}):null,m=o?(0,j.jsx)("span",{className:(0,ht.dh)(["prefix",s&&"mr0-25"]),children:o}):null;return"CHF"===t?(0,j.jsxs)("span",{className:(0,ht.dh)(["price flex-item-noshrink inline-flex",n]),"data-currency":t,children:[m,d,(0,j.jsx)("span",{className:"currency",children:"CHF "}),u,p]}):"EUR"===t?(0,j.jsxs)("span",{className:(0,ht.dh)(["price flex-item-noshrink inline-flex",n]),"data-currency":t,children:[m,d,u,(0,j.jsx)("span",{className:"currency",children:" €"}),p]}):(0,j.jsxs)("span",{className:(0,ht.dh)(["price flex-item-noshrink inline-flex",n]),"data-currency":t,children:[m,d,!!t&&(0,j.jsx)("span",{className:"currency",children:mZ[t]||t}),u,p]})};var gZ,jZ,bZ,yZ,hZ;const getMethod=e=>{var t,n,r;switch(e.Type){case M.zr.CARD:return"".concat(null===(t=e.Details)||void 0===t?void 0:t.Brand," - ").concat(null===(n=e.Details)||void 0===n?void 0:n.Last4);case M.zr.PAYPAL:return"PayPal - ".concat(null===(r=e.Details)||void 0===r?void 0:r.PayerID);default:return""}},getIcon=e=>{if(e.Type===M.zr.PAYPAL||e.Type===M.zr.PAYPAL_CREDIT)return"brand-paypal";if(e.Type===M.zr.CARD)switch(e.Details.Brand){case"American Express":return"brand-amex";case"Visa":return"brand-visa";case"MasterCard":return"brand-mastercard";default:return"credit-card"}return""},getPaymentMethodOptions=({amount:e,coupon:t,flow:n,paymentMethods:r=[],paymentMethodsStatus:a={}})=>{const o=e>=M.VA,s="invoice"===n,i="signup"===n,c="human-verification"===n,l=r.some((({Type:e})=>e===M.zr.PAYPAL));return[...r.filter((e=>!(e.Type!==M.zr.CARD||null==a||!a.Card)||!(e.Type!==M.zr.PAYPAL&&e.Type!==M.zr.PAYPAL_CREDIT||null==a||!a.Paypal))).map((e=>{const t=e.Type===M.zr.CARD&&(({ExpMonth:e=12,ExpYear:t=9999}={})=>{const n=new Date,r=n.getMonth()+1,a=n.getFullYear();return r>+e&&a>=+t})(e.Details);return{icon:getIcon(e),text:[getMethod(e),t&&"(".concat((0,u.c)("Info").t(gZ||(gZ=(0,d.Z)(["Expired"]))),")")].filter(Boolean).join(" "),value:e.ID,disabled:t,custom:!0}})),(null==a?void 0:a.Card)&&{icon:"credit-card",value:M.zr.CARD,text:(0,u.c)("Payment method option").t(jZ||(jZ=(0,d.Z)(["New credit/debit card"])))},(null==a?void 0:a.Paypal)&&!l&&(o||s)&&{icon:"brand-paypal",text:(0,u.c)("Payment method option").t(bZ||(bZ=(0,d.Z)(["PayPal"]))),value:M.zr.PAYPAL},(null==a?void 0:a.Bitcoin)&&!i&&!c&&t!==M.rV.COUPON_CODE&&e>=M.i_&&{icon:"brand-bitcoin",text:(0,u.c)("Payment method option").t(yZ||(yZ=(0,d.Z)(["Bitcoin"]))),value:M.zr.BITCOIN},!i&&!c&&t!==M.rV.COUPON_CODE&&{icon:"money-bills",text:(0,u.c)("Label").t(hZ||(hZ=(0,d.Z)(["Cash"]))),value:M.zr.CASH}].filter(Za.Z)};var paymentMethods_useMethods=({amount:e,coupon:t,flow:n})=>{const r=(0,Dn.Z)(),{UID:a}=(0,UN.Z)(),s=!!a,[i,c]=(0,o.useState)({paymentMethods:[],paymentMethodsStatus:{}}),[l,d]=(0,no.Z)();(0,o.useEffect)((()=>{d((async()=>{const[e,t]=await Promise.all([r((0,iL.xT)()),s?r((0,iL.CL)()).then((({PaymentMethods:e=[]})=>e)):[]]);c({paymentMethods:t,paymentMethodsStatus:e})})())}),[]);const u=getPaymentMethodOptions({amount:e,coupon:t,flow:n,paymentMethods:i.paymentMethods,paymentMethodsStatus:i.paymentMethodsStatus});return{paymentMethods:i.paymentMethods,loading:l,options:u}};const IZ=["id","children","className","name"];function Radio_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Radio_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Radio_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Radio_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var input_Radio=e=>{let{id:t,children:n,className:r="inline-flex",name:a}=e,o=(0,Sn.Z)(e,IZ);return(0,j.jsxs)("label",{htmlFor:t,className:(0,ht.dh)([!(null!=r&&r.includes("increase-click-surface"))&&"relative",r]),children:[(0,j.jsx)("input",Radio_objectSpread({id:t,type:"radio",className:"radio",name:a},o)),(0,j.jsx)("span",{className:"radio-fakeradio flex-item-noshrink"}),n]})};var paymentMethods_PaymentMethodSelector=({method:e,lastCustomMethod:t,options:n,onChange:r})=>(0,j.jsx)(j.Fragment,{children:n.map((({text:n,value:a,disabled:o,icon:s})=>(0,j.jsxs)("label",{htmlFor:a,className:(0,ht.dh)(["pt0-5 pb0-5 flex flex-nowrap flex-align-items-center",(null==t?void 0:t.value)===a&&"border-bottom"]),children:[(0,j.jsx)(input_Radio,{disabled:o,className:"mr0-5",id:a,name:"value",checked:a===e,onChange:()=>r(a)}),(0,j.jsx)(pr.Z,{className:"mr0-5",name:s}),(0,j.jsx)("span",{className:"text-cut",children:n})]},a)))});var container_Block=({children:e,className:t=""})=>(0,j.jsx)("div",{className:(0,ht.dh)(["mb1",t]),children:e});const fZ=["month","year","onChange"];function ExpInput_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const isValidMonth=e=>!e||(0,we.hj)(e)&&e.length<=2;var payments_ExpInput=e=>{let{month:t,year:n,onChange:r}=e,a=(0,Sn.Z)(e,fZ);return(0,j.jsx)(jr.Z,function ExpInput_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ExpInput_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ExpInput_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({value:"".concat(t).concat(2===t.length||n.length?"/":"").concat(n),autoComplete:"cc-exp",maxLength:5,placeholder:"MM/YY",onChange:({target:e})=>{const[a="",o=""]=e.value.split("/");if(e.value.includes("/"))return void r({month:isValidMonth(a)?a:t,year:(s=o,!s||(0,we.hj)(s)&&s.length<=4?o:n)});var s;if(a.length>2)return;if(2===t.length){const[e=""]=a;return void r({year:"",month:isValidMonth(e)?e:t})}const[i="",c=""]=a;r({year:"",month:isValidMonth("".concat(i).concat(c))?"".concat(i).concat(c):t})}},a))};const MZ=["value","onChange"];function CardNumberInput_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const NZ=n(90321),xZ=NZ.keys().reduce(((e,t)=>(e[t]=()=>NZ(t),e)),{});var vZ,wZ,DZ,SZ,OZ,AZ,CZ,EZ,LZ,PZ,ZZ,TZ,payments_CardNumberInput=e=>{let{value:t,onChange:n}=e,r=(0,Sn.Z)(e,MZ);const[a]=QL()(t),{type:o="",niceType:s="",gaps:i=[]}=a||{},c=((e="")=>{const t="./cc-".concat(e,".svg");if(xZ[t])return xZ[t]()})(o),l=i.length?((e="",t=[])=>[...e].reduce(((e,n,r)=>t.includes(r)?"".concat(e," ").concat(n):"".concat(e).concat(n)),""))(t,i):t;return(0,j.jsx)(jr.Z,function CardNumberInput_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CardNumberInput_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CardNumberInput_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({autoComplete:"cc-number",name:"cardnumber",placeholder:"0000 0000 0000 0000",maxLength:23,onChange:({target:e})=>{const t=e.value.replace(/\s/g,"");var r;(!(r=t)||(0,we.hj)(r))&&n(t)},value:l,icon:t&&c?(0,j.jsx)("img",{src:c,className:"mauto",title:s,alt:s,width:"20"}):(0,j.jsx)(pr.Z,{className:"mauto",name:"credit-card"})},r))};var kZ,payments_CreditCard=({card:e,errors:t,onChange:n,loading:r=!1})=>{const a=oZ.concat([sZ],iZ).map((({value:e,label:t})=>({value:e,text:t}))),handleChange=e=>({target:t})=>n(e,t.value);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(container_Block,{children:[(0,j.jsx)(gr.Z,{className:"mb0-5 block text-cut",htmlFor:"ccname",children:(0,u.c)("Label").t(vZ||(vZ=(0,d.Z)(["Name on card"])))}),(0,j.jsx)(jr.Z,{autoComplete:"cc-name",id:"ccname",name:"ccname",value:e.fullname,onChange:handleChange("fullname"),placeholder:"Thomas Anderson",error:t.fullname,disabled:r,required:!0})]}),(0,j.jsxs)(container_Block,{children:[(0,j.jsx)(gr.Z,{className:"mb0-5 block text-cut",htmlFor:"ccnumber",children:(0,u.c)("Label").t(wZ||(wZ=(0,d.Z)(["Card number"])))}),(0,j.jsx)(payments_CardNumberInput,{id:"ccnumber",value:e.number,onChange:e=>n("number",e),error:t.number,disabled:r,required:!0})]}),(0,j.jsxs)("div",{className:"flex flex-justify-space-between mb1 on-tiny-mobile-flex-column",children:[(0,j.jsxs)("div",{className:"flex-item-fluid mr0-5 on-tiny-mobile-mr0",children:[(0,j.jsx)(gr.Z,{className:"mb0-5 block w100",htmlFor:"exp",children:(0,u.c)("Label").t(DZ||(DZ=(0,d.Z)(["Expiry date"])))}),(0,j.jsx)(payments_ExpInput,{id:"exp",month:e.month,year:e.year,error:t.month,disabled:r,onChange:({month:e,year:t})=>{n("month",e),n("year",t)},required:!0})]}),(0,j.jsxs)("div",{className:"flex-item-fluid ml0-5 on-tiny-mobile-ml0",children:[(0,j.jsxs)(gr.Z,{className:"mb0-5 block w100 flex flex-align-items-center text-cut",htmlFor:"cvc",children:[(0,j.jsx)("span",{className:"mr0-25",children:(0,u.c)("Label").t(SZ||(SZ=(0,d.Z)(["CVV code"])))}),(0,j.jsx)(fc.Z,{title:(0,u.c)("Info").t(OZ||(OZ=(0,d.Z)(["For Visa and MasterCard, the 3 digits on the back of your card. For American Express, the 4 digits on the front of your card."])))})]}),(0,j.jsx)(jr.Z,{autoComplete:"cc-csc",id:"cvc",name:"cvc",value:e.cvc,onChange:handleChange("cvc"),placeholder:"000",error:t.cvc,disabled:r,required:!0})]})]}),(0,j.jsxs)("div",{className:"flex flex-justify-space-between mb1 on-tiny-mobile-flex-column",children:[(0,j.jsxs)("div",{className:"flex-item-fluid mr0-5 on-tiny-mobile-mr0",children:[(0,j.jsx)(gr.Z,{className:"mb0-5 block w100",htmlFor:"country",children:(0,u.c)("Label").t(AZ||(AZ=(0,d.Z)(["Country"])))}),(0,j.jsx)(Ec.Z,{id:"country",value:e.country,onChange:handleChange("country"),options:a,disabled:r,autoComplete:"country",title:(0,u.c)("Label").t(CZ||(CZ=(0,d.Z)(["Select your country"])))})]}),(0,j.jsxs)("div",{className:"flex-item-fluid ml0-5 on-tiny-mobile-ml0",children:[(0,j.jsx)(gr.Z,{className:"mb0-5 block w100",htmlFor:"postalcode",children:"US"===e.country?(0,u.c)("Label").t(EZ||(EZ=(0,d.Z)(["ZIP"]))):(0,u.c)("Label").t(LZ||(LZ=(0,d.Z)(["Postal code"])))}),(0,j.jsx)(jr.Z,{id:"postalcode",autoComplete:"postal-code",value:e.zip,onChange:handleChange("zip"),placeholder:"US"===e.country?(0,u.c)("Placeholder").t(PZ||(PZ=(0,d.Z)(["ZIP"]))):(0,u.c)("Placeholder").t(ZZ||(ZZ=(0,d.Z)(["Postal code"]))),title:(0,u.c)("Title").t(TZ||(TZ=(0,d.Z)(["ZIP / postal code"]))),error:t.zip,disabled:r,minLength:3,maxLength:9,required:!0})]})]})]})},zZ=n(16995);var payments_Cash=()=>{const{APP_NAME:e}=(0,Nn.Z)(),t=(0,j.jsx)("b",{children:e===M.ei.PROTONVPN_SETTINGS?"contact@protonvpn.com":"contact@protonmail.com"},"email-contact");return(0,j.jsxs)("div",{className:"p1 bordered bg-weak mb1",children:[(0,j.jsx)(Cn.Z,{className:"mb1",children:(0,u.c)("Info for cash payment method").jt(kZ||(kZ=(0,d.Z)(["Please contact us at "," for instructions on how to pay us with cash."])),t)}),(0,j.jsx)("div",{className:"text-center",children:(0,j.jsx)("img",{src:zZ,alt:""})})]})},_Z=n(13262),RZ=n.n(_Z);const GZ=["size","className"];function QRCode_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function QRCode_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?QRCode_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QRCode_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var YZ=(0,o.forwardRef)(((e,t)=>{let{size:n=200,className:r}=e,a=(0,Sn.Z)(e,GZ);return(0,j.jsx)(RZ(),QRCode_objectSpread(QRCode_objectSpread({className:(0,ht.dh)(["qr-code",r]),size:n,includeMargin:!1,ref:t},a),{},{renderAs:"svg"}))}));const UZ=["amount","address"];function BitcoinQRCode_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var FZ,KZ,payments_BitcoinQRCode=e=>{let{amount:t,address:n}=e,r=(0,Sn.Z)(e,UZ);const a="bitcoin:".concat(n,"?amount=").concat(t);return(0,j.jsx)(YZ,function BitcoinQRCode_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?BitcoinQRCode_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BitcoinQRCode_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({value:a},r))};var BZ,WZ,VZ,QZ,HZ,payments_BitcoinDetails=({amount:e,address:t})=>(0,j.jsxs)("figcaption",{children:[e?(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("div",{className:"flex flex-nowrap flex-align-items-center p1 border-bottom",children:[(0,j.jsx)("span",{className:"flex-item-noshrink",children:(0,u.c)("Label").t(FZ||(FZ=(0,d.Z)(["BTC amount:"])))}),(0,j.jsx)("strong",{className:"ml0-25 mr1 text-ellipsis",title:e,children:e}),(0,j.jsx)(Gu,{value:"".concat(e)})]})}):null,(0,j.jsxs)("div",{className:"flex max-w100 flex-nowrap flex-align-items-center p1 border-bottom",children:[(0,j.jsx)("span",{className:"flex-item-noshrink",children:(0,u.c)("Label").t(KZ||(KZ=(0,d.Z)(["BTC address:"])))}),(0,j.jsx)("strong",{className:"ml0-25 mr1 text-ellipsis",title:t,children:t}),(0,j.jsx)(Gu,{value:t})]})]});var XZ,JZ,payments_Bitcoin=({amount:e,currency:t,type:n})=>{const r=(0,Dn.Z)(),{APP_NAME:a}=(0,Nn.Z)(),[s,i]=(0,no.Z)(),[c,l]=(0,o.useState)(!1),[p,m]=(0,o.useState)({}),request=async()=>{l(!1);try{const{AmountBitcoin:a,Address:o}=await r("donation"===n?(0,iL.dn)(e,t):(0,iL.Jz)(e,t));m({amountBitcoin:a,address:o})}catch(e){throw l(!0),e}};if((0,o.useEffect)((()=>{e>=M.i_&&i(request())}),[e,t]),e<M.i_){const i18n=e=>(0,u.c)("Info").jt(BZ||(BZ=(0,d.Z)(["Amount below minimum (",")."])),e);return(0,j.jsx)(Cn.Z,{className:"mb1",type:"warning",children:i18n((0,j.jsx)(price_Price,{currency:t,children:M.i_}))})}return s?(0,j.jsx)(Yu.Z,{}):!c&&p.amountBitcoin&&p.address?(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("figure",{role:"group",className:"bordered bg-weak mb1",children:[(0,j.jsx)("div",{className:"p1 border-bottom",children:(0,j.jsx)(payments_BitcoinQRCode,{className:"flex flex-align-items-center flex-column",amount:p.amountBitcoin,address:p.address})}),(0,j.jsx)(payments_BitcoinDetails,{amount:p.amountBitcoin,address:p.address}),(0,j.jsx)("div",{className:"pt1 pl1 pr1",children:"invoice"===n?(0,j.jsx)(Cn.Z,{className:"mb1",children:(0,u.c)("Info").t(QZ||(QZ=(0,d.Z)(["Bitcoin transactions can take some time to be confirmed (up to 24 hours). Once confirmed, we will add credits to your account. After transaction confirmation, you can pay your invoice with the credits."])))}):(0,j.jsx)(Cn.Z,{className:"mb1",learnMore:a===M.ei.PROTONVPN_SETTINGS?"https://protonvpn.com/support/vpn-bitcoin-payments/":"https://protonmail.com/support/knowledge-base/paying-with-bitcoin",children:(0,u.c)("Info").t(HZ||(HZ=(0,d.Z)(["After making your Bitcoin payment, please follow the instructions below to upgrade."])))})})]})}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Cn.Z,{className:"mb1",type:"error",children:(0,u.c)("Error").t(WZ||(WZ=(0,d.Z)(["Error connecting to the Bitcoin API."])))}),(0,j.jsx)(Ea.Z,{onClick:()=>i(request()),children:(0,u.c)("Action").t(VZ||(VZ=(0,d.Z)(["Try again"])))})]})};const qZ=["amount","flow","children","paypal"];function PayPalButton_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function PayPalButton_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PayPalButton_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PayPalButton_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $Z,eT,tT,nT,rT,aT,oT,sT,iT,payments_PayPalButton=e=>{let{amount:t,flow:n,children:r,paypal:a}=e,s=(0,Sn.Z)(e,qZ);const[i,c]=(0,o.useState)(!1),{createNotification:l}=(0,hn.Z)();if(t<M.VA&&"invoice"!==n)return null;if(t>M.eM)return null;if((0,mr.YH)())return null;if(i){const handleRetry=()=>{a.onToken(),c(!1)};return(0,j.jsx)(Ea.Z,PayPalButton_objectSpread(PayPalButton_objectSpread({onClick:handleRetry},s),{},{children:(0,u.c)("Action").t(XZ||(XZ=(0,d.Z)(["Retry"])))}))}if(a.loadingVerification)return(0,j.jsx)(Ea.Z,PayPalButton_objectSpread(PayPalButton_objectSpread({loading:!0},s),{},{children:(0,u.c)("Action").t(JZ||(JZ=(0,d.Z)(["Loading verification"])))}));return(0,j.jsx)(Ea.Z,PayPalButton_objectSpread(PayPalButton_objectSpread({disabled:!a.isReady,onClick:async()=>{try{await a.onVerification()}catch(e){e&&e.message&&!e.config&&l({text:e.message,type:"error"}),c(!0)}},loading:a.loadingToken},s),{},{children:r}))};var payments_PayPalView=({type:e,amount:t,currency:n,paypal:r,paypalCredit:a})=>{if("payment"===e&&t<M.VA)return(0,j.jsxs)(Cn.Z,{className:"mb1",type:"error",children:[(0,u.c)("Error").t($Z||($Z=(0,d.Z)(["Amount below minimum."])))," ","(".concat((0,j.jsx)(price_Price,{currency:n,children:M.VA}),")")]});if(t>M.eM)return(0,j.jsx)(Cn.Z,{className:"mb1",type:"error",children:(0,u.c)("Error").t(eT||(eT=(0,d.Z)(["Amount above the maximum."])))});if((0,mr.YH)())return(0,j.jsx)(alert_DoNotWindowOpenAlertError,{});const o=(0,j.jsx)(payments_PayPalButton,{shape:"outline",color:"norm",flow:e,size:"small",paypal:a,amount:t,children:(0,u.c)("Link").t(tT||(tT=(0,d.Z)(["click here"])))},"click-here");return(0,j.jsxs)("div",{className:"p1 bordered bg-weak mb1",children:[r.loading?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Yu.Z,{}),(0,j.jsx)(Cn.Z,{className:"mb1",children:(0,u.c)("Info").t(nT||(nT=(0,d.Z)(["Please verify the payment in the new tab."])))})]}):null,!r.loadingVerification&&["signup","subscription","invoice","credit"].includes(e)?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Cn.Z,{className:"mb1",children:(0,u.c)("Info").t(rT||(rT=(0,d.Z)(["We will redirect you to PayPal in a new browser tab to complete this transaction. If you use any pop-up blockers, please disable them to continue."])))}),(0,j.jsxs)(Cn.Z,{className:"mb1",children:[(0,u.c)("Info").t(aT||(aT=(0,d.Z)(["You must have a credit card or bank account linked with your PayPal account. If your PayPal account doesn't have that, please click on the button below."]))),(0,j.jsx)("br",{}),o]})]}):null,r.loadingVerification||"update"!==e?null:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Cn.Z,{className:"mb1",children:(0,u.c)("Info").t(oT||(oT=(0,d.Z)(["This will enable PayPal to be used to pay for your Proton subscription. We will redirect you to PayPal in a new browser tab. If you use any pop-up blockers, please disable them to continue."])))}),(0,j.jsx)(Cn.Z,{className:"mb1",children:(0,u.c)("Info").t(sT||(sT=(0,d.Z)(["You must have a credit card or bank account linked with your PayPal account in order to add it as a payment method."])))})]}),!r.loadingVerification&&["donation","human-verification"].includes(e)?(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(Cn.Z,{className:"mb1",children:(0,u.c)("Info").t(iT||(iT=(0,d.Z)(["We will redirect you to PayPal in a new browser tab to complete this transaction. If you use any pop-up blockers, please disable them to continue."])))})}):null]})};const cT=["children","className"];function Bordered_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bordered_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bordered_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bordered_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var container_Bordered=e=>{let{children:t,className:n=""}=e,r=(0,Sn.Z)(e,cT);return(0,j.jsx)("div",Bordered_objectSpread(Bordered_objectSpread({className:(0,ht.dh)(["bordered p1 mb1",n])},r),{},{children:t}))};const lT={y:0,x:0,width:100,height:100};var dT,uT,pT,mT,hooks_useSvgGraphicsBbox=(e,t=[])=>{const[n,r]=(0,o.useState)(lT);return(0,o.useLayoutEffect)((()=>{e.current?r(e.current.getBBox()):r(lT)}),[e.current,...t]),n};const gT=n(90321),jT=gT.keys().reduce(((e,t)=>(e[t]=()=>gT(t),e)),{}),PaymentMethodDetails_getBankSvg=(e="")=>{const t="./cc-".concat(e,".svg");if(jT[t])return jT[t]()},bT={"American Express":"american-express","Diners Club":"diners-club",JCB:"jcb",Maestro:"maestro",MasterCard:"mastercard",UnionPay:"unionpay",Visa:"visa"};var yT,paymentMethods_PaymentMethodDetails=({type:e,details:t={}})=>{const{Last4:n,Name:r,ExpMonth:a,ExpYear:s,Payer:i,Brand:c=""}=t,l="•••• •••• •••• ".concat(n),p=(0,o.useRef)(),m=hooks_useSvgGraphicsBbox(p,[l]),g=Math.floor(m.width);if(e===M.zr.CARD){const e=PaymentMethodDetails_getBankSvg(bT[c]);return(0,j.jsxs)(container_Bordered,{className:"bg-weak inline-flex flex-column w100 pl2 pr2 pb2",children:[e?(0,j.jsx)("img",{width:"70",src:e,alt:c,className:"mb1"}):null,(0,j.jsx)("span",{className:"block mb1 opacity-40",children:(0,u.c)("Label").t(dT||(dT=(0,d.Z)(["Card number"])))}),(0,j.jsx)("div",{className:"ratio-container-5-1 text-center",children:(0,j.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"inner-ratio-container fill-currentColor",viewBox:"0 0 ".concat(g," 50"),xmlSpace:"preserve",children:(0,j.jsx)("text",{x:"0px",y:"40px",className:"text-40 text-strong",ref:p,children:l})})}),(0,j.jsxs)("div",{className:"flex flex-nowrap max-w100",children:[(0,j.jsxs)("div",{className:"flex-item-fluid",children:[(0,j.jsx)("span",{className:"block mb0-5 opacity-40",children:(0,u.c)("Label").t(uT||(uT=(0,d.Z)(["Card holder"])))}),(0,j.jsx)("span",{className:"text-xl mt0 mb0 inline-block text-ellipsis max-w100",children:r})]}),(0,j.jsxs)("div",{className:"text-right flex-item-noshrink pl1",children:[(0,j.jsx)("span",{className:"block mb0-5 opacity-40",children:(0,u.c)("Label").t(pT||(pT=(0,d.Z)(["Expires"])))}),(0,j.jsxs)("span",{className:"text-xl mt0 mb0",children:[a,"/",s]})]})]})]})}if(e===M.zr.PAYPAL){const e=PaymentMethodDetails_getBankSvg("paypal");return(0,j.jsxs)(container_Bordered,{className:"p2",children:[(0,j.jsx)("div",{children:(0,j.jsx)("img",{width:"70",src:e,alt:"PayPal",className:"mb1"})}),(0,j.jsxs)("div",{className:"flex flex-wrap flex-align-items-center",children:[(0,j.jsx)("label",{className:"flex-item-noshrink mr1",htmlFor:"paypal-payer",children:(0,u.c)("Label").t(mT||(mT=(0,d.Z)(["Payer"])))}),(0,j.jsx)("code",{id:"paypal-payer",className:"block text-xl mb0 mb1 text-ellipsis",title:i,children:i})]})]})}return null};var hT,IT,fT,MT,NT,xT,payments_Alert3ds=()=>(0,j.jsxs)("div",{className:"mt1-5 mb1-5",children:[(0,j.jsx)("div",{className:"mb0-5",children:(0,u.c)("Info").t(yT||(yT=(0,d.Z)(["We use 3-D Secure to protect your payments."])))}),(0,j.jsxs)("div",{className:"flex flex-nowrap flex-align-items-center",children:[(0,j.jsx)("img",{height:"44",alt:"",className:"mr1",src:qL}),(0,j.jsx)("img",{height:"44",alt:"",className:"mr1",src:JL}),(0,j.jsx)("img",{height:"44",alt:"",className:"mr1",src:XL})]})]});var vT,wT,DT,ST,OT,payments_Payment=({children:e,type:t,amount:n=0,currency:r=M.a7,coupon:a="",paypal:s,paypalCredit:i,method:c,onMethod:l,card:p,onCard:m,errors:g,noMaxWidth:b=!1})=>{const{paymentMethods:y,options:h,loading:I}=paymentMethods_useMethods({amount:n,coupon:a,flow:t}),f=[...h].reverse().find((({value:e})=>![M.zr.CARD,M.zr.PAYPAL,M.zr.CASH,M.zr.BITCOIN].includes(e)));if((0,o.useEffect)((()=>{if(I)return l(void 0);const e=h.find((({disabled:e})=>!e));e&&l(e.value)}),[I,h.length]),["donation","human-verification"].includes(t)&&n<M.ll){const e=(0,j.jsx)(price_Price,{currency:r,children:M.ll},"price");return(0,j.jsx)(Cn.Z,{className:"mb1",type:"error",children:(0,u.c)("Error").jt(hT||(hT=(0,d.Z)(["The minimum amount that can be donated is ",""])),e)})}if("credit"===t&&n<M.DW){const e=(0,j.jsx)(price_Price,{currency:r,children:M.DW},"price");return(0,j.jsx)(Cn.Z,{className:"mb1",type:"error",children:(0,u.c)("Error").jt(IT||(IT=(0,d.Z)(["The minimum amount of credit that can be added is ",""])),e)})}if(n<=0){const e=(0,j.jsx)(price_Price,{currency:r,children:0},"price");return(0,j.jsx)(Cn.Z,{className:"mb1",type:"error",children:(0,u.c)("Error").jt(fT||(fT=(0,d.Z)(["The minimum payment we accept is ",""])),e)})}if(I)return(0,j.jsx)(Yu.Z,{});const N=y.find((({ID:e})=>c===e));return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:(0,ht.dh)(["payment-container center",!1===b&&"max-w37e on-mobile-max-w100 "]),children:[(0,j.jsxs)("div",{className:"mr1 on-mobile-mr0 border-bottom pb2",children:[(0,j.jsx)("h2",{className:"text-2xl text-bold",children:(0,u.c)("Label").t(MT||(MT=(0,d.Z)(["Select a method"])))}),(0,j.jsx)(paymentMethods_PaymentMethodSelector,{options:h,method:c,onChange:e=>l(e),lastCustomMethod:f})]}),(0,j.jsxs)("div",{className:"mt2",children:[(0,j.jsx)("h2",{className:"text-2xl text-bold",children:(0,u.c)("Title").t(NT||(NT=(0,d.Z)(["Payment details"])))}),c===M.zr.CARD&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(payments_CreditCard,{card:p,errors:g,onChange:m}),(0,j.jsx)(payments_Alert3ds,{})]}),c===M.zr.CASH&&(0,j.jsx)(payments_Cash,{}),c===M.zr.BITCOIN&&(0,j.jsx)(payments_Bitcoin,{amount:n,currency:r,type:t}),c===M.zr.PAYPAL&&(0,j.jsx)(payments_PayPalView,{paypal:s,paypalCredit:i,amount:n,currency:r,type:t}),N&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(paymentMethods_PaymentMethodDetails,{type:N.Type,details:N.Details}),N.Type===M.zr.CARD?(0,j.jsx)(payments_Alert3ds,{}):null]}),e]})]}),"subscription"===t&&c&&[M.zr.CASH,M.zr.BITCOIN].includes(c)?(0,j.jsx)(Cn.Z,{className:"mb1",type:"warning",children:(0,u.c)("Warning").t(xT||(xT=(0,d.Z)(["Please note that by choosing this payment method, your account cannot be upgraded immediately. We will update your account once the payment is cleared."])))}):null]})};const getServersInWithoutPlus=(e,t)=>(0,u.c)("VPN Plan Feature").ngettext((0,u.msgid)(vT||(vT=(0,d.Z)([""," in "," country"])),e,t),"".concat(e," in ").concat(t," countries"),t),getVpnConnections=(e=0)=>(0,u.c)("VPN Plan Feature").ngettext((0,u.msgid)(DT||(DT=(0,d.Z)([""," VPN connection"])),e),"".concat(e," VPN connections"),e),getVpnServers=(e=0)=>(0,u.c)("VPN Plan Feature").ngettext((0,u.msgid)(ST||(ST=(0,d.Z)([""," server"])),e),"".concat(e,"+ servers"),e),getPlusServers=(e=1300,t=0)=>getServersInWithoutPlus(getVpnServers(e),t),getBasicServers=(e=350,t=0)=>{return n=getVpnServers(e),r=t,(0,u.c)("VPN Plan Feature").ngettext((0,u.msgid)(wT||(wT=(0,d.Z)([""," in "," country"])),n,r),"".concat(n," in ").concat(r,"+ countries"),r);var n,r},getFreeServers=(e=0,t=0)=>getServersInWithoutPlus(((e=0)=>(0,u.c)("VPN Plan Feature").ngettext((0,u.msgid)(OT||(OT=(0,d.Z)([""," server"])),e),"".concat(e," servers"),e))(e),t);var AT;const CT=["currency","onSelect","mode","loading"];function CurrencySelector_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function CurrencySelector_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CurrencySelector_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CurrencySelector_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const addSymbol=e=>"EUR"===e?"€ ".concat(e):"USD"===e?"$ ".concat(e):e;var ET,LT,PT,ZT,payments_CurrencySelector=e=>{let{currency:t=M.a7,onSelect:n,mode:r="select",loading:a}=e,o=(0,Sn.Z)(e,CT);const s=M.Mf.map((e=>({text:e,value:e})));return"buttons"===r?(0,j.jsx)(xc,CurrencySelector_objectSpread(CurrencySelector_objectSpread({},o),{},{children:s.map((({text:e,value:r})=>(0,j.jsx)(Ea.Z,{className:(0,ht.dh)([t===r&&"is-selected"]),onClick:()=>n(r),disabled:a,children:e},r)))})):"select"===r?(0,j.jsx)(Ec.Z,CurrencySelector_objectSpread({title:(0,u.c)("Title").t(AT||(AT=(0,d.Z)(["Currency"]))),value:t,options:s.map((e=>CurrencySelector_objectSpread(CurrencySelector_objectSpread({},e),{},{text:addSymbol(e.text)}))),onChange:({target:e})=>n(e.value),loading:a},o)):null};const TT=["cycle","onSelect","options"];function CycleSelector_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const{MONTHLY:kT,YEARLY:zT,TWO_YEARS:_T}=M.d1;var RT,GT,YT,UT,payments_CycleSelector=e=>{let{cycle:t=M.jX,onSelect:n,options:r=[{text:(0,u.c)("Billing cycle option").t(ET||(ET=(0,d.Z)(["Monthly"]))),value:kT},{text:(0,u.c)("Billing cycle option").t(LT||(LT=(0,d.Z)(["Annually"]))),value:zT},{text:(0,u.c)("Billing cycle option").t(PT||(PT=(0,d.Z)(["Two-year"]))),value:_T}]}=e,a=(0,Sn.Z)(e,TT);return(0,j.jsx)(Ec.Z,function CycleSelector_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CycleSelector_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CycleSelector_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({title:(0,u.c)("Title").t(ZT||(ZT=(0,d.Z)(["Billing cycle"]))),value:t,options:r,onChange:({target:e})=>n(+e.value)},a))};var subscription_PlanCard=({planName:e,price:t,info:n,action:r,onClick:a,features:o,currency:s,cycle:i,disabled:c,isCurrentPlan:l})=>{const p=(0,j.jsx)(price_Price,{currency:s,children:t},"price");return(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("div",{className:(0,ht.dh)(["bordered relative h100 plan-selection-plan p2",l&&"plan-selection-plan-current-card"]),children:[l?(0,j.jsx)("div",{className:"text-xs text-uppercase text-bold text-center absolute m0 plan-selection-plan-current",children:(0,u.c)("Title").t(RT||(RT=(0,d.Z)(["Current plan"])))}):null,(0,j.jsx)("h3",{className:"plan-selection-title text-bold text-capitalize mb0-5",id:"desc_".concat(e),children:e}),(0,j.jsx)("span",{className:"plan-selection-main-price",children:(0,j.jsx)(price_Price,{currency:s,suffix:(0,u.c)("Suffix for price").t(GT||(GT=(0,d.Z)(["/ month"]))),children:t/i})}),i===M.d1.YEARLY?(0,j.jsx)("p",{className:"text-sm mt0-5 plan-selection-price",children:(0,u.c)("Info").jt(YT||(YT=(0,d.Z)(["Billed as "," per year"])),p)}):null,i===M.d1.TWO_YEARS?(0,j.jsx)("p",{className:"text-sm mt0-5 plan-selection-price",children:(0,u.c)("Info").jt(UT||(UT=(0,d.Z)(["Billed as "," every 2 years"])),p)}):null,(0,j.jsx)("p",{className:"text-lg plan-selection-info",children:n}),(0,j.jsx)(yr.Z,{onClick:a,disabled:c,className:"w100","aria-describedby":"desc_".concat(e),children:r}),o.length?(0,j.jsx)("ul",{className:"unstyled mb0",children:o.map(((e,t)=>(0,j.jsxs)("li",{className:(0,ht.dh)(["flex flex-nowrap mb0-5",e.notIncluded&&"color-weak"]),children:[(0,j.jsx)("span",{className:"flex-item-noshrink mr1",children:e.notIncluded?"—":(0,j.jsx)(pr.Z,{name:"check",className:"color-primary"})}),(0,j.jsxs)("span",{className:"flex-item-fluid",children:[e.content," ",e.info]})]},"".concat(t))))}):null]})})};const FT=["name","label","tooltip"],KT=["name","label","tooltip"];var BT,WT;var VT,QT,HT,XT,JT,qT,$T,ek,tk,nk,rk,ak,ok,sk,ik,ck,lk,dk,uk,pk,mk,gk,jk,bk,yk,hk,Ik,fk,Mk,Nk,xk,vk,wk,Dk,Sk,subscription_Features=({appName:e,onSelect:t,planLabels:n,features:r,activeTab:a,onSetActiveTab:s})=>{const{isNarrow:i}=hooks_useActiveBreakpoint(),{icon:c,name:l}=M.mN[e],p="".concat(l," ").concat("ProtonDrive"===l?(0,u.c)("info").t(BT||(BT=(0,d.Z)(["(beta)"]))):"");return i?(0,j.jsx)(Qf.Z,{value:a,onChange:s,children:n.map((({label:e,key:n})=>({title:e,content:(0,j.jsxs)(o.Fragment,{children:[(0,j.jsx)("div",{className:"mb1",children:(0,j.jsx)(yr.Z,{onClick:()=>t(n),children:(0,u.c)("Action").t(WT||(WT=(0,d.Z)(["Select plan"])))})}),(0,j.jsxs)("table",{className:"text-cut alternate-table-bg-row-rounded w100",children:[(0,j.jsx)("thead",{children:(0,j.jsxs)("tr",{children:[(0,j.jsx)("th",{scope:"col",className:"text-left",children:(0,j.jsxs)("span",{className:"flex flex-nowrap flex-items-align-center",children:[(0,j.jsx)(pr.Z,{name:c,alt:"",size:20,className:"color-primary flex-item-noshrink"}),(0,j.jsx)("strong",{className:"ml0-5 flex-item-fluid text-ellipsis",title:p,children:p})]})}),(0,j.jsx)("th",{scope:"col",className:"text-left",children:e})]})}),(0,j.jsx)("tbody",{children:r.map((e=>{let{name:t,label:r,tooltip:a}=e,o=(0,Sn.Z)(e,FT);return(0,j.jsxs)("tr",{children:[(0,j.jsxs)("th",{scope:"row",className:"text-left",children:[r,a?(0,j.jsx)(fc.Z,{className:"ml0-5",title:a}):null]}),(0,j.jsx)("td",{children:o[n]},n)]},t)}))})]},n)]},n)})))}):(0,j.jsxs)("table",{className:"alternate-table-bg-row-rounded text-cut w100",children:[(0,j.jsx)("thead",{children:(0,j.jsxs)("tr",{children:[(0,j.jsx)("th",{scope:"col",className:"text-left",children:(0,j.jsxs)("span",{className:"flex flex-nowrap flex-items-align-center",children:[(0,j.jsx)(pr.Z,{name:c,alt:"",size:20,className:"color-primary flex-item-noshrink"}),(0,j.jsx)("strong",{className:"ml0-5 flex-item-fluid text-ellipsis",title:p,children:p})]})}),n.map((({label:e,key:t})=>(0,j.jsx)("th",{scope:"col",className:"text-left",children:e},t)))]})}),(0,j.jsx)("tbody",{children:r.map((e=>{let{name:t,label:n,tooltip:r}=e,a=(0,Sn.Z)(e,KT);const o=Object.keys(a);return(0,j.jsxs)("tr",{children:[(0,j.jsxs)("th",{scope:"row",className:"text-left",children:[n,r?(0,j.jsx)(fc.Z,{className:"ml0-5",title:r}):null]}),o.map((e=>(0,j.jsx)("td",{className:"no-border",children:a[e]},e)))]},t)}))})]})};const CheckIcon=()=>(0,j.jsx)(pr.Z,{className:"color-primary",name:"check",alt:(0,u.c)("Info").t(VT||(VT=(0,d.Z)(["Included"])))}),Ok="—";var subscription_MailFeatures=({onSelect:e,activeTab:t,onSetActiveTab:n})=>{const r=[{name:"users",label:(0,u.c)("Mail feature").t(QT||(QT=(0,d.Z)(["Users"]))),free:"1",[M.Xf.PLUS]:"1",[M.Xf.PROFESSIONAL]:"1 - 5000 *",[M.Xf.VISIONARY]:"6"},{name:"storage",label:(0,u.c)("Mail feature").t(HT||(HT=(0,d.Z)(["Storage"]))),free:(0,u.c)("Mail feature").t(XT||(XT=(0,d.Z)(["0.5 GB"]))),[M.Xf.PLUS]:(0,u.c)("Mail feature option").t(JT||(JT=(0,d.Z)(["5 GB *"]))),[M.Xf.PROFESSIONAL]:(0,u.c)("Mail feature option").t(qT||(qT=(0,d.Z)(["5 GB / user *"]))),[M.Xf.VISIONARY]:(0,u.c)("Mail feature").t($T||($T=(0,d.Z)(["20 GB"])))},{name:"addresses",label:(0,u.c)("Mail feature").t(ek||(ek=(0,d.Z)(["Addresses"]))),tooltip:(0,u.c)("Tooltip").t(tk||(tk=(0,d.Z)(["Use multiple addresses / aliases linked to your account, e.g. username2@protonmail.com"]))),free:"1",[M.Xf.PLUS]:"5",[M.Xf.PROFESSIONAL]:(0,u.c)("Mail feature option: 5 email addresses / user").t(nk||(nk=(0,d.Z)(["5 / user *"]))),[M.Xf.VISIONARY]:"50"},{name:"custom domains",label:(0,u.c)("Mail feature").t(rk||(rk=(0,d.Z)(["Custom email addresses"]))),tooltip:(0,u.c)("Tooltip").t(ak||(ak=(0,d.Z)(["Host emails for your own domain(s) at ProtonMail, e.g. john.smith@example.com"]))),free:Ok,[M.Xf.PLUS]:"1 *",[M.Xf.PROFESSIONAL]:"2 *",[M.Xf.VISIONARY]:"10"},{name:"messages per day",label:(0,u.c)("Mail feature").t(ok||(ok=(0,d.Z)(["Messages per day"]))),free:"150",[M.Xf.PLUS]:(0,u.c)("Mail feature option").t(sk||(sk=(0,d.Z)(["Unlimited **"]))),[M.Xf.PROFESSIONAL]:(0,u.c)("Mail feature option").t(ik||(ik=(0,d.Z)(["Unlimited **"]))),[M.Xf.VISIONARY]:(0,u.c)("Mail feature option").t(ck||(ck=(0,d.Z)(["Unlimited **"])))},{name:"folders / labels",label:(0,u.c)("Mail feature").t(lk||(lk=(0,d.Z)(["Folders / labels"]))),free:"3",[M.Xf.PLUS]:"200",[M.Xf.PROFESSIONAL]:(0,u.c)("Mail feature option").t(dk||(dk=(0,d.Z)(["Unlimited"]))),[M.Xf.VISIONARY]:(0,u.c)("Mail feature option").t(uk||(uk=(0,d.Z)(["Unlimited"])))},{name:"support",label:(0,u.c)("Mail feature").t(pk||(pk=(0,d.Z)(["Support"]))),free:(0,u.c)("Mail feature").t(mk||(mk=(0,d.Z)(["Limited"]))),[M.Xf.PLUS]:(0,u.c)("Mail feature").t(gk||(gk=(0,d.Z)(["Priority"]))),[M.Xf.PROFESSIONAL]:(0,u.c)("Mail feature").t(jk||(jk=(0,d.Z)(["Priority"]))),[M.Xf.VISIONARY]:(0,u.c)("Mail feature").t(bk||(bk=(0,d.Z)(["Priority"])))},{name:"encrypted contacts",label:(0,u.c)("Mail feature").t(yk||(yk=(0,d.Z)(["Encrypted contacts"]))),free:(0,j.jsx)(CheckIcon,{}),[M.Xf.PLUS]:(0,j.jsx)(CheckIcon,{}),[M.Xf.PROFESSIONAL]:(0,j.jsx)(CheckIcon,{}),[M.Xf.VISIONARY]:(0,j.jsx)(CheckIcon,{})},{name:"contact groups",label:(0,u.c)("Mail feature").t(hk||(hk=(0,d.Z)(["Contact groups"]))),free:Ok,[M.Xf.PLUS]:(0,j.jsx)(CheckIcon,{}),[M.Xf.PROFESSIONAL]:(0,j.jsx)(CheckIcon,{}),[M.Xf.VISIONARY]:(0,j.jsx)(CheckIcon,{})},{name:"address verification",label:(0,u.c)("Mail feature").t(Ik||(Ik=(0,d.Z)(["Address verification"]))),free:Ok,[M.Xf.PLUS]:(0,j.jsx)(CheckIcon,{}),[M.Xf.PROFESSIONAL]:(0,j.jsx)(CheckIcon,{}),[M.Xf.VISIONARY]:(0,j.jsx)(CheckIcon,{})},{name:"custom filters",label:(0,u.c)("Mail feature").t(fk||(fk=(0,d.Z)(["Custom filters"]))),free:Ok,[M.Xf.PLUS]:(0,j.jsx)(CheckIcon,{}),[M.Xf.PROFESSIONAL]:(0,j.jsx)(CheckIcon,{}),[M.Xf.VISIONARY]:(0,j.jsx)(CheckIcon,{})},{name:"IMAP/SMTP",label:(0,u.c)("Mail feature").t(Mk||(Mk=(0,d.Z)(["IMAP / SMTP"]))),free:Ok,[M.Xf.PLUS]:(0,j.jsx)(CheckIcon,{}),[M.Xf.PROFESSIONAL]:(0,j.jsx)(CheckIcon,{}),[M.Xf.VISIONARY]:(0,j.jsx)(CheckIcon,{})},{name:"autoresponder",label:(0,u.c)("Mail feature").t(Nk||(Nk=(0,d.Z)(["Autoresponder"]))),free:Ok,[M.Xf.PLUS]:(0,j.jsx)(CheckIcon,{}),[M.Xf.PROFESSIONAL]:(0,j.jsx)(CheckIcon,{}),[M.Xf.VISIONARY]:(0,j.jsx)(CheckIcon,{})},{name:"short domain",label:(0,u.c)("Mail feature").t(xk||(xk=(0,d.Z)(["Use @pm.me address"]))),tooltip:(0,u.c)("Tooltip").t(vk||(vk=(0,d.Z)(["Use the personal address username@pm.me to send emails"]))),free:Ok,[M.Xf.PLUS]:(0,j.jsx)(CheckIcon,{}),[M.Xf.PROFESSIONAL]:(0,j.jsx)(CheckIcon,{}),[M.Xf.VISIONARY]:(0,j.jsx)(CheckIcon,{})},{name:"catch all email",label:(0,u.c)("Mail feature").t(wk||(wk=(0,d.Z)(["Catch-All email"]))),free:Ok,[M.Xf.PLUS]:Ok,[M.Xf.PROFESSIONAL]:(0,j.jsx)(CheckIcon,{}),[M.Xf.VISIONARY]:(0,j.jsx)(CheckIcon,{})},{name:"multi user support",label:(0,u.c)("Mail feature").t(Dk||(Dk=(0,d.Z)(["Multi-user support"]))),tooltip:(0,u.c)("Tooltip").t(Sk||(Sk=(0,d.Z)(["Multi-user support is only applicable to plans with 2 or more users"]))),free:Ok,[M.Xf.PLUS]:Ok,[M.Xf.PROFESSIONAL]:(0,j.jsx)(CheckIcon,{}),[M.Xf.VISIONARY]:(0,j.jsx)(CheckIcon,{})}],a=[{label:"Free",key:"free"},{label:"Plus",key:M.Xf.PLUS},{label:"Professional",key:M.Xf.PROFESSIONAL},{label:"Visionary",key:M.Xf.VISIONARY}];return(0,j.jsx)(subscription_Features,{appName:M.ei.PROTONMAIL,onSelect:e,planLabels:a,features:r,activeTab:t,onSetActiveTab:n})};function useVPNServersCount_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function useVPNServersCount_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?useVPNServersCount_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):useVPNServersCount_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Ak={free_vpn:23,[M.Xf.VPNBASIC]:350,[M.Xf.VPNPLUS]:1200};var Ck,Ek,Lk,Pk,Zk,Tk,kk,zk,_k,Rk,Gk,Yk,Uk,Fk,Kk,Bk,Wk,Vk,Qk,Hk,Xk,Jk,qk,$k,ez,tz,nz,rz,az,oz,sz,iz,cz,lz,dz,uz,pz,mz,gz,jz,bz,yz,hz,Iz,fz,Mz,Nz,xz,vz,wz,Dz,Sz,Oz,hooks_useVPNServersCount=()=>{const e=(0,Dn.Z)(),[t,n]=(0,no.Z)(),[r,a]=(0,o.useState)(Ak);return(0,o.useEffect)((()=>{n((async()=>{const{LogicalServers:t}=await e({method:"get",url:"vpn/logicals"}),n=t.filter((e=>0===e.Tier)).length,r=t.filter((e=>1===e.Tier)).length;let o=r+n,s=t.filter((e=>2===e.Tier)).length+r+n;o=50*Math.floor(o/50),s=100*Math.floor(s/100);const i=useVPNServersCount_objectSpread(useVPNServersCount_objectSpread({},Ak),{},{free_vpn:n,[M.Xf.VPNBASIC]:o,[M.Xf.VPNPLUS]:s});a(i)})())}),[]),[r,t]};const VPNFeatures_CheckIcon=()=>(0,j.jsx)(pr.Z,{className:"color-primary",name:"check",alt:(0,u.c)("information").t(Ck||(Ck=(0,d.Z)(["Included"])))}),Az="—";var Cz,Ez,Lz,Pz,Zz,Tz,kz,zz,subscription_VPNFeatures=({onSelect:e,planNamesMap:t,activeTab:n,onSetActiveTab:r})=>{const[a]=hooks_useVPNCountriesCount(),[o]=hooks_useVPNServersCount(),s=((e,t,n)=>{const r=(0,Or.PO)(M.ei.PROTONMAIL);return[{name:"connections",label:(0,u.c)("VPN feature").t(Ek||(Ek=(0,d.Z)(["VPN Connections"]))),free:"".concat(fL.MaxVPN),[M.Xf.VPNBASIC]:"".concat(t[M.Xf.VPNBASIC].MaxVPN),[M.Xf.VPNPLUS]:"".concat(t[M.Xf.VPNPLUS].MaxVPN),[M.Xf.VISIONARY]:"".concat(t[M.Xf.VISIONARY].MaxVPN)},{name:"speed",label:(0,u.c)("VPN feature").t(Lk||(Lk=(0,d.Z)(["Speed"]))),free:(0,u.c)("VPN feature option").t(Pk||(Pk=(0,d.Z)(["Medium"]))),[M.Xf.VPNBASIC]:(0,u.c)("VPN feature option").t(Zk||(Zk=(0,d.Z)(["High"]))),[M.Xf.VPNPLUS]:(0,u.c)("VPN feature option").t(Tk||(Tk=(0,d.Z)(["Highest (up to 10 Gbps)"]))),[M.Xf.VISIONARY]:(0,u.c)("VPN feature option").t(kk||(kk=(0,d.Z)(["Highest (up to 10 Gbps)"])))},{name:"servers",label:(0,u.c)("VPN feature").t(zk||(zk=(0,d.Z)(["VPN servers"]))),free:n.free_vpn,[M.Xf.VPNBASIC]:"".concat(n[M.Xf.VPNBASIC],"+"),[M.Xf.VPNPLUS]:"".concat(n[M.Xf.VPNPLUS],"+"),[M.Xf.VISIONARY]:"".concat(n[M.Xf.VPNPLUS],"+")},{name:"countries",label:(0,u.c)("VPN feature").t(_k||(_k=(0,d.Z)(["Locations/Countries"]))),free:"".concat(e.free_vpn.count," (US, NL, JP)"),[M.Xf.VPNBASIC]:"".concat(e[M.Xf.VPNBASIC].count,"+"),[M.Xf.VPNPLUS]:e[M.Xf.VPNPLUS].count,[M.Xf.VISIONARY]:e[M.Xf.VPNPLUS].count},{name:"netshield",label:(0,u.c)("VPN feature").t(Rk||(Rk=(0,d.Z)(["Adblocker (NetShield)"]))),tooltip:(0,u.c)("Tooltip").t(Gk||(Gk=(0,d.Z)(["NetShield protects your device and speeds up your browsing by blocking ads, trackers, and malware."]))),free:Az,[M.Xf.VPNBASIC]:(0,j.jsx)(VPNFeatures_CheckIcon,{}),[M.Xf.VPNPLUS]:(0,j.jsx)(VPNFeatures_CheckIcon,{}),[M.Xf.VISIONARY]:(0,j.jsx)(VPNFeatures_CheckIcon,{})},{name:"filesharing",label:(0,u.c)("VPN feature").t(Yk||(Yk=(0,d.Z)(["P2P/BitTorrent"]))),tooltip:(0,u.c)("Tooltip").t(Uk||(Uk=(0,d.Z)(["Support for file sharing protocols such as BitTorrent."]))),free:Az,[M.Xf.VPNBASIC]:(0,j.jsx)(VPNFeatures_CheckIcon,{}),[M.Xf.VPNPLUS]:(0,j.jsx)(VPNFeatures_CheckIcon,{}),[M.Xf.VISIONARY]:(0,j.jsx)(VPNFeatures_CheckIcon,{})},{name:"streaming",label:(0,u.c)("VPN feature").t(Fk||(Fk=(0,d.Z)(["Streaming service support"]))),tooltip:(0,u.c)("Tooltip").t(Kk||(Kk=(0,d.Z)(["Access geo-blocked content (Netflix, Amazon Prime Video, BBC iPlayer, Wikipedia, Facebook, YouTube, etc) no matter where you are."]))),free:Az,[M.Xf.VPNBASIC]:Az,[M.Xf.VPNPLUS]:(0,j.jsx)(VPNFeatures_CheckIcon,{}),[M.Xf.VISIONARY]:(0,j.jsx)(VPNFeatures_CheckIcon,{})},{name:"tor",label:(0,u.c)("VPN feature").t(Bk||(Bk=(0,d.Z)(["Tor over VPN"]))),tooltip:(0,u.c)("Tooltip").t(Wk||(Wk=(0,d.Z)(["Route your Internet traffic through the Tor network with a single click."]))),free:Az,[M.Xf.VPNBASIC]:Az,[M.Xf.VPNPLUS]:(0,j.jsx)(VPNFeatures_CheckIcon,{}),[M.Xf.VISIONARY]:(0,j.jsx)(VPNFeatures_CheckIcon,{})},{name:"secure-core",label:(0,u.c)("VPN feature").t(Vk||(Vk=(0,d.Z)(["Secure Core servers"]))),tooltip:(0,u.c)("Tooltip").t(Qk||(Qk=(0,d.Z)(["Defends against threats to VPN privacy by passing your Internet traffic through multiple servers."]))),free:Az,[M.Xf.VPNBASIC]:Az,[M.Xf.VPNPLUS]:(0,j.jsx)(VPNFeatures_CheckIcon,{}),[M.Xf.VISIONARY]:(0,j.jsx)(VPNFeatures_CheckIcon,{})},{name:"visionary",label:(0,u.c)("VPN feature").t(Hk||(Hk=(0,d.Z)([""," Visionary"])),r),tooltip:(0,u.c)("Tooltip").t(Xk||(Xk=(0,d.Z)(["Get access to all the paid features for both ProtonVPN and ProtonMail (the encrypted email service that millions use to protect their data) with one plan."]))),free:Az,[M.Xf.VPNBASIC]:Az,[M.Xf.VPNPLUS]:Az,[M.Xf.VISIONARY]:(0,j.jsx)(VPNFeatures_CheckIcon,{})},{name:"juridiction",label:(0,u.c)("VPN feature").t(Jk||(Jk=(0,d.Z)(["Jurisdiction"]))),free:(0,u.c)("VPN feature option").t(qk||(qk=(0,d.Z)(["Switzerland"]))),[M.Xf.VPNBASIC]:(0,u.c)("VPN feature option").t($k||($k=(0,d.Z)(["Switzerland"]))),[M.Xf.VPNPLUS]:(0,u.c)("VPN feature option").t(ez||(ez=(0,d.Z)(["Switzerland"]))),[M.Xf.VISIONARY]:(0,u.c)("VPN feature option").t(tz||(tz=(0,d.Z)(["Switzerland"])))},{name:"audited",label:(0,u.c)("VPN feature").t(nz||(nz=(0,d.Z)(["Open Source & audited apps"]))),free:(0,j.jsx)(VPNFeatures_CheckIcon,{}),[M.Xf.VPNBASIC]:(0,j.jsx)(VPNFeatures_CheckIcon,{}),[M.Xf.VPNPLUS]:(0,j.jsx)(VPNFeatures_CheckIcon,{}),[M.Xf.VISIONARY]:(0,j.jsx)(VPNFeatures_CheckIcon,{})},{name:"access blocked content",label:(0,u.c)("VPN feature").t(rz||(rz=(0,d.Z)(["Access blocked content"]))),free:(0,j.jsx)(VPNFeatures_CheckIcon,{}),[M.Xf.VPNBASIC]:(0,j.jsx)(VPNFeatures_CheckIcon,{}),[M.Xf.VPNPLUS]:(0,j.jsx)(VPNFeatures_CheckIcon,{}),[M.Xf.VISIONARY]:(0,j.jsx)(VPNFeatures_CheckIcon,{})},{name:"no-logs",label:(0,u.c)("VPN feature").t(az||(az=(0,d.Z)(["Strict no-logs policy"]))),free:(0,j.jsx)(VPNFeatures_CheckIcon,{}),[M.Xf.VPNBASIC]:(0,j.jsx)(VPNFeatures_CheckIcon,{}),[M.Xf.VPNPLUS]:(0,j.jsx)(VPNFeatures_CheckIcon,{}),[M.Xf.VISIONARY]:(0,j.jsx)(VPNFeatures_CheckIcon,{})},{name:"bandwidth",label:(0,u.c)("VPN feature").t(oz||(oz=(0,d.Z)(["Volume/bandwidth cap"]))),free:Az,[M.Xf.VPNBASIC]:Az,[M.Xf.VPNPLUS]:Az,[M.Xf.VISIONARY]:Az},{name:"data",label:(0,u.c)("VPN feature").t(sz||(sz=(0,d.Z)(["User data monetization"]))),free:(0,u.c)("VPN feature option").t(iz||(iz=(0,d.Z)(["None"]))),[M.Xf.VPNBASIC]:(0,u.c)("VPN feature option").t(cz||(cz=(0,d.Z)(["None"]))),[M.Xf.VPNPLUS]:(0,u.c)("VPN feature option").t(lz||(lz=(0,d.Z)(["None"]))),[M.Xf.VISIONARY]:(0,u.c)("VPN feature option").t(dz||(dz=(0,d.Z)(["None"])))},{name:"platform",label:(0,u.c)("VPN feature").t(uz||(uz=(0,d.Z)(["Platforms supported"]))),free:(0,u.c)("VPN feature option").t(pz||(pz=(0,d.Z)(["Windows, macOS, iOS, Linux, Android, Android TV, Chromebook, Chromecast"]))),[M.Xf.VPNBASIC]:(0,u.c)("VPN feature option").t(mz||(mz=(0,d.Z)(["Windows, macOS, iOS, Linux, Android, Android TV, Chromebook, Chromecast"]))),[M.Xf.VPNPLUS]:(0,u.c)("VPN feature option").t(gz||(gz=(0,d.Z)(["Windows, macOS, iOS, Linux, Android, Android TV, Chromebook, Chromecast"]))),[M.Xf.VISIONARY]:(0,u.c)("VPN feature option").t(jz||(jz=(0,d.Z)(["Windows, macOS, iOS, Linux, Android, Android TV, Chromebook, Chromecast"])))},{name:"language",label:(0,u.c)("VPN feature").t(bz||(bz=(0,d.Z)(["Languages supported"]))),free:12,[M.Xf.VPNBASIC]:12,[M.Xf.VPNPLUS]:12,[M.Xf.VISIONARY]:12},{name:"DNS",label:(0,u.c)("VPN feature").t(yz||(yz=(0,d.Z)(["DNS leak prevention"]))),free:(0,j.jsx)(VPNFeatures_CheckIcon,{}),[M.Xf.VPNBASIC]:(0,j.jsx)(VPNFeatures_CheckIcon,{}),[M.Xf.VPNPLUS]:(0,j.jsx)(VPNFeatures_CheckIcon,{}),[M.Xf.VISIONARY]:(0,j.jsx)(VPNFeatures_CheckIcon,{})},{name:"kill switch",label:(0,u.c)("VPN feature").t(hz||(hz=(0,d.Z)(["Kill Switch / Always-on VPN"]))),free:(0,j.jsx)(VPNFeatures_CheckIcon,{}),[M.Xf.VPNBASIC]:(0,j.jsx)(VPNFeatures_CheckIcon,{}),[M.Xf.VPNPLUS]:(0,j.jsx)(VPNFeatures_CheckIcon,{}),[M.Xf.VISIONARY]:(0,j.jsx)(VPNFeatures_CheckIcon,{})},{name:"PFS",label:(0,u.c)("VPN feature").t(Iz||(Iz=(0,d.Z)(["Perfect Forward Secrecy (PFS)"]))),free:(0,j.jsx)(VPNFeatures_CheckIcon,{}),[M.Xf.VPNBASIC]:(0,j.jsx)(VPNFeatures_CheckIcon,{}),[M.Xf.VPNPLUS]:(0,j.jsx)(VPNFeatures_CheckIcon,{}),[M.Xf.VISIONARY]:(0,j.jsx)(VPNFeatures_CheckIcon,{})},{name:"encryption",label:(0,u.c)("VPN feature").t(fz||(fz=(0,d.Z)(["Full Disk Encryption on Servers"]))),free:(0,j.jsx)(VPNFeatures_CheckIcon,{}),[M.Xf.VPNBASIC]:(0,j.jsx)(VPNFeatures_CheckIcon,{}),[M.Xf.VPNPLUS]:(0,j.jsx)(VPNFeatures_CheckIcon,{}),[M.Xf.VISIONARY]:(0,j.jsx)(VPNFeatures_CheckIcon,{})},{name:"split tunneling",label:(0,u.c)("VPN feature").t(Mz||(Mz=(0,d.Z)(["Split tunneling"]))),free:(0,j.jsxs)("span",{className:"inline-flex flex-nowrap",children:[(0,j.jsx)("span",{className:"flex-item-noshrink mr0-5",children:(0,j.jsx)(VPNFeatures_CheckIcon,{})}),(0,j.jsx)("span",{children:(0,u.c)("VPN feature option").t(Nz||(Nz=(0,d.Z)(["(Android & Windows only)"])))})]}),[M.Xf.VPNBASIC]:(0,j.jsxs)("span",{className:"inline-flex flex-nowrap",children:[(0,j.jsx)("span",{className:"flex-item-noshrink mr0-5",children:(0,j.jsx)(VPNFeatures_CheckIcon,{})}),(0,j.jsx)("span",{children:(0,u.c)("VPN feature option").t(xz||(xz=(0,d.Z)(["(Android & Windows only)"])))})]}),[M.Xf.VPNPLUS]:(0,j.jsxs)("span",{className:"inline-flex flex-nowrap",children:[(0,j.jsx)("span",{className:"flex-item-noshrink mr0-5",children:(0,j.jsx)(VPNFeatures_CheckIcon,{})}),(0,j.jsx)("span",{children:(0,u.c)("VPN feature option").t(vz||(vz=(0,d.Z)(["(Android & Windows only)"])))})]}),[M.Xf.VISIONARY]:(0,j.jsxs)("span",{className:"inline-flex flex-nowrap",children:[(0,j.jsx)("span",{className:"flex-item-noshrink mr0-5",children:(0,j.jsx)(VPNFeatures_CheckIcon,{})}),(0,j.jsx)("span",{children:(0,u.c)("VPN feature option").t(wz||(wz=(0,d.Z)(["(Android & Windows only)"])))})]})},{name:"profiles",label:(0,u.c)("VPN feature").t(Dz||(Dz=(0,d.Z)(["Custom connection profiles"]))),free:(0,j.jsx)(VPNFeatures_CheckIcon,{}),[M.Xf.VPNBASIC]:(0,j.jsx)(VPNFeatures_CheckIcon,{}),[M.Xf.VPNPLUS]:(0,j.jsx)(VPNFeatures_CheckIcon,{}),[M.Xf.VISIONARY]:(0,j.jsx)(VPNFeatures_CheckIcon,{})},{name:"router",label:(0,u.c)("VPN feature").t(Sz||(Sz=(0,d.Z)(["Router support"]))),free:(0,j.jsx)(VPNFeatures_CheckIcon,{}),[M.Xf.VPNBASIC]:(0,j.jsx)(VPNFeatures_CheckIcon,{}),[M.Xf.VPNPLUS]:(0,j.jsx)(VPNFeatures_CheckIcon,{}),[M.Xf.VISIONARY]:(0,j.jsx)(VPNFeatures_CheckIcon,{})},{name:"money-back",label:(0,u.c)("VPN feature").t(Oz||(Oz=(0,d.Z)(["30-days money-back guarantee"]))),free:"N/A",[M.Xf.VPNBASIC]:(0,j.jsx)(VPNFeatures_CheckIcon,{}),[M.Xf.VPNPLUS]:(0,j.jsx)(VPNFeatures_CheckIcon,{}),[M.Xf.VISIONARY]:(0,j.jsx)(VPNFeatures_CheckIcon,{})}]})(a,t,o),i=[{label:"Free",key:"free"},{label:"Basic",key:M.Xf.VPNBASIC},{label:"Plus",key:M.Xf.VPNPLUS},{label:"Visionary",key:M.Xf.VISIONARY}];return(0,j.jsx)(subscription_Features,{appName:M.ei.PROTONVPN_SETTINGS,onSelect:e,planLabels:i,features:s,activeTab:n,onSetActiveTab:r})};const CalendarFeatures_CheckIcon=()=>(0,j.jsx)(pr.Z,{className:"color-primary",name:"check",alt:(0,u.c)("Info").t(Cz||(Cz=(0,d.Z)(["Included"])))});var _z,Rz,Gz,Yz,subscription_CalendarFeatures=({onSelect:e,activeTab:t,onSetActiveTab:n})=>{const r=[{name:"multi",label:(0,u.c)("Calendar feature").t(Ez||(Ez=(0,d.Z)(["Multiple calendars"]))),free:"1",[M.Xf.PLUS]:"20",[M.Xf.PROFESSIONAL]:(0,u.c)("Calendar feature option").t(Lz||(Lz=(0,d.Z)(["20 / user *"]))),[M.Xf.VISIONARY]:(0,u.c)("Calendar feature option").t(Pz||(Pz=(0,d.Z)(["20 / user"])))},{name:"import",label:(0,u.c)("Calendar feature").t(Zz||(Zz=(0,d.Z)(["Calendar import"]))),free:(0,j.jsx)(CalendarFeatures_CheckIcon,{}),[M.Xf.PLUS]:(0,j.jsx)(CalendarFeatures_CheckIcon,{}),[M.Xf.PROFESSIONAL]:(0,j.jsx)(CalendarFeatures_CheckIcon,{}),[M.Xf.VISIONARY]:(0,j.jsx)(CalendarFeatures_CheckIcon,{})},{name:"recurringEvents",label:(0,u.c)("Calendar feature").t(Tz||(Tz=(0,d.Z)(["Recurring events"]))),free:(0,j.jsx)(CalendarFeatures_CheckIcon,{}),[M.Xf.PLUS]:(0,j.jsx)(CalendarFeatures_CheckIcon,{}),[M.Xf.PROFESSIONAL]:(0,j.jsx)(CalendarFeatures_CheckIcon,{}),[M.Xf.VISIONARY]:(0,j.jsx)(CalendarFeatures_CheckIcon,{})},{name:"invitation",label:(0,u.c)("Calendar feature").t(kz||(kz=(0,d.Z)(["Invitations"]))),free:(0,j.jsx)(CalendarFeatures_CheckIcon,{}),[M.Xf.PLUS]:(0,j.jsx)(CalendarFeatures_CheckIcon,{}),[M.Xf.PROFESSIONAL]:(0,j.jsx)(CalendarFeatures_CheckIcon,{}),[M.Xf.VISIONARY]:(0,j.jsx)(CalendarFeatures_CheckIcon,{})},{name:"share",label:(0,u.c)("Calendar feature").t(zz||(zz=(0,d.Z)(["Share Calendar via link"]))),free:"—",[M.Xf.PLUS]:(0,j.jsx)(CalendarFeatures_CheckIcon,{}),[M.Xf.PROFESSIONAL]:(0,j.jsx)(CalendarFeatures_CheckIcon,{}),[M.Xf.VISIONARY]:(0,j.jsx)(CalendarFeatures_CheckIcon,{})}],a=[{label:"Free",key:"free"},{label:"Plus",key:M.Xf.PLUS},{label:"Professional",key:M.Xf.PROFESSIONAL},{label:"Visionary",key:M.Xf.VISIONARY}];return(0,j.jsx)(subscription_Features,{appName:M.ei.PROTONCALENDAR,onSelect:e,planLabels:a,features:r,activeTab:t,onSetActiveTab:n})};const DriveFeatures_CheckIcon=()=>(0,j.jsx)(pr.Z,{className:"color-primary",name:"check",alt:(0,u.c)("Info").t(_z||(_z=(0,d.Z)(["Included"])))});var Uz,Fz,Kz,Bz,subscription_DriveFeatures=({onSelect:e,activeTab:t,onSetActiveTab:n})=>{const r=[{name:"webaccess",label:(0,u.c)("Drive feature").t(Rz||(Rz=(0,d.Z)(["Access via Web"]))),free:"—",[M.Xf.PLUS]:(0,j.jsx)(DriveFeatures_CheckIcon,{}),[M.Xf.PROFESSIONAL]:(0,j.jsx)(DriveFeatures_CheckIcon,{}),[M.Xf.VISIONARY]:(0,j.jsx)(DriveFeatures_CheckIcon,{})},{name:"uploadDownloadFiles",label:(0,u.c)("Drive feature").t(Gz||(Gz=(0,d.Z)(["Upload / download files"]))),free:"—",[M.Xf.PLUS]:(0,j.jsx)(DriveFeatures_CheckIcon,{}),[M.Xf.PROFESSIONAL]:(0,j.jsx)(DriveFeatures_CheckIcon,{}),[M.Xf.VISIONARY]:(0,j.jsx)(DriveFeatures_CheckIcon,{})},{name:"shareFiles",label:(0,u.c)("Drive feature").t(Yz||(Yz=(0,d.Z)(["Share files via link"]))),free:"—",[M.Xf.PLUS]:(0,j.jsx)(DriveFeatures_CheckIcon,{}),[M.Xf.PROFESSIONAL]:(0,j.jsx)(DriveFeatures_CheckIcon,{}),[M.Xf.VISIONARY]:(0,j.jsx)(DriveFeatures_CheckIcon,{})}],a=[{label:"Free",key:"free"},{label:"Plus",key:M.Xf.PLUS},{label:"Professional",key:M.Xf.PROFESSIONAL},{label:"Visionary",key:M.Xf.VISIONARY}];return(0,j.jsx)(subscription_Features,{appName:M.ei.PROTONDRIVE,onSelect:e,planLabels:a,features:r,activeTab:t,onSetActiveTab:n})};var Wz,Vz,Qz,Hz,Xz,Jz,qz,$z,e_,t_,n_,r_,a_,o_,s_,i_,c_,l_,d_,u_,p_,m_,g_,j_,b_,y_,h_,I_,f_,M_,N_,x_,v_,w_,D_,S_,O_,A_,C_,E_,L_,P_,Z_,T_,k_,z_,__,R_,G_,Y_,U_,F_,K_,B_,subscription_PlanSelectionComparison=({service:e,onChangePlanIDs:t,plans:n,planNamesMap:r,organization:a,planIDs:s})=>{const i=(0,o.useRef)(null),handleSelect=r=>{const o=n.find((({Name:e})=>e===r));t(switchPlan({planIDs:s,plans:n,planID:null==o?void 0:o.ID,service:e,organization:a}))},[c,l]=(0,o.useState)(0);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("p",{className:"text-sm",children:(0,u.c)("Info").t(Uz||(Uz=(0,d.Z)(["* Customizable features"])))}),(0,j.jsxs)(Ea.Z,{color:"norm",shape:"ghost",className:"flex flex-align-items-center center mb1",onClick:()=>{var e;null===(e=i.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},children:[(0,j.jsx)("span",{className:"mr0-5",children:(0,u.c)("Action").t(Fz||(Fz=(0,d.Z)(["Compare all features"])))}),(0,j.jsx)(pr.Z,{name:"arrow-down",className:"align-sub"})]}),(0,j.jsxs)("div",{ref:i,children:[e===M.pH.MAIL?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(subscription_MailFeatures,{onSelect:handleSelect,activeTab:c,onSetActiveTab:l}),(0,j.jsx)(subscription_CalendarFeatures,{onSelect:handleSelect,activeTab:c,onSetActiveTab:l}),(0,j.jsx)(subscription_DriveFeatures,{onSelect:handleSelect,activeTab:c,onSetActiveTab:l}),(0,j.jsxs)("p",{className:"text-sm mt1 mb0-5 color-weak",children:["* ",(0,u.c)("Info concerning plan features").t(Kz||(Kz=(0,d.Z)(["Customizable features"])))]}),(0,j.jsxs)("p",{className:"text-sm mt0 mb1 color-weak",children:["**"," ",(0,u.c)("Info concerning plan features").t(Bz||(Bz=(0,d.Z)(["ProtonMail cannot be used for mass emailing or spamming. Legitimate emails are unlimited."])))]})]}):null,e===M.pH.VPN?(0,j.jsx)(subscription_VPNFeatures,{planNamesMap:r,onSelect:handleSelect,activeTab:c,onSetActiveTab:l}):null]})]})};function PlanSelection_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function PlanSelection_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PlanSelection_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PlanSelection_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const W_={free_mail:"Free",free_vpn:"Free",[M.Xf.VPNBASIC]:"Basic",[M.Xf.VPNPLUS]:"Plus",[M.Xf.PLUS]:"Plus",[M.Xf.PROFESSIONAL]:"Professional",[M.Xf.VISIONARY]:"Visionary"},V_=(0,Or.PO)(M.ei.PROTONMAIL),Q_=(0,Or.PO)(M.ei.PROTONDRIVE),H_=(0,Or.PO)(M.ei.PROTONVPN_SETTINGS),getPlanFeatures=(e,t,n,r)=>{const a=(0,j.jsx)("b",{children:(0,u.c)("Netflix").t(e_||(e_=(0,d.Z)(["Netflix"])))},1),o=(0,j.jsx)("b",{children:(0,u.c)("Disney").t(t_||(t_=(0,d.Z)(["Disney+"])))},2),s=(0,j.jsx)("b",{children:(0,u.c)("Prime Video").t(n_||(n_=(0,d.Z)(["Prime Video"])))},3),i=(0,j.jsx)("b",{children:(0,u.c)("Many Others").t(r_||(r_=(0,d.Z)(["and many others"])))},4),c=n.free_vpn.count,l=n[M.Xf.VPNBASIC].count,p=n[M.Xf.VPNPLUS].count,{Name:m}=e,g=m,b={content:(0,u.c)("Plan feature").t(a_||(a_=(0,d.Z)(["Built-in Adblocker (NetShield)"]))),info:(0,j.jsx)(fc.Z,{title:(0,u.c)("Tooltip").t(o_||(o_=(0,d.Z)(["NetShield protects your device and speeds up your browsing by blocking ads, trackers, and malware."]))),url:" https://protonvpn.com/support/netshield/"})},y={content:(0,u.c)("Plan feature").t(s_||(s_=(0,d.Z)(["Secure Core servers"]))),info:(0,j.jsx)(fc.Z,{title:(0,u.c)("Tooltip").t(i_||(i_=(0,d.Z)(["Defends against threats to VPN privacy by passing your Internet traffic through multiple servers."]))),url:"https://protonvpn.com/support/secure-core-vpn/"})},h={content:(0,u.c)("Plan feature").t(c_||(c_=(0,d.Z)(["Streaming service support"]))),info:(0,j.jsx)(fc.Z,{title:(0,u.c)("Info").jt(l_||(l_=(0,d.Z)(["Access your streaming services, like ",", ",", ",", ",", no matter where you are."])),a,o,s,i),url:"https://protonvpn.com/support/streaming-guide/"})},I={content:(0,u.c)("Plan feature").t(d_||(d_=(0,d.Z)(["Access blocked content"]))),info:(0,j.jsx)(fc.Z,{title:(0,u.c)("Info").jt(u_||(u_=(0,d.Z)(["Access blocked content, like social media, news, Wikipedia, YouTube, and many others, no matter where you are."])))})},f={content:getVpnConnections(e.MaxVPN)};if("free_vpn"===g)return[{content:getFreeServers(r.free_vpn,c)},f,{content:(0,u.c)("Plan feature").t(p_||(p_=(0,d.Z)(["Medium speed"])))},I];if(g===M.Xf.VPNBASIC)return[{content:getBasicServers(r[M.Xf.VPNBASIC],l)},f,{content:(0,u.c)("Plan feature").t(m_||(m_=(0,d.Z)(["High speed"])))},I,b];if(g===M.Xf.VPNPLUS)return[{content:getPlusServers(r[M.Xf.VPNPLUS],p)},f,{content:(0,u.c)("Plan feature").t(g_||(g_=(0,d.Z)(["Highest speed (up to 10 Gbps)"])))},h,b,y];if(g===M.Xf.VISIONARY&&t===M.pH.VPN)return[{content:(0,u.c)("Plan feature").t(j_||(j_=(0,d.Z)(["All "," plan features"])),M.Bh[M.Xf.VPNPLUS])},{content:(0,u.c)("Plan feature").t(b_||(b_=(0,d.Z)(["Includes 6 user accounts"])))},{content:(0,u.c)("Plan feature").t(y_||(y_=(0,d.Z)(["Includes Proton Visionary"]))),info:(0,j.jsx)(fc.Z,{title:(0,u.c)("Tooltip").t(h_||(h_=(0,d.Z)(["Get access to all the paid features for both "," and "," (the encrypted email service that millions use to protect their data) with one plan."])),H_,V_),url:"https://protonmail.com"})},{content:(0,u.c)("Plan feature").t(I_||(I_=(0,d.Z)(["Early access to new products"])))}];const N={content:(0,u.c)("Plan feature").t(f_||(f_=(0,d.Z)(["Custom email addresses"]))),info:(0,j.jsx)(fc.Z,{title:(0,u.c)("Tooltip").t(M_||(M_=(0,d.Z)(["Host emails for your own domain(s) at ",", e.g. john.smith@example.com"])),V_)})},x={content:(0,u.c)("Plan feature").t(N_||(N_=(0,d.Z)(["Access to "," (beta)"])),Q_)};if("free_mail"===g)return[{content:(0,u.c)("Plan feature").t(x_||(x_=(0,d.Z)(["1 user"])))},{content:(0,u.c)("Plan feature").t(v_||(v_=(0,d.Z)(["0.5 GB storage"])))},{content:(0,u.c)("Plan feature").t(w_||(w_=(0,d.Z)(["1 address"])))},{content:(0,u.c)("Plan feature").t(D_||(D_=(0,d.Z)(["3 folders / labels"])))},PlanSelection_objectSpread(PlanSelection_objectSpread({},N),{},{notIncluded:!0}),PlanSelection_objectSpread(PlanSelection_objectSpread({},x),{},{notIncluded:!0})];const v=(0,j.jsx)(fc.Z,{title:(0,u.c)("Tooltip").t(S_||(S_=(0,d.Z)(["Create multiple email addresses linked to your account, e.g. username2@protonmail.com"])))});return g===M.Xf.PLUS?[{content:(0,u.c)("Plan feature").t(O_||(O_=(0,d.Z)(["1 user"])))},{content:(0,u.c)("Plan feature").t(A_||(A_=(0,d.Z)(["5 GB storage *"])))},{content:(0,u.c)("Plan feature").t(C_||(C_=(0,d.Z)(["5 addresses"]))),info:v},{content:(0,u.c)("Plan feature").t(E_||(E_=(0,d.Z)(["200 folders / labels"])))},N,x]:g===M.Xf.PROFESSIONAL?[{content:(0,u.c)("Plan feature").t(L_||(L_=(0,d.Z)(["1 - 5000 users *"])))},{content:(0,u.c)("Plan feature").t(P_||(P_=(0,d.Z)(["5 GB storage / user"])))},{content:(0,u.c)("Plan feature").t(Z_||(Z_=(0,d.Z)(["5 addresses / user"]))),info:v},{content:(0,u.c)("Plan feature").t(T_||(T_=(0,d.Z)(["Unlimited folders / labels"])))},N,x]:g===M.Xf.VISIONARY&&t===M.pH.MAIL?[{content:(0,u.c)("Plan feature").t(k_||(k_=(0,d.Z)(["6 users"])))},{content:(0,u.c)("Plan feature").t(z_||(z_=(0,d.Z)(["20 GB storage"])))},{content:(0,u.c)("Plan feature").t(__||(__=(0,d.Z)(["50 addresses"]))),info:v},{content:(0,u.c)("Plan feature").t(R_||(R_=(0,d.Z)(["Unlimited folders / labels"])))},N,x]:[]};var subscription_PlanSelection=({mode:e,hasFreePlan:t=!0,hasPlanSelectionComparison:n=!0,planIDs:r,plans:a,cycle:o,currency:s,service:i,loading:c,organization:l,subscription:p,vpnCountries:m,onChangePlanIDs:g,onChangeCycle:b,onChangeCurrency:y})=>{const h=p?getPlan(p,i):null,I=i===M.pH.VPN,f=(0,Ne.qL)(a,"Name"),[N]=hooks_useVPNServersCount(),x=[t&&IL,f[M.Xf.PLUS],f[M.Xf.PROFESSIONAL],f[M.Xf.VISIONARY]].filter(Za.Z),v=[t&&fL,f[M.Xf.VPNBASIC],f[M.Xf.VPNPLUS],f[M.Xf.VISIONARY]].filter(Za.Z),w=I?v:x,D=(S=I,{free_mail:(0,u.c)("Info").t(Wz||(Wz=(0,d.Z)(["For getting started with private and secure emailing."]))),free_vpn:(0,u.c)("Info").t(Vz||(Vz=(0,d.Z)(["A free and uncensored Internet should be available to all."]))),[M.Xf.VPNBASIC]:(0,u.c)("Info").t(Qz||(Qz=(0,d.Z)(["Starter VPN service with P2P support."]))),[M.Xf.VPNPLUS]:(0,u.c)("Info").t(Hz||(Hz=(0,d.Z)(["Full-featured VPN with speed up to 10 Gbps."]))),[M.Xf.PLUS]:(0,u.c)("Info").t(Xz||(Xz=(0,d.Z)(["For individuals that need a fully-featured mailbox with advanced protection."]))),[M.Xf.PROFESSIONAL]:(0,u.c)("Info").t(Jz||(Jz=(0,d.Z)(["For professionals that need secure business communications."]))),[M.Xf.VISIONARY]:S?(0,u.c)("Info").t(qz||(qz=(0,d.Z)(["VPN + "," bundle for families and small businesses."])),V_):(0,u.c)("Info").t($z||($z=(0,d.Z)(["For families and small teams; includes both Mail and VPN."])))});var S;const O=(0,j.jsx)("strong",{children:(0,u.c)("Info").t(G_||(G_=(0,d.Z)(["Save 20%"])))},"save"),A="signup"===e;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"mb2 pb2 flex flex-nowrap on-mobile-flex-column",children:[(0,j.jsx)("div",{className:"flex-item-fluid no-tablet no-mobile mr2"}),(0,j.jsx)("div",{className:"flex-item-fluid flex-item-grow-2 text-center on-tablet-text-left on-mobile-mb2 on-mobile-text-center",children:o===M.d1.MONTHLY?(0,j.jsx)(Ea.Z,{shape:"solid",color:"success",disabled:c,size:"medium",onClick:()=>b(M.d1.YEARLY),children:(0,u.c)("Action").jt(Y_||(Y_=(0,d.Z)([""," by switching to annual billing"])),O)}):null}),(0,j.jsxs)("div",{className:"flex-item-fluid ml2 on-mobile-ml0 flex flex-nowrap cycle-currency-selectors",children:[(0,j.jsx)("div",{className:"flex-item-fluid flex flex-item-grow-2",children:(0,j.jsx)(payments_CycleSelector,{cycle:o,onSelect:b,disabled:c,options:[{text:(0,u.c)("Billing cycle option").t(U_||(U_=(0,d.Z)(["Monthly"]))),value:M.d1.MONTHLY},{text:(0,u.c)("Billing cycle option").t(F_||(F_=(0,d.Z)(["Annually SAVE 20%"]))),value:M.d1.YEARLY},{text:(0,u.c)("Billing cycle option").t(K_||(K_=(0,d.Z)(["Two years SAVE 33%"]))),value:M.d1.TWO_YEARS}]})}),(0,j.jsx)("div",{className:"flex-item-fluid flex ml1",children:(0,j.jsx)(payments_CurrencySelector,{currency:s,onSelect:y,disabled:c})})]})]}),(0,j.jsx)("div",{className:"plan-selection mt1",style:{"--plan-selection-number":w.length},children:w.map((e=>{const t=e.ID===IL.ID||e.ID===fL.ID,n=t?!h:(null==h?void 0:h.ID)===e.ID;return(0,j.jsx)(subscription_PlanCard,{isCurrentPlan:!A&&n,action:(0,u.c)("Action").t(B_||(B_=(0,d.Z)(["Select plan"]))),planName:W_[e.Name],currency:s,disabled:c,cycle:o,price:e.Pricing[o],info:D[e.Name],features:getPlanFeatures(e,i,m,N),onClick:()=>{g(switchPlan({planIDs:r,plans:a,planID:t?void 0:e.ID,service:i,organization:l}))}},e.ID)}))}),n&&(0,j.jsx)(subscription_PlanSelectionComparison,{service:i,onChangePlanIDs:g,plans:a,planNamesMap:f,planIDs:r})]})};let X_;!function(e){e[e.NETWORK_ERROR=0]="NETWORK_ERROR",e[e.PLAN_SELECTION=1]="PLAN_SELECTION",e[e.CUSTOMIZATION=2]="CUSTOMIZATION",e[e.CHECKOUT=3]="CHECKOUT",e[e.UPGRADE=4]="UPGRADE",e[e.THANKS=5]="THANKS"}(X_||(X_={}));var J_=n(25861);const q_=["className"];function StyledPayPalButton_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function StyledPayPalButton_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?StyledPayPalButton_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):StyledPayPalButton_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $_,eR,tR,nR,payments_StyledPayPalButton=e=>{let{className:t}=e,n=(0,Sn.Z)(e,q_);const r=(0,ht.dh)(["paypal-button",t]);return(0,j.jsx)(payments_PayPalButton,StyledPayPalButton_objectSpread(StyledPayPalButton_objectSpread({},n),{},{className:r,color:"norm",children:(0,j.jsx)("img",{src:J_,alt:"PayPal",width:"50"})}))};var rR,aR,oR,subscription_SubscriptionSubmitButton=({className:e,paypal:t,canPay:n,step:r,loading:a,method:o,checkResult:s,disabled:i,onClose:c})=>r===X_.CUSTOMIZATION?(0,j.jsx)(yr.Z,{className:e,disabled:i,loading:a,type:"submit",children:(0,u.c)("Action").t($_||($_=(0,d.Z)(["Continue"])))}):0===(null==s?void 0:s.AmountDue)?(0,j.jsx)(yr.Z,{className:e,loading:a,disabled:i||!n,type:"submit",children:(0,u.c)("Action").t(eR||(eR=(0,d.Z)(["Confirm"])))}):o===M.zr.PAYPAL?(0,j.jsx)(payments_StyledPayPalButton,{flow:"subscription",paypal:t,className:e,amount:(null==s?void 0:s.AmountDue)||0}):!a&&o&&[M.zr.CASH,M.zr.BITCOIN].includes(o)?(0,j.jsx)(yr.Z,{className:e,disabled:i,loading:a,onClick:c,children:(0,u.c)("Action").t(tR||(tR=(0,d.Z)(["Done"])))}):(0,j.jsx)(yr.Z,{className:e,loading:a,disabled:i||!n,type:"submit",children:(0,u.c)("Action").t(nR||(nR=(0,d.Z)(["Pay"])))});var sR,iR,cR,lR,subscription_SubscriptionUpgrade=()=>(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(wI.Z,{size:80,className:"center flex color-primary"}),(0,j.jsx)("h1",{className:"text-xl text-bold mb0",children:(0,u.c)("Title").t(rR||(rR=(0,d.Z)(["Processing"])))}),(0,j.jsx)("p",{className:"text-center mt0-5",children:(0,u.c)("Info").t(aR||(aR=(0,d.Z)(["Your account is being upgraded, this may take up to 30 seconds."])))}),(0,j.jsx)("p",{className:"text-center color-weak pb2 mb2",children:(0,u.c)("Info").t(oR||(oR=(0,d.Z)(["Thank you for supporting our mission."])))})]}),dR=n(19056),uR=n(44248),pR=n(57477),mR=n(37904);var subscription_SubscriptionThanks=({method:e,onClose:t})=>{const{APP_NAME:n}=(0,Nn.Z)(),r=n===M.ei.PROTONVPN_SETTINGS;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("h1",{className:"text-center mb0",children:(0,j.jsx)("img",{src:r?uR:dR,alt:"Thanks"})}),e&&[M.zr.CASH,M.zr.BITCOIN].includes(e)?(0,j.jsx)("p",{className:"text-center mb1",children:(0,u.c)("Info").t(sR||(sR=(0,d.Z)(["Your account will be updated once the payment is cleared."])))}):(0,j.jsx)("p",{className:"text-center mb1 text-bold text-xl",children:(0,u.c)("Info").t(iR||(iR=(0,d.Z)(["Account successfully updated"])))}),(0,j.jsx)("p",{className:"text-center mb2",children:(0,u.c)("Info").t(cR||(cR=(0,d.Z)(["Download your favorite app today and take privacy with you everywhere you go."])))}),(0,j.jsxs)("div",{className:"mt1 mb2 text-center",children:[(0,j.jsx)(Tu.Z,{url:r?"https://play.google.com/store/apps/details?id=ch.protonvpn.android":"https://play.google.com/store/apps/details?id=ch.protonmail.android",className:"mr2",children:(0,j.jsx)("img",{width:"150",src:mR,alt:"Play Store"})}),(0,j.jsx)(Tu.Z,{url:r?"https://itunes.apple.com/us/app/protonvpn-fast-secure-vpn/id1437005085":"https://apps.apple.com/app/protonmail-encrypted-email/id979659905",children:(0,j.jsx)("img",{width:"150",src:pR,alt:"App Store"})})]}),(0,j.jsx)("div",{className:"text-center mb2",children:(0,j.jsx)(yr.Z,{fullWidth:!0,onClick:t,children:(0,u.c)("Action").t(lR||(lR=(0,d.Z)(["Close"])))})})]})};const readableTime=(e,t="PP",n)=>{const r=(0,vh.Z)(e);return(0,qc.Z)(r,Date.now())?(0,Et.Z)(r,"p",n):(0,Et.Z)(r,t,n)},gR=["children","format","options"];function Time_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Time_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Time_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Time_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Time_getValue=e=>{if("string"==typeof e){const t=parseInt(e,10);if(!Number.isNaN(t))return t}return"number"==typeof e?e:0};var time_Time=e=>{let{children:t,format:n="PP",options:r={locale:kt.RW}}=e,a=(0,Sn.Z)(e,gR);return(0,j.jsx)("time",Time_objectSpread(Time_objectSpread({},a),{},{children:readableTime(Time_getValue(t),n,r)}))};const{PLAN:jR,ADDON:bR}=M.kR,{MAIL:yR,VPN:hR}=M.pH,IR=(0,mS.Z)(new Date(Date.UTC(2021,9,1))),getSubTotal=({plansMap:e,cycle:t,plans:n,services:r})=>Object.entries(e).reduce(((e,[a,o])=>{var s;if(!o)return e;const i=n.find((({Name:e,Services:t})=>r?e===a&&(0,N.jl)(t,r):e===a));return e+o*((null==i||null===(s=i.Pricing)||void 0===s?void 0:s[t])||0)}),0);var fR,MR;const{MONTHLY:NR,YEARLY:xR,TWO_YEARS:vR}=M.d1,wR={[xR]:"-20%",[vR]:"-33%"};var DR,SR,OR,AR,CR,ER,LR,payments_CycleDiscountBadge=({cycle:e=NR})=>{if(e===NR)return null;const t={[xR]:(0,u.c)("Tooltip").t(fR||(fR=(0,d.Z)(["Discount applied for annual billing cycle"]))),[vR]:(0,u.c)("Tooltip").t(MR||(MR=(0,d.Z)(["Discount applied for two-year billing cycle"])))};return(0,j.jsx)(badge_Badge,{type:"success",tooltip:t[e],children:wR[e]})};const PR=(0,Or.PO)(M.ei.PROTONVPN_SETTINGS),{BUNDLE:ZR,PROTONTEAM:TR,BLACK_FRIDAY_2018:kR,BLACK_FRIDAY_2019:zR,BLACK_FRIDAY_2020:_R}=M.rX;var RR,payments_DiscountBadge=({code:e})=>e===ZR?(0,j.jsx)(badge_Badge,{type:"success",tooltip:(0,u.c)("Info").t(DR||(DR=(0,d.Z)(["20% discount applied to your subscription with coupon ",""])),e),children:"-20%"}):e===kR?(0,j.jsx)(badge_Badge,{type:"success",tooltip:(0,u.c)("Info").t(SR||(SR=(0,d.Z)(["Black Friday 2018 applied to your subscription"]))),children:"Black Friday"}):e===zR?(0,j.jsx)(badge_Badge,{type:"success",tooltip:(0,u.c)("Info").t(OR||(OR=(0,d.Z)(["Black Friday 2019 applied to your subscription"]))),children:"Black Friday"}):e===_R?(0,j.jsx)(badge_Badge,{type:"success",tooltip:(0,u.c)("Info").t(AR||(AR=(0,d.Z)(["Black Friday 2020 newcomer discount has been applied"]))),children:"Black Friday"}):e===M.rV.COUPON_CODE?(0,j.jsx)(badge_Badge,{type:"success",tooltip:(0,u.c)("blackfriday: VPNspecialoffer Badge popup").t(CR||(CR=(0,d.Z)([""," Plus Special Offer 2021 discount has been applied"])),PR),children:(0,u.c)("blackfriday: VPNspecialoffer Promo title, need to be short").t(ER||(ER=(0,d.Z)(["Special offer"])))}):e===TR?(0,j.jsx)(badge_Badge,{type:"success",children:"-100%"}):(0,j.jsx)(badge_Badge,{type:"success",tooltip:(0,u.c)("Info").t(LR||(LR=(0,d.Z)(["Discount applied to your subscription with coupon ",""])),e),children:e});var GR,YR,UR,FR,KR,BR,subscription_CheckoutRow=({title:e,amount:t=0,currency:n,className:r=""})=>0!==t||n?(0,j.jsxs)("div",{className:(0,ht.dh)(["flex flex-nowrap flex-justify-space-between mb1",r]),children:[(0,j.jsx)("div",{className:"pr0-5",children:e}),(0,j.jsx)(price_Price,{currency:n,children:t})]}):(0,j.jsxs)("div",{className:(0,ht.dh)(["flex flex-nowrap flex-justify-space-between mb1",r]),children:[(0,j.jsx)("div",{className:"pr0-5",children:e}),(0,j.jsx)("span",{children:(0,u.c)("Price").t(RR||(RR=(0,d.Z)(["Free"])))})]});var WR,VR,QR,payments_Checkout=({cycle:e,currency:t,onChangeCycle:n,onChangeCurrency:r,hideCurrency:a,hideCycle:o,loading:s,children:i,service:c})=>(0,j.jsxs)("div",{className:"p2",children:[(0,j.jsxs)("div",{className:"flex flex-nowrap cycle-currency-selectors mb1",children:[o?null:(0,j.jsx)("div",{className:"flex-item-fluid flex flex-item-grow-1-8",children:(0,j.jsx)(payments_CycleSelector,{cycle:e,onSelect:n,disabled:s,options:[{text:(0,u.c)("Billing cycle option").t(GR||(GR=(0,d.Z)(["Monthly"]))),value:M.d1.MONTHLY},{text:(0,u.c)("Billing cycle option").t(YR||(YR=(0,d.Z)(["Annually SAVE 20%"]))),value:M.d1.YEARLY},{text:(0,u.c)("Billing cycle option").t(UR||(UR=(0,d.Z)(["Two years SAVE 33%"]))),value:M.d1.TWO_YEARS}]})}),a?null:(0,j.jsx)("div",{className:"flex-item-fluid flex ml1",children:(0,j.jsx)(payments_CurrencySelector,{currency:t,onSelect:r,className:"flex-item-fluid",disabled:s})})]}),(0,j.jsx)("h2",{className:"h4 text-bold text-cut",children:(0,u.c)("Title").t(FR||(FR=(0,d.Z)(["Plan summary"])))}),(0,j.jsx)("div",{className:s?"opacity-50":"",children:i}),(0,j.jsxs)("p",{className:"text-sm lh-standard flex flex-nowrap color-weak",children:[(0,j.jsx)("span",{className:"flex-item-noshrink mr0-5",children:(0,j.jsx)(pr.Z,{name:"shield"})}),(0,j.jsx)("span",{className:"flex-item-fluid",children:(0,u.c)("Info").t(KR||(KR=(0,d.Z)(["Payments are protected with TLS encryption and Swiss privacy laws."])))})]}),c===M.pH.VPN?(0,j.jsxs)("p",{className:"text-sm flex flex-nowrap color-weak",children:[(0,j.jsx)("span",{className:"flex-item-noshrink mr0-5",children:(0,j.jsx)(pr.Z,{name:"clock"})}),(0,j.jsx)("span",{className:"flex-item-fluid",children:(0,u.c)("Info").t(BR||(BR=(0,d.Z)(["30 days money-back guarantee."])))})]}):null]});var HR,XR,JR,qR,subscription_GiftCodeForm=({code:e,loading:t,disabled:n,onChange:r,onSubmit:a})=>(0,j.jsxs)("div",{className:"flex flex-nowrap flex-align-items-center flex-align-items-start",children:[(0,j.jsx)("div",{className:"pr0-5 flex-item-fluid",children:(0,j.jsx)(jr.Z,{value:e,placeholder:(0,u.c)("Placeholder").t(WR||(WR=(0,d.Z)(["Gift code"]))),onChange:({target:e})=>r(e.value),onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),a())}})}),(0,j.jsx)(yr.Z,{title:(0,u.c)("Title").t(VR||(VR=(0,d.Z)(["Apply gift code"]))),loading:t,disabled:n||!e,onClick:a,children:(0,u.c)("Action").t(QR||(QR=(0,d.Z)(["Apply"])))})]});var $R,eG,tG,nG,rG,aG,oG,sG,iG,cG,lG,dG,uG,pG,mG,gG,jG,bG,yG,hG,IG,payments_PaymentGiftCode=({gift:e="",onApply:t,loading:n})=>{const{state:r,toggle:a,set:s}=(0,lr.Z)(),[i,c]=(0,o.useState)("");if((0,o.useEffect)((()=>{e||(s(!1),c(""))}),[e]),e)return(0,j.jsxs)("div",{className:"inline-flex flex-nowrap flex-align-items-center",children:[(0,j.jsxs)("span",{className:"mr1 flex flex-nowrap flex-align-items-center",children:[(0,j.jsx)(pr.Z,{name:"gift-card",className:"mr0-5 mb0-25"}),(0,j.jsx)("code",{children:(e.replace(/-/g,"").match(/.{1,4}/g)||[""]).join("-").toUpperCase()})]}),(0,j.jsx)(Ea.Z,{icon:!0,shape:"ghost",className:"flex flex-align-items-center ml0-25",onClick:()=>t(""),title:(0,u.c)("Action").t(HR||(HR=(0,d.Z)(["Remove gift code"]))),children:(0,j.jsx)(pr.Z,{name:"trash",alt:(0,u.c)("Action").t(XR||(XR=(0,d.Z)(["Remove gift code"])))})})]});if(r){const handleSubmit=()=>{i&&t(i)};return(0,j.jsx)(subscription_GiftCodeForm,{code:i,onChange:c,onSubmit:handleSubmit,loading:n})}return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Jd.Z,{className:"mr0-5",onClick:a,children:(0,u.c)("Link").t(JR||(JR=(0,d.Z)(["Add a gift code"])))}),(0,j.jsx)(fc.Z,{title:(0,u.c)("Tooltip").t(qR||(qR=(0,d.Z)(["If you purchased a gift code or received one from our support team, you can enter it here."])))})]})};function SubscriptionCheckout_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SubscriptionCheckout_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SubscriptionCheckout_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SubscriptionCheckout_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fG,MG,NG,xG,vG,wG,DG,SG,OG,AG,subscription_SubscriptionCheckout=({submit:e=(0,u.c)("Action").t($R||($R=(0,d.Z)(["Pay"]))),plans:t=[],currency:n,cycle:r,coupon:a,gift:s,onChangeCurrency:i,onChangeCycle:c,onChangeGift:l,planIDs:p,checkResult:m={},loading:g,hideCurrency:b,hideCycle:y,service:h})=>{const{APP_NAME:I}=(0,Nn.Z)(),f=I===M.ei.PROTONVPN_SETTINGS,x=(0,Or.PO)(M.ei.PROTONMAIL),v=(0,Or.PO)(M.ei.PROTONVPN_SETTINGS),w=(0,Or.PO)(M.ei.PROTONDRIVE),D=!!m.Additions,S=(0,Ne.qL)(t),O=t.find((({Name:e})=>e===M.P$.SPACE)),A=t.find((({Name:e})=>e===M.P$.ADDRESS)),C=t.find((({Name:e})=>e===M.P$.DOMAIN)),E=t.find((({Name:e})=>e===M.P$.MEMBER)),L=t.find((({Name:e})=>e===M.P$.VPN)),{years:P,months:Z,days:T}=((e,t)=>{const n={years:0,months:0,days:0,hours:0,minutes:0,seconds:0,firstDateWasLater:!1};if(e===t)return n;let r,a;if((0,Bc.Z)(e,t)?(a=e,r=t,n.firstDateWasLater=!0):(r=e,a=t),n.years=a.getFullYear()-r.getFullYear(),n.months=a.getMonth()-r.getMonth(),n.days=a.getDate()-r.getDate(),n.hours=a.getHours()-r.getHours(),n.minutes=a.getMinutes()-r.getMinutes(),n.seconds=a.getSeconds()-r.getSeconds(),n.seconds<0&&(n.seconds+=60,n.minutes--),n.minutes<0&&(n.minutes+=60,n.hours--),n.hours<0&&(n.hours+=24,n.days--),n.days<0){const e=(0,Wc.Z)((0,Vc.Z)(new Date("".concat(a.getFullYear(),"-").concat(a.getMonth()+1)),{months:1}));e<r.getDate()?n.days+=e+(r.getDate()-e):n.days+=e,n.months--}return n.months<0&&(n.months+=12,n.years--),n})(new Date,m.PeriodEnd?new Date(1e3*m.PeriodEnd):new Date),k=Z+12*P,z=[k&&(0,u.c)("Countdown unit").ngettext((0,u.msgid)(eG||(eG=(0,d.Z)([""," month"])),k),"".concat(k," months"),k),T&&(0,u.c)("Countdown unit").ngettext((0,u.msgid)(tG||(tG=(0,d.Z)([""," day"])),T),"".concat(T," days"),T)].filter(Za.Z).join(", "),_=(0,j.jsx)(time_Time,{children:m.PeriodEnd},"renewal-date"),R=D?(0,u.c)("Label").t(nG||(nG=(0,d.Z)(["Total (",")"])),z):(0,u.c)("Label").t(rG||(rG=(0,d.Z)(["Total"]))),G=Object.entries(p).reduce(((e,[t,n])=>{const{Name:r}=S[t];return e[r]=((e,t)=>{var n;return D?(null==m||null===(n=m.Additions)||void 0===n?void 0:n[e])||0:t})(r,n),e}),{}),Y=getSubTotal({cycle:r,plans:t,plansMap:G})/r,U=D?(m.AmountDue||0)-(m.Credit||0):(m.Amount||0)+(m.CouponDiscount||0),F=getSubTotal({cycle:M.d1.MONTHLY,plans:t,plansMap:G})*r,K=100-Math.round(100*U/F),B=((m.Amount||0)+(m.CouponDiscount||0))/r,W=B-Y,V=(0,xe.Xo)(Object.entries(p).map((([e,t])=>SubscriptionCheckout_objectSpread(SubscriptionCheckout_objectSpread({},S[e]),{},{quantity:t}))),"Type").reverse(),Q=V.some((({Type:e,Services:t})=>e===M.kR.PLAN&&(0,N.jl)(t,M.pH.MAIL))),H=V.some((({Type:e,Services:t})=>e===M.kR.PLAN&&(0,N.jl)(t,M.pH.VPN))),X=V.some((({Name:e})=>e===M.Xf.VISIONARY)),J=V.some((({Name:e})=>e===M.Xf.PLUS)),q=V.some((({Name:e})=>e===M.Xf.VPNPLUS)),getTitle=(e,t)=>{var n,r,a,o,s;const i=t*(null!==(n=null==A?void 0:A.MaxAddresses)&&void 0!==n?n:0),c=helpers_humanSize(t*(null!==(r=null==O?void 0:O.MaxSpace)&&void 0!==r?r:0),"GB"),l=t*(null!==(a=null==C?void 0:C.MaxDomains)&&void 0!==a?a:0),p=t*(null!==(o=null==E?void 0:E.MaxMembers)&&void 0!==o?o:0),m=t*(null!==(s=null==L?void 0:L.MaxVPN)&&void 0!==s?s:0);return{[M.P$.ADDRESS]:(0,u.c)("Addon").ngettext((0,u.msgid)(aG||(aG=(0,d.Z)(["+ "," email address"])),i),"+ ".concat(i," email addresses"),i),[M.P$.SPACE]:(0,u.c)("Addon").t(oG||(oG=(0,d.Z)(["+ "," storage"])),c),[M.P$.DOMAIN]:(0,u.c)("Addon").ngettext((0,u.msgid)(sG||(sG=(0,d.Z)(["+ "," custom domain"])),l),"+ ".concat(l," custom domains"),l),[M.P$.MEMBER]:(0,u.c)("Addon").ngettext((0,u.msgid)(iG||(iG=(0,d.Z)(["+ "," user"])),p),"+ ".concat(p," users"),p),[M.P$.VPN]:(0,u.c)("Addon").ngettext((0,u.msgid)(cG||(cG=(0,d.Z)(["+ "," connection"])),m),"+ ".concat(m," connections"),m)}[e]||""},printSummary=(e=M.pH.MAIL)=>V.filter((({Services:t,quantity:n})=>(0,N.jl)(t,e)&&n)).map((({ID:e,Title:t,Pricing:a,Type:s,Name:i,quantity:c})=>{var l;const p=D&&(null==m||null===(l=m.Additions)||void 0===l?void 0:l[i])||0,g=c-p,b="Visionary"===t?"".concat(t," ").concat((0,u.c)("Info").t(lG||(lG=(0,d.Z)(["(Mail + VPN)"])))):t;return(0,j.jsxs)(o.Fragment,{children:[g?(0,j.jsx)(subscription_CheckoutRow,{className:s===M.kR.PLAN?"text-bold":"",title:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("span",{className:"mr0-5 pr0-5",children:s===M.kR.PLAN?b:getTitle(i,g)}),!D&&[M.d1.YEARLY,M.d1.TWO_YEARS].includes(r)&&(0,j.jsx)("span",{className:"text-no-bold",children:(0,j.jsx)(payments_CycleDiscountBadge,{cycle:r})})]}),amount:D?0:g*a[r]/r,currency:n}):null,p?(0,j.jsx)(subscription_CheckoutRow,{title:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("span",{className:"mr0-5 pr0-5",children:getTitle(i,p)}),[M.d1.YEARLY,M.d1.TWO_YEARS].includes(r)&&(0,j.jsx)("span",{className:"text-no-bold",children:(0,j.jsx)(payments_CycleDiscountBadge,{cycle:r})})]}),amount:p*a[r]/r,currency:n}):null]},e)}));return(0,j.jsxs)(payments_Checkout,{cycle:r,currency:n,onChangeCycle:c,onChangeCurrency:i,loading:g,hideCurrency:b,hideCycle:y,service:h,children:[Q?printSummary(M.pH.MAIL):(0,j.jsx)(subscription_CheckoutRow,{className:"text-bold",title:(0,u.c)("Info").t(dG||(dG=(0,d.Z)([""," Free"])),x),amount:0}),X?null:(0,j.jsx)("div",{className:"border-top pt0-5",children:H?printSummary(M.pH.VPN):(0,j.jsx)(subscription_CheckoutRow,{className:"text-bold",title:(0,u.c)("Info").t(uG||(uG=(0,d.Z)([""," Free"])),v),amount:0})}),X||J&&q&&r===M.d1.TWO_YEARS||a===M.rV.COUPON_CODE&&J&&q&&[M.d1.YEARLY,M.d1.TWO_YEARS].includes(r)?(0,j.jsx)("div",{className:"border-top pt0-5",children:(0,j.jsx)(subscription_CheckoutRow,{className:"text-bold",title:w,amount:0})}):null,m.Amount?(0,j.jsxs)(j.Fragment,{children:[a?(0,j.jsxs)("div",{className:"border-bottom mb0-5",children:[(0,j.jsx)(subscription_CheckoutRow,{className:"m0",title:(0,u.c)("Title").t(pG||(pG=(0,d.Z)(["Subtotal"]))),amount:Y,currency:n}),(0,j.jsx)(subscription_CheckoutRow,{title:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("span",{className:"mr0-5",children:(0,u.c)("Title").t(mG||(mG=(0,d.Z)(["Coupon discount"])))}),(0,j.jsx)(payments_DiscountBadge,{code:a})]}),amount:W,currency:n,className:"text-sm mt0 mb0"})]}):null,(0,j.jsxs)("div",{className:"border-bottom mb0-5",children:[[M.d1.YEARLY,M.d1.TWO_YEARS].includes(r)?(0,j.jsx)(subscription_CheckoutRow,{title:(0,u.c)("Title").t(gG||(gG=(0,d.Z)(["Total (monthly)"]))),amount:B,currency:n,className:"mt0 mb0"}):null,(0,j.jsx)(subscription_CheckoutRow,{className:"m0",title:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("span",{className:"mr0-5",children:R}),!g&&a===M.rV.COUPON_CODE&&K>0&&(0,j.jsxs)(badge_Badge,{type:"success",children:["-",K,"%"]}),D?(0,j.jsx)(fc.Z,{buttonClass:"mb0-5",title:(0,u.c)("Info").jt(jG||(jG=(0,d.Z)(["Billed at the end of your current billing cycle (renews on ",")"])),_)}):null]}),amount:U,currency:n})]}),m.Proration||m.Credit||m.Gift?(0,j.jsxs)("div",{className:"border-bottom mb0-5",children:[m.Proration?(0,j.jsx)(subscription_CheckoutRow,{title:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("span",{className:"mr0-5",children:(0,u.c)("Label").t(bG||(bG=(0,d.Z)(["Proration"])))}),(0,j.jsx)(fc.Z,{buttonClass:"mb0-5",url:f?"https://protonvpn.com/support/vpn-credit-proration/":"https://protonmail.com/support/knowledge-base/credit-proration/"})]}),amount:m.Proration,currency:n,className:"small mt0 mb0"}):null,m.Credit?(0,j.jsx)(subscription_CheckoutRow,{title:(0,u.c)("Title").t(yG||(yG=(0,d.Z)(["Credits"]))),amount:m.Credit,currency:n,className:"small mt0 mb0"}):null,m.Gift?(0,j.jsx)(subscription_CheckoutRow,{title:(0,u.c)("Title").t(hG||(hG=(0,d.Z)(["Gift code"]))),amount:m.Gift,currency:n,className:"small mt0 mb0"}):null]}):null]}):null,(0,j.jsx)(subscription_CheckoutRow,{title:(0,u.c)("Title").t(IG||(IG=(0,d.Z)(["Amount due"]))),amount:m.AmountDue||0,currency:n,className:"text-bold m0 text-2xl"}),(0,j.jsx)("div",{className:"mt1 mb1",children:e}),m.Amount&&l?(0,j.jsx)(payments_PaymentGiftCode,{gift:s,onApply:l,loading:g}):null]})};const CG=["index","cycle","currency","onChangePlanIDs","onChangeCycle","onBack","planIDs","plansMap","plansNameMap","plans","organization","service","subscription"];function ProtonPlanPicker_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ProtonPlanPicker_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ProtonPlanPicker_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ProtonPlanPicker_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const EG={free_mail:"Free",free_vpn:"Free",[M.Xf.VPNBASIC]:"Basic",[M.Xf.VPNPLUS]:"Plus",[M.Xf.PLUS]:"Plus",[M.Xf.PROFESSIONAL]:"Professional",[M.Xf.VISIONARY]:"Visionary"};var payments_ProtonPlanPicker=e=>{let{index:t,cycle:n,currency:r,onChangePlanIDs:a,onChangeCycle:o,onBack:s,planIDs:i,plansMap:c,plansNameMap:l,plans:p,organization:m,service:g,subscription:b}=e,y=(0,Sn.Z)(e,CG);const h=(0,Or.PO)(M.ei.PROTONVPN_SETTINGS),I=(0,Or.PO)(M.ei.PROTONMAIL),f=[IL,l[M.Xf.PLUS],l[M.Xf.PROFESSIONAL],0===t&&g===M.pH.MAIL&&l[M.Xf.VISIONARY]].filter(Za.Z),N=[fL,l[M.Xf.VPNBASIC],l[M.Xf.VPNPLUS],0===t&&g===M.pH.VPN&&l[M.Xf.VISIONARY]].filter(Za.Z),x=g===M.pH.VPN?fL:IL,v=b?getPlan(b,g):x,w=g===M.pH.VPN?N:f,D=(0,u.c)("Plan info").t(fG||(fG=(0,d.Z)(["(current plan)"]))),S=(0,j.jsx)(VM.Z,{onClick:()=>o(M.d1.YEARLY),children:(0,u.c)("Action").t(MG||(MG=(0,d.Z)(["annual billing"])))},"annual-billing"),O=(0,j.jsx)("span",{className:"text-semibold color-success",children:(0,u.c)("Info").t(NG||(NG=(0,d.Z)(["Save 20%"])))},"save-20"),A=(0,j.jsx)("span",{className:"text-semibold color-success",children:(0,u.c)("Info").t(xG||(xG=(0,d.Z)(["Save extra 20%"])))},"saveExtra-20");return 1===t&&i[l[M.Xf.VISIONARY].ID]?null:(0,j.jsxs)("div",ProtonPlanPicker_objectSpread(ProtonPlanPicker_objectSpread({},y),{},{children:[(0,j.jsxs)("h2",{className:"text-2xl text-bold",children:[g===M.pH.VPN?h:I," plan"]}),0===t&&n===M.d1.MONTHLY?(0,j.jsx)("p",{children:(0,u.c)("Info").jt(vG||(vG=(0,d.Z)([""," on your subscription by switching to ",""])),O,S)}):null,1===t&&g===M.pH.MAIL?(0,j.jsx)("p",{children:(0,u.c)("Info").jt(wG||(wG=(0,d.Z)([""," on both Mail and VPN by adding a Mail subscription."])),A)}):null,1===t&&g===M.pH.VPN?(0,j.jsx)("p",{children:(0,u.c)("Info").jt(DG||(DG=(0,d.Z)([""," on both VPN and Mail by adding a VPN subscription."])),A)}):null,(0,j.jsx)("ul",{className:"unstyled",children:w.map((e=>{const t=e.ID===IL.ID||e.ID===fL.ID,o=(null==v?void 0:v.ID)===e.ID,s=t?w.every((e=>!i[e.ID])):!!i[e.ID];return(0,j.jsx)("li",{className:"mb0-75",children:(0,j.jsxs)(input_Radio,{checked:s,name:"plan".concat(g),className:"flex flex-nowrap flex-align-items-center",id:"".concat(e.ID).concat(g),onChange:()=>{a(switchPlan({planIDs:i,plans:p,planID:t?void 0:e.ID,service:g,organization:m}))},children:[(0,j.jsxs)("span",{className:"flex-item-fluid pl1 pr0-5",children:[EG[e.Name],o?(0,j.jsxs)(j.Fragment,{children:[" ",(0,j.jsx)("span",{className:"color-hint inline-block",children:D})]}):""]}),(0,j.jsx)("span",{className:(0,ht.dh)([!s&&"color-hint"]),children:t?(0,j.jsx)("span",{children:(0,u.c)("Free price").t(SG||(SG=(0,d.Z)(["Free"])))}):(0,j.jsx)(price_Price,{currency:r,suffix:(0,u.c)("Suffix for price").t(OG||(OG=(0,d.Z)(["/ month"]))),children:e.Pricing[n]/n})})]})},e.ID)}))}),s&&(0,j.jsx)(Ea.Z,{color:"weak",onClick:s,children:(0,u.c)("Action").t(AG||(AG=(0,d.Z)(["Compare plans"])))})]}))};const LG=["cycle","currency","onChangePlanIDs","planIDs","plansMap","plansNameMap","plans","currentPlan","organization","service","loading","className"];var PG,ZG,TG,kG,zG,_G,RG,GG,YG,UG,FG,KG,BG,WG,VG,QG,HG,XG,JG,qG,$G,eY;function ProtonPlanCustomizer_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ProtonPlanCustomizer_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ProtonPlanCustomizer_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ProtonPlanCustomizer_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const tY=[M.P$.MEMBER,M.P$.SPACE,M.P$.ADDRESS,M.P$.DOMAIN],nY=[M.P$.VPN],rY={[M.P$.ADDRESS]:"MaxAddresses",[M.P$.MEMBER]:"MaxMembers",[M.P$.DOMAIN]:"MaxDomains",[M.P$.VPN]:"MaxVPN",[M.P$.SPACE]:"MaxSpace"},ButtonNumberInput=({value:e,onChange:t,id:n,min:r=0,max:a=999,step:o=1,disabled:s=!1,divider:i=1})=>(0,j.jsxs)("div",{className:"bordered rounded flex-item-noshrink flex flex-nowrap",children:[(0,j.jsx)("button",{type:"button",title:(0,u.c)("Action").t(PG||(PG=(0,d.Z)(["Decrease"]))),className:(0,ht.dh)(["p0-5 flex",(s||e-o<r)&&"color-disabled"]),disabled:s||e-o<r,onClick:()=>{null==t||t(e-o)},children:(0,j.jsx)(pr.Z,{name:"dash",alt:(0,u.c)("Action").t(ZG||(ZG=(0,d.Z)(["Decrease"]))),className:"mauto"})}),s?(0,j.jsx)("div",{className:"mt0-5 flex mb0-5",children:(0,j.jsx)("span",{className:"w6e border-left border-right text-center color-disabled",children:e/i})}):(0,j.jsx)("label",{htmlFor:n,className:"mt0-5 flex mb0-5",children:(0,j.jsx)("select",{value:e,disabled:s,id:n,className:"w6e border-left border-right text-center",onChange:({target:{value:e}})=>{null==t||t(+e)},children:(0,xe.w6)(r,a+1,o).map((e=>(0,j.jsx)("option",{value:e,children:"".concat(e/i)},e)))})}),(0,j.jsx)("button",{type:"button",title:(0,u.c)("Action").t(TG||(TG=(0,d.Z)(["Increase"]))),className:(0,ht.dh)(["p0-5 flex",(s||e+o>a)&&"color-disabled"]),disabled:s||e+o>a,onClick:()=>{null==t||t(e+o)},children:(0,j.jsx)(pr.Z,{name:"plus",alt:(0,u.c)("Action").t(kG||(kG=(0,d.Z)(["Increase"]))),className:"mauto"})})]}),aY={[M.P$.SPACE]:M.gG,[M.P$.MEMBER]:M.uS,[M.P$.DOMAIN]:M.k5,[M.P$.ADDRESS]:M.DU,[M.P$.VPN]:M.sr};var payments_ProtonPlanCustomizer=e=>{let{cycle:t,currency:n,onChangePlanIDs:r,planIDs:a,plansMap:o,plansNameMap:s,plans:i,currentPlan:c,organization:l,service:p,loading:m,className:g}=e,b=(0,Sn.Z)(e,LG);const y=(0,Or.PO)(M.ei.PROTONVPN_SETTINGS),h=(0,Or.PO)(M.ei.PROTONMAIL),I=p===M.pH.VPN,f=I?y:h,N=I?nY:tY,x=((e,t)=>{const n=(0,Ne.qL)(t,"Name"),r={};return e[n[M.Xf.PLUS].ID]&&(r[M.P$.SPACE]=!0,r[M.P$.ADDRESS]=!0,r[M.P$.DOMAIN]=!0),e[n[M.Xf.PROFESSIONAL].ID]&&(r[M.P$.MEMBER]=!0,r[M.P$.DOMAIN]=!0),e[n[M.Xf.PROFESSIONAL].ID]&&e[n[M.Xf.VPNPLUS].ID]&&(r[M.P$.VPN]=!0),r})(a,i),v=(0,j.jsxs)(VM.Z,{onClick:()=>{r(switchPlan({planIDs:a,plans:i,planID:s[M.Xf.PROFESSIONAL].ID,service:p,organization:l}))},children:[h," Professional"]},"professional-plan"),w={[M.P$.SPACE]:(0,u.c)("Info").t(zG||(zG=(0,d.Z)(["Storage GB"]))),[M.P$.MEMBER]:(0,u.c)("Info").t(_G||(_G=(0,d.Z)(["Users"]))),[M.P$.DOMAIN]:(0,u.c)("Info").t(RG||(RG=(0,d.Z)(["Domains"]))),[M.P$.ADDRESS]:(0,u.c)("Info").t(GG||(GG=(0,d.Z)(["Addresses"]))),[M.P$.VPN]:(0,u.c)("Info").t(YG||(YG=(0,d.Z)(["Connections"])))},D={[M.P$.SPACE]:"",[M.P$.MEMBER]:"",[M.P$.DOMAIN]:(0,u.c)("Info").t(UG||(UG=(0,d.Z)(["Allows you to host emails for your own domain(s) at ",", e.g. john.smith@example.com"])),h),[M.P$.ADDRESS]:(0,u.c)("Info").t(FG||(FG=(0,d.Z)(["Add additional addresses to your account like user2@protonmail.com"]))),[M.P$.VPN]:(0,u.c)("Info").t(KG||(KG=(0,d.Z)(["Number of VPN connections which can be assigned to users. Each connected device consumes one VPN connection."])))};return(0,j.jsxs)("div",ProtonPlanCustomizer_objectSpread(ProtonPlanCustomizer_objectSpread({className:(0,ht.dh)(["plan-customiser",g])},b),{},{children:[(0,j.jsx)("h2",{className:"text-2xl text-bold",children:(0,u.c)("Title").t(BG||(BG=(0,d.Z)([""," customization"])),f)}),p===M.pH.MAIL&&a[s[M.Xf.PLUS].ID]?(0,j.jsxs)("p",{children:[(0,u.c)("Info").t(WG||(WG=(0,d.Z)(["ProtonMail Plus is limited to one user and starts with 5 GB of storage."]))),(0,j.jsx)("br",{}),(0,u.c)("Info").jt(VG||(VG=(0,d.Z)(["Switch to "," to add more users."])),v)]}):null,p===M.pH.VPN&&a[s[M.Xf.VPNPLUS].ID]?(0,j.jsxs)("p",{children:[(0,u.c)("Info").ngettext((0,u.msgid)(QG||(QG=(0,d.Z)(["ProtonVPN "," includes "," VPN connection."])),M.Bh[M.Xf.VPNPLUS],s[M.Xf.VPNPLUS].MaxVPN),"ProtonVPN ".concat(M.Bh[M.Xf.VPNPLUS]," includes ").concat(s[M.Xf.VPNPLUS].MaxVPN," VPN connections."),s[M.Xf.VPNPLUS].MaxVPN),(0,j.jsx)("br",{}),a[s[M.Xf.PROFESSIONAL].ID]?(0,u.c)("Info").t(HG||(HG=(0,d.Z)(["Each additional connection can be assigned to users in your organization."]))):(0,u.c)("Info").jt(XG||(XG=(0,d.Z)(["Switch to "," to add more connections."])),v)]}):null,p===M.pH.MAIL&&a[s[M.Xf.PROFESSIONAL].ID]?(0,j.jsx)("p",{children:(0,u.c)("Info").t(JG||(JG=(0,d.Z)([""," Professional starts with one user, and each user adds 5 GB and 5 email addresses to the organization’s pool."])),h)}):null,N.map((e=>{var i,l,p;const g=s[e];if(!g)return null;const b=g.Name,y=D[b],h=null!==(i=a[g.ID])&&void 0!==i?i:0,I=!!x[b],f=rY[b],N=null!==(l=g[f])&&void 0!==l?l:1,v=null!==(p=c[f])&&void 0!==p?p:0,S=aY[b]*N,O=I?v+h*N:Object.entries(a).reduce(((e,[t,n])=>e+o[t][f]*n),0),A=b===M.P$.SPACE?M.a5:1;return(0,j.jsxs)("div",{className:"flex-no-min-children flex-nowrap flex-align-items-center mb1 on-mobile-flex-wrap",children:[(0,j.jsx)("label",{htmlFor:g.ID,className:"min-w14e plan-customiser-addon-label text-bold pr0-5 on-mobile-w100",children:w[b]}),I?(0,j.jsx)(ButtonNumberInput,{id:g.ID,value:O,min:v,max:S,divider:A,disabled:m||!I,onChange:e=>{r(((e,t,n)=>{const{[t]:r}=e,a=(0,Sn.Z)(e,[t].map(_toPropertyKey));return!n||n<=0?a:planIDs_objectSpread(planIDs_objectSpread({},a),{},{[t]:n})})(a,g.ID,(e-v)/N))},step:N}):(0,j.jsx)(ButtonNumberInput,{id:g.ID,disabled:!0,value:O,divider:A}),y&&(0,j.jsx)("div",{className:"flex-item-noshrink ml1",children:(0,j.jsx)(fc.Z,{title:y})}),(0,j.jsxs)("div",{className:"mlauto text-right text-cut pl0-5 on-tiny-mobile-w100 on-tiny-mobile-text-left on-tiny-mobile-pl0",children:[I&&h?(0,j.jsx)(price_Price,{currency:n,prefix:"+",suffix:(0,u.c)("Suffix for price").t(qG||(qG=(0,d.Z)(["/ month"]))),children:h*g.Pricing[t]/t}):null,I&&!h?(0,j.jsx)("span",{children:(0,u.c)("Info").t($G||($G=(0,d.Z)(["Included"])))}):null,!I&&(0,j.jsx)("span",{className:"color-hint",children:(0,u.c)("Info").t(eY||(eY=(0,d.Z)(["Not customizable"])))})]})]},g.ID)}))]}))};var oY,subscription_PlanCustomization=({plans:e,planIDs:t,cycle:n,currency:r,service:a,hasMailPlanPicker:s=!0,onChangePlanIDs:i,onChangeCycle:c,onBack:l,loading:d,organization:u,subscription:p})=>{const m=a===M.pH.MAIL?[M.pH.MAIL,M.pH.VPN]:[M.pH.VPN,M.pH.MAIL],g=(0,Ne.qL)(e,"ID"),b=(0,Ne.qL)(e,"Name");return(0,j.jsx)(j.Fragment,{children:m.map(((a,m)=>{const[y]=Object.entries(t).find((([e,t])=>{if(t){const{Services:t,Type:n}=g[e];return(0,N.jl)(t,a)&&n===M.kR.PLAN}return!1}))||[],h=y?g[y]:void 0,I=h&&![M.Xf.VPNBASIC,M.Xf.VISIONARY].includes(h.Name);return(0,j.jsxs)(o.Fragment,{children:[a!==M.pH.MAIL||s?(0,j.jsx)(payments_ProtonPlanPicker,{index:m,subscription:p,organization:u,plans:e,plansMap:g,plansNameMap:b,service:a,planIDs:t,cycle:n,currency:r,onChangeCycle:c,onChangePlanIDs:i,onBack:l?()=>l(a):void 0,className:"pb2 mb2"}):null,h&&I&&(0,j.jsx)(payments_ProtonPlanCustomizer,{loading:d,cycle:n,currency:r,plans:e,planIDs:t,plansMap:g,plansNameMap:b,currentPlan:h,service:a,organization:u,onChangePlanIDs:i,className:"pb2 mb2"})]},a)}))})};var sY,iY,cY,lY,subscription_SubscriptionModalHeader=({title:e,onBack:t})=>(0,j.jsxs)("div",{className:"flex flex-nowrap flex-align-items-center",children:[(0,j.jsx)("div",{className:"flex-item-fluid",children:t?(0,j.jsx)("button",{type:"button",onClick:()=>t(),children:(0,j.jsx)(pr.Z,{name:"arrow-left",alt:(0,u.c)("Action").t(oY||(oY=(0,d.Z)(["Back"])))})}):null}),(0,j.jsx)("div",{className:"flex-item-fluid flex-item-grow-2 text-center text-bold",children:e}),(0,j.jsx)("div",{className:"flex-item-fluid"})]});const dY=["onSubmit","onClose"];function CalendarDowngradeModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function CalendarDowngradeModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CalendarDowngradeModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CalendarDowngradeModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const uY=(0,Or.PO)(M.ei.PROTONCALENDAR);var pY,mY,gY,jY,bY,yY,subscription_CalendarDowngradeModal=e=>{let{onSubmit:t,onClose:n}=e,r=(0,Sn.Z)(e,dY);const a=(0,j.jsx)(dw.Z,{toApp:M.ei.PROTONACCOUNT,to:"/calendar/calendars",onClick:n,children:(0,u.c)("Action").t(sY||(sY=(0,d.Z)(["Open "," settings"])),uY)});return(0,j.jsx)(On.Z,CalendarDowngradeModal_objectSpread(CalendarDowngradeModal_objectSpread({title:(0,u.c)("Title").t(iY||(iY=(0,d.Z)(["Downgrade account"]))),submit:(0,u.c)("Action").t(cY||(cY=(0,d.Z)(["OK"]))),onSubmit:()=>{t(),n()},onClose:n,close:null},r),{},{children:(0,j.jsx)(Cn.Z,{className:"mb1",type:"warning",children:(0,u.c)("Info").jt(lY||(lY=(0,d.Z)(["You must remove any additional personal calendars and any shared calendar links before you can cancel your subscription. ",""])),a)})}))},hY=n(15579);const IY=["organization","onConfirm"];function MemberDowngradeModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function MemberDowngradeModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MemberDowngradeModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MemberDowngradeModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fY,MY,NY,xY,vY,wY,DY,SY,OY,payments_MemberDowngradeModal=e=>{let{organization:t,onConfirm:n}=e,r=(0,Sn.Z)(e,IY);const{validator:a,onFormSubmit:s}=(0,TD.Z)(),[i,c]=(0,o.useState)(""),l=t.Name;return(0,j.jsxs)(On.Z,MemberDowngradeModal_objectSpread(MemberDowngradeModal_objectSpread({small:!0,title:(0,u.c)("Title").t(pY||(pY=(0,d.Z)(["Delete organization?"]))),close:(0,u.c)("Action").t(mY||(mY=(0,d.Z)(["Cancel"]))),submit:(0,j.jsx)(po,{type:"submit",children:(0,u.c)("Action").t(gY||(gY=(0,d.Z)(["Delete"])))}),onSubmit:e=>{var t;e.preventDefault(),s()&&(n(),null===(t=r.onClose)||void 0===t||t.call(r))}},r),{},{children:[(0,j.jsx)("div",{className:"mb1",children:(0,u.c)("Member downgrade modal").t(jY||(jY=(0,d.Z)(["This will permanently delete all sub-users, accounts, and data associated with your organization."])))}),(0,j.jsx)(card_Card,{rounded:!0,className:"text-break user-select mb1",children:l}),(0,j.jsx)(kD.Z,{id:"confirm-text",bigger:!0,label:(0,u.c)("Label").t(bY||(bY=(0,d.Z)(["Enter organization name to confirm"]))),error:a([(0,hY.np)(i),i!==l?(0,u.c)("Error").t(yY||(yY=(0,d.Z)(["Organization not recognized. Try again."]))):""]),autoFocus:!0,value:i,onValue:c})]}))};const AY=["step","cycle","currency","coupon","planIDs","onClose","disableBackButton"];function SubscriptionModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SubscriptionModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SubscriptionModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SubscriptionModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const CY={[X_.CHECKOUT]:X_.CUSTOMIZATION};var subscription_SubscriptionModal=e=>{var t;let{step:n=X_.PLAN_SELECTION,cycle:r=M.jX,currency:a=M.a7,coupon:s,planIDs:i={},onClose:l,disableBackButton:m}=e,g=(0,Sn.Z)(e,AY);const b={[X_.NETWORK_ERROR]:(0,u.c)("Title").t(fY||(fY=(0,d.Z)(["Network error"]))),[X_.PLAN_SELECTION]:(0,u.c)("Title").t(MY||(MY=(0,d.Z)(["Select a plan"]))),[X_.CUSTOMIZATION]:(0,u.c)("Title").t(NY||(NY=(0,d.Z)(["Customize your plan"]))),[X_.CHECKOUT]:(0,u.c)("Title").t(xY||(xY=(0,d.Z)(["Checkout"]))),[X_.UPGRADE]:"",[X_.THANKS]:""},y=(0,o.useRef)(),h=(0,Dn.Z)(),{APP_NAME:I}=(0,Nn.Z)(),f=(0,fn.ku)(window.location.pathname),N=I===M.ei.PROTONVPN_SETTINGS||f===M.ei.PROTONVPN_SETTINGS,[x]=(0,bn.ZP)(),[v,w]=hooks_useSubscription(),[D]=hooks_useVPNCountriesCount(),{call:S}=(0,Ie.Z)(),{createModal:O}=(0,In.Z)(),{createNotification:A}=(0,hn.Z)(),[C=[],E]=hooks_usePlans(),[L,P]=(0,IO.o)(),[Z,T]=(0,no.Z)(),[k,z]=(0,no.Z)(),[_,R]=(0,o.useState)(),{Code:G}=(null==_?void 0:_.Coupon)||{},Y=(x.Credit+(null!==(t=null==_?void 0:_.Credit)&&void 0!==t?t:0))/100,U=N?M.pH.VPN:M.pH.MAIL,[F,K]=(0,o.useState)({service:U,step:n,cycle:r,currency:a,coupon:s,planIDs:i}),getCodes=({gift:e,coupon:t})=>[e,t].filter(Za.Z),handleSubscribe=async(e={})=>{if(!hasPlanIDs(F.planIDs))return(async()=>{const e=(await(0,sL.t)(h)).filter((0,c.Qm)(getIsPersonalCalendar)),t=!!(await Promise.all(e.map((e=>h((0,cL.i0)(e.ID)))))).flatMap((({CalendarUrls:e})=>e)).length;(e.length>1||t)&&await new Promise(((e,t)=>{O((0,j.jsx)(subscription_CalendarDowngradeModal,{onSubmit:e,onClose:()=>{null==l||l(),t()}}))})),((e={})=>!!e.Flags||!!e.LoyaltyCounter)(L)&&await new Promise(((e,t)=>{O((0,j.jsx)(payments_LossLoyaltyModal,{organization:L,onConfirm:e,onClose:t}))})),L.UsedMembers>1&&await new Promise(((e,t)=>{O((0,j.jsx)(payments_MemberDowngradeModal,{organization:L,onConfirm:e,onClose:t}))})),await h((0,iL.X$)()),await S(),null==l||l(),A({text:(0,u.c)("Success").t(vY||(vY=(0,d.Z)(["You have successfully unsubscribed"])))})})();try{K(SubscriptionModal_objectSpread(SubscriptionModal_objectSpread({},F),{},{step:X_.UPGRADE})),await h((0,iL.Ld)(SubscriptionModal_objectSpread({PlanIDs:F.planIDs,Codes:getCodes(F),Cycle:F.cycle},e))),await S(),K(SubscriptionModal_objectSpread(SubscriptionModal_objectSpread({},F),{},{step:X_.THANKS}))}catch(e){const{Code:t=0}=e.data||{};throw t===Bp.KI.PAYMENTS_SUBSCRIPTION_AMOUNT_MISMATCH&&(await check(),A({text:(0,u.c)("Error").t(wY||(wY=(0,d.Z)(["Checkout expired, please try again"]))),type:"error"})),K(SubscriptionModal_objectSpread(SubscriptionModal_objectSpread({},F),{},{step:X_.CHECKOUT})),e}},{card:B,setCard:W,errors:V,method:Q,setMethod:H,parameters:X,canPay:J,paypal:q,paypalCredit:$}=payments_usePayment({amount:F.step===X_.CHECKOUT&&(null==_?void 0:_.AmountDue)||0,currency:(null==_?void 0:_.Currency)||M.a7,onPay:e=>T(handleSubscribe(e))}),check=async(e=F,t=!1)=>{const n=SubscriptionModal_objectSpread({},e);if(!hasPlanIDs(e.planIDs))return R(((e=M.a7,t=M.jX)=>({Amount:0,AmountDue:0,Proration:0,Credit:0,Currency:e,Cycle:t,Gift:0,CouponDiscount:0,Coupon:null,Additions:null,PeriodEnd:0}))(F.currency,F.cycle)),void K(n);try{var r;const a=await h((0,iL.bM)({PlanIDs:e.planIDs,Currency:e.currency,Cycle:e.cycle,Codes:getCodes(e)})),{Gift:o=0}=a,{Code:s=""}=a.Coupon||{};t&&(null===(r=e.gift)||void 0===r?void 0:r.toLowerCase())!==s.toLowerCase()&&!o&&A({text:(0,u.c)("Error").t(DY||(DY=(0,d.Z)(["Invalid code"]))),type:"error"}),n.coupon=s,o||delete n.gift,K(n),R(a)}catch(e){"OfflineError"===e.name&&K(SubscriptionModal_objectSpread(SubscriptionModal_objectSpread({},F),{},{step:X_.NETWORK_ERROR}))}},handleCheckout=async()=>{if(F.step===X_.CUSTOMIZATION)return K(SubscriptionModal_objectSpread(SubscriptionModal_objectSpread({},F),{},{step:X_.CHECKOUT}));const e=await(async({params:e,api:t,createModal:n,mode:r})=>{const{Payment:a,Amount:o,Currency:s,PaymentMethodID:i}=e,{Type:c}=a||{};if(0===o)return e;if(c&&[HP,QP,VP].includes(c))return e;const{Token:l,Status:d,ApprovalURL:u,ReturnHost:p}=await t((0,iL.V3)({Payment:a,Amount:o,Currency:s,PaymentMethodID:i}));return d===FP?toParams(e,l,c):new Promise(((o,s)=>{n((0,j.jsx)(payments_PaymentVerificationModal,{mode:r,payment:a,params:e,token:l,onSubmit:o,onClose:s,onProcess:()=>{const e=new AbortController;return{promise:process({Token:l,api:t,ReturnHost:p,ApprovalURL:u,signal:e.signal}),abort:e}}}))}))})({params:SubscriptionModal_objectSpread({Amount:(null==_?void 0:_.AmountDue)||0,Currency:F.currency},X),createModal:O,api:h});return handleSubscribe(e)};(0,o.useEffect)((()=>{z(check())}),[F.cycle,F.currency]);const ee=CY[F.step],te=x.isFree&&!Object.keys(F.planIDs).length,ne=(0,j.jsx)(subscription_SubscriptionSubmitButton,{onClose:l,canPay:J,paypal:q,step:F.step,loading:k||Z,method:Q,checkResult:_,className:"w100",disabled:te||!_}),re=(0,j.jsx)("div",{className:"subscriptionCheckout-column bg-weak on-mobile-w100",children:(0,j.jsx)("div",{className:"subscriptionCheckout-container",children:(0,j.jsx)(subscription_SubscriptionCheckout,{submit:ne,plans:C,service:U,checkResult:_,loading:k,currency:F.currency,cycle:F.cycle,planIDs:F.planIDs,gift:F.gift,coupon:F.coupon,onChangeCurrency:e=>K(SubscriptionModal_objectSpread(SubscriptionModal_objectSpread({},F),{},{currency:e})),onChangeCycle:e=>K(SubscriptionModal_objectSpread(SubscriptionModal_objectSpread({},F),{},{cycle:e})),onChangeGift:(e="")=>{if(!e){const e=SubscriptionModal_objectSpread({},F);return delete e.gift,z(check(e))}z(check(SubscriptionModal_objectSpread(SubscriptionModal_objectSpread({},F),{},{gift:e}),!0))}})})});return(0,o.useEffect)((()=>{null!=y&&y.current&&(y.current.scrollTop=0)}),[F.step]),(0,j.jsxs)(On.Z,SubscriptionModal_objectSpread(SubscriptionModal_objectSpread({footer:null,innerRef:y,className:(0,ht.dh)(["subscription-modal",[X_.PLAN_SELECTION,X_.CUSTOMIZATION,X_.CHECKOUT].includes(F.step)&&"modal--full",x.isFree&&"is-free-user"]),title:(0,j.jsx)(subscription_SubscriptionModalHeader,{title:b[F.step],onBack:m||void 0===ee?void 0:()=>K(SubscriptionModal_objectSpread(SubscriptionModal_objectSpread({},F),{},{step:ee}))}),loading:Z||E||P||w,onSubmit:()=>T(handleCheckout()),onClose:l},g),{},{children:[F.step===X_.NETWORK_ERROR&&(0,j.jsx)(p.Z,{}),F.step===X_.PLAN_SELECTION&&(0,j.jsx)(subscription_PlanSelection,{loading:k,plans:C,currency:F.currency,cycle:F.cycle,planIDs:F.planIDs,organization:L,subscription:v,vpnCountries:D,service:F.service,onChangePlanIDs:e=>z(check(SubscriptionModal_objectSpread(SubscriptionModal_objectSpread({},F),{},{planIDs:e,step:X_.CUSTOMIZATION}))),onChangeCurrency:e=>K(SubscriptionModal_objectSpread(SubscriptionModal_objectSpread({},F),{},{currency:e})),onChangeCycle:e=>K(SubscriptionModal_objectSpread(SubscriptionModal_objectSpread({},F),{},{cycle:e}))}),F.step===X_.CUSTOMIZATION&&(0,j.jsxs)("div",{className:"flex-no-min-children on-mobile-flex-column",children:[(0,j.jsx)("div",{className:"flex-item-fluid on-mobile-w100 on-tablet-landscape-pr1 on-mobile-pr0",children:(0,j.jsx)("div",{className:"mlauto mrauto max-w50e border-bottom-children border-bottom-children--not-last",children:(0,j.jsx)(subscription_PlanCustomization,{plans:C,loading:k,currency:F.currency,cycle:F.cycle,planIDs:F.planIDs,subscription:v,organization:L,service:U,onChangePlanIDs:e=>z(check(SubscriptionModal_objectSpread(SubscriptionModal_objectSpread({},F),{},{planIDs:e}))),onChangeCycle:e=>K(SubscriptionModal_objectSpread(SubscriptionModal_objectSpread({},F),{},{cycle:e})),onBack:e=>K(SubscriptionModal_objectSpread(SubscriptionModal_objectSpread({},F),{},{service:e,step:X_.PLAN_SELECTION}))})})}),re]}),F.step===X_.CHECKOUT&&(0,j.jsxs)("div",{className:"flex-no-min-children on-mobile-flex-column",children:[(0,j.jsx)("div",{className:"flex-item-fluid on-mobile-w100 on-tablet-landscape-pr1 on-mobile-pr0",children:(0,j.jsx)("div",{className:"mlauto mrauto max-w37e on-mobile-max-w100  ",children:null!=_&&_.AmountDue?(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(payments_Payment,{type:"subscription",paypal:q,paypalCredit:$,method:Q,amount:_.AmountDue,currency:_.Currency,coupon:G,card:B,onMethod:H,onCard:W,errors:V})}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Cn.Z,{className:"mb1",children:(0,u.c)("Info").t(SY||(SY=(0,d.Z)(["No payment is required at this time."])))}),null!=_&&_.Credit&&Y?(0,j.jsx)(Cn.Z,{className:"mb1",children:(0,u.c)("Info").t(OY||(OY=(0,d.Z)(["Please note that upon clicking the Confirm button, your account will have "," credits remaining."])),Y)}):null]})})}),re]}),F.step===X_.UPGRADE&&(0,j.jsx)("div",{className:"text-center",children:(0,j.jsx)(subscription_SubscriptionUpgrade,{})}),F.step===X_.THANKS&&(0,j.jsx)(subscription_SubscriptionThanks,{method:Q,onClose:l})]}))};const EY=["color","shape","text","icon","disabled","className","hasRedDot","tabIndex","children"];function TopNavbarListItemButton_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function TopNavbarListItemButton_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?TopNavbarListItemButton_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TopNavbarListItemButton_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var LY,PY,ZY,TY,kY,zY,_Y,RY,GY,YY,UY,FY,KY,BY,WY,VY,QY,HY,XY,JY,qY,$Y,eU,tU,nU,rU=(0,o.forwardRef)(((e,t)=>{let{color:n="weak",shape:r="ghost",text:a,icon:s,disabled:i,className:c,hasRedDot:l,tabIndex:d,children:u}=e,p=(0,Sn.Z)(e,EY);const m=i;return(0,j.jsxs)(VI.Z,TopNavbarListItemButton_objectSpread(TopNavbarListItemButton_objectSpread({as:"button",color:n,shape:r,className:(0,ht.dh)(["topnav-link inline-flex flex-nowrap flex-align-items-center",l&&"relative topnav-link--blackfriday",c]),disabled:m,tabIndex:m?-1:d,ref:t},p),{},{children:[(0,o.cloneElement)(s,{className:(0,ht.dh)([s.props.className,"topnav-icon mr0-5"])}),(0,j.jsx)("span",{className:"navigation-title",children:a}),u]}))}));const aU=["offer","onSelect"];function BlackFridayModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function BlackFridayModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?BlackFridayModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BlackFridayModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const{MONTHLY:oU,YEARLY:sU,TWO_YEARS:iU}=M.d1;var cU,subscription_BlackFridayModal=e=>{let{offer:t,onSelect:n}=e,r=(0,Sn.Z)(e,aU);const a=(0,Dn.Z)(),[s,i]=(0,no.Z)(),[c,l]=(0,o.useState)(M.a7),[p,m]=(0,o.useState)({}),g="black-friday"===t.name,b="product-payer"===t.name,y=g?(0,u.c)("blackfriday: VPNspecialoffer Title").t(LY||(LY=(0,d.Z)(["Get the special year-end offer on our Premium VPN PLUS plan"]))):(0,u.c)("blackfriday Title").t(PY||(PY=(0,d.Z)(["Save more when combining Mail and VPN"]))),h=(0,Or.PO)(M.ei.PROTONDRIVE),I={[oU]:(0,u.c)("blackfriday: VPNspecialoffer Title").t(ZY||(ZY=(0,d.Z)(["1 month"]))),[sU]:(0,u.c)("blackfriday: VPNspecialoffer Title").t(TY||(TY=(0,d.Z)(["12 months"]))),[iU]:(0,u.c)("blackfriday: VPNspecialoffer Title").t(kY||(kY=(0,d.Z)(["24 months"])))},BILLED_DESCRIPTION=({cycle:e,amount:t,notice:n})=>{const r=(0,j.jsx)("sup",{children:n},"notice");return e===oU?(0,u.c)("blackfriday: VPNspecialoffer Title").jt(zY||(zY=(0,d.Z)(["Billed at "," for the first month.",""])),t,r):e===sU?(0,u.c)("blackfriday: VPNspecialoffer Title").jt(_Y||(_Y=(0,d.Z)(["Billed at "," for the first year.",""])),t,r):e===iU?(0,u.c)("blackfriday: VPNspecialoffer Title").jt(RY||(RY=(0,d.Z)(["Billed at "," for the first 2 years.",""])),t,r):null},AFTER_INFO=({amount:e,notice:t})=>1===t?(0,u.c)("blackfriday: VPNspecialoffer Title").jt(GY||(GY=(0,d.Z)(["(",") Renews after 2 years at a standard discounted 2-year price of "," (33% discount)"])),t,e):2===t?(0,u.c)("blackfriday: VPNspecialoffer Title").jt(YY||(YY=(0,d.Z)(["(",") Renews after 1 year at a standard discounted annual price of "," (20% discount)"])),t,e):3===t?(0,u.c)("blackfriday: VPNspecialoffer Title").jt(UY||(UY=(0,d.Z)(["(",") Renews after 1 month at a standard monthly price of ",""])),t,e):null,getCTA=e=>b?(0,u.c)("blackfriday Action").t(FY||(FY=(0,d.Z)(["Get the offer"]))):e?(0,u.c)("blackfriday: VPNspecialoffer Action").t(KY||(KY=(0,d.Z)(["Get the deal now"]))):(0,u.c)("blackfriday: VPNspecialoffer Action").t(BY||(BY=(0,d.Z)(["Get the deal"])));return(0,o.useEffect)((()=>{i((async()=>{try{const e=await Promise.all(t.plans.map((({planIDs:e=[],cycle:t=M.jX,couponCode:n})=>Promise.all([a((0,iL.bM)({PlanIDs:e,CouponCode:n,Currency:c,Cycle:t})),a((0,iL.bM)({PlanIDs:e,Currency:c,Cycle:t})),a((0,iL.bM)({PlanIDs:e,Currency:c,Cycle:oU}))]))));m(e.reduce(((e,[t,n,r],a)=>(e[a]={withCoupon:t.Amount+(t.CouponDiscount||0),withoutCoupon:n.Amount+(n.CouponDiscount||0),withoutCouponMonthly:r.Amount},e)),{}))}catch(t){var e;throw null===(e=r.onClose)||void 0===e||e.call(r),t}})())}),[]),(0,j.jsx)(On.Z,BlackFridayModal_objectSpread(BlackFridayModal_objectSpread({title:y,loading:s,footer:null,className:(0,ht.dh)(["blackfriday-mail-modal",t.isVPNOnly&&"blackfriday-mail-modal--vpn"])},r),{},{children:s?(0,j.jsx)("div",{className:"text-center",children:(0,j.jsx)(wI.Z,{size:50,className:"center flex mb2"})}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:(0,ht.dh)(["flex flex-nowrap flex-justify-space-around on-mobile-flex-column",b?"mt2":"mt4"]),children:t.plans.map((({name:e,cycle:a,planIDs:o,popular:s,couponCode:i},l)=>{const m="".concat(l),{withCoupon:g=0,withoutCouponMonthly:y=0}=p[l]||{},f=g/a,M=100-Math.round(100*f/y),N=(0,j.jsx)(price_Price,{currency:c,className:"blackfriday-monthly-price",suffix:(0,u.c)("blackfriday: VPNspecialoffer info").t(XY||(XY=(0,d.Z)(["per month"]))),isDisplayedInSentence:!0,children:g/a}),x=(0,j.jsx)(price_Price,{currency:c,isDisplayedInSentence:!0,children:g},m),v=(0,j.jsx)("span",{className:(0,ht.dh)([!1===t.isVPNOnly&&"text-strike"]),children:(0,j.jsx)(price_Price,{currency:c,children:y*a})},m);return(0,j.jsxs)("div",{className:(0,ht.dh)(["relative flex blackfriday-plan-container",s&&"blackfriday-plan-container--mostPopular",b&&"blackfriday-plan-container--productPayer"]),children:[M?(0,j.jsx)("span",{className:(0,ht.dh)(["text-uppercase text-bold absolute blackfriday-percentage text-center",s?"bg-danger":"bg-primary"]),children:(0,u.c)("blackfriday: VPNspecialoffer Info").jt(JY||(JY=(0,d.Z)(["Save ","%"])),M)}):null,s?(0,j.jsx)("div",{className:"text-uppercase absolute text-bold bg-primary pt0-75 pb0-5 mt0 mb0 text-center blackfriday-mostPopular",children:t.isVPNOnly?(0,u.c)("blackfriday Title").t(qY||(qY=(0,d.Z)(["Best deal"]))):(0,u.c)("blackfriday Title").t($Y||($Y=(0,d.Z)(["Most popular"])))}):null,(0,j.jsxs)("div",{className:(0,ht.dh)(["blackfriday-plan w100 bordered p1 mb1 flex flex-column flex-align-items-center flex-justify-end",s&&"border-color-primary"]),children:[(0,j.jsxs)("div",{className:"blackfriday-plan-namePeriod",children:[(0,j.jsx)("strong",{className:"blackfriday-plan-name block text-center text-lg mt0-5 mb0",children:e}),(0,j.jsx)("strong",{className:"block text-center",children:I[a]})]}),(0,j.jsx)("div",{className:"mb1 mt1 text-center lh130",children:N}),(0,j.jsx)("div",{className:"text-center flex-item-fluid-auto",children:Object.keys(o).length>1?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("p",{className:"m0",children:(0,u.c)("blackfriday Info").t(eU||(eU=(0,d.Z)(["Includes"])))}),(0,j.jsxs)("p",{className:(0,ht.dh)(["mt0",s&&"color-success"]),children:[(0,j.jsxs)("strong",{className:"blackfriday-protonDrive-productName ml0-25",children:[h," ",(0,u.c)("blackfriday Info").t(tU||(tU=(0,d.Z)(["beta"])))]}),(0,j.jsx)(fc.Z,{buttonClass:"inline-flex color-inherit ml0-25 mb0-1",url:"https://protonmail.com/support/knowledge-base/protondrive-early-access/?utm_campaign=ww-en-2c-mail-coms_inapp-protondrive_learn_more&utm_source=webmail&utm_medium=app_ad&utm_content=tooltip_v4"})]})]}):null}),(0,j.jsx)(Ea.Z,{color:"norm",shape:s||b?"solid":"outline",className:(0,ht.dh)(["mb1 text-uppercase"]),onClick:()=>{var e;null===(e=r.onClose)||void 0===e||e.call(r),n({planIDs:o,cycle:a,currency:c,couponCode:i})},children:getCTA(s)}),t.isVPNOnly?(0,j.jsx)(j.Fragment,{children:(0,j.jsx)("small",{className:"text-bold text-center color-weak",children:BILLED_DESCRIPTION({cycle:a,amount:x,notice:l+1})})}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("small",{className:"text-bold",children:BILLED_DESCRIPTION({cycle:a,amount:x,notice:l+1})}),(0,j.jsx)("small",{className:"color-weak blackfriday-standardPrice mb1",children:(0,u.c)("blackfriday Info").jt(nU||(nU=(0,d.Z)(["Standard price: ",""])),v)})]})]})]},m)}))}),(0,j.jsx)("div",{className:"mb1 text-center blackfriday-currency-selector",children:(0,j.jsx)(payments_CurrencySelector,{id:"currency-select",mode:"buttons",currency:c,onSelect:l})}),(()=>{var e;if(b)return(0,j.jsxs)("p",{className:"text-xs color-weak text-center",children:["(1)"," ",(0,u.c)("blackfriday Info").t(WY||(WY=(0,d.Z)(["This subscription will automatically renew after 2 years at the same rate until it is cancelled."])))]});const n=(0,j.jsx)(price_Price,{currency:c,suffix:(0,u.c)("Suffix for price").t(VY||(VY=(0,d.Z)(["/ month"]))),children:(null===(e=p[2])||void 0===e?void 0:e.withoutCoupon)||0},"standard-pricing");return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:"text-xs mt1 mb0 color-weak text-center",children:(0,j.jsx)(Tu.Z,{url:"https://protonvpn.com/support/year-end-offer-terms-2021",children:(0,u.c)("blackfriday: VPNspecialoffer Info").t(QY||(QY=(0,d.Z)(["Special offer Terms and Conditions"])))})}),(0,j.jsx)("p",{className:"text-xs mt0 mb0 color-weak text-center",children:(0,u.c)("blackfriday: VPNspecialoffer Info").jt(HY||(HY=(0,d.Z)(["Discounts are based on standard monthly pricing of ",""])),n)}),t.plans.map(((e,t)=>{const n="".concat(t),{withoutCoupon:r=0}=p[t]||{},a=(0,j.jsx)(price_Price,{currency:c,isDisplayedInSentence:!0,children:r},n);return(0,j.jsx)("p",{className:"text-xs mt0 mb0 color-weak text-center",children:AFTER_INFO({notice:t+1,amount:a})},n)}))]})})()]})}))};var heading_TopNavbarListItemBlackFridayButton=({offer:e})=>{const{APP_NAME:t}=(0,Nn.Z)(),{createModal:n}=(0,In.Z)(),r=t===M.ei.PROTONVPN_SETTINGS||"black-friday"===e.name,a=(0,u.c)("blackfriday: VPNspecialoffer Promo title, need to be short").t(cU||(cU=(0,d.Z)(["Special offer"]))),onSelect=({planIDs:e,cycle:t,currency:r,couponCode:a})=>{n((0,j.jsx)(subscription_SubscriptionModal,{planIDs:e,cycle:t,currency:r,coupon:a,step:X_.CHECKOUT,disableBackButton:!0}))};return(0,j.jsx)(rU,{as:"button",type:"button",title:a,hasRedDot:r,icon:(0,j.jsx)(pr.Z,{name:"bag-percent"}),text:a,onClick:()=>{n((0,j.jsx)(subscription_BlackFridayModal,{offer:e,onSelect:onSelect}))}})};const isBlackFridayPeriod=()=>(0,al.Z)(new Date,{start:M.rV.START,end:M.rV.END}),isProductPayerPeriod=()=>(0,Bc.Z)(new Date,M.eD.START),isProductPayer=e=>{if(!e)return!1;const t=(null==e?void 0:e.CouponCode)||"",n=hasMailPlus(e)||hasVpnBasic(e)||hasVpnPlus(e),r=!hasMailProfessional(e),a=!(hasMailPlus(e)&&hasVpnPlus(e)),o=![M.rV.COUPON_CODE,M.rX.BLACK_FRIDAY_2020].includes(t),s=!(({Plans:e=[]})=>e.some((({Type:e})=>e===cO)))(e);return n&&r&&a&&o&&s};var hooks_useBlackFridayPeriod=()=>{const[e,t]=(0,o.useState)(isBlackFridayPeriod);return(0,o.useEffect)((()=>{const e=setInterval((()=>{t(isBlackFridayPeriod())}),6e4);return()=>{clearInterval(e)}}),[]),e};var hooks_useProductPayerPeriod=()=>{const[e,t]=(0,o.useState)(isProductPayerPeriod());return(0,o.useEffect)((()=>{const e=setInterval((()=>{t(isProductPayerPeriod())}),6e4);return()=>{clearInterval(e)}}),[]),e};var heading_usePromotionOffer=()=>{const e=(0,Dn.Z)(),{APP_NAME:t}=(0,Nn.Z)(),[{isFree:n,isDelinquent:r,canPay:a}]=(0,bn.ZP)(),[s=[],i]=hooks_usePlans(),[c,l]=hooks_useSubscription(),[d,u]=(0,o.useState)(void 0),p=hooks_useBlackFridayPeriod(),m=hooks_useProductPayerPeriod(),[g,j]=(0,no.Z)(),b=(0,Ne.qL)(s,"Name"),y=g||i||l,h=!y&&!!s.length&&!!c&&!!d&&a&&!r&&p&&((e,t)=>{var n,r,a;if(1===(null==e||null===(n=e.Plans)||void 0===n?void 0:n.length)){var o;if(hasVpnPlus(e)&&(null===(o=e.Plans[0])||void 0===o?void 0:o.Cycle)===M.d1.MONTHLY)return!0;if(hasVpnBasic(e))return!0}return!((null!==(r=null==t?void 0:t.LastSubscriptionEnd)&&void 0!==r?r:0)>IR||null!=e&&null!==(a=e.Plans)&&void 0!==a&&a.length)})(c,d),I=!y&&!!s.length&&!!c&&!r&&a&&!h&&m&&isProductPayer(c),f=h?{name:"black-friday",isVPNOnly:!0,plans:[{name:"",cycle:M.d1.TWO_YEARS,planIDs:{[b.vpnplus.ID]:1},couponCode:M.rV.COUPON_CODE,popular:!0},{name:"",cycle:M.d1.YEARLY,planIDs:{[b.vpnplus.ID]:1},couponCode:M.rV.COUPON_CODE},{name:"",cycle:M.d1.MONTHLY,planIDs:{[b.vpnplus.ID]:1},couponCode:M.rV.COUPON_CODE}]}:void 0,N=I?{name:"product-payer",plans:[{name:t===M.ei.PROTONVPN_SETTINGS?"ProtonVPN Plus + ProtonMail Plus":"ProtonMail Plus + ProtonVPN Plus",cycle:M.d1.TWO_YEARS,planIDs:{[b.plus.ID]:1,[b.vpnplus.ID]:1}}]}:void 0,x=hooks_useIsMounted();return(0,o.useEffect)((()=>{if(!p)return;if(!n)return void u({LastSubscriptionEnd:0});j((async()=>{const t=await e((0,iL.P3)()).catch((()=>{}));x()&&u(t)})())}),[p,n]),f||N};const lU=["children","className"];function TopNavbar_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function TopNavbar_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?TopNavbar_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TopNavbar_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var topnavbar_TopNavbar=e=>{let{children:t,className:n}=e,r=(0,Sn.Z)(e,lU);return(0,j.jsx)("div",TopNavbar_objectSpread(TopNavbar_objectSpread({className:(0,ht.dh)(["flex flex-justify-end topnav-container on-mobile-no-flex flex-item-centered-vert flex-item-fluid",n])},r),{},{children:t}))};var topnavbar_TopNavbarList=({children:e})=>{const t=o.Children.toArray(e).filter((e=>(0,o.isValidElement)(e))).length;return(0,j.jsx)("ul",{className:(0,ht.dh)(["topnav-list unstyled mt0 mb0 ml1 flex flex-nowrap flex-align-items-center",t>=4&&"topnav-list--four-elements"]),children:e})};const dU=["children","noShrink","collapsedOnDesktop","className"];function TopNavbarListItem_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function TopNavbarListItem_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?TopNavbarListItem_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TopNavbarListItem_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var uU,pU,mU,gU,jU,topnavbar_TopNavbarListItem=e=>{let{children:t,noShrink:n,collapsedOnDesktop:r=!0,className:a}=e,s=(0,Sn.Z)(e,dU);return(0,o.isValidElement)(t)?(0,j.jsx)("li",TopNavbarListItem_objectSpread(TopNavbarListItem_objectSpread({className:(0,ht.dh)(["topnav-listItem",n&&"flex-item-noshrink",!r&&"topnav-listItem--noCollapse",a])},s),{},{children:t})):null};var bU,yU,heading_PrivateHeader=({isNarrow:e,hasAppsDropdown:t=!0,logo:n,settingsButton:r,contactsButton:a,feedbackButton:o,backUrl:s,searchBox:i,searchDropdown:c,floatingButton:l,expanded:p,onToggleExpand:m,onOpenChat:g,title:b})=>{const[{hasPaidMail:y,hasPaidVpn:h}]=(0,bn.ZP)(),{APP_NAME:I}=(0,Nn.Z)(),f=heading_usePromotionOffer();if(s)return(0,j.jsxs)(header_Header,{children:[(0,j.jsx)(rU,{"data-test-id":"view:general-back",as:dw.Z,to:s,icon:(0,j.jsx)(pr.Z,{name:"arrow-left"}),text:(0,u.c)("Title").t(uU||(uU=(0,d.Z)(["Back"])))}),(0,j.jsx)(topnavbar_TopNavbar,{children:(0,j.jsx)(topnavbar_TopNavbarList,{children:(0,j.jsx)(topnavbar_TopNavbarListItem,{children:(0,j.jsx)(heading_UserDropdown,{})})})})]});const N=I===M.ei.PROTONVPN_SETTINGS;return(0,j.jsxs)(header_Header,{children:[(0,j.jsxs)("div",{className:"logo-container flex flex-justify-space-between flex-align-items-center flex-nowrap no-mobile",children:[n,t?(0,j.jsx)(app_AppsDropdown,{}):null]}),(0,j.jsx)(sidebar_Hamburger,{expanded:p,onToggle:m}),b&&e?(0,j.jsx)("span",{className:"text-xl lh-rg mtauto mbauto text-ellipsis",children:b}):null,e?null:i,(0,j.jsx)(topnavbar_TopNavbar,{children:(0,j.jsxs)(topnavbar_TopNavbarList,{children:[e&&c?(0,j.jsx)(topnavbar_TopNavbarListItem,{children:c}):null,f?(0,j.jsx)(topnavbar_TopNavbarListItem,{noShrink:!0,children:(0,j.jsx)(heading_TopNavbarListItemBlackFridayButton,{offer:f})}):null,y||N?null:(0,j.jsx)(topnavbar_TopNavbarListItem,{noShrink:!0,collapsedOnDesktop:!1,children:(0,j.jsx)(rU,{as:sh.Z,shape:"outline",color:"norm",text:(0,u.c)("Link").t(pU||(pU=(0,d.Z)(["Upgrade"]))),icon:(0,j.jsx)(pr.Z,{name:"arrow-up-big-line"}),path:"/dashboard",title:(0,u.c)("Link").t(mU||(mU=(0,d.Z)(["Go to subscription plans"])))})}),h||!N||N&&f?null:(0,j.jsx)(topnavbar_TopNavbarListItem,{noShrink:!0,collapsedOnDesktop:!1,children:(0,j.jsx)(rU,{as:dw.Z,text:(0,u.c)("Link").t(gU||(gU=(0,d.Z)(["Upgrade"]))),icon:(0,j.jsx)(pr.Z,{name:"arrow-up-big-line"}),to:"/dashboard",title:(0,u.c)("Link").t(jU||(jU=(0,d.Z)(["Go to subscription plans"])))})}),o?(0,j.jsx)(topnavbar_TopNavbarListItem,{noShrink:!0,children:o}):null,a?(0,j.jsx)(topnavbar_TopNavbarListItem,{noShrink:!0,children:a}):null,r?(0,j.jsx)(topnavbar_TopNavbarListItem,{noShrink:!0,children:r}):null,!e&&(0,j.jsx)(topnavbar_TopNavbarListItem,{noShrink:!0,className:"flex-align-self-stretch topnav-vr",children:(0,j.jsx)(vr_Vr,{className:"h100 mr1 ml1"})}),(0,j.jsx)(topnavbar_TopNavbarListItem,{className:"relative",children:(0,j.jsx)(heading_UserDropdown,{onOpenChat:g})})]})}),e&&l?l:null]})};function ThemesModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ThemesModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ThemesModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ThemesModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var themes_ThemesModal=e=>{const t=(0,Dn.Z)(),[n,r]=(0,tA.Fg)();return(0,j.jsxs)(On.Z,ThemesModal_objectSpread(ThemesModal_objectSpread({},e),{},{intermediate:!0,close:null,submit:(0,u.c)("Action").t(bU||(bU=(0,d.Z)(["OK"]))),onSubmit:()=>{var t;null===(t=e.onClose)||void 0===t||t.call(e)},children:[(0,j.jsx)("div",{className:"h2 text-center mb1",children:(0,u.c)("Title").t(yU||(yU=(0,d.Z)(["Select a theme"])))}),(0,j.jsx)("div",{className:"flex",children:(0,j.jsx)(themes_ThemeCards,{className:"theme-modal-list",list:sO.Db,themeIdentifier:n,onChange:e=>{r(e),t((0,oO.Rg)(e))}})})]}))};var hU,IU,fU,MU,NU,xU,vU,hooks_useSynchronizingState=e=>{const[t,n]=(0,o.useState)(e);return(0,o.useEffect)((()=>{n(e)}),[e]),[t,n]};function EarlyAccessModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function EarlyAccessModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?EarlyAccessModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EarlyAccessModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wU,DU,earlyAccess_EarlyAccessModal=e=>{const t=(0,nO.ZP)(),[n,r]=hooks_useSynchronizingState(t.value);return(0,j.jsxs)(On.Z,EarlyAccessModal_objectSpread(EarlyAccessModal_objectSpread({},e),{},{intermediate:!0,close:(0,u.c)("Action").t(hU||(hU=(0,d.Z)(["Cancel"]))),submit:(0,j.jsx)(Ea.Z,{type:"submit",color:"norm",loading:t.loading,disabled:n===t.value||!t.canUpdate,children:(0,u.c)("Action").t(IU||(IU=(0,d.Z)(["Apply"])))}),loading:t.loading,onSubmit:async()=>{await t.update(n),window.location.reload()},children:[(0,j.jsx)("div",{className:"h2",children:(0,u.c)("Title").t(fU||(fU=(0,d.Z)(["Beta Access"])))}),(0,j.jsx)("p",{children:(0,u.c)("Beta access description").t(MU||(MU=(0,d.Z)(["Beta Access lets you use the beta version of ProtonMail, Proton Calendar, and Proton Drive before they are released to the public. This means you can be the first to try new products, get new updates, and use new features."])))}),(0,j.jsx)("p",{children:(0,u.c)("Beta access description").t(NU||(NU=(0,d.Z)(["If you encounter issues, you can always disable Beta Access."])))}),(0,j.jsx)("div",{className:"mb0-5 flex flex-align-items-center",children:(0,j.jsxs)("label",{className:"flex flex-nowrap",htmlFor:"enable-early-access-checkbox",children:[(0,j.jsx)(Nr,{id:"enable-early-access-checkbox",checked:n,onChange:async e=>{r(e.target.checked)},className:"mr0-5"}),(0,u.c)("Label").t(xU||(xU=(0,d.Z)(["Enable Beta Access"])))]})}),(0,j.jsx)("p",{className:"mb0-5 color-weak",children:(0,u.c)("Refresh on apply warning").t(vU||(vU=(0,d.Z)(["Note: the service will reload after you click the Apply button."])))})]}))},SU=n(34019),OU=n(35334);var input_LayoutCard=({label:e,src:t,selected:n,onChange:r,disabled:a,describedByID:o})=>(0,j.jsx)(Ea.Z,{name:"layoutCard",shape:"outline",color:n?"norm":"weak",className:(0,ht.dh)(["mr1 mb1 layout-card-button",n&&"is-active no-pointer-events text-bold"]),"aria-pressed":n,onClick:r,disabled:a,type:"button","aria-label":(0,u.c)("Action").t(wU||(wU=(0,d.Z)(["Use “","” setting"])),e),title:(0,u.c)("Action").t(DU||(DU=(0,d.Z)(["Use “","” setting"])),e),"aria-describedby":o,children:(0,j.jsxs)("span",{className:"flex flex-nowrap flex-column",children:[(0,j.jsx)("img",{alt:"",src:t,className:"mb0-5 layout-card-image on-rtl-mirror",width:149,height:82}),(0,j.jsx)("span",{children:e})]})});var AU,CU,input_LayoutCards=({list:e=[],className:t,liClassName:n,describedByID:r})=>(0,j.jsx)("ul",{className:(0,ht.dh)(["unstyled m0 flex",t]),children:e.map((({selected:e,label:t,src:a,onChange:o,disabled:s},i)=>(0,j.jsx)("li",{className:n,children:(0,j.jsx)(input_LayoutCard,{selected:e,label:t,src:a,onChange:o,disabled:s,describedByID:r},i.toString())},t)))});const EU=["density","onChange","loading","className","liClassName","describedByID"];function DensityRadiosCards_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const{COMFORTABLE:LU,COMPACT:PU}=M.pw;var ZU,TU,kU,zU,layouts_DensityRadiosCards=e=>{let{density:t,onChange:n,loading:r,className:a,liClassName:o,describedByID:s}=e,i=(0,Sn.Z)(e,EU);const c={value:LU,selected:t===LU,disabled:r,name:"density",label:(0,u.c)("Label to change density").t(AU||(AU=(0,d.Z)(["Comfortable"]))),onChange(){n(LU)},src:SU,describedByID:s},l={value:PU,selected:t===PU,disabled:r,name:"density",label:(0,u.c)("Label to change density").t(CU||(CU=(0,d.Z)(["Compact"]))),onChange(){n(PU)},src:OU,describedByID:s};return(0,j.jsx)(input_LayoutCards,function DensityRadiosCards_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DensityRadiosCards_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DensityRadiosCards_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({list:[c,l],className:a,liClassName:o,describedByID:s},i))};function MailDensityModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function MailDensityModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MailDensityModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MailDensityModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _U,RU,mail_MailDensityModal=e=>{let t=(0,hd.Z)({},e);const n=(0,Dn.Z)(),{call:r}=(0,Ie.Z)(),[{Density:a}]=(0,Dr.Z)(),[o,s]=(0,no.Z)(),{createNotification:i}=(0,hn.Z)(),c=(0,u.c)("Title").t(ZU||(ZU=(0,d.Z)(["Mailbox density"])));return(0,j.jsx)(On.Z,MailDensityModal_objectSpread(MailDensityModal_objectSpread({title:c,intermediate:!0,close:null,submit:(0,u.c)("Action").t(kU||(kU=(0,d.Z)(["OK"]))),onSubmit:()=>{var e;return null===(e=t.onClose)||void 0===e?void 0:e.call(t)}},t),{},{children:(0,j.jsxs)("div",{className:"flex flex-nowrap mb1 on-mobile-flex-column flex-column",children:[(0,j.jsx)("span",{className:"mb1",id:"densityMode_desc",children:(0,u.c)("Label").t(zU||(zU=(0,d.Z)(["Select how your list of messages looks like by default."])))}),(0,j.jsx)(layouts_DensityRadiosCards,{density:a,describedByID:"densityMode_desc",onChange:e=>s((async e=>{await n((0,oO.n_)(e)),await r(),i({text:(0,u.c)("Success").t(TU||(TU=(0,d.Z)(["Preference saved"])))})})(e)),loading:o,liClassName:"w100",className:"layoutCards-two-per-row"})]})}))},GU=n(76414),YU=n(50068);const UU=["viewLayout","onChange","loading","className","liClassName","describedByID"];function ViewLayoutCards_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const{COLUMN:FU,ROW:KU}=M.p9;var BU,WU,VU,QU,layouts_ViewLayoutCards=e=>{let{viewLayout:t,onChange:n,loading:r,className:a,liClassName:o,describedByID:s}=e,i=(0,Sn.Z)(e,UU);const c={value:FU,selected:t===FU,disabled:r,name:"viewLayout",label:(0,u.c)("Label to change view layout").t(_U||(_U=(0,d.Z)(["Column"]))),onChange(){n(FU)},src:GU,describedByID:s},l={value:KU,selected:t===KU,disabled:r,name:"viewLayout",label:(0,u.c)("Label to change view layout").t(RU||(RU=(0,d.Z)(["Row"]))),onChange(){n(KU)},src:YU,describedByID:s};return(0,j.jsx)(input_LayoutCards,function ViewLayoutCards_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ViewLayoutCards_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ViewLayoutCards_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({list:[c,l],className:a,liClassName:o,describedByID:s},i))};function MailViewLayoutModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function MailViewLayoutModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MailViewLayoutModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MailViewLayoutModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var HU,XU,mail_MailViewLayoutModal=e=>{let t=(0,hd.Z)({},e);const n=(0,Dn.Z)(),{call:r}=(0,Ie.Z)(),[{ViewLayout:a=0}={}]=useMailSettings(),[o,s]=(0,no.Z)(),{createNotification:i}=(0,hn.Z)(),c=(0,u.c)("Title").t(BU||(BU=(0,d.Z)(["Mailbox layout"])));return(0,j.jsx)(On.Z,MailViewLayoutModal_objectSpread(MailViewLayoutModal_objectSpread({title:c,intermediate:!0,close:null,submit:(0,u.c)("Action").t(VU||(VU=(0,d.Z)(["OK"]))),onSubmit:()=>{var e;return null===(e=t.onClose)||void 0===e?void 0:e.call(t)}},t),{},{children:(0,j.jsxs)("div",{className:"flex flex-nowrap mb1 on-mobile-flex-column flex-column",children:[(0,j.jsx)("span",{className:"mb1",id:"layoutMode_desc",children:(0,u.c)("Label").t(QU||(QU=(0,d.Z)(["Select how your mailbox looks like by default."])))}),(0,j.jsx)(layouts_ViewLayoutCards,{describedByID:"layoutMode_desc",viewLayout:a,onChange:e=>s((async e=>{await n((0,Fg.y_)(e)),await r(),i({text:(0,u.c)("Success").t(WU||(WU=(0,d.Z)(["Preference saved"])))})})(e)),loading:o,liClassName:"w100",className:"layoutCards-two-per-row"})]})}))},JU=n(32394),qU=n(8554);const $U=["composerMode","onChange","className","liClassName","loading","describedByID"];function ComposerModeCards_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const{POPUP:eF,MAXIMIZED:tF}=M.yq;var nF,rF,aF,oF,layouts_ComposerModeCards=e=>{let{composerMode:t,onChange:n,className:r,liClassName:a,loading:o,describedByID:s}=e,i=(0,Sn.Z)(e,$U);const c={value:eF,selected:t===eF,disabled:o,name:"composerMode",label:(0,u.c)("Label to change composer mode").t(HU||(HU=(0,d.Z)(["Normal"]))),onChange(){n(eF)},src:JU,describedByID:s},l={value:tF,selected:t===tF,disabled:o,name:"composerMode",label:(0,u.c)("Label to change composer mode").t(XU||(XU=(0,d.Z)(["Maximized"]))),onChange(){n(tF)},src:qU,describedByID:s};return(0,j.jsx)(input_LayoutCards,function ComposerModeCards_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ComposerModeCards_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ComposerModeCards_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({list:[c,l],className:r,liClassName:a,describedByID:s},i))};function MailComposerModeModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function MailComposerModeModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MailComposerModeModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MailComposerModeModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var sF,iF,cF,lF,mail_MailComposerModeModal=e=>{let t=(0,hd.Z)({},e);const n=(0,Dn.Z)(),{call:r}=(0,Ie.Z)(),[{ComposerMode:a=0}={}]=useMailSettings(),[o,s]=(0,no.Z)(),{createNotification:i}=(0,hn.Z)(),c=(0,u.c)("Title").t(nF||(nF=(0,d.Z)(["Composer mode"])));return(0,j.jsx)(On.Z,MailComposerModeModal_objectSpread(MailComposerModeModal_objectSpread({title:c,intermediate:!0,close:null,submit:(0,u.c)("Action").t(aF||(aF=(0,d.Z)(["OK"]))),onSubmit:()=>{var e;return null===(e=t.onClose)||void 0===e?void 0:e.call(t)}},t),{},{children:(0,j.jsxs)("div",{className:"flex flex-nowrap mb1 on-mobile-flex-column flex-column",children:[(0,j.jsx)("span",{className:"mb1",id:"composerMode_desc",children:(0,u.c)("Label").t(oF||(oF=(0,d.Z)(["Select how your composer opens by default."])))}),(0,j.jsx)(layouts_ComposerModeCards,{describedByID:"composerMode_desc",composerMode:a,onChange:e=>s((async e=>{await n((0,Fg.ML)(e)),await r(),i({text:(0,u.c)("Success").t(rF||(rF=(0,d.Z)(["Preference saved"])))})})(e)),loading:o,liClassName:"w100",className:"layoutCards-two-per-row"})]})}))};function MailDefaultHandlerModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function MailDefaultHandlerModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MailDefaultHandlerModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MailDefaultHandlerModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var dF,uF,pF,mF,gF,jF,bF,yF,hF,IF,fF,MF,NF,xF,vF,wF,DF,SF,OF,AF,mail_MailDefaultHandlerModal=e=>{let t=(0,hd.Z)({},e);return(0,j.jsxs)(modal_Confirm,MailDefaultHandlerModal_objectSpread(MailDefaultHandlerModal_objectSpread({title:(0,u.c)("Info").t(sF||(sF=(0,d.Z)(["Default email application"]))),confirm:(0,u.c)("Action").t(iF||(iF=(0,d.Z)(["Set as default"]))),onConfirm:()=>{(0,cy.S0)(),t.onClose&&t.onClose()},onClose:t.onClose,mode:"alert"},t),{},{children:[(0,j.jsx)("span",{children:(0,u.c)("Info").t(cF||(cF=(0,d.Z)(["Set ProtonMail as your default email application for this browser. ProtonMail will open automatically when you click an email link."])))}),(0,j.jsx)(Tu.Z,{className:"ml0-5",url:"https://protonmail.com/support/knowledge-base/set-default-email-handler/",title:"Default mail handler",children:(0,u.c)("Info").t(lF||(lF=(0,d.Z)(["Learn more"])))})]}))};function TopNavbarListItemSettingsDropdown_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function TopNavbarListItemSettingsDropdown_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?TopNavbarListItemSettingsDropdown_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TopNavbarListItemSettingsDropdown_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const CF=(0,o.forwardRef)(((e,t)=>(0,j.jsx)(rU,TopNavbarListItemSettingsDropdown_objectSpread(TopNavbarListItemSettingsDropdown_objectSpread({},e),{},{ref:t,type:"button",as:"button","data-test-id":"view:general-settings",icon:(0,j.jsx)(pr.Z,{name:"gear"}),text:(0,u.c)("Text").t(dF||(dF=(0,d.Z)(["Settings"]))),title:(0,u.c)("Title").t(uF||(uF=(0,d.Z)(["Open settings menu"])))}))));var heading_TopNavbarListItemSettingsDropdown=e=>{const{APP_NAME:t}=(0,Nn.Z)(),{createModal:n}=(0,In.Z)(),r=(0,nO.ZP)(),[a]=(0,tA.Fg)(),[{Density:o}]=(0,Dr.Z)(),[{Shortcuts:s,ComposerMode:i,ViewLayout:c}={Shortcuts:0,ComposerMode:0,ViewLayout:0}]=useMailSettings(),{to:l,toApp:p,children:m}=e;return(0,j.jsx)(Sc,{as:CF,originalPlacement:"bottom-left",hasCaret:!1,dropdownStyle:{"--min-width":"18em","--max-height":"none"},children:(0,j.jsxs)(dropdown_DropdownMenu,{children:[(0,j.jsx)(dropdown_DropdownMenuLink,{as:dw.Z,to:l,toApp:p,target:"_self",children:(0,u.c)("Action").t(pF||(pF=(0,d.Z)(["Go to settings"])))}),(0,j.jsx)("hr",{className:"mt0-5 mb0-5"}),(0,j.jsxs)(Do.Z,{onClick:()=>{n((0,j.jsx)(earlyAccess_EarlyAccessModal,{}))},className:"flex flex-nowrap flex-justify-space-between flex-align-items-center",children:[(0,j.jsx)("span",{className:"flex-item-fluid text-left",children:(0,u.c)("Action").t(mF||(mF=(0,d.Z)(["Beta Access"])))}),(0,j.jsx)("span",{className:"color-primary ml0-5",children:r.value?(0,u.c)("Early Access Enabled").t(gF||(gF=(0,d.Z)(["On"]))):(0,u.c)("Early Access Disabled").t(jF||(jF=(0,d.Z)(["Off"])))})]}),(0,j.jsxs)(Do.Z,{onClick:()=>{n((0,j.jsx)(themes_ThemesModal,{}))},className:"flex flex-nowrap flex-justify-space-between flex-align-items-center",children:[(0,j.jsx)("span",{className:"flex-item-fluid text-left",children:(0,u.c)("Action").t(bF||(bF=(0,d.Z)(["Theme"])))}),(0,j.jsx)("span",{className:"color-primary ml0-5",children:sO.Qz[a].label})]}),t===M.ei.PROTONMAIL&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("hr",{className:"mt0-5 mb0-5"}),(0,j.jsxs)(Do.Z,{onClick:()=>{n((0,j.jsx)(MailShortcutsModal,{}),"shortcuts-modal")},className:"flex flex-nowrap flex-justify-space-between flex-align-items-center",children:[(0,j.jsx)("span",{className:"flex-item-fluid text-left",children:(0,u.c)("Action").t(yF||(yF=(0,d.Z)(["Keyboard shortcuts"])))}),(0,j.jsx)("span",{className:"color-primary ml0-5",children:s?(0,u.c)("Keyboard Shortcuts Enabled").t(hF||(hF=(0,d.Z)(["On"]))):(0,u.c)("Keyboard Shortcuts Disabled").t(IF||(IF=(0,d.Z)(["Off"])))})]}),(0,j.jsxs)(Do.Z,{onClick:()=>{n((0,j.jsx)(mail_MailViewLayoutModal,{}))},className:"flex flex-nowrap flex-justify-space-between flex-align-items-center no-mobile",children:[(0,j.jsx)("span",{className:"flex-item-fluid text-left",children:(0,u.c)("Action").t(fF||(fF=(0,d.Z)(["Mailbox layout"])))}),(0,j.jsx)("span",{className:"color-primary ml0-5",children:c===M.p9.COLUMN?(0,u.c)("Layout mode").t(MF||(MF=(0,d.Z)(["Column"]))):(0,u.c)("Layout mode").t(NF||(NF=(0,d.Z)(["Row"])))})]}),(0,j.jsxs)(Do.Z,{onClick:()=>{n((0,j.jsx)(mail_MailDensityModal,{}))},className:"flex flex-nowrap flex-justify-space-between flex-align-items-center",children:[(0,j.jsx)("span",{className:"flex-item-fluid text-left",children:(0,u.c)("Action").t(xF||(xF=(0,d.Z)(["Mailbox density"])))}),(0,j.jsx)("span",{className:"color-primary flex-item-noshrink ml0-5",children:o===M.pw.COMFORTABLE?(0,u.c)("Density mode").t(vF||(vF=(0,d.Z)(["Comfortable"]))):(0,u.c)("Density mode").t(wF||(wF=(0,d.Z)(["Compact"])))})]}),(0,j.jsxs)(Do.Z,{onClick:()=>{n((0,j.jsx)(mail_MailComposerModeModal,{}))},className:"flex flex-nowrap flex-justify-space-between flex-align-items-center no-mobile",children:[(0,j.jsx)("span",{className:"flex-item-fluid text-left",children:(0,u.c)("Action").t(DF||(DF=(0,d.Z)(["Composer size"])))}),(0,j.jsx)("span",{className:"color-primary ml0-5",children:i===M.yq.MAXIMIZED?(0,u.c)("Composer size").t(SF||(SF=(0,d.Z)(["Maximized"]))):(0,u.c)("Composer size").t(OF||(OF=(0,d.Z)(["Normal"])))})]}),(0,mr.vU)()&&(0,j.jsx)(Do.Z,{onClick:()=>{n((0,j.jsx)(mail_MailDefaultHandlerModal,{}))},className:"flex flex-nowrap flex-justify-space-between flex-align-items-center no-mobile",children:(0,j.jsx)("span",{className:"flex-item-fluid text-left",children:(0,u.c)("Action").t(AF||(AF=(0,d.Z)(["Default email application"])))})})]}),m]})})};function merge_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function merge_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?merge_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):merge_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const linkConnections=e=>{let t=!1;const{newConnections:n}=e.reduce(((e,n)=>{const{connected:r,newConnections:a}=e,o=((e,t)=>{for(const n of e)if(void 0!==t[n])return t[n];return-1})(n,r);if(-1!==o){a[o]=(0,xe.Tw)([...n,...a[o]]);for(const e of n)void 0===r[e]&&(r[e]=o);t=!0}else{for(const e of n)r[e]=a.length;a.push(n)}return e}),{connected:Object.create(null),newConnections:[]});return t?linkConnections(n):e},extractNewValue=(e,t,n=[])=>{if(["adr","n","org"].includes(t)){const t=!n.map((t=>!(Array.isArray(t)?t:[t]).map(((t,n)=>{const r=Array.isArray(t),a=Array.isArray(e[n]);return r&&a?e[n].some((e=>!t.map((e=>(0,br.Fv)(e))).includes((0,br.Fv)(e)))):r||a?!r||t.includes(e):(0,br.Fv)(t)!==(0,br.Fv)(e[n])})).filter(Boolean).length)).filter(Boolean).length;return{isNewValue:t,newValue:t?e:void 0}}if("email"===t){const t=!n.map((e=>e.trim())).includes(e.trim());return{isNewValue:t,newValue:t?e:void 0}}const r=!n.map((e=>(0,br.Fv)(e))).includes((0,br.Fv)(e));return{isNewValue:r,newValue:r?e:void 0}},merge_merge=(e=[])=>{if(!e.length)return[];const{mergedContact:t}=e.reduce(((e,t,n)=>{const{mergedContact:r,mergedProperties:a,mergedPropertiesPrefs:o,mergedGroups:s}=e;if(0===n){r.push(...t);for(const{pref:e,field:n,value:r,group:i}of t)a[n]?(a[n].push(r),hasPref(n)&&o[n].push(e)):(a[n]=[r],hasPref(n)&&(o[n]=[e])),"email"===n&&(s[r]=i)}else{const e=t.filter((({field:e})=>"email"===e)).map((({value:e,group:t})=>({email:e,group:t}))).reduce(((e,{email:t,group:n})=>{if(Object.values(s).includes(n)){const r=s[t]||generateNewGroupName(Object.values(s));e[n]=r,s[t]=r}else e[n]=n;return e}),{});for(const n of t){const{pref:t,field:i,group:c,value:l}=n,d=c?e[c]:c;if(a[i]){const{isNewValue:e,newValue:t}=extractNewValue(l,i,a[i]),c=hasPref(i)?Math.max(...o[i])+1:void 0,u="fn"!==i&&(isCustomField(i)||[Fo,Yo].includes(Ko[i].cardinality));e&&u&&(r.push(merge_objectSpread(merge_objectSpread({},n),{},{pref:c,value:t,group:d})),a[i].push(t),hasPref(i)&&(o[i]=[c]),d&&"email"===i&&(s[l]=d))}else r.push(merge_objectSpread(merge_objectSpread({},n),{},{pref:t,group:d})),a[i]=[l],hasPref(i)&&(o[i]=[t]),d&&"email"===i&&(s[l]=d)}}return e}),{mergedContact:[],mergedProperties:{},mergedPropertiesPrefs:{},mergedGroups:{}});return t};var EF,LF;const PF=["contactID","userKeysList"];function ContactDetails_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ContactDetails_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ContactDetails_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ContactDetails_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var merge_ContactDetails=e=>{let{contactID:t,userKeysList:n}=e,r=(0,Sn.Z)(e,PF);const a=(0,Dn.Z)(),[s,i]=(0,no.Z)(!0),[l,p]=(0,o.useState)({properties:[],errors:[]}),[m,g]=wr(),[b=[],y]=(0,yn.ZP)(),h=(0,o.useMemo)((()=>b.map((({Email:e})=>e))),[b]),[I=[],f]=useContactGroups(),M=(0,o.useMemo)((()=>(0,Ne.qL)(I)),[I]);return(0,o.useEffect)((()=>{try{i((async()=>{const{Contact:e}=await a((0,Lo.vS)(t)),{properties:r,errors:o}=await decrypt_prepareContact(e,(0,ju.ee)(n));p({properties:r,errors:o})})())}catch(e){p(ContactDetails_objectSpread(ContactDetails_objectSpread({},l),{},{errors:[{type:Qo.FAIL_TO_LOAD,error:e}]}))}}),[]),(0,j.jsx)(On.Z,ContactDetails_objectSpread(ContactDetails_objectSpread({title:(0,u.c)("Title").t(EF||(EF=(0,d.Z)(["Contact Details"]))),onSubmit:r.onClose,footer:(0,j.jsx)(yr.Z,{type:"submit",children:(0,u.c)("Action").t(LF||(LF=(0,d.Z)(["Close"])))})},r),{},{children:s||g||y||f?(0,j.jsx)(Yu.Z,{}):(0,j.jsx)(contacts_ContactView,{properties:l.properties,errors:l.errors,contactID:t,userKeysList:n,onDelete:c.ZT,isModal:!0,isPreview:!0,contactEmails:m,contactGroupsMap:M,ownAddresses:h,onReload:c.ZT})}))};var merge_MergeErrorContent=({error:e})=>(0,j.jsxs)("div",{className:"bg-warning p1",children:[(0,j.jsx)(pr.Z,{name:"triangle-exclamation",className:"mr1"}),(0,j.jsx)("span",{className:"mr1",children:e})]});let ZF,TF,kF;var zF,_F;let RF;!function(e){e[e.ATTACHING=0]="ATTACHING",e[e.ATTACHED=1]="ATTACHED",e[e.IMPORT_CSV=2]="IMPORT_CSV",e[e.WARNING=3]="WARNING",e[e.IMPORTING=4]="IMPORTING",e[e.SUMMARY=5]="SUMMARY",e[e.IMPORT_GROUPS=6]="IMPORT_GROUPS",e[e.FINISHED=7]="FINISHED"}(ZF||(ZF={})),function(e){e[e.MERGE=0]="MERGE",e[e.CREATE=1]="CREATE",e[e.IGNORE=2]="IGNORE"}(TF||(TF={})),function(e){e.CSV="csv",e.VCF="vcf"}(kF||(kF={})),function(e){e[e.UNSUPPORTED_VCARD_VERSION=0]="UNSUPPORTED_VCARD_VERSION",e[e.ENCRYPTION_ERROR=1]="ENCRYPTION_ERROR",e[e.EXTERNAL_ERROR=2]="EXTERNAL_ERROR"}(RF||(RF={}));class ImportContactError extends Error{constructor(e,t,n){super(((e,t)=>e===RF.UNSUPPORTED_VCARD_VERSION?(0,u.c)("Error importing contact").t(zF||(zF=(0,d.Z)(["vCard versions < 3.0 not supported"]))):e===RF.ENCRYPTION_ERROR?(0,u.c)("Error importing contact").t(_F||(_F=(0,d.Z)(["Encryption failed"]))):e===RF.EXTERNAL_ERROR&&(null==t?void 0:t.message)||"")(e,n)),this.contactId=void 0,this.type=void 0,this.externalError=void 0,this.type=e,this.contactId=t,this.externalError=n,Object.setPrototypeOf(this,ImportContactError.prototype)}}var GF,YF;function import_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function import_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?import_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):import_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const getContactId=e=>{const t=(0,u.c)("Import contact. Contact identifier").t(GF||(GF=(0,d.Z)(["unknown"])));if(Array.isArray(e)){var n,r;const a=null===(n=e.filter((({field:e})=>"fn"===e))[0])||void 0===n?void 0:n.value;if(a)return a;const o=null===(r=e.filter((({field:e})=>"email"===e))[0])||void 0===r?void 0:r.value;return o||t}const a=e.includes("\r\n")?"\r\n":"\n",o=a.length,s=e.indexOf(":",e.toLowerCase().indexOf("".concat(a,"fn")));if(-1===s)return t;let i=e.indexOf(a,s),c=e.substring(s+1,i);for(;" "===e[i+o]&&c.length<40;){const t=i;i=e.indexOf(a,t+o),c+=e.substring(t+o+1,i)}return(0,br.$G)(c,40)},getSupportedContacts=e=>e.map((e=>{try{return(e=>{if(e.includes("VERSION:2.1")){const t=getContactId(e);return new ImportContactError(RF.UNSUPPORTED_VCARD_VERSION,t)}try{return parse(e)}catch(t){const n=getContactId(e);return new ImportContactError(RF.EXTERNAL_ERROR,n,t)}})(e)}catch(t){if(t instanceof ImportContactError)return t;const n=getContactId(e);return new ImportContactError(RF.EXTERNAL_ERROR,n,t)}})).filter(Za.Z),extractContactImportCategories=(e,{categories:t,contactEmails:n})=>{const r=t.map((({name:t,group:r})=>{const a=n.filter((({group:e})=>void 0===r||e===r)).map((({email:t})=>{const{ID:n}=e.ContactEmails.find((({Email:e})=>e===t))||{};return n})).filter(Za.Z);return a.length?{name:t,contactEmailIDs:a}:{name:t}})).reduce(((e,{name:t,contactEmailIDs:n=[]})=>{const r=e[t];return r&&n.length?r.push(...n):e[t]=[...n],e}),{});return Object.entries(r).map((([e,t])=>({name:e,contactEmailIDs:t})))},getImportCategoriesModel=(e,t=[])=>(e=>{const t=e.reduce(((e,{contactID:t,categories:n,contactEmailIDs:r})=>n.length&&r.length?(n.forEach((({name:n,contactEmailIDs:a=[]})=>{const o=e[n];0!==a.length&&(o?a.length===r.length?e[n]={contactEmailIDs:o.contactEmailIDs,contactIDs:[...o.contactIDs,t],totalContacts:o.totalContacts+1}:e[n]={contactEmailIDs:[...o.contactEmailIDs,...a],contactIDs:o.contactIDs,totalContacts:o.totalContacts+1}:a.length===r.length?e[n]={contactEmailIDs:[],contactIDs:[t],totalContacts:1}:e[n]={contactEmailIDs:[...a],contactIDs:[],totalContacts:1})})),e):e),{});return Object.entries(t).map((([e,t])=>{if(t)return{name:e,contactEmailIDs:t.contactEmailIDs,contactIDs:t.contactIDs,totalContacts:t.totalContacts}})).filter(Za.Z)})(e).map((e=>{const n=t.find((({Name:t})=>t===e.name)),r=n&&t.length?TF.MERGE:TF.CREATE,a=n||t[0],o=n?"":e.name,s=import_objectSpread(import_objectSpread({},e),{},{action:r,targetGroup:a,targetName:o});return r===TF.CREATE&&M.bB.includes((0,br.Fv)(o))&&(s.error=(0,u.c)("Error").t(YF||(YF=(0,d.Z)(["Invalid name"])))),s})),import_splitErrors=e=>e.reduce(((e,t)=>(t instanceof ImportContactError?e.errors.push(t):e.rest.push(t),e)),{errors:[],rest:[]}),combineProgress=(e=[])=>{const{combinedTotal:t,combinedAllocations:n,progresses:r}=e.reduce(((e,{allocated:t,successful:n,failed:r,total:a})=>(e.combinedTotal+=a,e.combinedAllocations+=t,e.progresses.push(((e,t,n)=>0==+n?0:Math.min(Math.floor((+e+t)/n*100),100))(n,r,a)),e)),{combinedTotal:0,combinedAllocations:0,progresses:[]});if(1!==n&&e.length)throw new Error("Allocations must add up to one");if(!t)return 0;const a=e.reduce(((e,{allocated:n,total:a},o)=>e+n*(!a&&t?100:r[o])),0);return Math.round(a)};var UF,FF,KF,BF,WF,VF;function MergingModalContent_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function MergingModalContent_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MergingModalContent_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MergingModalContent_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const{OVERWRITE_CONTACT:QF}=Ho,{INCLUDE:HF,IGNORE:XF}=Xo,{SINGLE_SUCCESS:JF}=M.vB;var qF,$F,eK,tK,nK,rK,aK,merge_MergingModalContent=({userKeysList:e,alreadyMerged:t,beMergedModel:n={},beDeletedModel:r={},totalBeMerged:a=0,totalBeDeleted:s=0,onFinish:i})=>{const c=(0,Dn.Z)(),{privateKeys:l,publicKeys:p}=(0,o.useMemo)((()=>(0,ju.ee)(e)),[]),[m,g]=(0,no.Z)(!0),[b,y]=(0,o.useState)({mergedAndEncrypted:[],failedOnMergeAndEncrypt:[],submitted:[],failedOnSubmit:[],deleted:[]});(0,o.useEffect)((()=>{const e=new AbortController,apiWithAbort=t=>c(MergingModalContent_objectSpread(MergingModalContent_objectSpread({},t),{},{signal:e.signal})),getDecryptedGroup=(e=[],{signal:t})=>processApiRequestsSafe(e.map((e=>()=>(async(e,{signal:t})=>{if(t.aborted)return[];const{Contact:n}=await apiWithAbort((0,Lo.vS)(e)),{properties:r,errors:a}=await decrypt_prepareContact(n,{privateKeys:l,publicKeys:p});if(a.length)throw new Error("Error decrypting contact ".concat(e));return r})(e,{signal:t})))),submitBatch=async({contacts:e=[],labels:t},{signal:r})=>{if(r.aborted||!e.length)return;const a=[],o=(await apiWithAbort((0,Lo.el)({Contacts:e.map((({contact:e})=>e)),Overwrite:QF,Labels:t}))).Responses.map((({Response:e})=>e));if(!r.aborted){for(const[t,{Code:s}]of o.entries()){const o=e[t].contactId,i=n[o],c=i.slice(1);s===JF?(r.aborted||y((e=>MergingModalContent_objectSpread(MergingModalContent_objectSpread({},e),{},{submitted:[...e.submitted,...i]}))),a.push(...c)):r.aborted||y((e=>MergingModalContent_objectSpread(MergingModalContent_objectSpread({},e),{},{failedOnSubmit:[...e.failedOnSubmit,...i]})))}!r.aborted&&a.length&&await apiWithAbort((0,Lo._f)(a))}},submitContacts=async({contacts:e=[],labels:t},{signal:n})=>{if(n.aborted)return;const r=(0,xe.yo)(e,10),a=r.length;for(let e=0;e<a;e++)await Promise.all([submitBatch({contacts:r[e],labels:t},{signal:n}),(0,Wt.D)(100)])};return g((async({signal:e})=>{const a=t?await(async({signal:e})=>{if(e.aborted)return[];const[[r,a]]=Object.entries(n),o=[];if(!t)throw new Error("Contact already merged is undefined");try{const n=await prepareContact(t,{privateKey:l[0],publicKey:p[0]});o.push({contact:n,contactId:r}),e.aborted||y((e=>MergingModalContent_objectSpread(MergingModalContent_objectSpread({},e),{},{mergedAndEncrypted:[...e.mergedAndEncrypted,...a]})))}catch(t){e.aborted||y((e=>MergingModalContent_objectSpread(MergingModalContent_objectSpread({},e),{},{failedOnMergeAndEncrypt:[...e.failedOnMergeAndEncrypt,...a]})))}return o})({signal:e}):await(async({signal:e})=>{const t=[];for(const[r,a]of Object.entries(n)){if(e.aborted)return[];try{const n=await getDecryptedGroup(a,{signal:e}),o=await prepareContact(merge_merge(n),{privateKey:l[0],publicKey:p[0]});t.push({contact:o,contactId:r}),e.aborted||y((e=>MergingModalContent_objectSpread(MergingModalContent_objectSpread({},e),{},{mergedAndEncrypted:[...e.mergedAndEncrypted,...a]})))}catch(t){e.aborted||y((e=>MergingModalContent_objectSpread(MergingModalContent_objectSpread({},e),{},{failedOnMergeAndEncrypt:[...e.failedOnMergeAndEncrypt,...a]})))}}return t})({signal:e}),{withCategories:o,withoutCategories:s}=((e=[])=>e.reduce(((e,t)=>{const{contact:{Cards:n,error:r}}=t;return r||(n.some((({Type:e,Data:t})=>e===M.BK.CLEAR_TEXT&&t.includes("CATEGORIES")))?e.withCategories.push(t):e.withoutCategories.push(t)),e}),{withCategories:[],withoutCategories:[]}))(a);await submitContacts({contacts:o,labels:HF},{signal:e}),await submitContacts({contacts:s,labels:XF},{signal:e}),await(async({signal:e})=>{const t=Object.keys(r);!e.aborted&&t.length&&(y((e=>MergingModalContent_objectSpread(MergingModalContent_objectSpread({},e),{},{deleted:[...e.deleted,...t]}))),await apiWithAbort((0,Lo._f)(t)))})({signal:e}),e.aborted||i()})(e)),()=>{e.abort()}}),[]);const h=combineProgress([{allocated:.9,successful:b.mergedAndEncrypted.length,failed:b.failedOnMergeAndEncrypt.length,total:a},{allocated:.1,successful:b.submitted.length,failed:b.failedOnSubmit.length,total:a-b.failedOnMergeAndEncrypt.length}]),I=b.deleted.length===s,f=b.failedOnMergeAndEncrypt.length+b.failedOnSubmit.length!==a,N=(0,u.c)("Progress bar description").t(UF||(UF=(0,d.Z)(["Progress: ","%"])),h),x=I&&!f?(0,u.c)("Progress bar description").ngettext((0,u.msgid)(FF||(FF=(0,d.Z)([""," out of "," contact successfully deleted."])),b.deleted.length,s),"".concat(b.deleted.length," out of ").concat(s," contacts successfully deleted."),s):f?(0,u.c)("Progress bar description").ngettext((0,u.msgid)(KF||(KF=(0,d.Z)([""," out of "," contact successfully merged."])),b.submitted.length,a),"".concat(b.submitted.length," out of ").concat(a," contacts successfully merged."),a):(0,u.c)("Progress bar description").t(BF||(BF=(0,d.Z)(["No contacts merged."])));return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Cn.Z,{className:"mb1",children:a>0?(0,u.c)("Description").t(WF||(WF=(0,d.Z)(["Merging contacts... This may take a few minutes. When the process is completed, you can close this modal."]))):(0,u.c)("Description").t(VF||(VF=(0,d.Z)(["Deleting contacts... This may take a few minutes. When the process is completed, you can close this modal."])))}),(0,j.jsx)(progress_DynamicProgress,{id:"progress-merge-contacts",loading:m,value:h,max:100,success:f||I,display:m?N:x})]})};const oK=["userKeysList","beMergedModel","beDeletedModel","updateModel"],sK=["content"];function MergeContactPreview_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function MergeContactPreview_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MergeContactPreview_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MergeContactPreview_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var merge_MergeContactPreview=e=>{let{userKeysList:t,beMergedModel:n,beDeletedModel:r,updateModel:a}=e,s=(0,Sn.Z)(e,oK);const{call:i}=(0,Ie.Z)(),l=(0,Dn.Z)(),{privateKeys:p,publicKeys:m}=(0,o.useMemo)((()=>(0,ju.ee)(t)),[]),[g,b]=wr(),[y=[],h]=(0,yn.ZP)(),I=(0,o.useMemo)((()=>y.map((({Email:e})=>e))),[y]),[f=[],M]=useContactGroups(),N=(0,o.useMemo)((()=>(0,Ne.qL)(f)),[f]),[x,v]=(0,no.Z)(!0),[w,D]=(0,o.useState)(!1),[S,O]=(0,o.useState)(!1),[A,C]=(0,o.useState)({}),[E]=Object.values(n),L=Object.keys(r);(0,o.useEffect)((()=>{v((async()=>{try{const e=E.map((e=>async()=>{const{Contact:t}=await l((0,Lo.vS)(e)),{properties:n,errors:r}=await decrypt_prepareContact(t,{privateKeys:p,publicKeys:m});if(r.length)throw C(MergeContactPreview_objectSpread(MergeContactPreview_objectSpread({},A),{},{errorOnLoad:!0})),new Error("Error decrypting contact");return n})),t=await processApiRequestsSafe(e);C(MergeContactPreview_objectSpread(MergeContactPreview_objectSpread({},A),{},{mergedContact:merge_merge(t)}))}catch(e){C(MergeContactPreview_objectSpread(MergeContactPreview_objectSpread({},A),{},{errorOnMerge:!0}))}})())}),[]);const P=(()=>{if(!w){const e=(0,j.jsx)(yr.Z,{type:"submit",disabled:!A.mergedContact,children:(0,u.c)("Action").t(qF||(qF=(0,d.Z)(["Merge"])))}),handleSubmit=()=>D(!0);return MergeContactPreview_objectSpread({content:(()=>{if(b||h||M||x)return(0,j.jsx)(Yu.Z,{});if(A.errorOnLoad||A.errorOnMerge){const e=A.errorOnLoad?(0,u.c)("Warning").t($F||($F=(0,d.Z)(["Some of the contacts to be merged display errors. Please review them individually"]))):(0,u.c)("Warning").t(eK||(eK=(0,d.Z)(["Contacts could not be merged"])));return(0,j.jsx)(merge_MergeErrorContent,{error:e})}return(0,j.jsx)(contacts_ContactView,{contactID:"",properties:A.mergedContact,contactEmails:g,contactGroupsMap:N,ownAddresses:I,userKeysList:t,onDelete:c.ZT,onReload:c.ZT,isModal:!0,isPreview:!0})})(),title:(0,u.c)("Title").t(tK||(tK=(0,d.Z)(["Contact Details"]))),submit:e,onSubmit:handleSubmit},s)}const e=!S&&(0,j.jsx)(Ea.Z,{type:"reset",children:(0,u.c)("Action").t(nK||(nK=(0,d.Z)(["Cancel"])))}),o=(0,j.jsx)(yr.Z,{type:"submit",loading:!S,children:(0,u.c)("Action").t(rK||(rK=(0,d.Z)(["Close"])))});return MergeContactPreview_objectSpread({title:(0,u.c)("Title").t(aK||(aK=(0,d.Z)(["Merging contacts"]))),hasClose:!1,content:(0,j.jsx)(merge_MergingModalContent,{userKeysList:t,alreadyMerged:A.mergedContact,beMergedModel:n,beDeletedModel:r,totalBeMerged:E.length,totalBeDeleted:L.length,onFinish:async()=>{(()=>{const e=E.slice(1).concat(L);a((t=>MergeContactPreview_objectSpread(MergeContactPreview_objectSpread({},t),{},{orderedContacts:t.orderedContacts.map((t=>t.filter((({ID:t})=>!e.includes(t))))).filter((e=>e.length>1))})))})(),await i(),O(!0)}}),close:e,submit:o,onSubmit:s.onClose},s)})(),{content:Z}=P,T=(0,Sn.Z)(P,sK);return(0,j.jsx)(On.Z,MergeContactPreview_objectSpread(MergeContactPreview_objectSpread({},T),{},{children:Z}))};const iK=["children","className","helperClassname","caption"];function OrderableTable_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function OrderableTable_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?OrderableTable_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OrderableTable_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var orderableTable_OrderableTable=e=>{let{children:t=[],className:n="",helperClassname:r,caption:a}=e,o=(0,Sn.Z)(e,iK);return(0,j.jsx)(yc,OrderableTable_objectSpread(OrderableTable_objectSpread({helperClass:(0,ht.dh)(["orderableHelper simple-table",r]),useDragHandle:!0},o),{},{children:(0,j.jsx)(table_Table,{caption:a,className:(0,ht.dh)(["orderableTable",n]),children:t})}))};const cK=["children","colSpan","loading"];function OrderableTableBody_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function OrderableTableBody_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?OrderableTableBody_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OrderableTableBody_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var orderableTable_OrderableTableBody=e=>{let{children:t,colSpan:n=0,loading:r}=e,a=(0,Sn.Z)(e,cK);return(0,j.jsx)(table_TableBody,OrderableTableBody_objectSpread(OrderableTableBody_objectSpread({},a),{},{colSpan:n+1,loading:r,children:t}))};const lK=["index","cells","className","disableSort"];function OrderableTableRow_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function OrderableTableRow_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?OrderableTableRow_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OrderableTableRow_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var orderableTable_OrderableTableRow=e=>{let{index:t,cells:n=[],className:r,disableSort:a}=e,o=(0,Sn.Z)(e,lK);return a?(0,j.jsx)(Qa,OrderableTableRow_objectSpread({cells:["",...n],className:r},o)):(0,j.jsx)(hc,{index:t,children:(0,j.jsx)(Qa,OrderableTableRow_objectSpread({cells:[(0,j.jsx)(Ic,{children:(0,j.jsx)("span",{className:"flex","data-testid":"table:order-icon",children:(0,j.jsx)(pr.Z,{className:"mtauto mbauto cursor-row-resize",name:"align-justify"})})},"icon"),...n],className:r},o))})};var merge_NameTableCell=({name:e,contactID:t,highlightedID:n,checked:r,deleted:a,greyedOut:o,onToggle:s})=>(0,j.jsxs)("div",{className:"flex flex-nowrap flex-align-items-center",children:[(0,j.jsx)(Nr,{checked:r,onChange:()=>s(t),className:"flex flex-align-items-center flex-item-noshrink mr0-5 ".concat(a?"visibility-hidden":"")}),(0,j.jsx)("span",{className:(0,ht.dh)(["max-w100","inline-block","text-ellipsis",o&&"color-weak",t===n&&"text-bold"]),children:e})]});var dK,uK,pK,merge_EmailsTableCell=({contactID:e,emails:t=[],highlightedID:n,greyedOut:r})=>(0,j.jsx)("div",{className:(0,ht.dh)(["flex","flex-align-items-center","max-w100",r&&"color-weak",e===n&&"text-bold"]),children:(0,j.jsx)("span",{className:"inline-block text-ellipsis",children:t.map((e=>"<".concat(e,">"))).join(", ")})});const mK=["contacts","highlightedID","isChecked","beDeleted","onClickCheckbox","onClickDetails","onToggleDelete"];function MergeTableBody_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function MergeTableBody_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MergeTableBody_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MergeTableBody_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gK,jK,bK,yK,merge_MergeTableBody=e=>{let{contacts:t,highlightedID:n,isChecked:r,beDeleted:a,onClickCheckbox:o,onClickDetails:s,onToggleDelete:i}=e,c=(0,Sn.Z)(e,mK);return(0,j.jsx)(orderableTable_OrderableTableBody,MergeTableBody_objectSpread(MergeTableBody_objectSpread({colSpan:4},c),{},{children:t.map((({ID:e,Name:t,emails:c},l)=>{const p=a[e],m=[!p&&{text:(0,u.c)("Action").t(dK||(dK=(0,d.Z)(["View"]))),onClick(){s(e)}},{text:p?(0,u.c)("Action").t(uK||(uK=(0,d.Z)(["Unmark for deletion"]))):(0,u.c)("Action").t(pK||(pK=(0,d.Z)(["Mark for deletion"]))),onClick(){i(e)}}].filter(Boolean),g=[(0,j.jsx)(merge_NameTableCell,{name:t,contactID:e,highlightedID:n,checked:r[e],deleted:p,greyedOut:p,onToggle:o},"name"),(0,j.jsx)(merge_EmailsTableCell,{contactID:e,highlightedID:n,emails:c,greyedOut:p},"email"),(0,j.jsx)(dropdown_DropdownActions,{size:"small",list:m},"options")];return p?(0,j.jsx)(Qa,{cells:[null,...g]},"".concat(e)):(0,j.jsx)(orderableTable_OrderableTableRow,{index:l,cells:g},"".concat(e))}))}))};const MergeTableHeader=()=>(0,j.jsx)("thead",{className:"orderableTableHeader",children:(0,j.jsxs)("tr",{children:[(0,j.jsx)(table_TableCell,{type:"header",children:" "}),(0,j.jsx)(table_TableCell,{type:"header",children:(0,u.c)("TableHeader").t(gK||(gK=(0,d.Z)(["Name"])))}),(0,j.jsx)(table_TableCell,{type:"header",children:(0,u.c)("TableHeader").t(jK||(jK=(0,d.Z)(["Address"])))}),(0,j.jsx)(table_TableCell,{type:"header",children:(0,u.c)("TableHeader").t(bK||(bK=(0,d.Z)(["Actions"])))})]})});var hK,IK,merge_MergeTable=({contacts:e=[],isChecked:t={},beDeleted:n={},onClickCheckbox:r,onClickDetails:a,onToggleDelete:o,onClickPreview:s,onSortEnd:i})=>(0,j.jsx)(j.Fragment,{children:e.map(((e,c)=>{const l=e.map((({ID:e})=>t[e]&&!n[e]&&e)).filter(Boolean),p=e.map((({ID:e})=>n[e]&&e)).filter(Boolean),m=l.length>1?l:[];return(0,j.jsxs)(container_Block,{className:"mb2 flex flex-column flex-align-items-center",children:[(0,j.jsxs)(orderableTable_OrderableTable,{onSortEnd:i(c),className:"mb1",children:[(0,j.jsx)(MergeTableHeader,{}),(0,j.jsx)(merge_MergeTableBody,{contacts:e,highlightedID:m[0],isChecked:t,beDeleted:n,onClickCheckbox:r,onClickDetails:a,onToggleDelete:o})]}),(0,j.jsx)(Ea.Z,{className:"aligcenter",disabled:!m.length,type:"button",onClick:()=>s(m[0],p),children:(0,u.c)("Action").t(yK||(yK=(0,d.Z)(["Preview contact"])))})]},"".concat(e&&e[0].Name))}))});function MergeModalContent_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function MergeModalContent_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MergeModalContent_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MergeModalContent_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const moveInGroup=(e,t,{oldIndex:n,newIndex:r})=>e.map(((e,a)=>a===t?(0,xe.pB)(e,n,r):e));var fK,MK,NK,xK,vK,wK,DK,merge_MergeModalContent=({userKeysList:e,model:t,updateModel:n,beMergedModel:r,beDeletedModel:a})=>{const{createModal:o}=(0,In.Z)(),{orderedContacts:s,isChecked:i,beDeleted:c}=t;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Cn.Z,{className:"mb1",children:(0,u.c)("Description").t(hK||(hK=(0,d.Z)(["Use Drag and Drop to rank merging priority between contacts. Uncheck the contacts you do not want to merge."])))}),(0,j.jsx)(Cn.Z,{className:"mb1",type:"warning",children:(0,u.c)("Description").t(IK||(IK=(0,d.Z)(["You can mark for deletion the contacts that you do not want neither to merge nor to keep. Deletion will only take place after the merge button is clicked"])))}),(0,j.jsx)(merge_MergeTable,{onSortEnd:e=>({oldIndex:t,newIndex:r})=>{n((n=>MergeModalContent_objectSpread(MergeModalContent_objectSpread({},n),{},{orderedContacts:moveInGroup(s,e,{oldIndex:t,newIndex:r})})))},contacts:s,isChecked:i,beDeleted:c,onClickCheckbox:e=>{n((t=>MergeModalContent_objectSpread(MergeModalContent_objectSpread({},t),{},{isChecked:MergeModalContent_objectSpread(MergeModalContent_objectSpread({},i),{},{[e]:!i[e]})})))},onClickDetails:t=>{o((0,j.jsx)(merge_ContactDetails,{contactID:t,userKeysList:e}))},onToggleDelete:e=>{n((t=>MergeModalContent_objectSpread(MergeModalContent_objectSpread({},t),{},{beDeleted:MergeModalContent_objectSpread(MergeModalContent_objectSpread({},c),{},{[e]:!c[e]})})))},onClickPreview:(t,s)=>{const i={[t]:r[t]},c=s.reduce(((e,t)=>(e[t]=a[t],e)),{});o((0,j.jsx)(merge_MergeContactPreview,{userKeysList:e,beMergedModel:i,beDeletedModel:c,updateModel:n}))}})]})};const SK=["contacts","userKeysList","onMerged"],OK=["content"];function MergeModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function MergeModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MergeModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MergeModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var merge_MergeModal=e=>{let{contacts:t,userKeysList:n,onMerged:r}=e,a=(0,Sn.Z)(e,SK);const{call:s}=(0,Ie.Z)(),[i,c]=(0,o.useState)(!1),[l,p]=(0,o.useState)(!1),[m,g]=(0,o.useState)((()=>({orderedContacts:t,isChecked:t.flat().reduce(((e,{ID:t})=>(e[t]=!0,e)),{}),beDeleted:t.flat().reduce(((e,{ID:t})=>(e[t]=!1,e)),{})}))),{orderedContacts:b,isChecked:y,beDeleted:h}=m;(0,o.useEffect)((()=>{b.flat().length||(null==r||r(),a.onClose())}),[b]);const{beMergedModel:I,beDeletedModel:f,totalBeMerged:M,totalBeDeleted:N}=(0,o.useMemo)((()=>b.reduce(((e,t)=>{const n=t.map((({ID:e})=>e)),r=n.map((e=>y[e]&&!h[e]&&e)).filter(Boolean),a=n.map((e=>h[e]&&e)).filter(Boolean),o=r.length>1;o&&(e.beMergedModel[r[0]]=r,e.totalBeMerged+=r.length);for(const t of a)e.beDeletedModel[t]=o?r[0]:"",e.totalBeDeleted+=1;return e}),{beMergedModel:{},beDeletedModel:{},totalBeMerged:0,totalBeDeleted:0})),[b,y,h]),x=(()=>{const e=M<=0&&N>0;if(!i){const t=e?(0,j.jsx)(yr.Z,{type:"submit",children:(0,u.c)("Action").t(fK||(fK=(0,d.Z)(["Continue"])))}):(0,j.jsx)(yr.Z,{type:"submit",disabled:!M,children:(0,u.c)("Action").t(MK||(MK=(0,d.Z)(["Merge"])))}),handleSubmit=()=>c(!0);return MergeModal_objectSpread({title:(0,u.c)("Title").t(NK||(NK=(0,d.Z)(["Merge contacts"]))),content:(0,j.jsx)(merge_MergeModalContent,{userKeysList:n,model:m,updateModel:g,beMergedModel:I,beDeletedModel:f}),submit:t,onSubmit:handleSubmit},a)}const t=!l&&(0,j.jsx)(Ea.Z,{type:"reset",children:(0,u.c)("Action").t(xK||(xK=(0,d.Z)(["Cancel"])))}),o=(0,j.jsx)(yr.Z,{type:"submit",loading:!l,children:(0,u.c)("Action").t(vK||(vK=(0,d.Z)(["Close"])))});return MergeModal_objectSpread({title:e?(0,u.c)("Title").t(wK||(wK=(0,d.Z)(["Deleting contacts"]))):(0,u.c)("Title").t(DK||(DK=(0,d.Z)(["Merging contacts"]))),hasClose:!1,content:(0,j.jsx)(merge_MergingModalContent,{userKeysList:n,beMergedModel:I,beDeletedModel:f,totalBeMerged:M,totalBeDeleted:N,onFinish:async()=>{await s(),p(!0)}}),close:t,submit:o,onSubmit:()=>{null==r||r(),a.onClose()}},a)})(),{content:v}=x,w=(0,Sn.Z)(x,OK);return(0,j.jsx)(On.Z,MergeModal_objectSpread(MergeModal_objectSpread({},w),{},{children:v}))};const useContactFocus=({elementIDs:e,listRef:t})=>{const[n,r]=(0,o.useState)(),getFocusedId=()=>void 0!==n?e[n]:void 0,a=(0,o.useRef)(getFocusedId()),s=(0,mn.ZP)((e=>{r(e)})),focusOnElementByIndex=n=>{var r;const a=null===(r=t.current)||void 0===r?void 0:r.querySelector('[data-shortcut-target="contact-container"][data-element-id="'.concat(e[n],'"]'));null==a||a.focus()};return(0,o.useEffect)((()=>{if(void 0!==n){if(e[n])return void setTimeout((()=>focusOnElementByIndex(n)));setTimeout((()=>focusOnElementByIndex(e.length-1)))}}),[e]),(0,o.useEffect)((()=>{void 0!==n&&focusOnElementByIndex(n),a.current=getFocusedId()}),[n]),{focusIndex:n,getFocusedId:getFocusedId,setFocusIndex:r,handleFocus:s}},useContactHotkeys=({elementIDs:e,focusIndex:t},{getFocusedId:n,setFocusIndex:r,handleElement:a})=>{const s=(0,o.useRef)(null),i=[["ArrowUp",n=>{n.preventDefault();const a=void 0!==t?Math.max(0,t-1):e.length-1;r(a)}],["ArrowDown",n=>{n.preventDefault();const a=void 0!==t?Math.min(e.length-1,t+1):0;r(a)}],["Enter",e=>{const t=n(),{activeElement:r}=document;t&&"button"!==(null==r?void 0:r.tagName.toLocaleLowerCase())&&(e.stopPropagation(),a(t))}]];return(0,Co.y)(s,i),s};var AK,CK,EK,items_ItemCheckbox=({ID:e="",name:t="",compactClassName:n,normalClassName:r,checked:a,onChange:o})=>{const[s,i]=(0,Dr.Z)();if(i)return null;const handleClick=e=>{e.stopPropagation()};return s.Density===M.pw.COMPACT?(0,j.jsx)(Nr,{className:(0,ht.dh)(["item-icon-compact",n]),checked:a,onChange:o,labelOnClick:handleClick,"data-item-id":e,"aria-describedby":e,"data-testid":"item-checkbox"}):(0,j.jsxs)("label",{className:(0,ht.dh)(["item-checkbox-label relative",r]),onClick:handleClick,children:[(0,j.jsx)("input",{type:"checkbox",className:"item-checkbox inner-ratio-container cursor-pointer m0",checked:a,onChange:o,"data-item-id":e,"data-testid":"item-checkbox"}),(0,j.jsxs)("span",{className:"item-icon flex-item-noshrink relative rounded inline-flex","data-testid":"element-list:message-checkbox",children:[(0,j.jsx)("span",{className:"mauto item-abbr",children:(0,br.Qm)(t)}),(0,j.jsx)("span",{className:"item-icon-fakecheck mauto",children:(0,j.jsx)(pr.Z,{name:"check",className:"item-icon-fakecheck-icon"})})]})]})};var contacts_ContactRow=({checked:e,style:t,hasPaidMail:n,contactGroupsMap:r,contact:a,onClick:s,onCheck:i,draggable:c,onDragStart:l,onDragEnd:p,dragged:m,index:g,onFocus:b})=>{const{createNotification:y}=(0,hn.Z)(),{ID:h,Name:I,LabelIDs:f=[],emails:M=[]}=a,[N,x]=(0,o.useState)(!1),v=a.LabelIDs.map((e=>r[e]));return(0,j.jsx)("div",{style:t,onClick:()=>s(h),draggable:c,onDragStart:l,onDragEnd:p,className:(0,ht.dh)(["item-container item-contact flex cursor-pointer bg-global-white button-show-on-hover",m&&"item-dragging",N&&"item-is-focused"]),onFocus:()=>{x(!0),b(g)},onBlur:()=>{x(!1)},tabIndex:-1,"data-element-id":a.ID,"data-shortcut-target":"contact-container",children:(0,j.jsxs)("div",{className:"flex flex-nowrap w100 h100 mtauto mbauto flex-align-items-center",children:[(0,j.jsx)(items_ItemCheckbox,{ID:h,name:I,checked:e,onChange:i}),(0,j.jsxs)("div",{className:"flex-item-fluid pl1 flex flex-column flex-justify-space-between conversation-titlesender",children:[(0,j.jsx)("div",{className:"flex flex-nowrap flex-align-items-center item-firstline max-w100",children:(0,j.jsx)("div",{className:(0,ht.dh)(["flex flex-item-fluid w0",!!f.length&&"pr1"]),children:(0,j.jsx)("span",{role:"heading","aria-level":2,className:"text-bold inline-block max-w100 text-ellipsis",id:h,children:I})})}),(0,j.jsx)("div",{className:"item-secondline max-w100 text-ellipsis item-sender--smaller",title:M.join(", "),children:M.length?(0,br.Js)(M):(0,j.jsx)("span",{className:"placeholder",children:(0,u.c)("Info").t(CK||(CK=(0,d.Z)(["No email address"])))})})]}),n&&v&&(0,j.jsx)(contacts_ContactGroupLabels,{contactGroups:v,className:"mr0-5"}),M[0]&&(0,j.jsx)(Gu,{value:M[0],className:"button-show-on-hover-element",onCopy:()=>{M[0]&&y({type:"success",text:(0,u.c)("Success").t(AK||(AK=(0,d.Z)(["Email address copied to clipboard"])))})},tooltipText:(0,u.c)("Action").t(EK||(EK=(0,d.Z)(["Copy email to clipboard"]))),size:"small"})]})},h)};const LK="drag-item",PK="drag-item-id";var items_useItemsDraggable=(e,t,n,r)=>{const[a,s]=(0,o.useState)(),[i,c]=(0,o.useState)([]),[l,d]=(0,o.useState)();(0,o.useEffect)((()=>{c([])}),[e]);const u=(0,o.useCallback)((()=>{a&&(document.body.removeChild(a),s(void 0))}),[s]),p=(0,mn.ZP)((()=>{c([]),l&&(n(l,!0,!0),d(void 0))})),m=(0,o.useCallback)((e=>{if(u(),"none"===e.dataTransfer.dropEffect||"copy"===e.dataTransfer.dropEffect)return p()}),[u,p]),g=(0,mn.ZP)((e=>{u(),c([]),l&&("link"===e&&n(l,!0,!0),d(void 0))}));return{draggedIDs:i,handleDragStart:(0,o.useCallback)(((e,a)=>{u();const o=a.ID||"",i=t.includes(o),l=i?t:[o];c(l),d(t),i||n([],!0,!0);const p=document.createElement("div");p.innerHTML=r(l),p.className="drag-element p1 bordered rounded",p.id=(0,ht.D)(PK),p.addEventListener("dragend",(e=>{var t;return g(null===(t=e.dataTransfer)||void 0===t?void 0:t.dropEffect)})),document.body.appendChild(p),e.dataTransfer.setDragImage(p,0,0),e.dataTransfer.setData(LK,JSON.stringify(l)),e.dataTransfer.setData(PK,p.id),s(p)}),[t,n]),handleDragEnd:m}};var ZK,TK,kK,zK,_K,RK,GK,YK,UK,FK,KK,BK,WK,VK,contacts_ContactsList=({contacts:e,contactGroupsMap:t,onCheckOne:n,user:r,userSettings:a,isDesktop:s=!0,onCheck:i,checkedIDs:c,onClick:l,activateDrag:d=!0})=>{const u=(0,o.useRef)(null),p=(0,o.useRef)(null),m=a.Density===M.pw.COMPACT,g=(0,o.useMemo)((()=>e.map((e=>e.ID))),[e]),{focusIndex:b,getFocusedId:y,setFocusIndex:h,handleFocus:I}=useContactFocus({elementIDs:g,listRef:p}),f=useContactHotkeys({elementIDs:g,focusIndex:b},{getFocusedId:y,setFocusIndex:h,handleElement:e=>l(e)}),{draggedIDs:N,handleDragStart:x,handleDragEnd:v}=items_useItemsDraggable(e,c,i,(e=>"".concat(e.length," contacts"))),w=4*vo.Ts,D=3*vo.Ts;return(0,j.jsx)("div",{ref:f,className:(0,ht.dh)([s?"items-column-list":"items-column-list--mobile",m&&"list-compact"]),children:(0,j.jsx)("div",{ref:p,className:"items-column-list-inner items-column-list-inner--no-border",children:(0,j.jsx)(Sr.qj,{children:({height:a,width:o})=>(0,j.jsx)(Sr.aV,{className:"contacts-list no-outline",ref:u,rowRenderer:({index:a,style:o,key:s})=>(0,j.jsx)(contacts_ContactRow,{style:o,checked:c.includes(e[a].ID),hasPaidMail:!!r.hasPaidMail,contactGroupsMap:t,contact:e[a],onClick:l,onCheck:t=>n(t,e[a].ID),draggable:d,onDragStart:t=>null==x?void 0:x(t,e[a]),onDragEnd:v,dragged:N.includes(e[a].ID),index:a,onFocus:I},s),rowCount:e.length,height:a,width:o,rowHeight:m?D:w,tabIndex:-1})})})})};var widget_ContactsWidgetToolbar=({allChecked:e,selected:t,noEmailsContactCount:n,onCheckAll:r,onCompose:a,onForward:o,onDelete:s,onCreate:i,onMerge:c,onClose:l,customActions:p,contactList:m})=>{const g=t.length,b=n===g,y=!g,h=g>1,I=y?(0,u.c)("Action").t(ZK||(ZK=(0,d.Z)(["Delete contact"]))):(0,u.c)("Action").ngettext((0,u.msgid)(TK||(TK=(0,d.Z)(["Delete "," contact"])),g),"Delete ".concat(g," contacts"),g);return(0,j.jsxs)("div",{className:"flex flex-items-align-center",children:[(0,j.jsx)(ur.Z,{title:e?(0,u.c)("Action").t(kK||(kK=(0,d.Z)(["Deselect all"]))):(0,u.c)("Action").t(zK||(zK=(0,d.Z)(["Select all"]))),children:(0,j.jsxs)("span",{className:"mr1 flex",children:[(0,j.jsx)(Nr,{id:"id_contact-widget-select-all",className:"ml0-5",checked:e,onChange:({target:e})=>r(e.checked),"data-testid":"contacts:select-all"}),(0,j.jsx)("label",{htmlFor:"id_contact-widget-select-all",className:"sr-only",children:e?(0,u.c)("Action").t(_K||(_K=(0,d.Z)(["Deselect all"]))):(0,u.c)("Action").t(RK||(RK=(0,d.Z)(["Select all"])))})]})}),a?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(ur.Z,{title:(0,u.c)("Action").t(GK||(GK=(0,d.Z)(["Compose"]))),children:(0,j.jsx)(Ea.Z,{icon:!0,className:"mr0-5 inline-flex pt0-5 pb0-5",onClick:a,disabled:b,title:(0,u.c)("Action").t(YK||(YK=(0,d.Z)(["Compose"]))),"data-testid":"contacts:compose",children:(0,j.jsx)(pr.Z,{name:"envelope"})})}),(0,j.jsx)(ur.Z,{title:(0,u.c)("Action").t(UK||(UK=(0,d.Z)(["Forward as attachment"]))),children:(0,j.jsx)(Ea.Z,{icon:!0,className:"mr0-5 inline-flex pt0-5 pb0-5",onClick:o,disabled:b,title:(0,u.c)("Action").t(FK||(FK=(0,d.Z)(["Forward as attachment"]))),"data-testid":"contacts:forward-attachment",children:(0,j.jsx)(pr.Z,{name:"arrow-right-big"})})})]}):null,p.map((e=>e.render({contactList:m,noSelection:y,onClose:l,selected:t}))),(0,j.jsx)(ur.Z,{title:(0,u.c)("Action").t(KK||(KK=(0,d.Z)(["Merge contacts"]))),children:(0,j.jsx)(Ea.Z,{icon:!0,className:"mr0-5 inline-flex pt0-5 pb0-5",onClick:c,disabled:!h,title:(0,u.c)("Action").t(BK||(BK=(0,d.Z)(["Merge contacts"]))),"data-testid":"contacts:merge-contacts",children:(0,j.jsx)(pr.Z,{name:"merge"})})}),(0,j.jsx)(ur.Z,{title:I,children:(0,j.jsx)(Ea.Z,{icon:!0,className:"inline-flex pt0-5 pb0-5",onClick:s,disabled:y,title:I,"data-testid":"contacts:delete-contacts",children:(0,j.jsx)(pr.Z,{name:"trash"})})}),(0,j.jsx)(ur.Z,{title:(0,u.c)("Action").t(WK||(WK=(0,d.Z)(["Add new contact"]))),children:(0,j.jsx)(Ea.Z,{icon:!0,color:"norm",className:"mlauto inline-flex pt0-5 pb0-5",onClick:i,title:(0,u.c)("Action").t(VK||(VK=(0,d.Z)(["Add new contact"]))),"data-testid":"contacts:add-new-contact",children:(0,j.jsx)(pr.Z,{name:"user-plus"})})})]})},QK=n(14098),HK=n(57423),XK=n.n(HK);const JK=["name","initials","short name","maiden name","group membership","mileage","billing information","directory server","sensitivity","priority","subject"],qK=[/e-mail\s?([0-9]*) display name/],toVcardType=(e="")=>{switch(e.toLowerCase()){case"home":return"home";case"business":case"work":return"work";case"mobile":case"cell":return"cell";case"other":return"other";case"main":case"primary":return"main";case"company main":return"work";case"pager":return"pager";case"home fax":case"work fax":return"fax";default:return""}},$K={fn:({header:e,value:t,index:n})=>({header:e,value:t,checked:!0,pref:1,field:"fn",combineInto:"fn-main",combineIndex:n}),fnYomi:({header:e,value:t,index:n})=>({header:e,value:t,checked:!0,pref:2,field:"fn",combineInto:"fn-yomi",combineIndex:n}),email({pref:e,header:t,value:n,type:r}){const a=" ::: ";if("string"==typeof n&&n.includes(a)){const o=n.split(a).filter(Za.Z);if(o.length>1)return{pref:e,header:t,value:o,checked:!0,field:"email",type:r,group:e}}return{pref:e,header:t,value:n,checked:!0,field:"email",type:r,group:e}},tel:({pref:e,header:t,value:n,type:r})=>({pref:e,header:t,value:n,checked:!0,field:"tel",type:r}),adr:({pref:e,header:t,type:n,value:r,index:a})=>({pref:e,header:t,value:r,checked:!0,field:"adr",type:n,combineInto:"adr-".concat(n),combineIndex:a}),org:({pref:e,header:t,value:n,index:r})=>({pref:e,header:t,value:n,checked:!0,field:"org",combineInto:"org",combineIndex:r})},toPreVcard=({original:e,standard:t})=>{const n=(0,br.Fv)(t),r=e,a=n.match(/^company\s?(\d*)/),o=n.match(/^department\s?(\d*)/),s=n.match(/^(\w+)?\s?e-?mail\s?(\d*)/),i=n.match(/^(\w+\s*\w+)?\s?phone\s?(\d*)$/),c=n.match(/^(\w+)?\s?fax\s?(\d*)$/),l=n.match(/^(\w+)?\s?pager\s?(\d*)$/),d=n.match(/^callback|telex\s?(\d*)$/),u=n.match(/^(\w*)\s?po box\s?(\d*)$/),p=n.match(/^(\w*)\s?extended address\s?(\d*)$/),m=n.match(/^(\w*)\s?street\s?(\d*)$/),g=n.match(/^(\w*)\s?city\s?(\d*)$/),j=n.match(/^(\w*)\s?state\s?(\d*)$/),b=n.match(/^(\w*)\s?postal code\s?(\d*)$/),y=n.match(/^(\w*)\s?country\s?(\d*)$/);if(["title","name prefix"].includes(n))return e=>[$K.fn({header:r,value:e,index:0})];if(["first name","given name"].includes(n))return e=>[$K.fn({header:r,value:e,index:1})];if(["middle name","additional name"].includes(n))return e=>[$K.fn({header:r,value:e,index:2})];if(["last name","family name"].includes(n))return e=>[$K.fn({header:r,value:e,index:3})];if(["suffix","name suffix"].includes(n))return e=>[$K.fn({header:r,value:e,index:4})];if(["given yomi","given name yomi"].includes(n))return e=>$K.fnYomi({header:r,value:e,index:0});if(["middle name yomi","additional name yomi"].includes(n))return e=>$K.fnYomi({header:r,value:e,index:1});if(["surname yomi","family name yomi"].includes(n))return e=>$K.fnYomi({header:r,value:e,index:2});if(a){const e=a[1]?+a[1]:void 0;return t=>$K.org({pref:e,header:r,value:t,index:0})}if(o){const e=o[1]?+o[1]:void 0;return t=>$K.org({pref:e,header:r,value:t,index:1})}if(s){const e=s[1]?s[1]:void 0,t=null!=s&&s[2]?+s[2]:void 0;return n=>$K.email({pref:t,header:r,value:n,type:e?toVcardType(e):""})}if(i){const e=i[1]?i[1]:void 0,t=null!=i&&i[2]?+i[2]:void 0;return n=>$K.tel({pref:t,header:r,value:n,type:e?toVcardType(e):""})}if(c){const e=null!=c&&c[2]?+c[2]:void 0;return t=>$K.tel({pref:e,header:r,value:t,type:"fax"})}if(l){const e=null!=l&&l[2]?+l[2]:void 0;return t=>$K.tel({pref:e,header:r,value:t,type:"pager"})}if(d){const e=d[1]?+d[1]:void 0;return t=>$K.tel({pref:e,header:r,value:t,type:"other"})}if(u){const e=u[1]?u[1]:void 0,t=null!=u&&u[2]?+u[2]:void 0;return n=>$K.adr({pref:t,header:r,type:toVcardType(e),value:n,index:0})}if(p){const e=p[1]?p[1]:void 0,t=null!=p&&p[2]?+p[2]:void 0;return n=>$K.adr({pref:t,header:r,type:toVcardType(e),value:n,index:1})}if(m){const e=m[1]?m[1]:void 0,t=null!=m&&m[2]?+m[2]:void 0;return n=>$K.adr({pref:t,header:r,type:toVcardType(e),value:n,index:2})}if(g){const e=g[1]?g[1]:void 0,t=null!=g&&g[2]?+g[2]:void 0;return n=>$K.adr({pref:t,header:r,type:toVcardType(e),value:n,index:3})}if(j){const e=j[1]?j[1]:void 0,t=null!=j&&j[2]?+j[2]:void 0;return n=>$K.adr({pref:t,header:r,type:toVcardType(e),value:n,index:4})}if(b){const e=b[1]?b[1]:void 0,t=null!=b&&b[2]?+b[2]:void 0;return n=>$K.adr({pref:t,header:r,type:toVcardType(e),value:n,index:5})}if(y){const e=y[1]?y[1]:void 0,t=null!=y&&y[2]?+y[2]:void 0;return n=>$K.adr({pref:t,header:r,type:toVcardType(e),value:n,index:6})}return"job title"===n?e=>({header:r,value:e,checked:!0,field:"title"}):"role"===n?e=>({header:r,value:e,checked:!0,field:"role"}):"birthday"===n?e=>({header:r,value:e,checked:!0,field:"bday"}):"anniversary"===n?e=>({header:r,value:e,checked:!0,field:"anniversary"}):n.includes("web")?e=>({header:r,value:e,checked:!0,field:"url"}):"photo"===n?e=>({header:r,value:e,checked:!0,field:"photo"}):"logo"===n?e=>({header:r,value:e,checked:!0,field:"logo"}):"location"===n?e=>({header:r,value:e,checked:!0,field:"geo",type:"main"}):"office location"===n?e=>({header:r,value:e,checked:!0,field:"geo",type:"work"}):"gender"===n?e=>({header:r,value:e,checked:!0,field:"gender"}):"timezone"===n?e=>({header:r,value:e,checked:!0,field:"tz"}):"organization"===n?e=>({header:r,value:e,checked:!0,field:"org"}):"language"===n?e=>({header:r,value:e,checked:!0,field:"lang"}):"member"===n?e=>({header:r,value:e,checked:!0,field:"member"}):"notes"===n||n.includes("custom field")?e=>({header:r,value:e,checked:!0,field:"note"}):"categories"===n?e=>({header:r,value:e,checked:!0,field:"categories"}):e=>({header:r,value:e,checked:!0,field:"note",custom:!0})},getFirstValue=e=>e[0].checked?e[0].value:"",eB={fn:e=>e.reduce(((e,{value:t,checked:n})=>t&&n?"".concat(e," ").concat(t):e),"").trim(),adr(e){const sanitizeStringValue=e=>e.replaceAll("\n"," "),t=new Array(7).fill("");return e.forEach((({value:e,checked:n,combineIndex:r})=>{n&&(e="string"==typeof e?sanitizeStringValue(e):e.map((e=>sanitizeStringValue(e))),t[r||0]=e)})),t},org(e){const t=new Array(2).fill("");return e.forEach((({value:e,checked:n,combineIndex:r})=>{n&&(t[r||0]=e)})),t.filter(Boolean).join(";")},categories:e=>getFirstValue(e).split(";"),email:getFirstValue,tel:getFirstValue,photo:getFirstValue,bday:getFirstValue,anniversary:getFirstValue,title:getFirstValue,role:getFirstValue,note:getFirstValue,url:getFirstValue,gender:getFirstValue,lang:getFirstValue,tz:getFirstValue,geo:getFirstValue,logo:getFirstValue,member:getFirstValue,custom(e){const{checked:t,header:n,value:r}=e[0];return t&&r?"".concat(n,": ").concat(getFirstValue(e)):""}},tB={fn:e=>e.reduce(((e,{value:t,checked:n})=>t&&n?"".concat(e," ").concat(t):e),"").trim(),adr(e){const t=new Array(7).fill("");return e.forEach((({value:e,checked:n,combineIndex:r})=>{n&&(t[r||0]=e)})),t.filter(Boolean).join(", ")},org(e){const t=new Array(2).fill("");return e.forEach((({value:e,checked:n,combineIndex:r})=>{n&&(t[r||0]=e)})),t.filter(Boolean).join("; ")},email(e){const{value:t}=e[0];return Array.isArray(t)?t.join(", "):t},tel:getFirstValue,photo:getFirstValue,bday:getFirstValue,anniversary:getFirstValue,title:getFirstValue,role:getFirstValue,note:getFirstValue,url:getFirstValue,gender:getFirstValue,lang:getFirstValue,tz:getFirstValue,geo:getFirstValue,logo:getFirstValue,member:getFirstValue,categories:getFirstValue,custom(e){const{header:t,value:n,checked:r}=e[0];return r&&n?"".concat(t,": ").concat(getFirstValue(e)):""}};function csv_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function csv_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?csv_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):csv_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const csv_parse=({headers:e=[],contacts:t=[]})=>{if(!t.length)return[];const{headers:n,contacts:r}=(({headers:e,contacts:t})=>{if(!t.length)return;const n=["birthday","anniversary","gender"],r=new Map;n.forEach((e=>r.set(e,!1)));const a=e.map((e=>e.replace("_"," ").toLowerCase())),{beRemoved:o,beChanged:s}=a.reduce(((e,a,o)=>{const{beRemoved:s,beChanged:i}=e,c=t[0][o];if(((e,t)=>!t.some((t=>""!==t[e])))(o,t)&&(s[o]=!0),JK.includes(a)||a.startsWith("im")||a.includes("event")||qK.some((e=>e.test(a))))return s[o]=!0,e;n.includes(a)&&(r.get(a)?s[o]=!0:r.set(a,!0)),"address"===a&&(i[o]="street"),"zip"===a&&(i[o]="postal code"),"county"===a&&(i[o]="state");const l=a.match(/^address\s?\d+? - type$/);if(l){const[,t]=l,n=t||"";return s[o]=!0,s[o+1]=!0,i[o+2]="".concat((0,br.kC)(toVcardType(c))," Street ").concat(n).trim(),i[o+3]="".concat((0,br.kC)(toVcardType(c))," City ").concat(n).trim(),i[o+4]="".concat((0,br.kC)(toVcardType(c))," PO Box ").concat(n).trim(),i[o+5]="".concat((0,br.kC)(toVcardType(c))," State ").concat(n).trim(),i[o+6]="".concat((0,br.kC)(toVcardType(c))," Postal Code ").concat(n).trim(),i[o+7]="".concat((0,br.kC)(toVcardType(c))," Country ").concat(n).trim(),i[o+8]="".concat((0,br.kC)(toVcardType(c))," Extended Address ").concat(n).trim(),e}const d=a.match(/^organization\s?\d+? - (\w+)$/);if(d){const[,t]=d;return"name"===t?i[o]="Company":"title"===t?i[o]="Job Title":"department"===t?i[o]="Department":"job description"===t?i[o]="Role":s[o]=!0,e}const u=a.match(/(.*) - type$/i);if(u){const[,t]=u;return s[o]=!0,i[o+1]="".concat((0,br.kC)(toVcardType(c))," ").concat(t).trim(),e}return e}),{beRemoved:{},beChanged:{}});return{headers:a.map(((t,n)=>({original:e[n],standard:s[n]?s[n]:t}))).filter(((e,t)=>!o[t])),contacts:t.map((e=>e.filter(((e,t)=>!o[t]))))}})({headers:e,contacts:t})||{};if(null==n||!n.length||null==r||!r.length)return[];const a=n.map(toPreVcard);return r.map((e=>e.map(((e,t)=>a[t](e))).flat())).map((e=>e.filter((e=>!!e))))},toVcard=e=>{var t,n;if(!e.length)return;const r=getAllTypes(),{pref:a,field:o,type:s,custom:i}=e[0],c=null===(t=r[o])||void 0===t||null===(n=t[0])||void 0===n?void 0:n.value;return i?{pref:a,field:o,type:s||c,value:eB.custom(e),display:tB.custom(e)}:{pref:a,field:o,type:s||c,value:eB[o](e),display:tB[o](e)}},toVcardContacts=e=>e.map((e=>e.map(toVcard).filter(Za.Z).sort(sortByPref))).map((e=>e.reduce(((e,t)=>"email"===t.field&&Array.isArray(t.value)?[...e,...t.value.map((e=>csv_objectSpread(csv_objectSpread({},t),{},{display:e,value:e})))]:[...e,t]),[])));var nB,rB,aB,oB,sB,iB,cB,lB;class ImportFatalError extends Error{constructor(e){super((0,u.c)("Error importing calendar").t(nB||(nB=(0,d.Z)(["An unexpected error occurred. Import must be restarted."])))),this.error=void 0,this.error=e,Object.setPrototypeOf(this,ImportFatalError.prototype)}}let dB;!function(e){e[e.NO_FILE_SELECTED=0]="NO_FILE_SELECTED",e[e.NO_CSV_OR_VCF_FILE=1]="NO_CSV_OR_VCF_FILE",e[e.FILE_EMPTY=2]="FILE_EMPTY",e[e.FILE_TOO_BIG=3]="FILE_TOO_BIG",e[e.FILE_CORRUPTED=4]="FILE_CORRUPTED",e[e.NO_CONTACTS=5]="NO_CONTACTS",e[e.TOO_MANY_CONTACTS=6]="TOO_MANY_CONTACTS"}(dB||(dB={}));class ImportFileError_ImportFileError extends Error{constructor(e,t){super(((e,t="")=>{const n='"'.concat((0,br.$G)(t,100),'"');return e===dB.NO_FILE_SELECTED?(0,u.c)("Error importing contacts").t(rB||(rB=(0,d.Z)(["An error occurred uploading your file. No file has been selected."]))):e===dB.NO_CSV_OR_VCF_FILE?(0,u.c)("Error importing contacts").t(aB||(aB=(0,d.Z)(["An error occurred uploading your file ",". No .csv or .vcf file selected"])),n):e===dB.FILE_EMPTY?(0,u.c)("Error importing contacts").t(oB||(oB=(0,d.Z)(["Your file "," is empty."])),n):e===dB.FILE_TOO_BIG?(0,u.c)("Error importing contacts").t(sB||(sB=(0,d.Z)(["An error occurred uploading your file ",". Maximum file size is ","."])),n,as):e===dB.NO_CONTACTS?(0,u.c)("Error importing contacts").t(iB||(iB=(0,d.Z)(["Your file "," has no contacts to be imported."])),n):e===dB.TOO_MANY_CONTACTS?(0,u.c)("Error importing contacts").t(cB||(cB=(0,d.Z)(["Your file "," contains more than "," contacts."])),n,ns):e===dB.FILE_CORRUPTED?(0,u.c)("Error importing contacts").t(lB||(lB=(0,d.Z)(["An error occurred reading your file ",". File doesn't have the right format."])),n):void 0})(e,t)),Object.setPrototypeOf(this,ImportFileError_ImportFileError.prototype)}}function encryptAndSubmit_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function encryptAndSubmit_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?encryptAndSubmit_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):encryptAndSubmit_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const{SINGLE_SUCCESS:uB}=M.vB,encryptContact=async(e,{privateKey:t,publicKey:n})=>{try{return{contact:await prepareContact(e,{privateKey:t,publicKey:n}),contactId:getContactId(e),contactEmails:(r=e,addGroup(r).filter((({field:e})=>"email"===e)).map((({value:e,group:t})=>{if(!t)throw new Error("Email properties should have a group");return{email:Array.isArray(e)?e[0]:e,group:t}}))),categories:getContactCategories(e)}}catch(t){const n=getContactId(e);return new ImportContactError(RF.ENCRYPTION_ERROR,n)}var r},submitContacts=async({contacts:e,labels:t,overwrite:n,api:r,isImport:a})=>{let o=[];try{const{Responses:s}=await r(encryptAndSubmit_objectSpread(encryptAndSubmit_objectSpread({},(0,Lo.el)({Contacts:e.map((({contact:e})=>e)),Overwrite:n,Labels:t,Import:a?1:0})),{},{timeout:M.kr,silence:!0}));o=s}catch(t){const{Code:n=0,Error:r=t.message}=t.data||{};o=e.map(((e,t)=>({Index:t,Response:{Code:n,Error:r}})))}return o.map((t=>{const{Index:n,Response:{Error:r,Code:a,Contact:o}}=t;if(a!==uB||!o){const t=new Error(r),{contactId:a}=e[n];return new ImportContactError(RF.EXTERNAL_ERROR,a,t)}const s=e[n];return{contactID:o.ID,contactEmailIDs:o.ContactEmails.map((e=>e.ID)),categories:extractContactImportCategories(o,s)}}))},extractTotals=e=>{const{parsedVcardContacts:t,totalEncrypted:n,totalImported:r,errors:a}=e,o=t.length;return{totalToImport:o,totalToProcess:2*o,totalImported:r,totalProcessed:n+r+a.length}},onlyDragFiles=e=>t=>{if((e=>{var t;return null===(t=e.dataTransfer)||void 0===t?void 0:t.types.includes("Files")})(t))return e(t)},pB=["file","iconName","className","clear","onClear"];function AttachedFile_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function AttachedFile_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?AttachedFile_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AttachedFile_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var mB,attachedFile_AttachedFile=e=>{let{file:t,iconName:n,className:r,clear:a,onClear:o}=e,s=(0,Sn.Z)(e,pB);const[i,c]=(0,To.EQ)(t.name);return(0,j.jsxs)("div",AttachedFile_objectSpread(AttachedFile_objectSpread({className:"flex bordered w100 rounded ".concat(r)},s),{},{children:[(0,j.jsx)("div",{className:"p0-5 flex flex-item-noshrink w10",children:(0,j.jsx)(pr.Z,{name:n,className:"mauto"})}),(0,j.jsxs)("div",{className:"message-attachmentInfo p0-5 flex flex-nowrap w90",children:[(0,j.jsxs)("div",{className:"flex-item-fluid pr1",children:[(0,j.jsx)("div",{className:"text-ellipsis",title:i,children:i}),(0,j.jsx)("div",{children:"".concat(c.toUpperCase()," - ").concat(helpers_humanSize(t.size))})]}),a&&o&&(0,j.jsx)(Ea.Z,{className:"flex-item-noshrink",onClick:o,children:a})]})]}))};const gB=["children","isHovered","onDrop","onDragEnter","onDragLeave","className","content"];function Dropzone_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dropzone_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dropzone_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dropzone_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var jB,bB,yB,dropzone_Dropzone=e=>{let{children:t,isHovered:n,onDrop:r,onDragEnter:a,onDragLeave:s,className:i,content:c=(0,u.c)("Info").t(mB||(mB=(0,d.Z)(["Drop the file here to upload"])))}=e,l=(0,Sn.Z)(e,gB);const[p,m]=(0,o.useState)(!0);return(0,o.useEffect)((()=>{const onBlur=()=>{m(!1)},e=setTimeout((()=>{n&&m(!1)}),5e3);return window.addEventListener("blur",onBlur),()=>{window.removeEventListener("blur",onBlur),clearTimeout(e)}}),[n]),(0,j.jsxs)("div",Dropzone_objectSpread(Dropzone_objectSpread({className:i,onDrop:r,onDragEnter:e=>{m(!0),a(e)},onDragOver:e=>e.preventDefault()},l),{},{children:[(0,j.jsx)("div",{className:(0,ht.dh)(["dropzone covered-absolute flex flex-justify-center flex-align-items-center",p&&n&&"is-hovered"]),onDragLeave:s,children:(0,j.jsx)("span",{className:"dropzone-text no-pointer-events",children:c})}),(0,j.jsx)("div",{className:"dropzone-content flex flex-align-items-center flex-justify-center w100",children:t})]}))};var import_AttachingModalContent=({model:e,onAttach:t,onClear:n,isDropzoneHovered:r,onDrop:a,onDragEnter:o,onDragLeave:s})=>{var i;const c=e.failure?(0,j.jsx)(Cn.Z,{className:"mb1",type:"error",children:null===(i=e.failure)||void 0===i?void 0:i.message}):(0,j.jsx)(Cn.Z,{className:"mb1",learnMore:"https://protonmail.com/support/knowledge-base/adding-contacts/",children:(0,u.c)("Description").ngettext((0,u.msgid)(jB||(jB=(0,d.Z)(["The file should have a maximum size of "," and have up to "," contact. If your file is bigger, please split it into smaller files."])),as,ns),"The file should have a maximum size of ".concat(as," and have up to ").concat(ns," contacts. If your file is bigger, please split it into smaller files."),ts)});return(0,j.jsxs)(j.Fragment,{children:[c,(0,j.jsx)(container_Bordered,{className:(0,ht.dh)(["flex relative",!!e.failure&&"border--danger"]),children:e.fileAttached?(0,j.jsx)(attachedFile_AttachedFile,{file:e.fileAttached,iconName:"user-group",clear:(0,u.c)("Action").t(bB||(bB=(0,d.Z)(["Delete"]))),onClear:n}):(0,j.jsx)(dropzone_Dropzone,{isHovered:r,onDrop:a,onDragEnter:o,onDragLeave:s,className:"w100",children:(0,j.jsx)(wl.Z,{accept:".csv, .vcf",id:"import-contacts",onChange:t,children:(0,u.c)("Action").t(yB||(yB=(0,d.Z)(["Choose a file or drag it here"])))})})})]})};function importCsv_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function importCsv_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?importCsv_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):importCsv_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const modifyContactField=(e,t,n)=>e.map(((e,r)=>r!==t?e:e.map((e=>((e,t)=>{const n={fn:[],email:["","home","work","other"],tel:["","home","work","other","cell","main","fax","pager"],adr:["","home","work","other"],bday:[],anniversary:[],gender:[],lang:[],tz:[],geo:[],title:[],role:[],logo:[],org:[],member:[],note:[],url:[],photo:[]},r=n[t].includes(e.type||"")?e.type:n[t].length?n[t][0]:void 0;return importCsv_objectSpread(importCsv_objectSpread({},e),{},{field:t,type:r,custom:!1})})(e,n))))),modifyContactType=(e,t,n)=>e.map(((e,r)=>r!==t?e:e.map((e=>((e,t)=>importCsv_objectSpread(importCsv_objectSpread({},e),{},{type:t}))(e,n)))));var hB,IB,fB,MB;const NB=["disabledPrevious","disabledNext","onPrevious","onNext"];function ImportCsvTableHeader_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ImportCsvTableHeader_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ImportCsvTableHeader_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ImportCsvTableHeader_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var import_ImportCsvTableHeader=e=>{let{disabledPrevious:t=!0,disabledNext:n=!0,onPrevious:r,onNext:a}=e,o=(0,Sn.Z)(e,NB);return(0,j.jsx)("thead",ImportCsvTableHeader_objectSpread(ImportCsvTableHeader_objectSpread({},o),{},{children:(0,j.jsxs)("tr",{children:[(0,j.jsx)(table_TableCell,{type:"header",className:"w15 text-center",children:(0,u.c)("TableHeader").t(hB||(hB=(0,d.Z)(["Import"])))}),(0,j.jsx)(table_TableCell,{type:"header",className:"text-center",children:(0,u.c)("TableHeader").t(IB||(IB=(0,d.Z)(["CSV field"])))}),(0,j.jsx)(table_TableCell,{type:"header",className:"text-center",children:(0,u.c)("TableHeader").t(fB||(fB=(0,d.Z)(["vCard field"])))}),(0,j.jsx)(table_TableCell,{type:"header",className:"w30 text-center",children:(0,j.jsxs)("div",{className:"inline-flex",children:[(0,j.jsx)("span",{className:"flex-item-centered-vert mr0-5",children:(0,u.c)("TableHeader").t(MB||(MB=(0,d.Z)(["Values"])))}),(0,j.jsxs)("span",{className:"flex flex-nowrap",children:[(0,j.jsx)(Ea.Z,{icon:!0,disabled:t,onClick:r,children:(0,j.jsx)(pr.Z,{name:"angle-down",className:"flex-item-noshrink rotateZ-90"})}),(0,j.jsx)(Ea.Z,{icon:!0,disabled:n,onClick:a,children:(0,j.jsx)(pr.Z,{name:"angle-down",className:"flex-item-noshrink rotateZ-270"})})]})]})})]})}))};var import_SelectImportField=({value:e="",onChangeField:t})=>{const n=[{text:(0,u.c)("Contact field label").t(Es||(Es=(0,d.Z)(["Name"]))),value:"fn"},{text:(0,u.c)("Contact field label").t(Ls||(Ls=(0,d.Z)(["Email"]))),value:"email"},{text:(0,u.c)("Contact field label").t(Ps||(Ps=(0,d.Z)(["Phone"]))),value:"tel"},{text:(0,u.c)("Contact field label").t(Zs||(Zs=(0,d.Z)(["Address"]))),value:"adr"},{text:(0,u.c)("Contact field label").t(Ts||(Ts=(0,d.Z)(["Photo"]))),value:"photo"},{text:(0,u.c)("Contact field label").t(ks||(ks=(0,d.Z)(["Organization"]))),value:"org"},{text:(0,u.c)("Contact field label").t(zs||(zs=(0,d.Z)(["Birthday"]))),value:"bday"},{text:(0,u.c)("Contact field label").t(_s||(_s=(0,d.Z)(["Anniversary"]))),value:"anniversary"},{text:(0,u.c)("Contact field label").t(Rs||(Rs=(0,d.Z)(["Title"]))),value:"title"},{text:(0,u.c)("Contact field label").t(Gs||(Gs=(0,d.Z)(["Role"]))),value:"role"},{text:(0,u.c)("Contact field label").t(Ys||(Ys=(0,d.Z)(["Note"]))),value:"note"},{text:(0,u.c)("Contact field label").t(Us||(Us=(0,d.Z)(["URL"]))),value:"url"},{text:(0,u.c)("Contact field label").t(Fs||(Fs=(0,d.Z)(["Gender"]))),value:"gender"},{text:(0,u.c)("Contact field label").t(Ks||(Ks=(0,d.Z)(["Language"]))),value:"lang"},{text:(0,u.c)("Contact field label").t(Bs||(Bs=(0,d.Z)(["Timezone"]))),value:"tz"},{text:(0,u.c)("Contact field label").t(Ws||(Ws=(0,d.Z)(["Geo"]))),value:"geo"},{text:(0,u.c)("Contact field label").t(Vs||(Vs=(0,d.Z)(["Logo"]))),value:"logo"},{text:(0,u.c)("Contact field label").t(Qs||(Qs=(0,d.Z)(["Member"]))),value:"member"}];return(0,j.jsx)(gr.Z,{className:"pt0",children:(0,j.jsx)(Ec.Z,{value:e,options:n,onChange:({target:e})=>t(e.value)})})};var import_SelectImportType=({field:e="",value:t,onChangeType:n})=>{const r=getAllTypes();return(0,j.jsx)(gr.Z,{className:"pt0",children:(0,j.jsx)(Ec.Z,{value:t,options:r[e],onChange:({target:e})=>n(e.value)})})};var import_ImportCsvTableRows=({preVcards:e,onToggle:t,onChangeField:n,onChangeType:r})=>{const{field:a,type:o,display:s}=toVcard(e)||{};return"n"===a||"categories"===a?null:(0,j.jsx)(j.Fragment,{children:e.map((({checked:i,header:c},l)=>(0,j.jsxs)("tr",{children:[(0,j.jsx)("td",{className:"text-center",children:(0,j.jsx)(Nr,{checked:i,onChange:()=>t(l)})}),(0,j.jsx)("td",{children:c}),0===l?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("td",{rowSpan:e.length,children:(0,j.jsxs)("div",{className:"flex",children:[(0,j.jsx)(import_SelectImportField,{value:a,onChangeField:n}),void 0!==o?(0,j.jsx)(import_SelectImportType,{field:a,value:o,onChangeType:r}):null]})}),(0,j.jsx)("td",{rowSpan:e.length,className:"text-ellipsis",title:s,children:s})]}):null]},l.toString())))})};var xB,vB,wB,import_ImportCsvTableBody=({contact:e,onToggle:t,onChangeField:n,onChangeType:r})=>(0,j.jsx)("tbody",{children:e&&e.map(((e,a)=>(0,j.jsx)(import_ImportCsvTableRows,{preVcards:e,onToggle:t(a),onChangeField:n(a),onChangeType:r(a)},"".concat(e[0].header).concat(a.toString()))))});function ImportCsvModalContent_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ImportCsvModalContent_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ImportCsvModalContent_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ImportCsvModalContent_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var DB,SB,OB,AB,CB,EB,LB,PB,ZB,TB,kB,zB,import_ImportCsvModalContent=({model:e,setModel:t})=>{const{createNotification:n}=(0,hn.Z)(),[r,a]=(0,o.useState)(0),{preVcardsContacts:s}=e;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Cn.Z,{className:"mb1",children:(0,u.c)("Description of the purpose of the import CSV modal").t(vB||(vB=(0,d.Z)(["We have detected the following fields in the CSV file you uploaded. Check the ones you want to import."])))}),(0,j.jsx)(Cn.Z,{className:"mb1",children:(0,u.c)("Description of the purpose of the import CSV modal").t(wB||(wB=(0,d.Z)(["Also, we have automatically matched CSV fields with vCard fields. You can review and change this matching manually."])))}),(0,j.jsxs)(table_Table,{children:[(0,j.jsx)(import_ImportCsvTableHeader,{disabledPrevious:0===r,disabledNext:0===s.length||r+1===s.length,onNext:()=>a((e=>e+1)),onPrevious:()=>a((e=>e-1))}),(0,j.jsx)(import_ImportCsvTableBody,{contact:s&&s[r],onToggle:r=>a=>{if("fn-main"===s[0][r][a].combineInto){const e=s[0][r],t=e.findIndex((({header:e})=>"first name"===e.toLowerCase())),o=e.findIndex((({header:e})=>"last name"===e.toLowerCase())),i=-1!==t&&e[t].checked,c=-1!==o&&e[o].checked;if(!i&&a===o||!c&&a===t)return n({type:"error",text:(0,u.c)("Error notification").t(xB||(xB=(0,d.Z)(["First name and last name cannot be unchecked at the same time"])))})}t(ImportCsvModalContent_objectSpread(ImportCsvModalContent_objectSpread({},e),{},{preVcardsContacts:s.map((e=>((e,[t,n])=>{const r="fn-main"===e[t][n].combineInto,a=r?e.findIndex((e=>"n"===e[0].combineInto)):-1;return e.map(((o,s)=>{if(s===t)return o.map(((e,t)=>t!==n?e:importCsv_objectSpread(importCsv_objectSpread({},e),{},{checked:!e.checked})));if(r&&s===a){const r=e[t][n].header,s=e[a].findIndex((({header:e})=>e===r));return o.map(((e,t)=>t!==s?e:importCsv_objectSpread(importCsv_objectSpread({},e),{},{checked:!e.checked})))}return o}))})(e,[r,a])))}))},onChangeField:n=>r=>t(ImportCsvModalContent_objectSpread(ImportCsvModalContent_objectSpread({},e),{},{preVcardsContacts:s.map((e=>modifyContactField(e,n,r)))})),onChangeType:n=>r=>t(ImportCsvModalContent_objectSpread(ImportCsvModalContent_objectSpread({},e),{},{preVcardsContacts:s.map((e=>modifyContactType(e,n,r)))}))})]})]})};function ImportGroupsModalContent_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ImportGroupsModalContent_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ImportGroupsModalContent_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ImportGroupsModalContent_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const SelectGroupAction=({action:e,index:t,canMerge:n,onChange:r})=>{const a=[n&&{text:(0,u.c)("Option").t(DB||(DB=(0,d.Z)(["Add to existing group"]))),value:TF.MERGE},{text:(0,u.c)("Option").t(SB||(SB=(0,d.Z)(["Create new group"]))),value:TF.CREATE},{text:(0,u.c)("Option").t(OB||(OB=(0,d.Z)(["Ignore group"]))),value:TF.IGNORE}].filter(Za.Z);return(0,j.jsx)(selectTwo_SelectTwo,{id:"contact-group-action-select",value:e,onChange:({value:e})=>r(e,t),title:(0,u.c)("Title").t(AB||(AB=(0,d.Z)(["Select action to take on contact group"]))),children:a.map((({text:e,value:t})=>(0,j.jsx)(option_Option,{value:t,title:e},t)))})},SelectGroup=({targetGroup:e,targetName:t,contactGroups:n=[],action:r,index:a,error:o,onChangeTargetGroup:s,onChangeTargetName:i,onError:c})=>{const l=n.map((({Name:e})=>e)),p=n.map((e=>({text:e.Name,value:e}))),handleChangeGroupName=({target:e})=>{c("",a);const t=e.value;t?l.includes(t)?c((0,u.c)("Error").t(EB||(EB=(0,d.Z)(["A group with this name already exists"]))),a):M.bB.includes((0,br.Fv)(t))&&c((0,u.c)("Error").t(LB||(LB=(0,d.Z)(["Invalid name"]))),a):c((0,u.c)("Error").t(CB||(CB=(0,d.Z)(["You must set a name"]))),a),i(e.value,a)};return r===TF.CREATE?(0,j.jsx)(jr.Z,{id:"contact-group-create",placeholder:(0,u.c)("Placeholder").t(PB||(PB=(0,d.Z)(["Name"]))),maxLength:100,title:(0,u.c)("Title").t(ZB||(ZB=(0,d.Z)(["Add contact group name"]))),error:o,isSubmitted:!!o,value:t,onChange:handleChangeGroupName}):r===TF.MERGE?(0,j.jsx)(selectTwo_SelectTwo,{id:"contact-group-select",value:e,onChange:({value:e})=>s(e,a),title:(0,u.c)("Title").t(TB||(TB=(0,d.Z)(["Select contact group"]))),children:p.map((({text:e,value:t})=>(0,j.jsx)(option_Option,{value:t,title:e},t.Name)))}):null};var _B,RB,GB,import_ImportGroupsModalContent=({model:e,setModel:t})=>{const{categories:n}=e,handleChangeAction=(e,n)=>{t((t=>ImportGroupsModalContent_objectSpread(ImportGroupsModalContent_objectSpread({},t),{},{categories:t.categories.map(((t,r)=>n!==r?t:ImportGroupsModalContent_objectSpread(ImportGroupsModalContent_objectSpread({},(0,Ne.CE)(t,["error"])),{},{action:e})))})))},handleChangeTargetGroup=(e,n)=>{t((t=>ImportGroupsModalContent_objectSpread(ImportGroupsModalContent_objectSpread({},t),{},{categories:t.categories.map(((t,r)=>n!==r?t:ImportGroupsModalContent_objectSpread(ImportGroupsModalContent_objectSpread({},t),{},{targetGroup:e})))})))},handleChangeTargetName=(e,n)=>{t((t=>ImportGroupsModalContent_objectSpread(ImportGroupsModalContent_objectSpread({},t),{},{categories:t.categories.map(((t,r)=>n!==r?t:ImportGroupsModalContent_objectSpread(ImportGroupsModalContent_objectSpread({},t),{},{targetName:e})))})))},handleSetError=(e,n)=>{t((t=>ImportGroupsModalContent_objectSpread(ImportGroupsModalContent_objectSpread({},t),{},{categories:t.categories.map(((t,r)=>n!==r?t:ImportGroupsModalContent_objectSpread(ImportGroupsModalContent_objectSpread({},t),{},{error:e})))})))},r=n.map((({name:t,totalContacts:n,action:r,targetGroup:a,targetName:o,error:s},i)=>{var c;const l=(0,u.c)("Import contact groups info").ngettext((0,u.msgid)(kB||(kB=(0,d.Z)([""," contact"])),n),"".concat(n," contacts"),n),p="".concat(t," (").concat(l,")");return(0,j.jsxs)("div",{className:"flex flex-nowrap flex-item-fluid flex-align-items-center on-tiny-mobile-flex-column mb1",children:[(0,j.jsx)("div",{className:"flex-item-fluid text-ellipsis mr1",title:p,children:p}),(0,j.jsx)("div",{className:"flex-item-fluid mr1 on-mobile-mr0",children:(0,j.jsx)(SelectGroupAction,{action:r,index:i,canMerge:!(null===(c=e.contactGroups)||void 0===c||!c.length),onChange:handleChangeAction})}),(0,j.jsx)("div",{className:"flex-item-fluid w30",children:(0,j.jsx)(SelectGroup,{contactGroups:e.contactGroups,action:r,targetGroup:a,targetName:o,error:s,index:i,onChangeTargetGroup:handleChangeTargetGroup,onChangeTargetName:handleChangeTargetName,onError:handleSetError})})]},t)}));return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Cn.Z,{className:"mb1",children:(0,u.c)("Description").t(zB||(zB=(0,d.Z)(["It looks like the contact list you are importing contains some groups. Please review how these groups should be imported."])))}),r]})};function ImportingModalContent_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ImportingModalContent_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ImportingModalContent_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ImportingModalContent_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var import_ImportingModalContent=({model:e,setModel:t,onFinish:n})=>{const r=(0,Dn.Z)(),a=(0,us.df)();(0,pn.Z)((0,u.c)("Alert").t(_B||(_B=(0,d.Z)(["By leaving now, some contacts may not be imported"])))),(0,o.useEffect)((()=>{const o=new AbortController,{signal:s}=o,apiWithAbort=e=>r(ImportingModalContent_objectSpread(ImportingModalContent_objectSpread({},e),{},{signal:s})),setModelWithAbort=e=>{s.aborted||t(e)},handleImportProgress=(e,t,n)=>{setModelWithAbort((r=>ImportingModalContent_objectSpread(ImportingModalContent_objectSpread({},r),{},{totalEncrypted:r.totalEncrypted+e.length,totalImported:r.totalImported+t.length,importedContacts:[...r.importedContacts,...t],errors:[...r.errors,...n]})))};return(async()=>{try{const{privateKeys:[t],publicKeys:[r]}=(0,ju.ee)(await a()),o={privateKey:t,publicKey:r},i=await(async({contacts:e,labels:t,overwrite:n,keyPair:r,api:a,signal:o,isImport:s,onProgress:i})=>{const c=(0,xe.yo)(e,10),l=[],d=[];for(let e=0;e<c.length;e++){if(o.aborted)return[];const u=c[e],[p]=await Promise.all([Promise.all(u.map((e=>encryptContact(e,r)))),(0,Wt.D)(100)]),{errors:m,rest:g}=import_splitErrors(p);if(o.aborted)return[];if(i(g,[],m),g.length){const e=submitContacts({contacts:g,labels:t,overwrite:n,isImport:s,api:a}).then((e=>{const{errors:t,rest:n}=import_splitErrors(e);d.push(n),i([],n,t)}));l.push(e)}}return await Promise.all(l),d.flat()})({contacts:e.parsedVcardContacts,labels:Xo.IGNORE,overwrite:Ho.OVERWRITE_CONTACT,keyPair:o,api:apiWithAbort,signal:s,onProgress:handleImportProgress,isImport:!0});if(s.aborted)return;n(i)}catch(e){if(setModelWithAbort((()=>({step:ZF.ATTACHING,parsedVcardContacts:[],importedContacts:[],totalEncrypted:0,totalImported:0,errors:[],categories:[],loading:!1,failure:new ImportFatalError(e)}))),s.aborted)return;n([])}})(),()=>{o.abort()}}),[]);const{totalToImport:s,totalToProcess:i,totalImported:c,totalProcessed:l}=extractTotals(e);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Cn.Z,{className:"mb1",children:(0,u.c)("Description").t(RB||(RB=(0,d.Z)(["Encrypting and importing contacts... This may take a few minutes. When the process is completed, you can close this modal."])))}),(0,j.jsx)(progress_DynamicProgress,{id:"progress-import-contacts",value:l,display:(0,u.c)("Import calendar").t(GB||(GB=(0,d.Z)(["Encrypting and adding contacts: ","/",""])),c,s),max:i,loading:!0})]})};const YB=["children","className","onToggle","open"];function Details_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Details_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Details_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Details_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Details=(e,t)=>{let{children:n,className:r,onToggle:a,open:s}=e,i=(0,Sn.Z)(e,YB);const c=(0,o.useRef)(!0);return(0,j.jsx)("details",Details_objectSpread(Details_objectSpread({className:r,ref:t,open:s,onToggle:e=>{c.current&&(c.current=!1,s)||null==a||a(e)}},i),{},{children:n}))};var UB=(0,o.forwardRef)(Details);const FB=["children"];function Summary_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Summary_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Summary_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Summary_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var KB,BB,container_Summary=e=>{let{children:t}=e,n=(0,Sn.Z)(e,FB);return(0,j.jsx)("summary",Summary_objectSpread(Summary_objectSpread({},n),{},{children:(0,j.jsxs)("div",{className:"flex flex-nowrap",children:[(0,j.jsx)(pr.Z,{name:"angle-down",className:"summary-caret mr0-25 mt0-25 flex-item-noshrink"}),(0,j.jsx)("div",{className:"flex-item-fluid",children:t})]})}))};const WB=["error"];function ErrorDetails_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ErrorDetails_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ErrorDetails_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ErrorDetails_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const ErrorDetail=e=>{let{error:t}=e,n=(0,Sn.Z)(e,WB);const{contactId:r}=t;return(0,j.jsxs)("div",ErrorDetails_objectSpread(ErrorDetails_objectSpread({},n),{},{children:[(0,j.jsx)("span",{children:(0,u.c)("Import contact error").t(KB||(KB=(0,d.Z)(["Contact ",": "])),r)}),(0,j.jsx)("span",{className:"color-danger",children:t.message})]}))};var VB,QB,HB,XB,JB,import_ErrorDetails=({errors:e,summary:t=(0,u.c)("Info on errors").t(BB||(BB=(0,d.Z)(["Click for details"])))})=>e.length?(0,j.jsxs)(UB,{children:[(0,j.jsx)(container_Summary,{children:t}),(0,j.jsx)(container_Bordered,{children:e.map(((e,t)=>(0,j.jsx)(ErrorDetail,{error:e},e.contactId+t.toString())))})]}):null;var qB,$B,eW,tW,import_WarningModalContent=({model:e})=>{const t=e.errors,n=e.parsedVcardContacts.length,r=t.length,a=n+r,o=(0,j.jsx)("strong",{children:(0,u.c)("Import contacts warning").t(VB||(VB=(0,d.Z)(["for now"])))},"for-now"),s=r===a?(0,u.c)("Import warning").t(QB||(QB=(0,d.Z)(["No contact can be imported. Click for details"]))):(0,u.c)("Import warning").t(HB||(HB=(0,d.Z)([""," out of "," contacts will not be imported. Click for details"])),r,a);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(Cn.Z,{className:"mb1",type:"warning",children:[(0,j.jsx)("div",{children:(0,u.c)("Import contacts warning").jt(XB||(XB=(0,d.Z)(["ProtonContacts does not support ",":"])),o)}),(0,j.jsx)("ul",{children:(0,j.jsx)("li",{children:(0,u.c)("Import calendar warning").t(JB||(JB=(0,d.Z)(["vCard versions < 3.0"])))})})]}),(0,j.jsx)(import_ErrorDetails,{summary:s,errors:e.errors})]})};var nW,rW,aW,oW,sW,iW,cW,lW,dW,uW,pW,import_ImportSummaryModalContent=({model:e})=>{const{totalToImport:t,totalToProcess:n,totalImported:r,totalProcessed:a}=extractTotals(e),o=r===t,s=r>0&&!o,i=o?(0,u.c)("Import contacts").ngettext((0,u.msgid)(qB||(qB=(0,d.Z)(["Contact successfully imported. The imported contact will now appear in your contact list."]))),"Contacts successfully imported. The imported contacts will now appear in your contact list.",r):s?(0,u.c)("Import contacts").t($B||($B=(0,d.Z)(["An error occurred while encrypting and adding your contacts. "," out of "," contacts successfully imported."])),r,t):(0,u.c)("Import contact").ngettext((0,u.msgid)(eW||(eW=(0,d.Z)(["An error occurred while encrypting and adding your contact. No contact could be imported."]))),"An error occurred while encrypting and adding your contacts. No contact could be imported.",t),c=s||o?(0,u.c)("Import contact").ngettext((0,u.msgid)(tW||(tW=(0,d.Z)(["","/"," contact encrypted and added to your contact list"])),r,t),"".concat(r,"/").concat(t," contacts encrypted and added to your contact list"),t):"";return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Cn.Z,{className:"mb1",type:o?"info":s?"warning":"error",children:i}),(0,j.jsx)(progress_DynamicProgress,{id:"progress-import-contacts",value:a,display:c,max:n,loading:!1,success:o,partialSuccess:s}),(0,j.jsx)(import_ErrorDetails,{errors:e.errors})]})};const mW=["content"];function ImportModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ImportModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ImportModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ImportModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const{CSV:gW,VCF:jW}=kF,getInitialState=()=>({step:ZF.ATTACHING,parsedVcardContacts:[],importedContacts:[],totalEncrypted:0,totalImported:0,errors:[],categories:[],loading:!1});var bW,yW,hW,IW,fW,MW,NW,xW,vW,import_ImportModal=e=>{let t=(0,hd.Z)({},e);const n=(0,Dn.Z)(),{call:r}=(0,Ie.Z)(),[a,s]=(0,o.useState)(getInitialState()),[i,l]=(0,o.useState)(!1),{feature:p,update:m}=(0,nN.Z)(y.P.UsedContactsImport),g=(()=>{const e=(0,Dn.Z)(),t=(0,Ln.Z)(),n=(0,o.useCallback)((()=>La.G.get(e)),[e]);return(0,o.useCallback)((()=>(0,Zn.NC)(t,La.G.key,n).then(filterContactGroups)),[t,n])})(),[b]=(0,bn.ZP)(),h=(()=>{if(a.step<=ZF.ATTACHED){const e=(0,j.jsx)(yr.Z,{disabled:a.step===ZF.ATTACHING,loading:a.loading,type:"submit",children:(0,u.c)("Action").t(nW||(nW=(0,d.Z)(["Import"])))}),handleClear=()=>{s(getInitialState())},handleHover=e=>onlyDragFiles((t=>{l(e),t.stopPropagation()})),handleFiles=e=>{const[t]=e,n=t.name,[,r]=(0,To.EQ)(n),o=r.toLowerCase();if(!t.size)throw new ImportFileError_ImportFileError(dB.FILE_EMPTY,n);if(!(e=>Object.values(kF).includes(e))(o)||!t)throw new ImportFileError_ImportFileError(dB.NO_CSV_OR_VCF_FILE,n);if(t.size>rs)throw new ImportFileError_ImportFileError(dB.FILE_TOO_BIG,n);s(ImportModal_objectSpread(ImportModal_objectSpread({},a),{},{step:ZF.ATTACHED,fileAttached:t,extension:o,failure:void 0}))},onAddFiles=e=>{try{if(!e)throw new ImportFileError_ImportFileError(dB.NO_FILE_SELECTED);handleFiles(e)}catch(e){s(ImportModal_objectSpread(ImportModal_objectSpread({},a),{},{failure:e}))}},t=onlyDragFiles((e=>{e.preventDefault(),l(!1),onAddFiles([...e.dataTransfer.files])})),handleAttach=({target:e})=>{try{if(!e.files)throw new ImportFileError_ImportFileError(dB.NO_FILE_SELECTED);handleFiles([...e.files])}catch(e){s(ImportModal_objectSpread(ImportModal_objectSpread({},a),{},{failure:e}))}},handleSubmit=async()=>{const{fileAttached:e,extension:t}=a;if(!e)throw new Error("No file");try{if(s(ImportModal_objectSpread(ImportModal_objectSpread({},a),{},{loading:!0})),t===gW){const t=(({headers:e=[],contacts:t=[]})=>{const n=csv_parse({headers:e,contacts:t});if(!n.length)return[];const r=[],a=n[0].reduce(((e,{combineInto:t,combineIndex:n},a)=>t?(e[t]||(e[t]=[]),e[t][n]=a,e):(r.push(a),e)),{});for(const e of Object.keys(a))a[e]=a[e].filter((e=>null!==e));const o=t.map((()=>[]));for(const[e,t]of Object.values(a).entries())o.forEach((e=>e.push([]))),t.forEach((t=>{o.forEach(((r,a)=>r[e].push(csv_objectSpread({},n[a][t]))))}));for(const e of r)o.forEach(((t,r)=>t.push([n[r][e]])));return o})(await(async e=>{const{headers:t,contacts:n,errors:r}=await new Promise(((t,n)=>{XK().parse(e,{header:!1,dynamicTyping:!1,complete:({data:e=[],errors:n=[]}={})=>t({headers:e[0],contacts:e.slice(1),errors:n}),error:n,skipEmptyLines:!0})}));if(r.length)throw new Error("Error when reading csv file");const a=t.length;return{headers:t,contacts:n.map((e=>e.length===a?e:e.length>a?e.slice(0,a):[...e,...(0,xe.w6)(0,a-e.length).map((()=>""))]))}})(e));if(!t.length)throw new ImportFileError_ImportFileError(dB.NO_CONTACTS,e.name);if(t.length>ts)throw new ImportFileError_ImportFileError(dB.TOO_MANY_CONTACTS,e.name);s(ImportModal_objectSpread(ImportModal_objectSpread({},a),{},{step:ZF.IMPORT_CSV,preVcardsContacts:t,failure:void 0,loading:!1}))}else{if(t!==jW)throw new ImportFileError_ImportFileError(dB.NO_CSV_OR_VCF_FILE);{const t=((e="")=>e.split("END:VCARD").filter((e=>(0,Za.Z)(e.trim()))).map((e=>"".concat(e,"END:VCARD").trim())))(await(async e=>{const t=await(0,To.Z_)(e);if(!((e="")=>{const t=e.match(/BEGIN:VCARD/g),n=e.match(/END:VCARD/g);return!(!t||!n)&&t.length===n.length})(t))throw new Error("Error when reading vcf file");return t})(e));if(t.length>ts)throw new ImportFileError_ImportFileError(dB.TOO_MANY_CONTACTS,e.name);const{errors:n,rest:r}=import_splitErrors(getSupportedContacts(t)),o=n.length||!r.length?ZF.WARNING:ZF.IMPORTING;s(ImportModal_objectSpread(ImportModal_objectSpread({},a),{},{step:o,parsedVcardContacts:r,errors:n,failure:void 0,loading:!1}))}}!1===(null==p?void 0:p.Value)&&m(!0)}catch(e){const t=e instanceof ImportFileError_ImportFileError?e:new ImportFatalError(e);s(ImportModal_objectSpread(ImportModal_objectSpread({},getInitialState()),{},{failure:t}))}};return{content:(0,j.jsx)(import_AttachingModalContent,{model:a,onAttach:handleAttach,onClear:handleClear,isDropzoneHovered:i,onDrop:t,onDragEnter:handleHover(!0),onDragLeave:handleHover(!1)}),submit:e,onSubmit:handleSubmit}}if(a.step===ZF.IMPORT_CSV){var e;const t=(0,j.jsx)(yr.Z,{disabled:!(null!==(e=a.preVcardsContacts)&&void 0!==e&&e.length),type:"submit",children:(0,u.c)("Action").t(rW||(rW=(0,d.Z)(["Import"])))}),handleSubmit=()=>{s(ImportModal_objectSpread(ImportModal_objectSpread({},a),{},{step:ZF.IMPORTING,parsedVcardContacts:toVcardContacts(a.preVcardsContacts||[]),errors:[]}))};if(!(e=>!!e.preVcardsContacts)(a))throw new ImportFatalError(new Error("No CSV contacts found"));return{content:(0,j.jsx)(import_ImportCsvModalContent,{model:a,setModel:s}),submit:t,onSubmit:handleSubmit}}if(a.step<=ZF.WARNING){var o;const e=(0,j.jsx)(yr.Z,{disabled:!(null!==(o=a.parsedVcardContacts)&&void 0!==o&&o.length),type:"submit",children:(0,u.c)("Action").t(aW||(aW=(0,d.Z)(["Import"])))}),handleSubmit=()=>{s(ImportModal_objectSpread(ImportModal_objectSpread({},a),{},{step:ZF.IMPORTING,errors:[]}))};return{title:(0,u.c)("Title").t(oW||(oW=(0,d.Z)(["Warning"]))),content:(0,j.jsx)(import_WarningModalContent,{model:a}),submit:e,onSubmit:handleSubmit}}if(a.step===ZF.IMPORTING){const e=(0,j.jsx)(yr.Z,{disabled:!0,type:"submit",children:(0,u.c)("Action").t(sW||(sW=(0,d.Z)(["Continue"])))}),handleFinish=async e=>{s((t=>ImportModal_objectSpread(ImportModal_objectSpread({},t),{},{importedContacts:e,step:ZF.SUMMARY}))),await r()};return{content:(0,j.jsx)(import_ImportingModalContent,{model:a,setModel:s,onFinish:handleFinish}),submit:e,onSubmit:c.ZT}}if(a.step===ZF.SUMMARY){const e=a.importedContacts.some((({categories:e})=>e.some((e=>{var t;return null===(t=e.contactEmailIDs)||void 0===t?void 0:t.length}))))&&b.hasPaidMail,n=(0,j.jsx)(yr.Z,{type:"submit",loading:a.loading,children:e?(0,u.c)("Action").t(iW||(iW=(0,d.Z)(["Next"]))):(0,u.c)("Action").t(cW||(cW=(0,d.Z)(["Close"])))}),handleSubmit=async()=>{if(e){s((e=>ImportModal_objectSpread(ImportModal_objectSpread({},e),{},{loading:!0})));const e=await g();s((t=>ImportModal_objectSpread(ImportModal_objectSpread({},t),{},{step:ZF.IMPORT_GROUPS,loading:!1,contactGroups:e,categories:getImportCategoriesModel(t.importedContacts,e)})))}else{var n;null===(n=t.onClose)||void 0===n||n.call(t)}};return{content:(0,j.jsx)(import_ImportSummaryModalContent,{model:a}),submit:n,close:e?(0,u.c)("Action").t(lW||(lW=(0,d.Z)(["Close"]))):null,onSubmit:handleSubmit}}const y=a.categories.some((({error:e,action:t,targetName:n})=>!!e||t===TF.CREATE&&!n)),h=(0,j.jsx)(yr.Z,{type:"submit",disabled:y,loading:a.loading,children:(0,u.c)("Action").t(dW||(dW=(0,d.Z)(["Save"])))});return{title:(0,u.c)("Title").t(uW||(uW=(0,d.Z)(["Import groups"]))),content:(0,j.jsx)(import_ImportGroupsModalContent,{model:a,setModel:s}),submit:h,onSubmit:async()=>{var e;s((e=>ImportModal_objectSpread(ImportModal_objectSpread({},e),{},{loading:!0}))),await(async(e,t)=>{const n=(0,xe.uw)(e.filter((({action:e})=>e===TF.CREATE)),(({targetName:e})=>e)),r={},a=n.map((({targetName:e})=>async()=>{try{const{Label:{ID:n}}=await t((0,$a.R7)({Name:e,Color:M.dI[(0,c.lv)(0,M.dI.length-1)]}));r[e]=n}catch(e){(0,c.ZT)()}}));await processApiRequestsSafe(a,1e3,1e5);const o=[];return e.forEach((({action:e,targetGroup:n,targetName:a,contactEmailIDs:s,contactIDs:i})=>{if(e!==TF.IGNORE){if(e===TF.MERGE){const e=n.ID;return s.length&&o.push((()=>t((0,Lo.S3)({LabelID:e,ContactEmailIDs:s})).catch(c.ZT))),void(i.length&&o.push((()=>t((0,Lo.pp)({LabelID:e,ContactIDs:i})).catch(c.ZT))))}if(e===TF.CREATE){const e=r[a];e&&s.length&&o.push((()=>t((0,Lo.S3)({LabelID:e,ContactEmailIDs:s})).catch(c.ZT))),e&&i.length&&o.push((()=>t((0,Lo.pp)({LabelID:e,ContactIDs:i})).catch(c.ZT)))}}})),processApiRequestsSafe(o,1e3,1e5)})(a.categories,n),await r(),s((e=>ImportModal_objectSpread(ImportModal_objectSpread({},e),{},{loading:!1}))),null===(e=t.onClose)||void 0===e||e.call(t)}}})(),{content:I}=h,f=(0,Sn.Z)(h,mW);return(0,j.jsx)(On.Z,ImportModal_objectSpread(ImportModal_objectSpread(ImportModal_objectSpread({title:(0,u.c)("Title").t(pW||(pW=(0,d.Z)(["Import contacts"])))},f),t),{},{children:I}))};let wW;!function(e){e[e.All=0]="All",e[e.Search=1]="Search",e[e.AllGroups=2]="AllGroups"}(wW||(wW={}));var DW,SW,widget_ContactsWidgetPlaceholder=({type:e,onClearSearch:t,onCreate:n,onClose:r})=>{const{createModal:a}=(0,In.Z)();let o,s;switch(e){case wW.AllGroups:o=jc,s=(0,j.jsxs)("div",{className:"flex flex-column",children:[(0,j.jsx)("p",{className:"m0",children:(0,u.c)("Actions message").t(bW||(bW=(0,d.Z)(["You don't have any groups."])))}),(0,j.jsx)("p",{className:"m0",children:(0,j.jsx)(VM.Z,{onClick:n,children:(0,u.c)("Action").t(yW||(yW=(0,d.Z)(["Add group"])))},"add-contact")})]});break;case wW.Search:o=Xd,s=(0,j.jsxs)("div",{className:"flex flex-column",children:[(0,j.jsx)("p",{className:"m0",children:(0,u.c)("Actions message").t(hW||(hW=(0,d.Z)(["No results found."])))}),(0,j.jsx)("p",{className:"m0",children:(0,u.c)("Actions message").jt(IW||(IW=(0,d.Z)(["Please try another search term."])))}),(0,j.jsx)("p",{className:"m0",children:(0,j.jsx)(VM.Z,{onClick:t,children:(0,u.c)("Action").t(fW||(fW=(0,d.Z)(["Clear query"])))})})]});break;case wW.All:default:{o=jc;const e=(0,j.jsx)(VM.Z,{onClick:n,children:(0,u.c)("Action").t(MW||(MW=(0,d.Z)(["Add contact"])))},"add-contact"),t=(0,j.jsx)(VM.Z,{onClick:()=>{a((0,j.jsx)(import_ImportModal,{})),r&&r()},children:(0,u.c)("Action").t(NW||(NW=(0,d.Z)(["import"])))},"import");s=(0,j.jsxs)("div",{className:"flex flex-column",children:[(0,j.jsx)("p",{className:"m0",children:(0,u.c)("Actions message").t(xW||(xW=(0,d.Z)(["You don't have any contacts."])))}),(0,j.jsx)("p",{className:"m0",children:(0,u.c)("Actions message").jt(vW||(vW=(0,d.Z)([""," or ","."])),e,t)})]})}}return(0,j.jsx)("div",{className:"p2 text-center w100",children:(0,j.jsx)(QK.Z,{url:o,children:(0,j.jsx)("div",{className:"flex flex-align-items-center",children:s})})})};var OW,AW,CW,EW,LW,PW,ZW,widget_MergeContactBanner=({onMerge:e})=>{const t=(0,j.jsx)(VM.Z,{onClick:e,children:(0,u.c)("Action").t(DW||(DW=(0,d.Z)(["Merge"])))},"mergeAction");return(0,j.jsxs)("div",{className:"pl2 pr2 pt1 pb1 bg-weak flex flex-items-align-center flex-nowrap border-bottom",children:[(0,j.jsx)(pr.Z,{name:"merge",className:"mr0-5"}),(0,j.jsx)("span",{children:(0,u.c)("Info, no need for singular").jt(SW||(SW=(0,d.Z)(["Multiple contacts look identical. ",""])),t)})]})};var widget_ContactsWidgetContainer=({onClose:e,onCompose:t,onMailTo:n,customActions:r})=>{const[a,s]=(0,bn.ZP)(),[i,c]=(0,Dr.Z)(),[l,p]=(0,us.Fj)(),[m]=(0,us.Fj)(),{createModal:g}=(0,In.Z)(),{createNotification:b}=(0,hn.Z)(),y=(0,Dn.Z)(),[h,I]=(0,o.useState)(""),f=contacts_useContactList({search:h}),{formattedContacts:M,checkedIDs:N,contacts:x,contactGroupsMap:v,handleCheck:w,handleCheckOne:D,contactEmailsMap:S,selectedIDs:O,handleCheckAll:A,filteredContacts:C,hasCheckedAllFiltered:E,loading:L}=f,P=(0,o.useMemo)((()=>((e=[])=>{const t=Object.values(e.reduce(((e,{Name:t},n)=>{const r=(0,br.Fv)(t);return e[r]?e[r].push(n):e[r]=[n],e}),Object.create(null))).map(xe.Tw).filter((e=>e.length>1)),n=Object.values(e.reduce(((e,{emails:t},n)=>(t.map((e=>(0,br.Fv)(e))).forEach((t=>{e[t]?e[t].push(n):e[t]=[n]})),e)),Object.create(null))).map(xe.Tw).filter((e=>e.length>1));return linkConnections([...t,...n]).map((t=>t.map((t=>e[t]))))})(M)),[M]),Z=P.reduce(((e,t)=>e+t.length),0),T=O.filter((e=>{var t;return!(null!==(t=S[e])&&void 0!==t&&t.length)})),handleCreate=()=>{g((0,j.jsx)(modals_ContactModal,{})),e()},handleMerge=e=>{const t=M.filter((e=>O.includes(e.ID))),n=e?P:[t];g((0,j.jsx)(merge_MergeModal,{contacts:n,userKeysList:l,onMerged:()=>A(!1)}))},k=M.length,z=x?x.length:0,_=L||s||c||p,R=!_&&!k,G=!_&&!R;return(0,j.jsxs)("div",{className:"flex flex-column flex-nowrap h100",children:[(0,j.jsxs)("div",{className:"contacts-widget-search-container flex-item-noshrink",children:[(0,j.jsx)("label",{htmlFor:"id_contact-widget-search",className:"sr-only",children:(0,u.c)("Placeholder").t(LW||(LW=(0,d.Z)(["Search for name or email"])))}),(0,j.jsx)(Ir,{autoFocus:!0,value:h,onChange:I,id:"id_contact-widget-search",placeholder:(0,u.c)("Placeholder").t(PW||(PW=(0,d.Z)(["Search for name or email"])))}),(0,j.jsx)("span",{className:"sr-only","aria-atomic":!0,"aria-live":"assertive",children:(0,u.c)("Info").ngettext((0,u.msgid)(ZW||(ZW=(0,d.Z)([""," contact found"])),k),"".concat(k," contacts found"),k)})]}),(0,j.jsx)("div",{className:"contacts-widget-toolbar pt1 pb1 border-bottom flex-item-noshrink",children:(0,j.jsx)(widget_ContactsWidgetToolbar,{allChecked:E,selected:O,noEmailsContactCount:T.length,onCheckAll:A,onCompose:t?()=>{if(O.length>100)return void b({type:"error",text:(0,u.c)("Error").t(OW||(OW=(0,d.Z)(["You can't send a mail to more than 100 recipients"])))});const n=O.filter((e=>{var t;return null===(t=S[e])||void 0===t?void 0:t.length}));if(T.length){const e=T.map((e=>{var t;return null===(t=x.find((t=>t.ID===e)))||void 0===t?void 0:t.Name})),t=e.length,n=e.join(", "),r=(0,u.c)("Error").ngettext((0,u.msgid)(AW||(AW=(0,d.Z)(["One of the contacts has no email address: ",""])),n),"Some contacts have no email addresses: ".concat(n," "),t);b({type:"warning",text:r})}const r=n.map((e=>S[e])).map((e=>{const t=e[0];return{Name:t.Name,Address:t.Email}}));null==t||t(r,[]),e()}:void 0,customActions:r,contactList:f,onForward:async()=>{if(O.length>100)b({type:"error",text:(0,u.c)("Error").t(CW||(CW=(0,d.Z)(["You can't send vCards of more than 10 contacts"])))});else{try{const e=(await((e,t,n)=>Promise.all(e.map((async e=>{const{Contact:{Cards:r}}=await n((0,Lo.vS)(e)),{properties:a,vcard:o}=await exportContact(r,t);return{name:getFileName(a),vcard:o}}))))(O,m,y)).map((({name:e,vcard:t})=>new File([t],e,{type:"text/plain;charset=utf-8"})));null==t||t([],e)}catch(e){b({type:"error",text:(0,u.c)("Error").t(EW||(EW=(0,d.Z)(["There was an error when exporting the contacts vCards"])))})}e()}},onCreate:handleCreate,onDelete:()=>{const t=O.length===x.length;g((0,j.jsx)(ContactDeleteModal,{contactIDs:O,deleteAll:t,onDelete:()=>{O.length===C.length&&I(""),A(!1)}})),e()},onMerge:()=>handleMerge(!1),onClose:e})}),G&&Z?(0,j.jsx)(widget_MergeContactBanner,{onMerge:()=>handleMerge(!0)}):null,(0,j.jsxs)("div",{className:"flex-item-fluid w100",children:[_?(0,j.jsx)("div",{className:"flex h100",children:(0,j.jsx)(wI.Z,{className:"mauto color-primary"})}):null,R?(0,j.jsx)(widget_ContactsWidgetPlaceholder,{type:z?wW.Search:wW.All,onClearSearch:()=>{setTimeout((()=>I("")))},onCreate:handleCreate,onClose:e}):null,G?(0,j.jsx)(contacts_ContactsList,{contacts:M,contactGroupsMap:v,user:a,userSettings:i,onCheckOne:D,isDesktop:!1,checkedIDs:N,onCheck:w,onClick:t=>{g((0,j.jsx)(modals_ContactDetailsModal,{contactID:t,onMailTo:n})),e()},activateDrag:!1}):null]})]})};var TW,kW,zW,_W,RW,GW,YW,UW,FW,KW;var BW,WW,widget_ContactsWidgetGroupsToolbar=({allChecked:e,selected:t,numberOfRecipients:n,onCheckAll:r,onCompose:a,onCreate:o,onDelete:s,customActions:i,groupsEmailsMap:c,recipients:l,onClose:p})=>{const m=t.length,g=!m||!n,b=!m,y=b?(0,u.c)("Action").t(TW||(TW=(0,d.Z)(["Delete contact group"]))):(0,u.c)("Action").ngettext((0,u.msgid)(kW||(kW=(0,d.Z)(["Delete "," contact group"])),m),"Delete ".concat(m," contact groups"),m);return(0,j.jsxs)("div",{className:"flex flex-items-align-center",children:[(0,j.jsx)(ur.Z,{title:e?(0,u.c)("Action").t(zW||(zW=(0,d.Z)(["Deselect all"]))):(0,u.c)("Action").t(_W||(_W=(0,d.Z)(["Select all"]))),children:(0,j.jsxs)("span",{className:"mr1 flex",children:[(0,j.jsx)(Nr,{id:"id_contact-widget-select-all",className:"ml0-5",checked:e,onChange:({target:e})=>r(e.checked),"data-testid":"contacts:select-all-contact-group"}),(0,j.jsx)("label",{htmlFor:"id_contact-widget-select-all",className:"sr-only",children:e?(0,u.c)("Action").t(RW||(RW=(0,d.Z)(["Deselect all"]))):(0,u.c)("Action").t(GW||(GW=(0,d.Z)(["Select all"])))})]})}),a?(0,j.jsx)(ur.Z,{title:(0,u.c)("Action").t(YW||(YW=(0,d.Z)(["Compose"]))),children:(0,j.jsx)(Ea.Z,{icon:!0,className:"inline-flex mr0-5 pt0-5 pb0-5",onClick:a,disabled:g,"data-testid":"contacts:compose-contact-group",children:(0,j.jsx)(pr.Z,{name:"envelope",alt:(0,u.c)("Action").t(UW||(UW=(0,d.Z)(["Compose"])))})})}):null,i.map((e=>e.render({groupsEmailsMap:c,recipients:l,noSelection:b,onClose:p,selected:t}))),(0,j.jsx)(ur.Z,{children:(0,j.jsx)(Ea.Z,{icon:!0,className:"inline-flex pt0-5 pb0-5",onClick:s,disabled:b,title:y,"data-testid":"contacts:delete-contact-group",children:(0,j.jsx)(pr.Z,{name:"trash"})})}),(0,j.jsx)(ur.Z,{title:(0,u.c)("Action").t(FW||(FW=(0,d.Z)(["Add new group"]))),children:(0,j.jsx)(Ea.Z,{icon:!0,color:"norm",className:"mlauto inline-flex pt0-5 pb0-5",onClick:o,"data-testid":"contacts:add-contact-group",children:(0,j.jsx)(pr.Z,{name:"user-group-plus",alt:(0,u.c)("Action").t(KW||(KW=(0,d.Z)(["Add new group"])))})})})]})};var contacts_ContactGroupRow=({checked:e,style:t,groupsEmailsMap:n,group:r,onClick:a,onCheck:s,index:i,onFocus:c})=>{var l;const{ID:p,Name:m,Color:g}=r,[b,y]=(0,o.useState)(!1),h=(null===(l=n[p])||void 0===l?void 0:l.length)||0;return(0,j.jsx)("div",{style:t,onClick:()=>a(p),className:(0,ht.dh)(["item-container item-contact flex cursor-pointer bg-global-white",b&&"item-is-focused"]),onFocus:()=>{y(!0),c(i)},onBlur:()=>{y(!1)},tabIndex:-1,"data-element-id":r.ID,"data-shortcut-target":"contact-container",children:(0,j.jsxs)("div",{className:"flex flex-nowrap w100 h100 mtauto mbauto flex-align-items-center",children:[(0,j.jsx)(items_ItemCheckbox,{ID:p,name:m,checked:e,onChange:s,normalClassName:"flex-item-noshrink",compactClassName:"flex-item-noshrink"}),(0,j.jsx)("span",{className:"max-w100 flex pl1 pr1",children:(0,j.jsx)("span",{role:"heading","aria-level":2,className:"inline-block pl1 pr1 pt0-25 pb0-25 rounded1e color-white text-ellipsis",style:{backgroundColor:g},children:m})}),(0,j.jsx)("span",{className:"flex-item-noshrink",children:0===h?(0,u.c)("Info").t(BW||(BW=(0,d.Z)(["No email address"]))):(0,u.c)("Info").ngettext((0,u.msgid)(WW||(WW=(0,d.Z)([""," email address"])),h),"".concat(h," email addresses"),h)})]})},p)};var VW,QW,HW,XW,JW,contacts_ContactsGroupsList=({groups:e,groupsEmailsMap:t,onCheckOne:n,userSettings:r,isDesktop:a=!0,checkedIDs:s,onClick:i})=>{const c=(0,o.useRef)(null),l=(0,o.useRef)(null),d=r.Density===M.pw.COMPACT,u=4*vo.Ts,p=3*vo.Ts,m=(0,o.useMemo)((()=>e.map((e=>e.ID))),[e]),{focusIndex:g,getFocusedId:b,setFocusIndex:y,handleFocus:h}=useContactFocus({elementIDs:m,listRef:l}),I=useContactHotkeys({elementIDs:m,focusIndex:g},{getFocusedId:b,setFocusIndex:y,handleElement:e=>i(e)});return(0,j.jsx)("div",{ref:I,className:(0,ht.dh)([a?"items-column-list":"items-column-list--mobile",d&&"list-compact"]),children:(0,j.jsx)("div",{ref:l,className:"items-column-list-inner items-column-list-inner--no-border",children:(0,j.jsx)(Sr.qj,{children:({height:r,width:a})=>(0,j.jsx)(Sr.aV,{className:"contacts-list no-outline",ref:c,rowRenderer:({index:r,style:a,key:o})=>(0,j.jsx)(contacts_ContactGroupRow,{style:a,checked:s.includes(e[r].ID),groupsEmailsMap:t,group:e[r],onClick:i,onCheck:t=>n(t,e[r].ID),index:r,onFocus:h},o),rowCount:e.length,height:r,width:a-1,rowHeight:d?p:u,tabIndex:-1})})})})};var qW,widget_ContactsWidgetGroupsContainer=({onClose:e,onCompose:t,customActions:n})=>{const[r,a]=(0,Dr.Z)(),{createModal:s}=(0,In.Z)(),{createNotification:i}=(0,hn.Z)(),[c]=(0,bn.ZP)(),[l,p]=(0,o.useState)(""),[m=[],g]=useContactGroups(),b=(y=m,[...y].sort(((e,t)=>e.Name.localeCompare(t.Name))));var y;const[h=[],I]=wr(),f=(0,br.Fv)(l),M=(0,o.useMemo)((()=>b.filter((({Name:e})=>(0,br.Fv)(e).includes(f)))),[b,f]),N=M.map((e=>e.ID)),{checkedIDs:x,selectedIDs:v,handleCheckAll:w,handleCheckOne:D}=items_useItemsSelection(void 0,N,[]),S=x.length>0&&x.length===M.length,O=(0,o.useMemo)((()=>h.reduce(((e,t)=>(t.LabelIDs.forEach((n=>{e[n]||(e[n]=[]),e[n].push(t)})),e)),{})),[m,h]),A=v.map((e=>{const t=m.find((t=>t.ID===e));return O[e]?O[e].map((e=>({Name:e.Name,Address:e.Email,Group:null==t?void 0:t.Path}))):[]})).flat(),handleCreate=()=>{if(!c.hasPaidMail)return s((0,j.jsx)(ContactUpgradeModal,{})),void e();s((0,j.jsx)(modals_ContactGroupModal,{})),e()},C=M.length,E=g||I||a,L=!E&&!C,P=!L;return(0,j.jsxs)("div",{className:"flex flex-column flex-nowrap h100",children:[(0,j.jsxs)("div",{className:"contacts-widget-search-container flex-item-noshrink",children:[(0,j.jsx)("label",{htmlFor:"id_contact-widget-search",className:"sr-only",children:(0,u.c)("Placeholder").t(HW||(HW=(0,d.Z)(["Search for group name"])))}),(0,j.jsx)(Ir,{autoFocus:!0,value:l,onChange:p,id:"id_contact-widget-group-search",placeholder:(0,u.c)("Placeholder").t(XW||(XW=(0,d.Z)(["Search for group name"])))}),(0,j.jsx)("span",{className:"sr-only","aria-atomic":!0,"aria-live":"assertive",children:(0,u.c)("Info").ngettext((0,u.msgid)(JW||(JW=(0,d.Z)([""," group found"])),C),"".concat(C," groups found"),C)})]}),(0,j.jsx)("div",{className:"contacts-widget-toolbar pt1 pb1 border-bottom flex-item-noshrink",children:(0,j.jsx)(widget_ContactsWidgetGroupsToolbar,{allChecked:S,selected:v,numberOfRecipients:A.length,onCheckAll:w,onCompose:t?()=>{if(A.length>100)return void i({type:"error",text:(0,u.c)("Error").t(VW||(VW=(0,d.Z)(["You can't send a mail to more than 100 recipients"])))});const n=v.filter((e=>{var t;return!(null!==(t=O[e])&&void 0!==t&&t.length)}));if(n.length){const e=n.map((e=>{var t;return null===(t=m.find((t=>t.ID===e)))||void 0===t?void 0:t.Name})),t=e.length,r=e.join(", "),a=(0,u.c)("Error").ngettext((0,u.msgid)(QW||(QW=(0,d.Z)(["One of the groups has no contacts: ",""])),r),"Some groups have no contacts: ".concat(r," "),t);i({type:"warning",text:a})}null==t||t(A,[]),e()}:void 0,groupsEmailsMap:O,recipients:A,onClose:e,customActions:n,onCreate:handleCreate,onDelete:()=>{s((0,j.jsx)(modals_ContactGroupDeleteModal,{groupIDs:v,onDelete:()=>{v.length===M.length&&p(""),w(!1)}})),e()}})}),(0,j.jsxs)("div",{className:"flex-item-fluid w100",children:[E?(0,j.jsx)("div",{className:"flex h100",children:(0,j.jsx)(wI.Z,{className:"mauto color-primary"})}):null,L?(0,j.jsx)(widget_ContactsWidgetPlaceholder,{type:m.length?wW.Search:wW.AllGroups,onClearSearch:()=>{setTimeout((()=>p("")))},onCreate:handleCreate}):null,P?(0,j.jsx)(contacts_ContactsGroupsList,{groups:M,groupsEmailsMap:O,userSettings:r,onCheckOne:D,isDesktop:!1,checkedIDs:x,onClick:t=>{s((0,j.jsx)(modals_ContactGroupDetailsModal,{contactGroupID:t})),e()}}):null]})]})};var general_AutoSaveContactsToggle=({autoSaveContacts:e,id:t,className:n})=>{const r=(0,Dn.Z)(),[a,o]=(0,no.Z)(),{createNotification:s}=(0,hn.Z)(),{call:i}=(0,Ie.Z)();return(0,j.jsx)(cm,{id:t,className:n,loading:a,checked:e,onChange:e=>o((async e=>{await r((0,Fg.Yu)(+e.target.checked)),await i(),s({text:(0,u.c)("Success").t(qW||(qW=(0,d.Z)(["Preference saved"])))})})(e))})};const $W=["contactGroupID","userKeysList","onSave"];var eV,tV,nV,rV,aV,oV;function ExportContactsModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ExportContactsModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ExportContactsModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ExportContactsModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const ExportFooter=({loading:e})=>(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Ea.Z,{type:"reset",children:(0,u.c)("Action").t(eV||(eV=(0,d.Z)(["Cancel"])))}),(0,j.jsx)(yr.Z,{loading:e,type:"submit",children:(0,u.c)("Action").t(tV||(tV=(0,d.Z)(["Save"])))})]});var sV,iV,cV,lV,modals_ExportContactsModal=e=>{let{contactGroupID:t,userKeysList:n,onSave:r=c.ZT}=e,a=(0,Sn.Z)(e,$W);const s=(0,Dn.Z)(),[i=[],l]=Wl(),[p,m]=(0,o.useState)([]),[g,b]=(0,o.useState)([]),y=t?i.filter((({LabelIDs:e=[]})=>e.includes(t))).length:i.length;(0,o.useEffect)((()=>{if(l)return;const e=new AbortController;return(async(e,t,n,r,a,o,s)=>{const apiWithAbort=e=>a(export_objectSpread(export_objectSpread({},e),{},{signal:r})),i=Math.ceil(t/50),c={success:[],failures:[]};for(let t=0;t<i;t++){const{Contacts:a}=await apiWithAbort((0,Lo.fH)({LabelID:e,Page:t,PageSize:50}));for(const{Cards:e,ID:t}of a){if(r.aborted)return;try{const{vcard:t}=await exportContact(e,n);r.aborted||o(t),c.success.push(t)}catch(e){r.aborted||s(t),c.failures.push(t)}}await(0,Wt.D)(100)}return c})(t,y,n,e.signal,s,(e=>m((t=>[...t,e]))),(e=>b((t=>[...t,e])))).catch((e=>{var t;if("AbortError"!==e.name)throw null===(t=a.onClose)||void 0===t||t.call(a),e})),()=>{e.abort()}}),[l]);const h=g.length!==y,I=l||p.length+g.length!==y,f=I||h?(0,u.c)("Progress bar description").t(nV||(nV=(0,d.Z)([""," out of "," contacts successfully exported."])),p.length,y):(0,u.c)("Progress bar description").t(rV||(rV=(0,d.Z)(["No contacts exported."])));return(0,j.jsxs)(On.Z,ExportContactsModal_objectSpread(ExportContactsModal_objectSpread({title:(0,u.c)("Title").t(aV||(aV=(0,d.Z)(["Exporting contacts"]))),onSubmit:()=>(e=>{var t;const n=e.join("\n"),o=new Blob([n],{type:"text/plain;charset=utf-8"});helpers_downloadFile(o,"".concat("protonContacts","-").concat((0,Et.Z)(Date.now(),"yyyy-MM-dd"),".vcf")),r(),null===(t=a.onClose)||void 0===t||t.call(a)})(p),footer:ExportFooter({loading:I}),loading:l},a),{},{children:[(0,j.jsx)(Cn.Z,{className:"mb1",children:(0,u.c)("Description").t(oV||(oV=(0,d.Z)(["Decrypting contacts... This may take a few minutes. When the process is completed, you will be able to download the file with all your contacts exported."])))}),(0,j.jsx)(progress_DynamicProgress,{id:"progress-export-contacts",loading:I,value:p.length+g.length,max:y,success:h,display:l?"":f})]}))};const ExportButton=({onClick:e,hasNoContacts:t})=>{const[n,r]=(0,us.Fj)(),{createModal:a}=(0,In.Z)();return(0,j.jsx)(yr.Z,{disabled:r||t,id:"export-contacts-button",onClick:()=>{a((0,j.jsx)(modals_ExportContactsModal,{userKeysList:n})),void 0!==e&&e()},children:(0,u.c)("Action").t(sV||(sV=(0,d.Z)(["Export contacts"])))})};var dV,widget_ContactsWidgetSettingsContainerExport=({onExportButtonClick:e})=>{const[t]=Wl(),n=!(null!=t&&t.length);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(gr.Z,{htmlFor:"export-contacts-button",className:"text-semibold",children:(0,j.jsx)("span",{role:"heading","aria-level":2,children:(0,u.c)("Label").t(iV||(iV=(0,d.Z)(["Export contacts"])))})}),(0,j.jsx)("p",{className:"color-weak mt0-5 mb1",children:(0,u.c)("Info").t(cV||(cV=(0,d.Z)(["The application needs to locally decrypt your contacts before they can be exported. At the end of the process, a VCF file will be generated and you will be able to download it."])))}),n?(0,j.jsx)(ur.Z,{title:(0,u.c)("Tooltip").t(lV||(lV=(0,d.Z)(["You do not have any contacts to export"]))),children:(0,j.jsx)("span",{className:"inline-block",children:(0,j.jsx)(ExportButton,{onClick:e,hasNoContacts:n})})}):(0,j.jsx)(ExportButton,{onClick:e,hasNoContacts:n})]})},uV=n(10067),pV=n(19190);const mV=["className"];function GoogleButton_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function GoogleButton_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?GoogleButton_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GoogleButton_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gV,jV,easySwitch_GoogleButton=e=>{let{className:t}=e,n=(0,Sn.Z)(e,mV);return(0,j.jsxs)(Ea.Z,GoogleButton_objectSpread(GoogleButton_objectSpread({className:(0,ht.dh)(["inline-flex flex-justify-center",t])},n),{},{children:[(0,j.jsx)("img",{src:pV,alt:"Google logo",className:"mr0-5 flex-align-self-center"}),(0,u.c)("Action").t(dV||(dV=(0,d.Z)(["Continue with Google"])))]}))},bV=n(30250);function calendarKeys_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const generateCalendarKey=async({passphrase:e,encryptionConfig:t})=>{const{key:n,privateKeyArmored:r}=await(0,ku.HI)(function calendarKeys_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?calendarKeys_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):calendarKeys_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({userIds:[{name:"Calendar key"}],passphrase:e},t));return await n.decrypt(e),{privateKey:n,privateKeyArmored:r}},encryptPassphrase=async({passphrase:e,privateKey:t,memberPublicKeys:n})=>{const r=Object.entries(n),{data:a,signature:o}=await(0,Ft.Z)({message:await(0,Rt.tn)(e),publicKeys:r.map((([,e])=>e)),privateKeys:[t],detached:!0}),s=await(0,Rt.FC)(a),{asymmetric:i,encrypted:c}=await(0,Rt.Pe)(s);return{keyPackets:r.reduce(((e,[t],n)=>(e[t]=(0,bI.oG)(i[n]),e)),Object.create(null)),dataPacket:(0,bI.oG)(c[0]),signature:o}},decryptPassphrase=async({armoredPassphrase:e,armoredSignature:t,privateKeys:n,publicKeys:r})=>{const{data:a,verified:o}=await(0,_t.WB)({message:await(0,Rt.FC)(e),signature:await(0,Rt.o$)(t),privateKeys:n,publicKeys:r});if(o!==Yt.bR.SIGNED_AND_VALID){const e=new Error((0,u.c)("Error").t(gV||(gV=(0,d.Z)(["Signature verification failed"]))));throw e.name="SignatureError",e}return a},getAddressesMembersMap=(e,t)=>e.reduce(((e,n)=>{const r=t.find((({Email:e})=>e===n.Email));return r?(e[n.ID]=r,e):e}),{}),getDecryptedCalendarKeys=async(e,t={})=>Promise.all(e.map((async e=>{try{const{PrivateKey:n,PassphraseID:r}=e,a=t[r]||"",o=await(0,Kt.p)(n,a);return{Key:e,privateKey:o,publicKey:o.toPublic()}}catch(e){return}}))).then((e=>e.filter(Za.Z))),getKeysMemberMap=(e=[],t={})=>Object.keys(t).reduce(((n,r)=>{const{ID:a}=e.find((({Email:e})=>(0,br.Fv)(e)===(0,br.Fv)(r)))||{};if(!a)throw new Error((0,u.c)("Error").t(jV||(jV=(0,d.Z)(["Could not find address ","."])),r));return n[a]=t[r],n}),{}),generateCalendarKeyPayload=async({addressID:e,privateKey:t,memberPublicKeys:n})=>{const r=(()=>{const e=NC()(new Uint8Array(32));return(0,bI.oG)(e)})(),a=M._V[M.qQ.CURVE25519],[{privateKeyArmored:o},{dataPacket:s,keyPackets:i,signature:c}]=await Promise.all([generateCalendarKey({passphrase:r,encryptionConfig:a}),encryptPassphrase({passphrase:r,privateKey:t,memberPublicKeys:n})]);return{AddressID:e,Signature:c,PrivateKey:o,Passphrase:{DataPacket:s,KeyPackets:i}}};var yV;const setupCalendarKey=async({calendarID:e,api:t,addresses:n,getAddressKeys:r})=>{const{Members:a=[]}=await t((0,cL.Fo)(e)),{Member:o,Address:s}=((e,t)=>{const n=e.find((({Email:e,Permissions:n})=>(0,N.jl)(n,Er.ADMIN)&&t.find((({Email:t})=>e===t))));if(!n)throw new Error("Member with admin permission not found");const r=t.find((({Email:e})=>n.Email===e));if(!r)throw new Error("Address for member not found");return{Member:n,Address:r}})(a,n),{privateKey:i,publicKey:c}=(0,bV.x)(await r(s.ID))||{};if(!i||!c)throw new Error((0,u.c)("Error").t(yV||(yV=(0,d.Z)(["Primary address key is not decrypted"]))));const l=await generateCalendarKeyPayload({addressID:s.ID,privateKey:i,memberPublicKeys:getKeysMemberMap(a,{[o.Email]:c})});return t((0,cL.OV)(e,l))};var hV=n(45941),IV=n(23076),fV=n(7935),MV=n(22642);const getDoesCalendarNeedUserAction=({Flags:e})=>(0,N.jl)(e,Pr.RESET_NEEDED)||(0,N.jl)(e,Pr.UPDATE_PASSPHRASE),getIsCalendarDisabled=({Flags:e}={Flags:0})=>(0,N.jl)(e,Pr.SELF_DISABLED)||(0,N.jl)(e,Pr.SUPER_OWNER_DISABLED),getIsCalendarProbablyActive=(e={Flags:0})=>void 0===e.Flags||!getIsCalendarDisabled(e)&&(({Flags:e}={Flags:0})=>(0,N.jl)(e,Pr.ACTIVE))(e),getProbablyActiveCalendars=(e=[])=>e.filter((0,c.Qm)(getIsCalendarProbablyActive)),getDefaultCalendar=(e=[],t="")=>{const n=((e=[])=>e.filter((0,c.Qm)(getIsPersonalCalendar)))(e);if(n.length)return n.find((({ID:e})=>e===t))||n[0]};Sa.WEEK;var NV=n(27435),xV=n(33538);function folder_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function folder_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?folder_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):folder_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const buildTreeview=(e=[])=>{const t=((e=[])=>e.reduce(((e,t)=>{const{ParentID:n=M.Ev}=t;return e[n]=e[n]||[],e[n].push(t),e}),{}))(e),build=(e=M.Ev)=>Array.isArray(t[e])?((e=[])=>(0,xe.Xo)(e,"Order"))(t[e]).map((e=>folder_objectSpread(folder_objectSpread({},e),{},{subfolders:build(e.ID)}))):[];return build()},formatFolderName=(e=0,t="",n=" ")=>"".concat((0,xe.w6)(0,e).map((()=>n)).join("")).concat(t);var vV;var wV,DV,SV,OV,AV,CV,EV,LV,PV,ZV,TV,labels_ParentFolderSelector=({id:e,value:t,onChange:n,className:r,disableOptions:a=[]})=>{const[o,s]=useFolders();if(s)return(0,j.jsx)(Yu.Z,{});const reducer=(e=[],t,n=0)=>(e.push((({Name:e,ID:t},n=0)=>({disabled:a.includes(t),value:t,text:formatFolderName(n,e," ∙ ")}))(t,n)),Array.isArray(t.subfolders)&&t.subfolders.forEach((t=>reducer(e,t,n+1))),e),i=buildTreeview(o).reduce(((e,t)=>reducer(e,t)),[{value:M.Ev,text:(0,u.c)("Option").t(vV||(vV=(0,d.Z)(["No parent folder"])))}]);return(0,j.jsx)(Ec.Z,{id:e,className:r,value:t,options:i,onChange:({target:e})=>null==n?void 0:n((e=>e==="".concat(M.Ev)?M.Ev:e)(e.value))})};var kV,zV,_V,RV,GV,YV,UV,FV=function NewLabelForm({label:e,onChangeColor:t,onChangeName:n,onChangeParentID:r,onChangeNotify:a}){const[o]=useMailSettings();return(0,j.jsxs)("div",{className:"center flex-item-fluid",children:[e.ID||e.Type!==M.L7.MESSAGE_FOLDER?null:(0,j.jsx)(Cn.Z,{className:"mb1",children:(0,u.c)("Info").t(EV||(EV=(0,d.Z)(["Name your new folder and select the parent folder you want to put it in. If you do not select a parent folder, this new folder will be created as a top level folder."])))}),(0,j.jsxs)(bo.Z,{children:[(0,j.jsx)(gr.Z,{htmlFor:"accountName",children:e.Type===M.L7.MESSAGE_FOLDER?(0,u.c)("New Label form").t(LV||(LV=(0,d.Z)(["Folder name"]))):(0,u.c)("New Label form").t(PV||(PV=(0,d.Z)(["Label name"])))}),(0,j.jsx)(yo.Z,{children:(0,j.jsx)(jr.Z,{id:"accountName",value:e.Name,onChange:n,placeholder:e.Type===M.L7.MESSAGE_FOLDER?(0,u.c)("New Label form").t(ZV||(ZV=(0,d.Z)(["Folder name"]))):(0,u.c)("New Label form").t(TV||(TV=(0,d.Z)(["Label name"]))),required:!0,"data-test-id":"label/folder-modal:name",autoFocus:!0})})]}),e.Type===M.L7.MESSAGE_LABEL&&(()=>{const n=e;return(0,j.jsxs)(bo.Z,{children:[(0,j.jsxs)(gr.Z,{htmlFor:"accountType",children:[(0,u.c)("New Label form").t(wV||(wV=(0,d.Z)(["Color"])))," "]}),(0,j.jsx)(yo.Z,{children:(0,j.jsx)(input_ColorPicker,{color:n.Color,onChange:t})})]})})(),e.Type===M.L7.MESSAGE_FOLDER&&(()=>{const n=e;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)(bo.Z,{children:[(0,j.jsx)(gr.Z,{htmlFor:"parentID",children:(0,u.c)("Label").t(DV||(DV=(0,d.Z)(["Folder location"])))}),(0,j.jsx)(yo.Z,{children:(0,j.jsx)(labels_ParentFolderSelector,{id:"parentID",value:n.ParentID||0,onChange:r,disableOptions:[n.ID]})})]}),null!=o&&o.EnableFolderColor?(0,j.jsxs)(bo.Z,{children:[(0,j.jsxs)(gr.Z,{htmlFor:"accountType",children:[(0,u.c)("New Label form").t(SV||(SV=(0,d.Z)(["Color"])))," "]}),(0,j.jsx)(yo.Z,{children:null!=o&&o.InheritParentFolderColor&&n.ParentID?(0,j.jsx)("div",{className:"mt0-5",children:(0,u.c)("Info").t(OV||(OV=(0,d.Z)(["Inherited from parent folder"])))}):(0,j.jsx)(input_ColorPicker,{color:n.Color,onChange:t})})]}):null,(0,j.jsxs)(bo.Z,{children:[(0,j.jsxs)(gr.Z,{htmlFor:"notification",children:[(0,j.jsx)("span",{className:"mr0-5",children:(0,u.c)("Label").t(AV||(AV=(0,d.Z)(["Notification"])))}),(0,j.jsx)(fc.Z,{title:(0,u.c)("Info").t(CV||(CV=(0,d.Z)(["You can turn on notifications to get alerts when new email messages arrive in this folder."])))})]}),(0,j.jsx)(yo.Z,{className:"pt0-5",children:(0,j.jsx)(cm,{id:"notification",checked:1===n.Notify,onChange:({target:e})=>null==a?void 0:a(+e.checked)})})]})]})})()]})};const KV=["label","mode","onAdd","onEdit","onCheckAvailable","onClose","type"];function EditLabelModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function EditLabelModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?EditLabelModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EditLabelModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const prepareLabel=e=>e.ParentID===M.Ev?(0,Ne.CE)(e,["ParentID"]):e;var modals_EditLabelModal=e=>{let{label:t,mode:n="create",onAdd:r=c.ZT,onEdit:a=c.ZT,onCheckAvailable:s=c.ZT,onClose:i=c.ZT,type:l="label"}=e,p=(0,Sn.Z)(e,KV);const{call:m}=(0,Ie.Z)(),{createNotification:g}=(0,hn.Z)(),b=(0,Dn.Z)(),[y,h]=(0,no.Z)(),[I,f]=(0,o.useState)(t||{Name:"",Color:M.dI[(0,c.lv)(0,M.dI.length-1)],Type:"folder"===l?M.L7.MESSAGE_FOLDER:M.L7.MESSAGE_LABEL,ParentID:"folder"===l?M.Ev:void 0,Notify:"folder"===l?1:0});return(0,j.jsx)(On.Z,EditLabelModal_objectSpread(EditLabelModal_objectSpread({submit:(0,u.c)("Action").t(UV||(UV=(0,d.Z)(["Save"]))),onSubmit:async()=>{switch(n){case"create":return void await h((async e=>{const{Label:t}=await b((0,$a.Ue)(prepareLabel(e)));await m(),g({text:(0,u.c)("label/folder notification").t(kV||(kV=(0,d.Z)([""," created"])),t.Name)}),r(t),i()})(I));case"edition":return void await h((async e=>{if(e.ID){const{Label:t}=await b((0,$a.rK)(e.ID,prepareLabel(e)));await m(),g({text:(0,u.c)("Filter notification").t(zV||(zV=(0,d.Z)([""," updated"])),t.Name)}),a(t)}i()})(I));case"checkAvailable":return void await h((async e=>{await b((0,$a.dQ)(e)),s(I),i()})(I));default:return}},loading:y,title:(()=>{const e=I.Type===M.L7.MESSAGE_FOLDER;return"create"===n?e?(0,u.c)("Label/folder modal").t(_V||(_V=(0,d.Z)(["Create folder"]))):(0,u.c)("Label/folder modal").t(RV||(RV=(0,d.Z)(["Create label"]))):e?(0,u.c)("Label/folder modal").t(GV||(GV=(0,d.Z)(["Edit folder"]))):(0,u.c)("Label/folder modal").t(YV||(YV=(0,d.Z)(["Edit label"])))})(),onClose:i},p),{},{children:(0,j.jsx)(FV,{label:I,onChangeName:({target:e})=>{f(EditLabelModal_objectSpread(EditLabelModal_objectSpread({},I),{},{Name:e.value}))},onChangeColor:e=>{f(EditLabelModal_objectSpread(EditLabelModal_objectSpread({},I),{},{Color:e}))},onChangeParentID:e=>{f(EditLabelModal_objectSpread(EditLabelModal_objectSpread({},I),{},{ParentID:e}))},onChangeNotify:e=>{f(EditLabelModal_objectSpread(EditLabelModal_objectSpread({},I),{},{Notify:e}))}})}))};const BV="##**".concat(Date.now(),"**##"),splitEscaped=(e="",t="/")=>"/"!==t?e.split(t):e.split("\\/").join(BV).split("/").map((e=>e.split(BV).join("\\/"))),escapeSlashes=(e="")=>splitEscaped(e).join("\\/"),unescapeSlashes=(e="")=>e.split("\\/").join("/"),getRandomLabelColor=()=>M.dI[(0,c.lv)(0,M.dI.length-1)],nameAlreadyExists=(e,t)=>t.map((e=>e.Path)).some((t=>t.toLowerCase()===e.toLowerCase())),getLevel=(e,t,n)=>{const r=splitEscaped(e,t);let a=0;for(;r.length;)r.pop(),n.find((e=>e.Source===r.join(t)))&&(a+=1);return a},getFolderRelationshipsMap=e=>e.reduce(((t,n)=>{const r=getLevel(n.Source,n.Separator,e);return t[n.Source]=e.filter((t=>{const a=getLevel(t.Source,t.Separator,e);return r+1===a&&(t.Source.split(t.Separator).slice(0,-1).join(t.Separator)===n.Source||t.Source.startsWith(n.Source))})).map((e=>e.Source)),t}),{});var WV,VV,QV,HV,XV,JV,qV,$V,eQ,tQ,nQ,rQ;const aQ=Object.values(uV.yF),oQ={[uV.yF.INBOX]:"inbox",[uV.yF.ALL_DRAFTS]:"file-lines",[uV.yF.ALL_SENT]:"paper-plane",[uV.yF.TRASH]:"trash",[uV.yF.SPAM]:"spam",[uV.yF.ARCHIVE]:"box-archive",[uV.yF.SENT]:"paper-plane",[uV.yF.DRAFTS]:"file-lines",[uV.yF.STARRED]:"star",[uV.yF.ALL_MAIL]:"envelopes"},sQ="opacity-30",RowWrapperComponent=({isLabel:e,children:t,checkboxId:n,className:r})=>e?(0,j.jsx)("label",{htmlFor:n,className:r,children:t}):(0,j.jsx)("div",{className:r,children:t}),ImportManageFoldersRow=({folder:e,level:t,onToggleCheck:n,checkedFoldersMap:r,disabledFoldersMap:a,folderRelationshipsMap:s,providerFolders:i,folderNamesMap:c,folderPathsMap:l,labelsMap:p,onRenameFolder:m,onRenameLabel:g,updateEditModeMapping:b,getParent:y,editModeMap:h,isSystemSubfolder:I=!1,isLabelMapping:f,folders:M,labels:N})=>{const{Source:x,Separator:v,DestinationFolder:w}=e,D=r[x],S=a[x],O=s[x].reduce(((e,t)=>{const n=i.find((e=>e.Source===t));return n&&e.push(n),e}),[]),A=f&&p[x]?p[x].Name:unescapeSlashes(c[x]),C=(0,o.useRef)(null),[E,L]=(0,o.useState)(A),P=(0,o.useRef)(E),Z={nameTooLongError:f?(0,u.c)("Error").t(WV||(WV=(0,d.Z)(["The label name is too long. Please choose a different name."]))):(0,u.c)("Error").t(VV||(VV=(0,d.Z)(["The folder name is too long. Please choose a different name."]))),emptyValueError:f?(0,u.c)("Error").t(QV||(QV=(0,d.Z)(["Label name cannot be empty"]))):(0,u.c)("Error").t(HV||(HV=(0,d.Z)(["Folder name cannot be empty"]))),nameAlreadyExistsError:f?(0,u.c)("Error").t(XV||(XV=(0,d.Z)(["This label name is not available. Please choose a different name"]))):(0,u.c)("Error").t(JV||(JV=(0,d.Z)(["This folder name is not available. Please choose a different name"])))},T={mergeWarning:(0,u.c)("Warning").t(qV||(qV=(0,d.Z)(["Proton will merge all folders with the same name. To avoid this, change the names before import."])))},k=(0,o.useMemo)((()=>!E||!E.trim()),[E]),z=(0,o.useMemo)((()=>!w&&nameAlreadyExists(E,f?M:N)),[E,M,N]),_=(0,o.useMemo)((()=>!!D&&(f?E.length>=100:escapeSlashes(E).length>=100)),[E,D]),R=(0,o.useMemo)((()=>{if(!D)return!1;const t=l[e.Source];return Object.entries(l).some((([n,a])=>n!==x&&a===t&&r[n]&&!p[n]&&!e.DestinationFolder))}),[E,D,c,l,r,p]),G=k||_||z,[Y,U]=(0,o.useState)(G),toggleEditMode=()=>{S||Y||(Y||(P.current=E),U(!Y))},handleSave=e=>{e.stopPropagation(),U(!1),P.current=E},preventDefaultAndStopPropagation=e=>{e.preventDefault(),e.stopPropagation()},handleChange=({target:e})=>{const{value:t}=e;L(t),t&&(f?g(x,t):m(x,t))},handleCancel=()=>{U(!1),f?g(x,P.current):m(x,P.current),L(P.current)},renderInput=()=>{let e,t;return _&&(e=Z.nameTooLongError),z&&(e=Z.nameAlreadyExistsError),k&&(e=Z.emptyValueError),e&&(t=(0,j.jsx)(ur.Z,{title:e,type:"error",children:(0,j.jsx)(pr.Z,{tabIndex:-1,name:"circle-info",className:"color-danger inline-flex flex-align-self-center flex-item-noshrink"})})),(0,j.jsx)(jr.Z,{autoFocus:!0,required:!0,isSubmitted:!0,ref:C,value:E,onChange:handleChange,onPressEnter:e=>{e.preventDefault(),G||handleSave(e)},icon:t,error:e,errorZoneClassName:"hidden",className:"hauto"})},getSourceDisplayName=()=>{const t=splitEscaped(x,v);let n="";for(;t.length&&!n;){t.pop();const e=i.find((e=>e.Source===t.join(v)));e&&(n=e.Source)}return n?e.Source.replace("".concat(n).concat(v),""):e.Source};(0,o.useEffect)((()=>{Y&&C&&C.current&&C.current.focus(),b(x,Y)}),[Y]),(0,o.useEffect)((()=>{S?handleCancel():(!D&&Y&&handleCancel(),D&&G&&U(!0))}),[D,S]);const F=(0,o.useMemo)((()=>{const e=splitEscaped(x,v);return aQ.map((e=>e.toLowerCase())).includes(e[0].toLowerCase())}),[x,v]),K={"--margin-left-custom":"".concat(t,"em")},B={"--margin-left-custom":"".concat(F?Math.max(0,Math.min(t-1,2)):Math.min(t,2),"em")};return(0,j.jsxs)("li",{children:[(0,j.jsx)("div",{className:"border-bottom",children:(0,j.jsxs)(RowWrapperComponent,{isLabel:!Y,checkboxId:x,className:(0,ht.dh)(["flex flex-nowrap flex-align-items-center pt1 pb1",!D&&sQ,(S||Y)&&"cursor-default"]),children:[(0,j.jsxs)("div",{className:"flex w50 flex-nowrap flex-align-items-center flex-item-noshrink pr0-5",children:[(0,j.jsx)("div",{className:(0,ht.dh)(["flex-item-noshrink",!w&&"ml-custom"]),style:w?void 0:K,children:(0,j.jsx)(Nr,{onChange:({target:{checked:e}})=>{n(x,e)},id:x,checked:D,disabled:S})}),(0,j.jsx)("div",{className:"ml0-5 flex-item-fluid-auto text-ellipsis",title:getSourceDisplayName(),children:getSourceDisplayName()})]}),(0,j.jsx)("div",{className:"flex w50 pl0-5",children:(()=>{if(p[x]){const{Name:e,Color:t}=p[x],n=D?(0,j.jsxs)(j.Fragment,{children:[_&&(0,j.jsx)(ur.Z,{title:Z.nameTooLongError,type:"error",children:(0,j.jsx)(pr.Z,{tabIndex:-1,name:"circle-info",className:"color-danger"})}),!D&&z&&!_&&(0,j.jsx)(ur.Z,{title:Z.nameAlreadyExistsError,type:"error",children:(0,j.jsx)(pr.Z,{tabIndex:-1,name:"circle-info",className:"color-danger"})})]}):null;return(0,j.jsxs)("div",{className:"flex flex-nowrap flex-align-items-center flex-item-fluid-auto",children:[(0,j.jsx)("div",{className:(0,ht.dh)(["flex flex-nowrap flex-item-fluid-auto",G&&"color-danger",R&&"color-warning"]),children:Y&&!S&&D?renderInput():(0,j.jsxs)("div",{className:(0,ht.dh)(["flex-item-fluid-auto text-ellipsis flex flex-align-items-center",(G||R)&&"text-bold"]),title:A,children:[(0,j.jsx)(labelStack_LabelStack,{labels:[{name:e,color:t,title:e}],className:"max-w100 flex-item-fluid"}),n&&(0,j.jsx)("div",{className:"flex-item-noshrink inline-flex flex-align-self-center flex-item-noshrink ml1",children:n})]})}),Y&&!S&&(0,j.jsx)("div",{className:"flex flex-align-items-center flex-item-noshrink ml0-5",onClick:e=>{S&&preventDefaultAndStopPropagation(e)},children:(0,j.jsx)(VM.Z,{onClick:handleSave,className:(0,ht.dh)(["p0-5",G&&sQ]),"aria-disabled":G,disabled:G,children:(0,u.c)("Action").t($V||($V=(0,d.Z)(["Rename"])))})})]})}const e=D?(0,j.jsxs)(j.Fragment,{children:[_&&(0,j.jsx)(ur.Z,{title:Z.nameTooLongError,type:"error",children:(0,j.jsx)(pr.Z,{tabIndex:-1,name:"circle-info",className:"color-danger"})}),z&&!_&&(0,j.jsx)(ur.Z,{title:Z.nameAlreadyExistsError,type:"error",children:(0,j.jsx)(pr.Z,{tabIndex:-1,name:"circle-info",className:"color-danger"})}),R&&(0,j.jsx)(ur.Z,{title:T.mergeWarning,type:"warning",children:(0,j.jsx)(pr.Z,{tabIndex:-1,name:"circle-info",className:"color-warning"})}),I&&!R&&(0,j.jsx)(ur.Z,{title:(0,u.c)("Tooltip").t(eQ||(eQ=(0,d.Z)(["System subfolders will show up as separate folders in ProtonMail"]))),children:(0,j.jsx)(pr.Z,{tabIndex:-1,name:"circle-info"})})]}):null;return(0,j.jsxs)("div",{className:(0,ht.dh)(["flex flex-nowrap flex-align-items-center flex-item-fluid-auto",!w&&"ml-custom"]),style:w?void 0:B,children:[(0,j.jsx)(pr.Z,{name:w?oQ[w]:"folder",className:(0,ht.dh)(["flex-item-noshrink mr0-5",G&&"color-danger",R&&"color-warning"])}),(0,j.jsx)("div",{className:(0,ht.dh)(["flex flex-nowrap flex-item-fluid flex-align-items-center",G&&"color-danger",R&&"color-warning"]),children:Y&&!S?renderInput():(0,j.jsxs)("div",{className:(0,ht.dh)(["text-ellipsis flex flex-align-items-center",(G||R)&&"text-bold"]),title:A,children:[(0,j.jsx)("div",{className:"flex-item-fluid text-ellipsis",title:A,children:A}),e&&(0,j.jsx)("div",{className:"flex-item-noshrink inline-flex flex-align-self-center flex-item-noshrink ml0-5",children:e})]})}),!w&&(0,j.jsx)("div",{className:"flex flex-align-items-center flex-item-noshrink",onClick:e=>{S&&preventDefaultAndStopPropagation(e)},children:Y&&!S?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(VM.Z,{onClick:handleSave,className:(0,ht.dh)(["ml0-5 p0-5",G&&sQ]),"aria-disabled":G,disabled:G,children:(0,u.c)("Action").t(tQ||(tQ=(0,d.Z)(["Save"])))}),(0,j.jsx)(VM.Z,{onClick:e=>{preventDefaultAndStopPropagation(e),handleCancel()},className:"ml0-5 p0-5",children:(0,u.c)("Action").t(nQ||(nQ=(0,d.Z)(["Cancel"])))})]}):(0,j.jsx)(VM.Z,{"aria-disabled":!D,disabled:!D,tabIndex:S?-1:0,onClick:toggleEditMode,className:"ml0-5 p0-5",children:(0,u.c)("Action").t(rQ||(rQ=(0,d.Z)(["Rename"])))})})]})})()})]})}),O.length>0&&(0,j.jsx)("ul",{className:"unstyled m0",children:O.map((e=>(0,j.jsx)(ImportManageFoldersRow,{onToggleCheck:n,folder:e,level:t+1,checkedFoldersMap:r,disabledFoldersMap:a,folderRelationshipsMap:s,providerFolders:i,folderNamesMap:c,folderPathsMap:l,labelsMap:p,onRenameFolder:m,onRenameLabel:g,updateEditModeMapping:b,getParent:y,editModeMap:h,isSystemSubfolder:!!w||I,isLabelMapping:f,folders:M,labels:N},e.Source)))})]})};var iQ,cQ,lQ,dQ=ImportManageFoldersRow;function ImportManageFolders_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ImportManageFolders_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ImportManageFolders_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ImportManageFolders_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var modals_ImportManageFolders=({addresses:e,payload:t,toggleEditing:n,onChangePayload:r,isLabelMapping:a,folders:s,labels:i,providerFolders:c,importedEmail:l})=>{var p;const m=getFolderRelationshipsMap(c),[g,b]=(0,o.useState)(c.reduce(((e,n)=>{const r=t.Mapping.find((e=>e.Source===n.Source));return e[n.Source]=!(!r||!r.checked),e}),{})),getParent=e=>{const[t]=Object.entries(m).find((([,t])=>t.includes(e)))||[];return t},[y,h]=(0,o.useState)(c.reduce(((e,n)=>{const r=t.Mapping.find((e=>e.Source===n.Source));return e[n.Source]=(e=>{const[t,n,...r]=splitEscaped(e);return r.length?r.join("/"):n||t})((null==r?void 0:r.Destinations.FolderPath)||n.DestinationFolder||n.Source),e}),{})),[I,f]=(0,o.useState)(c.reduce(((e,n)=>{var r,a;const o=t.Mapping.find((e=>e.Source===n.Source));return null!=o&&null!==(r=o.Destinations)&&void 0!==r&&null!==(a=r.Labels)&&void 0!==a&&a.length&&([e[n.Source]]=o.Destinations.Labels),e}),{})),forgeNewPath=e=>{const t=Object.values(uV.yF);let n=getParent(e.Source);const r=[];for(;n;)r.unshift(y[n]),n=getParent(n);r.length&&t.map((e=>e.toLowerCase())).includes(r[0].toLowerCase())&&r.shift();const[a,o]=r;return[a,o,y[e.Source]].filter((e=>!!e)).join("/")},M=(0,o.useMemo)((()=>c.reduce(((e,t)=>(e[t.Source]=forgeNewPath(t),e)),{})),[y,g]),N=(0,o.useMemo)((()=>c.reduce(((e,t)=>{const n=getParent(t.Source);return e[t.Source]=!!n&&(e[n]||!g[n]),e}),{})),[g]),getDescendants=e=>{const t=e.reduce(((e,t)=>{const n=m[t];return[...e,...getDescendants(n)]}),[]);return[...e,...t]},handleToggleCheck=(e,t)=>{const n=ImportManageFolders_objectSpread(ImportManageFolders_objectSpread({},g),{},{[e]:t}),r=m[e];(r?getDescendants(r):[]).forEach((e=>{n[e]=t})),b(n)},handleRenameFolder=(e,t)=>{h(ImportManageFolders_objectSpread(ImportManageFolders_objectSpread({},y),{},{[e]:escapeSlashes(t)}))},handleRenameLabel=(e,t)=>{f(ImportManageFolders_objectSpread(ImportManageFolders_objectSpread({},I),{},{[e]:ImportManageFolders_objectSpread(ImportManageFolders_objectSpread({},I[e]),{},{Name:t})}))},[x,v]=(0,o.useState)(c.reduce(((e,t)=>(e[t.Source]=!1,e)),{})),updateEditModeMapping=(e,t)=>{const n=ImportManageFolders_objectSpread({},x);n[e]=t,v(n)};(0,o.useEffect)((()=>{const e=Object.values(x).some(Boolean);n(e)}),[x]),(0,o.useEffect)((()=>{const e=c.reduce(((e,t)=>{const n=a?{FolderPath:t.DestinationFolder,Labels:t.DestinationFolder?[]:[I[t.Source]]}:{FolderPath:forgeNewPath(t)};return e.push({Source:t.Source,Destinations:n,checked:g[t.Source]}),e}),[]);r(ImportManageFolders_objectSpread(ImportManageFolders_objectSpread({},t),{},{Mapping:e}))}),[g,I,y]);const w=null===(p=e.find((e=>e.ID===t.AddressID)))||void 0===p?void 0:p.Email,D=(0,u.c)("Label").t(iQ||(iQ=(0,d.Z)(["From: ",""])),l),S=(0,u.c)("Label").t(cQ||(cQ=(0,d.Z)(["To: ",""])),w);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Cn.Z,{className:"mb1 mt2",children:(0,u.c)("Info").t(lQ||(lQ=(0,d.Z)(["Please select the folders you would like to import:"])))}),(0,j.jsxs)("div",{className:"flex pt1",children:[(0,j.jsx)("div",{className:"flex-item-fluid text-ellipsis pr0-5",title:D,children:(0,j.jsx)("strong",{children:D})}),(0,j.jsx)("div",{className:"flex-item-fluid text-ellipsis pl0-5",title:S,children:(0,j.jsx)("strong",{children:S})})]}),(0,j.jsx)("div",{className:"flex mb1",children:(0,j.jsx)("div",{className:"flex-item-fluid pt0-5",children:(0,j.jsx)("ul",{className:"unstyled m0",children:c.filter((e=>0===getLevel(e.Source,e.Separator,c))).map((e=>(0,j.jsx)(dQ,{onToggleCheck:handleToggleCheck,folder:e,level:0,disabledFoldersMap:N,checkedFoldersMap:g,folderRelationshipsMap:m,providerFolders:c,folderNamesMap:y,folderPathsMap:M,labelsMap:I,onRenameFolder:handleRenameFolder,onRenameLabel:handleRenameLabel,editModeMap:x,getParent:getParent,updateEditModeMapping:updateEditModeMapping,isLabelMapping:a,folders:s,labels:i},e.Source)))})})})]})};const{FOLDER_NAMES_TOO_LONG:uQ,LABEL_NAMES_TOO_LONG:pQ,UNAVAILABLE_NAMES:mQ,MAX_FOLDERS_LIMIT_REACHED:gQ}=uV.cK;var jQ,bQ,yQ,hQ,IQ,fQ,MQ,NQ,xQ,vQ,wQ,DQ,SQ,OQ,AQ,CQ,EQ,LQ,PQ,ZQ,TQ,kQ,zQ,_Q,RQ,hooks_useIAMailPayload=({email:e,providerFolders:t,isLabelMapping:n,folders:r=[],labels:a=[]})=>{const getParentSource=(e,n)=>{const r=splitEscaped(e,n);let a="";for(;r.length&&!a;){r.pop();const e=t.find((e=>e.Source===r.join(n)));e&&(a=e.Source)}return a},getFolderName=(e,t)=>{const n=getParentSource(e,t);return escapeSlashes(n?e.replace("".concat(n).concat(t),""):e)},getDestinationFolderPath=({Source:e,Separator:t})=>{const n=getFolderName(e,t),r=Object.values(uV.yF);let a=getParentSource(e,t),o=[n];for(;a;)r.map((e=>e.toLowerCase())).includes(a.toLowerCase())?o[0]="[".concat(a,"]").concat(o[0]):o=[getFolderName(a,t),...o],a=getParentSource(a,t);if(o.length>2){const[e,t,...n]=o;return[e,t,escapeSlashes(n.join("/"))].join("/")}return o.join("/")},o=getFolderRelationshipsMap(t),s=t.reduce(((e,t)=>{const{DestinationFolder:n,Source:r}=t;if(n)return e;const a=getRandomLabelColor(),s=o[r]||[];return e[r]=e[r]||a,s.forEach((t=>{e[t]=e[t]||e[r]})),e}),{}),getDestinationLabels=({Source:e,Separator:t})=>[{Name:e.split(t).join("-"),Color:s[e]}],hasUnavailableNamesError=e=>((e,t,n)=>e.filter((e=>e.checked)).map((e=>{var t,r;return n?null===(t=e.Destinations.Labels)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.Name:unescapeSlashes(e.Destinations.FolderPath)})).filter(Za.Z).some((e=>nameAlreadyExists(e,t))))(e,n?r:a,n),hasFoldersTooLongError=e=>(e=>e.some((e=>{const t=splitEscaped(e.Destinations.FolderPath);return e.checked&&t[t.length-1].length>=100})))(e);return{getDefaultMapping:()=>t.map((e=>{const t=n?{FolderPath:e.DestinationFolder,Labels:e.DestinationFolder?[]:getDestinationLabels(e)}:{FolderPath:e.DestinationFolder||getDestinationFolderPath(e)};return{Source:e.Source,Destinations:t,checked:!0}})),getDefaultLabel:()=>({Name:"".concat(e.split("@")[1]," ").concat((0,Et.Z)(new Date,"dd-MM-yyyy HH:mm")),Color:getRandomLabelColor(),Type:M.L7.MESSAGE_LABEL}),getMailMappingErrors:e=>{const t=[];return(e=>e.filter((e=>e.checked)).length+r.length>=MV.QY)(e)&&t.push(gQ),hasFoldersTooLongError(e)&&t.push(uQ),(e=>(e=>e.some((e=>{var t;return!!(e.checked&&e.Destinations.Labels&&e.Destinations.Labels.length)&&(null===(t=e.Destinations.Labels[0])||void 0===t?void 0:t.Name.length)>=100})))(e))(e)&&t.push(pQ),hasUnavailableNamesError(e)&&t.push(mQ),t}}};const GQ=["payload","addresses","onClose","customizeFoldersOpen","isLabelMapping","folders","labels","providerFolders","importedEmail","selectedPeriod","updateModel"];function CustomizeMailImportModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function CustomizeMailImportModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CustomizeMailImportModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CustomizeMailImportModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const{FOLDER_NAMES_TOO_LONG:YQ,LABEL_NAMES_TOO_LONG:UQ,UNAVAILABLE_NAMES:FQ,MAX_FOLDERS_LIMIT_REACHED:KQ}=uV.cK;var BQ,WQ,VQ,QQ,modals_CustomizeMailImportModal=e=>{let{payload:t,addresses:n,onClose:r=c.ZT,customizeFoldersOpen:a=!1,isLabelMapping:s,folders:i,labels:l,providerFolders:p,importedEmail:m,selectedPeriod:g,updateModel:b}=e,y=(0,Sn.Z)(e,GQ);const h=(0,MV.Ee)(),I=t,[f,M]=(0,o.useState)(CustomizeMailImportModal_objectSpread({},I)),[N,x]=(0,o.useState)(g),[v,w]=(0,o.useState)(I.AddressID),[D,S]=(0,o.useState)(a),{createModal:O}=(0,In.Z)(),[A,C]=(0,o.useState)(!1),{getMailMappingErrors:E}=hooks_useIAMailPayload({email:m,providerFolders:p,isLabelMapping:s}),L=(0,o.useMemo)((()=>E(f.Mapping)),[f.Mapping]),P=L.includes(KQ),Z=L.includes(FQ),T=L.includes(YQ),k=L.includes(UQ),z=n.filter((e=>e.Keys.some((e=>e.Active)))).map((e=>({value:e.ID,text:e.Email}))),_=(0,o.useMemo)((()=>f.StartTime!==I.StartTime||!(0,WI.Z)(f.Mapping,I.Mapping)||!(0,WI.Z)(f.ImportLabel,I.ImportLabel)),[f.ImportLabel,f.StartTime,f.Mapping]),R=p.length,G=f.Mapping.filter((e=>e.checked)).length,Y=s?(0,u.c)("Action").t(IQ||(IQ=(0,d.Z)(["Hide labels"]))):(0,u.c)("Action").t(fQ||(fQ=(0,d.Z)(["Hide folders"]))),U=s?(0,u.c)("Action").t(MQ||(MQ=(0,d.Z)(["Show labels"]))):(0,u.c)("Action").t(NQ||(NQ=(0,d.Z)(["Show folders"]))),F=D?Y:U,K=A||!G||P||T||k||Z;return(0,j.jsxs)(On.Z,CustomizeMailImportModal_objectSpread(CustomizeMailImportModal_objectSpread({title:(0,u.c)("Title").t(xQ||(xQ=(0,d.Z)(["Customize your mail import"]))),submit:(0,j.jsx)(Ea.Z,{color:"norm",disabled:K,type:"submit",children:(0,u.c)("Action").t(vQ||(vQ=(0,d.Z)(["Save"])))}),close:(0,u.c)("Action").t(wQ||(wQ=(0,d.Z)(["Cancel"]))),onSubmit:()=>{b(N,f),r()},onClose:()=>{_?O((0,j.jsx)(modal_Confirm,{onConfirm:r,title:(0,u.c)("Confirm modal title").t(jQ||(jQ=(0,d.Z)(["Quit import customization?"]))),cancel:(0,u.c)("Action").t(bQ||(bQ=(0,d.Z)(["Stay"]))),confirm:(0,j.jsx)(Ea.Z,{color:"danger",type:"submit",children:(0,u.c)("Action").t(yQ||(yQ=(0,d.Z)(["Quit"])))}),children:(0,j.jsx)(Cn.Z,{className:"mb1",type:"error",children:(0,u.c)("Warning").t(hQ||(hQ=(0,d.Z)(["You will lose any customization you made so far."])))})})):r()},className:"customize-import-modal"},y),{},{children:[(0,j.jsx)(Cn.Z,{className:"mb1",children:s?(0,u.c)("Info").t(DQ||(DQ=(0,d.Z)(["Create a label for the imported messages, a time range for this import, and the labels you would like to import."]))):(0,u.c)("Info").t(SQ||(SQ=(0,d.Z)(["Create a label for the imported messages, a time range for this import, and the folders you would like to import."])))}),(0,j.jsx)("div",{className:"mb1 border-bottom flex-align-items-center",children:(0,j.jsxs)(bo.Z,{children:[(0,j.jsxs)(gr.Z,{className:"flex flex-align-items-center",children:[(0,u.c)("Label").t(OQ||(OQ=(0,d.Z)(["Label messages as"]))),(0,j.jsx)(ur.Z,{title:(0,u.c)("Tooltip").t(AQ||(AQ=(0,d.Z)(["Each imported email will have this label"]))),children:(0,j.jsx)(pr.Z,{name:"circle-info",className:"ml0-5"})})]}),(0,j.jsxs)(yo.Z,{className:"wauto flex flex-align-items-center flex-nowrap",children:[f.ImportLabel&&f.ImportLabel.Name&&(0,j.jsx)(labelStack_LabelStack,{labels:[{name:f.ImportLabel.Name,color:f.ImportLabel.Color,title:f.ImportLabel.Name}],className:"max-w100"}),(0,j.jsx)(Ea.Z,{shape:"outline",className:"flex-item-noshrink ml1",onClick:async()=>{const e=await new Promise(((e,t)=>{O((0,j.jsx)(modals_EditLabelModal,{label:f.ImportLabel,type:"label",onCheckAvailable:e,onClose:t,mode:"checkAvailable"}))}));M(CustomizeMailImportModal_objectSpread(CustomizeMailImportModal_objectSpread({},f),{},{ImportLabel:e}))},children:(0,u.c)("Action").t(CQ||(CQ=(0,d.Z)(["Edit label"])))})]})]})}),n.length>1&&(0,j.jsx)("div",{className:"mb1 border-bottom flex-align-items-center",children:(0,j.jsxs)(bo.Z,{children:[(0,j.jsx)(gr.Z,{className:"flex flex-align-items-center",children:(0,u.c)("Label").t(EQ||(EQ=(0,d.Z)(["Import to email address"])))}),(0,j.jsx)(yo.Z,{children:(0,j.jsx)(Ec.Z,{className:"flex-item-fluid",onChange:({target:e})=>{return t=e.value,w(t),void M(CustomizeMailImportModal_objectSpread(CustomizeMailImportModal_objectSpread({},f),{},{AddressID:t}));var t},options:z,value:v})})]})}),(0,j.jsx)("div",{className:"mb1 border-bottom flex-align-items-center",children:(0,j.jsxs)(bo.Z,{children:[(0,j.jsxs)(gr.Z,{className:"flex flex-align-items-center",children:[(0,u.c)("Label").t(LQ||(LQ=(0,d.Z)(["Import interval"]))),(0,j.jsx)(ur.Z,{title:(0,u.c)("Tooltip").t(PQ||(PQ=(0,d.Z)(["The import will start with the most recent messages."]))),children:(0,j.jsx)(pr.Z,{name:"circle-info",className:"ml0-5"})})]}),(0,j.jsx)(yo.Z,{children:(0,j.jsx)(Ec.Z,{className:"flex-item-fluid",onChange:({target:e})=>(e=>{const t=new Date;let n;switch(e){case uV.L.LAST_YEAR:n=(0,NV.Z)(t,1);break;case uV.L.LAST_3_MONTHS:n=(0,xV.Z)(t,3);break;case uV.L.LAST_MONTH:n=(0,xV.Z)(t,1);break;default:n=void 0}x(e),M(CustomizeMailImportModal_objectSpread(CustomizeMailImportModal_objectSpread({},f),{},{StartTime:n}))})(e.value),options:[{value:uV.L.BIG_BANG,text:h[uV.L.BIG_BANG]},{value:uV.L.LAST_YEAR,text:h[uV.L.LAST_YEAR]},{value:uV.L.LAST_3_MONTHS,text:h[uV.L.LAST_3_MONTHS]},{value:uV.L.LAST_MONTH,text:h[uV.L.LAST_MONTH]}],value:N})})]})}),(0,j.jsx)("div",{className:"mb1 flex-align-items-center",children:(0,j.jsxs)(bo.Z,{children:[(0,j.jsx)(gr.Z,{children:s?(0,u.c)("Label").t(ZQ||(ZQ=(0,d.Z)(["Manage labels"]))):(0,u.c)("Label").t(TQ||(TQ=(0,d.Z)(["Manage folders"])))}),(0,j.jsxs)("div",{className:"flex flex-align-items-center",children:[(0,j.jsx)(pr.Z,{name:s?"tags":"folders",className:"mr0-5"}),G===R?(0,j.jsx)("span",{children:s?(0,u.c)("Info").ngettext((0,u.msgid)(kQ||(kQ=(0,d.Z)(["All ("," label)"])),R),"All (".concat(R," labels)"),R):(0,u.c)("Info").ngettext((0,u.msgid)(zQ||(zQ=(0,d.Z)(["All ("," folder)"])),R),"All (".concat(R," folders)"),R)}):(0,j.jsx)("span",{children:s?(0,u.c)("Info").ngettext((0,u.msgid)(_Q||(_Q=(0,d.Z)([""," label selected"])),G),"".concat(G," labels selected"),G):(0,u.c)("Info").ngettext((0,u.msgid)(RQ||(RQ=(0,d.Z)([""," folder selected"])),G),"".concat(G," folders selected"),G)}),(0,j.jsx)(Ea.Z,{shape:"outline",className:"ml2",onClick:()=>{S(!D)},children:F})]})]})}),D&&(0,j.jsx)(modals_ImportManageFolders,{addresses:n,providerFolders:p,payload:f,onChangePayload:e=>M(e),toggleEditing:e=>{C(e)},isLabelMapping:s,folders:i,labels:l,importedEmail:m})]}))};var HQ,XQ,JQ,qQ,$Q,eH,tH,nH,rH,aH,oH,sH,iH,cH,modals_CustomizeCalendarImportRow=({calendar:e,checked:t,toggleChecked:n,activeCalendars:r,updateCalendarMapping:a,value:o,isLast:s,calendarLimitReached:i})=>{const c=r.map((({ID:e,Name:t})=>(0,j.jsx)(option_Option,{value:e,title:t},e))),l="".concat(MV.Ak).concat(e.Source),p=(0,j.jsx)(labelStack_LabelStack,{labels:[{name:o.replace(MV.Ak,"")===e.Source?(0,u.c)("Info").t(BQ||(BQ=(0,d.Z)(["New"]))):(0,u.c)("Info").t(WQ||(WQ=(0,d.Z)(["Merged"])))}]}),m=(0,u.c)("Option group label").t(VQ||(VQ=(0,d.Z)(["Create new calendar"]))),g=(0,u.c)("Option group label").t(QQ||(QQ=(0,d.Z)(["Merge with calendar"]))),b=(0,j.jsx)("div",{className:"flex flex-nowrap",children:c.length>0?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:"flex-item-fluid mr1",children:(0,j.jsx)(selectTwo_SelectTwo,{value:o,onChange:({value:t})=>a(e.ID,t),className:(0,ht.dh)([i&&"border--danger"]),children:[(0,j.jsx)("li",{className:"dropdown-item",children:(0,j.jsx)("span",{className:"w100 pr1 pl1 pt0-5 pb0-5 block text-ellipsis text-left no-outline text-semibold",title:m,children:m})},"label-create"),(0,j.jsx)(option_Option,{value:l,title:e.Source},l),(0,j.jsx)("hr",{className:"mt0-5 mb0-5"},"separator"),(0,j.jsx)("li",{className:"dropdown-item",children:(0,j.jsx)("span",{className:"w100 pr1 pl1 pt0-5 pb0-5 block text-ellipsis text-left no-outline text-semibold",title:g,children:g})},"label-merge"),...c]})}),(0,j.jsx)("div",{className:"flex-item-noshrink flex-align-self-center",children:p})]}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:"mr1 text-ellipsis",title:e.Source,children:e.Source}),(0,j.jsx)("div",{className:"flex-item-noshrink flex-align-self-center",children:p})]})});return(0,j.jsxs)(gr.Z,{htmlFor:e.ID,className:(0,ht.dh)(["w100 label flex flex-flex-align-items-center pt2 pb2",!s&&"border-bottom"]),children:[(0,j.jsxs)("div",{className:(0,ht.dh)(["flex flex-item-fluid",t&&"mr1"]),children:[(0,j.jsx)(Nr,{id:e.ID,checked:t,onChange:()=>n(e.ID),className:"mr0-5"}),(0,j.jsx)("div",{className:"flex-item-fluid text-ellipsis",title:e.Source,children:e.Source})]}),t&&(0,j.jsx)("div",{className:"flex-item-fluid",children:b})]})};const lH=["providerCalendars","calendars","activeCalendars","importedEmailAddress","toEmail","payload","onUpdateCalendarMapping","onClose"];function CustomizeCalendarImportModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function CustomizeCalendarImportModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CustomizeCalendarImportModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CustomizeCalendarImportModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var dH,uH,pH,mH,gH,jH,bH,yH,hH,IH,fH,MH,NH,xH,vH,wH,DH,SH,OH,AH,CH,EH,LH,PH,ZH,TH,kH,modals_CustomizeCalendarImportModal=e=>{let{providerCalendars:t,calendars:n,activeCalendars:r,importedEmailAddress:a,toEmail:s,payload:i,onUpdateCalendarMapping:l,onClose:p=c.ZT}=e,m=(0,Sn.Z)(e,lH);const{Mapping:g}=i,[b,y]=(0,o.useState)(t.reduce(((e,{ID:t})=>{const n=g.find((({Source:e})=>e===t));return e[t]=!!n,e}),{})),toggleChecked=e=>{y(CustomizeCalendarImportModal_objectSpread(CustomizeCalendarImportModal_objectSpread({},b),{},{[e]:!b[e]}))},[h,I]=(0,o.useState)(t.reduce(((e,{ID:t,Source:n})=>{const r=g.find((({Source:e})=>e===t));return e[t]=r?r.Destination:"".concat(MV.Ak).concat(n),e}),{})),updateCalendarMapping=(e,t)=>{I(CustomizeCalendarImportModal_objectSpread(CustomizeCalendarImportModal_objectSpread({},h),{},{[e]:t}))},f=t.filter((({ID:e})=>b[e])),M=f.length,N=(0,u.c)("Info").ngettext((0,u.msgid)(HQ||(HQ=(0,d.Z)([""," of "," calendar"])),M,t.length),"".concat(M," of ").concat(t.length," calendars"),t.length),x=f.filter((({ID:e,Source:t})=>"".concat(MV.Ak).concat(t)===h[e])).length,v=(0,u.c)("Info").ngettext((0,u.msgid)(XQ||(XQ=(0,d.Z)([""," new calendar"])),x),"".concat(x," new calendars"),x),w=f.length-x,D=(0,u.c)("Info").ngettext((0,u.msgid)(JQ||(JQ=(0,d.Z)([""," merged calendar"])),w),"".concat(w," merged calendars"),w),S=x+n.length>20,O=S||0===M,A=Math.abs(20-n.length-x),C=r.length>0,E=(0,j.jsxs)("div",{className:"rounded-bigger p1 mb1 bg-danger color-white text-semibold no-border",children:[(0,u.c)("Error").t(qQ||(qQ=(0,d.Z)(["Can't create new calendars for all imported calendars due to the personal calendar limit."]))),(0,j.jsxs)("ul",{className:"m0",children:[(0,j.jsx)("li",{children:C?(0,u.c)("Error").ngettext((0,u.msgid)($Q||($Q=(0,d.Z)(["Deselect at least "," calendar or"])),A),"Deselect at least ".concat(A," calendars or"),A):(0,u.c)("Error").ngettext((0,u.msgid)(eH||(eH=(0,d.Z)(["Deselect at least "," calendar"])),A),"Deselect at least ".concat(A," calendars"),A)}),C&&(0,j.jsx)("li",{children:(0,u.c)("Error").ngettext((0,u.msgid)(tH||(tH=(0,d.Z)(["Merge at least "," calendar with an existing Proton calendar"])),A),"Merge at least ".concat(A," calendars with existing Proton calendars"),A)})]})]});return(0,j.jsxs)(On.Z,CustomizeCalendarImportModal_objectSpread(CustomizeCalendarImportModal_objectSpread({title:(0,u.c)("Title").t(nH||(nH=(0,d.Z)(["Customize calendar import"]))),close:(0,u.c)("Action").t(rH||(rH=(0,d.Z)(["Cancel"]))),onSubmit:()=>{const e=f.map((({ID:e})=>({Source:e,Destination:h[e]})));l(e),p()},onClose:p,submit:(0,j.jsx)(yr.Z,{disabled:O,type:"submit",children:(0,u.c)("Action").t(aH||(aH=(0,d.Z)(["Save"])))})},m),{},{children:[(0,j.jsxs)("div",{className:"mb1",children:[(0,u.c)("Info").t(oH||(oH=(0,d.Z)(["Select which calendars to import. A new calendar will be created for each imported calendar up to the 20 calendars limit."]))),C&&" ".concat((0,u.c)("Info").t(sH||(sH=(0,d.Z)(["You can also merge imported calendars with existing Proton calendars."]))))]}),S&&E,(0,j.jsxs)("div",{className:"flex mt2",children:[(0,j.jsxs)("div",{className:"flex-item-fluid",children:[(0,j.jsx)("div",{className:"text-sm text-bold m0 lh100 mb0-5",children:(0,u.c)("Info").t(iH||(iH=(0,d.Z)(["Import from"])))}),(0,j.jsx)("strong",{className:"block mb0-5",children:a}),(0,j.jsx)("div",{className:"color-weak",children:N})]}),(0,j.jsxs)("div",{className:"flex-item-fluid",children:[(0,j.jsx)("div",{className:"text-sm text-bold m0 lh100 mb0-5",children:(0,u.c)("Info").t(cH||(cH=(0,d.Z)(["Create in"])))}),(0,j.jsx)("strong",{className:"block mb0-5",children:s}),M>0&&(0,j.jsxs)("div",{className:(0,ht.dh)(["flex",S?"color-danger":"color-weak"]),children:[S&&(0,j.jsx)(pr.Z,{name:"circle-exclamation-filled",className:"color-danger flex-align-self-center mr0-5"}),(0,j.jsxs)(j.Fragment,{children:[!!x&&v,!!x&&!!w&&(0,j.jsx)("br",{}),!!w&&D]})]})]})]}),t.map(((e,n)=>(0,j.jsx)(modals_CustomizeCalendarImportRow,{calendar:e,checked:b[e.ID],toggleChecked:toggleChecked,isLast:n+1===t.length,activeCalendars:r,value:h[e.ID],updateCalendarMapping:updateCalendarMapping,calendarLimitReached:S},e.ID)))]}))};function IASelectImportTypeStep_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function IASelectImportTypeStep_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?IASelectImportTypeStep_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IASelectImportTypeStep_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const{MAIL:zH,CALENDAR:_H,CONTACTS:RH}=uV.xc,GH="**LABEL**";var YH,UH,FH,KH,steps_IASelectImportTypeStep=({addresses:e,modalModel:t,updateModalModel:n,toEmail:r,checkedTypes:a,updateCheckedTypes:s,calendars:i,labels:c,folders:l})=>{var p,m,g,b,y;const{oauthProps:h,payload:I,tokenScope:f}=t,M=(0,o.useRef)(),{createModal:N}=(0,In.Z)(),{getDefaultMapping:x,getDefaultLabel:v,getMailMappingErrors:w}=hooks_useIAMailPayload({email:t.importedEmail,providerFolders:t.data[zH].providerFolders,isLabelMapping:!0}),toggleCheckedProduct=e=>{s(IASelectImportTypeStep_objectSpread(IASelectImportTypeStep_objectSpread({},a),{},{[e]:!a[e]}))},D=(0,j.jsx)("strong",{children:t.importedEmail},t.importedEmail),handleMailModelUpdate=(e,r)=>{n(IASelectImportTypeStep_objectSpread(IASelectImportTypeStep_objectSpread({},t),{},{data:IASelectImportTypeStep_objectSpread(IASelectImportTypeStep_objectSpread({},t.data),{},{[zH]:IASelectImportTypeStep_objectSpread(IASelectImportTypeStep_objectSpread({},t.data[zH]),{},{selectedPeriod:e})}),payload:IASelectImportTypeStep_objectSpread(IASelectImportTypeStep_objectSpread({},t.payload),{},{[zH]:r})}))},updateCalendarMapping=e=>{var r;const a=null===(r=M.current)||void 0===r?void 0:r.payload[uV.xc.CALENDAR];if(!a)return;const o=(0,WI.Z)(a.Mapping,e)?uV.AT.FALSE:uV.AT.TRUE;n(IASelectImportTypeStep_objectSpread(IASelectImportTypeStep_objectSpread({},t),{},{payload:IASelectImportTypeStep_objectSpread(IASelectImportTypeStep_objectSpread({},t.payload),{},{[_H]:{Mapping:e,CustomCalendarMapping:o}})}))},S=h&&!(null!=f&&f.includes(zH)),O=h&&!(null!=f&&f.includes(_H)),A=h&&!(null!=f&&f.includes(RH)),C=(null===(p=t.payload[_H])||void 0===p?void 0:p.Mapping.filter((e=>e.Destination.startsWith(MV.Ak))).length)||0,E=(0,o.useMemo)((()=>{var e;const n=null===(e=t.payload[uV.xc.MAIL])||void 0===e?void 0:e.Mapping;return n?w(n):[]}),[null===(m=t.payload[uV.xc.MAIL])||void 0===m?void 0:m.Mapping]),L=C+i.length>20,P=[a[zH]&&E,a[_H]&&L&&uV.PJ.MAX_CALENDARS_LIMIT_REACHED].flat(1).filter(Za.Z),Z=P.length>0,T=(0,j.jsx)("div",{className:"rounded-bigger p1 mt1 bg-danger color-white text-semibold no-border",children:(0,u.c)("Error").ngettext((0,u.msgid)(mH||(mH=(0,d.Z)(["Please fix the highlighted conflict to proceed."]))),"Please fix the highlighted conflicts to proceed.",P.length)}),getMailSummary=()=>{const{data:e,payload:n}=t;if(!n[zH])return null;const{Mapping:r,ImportLabel:a}=n[zH],{providerFolders:o,selectedPeriod:s}=e[zH],i=o.length,c=r.filter((e=>e.checked)).length,l=(()=>{switch(s){case uV.L.LAST_3_MONTHS:return(0,u.c)("Time period").t(gH||(gH=(0,d.Z)(["the last 3 months"])));case uV.L.LAST_MONTH:return(0,u.c)("Time period").t(jH||(jH=(0,d.Z)(["the last month"])));case uV.L.LAST_YEAR:return(0,u.c)("Time period").t(bH||(bH=(0,d.Z)(["the last 12 months"])));case uV.L.BIG_BANG:default:return(0,u.c)("Time period").t(yH||(yH=(0,d.Z)(["account creation date"])))}})(),p=(0,j.jsx)(labelStack_LabelStack,{labels:[{name:(null==a?void 0:a.Name)||"",color:(null==a?void 0:a.Color)||""}]},"label"),m=(0,u.c)("Mail import summary").ngettext((0,u.msgid)(hH||(hH=(0,d.Z)(["Import all messages from "," label since "," and label them as ",""])),i,l,GH),"Import all messages from ".concat(i," labels since ").concat(l," and label them as ").concat(GH),i),g=(0,u.c)("Mail import summary").ngettext((0,u.msgid)(IH||(IH=(0,d.Z)(["Import all messages from "," out of "," label since "," and label them as ",""])),c,i,l,GH),"Import all messages from ".concat(c," out of ").concat(i," labels since ").concat(l," and label them as ").concat(GH),i);return((e,t)=>{const n=e.split(GH);return n.length>1?(0,j.jsxs)(j.Fragment,{children:[n[0].trim()," ",t]}):e})(i===c?m:g,p)},getCalendarSummary=()=>{const{data:e,payload:n}=t;if(!n[_H])return null;const{Mapping:r}=n[_H],{providerCalendars:a}=e[_H],o=r.length,s=a.length,i=(0,u.c)("Info").ngettext((0,u.msgid)(wH||(wH=(0,d.Z)(["Import "," of "," calendar"])),o,s),"Import ".concat(o," of ").concat(s," calendars"),s),c=r.filter((e=>e.Destination.startsWith(MV.Ak))).length,l=o-c,p=[c?(0,u.c)("Info").ngettext((0,u.msgid)(DH||(DH=(0,d.Z)(["Create "," new calendar"])),c),"Create ".concat(c," new calendars"),c):null,l?(0,u.c)("Info").ngettext((0,u.msgid)(SH||(SH=(0,d.Z)([""," merged calendar"])),l),"".concat(l," merged calendars"),l):null].filter(Za.Z).join(" ".concat((0,u.c)("Info").t(OH||(OH=(0,d.Z)(["and"])))," "));return"".concat(i,": ").concat(p)},getContactsSummary=()=>{const{data:e}=t,{numContacts:n,numContactGroups:r}=e[RH],a=(0,u.c)("Info").ngettext((0,u.msgid)(LH||(LH=(0,d.Z)([""," contact"])),n),"".concat(n," contacts"),n),o=(0,u.c)("Info").ngettext((0,u.msgid)(PH||(PH=(0,d.Z)([""," contact group"])),r),"".concat(r," contact groups"),r);return(0,u.c)("Info").t(ZH||(ZH=(0,d.Z)(["Import "," and ",""])),a,o)};return(0,o.useEffect)((()=>{var e,r;const a=t.payload[uV.xc.MAIL],o=null===(e=M.current)||void 0===e?void 0:e.payload[uV.xc.MAIL];if(!o||!a)return;const{StartTime:s,ImportLabel:i,Mapping:c}=o,l=s!==a.StartTime,d=!(0,WI.Z)(i,a.ImportLabel);let u=0;!(0,WI.Z)(c,a.Mapping)&&(u+=uV.IZ.Mapping),d&&(u+=uV.IZ.Label),l&&(u+=uV.IZ.Period),u!==(null===(r=t.payload[uV.xc.MAIL])||void 0===r?void 0:r.CustomFields)&&n(IASelectImportTypeStep_objectSpread(IASelectImportTypeStep_objectSpread({},t),{},{payload:IASelectImportTypeStep_objectSpread(IASelectImportTypeStep_objectSpread({},t.payload),{},{[uV.xc.MAIL]:IASelectImportTypeStep_objectSpread(IASelectImportTypeStep_objectSpread({},a),{},{CustomFields:u})})}))}),[null===(g=t.payload[uV.xc.MAIL])||void 0===g?void 0:g.StartTime,null===(b=t.payload[uV.xc.MAIL])||void 0===b?void 0:b.ImportLabel,null===(y=t.payload[uV.xc.MAIL])||void 0===y?void 0:y.Mapping]),(0,o.useEffect)((()=>{n(IASelectImportTypeStep_objectSpread(IASelectImportTypeStep_objectSpread({},t),{},{isPayloadInvalid:Z}))}),[Z]),(0,o.useEffect)((()=>{if(!h)return;const r={ImporterID:t.data.importerID};if(t.data[zH]&&(r[zH]={AddressID:e[0].ID,Mapping:x(),ImportLabel:v(),CustomFields:0}),t.data[_H]){const e=t.data[_H].providerCalendars.map((({ID:e,Source:t})=>({Source:e,Destination:"".concat(MV.Ak).concat(t)})));r[_H]={Mapping:e,CustomCalendarMapping:uV.AT.FALSE}}t.data[RH]&&(r[RH]={});const a=IASelectImportTypeStep_objectSpread(IASelectImportTypeStep_objectSpread({},t),{},{payload:r});M.current=a,n(a)}),[h]),(0,j.jsxs)(j.Fragment,{children:[h?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:"mb1",children:(0,u.c)("Info").jt(uH||(uH=(0,d.Z)(["Your data is ready to import from "," to your Proton account."])),D)}),(0,j.jsx)("div",{children:(0,u.c)("Info").t(pH||(pH=(0,d.Z)(["Just confirm your selection and we'll do the rest."])))})]}):(0,j.jsx)("div",{children:(0,u.c)("Info").t(dH||(dH=(0,d.Z)(["What do you want to import from your Google account?"])))}),P.length>0&&T,(0,j.jsxs)("div",{className:"max-w30e",children:[(()=>{if(S)return null;const n=h&&!S&&a[zH],r=P.filter((e=>[uV.cK.MAX_FOLDERS_LIMIT_REACHED,uV.cK.FOLDER_NAMES_TOO_LONG,uV.cK.LABEL_NAMES_TOO_LONG,uV.cK.UNAVAILABLE_NAMES].includes(e)));return(0,j.jsxs)(gr.Z,{htmlFor:"mail",className:(0,ht.dh)(["pt1-5 pb1-5 border-bottom flex label w100",S&&"cursor-default color-weak"]),children:[(0,j.jsx)(Nr,{id:"mail",checked:a[zH],onChange:()=>toggleCheckedProduct(zH),className:"mr0-5 flex-align-self-start",disabled:S}),(0,j.jsxs)("div",{className:"flex flex-column flex-item-fluid",children:[(0,j.jsx)("div",{className:(0,ht.dh)([n&&"mb0-5"]),children:(0,u.c)("Label").t(fH||(fH=(0,d.Z)(["Emails"])))}),n&&(0,j.jsxs)(j.Fragment,{children:[r.length>0?(0,j.jsxs)("div",{className:"flex color-danger",children:[(0,j.jsx)(pr.Z,{name:"circle-exclamation-filled",className:"mr0-5 flex-nowrap",style:{marginTop:4}}),(0,j.jsxs)("div",{className:"flex-item-fluid",children:[r.includes(uV.cK.MAX_FOLDERS_LIMIT_REACHED)&&(0,j.jsx)("div",{className:"mb1",children:(0,u.c)("Error").t(MH||(MH=(0,d.Z)(["There are too many folders in your external account. Please customize the import to delete some folders."])))}),r.includes(uV.cK.LABEL_NAMES_TOO_LONG)&&(0,j.jsx)("div",{className:"mb1",children:(0,u.c)("Error").t(NH||(NH=(0,d.Z)(["Some of your label names exceed ProtonMail's maximum character limit. Please customize the import to edit these names."])))}),r.includes(uV.cK.UNAVAILABLE_NAMES)&&(0,j.jsx)("div",{className:"mb1",children:(0,u.c)("Error").t(xH||(xH=(0,d.Z)(["Some of your label names are unavailable. Please customize the import to edit these names."])))})]})]}):(0,j.jsx)("div",{className:"color-weak",children:getMailSummary()}),(0,j.jsx)(Jd.Z,{className:"flex-align-self-start pb0",onClick:()=>N((0,j.jsx)(modals_CustomizeMailImportModal,{payload:I[zH],updateModel:handleMailModelUpdate,providerFolders:t.data[zH].providerFolders,addresses:e,isLabelMapping:!0,customizeFoldersOpen:Z,labels:c,folders:l,importedEmail:t.importedEmail,selectedPeriod:t.data[zH].selectedPeriod})),children:(0,u.c)("Action").t(vH||(vH=(0,d.Z)(["Customize"])))})]})]})]})})(),(()=>{if(O)return null;const e=h&&!O&&a[_H];return(0,j.jsxs)(gr.Z,{htmlFor:"calendar",className:(0,ht.dh)(["pt1-5 pb1-5 border-bottom flex label w100",O&&"cursor-default color-weak"]),children:[(0,j.jsx)(Nr,{id:"calendar",checked:a[_H],onChange:()=>toggleCheckedProduct(_H),className:"mr0-5 flex-align-self-start",disabled:O}),(0,j.jsxs)("div",{className:"flex flex-column flex-item-fluid",children:[(0,j.jsx)("div",{className:(0,ht.dh)([e&&"mb0-5"]),children:(0,u.c)("Label").t(AH||(AH=(0,d.Z)(["Calendars"])))}),e&&(0,j.jsxs)(j.Fragment,{children:[P.includes(uV.PJ.MAX_CALENDARS_LIMIT_REACHED)?(0,j.jsxs)("div",{className:"flex color-danger",children:[(0,j.jsx)(pr.Z,{name:"circle-exclamation-filled",className:"flex-align-self-center mr0-5"}),(0,u.c)("Error").t(CH||(CH=(0,d.Z)(["Calendar limit reached"])))]}):(0,j.jsx)("div",{className:"color-weak",children:getCalendarSummary()}),(0,j.jsx)(Jd.Z,{className:"flex-align-self-start pb0",onClick:()=>N((0,j.jsx)(modals_CustomizeCalendarImportModal,{providerCalendars:t.data[_H].providerCalendars,calendars:i,activeCalendars:getProbablyActiveCalendars(i),importedEmailAddress:t.importedEmail,toEmail:r,payload:t.payload[_H],onUpdateCalendarMapping:updateCalendarMapping})),children:(0,u.c)("Action").t(EH||(EH=(0,d.Z)(["Customize"])))})]})]})]})})(),(()=>{if(A)return null;const e=h&&!A&&a[RH];return(0,j.jsxs)(gr.Z,{htmlFor:"contacts",className:(0,ht.dh)(["pt1-5 pb1-5 flex label w100",A&&"cursor-default color-weak"]),children:[(0,j.jsx)(Nr,{id:"contacts",checked:a[RH],onChange:()=>toggleCheckedProduct(RH),className:"mr0-5",disabled:A}),(0,j.jsxs)("div",{className:"flex flex-column flex-item-fluid",children:[(0,j.jsx)("div",{className:(0,ht.dh)([e&&"mb0-5"]),children:(0,u.c)("Label").t(TH||(TH=(0,d.Z)(["Contacts"])))}),e&&(0,j.jsx)("div",{className:"color-weak",children:getContactsSummary()})]})]})})()]}),!h&&(0,j.jsx)("div",{className:"pt1 pb1",children:(0,u.c)("Info").t(kH||(kH=(0,d.Z)(["Next you'll need to log in to your Google account and allow us to access your data."])))})]})};const getOAuthRedirectURL=()=>{const{protocol:e,host:t}=window.location;return"".concat(e,"//").concat(t).concat(MV.Bl)};var BH,WH,VH,QH,HH,XH,JH,hooks_useOAuthPopup=()=>{const{createNotification:e}=(0,hn.Z)(),t=(0,o.useRef)();return{triggerOAuthPopup:({provider:n,scope:r,clientID:a,loginHint:o,callback:s})=>{let i;const c=(({scope:e,clientID:t,loginHint:n})=>{const r=new URLSearchParams;return r.append("redirect_uri",getOAuthRedirectURL()),r.append("response_type","code"),r.append("access_type","offline"),r.append("client_id",t),r.append("scope",e),r.append("prompt","consent"),n&&r.append("login_hint",n),"https://accounts.google.com/o/oauth2/v2/auth?".concat(r.toString())})({scope:r,clientID:a,loginHint:o}),l=getOAuthRedirectURL(),p=generateProtonWebUID();t.current=p;const m=window.open("".concat(c,"&state=").concat(p),"oauthPopup","height=".concat(600,",width=").concat(500,",top=").concat(window.screen.height/2-300,",left=").concat(window.screen.width/2-250));m&&(m.focus(),i=window.setInterval((()=>{if(m.closed)window.clearInterval(i);else try{const r=new URL(m.document.URL),a=new URLSearchParams(r.search);if(m.document.URL.startsWith(l)){m.close();if(a.get("error"))return void e({text:(0,j.jsxs)("div",{className:"text-center",children:[(0,u.c)("Error").t(YH||(YH=(0,d.Z)(["Authentication canceled."]))),(0,j.jsx)("br",{}),(0,u.c)("Error").t(UH||(UH=(0,d.Z)(["Your import will not be processed."])))]}),type:"error"});if(a.get("state")!==t.current)return void e({text:(0,j.jsxs)("div",{className:"text-center",children:[(0,u.c)("Error").t(FH||(FH=(0,d.Z)(["Authentication error."]))),(0,j.jsx)("br",{}),(0,u.c)("Error").t(KH||(KH=(0,d.Z)(["Your import will not be processed."])))]}),type:"error"});const r=a.get("code");if(!r)return;s({Code:r,Provider:n,RedirectUri:l})}}catch(e){}}),100))}}},qH=n(1247);var IAImportStartedStep=({importedEmailAddress:e,toEmail:t,onClose:n})=>{const r=(0,s.TH)(),a=MV.gi.test(r.pathname),o=(0,j.jsx)(sh.Z,{path:"/easy-switch",onClick:()=>n(),children:(0,u.c)("Info").t(BH||(BH=(0,d.Z)(["here"])))},"link");return(0,j.jsxs)("div",{className:"text-center mb2",children:[(0,j.jsx)("img",{src:qH,alt:"",className:"max-w80"}),(0,j.jsx)("h3",{children:(0,u.c)("Info").t(WH||(WH=(0,d.Z)(["Import in progress"])))}),(0,j.jsx)("div",{className:"mb1",children:(0,u.c)("Info").t(VH||(VH=(0,d.Z)(["Importing your data from "," to ","."])),e,t)}),(0,j.jsx)("div",{children:(0,u.c)("Info").t(QH||(QH=(0,d.Z)(["We'll notify you when the import is done."])))}),(0,j.jsx)("div",{className:"mb1",children:(0,u.c)("Info").t(HH||(HH=(0,d.Z)(["Large imports can take several days."])))}),!a&&(0,j.jsx)("div",{className:"mb1",children:(0,u.c)("Info").jt(XH||(XH=(0,d.Z)(["You can check the progress ","."])),o)}),(0,j.jsx)("div",{children:(0,u.c)("Info").t(JH||(JH=(0,d.Z)(["Close this screen to exit."])))})]})},$H=n(85809);const useGetCalendars=()=>{const e=(0,Dn.Z)(),t=(0,Ln.Z)(),n=(0,o.useCallback)((()=>sL.A.get(e)),[e]);return(0,o.useCallback)((()=>(0,Zn.NC)(t,sL.A.key,n)),[t,n])};var hooks_useCalendars=()=>{const e=(0,Ln.Z)(),t=useGetCalendars();return(0,Zn.ZP)(e,sL.A.key,t)},eX=n(94171);const tX={key:"ApiEnvironmentConfig",get:e=>e({url:"core/v4/system/config",method:"get"}).then((({Config:e})=>e)),update:(e,t)=>(0,eX.Z)({model:e,events:t,item:({Config:e})=>e})};var nX,rX,aX,oX,sX,iX,cX=(0,vr.Z)(tX);var lX,dX,uX,pX,mX,gX,jX,bX,yX,hX,steps_IALoadingStep=({calendarsToBeCreated:e,createdCalendars:t,isLoadingOAuth:n,isLoadingCreateCalendars:r,isLoadingStartImportTask:a})=>{if(!n&&!r&&!a)return(0,j.jsx)(Yu.Z,{});return(0,j.jsxs)("div",{className:"p1 text-center w100",children:[(0,j.jsx)(wI.Z,{size:100,className:"mb1"}),(()=>{if(n)return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("h4",{children:(0,u.c)("Loading info").t(nX||(nX=(0,d.Z)(["Gathering your data"])))}),(0,j.jsx)(DI.Z,{children:(0,u.c)("Loading info").t(rX||(rX=(0,d.Z)(["We're gathering your data from your provider"])))})]});const o=(0,u.c)("Loading info").ngettext((0,u.msgid)(aX||(aX=(0,d.Z)([""," of "," created"])),t,e),"".concat(t," of ").concat(e," created"),t);return r?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("h4",{children:(0,u.c)("Loading info").t(oX||(oX=(0,d.Z)(["Creating new calendars"])))}),(0,j.jsx)(DI.Z,{children:o})]}):a?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("h4",{children:(0,u.c)("Loading info").t(sX||(sX=(0,d.Z)(["Your import is starting"])))}),(0,j.jsx)(DI.Z,{children:(0,u.c)("Loading info").t(iX||(iX=(0,d.Z)(["Almost there"])))})]}):null})()]})};const IX=["addresses","onClose","defaultCheckedTypes","source"];function ImportAssistantOauthModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ImportAssistantOauthModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ImportAssistantOauthModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ImportAssistantOauthModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const{MAIL:fX,CALENDAR:MX,CONTACTS:NX}=uV.xc,{AUTHENTICATION:xX,SELECT_IMPORT_TYPE:vX,SUCCESS:wX}=uV.yY,getCheckedProducts=e=>Object.keys(e).reduce(((t,n)=>e[n]?[...t,n]:t),[]);var DX,SX,easySwitch_ImportAssistantOauthModal=e=>{let{addresses:t,onClose:n=c.ZT,defaultCheckedTypes:r=[],source:a}=e,i=(0,Sn.Z)(e,IX);const l=(0,IV.dB)(t),p=(0,Zb.ZP)(),m=(0,s.TH)(),g=MV.gi.test(m.pathname),b=link_useSettingsLink(),y=(0,Dn.Z)(),{call:h}=(0,Ie.Z)(),I=(0,$H.Z)(),[f=[],N]=useLabels(),[x=[],v]=useFolders(),[w=[],D]=hooks_useCalendars(),[S,O]=cX(),A=N||v||D||O,[C,E]=(0,o.useState)({step:xX,AddressID:t[0].ID,importedEmail:"",payload:{ImporterID:""},isPayloadInvalid:!1,data:{importerID:"",[fX]:{selectedPeriod:uV.L.BIG_BANG,providerFolders:[]},[MX]:{providerCalendars:[]},[NX]:{numContacts:0,numContactGroups:0}}}),L=(0,Ne.qL)(t),[P,Z]=(0,o.useState)(!1),[T,k]=(0,o.useState)(!1),[z,_]=(0,o.useState)(!1),R=A||P||T||z,[G,Y]=(0,o.useState)(0),[U,F]=(0,o.useState)(0),[K,B]=(0,o.useState)({[fX]:null==r?void 0:r.includes(fX),[MX]:null==r?void 0:r.includes(MX),[NX]:null==r?void 0:r.includes(NX)}),{triggerOAuthPopup:W}=hooks_useOAuthPopup(),V=Object.keys(K).reduce(((e,t)=>{const n=t,r=!C.tokenScope||C.tokenScope.includes(n);return K[n]&&r&&e.push(n),e}),[]),handleCancel=()=>n();return(0,j.jsx)(On.Z,ImportAssistantOauthModal_objectSpread(ImportAssistantOauthModal_objectSpread({title:(()=>{if(R)return null;switch(C.step){case xX:return(0,u.c)("Title").t(yX||(yX=(0,d.Z)(["Select what to import"])));case vX:return(0,u.c)("Title").t(hX||(hX=(0,d.Z)(["Customize and confirm"])));case wX:return null;default:return M.$7.EASY_SWITCH}})(),submit:R?null:[vX,xX].includes(C.step)?C.oauthProps?(0,j.jsx)(yr.Z,{type:"submit",disabled:!V.length||C.isPayloadInvalid,children:(0,u.c)("Action").t(pX||(pX=(0,d.Z)(["Start import"])))}):(0,j.jsx)(yr.Z,{type:"submit",disabled:!V.length,children:(0,u.c)("Action").t(mX||(mX=(0,d.Z)(["Next"])))}):C.step!==wX||g?null:(0,j.jsx)(yr.Z,{onClick:()=>{n(),b("/easy-switch")},children:(0,u.c)("Action").t(gX||(gX=(0,d.Z)(["Check import progress"])))}),close:R?null:(0,j.jsx)(Ea.Z,{shape:"outline",onClick:handleCancel,children:C.step===wX?(0,u.c)("Action").t(jX||(jX=(0,d.Z)(["Close"]))):(0,u.c)("Action").t(bX||(bX=(0,d.Z)(["Cancel"])))}),onSubmit:async()=>{if(C.step!==xX){if(C.step===vX){var e;const t=C.payload,n=t[uV.xc.CALENDAR];let r;const a=(null===(e=C.payload[uV.xc.CALENDAR])||void 0===e?void 0:e.Mapping.filter((e=>e.Destination.startsWith(MV.Ak))))||[];if(t[uV.xc.CALENDAR]&&a.length){k(!0);try{r=await(async(e,t)=>{if(!l.length)throw new Error((0,u.c)("Error").t(lX||(lX=(0,d.Z)(["No valid address found"]))));Y(e.length);const[{ID:n}]=l,{privateKey:r}=(0,bV.x)(await p(n))||{};if(!r)throw new Error((0,u.c)("Error").t(dX||(dX=(0,d.Z)(["Primary address key is not decrypted."]))));const a=await Promise.all(e.map((async({Source:e,Destination:t})=>{const r=t.replace(MV.Ak,"").slice(0,Fr),{Calendar:a}=await y((0,cL.YR)({Name:r,Color:M.dI[(0,c.lv)(0,M.dI.length-1)],Description:"",Display:1,AddressID:n,IsImport:1}));return await setupCalendarKey({api:y,calendarID:a.ID,addresses:l,getAddressKeys:p}),F(U+1),{Source:e,Destination:a.ID}})));return t&&await y((0,cL.rU)({PrimaryTimezone:(0,fV.EP)(),AutoDetectPrimaryTimezone:1})),a})(a,!w.length),await h(),n.Mapping=[...n.Mapping.filter((e=>!e.Destination.startsWith(MV.Ak))),...r],k(!1)}catch(e){k(!1),I(e)}}const o=Object.keys(t).filter((e=>Object.values(uV.xc).includes(e))).filter((e=>V.includes(e))).reduce(((e,r)=>{if(r===uV.xc.MAIL){const n=t[uV.xc.MAIL];return ImportAssistantOauthModal_objectSpread(ImportAssistantOauthModal_objectSpread({},e),{},{[r]:ImportAssistantOauthModal_objectSpread(ImportAssistantOauthModal_objectSpread({},n),{},{StartTime:n.StartTime?(a=n.StartTime,Math.floor(a.getTime()/1e3)):void 0,Mapping:n.Mapping.filter((({checked:e})=>e)).map((({Source:e,Destinations:t})=>({Source:e,Destinations:t})))})})}var a;return ImportAssistantOauthModal_objectSpread(ImportAssistantOauthModal_objectSpread({},e),{},{[r]:r===uV.xc.CALENDAR?n:t[r]})}),{ImporterID:C.payload.ImporterID});_(!0);try{await y((0,hV.mt)(o)),await h(),E(ImportAssistantOauthModal_objectSpread(ImportAssistantOauthModal_objectSpread({},C),{},{step:wX})),_(!1)}catch(e){r&&(await Promise.all(r.map((async({Destination:e})=>y((0,cL.vz)(e))))),await h()),_(!1),I(e)}}return null}{const e=[...MV.Ai,K[fX]&&MV.Ut,K[MX]&&MV.oq,K[NX]&&MV.mR].filter(Za.Z).flat(1);W({provider:uV.h3.GOOGLE,scope:e.join(" "),clientID:S["importer.google.client_id"],callback:async e=>{Z(!0);try{const{Code:t,Provider:n,RedirectUri:r}=e,{Token:o}=await y((0,hV.V3)({Provider:n,Code:t,RedirectUri:r,Source:a,Products:getCheckedProducts(K)})),{Products:s,ID:i,Account:c}=o,l=s,p={TokenID:i};s.includes(uV.xc.MAIL)&&(p[uV.xc.MAIL]={Email:c,ImapHost:MV.$n[n],ImapPort:993,Sasl:uV.NA.OAUTH}),s.includes(uV.xc.CALENDAR)&&(p[uV.xc.CALENDAR]={}),s.includes(uV.xc.CONTACTS)&&(p[uV.xc.CONTACTS]={});const{ImporterID:m}=await y((0,hV.sj)(p)),g=(await Promise.all(l.map((async e=>{if(e===fX){const{Folders:t}=await y((0,hV.CJ)(m));return{importType:e,Folders:t}}if(e===MX){const{Calendars:t}=await y((0,hV.iW)(m));return{importType:e,Calendars:t}}if(e===NX){const{Contacts:t}=await y((0,hV.VJ)(m));return{importType:e,Contacts:t}}})))).filter(Za.Z).reduce(((e,t)=>{const{importType:n}=t;return n===fX&&t.Folders&&(e[n].providerFolders=t.Folders),n===MX&&t.Calendars&&(e[n].providerCalendars=t.Calendars),n===NX&&(e[n].numContacts=t.Contacts.NumContacts||0,e[n].numContactGroups=t.Contacts.NumGroups||0),ImportAssistantOauthModal_objectSpread(ImportAssistantOauthModal_objectSpread({},e),{},{[n]:ImportAssistantOauthModal_objectSpread({},e[n])})}),ImportAssistantOauthModal_objectSpread(ImportAssistantOauthModal_objectSpread({},C.data),{},{importerID:m})),j=g[fX].providerFolders.length,b=g[MX].providerCalendars.length,h=g[NX].numContacts||g[NX].numContactGroups;if(!j&&!b&&!h)throw new Error((0,u.c)("Error").t(uX||(uX=(0,d.Z)(["No data to import"]))));E(ImportAssistantOauthModal_objectSpread(ImportAssistantOauthModal_objectSpread({},C),{},{step:vX,importedEmail:c,oauthProps:e,tokenScope:l,data:g})),Z(!1)}catch(e){Z(!1),I(e)}}})}},onClose:handleCancel},i),{},{children:R?(0,j.jsx)(steps_IALoadingStep,{isLoadingOAuth:P,isLoadingCreateCalendars:T,isLoadingStartImportTask:z,calendarsToBeCreated:G,createdCalendars:U}):(0,j.jsxs)(j.Fragment,{children:[[vX,xX].includes(C.step)&&(0,j.jsx)(steps_IASelectImportTypeStep,{checkedTypes:K,updateCheckedTypes:e=>B(e),modalModel:C,toEmail:L[C.AddressID].Email,calendars:getPersonalCalendars(w),addresses:t,labels:f,folders:x,updateModalModel:e=>E(e)}),C.step===wX&&(0,j.jsx)(IAImportStartedStep,{importedEmailAddress:C.importedEmail,toEmail:L[C.AddressID].Email,onClose:n})]})}))};var OX,AX,widget_ImportCsvContactButton=({hideEasySwitch:e=!1,easySwitchSource:t=uV.P1.IMPORT_CONTACTS_BUTTON,onImportButtonClick:n})=>{var r;const{createModal:a}=(0,In.Z)(),[o,s]=(0,yn.ZP)(),i=(0,nN.Z)(y.P.EasySwitch),c=null===(r=i.feature)||void 0===r?void 0:r.Value,handleClick=()=>{a((0,j.jsx)(import_ImportModal,{})),void 0!==n&&n()};return s||i.loading?(0,j.jsx)(Yu.Z,{}):c&&!e?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(easySwitch_GoogleButton,{onClick:()=>{a((0,j.jsx)(easySwitch_ImportAssistantOauthModal,{source:t,addresses:o,defaultCheckedTypes:[uV.xc.CONTACTS]}))},disabled:s,className:"mr1"}),(0,j.jsx)(Ea.Z,{id:"import-contacts-button",onClick:handleClick,children:(0,u.c)("Action").t(DX||(DX=(0,d.Z)(["Import from .csv or vCard"])))})]}):(0,j.jsx)(yr.Z,{id:"import-contacts-button",onClick:handleClick,children:(0,u.c)("Action").t(SX||(SX=(0,d.Z)(["Import from .csv or vCard"])))})};var CX,widget_ContactsWidgetSettingsContainerImport=({onImportButtonClick:e})=>(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(gr.Z,{htmlFor:"import-contacts-button",className:"text-semibold",children:(0,j.jsx)("span",{role:"heading","aria-level":2,children:(0,u.c)("Label").t(OX||(OX=(0,d.Z)(["Import contacts"])))})}),(0,j.jsx)("p",{className:"color-weak mt0-5 mb1",children:(0,u.c)("Info").t(AX||(AX=(0,d.Z)(["CSV files from Outlook, Outlook Express, Yahoo! Mail, Hotmail, Eudora and some other apps as well as vCard 3.1 and 4.0 formats (UTF-8 encoding) are supported."])))}),(0,j.jsx)(widget_ImportCsvContactButton,{easySwitchSource:uV.P1.CONTACTS_WIDGET_SETTINGS,onImportButtonClick:e})]});var widget_ContactsWidgetSettingsContainer=({onClose:e})=>{const[t,n]=useMailSettings(),{AutoSaveContacts:r}=t||{},[,a]=Wl(),o=a||n;return(0,j.jsx)(j.Fragment,{children:o?(0,j.jsx)("div",{className:"flex h100 pb2",children:(0,j.jsx)(wI.Z,{className:"mauto color-primary"})}):(0,j.jsxs)("div",{className:"pl2 pr2 pt1 pb1 scroll-if-needed h100",children:[(0,j.jsxs)("div",{className:"flex mb1 on-mobile-flex-column",children:[(0,j.jsxs)(gr.Z,{htmlFor:"saveContactToggle",children:[(0,j.jsx)("span",{className:"mr0-5 text-semibold",role:"heading","aria-level":2,children:(0,u.c)("Label").t(CX||(CX=(0,d.Z)(["Automatically save contacts"])))}),(0,j.jsx)(fc.Z,{url:"https://protonmail.com/support/knowledge-base/autosave-contact-list/"})]}),(0,j.jsx)(yo.Z,{className:"pt0-5",children:(0,j.jsx)(general_AutoSaveContactsToggle,{autoSaveContacts:!!r,id:"saveContactToggle"})})]}),(0,j.jsx)("div",{className:"mb2",children:(0,j.jsx)(widget_ContactsWidgetSettingsContainerImport,{onImportButtonClick:e})}),(0,j.jsx)("div",{className:"mb2",children:(0,j.jsx)(widget_ContactsWidgetSettingsContainerExport,{onExportButtonClick:e})})]})})};let EX;var LX,PX,ZX,TX,kX,zX;function TopNavbarListItemContactsDropdown_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function TopNavbarListItemContactsDropdown_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?TopNavbarListItemContactsDropdown_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TopNavbarListItemContactsDropdown_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e[e.CONTACTS=0]="CONTACTS",e[e.GROUPS=1]="GROUPS"}(EX||(EX={}));const _X=(0,o.forwardRef)(((e,t)=>(0,j.jsx)(rU,TopNavbarListItemContactsDropdown_objectSpread(TopNavbarListItemContactsDropdown_objectSpread({},e),{},{ref:t,as:"button",type:"button",icon:(0,j.jsx)(pr.Z,{name:"user-group"}),text:(0,u.c)("Header").t(LX||(LX=(0,d.Z)(["Contacts"])))}))));_X.displayName="TopNavbarListItemContactsButton";var widget_TopNavbarListItemContactsDropdown=({className:e,onCompose:t,onMailTo:n,customActions:r=[]})=>{const[a]=(0,o.useState)((0,ht.D)("dropdown")),{anchorRef:s,isOpen:i,toggle:c,close:l}=(0,No.Z)(),[p,m]=(0,o.useState)(0),actionIncludes=e=>t=>t.tabs.includes(e),handleClose=()=>{m(0),l()};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(fo.Z,{as:_X,isOpen:i,className:e,ref:s,onClick:()=>{i?handleClose():c()},title:(0,u.c)("Title").t(PX||(PX=(0,d.Z)(["View contacts"]))),children:(0,j.jsx)(j.Fragment,{})}),(0,j.jsxs)(Mo.Z,{id:a,isOpen:i,anchorRef:s,onClose:handleClose,autoClose:!1,originalPlacement:"bottom",className:"contacts-widget",contentProps:{className:"flex-no-min-children flex-column flex-nowrap"},noMaxSize:!0,noMaxWidth:!0,noMaxHeight:!0,disableDefaultArrowNavigation:!0,updatePositionOnDOMChange:!1,children:[(0,j.jsx)("h1",{className:"sr-only",children:(0,u.c)("Header").t(ZX||(ZX=(0,d.Z)(["Contacts, groups and settings"])))}),(0,j.jsx)(Qf.Z,{className:"flex flex-column flex-item-fluid flex-nowrap",containerClassName:"contacts-widget-tabs flex-item-noshrink",contentClassNane:"flex-item-fluid",tabs:[{title:(0,u.c)("Title").t(TX||(TX=(0,d.Z)(["Contacts"]))),content:(0,j.jsx)(widget_ContactsWidgetContainer,{onClose:handleClose,onCompose:t,onMailTo:n,customActions:r.filter(actionIncludes(EX.CONTACTS))})},{title:(0,u.c)("Title").t(kX||(kX=(0,d.Z)(["Groups"]))),content:(0,j.jsx)(widget_ContactsWidgetGroupsContainer,{onClose:handleClose,onCompose:t,customActions:r.filter(actionIncludes(EX.GROUPS))})},{title:(0,u.c)("Title").t(zX||(zX=(0,d.Z)(["Settings"]))),content:(0,j.jsx)(widget_ContactsWidgetSettingsContainer,{onClose:handleClose})}],value:p,onChange:m})]})]})};const RX=["children","title","className"];function FloatingButton_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function FloatingButton_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FloatingButton_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FloatingButton_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const FloatingButton=(e,t)=>{let{children:n,title:r,className:a}=e,o=(0,Sn.Z)(e,RX);return(0,j.jsx)(Ea.Z,FloatingButton_objectSpread(FloatingButton_objectSpread({color:"norm",className:(0,ht.dh)(["fab flex",a]),ref:t},o),{},{children:n}))};var GX,YX,UX=(0,o.forwardRef)(FloatingButton),FX=n(55340);function TopNavbarListItemSearchButton_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function TopNavbarListItemSearchButton_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?TopNavbarListItemSearchButton_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TopNavbarListItemSearchButton_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var KX,BX,WX=(0,o.forwardRef)(((e,t)=>(0,j.jsx)(rU,TopNavbarListItemSearchButton_objectSpread(TopNavbarListItemSearchButton_objectSpread({},e),{},{ref:t,as:"button",type:"button",icon:(0,j.jsx)(pr.Z,{name:"magnifying-glass"}),title:(0,u.c)("Header").t(GX||(GX=(0,d.Z)(["Search"]))),text:(0,u.c)("Header").t(YX||(YX=(0,d.Z)(["Search"])))}))));var VX,QX,HX,XX,JX,qX,AdvancedSearchFields_SearchField=({onSubmit:e,onChange:t,value:n,showEncryptedSearch:r})=>(0,j.jsx)("div",{className:(0,ht.dh)([r?"mb0-5":"mb1-5","relative"]),children:(0,j.jsxs)(gr.Z,{className:"advanced-search-label p0",htmlFor:"search-keyword",title:(0,u.c)("Label").t(KX||(KX=(0,d.Z)(["Keyword"]))),children:[(0,j.jsx)(Ea.Z,{className:"searchbox-search-button",onClick:e,shape:"ghost",color:"weak",icon:!0,children:(0,j.jsx)(pr.Z,{name:"magnifying-glass"})}),(0,j.jsx)(jr.Z,{id:"search-keyword",className:"pl3",placeholder:(0,u.c)("Placeholder").t(BX||(BX=(0,d.Z)(["Search Messages"]))),value:n,autoFocus:!0,onChange:t})]})});const{INBOX:$X,TRASH:eJ,SPAM:tJ,STARRED:nJ,ARCHIVE:rJ,ALL_MAIL:aJ,ALL_SENT:oJ,SENT:sJ,ALL_DRAFTS:iJ,DRAFTS:cJ,SCHEDULED:lJ}=M.C7,dJ=getStandardFolders(),getMarginByFolderLvl=e=>{switch(e){case 1:return"ml0-5";case 2:case 3:case 4:return"ml1";default:return""}};function folderReducer(e,t,n=0){return e.push({text:formatFolderName(n,t.Name),value:t.ID,className:getMarginByFolderLvl(n),folderEntity:t}),Array.isArray(t.subfolders)&&t.subfolders.forEach((t=>folderReducer(e,t,n+1))),e}function useLocationFieldOptions(){const[e]=useMailSettings(),[t=[]]=useLabels(),[n]=useFolders(),r=buildTreeview(n),{feature:a}=(0,nN.Z)(y.P.ScheduledSend),o=(0,N.jl)((null==e?void 0:e.ShowMoved)||0,M.zC.DRAFTS)?iJ:cJ,s=[{value:aJ,text:(0,u.c)("Mailbox").t(VX||(VX=(0,d.Z)(["All mail"]))),url:"/all-mail",icon:"envelopes"},{value:$X,text:dJ[$X].name,url:dJ[$X].to,icon:"inbox"},{value:o,text:dJ[o].name,url:dJ[o].to,icon:"file-lines"},...null!=a&&a.Value?[{value:lJ,text:dJ[lJ].name,url:dJ[lJ].to,icon:"clock"}]:[],{value:(0,N.jl)((null==e?void 0:e.ShowMoved)||0,M.zC.SENT)?oJ:sJ,text:(0,u.c)("Mailbox").t(QX||(QX=(0,d.Z)(["Sent"]))),url:"/sent",icon:"paper-plane"},{value:nJ,text:(0,u.c)("Mailbox").t(HX||(HX=(0,d.Z)(["Starred"]))),url:"/starred",icon:"star"},{value:rJ,text:dJ[rJ].name,url:dJ[rJ].to,icon:"box-archive"},{value:tJ,text:dJ[tJ].name,url:dJ[tJ].to,icon:"fire"},{value:eJ,text:dJ[eJ].name,url:dJ[eJ].to,icon:"trash"}],i=r.reduce(((e,t)=>folderReducer(e,t)),[]),c=t.map((({ID:e,Name:t,Color:n})=>({value:e,text:t,url:e,color:n}))),l=[...s,...i,...c];return{all:l,grouped:[{id:"DEFAULT_FOLDERS",title:(0,u.c)("Group").t(XX||(XX=(0,d.Z)(["Default folders"]))),items:s},{id:"CUSTOM_FOLDERS",title:(0,u.c)("Group").t(JX||(JX=(0,d.Z)(["Custom folders"]))),items:i},{id:"LABELS",title:(0,u.c)("Group").t(qX||(qX=(0,d.Z)(["Labels"]))),items:c}],findItemByValue:e=>l.find((t=>t.value===e)),isDefaultFolder:e=>"url"in e&&"icon"in e,isCustomFolder:e=>"folderEntity"in e,isLabel:e=>"color"in e}}var hooks_useFolderColor=e=>{const[t]=useFolders(),[n]=useMailSettings();if(null==n||!n.EnableFolderColor)return;if(null==n||!n.InheritParentFolderColor)return e.Color;const r=(0,Ne.qL)(t),getParentFolderColor=({ParentID:e,Color:t})=>{if(!e)return t;const n=r[e];return n?getParentFolderColor(n):void 0};return getParentFolderColor(e)};const uJ=["folder","name"];function FolderIcon_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const FolderIcon_getIconName=(e,t,n)=>{let r;return r=e?t?"folders-filled":"folders":t?"folder-filled":n||"folder",r};var pJ,mJ,labels_FolderIcon=e=>{var t;let{folder:n,name:r}=e,a=(0,Sn.Z)(e,uJ);const o=!(null===(t=n.subfolders)||void 0===t||!t.length),s=hooks_useFolderColor(n);return(0,j.jsx)(pr.Z,function FolderIcon_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FolderIcon_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FolderIcon_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({name:FolderIcon_getIconName(o,s,r),color:s,alt:n.Name},a))};function LocationFieldDropdown_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function LocationFieldDropdown_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?LocationFieldDropdown_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LocationFieldDropdown_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gJ,jJ,AdvancedSearchFields_LocationFieldDropdown=({value:e,onChange:t})=>{const{grouped:n,isLabel:r,isCustomFolder:a,isDefaultFolder:s}=useLocationFieldOptions(),[i,c]=(0,o.useState)(""),[l,p]=(0,o.useState)(n),{current:m}=(0,o.useRef)((0,ht.D)("advanced-search-location-dropdown")),{current:g}=(0,o.useRef)((0,ht.D)("dropdown")),{anchorRef:b,isOpen:y,toggle:h,close:I}=(0,No.Z)();return(0,o.useEffect)((()=>{const e=i.toLowerCase(),t=n.map((t=>LocationFieldDropdown_objectSpread(LocationFieldDropdown_objectSpread({},t),{},{items:t.items.filter((t=>t.text.toLowerCase().includes(e)))})));p(t)}),[i]),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(fo.Z,{className:(0,ht.dh)(["no-border","rounded"]),color:"weak",hasCaret:!0,onClick:h,size:"small",shape:"solid",ref:b,type:"button",children:(0,u.c)("Property type").t(pJ||(pJ=(0,d.Z)(["Other"])))}),(0,j.jsxs)(Mo.Z,{anchorRef:b,autoClose:!0,onClosed:()=>c(""),id:m,isOpen:y,onClose:I,originalPlacement:"bottom-left",contentProps:{className:"flex flex-column flex-nowrap"},children:[(0,j.jsx)("div",{className:"p1 flex-item-noshrink",children:(0,j.jsx)(Ir,{value:i,onChange:c,onClick:e=>{e.stopPropagation()},id:g,placeholder:(0,u.c)("Placeholder").t(mJ||(mJ=(0,d.Z)(["Filter folders"]))),autoFocus:!0,"data-prevent-arrow-navigation":!0})}),(0,j.jsx)("div",{className:"scroll-if-needed scroll-smooth-touch",children:(0,j.jsx)(dropdown_DropdownMenu,{children:l.map((n=>n.items.length?(0,j.jsxs)("div",{children:[(0,j.jsx)("span",{className:"button text-bold pl1",children:n.title}),n.items.map((n=>(0,j.jsx)(Do.Z,{className:"text-left text-ellipsis",isSelected:n.value===e,onClick:()=>t(n.value),children:(0,j.jsxs)("div",{className:(0,ht.dh)(["flex flex-nowrap flex-align-items-center",a(n)&&n.className]),children:[r(n)&&(0,j.jsx)(pr.Z,{name:"circle-filled",size:12,color:n.color,className:"flex-item-noshrink mr0-5"}),s(n)&&(0,j.jsx)(pr.Z,{name:n.icon,className:"flex-item-noshrink mr0-5"}),a(n)&&(0,j.jsx)(labels_FolderIcon,{folder:n.folderEntity,className:"mr0-5"}),(0,j.jsx)("span",{className:"text-ellipsis",children:(0,j.jsx)(Kl,{value:i,children:n.text})})]})},n.value)))]},n.id):null))})})]})]})};const{INBOX:bJ,ALL_MAIL:yJ,SENT:hJ,DRAFTS:IJ,ALL_SENT:fJ,ALL_DRAFTS:MJ}=M.C7,NJ=[yJ,bJ,IJ,hJ,fJ,MJ];var xJ,vJ,wJ,DJ,SJ,OJ,AJ,CJ,EJ,LJ,PJ,ZJ,TJ,kJ,zJ,_J,RJ,GJ,YJ,UJ,FJ,KJ,AdvancedSearchFields_LocationField=({value:e,onChange:t})=>{var n;const{all:r,isDefaultFolder:a}=useLocationFieldOptions(),i=(0,s.k6)(),c=r.filter((({value:e})=>NJ.includes(e))),{findItemByValue:l}=useLocationFieldOptions(),p=void 0!==e&&NJ.every((t=>t!==e)),m=p?null===(n=l(e))||void 0===n?void 0:n.text:void 0,g=!0===p&&void 0!==m;return(0,o.useEffect)((()=>{const n=r.reduce(((e,t)=>a(t)&&i.location.pathname.includes(t.url)?t.value:e),e);window.setTimeout((()=>t(n)),0)}),[]),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(gr.Z,{className:"block text-semibold mb0-5",children:(0,u.c)("Label").t(gJ||(gJ=(0,d.Z)(["Search in"])))}),(0,j.jsxs)("div",{className:"flex flex-wrap flex-align-items-start mb0-5 flex-gap-0-5",children:[c.map((n=>(0,j.jsx)(Ea.Z,{className:"no-border rounded",color:e===n.value?"norm":"weak","data-testid":"location-".concat(n.value),onClick:()=>{t(n.value)},shape:"solid",size:"small",type:"button",children:n.text},n.value))),(0,j.jsx)(AdvancedSearchFields_LocationFieldDropdown,{onChange:t,value:e}),g?(0,j.jsx)(Ea.Z,{className:"no-border rounded align-baseline",color:"norm",onClick:()=>t(yJ),shape:"solid",size:"small",type:"button",children:(0,j.jsxs)("span",{className:"flex flex-nowrap",children:[(0,j.jsx)("span",{className:"text-ellipsis",children:m}),(0,j.jsx)("span",{className:"flex-item-noshrink",children:(0,j.jsx)(pr.Z,{name:"xmark",className:"ml0-5",size:12,title:(0,u.c)("Action").t(jJ||(jJ=(0,d.Z)(["Remove"])))})})]})}):null]})]})};var AdvancedSearchFields_EncryptedSearchField=({showMore:e,toggleShowMore:t,esState:n})=>{const[r]=(0,bn.ZP)(),{createModal:a}=(0,In.Z)(),{resumeIndexing:o,getESDBStatus:s,pauseIndexing:i,toggleEncryptedSearch:c}=useEncryptedSearchContext(),{isBuilding:l,esEnabled:p,isDBLimited:m,isRefreshing:g}=s(),{esProgress:b,oldestTime:y,totalIndexingMessages:h,estimatedMinutes:I,currentProgressValue:f}=n,M=indexKeyExists(r.ID)&&p&&(!isDBReadyAfterBuilding(r.ID)||g),N=wasIndexingDone(r.ID)&&!g&&m,x=0===I&&(0===h||b!==h),v=g?0:(e=>{const t=ox.Progress(e);if(!t)return 0;const{currentMessages:n,totalMessages:r}=t;return Math.ceil((n||0)/r*100)})(r.ID),w=x?v:f,D=(0,j.jsx)("span",{className:"mr0-5",children:(0,u.c)("Action").t(DJ||(DJ=(0,d.Z)(["Search message content"])))}),S=formatSimpleDate((0,FX.Z)(new Date(y),{days:1})),O=(0,j.jsx)("span",{className:"color-weak mr0-5",children:(0,u.c)("Info").jt(SJ||(SJ=(0,d.Z)(["For messages newer than ",""])),S)});let A=(0,u.c)("Info").t(OJ||(OJ=(0,d.Z)(["Activation in progress"])));wasIndexingDone(r.ID)&&!l&&(A=p?(0,u.c)("Info").t(AJ||(AJ=(0,d.Z)(["Turn off content search. Activation progress won't be lost."]))):(0,u.c)("Info").t(CJ||(CJ=(0,d.Z)(["Turn on to search the content of your messages"]))));const C=indexKeyExists(r.ID)?(0,j.jsx)(ur.Z,{title:A,children:(0,j.jsx)("span",{children:(0,j.jsx)(cm,{id:"es-toggle",className:"mlauto flex-item-noshrink",checked:wasIndexingDone(r.ID)&&p&&!l,onChange:c,disabled:M})})}):(0,j.jsx)(Ea.Z,{onClick:()=>{a((0,j.jsx)(modal_Confirm,{onConfirm:()=>o(),title:(0,u.c)("Title").t(xJ||(xJ=(0,d.Z)(["Enable message content search"]))),confirm:(0,u.c)("Action").t(vJ||(vJ=(0,d.Z)(["Enable"]))),mode:"alert",children:(0,u.c)("Info").t(wJ||(wJ=(0,d.Z)(["This action will download all messages so they can be searched locally. Clearing your browser data will disable this option."])))}))},loading:p&&!l,children:(0,u.c)("Action").t(EJ||(EJ=(0,d.Z)(["Activate"])))}),E=(0,j.jsx)(fc.Z,{questionMark:!0,title:(0,u.c)("Tooltip").t(LJ||(LJ=(0,d.Z)(["This action will download all messages so they can be searched locally. Clearing your browser data will disable this option."])))}),L=indexKeyExists(r.ID)?(0,j.jsxs)(gr.Z,{htmlFor:"es-toggle",className:"text-bold p0 pr1 flex flex-item-fluid flex-align-items-center",children:[D,E]}):(0,j.jsxs)("div",{className:"text-bold p0 pr1 flex flex-item-fluid flex-align-items-center",children:[D,E]}),P=Math.max(b,getESTotal(r.ID));let Z="";Z=ox.Pause(r.ID)?(0,u.c)("Info").t(PJ||(PJ=(0,d.Z)(["Indexing paused"]))):x?(0,u.c)("Info").t(ZJ||(ZJ=(0,d.Z)(["Estimating time remaining..."]))):g?(0,u.c)("Info").t(TJ||(TJ=(0,d.Z)(["Updating message content search..."]))):(0,u.c)("Info").jt(kJ||(kJ=(0,d.Z)(["Downloading message "," out of ",""])),b,P);const T=I<=1?(0,u.c)("Info").t(zJ||(zJ=(0,d.Z)(["Estimated time remaining: Less than a minute"]))):(0,u.c)("Info").ngettext((0,u.msgid)(_J||(_J=(0,d.Z)(["Estimated time remaining: "," minute"])),I),"Estimated time remaining: ".concat(I," minutes"),I),k=(0,j.jsx)(progress_Progress,{value:w||0,"aria-describedby":"timeRemaining",className:(0,ht.dh)(["mt1 mb1 flex-item-fluid",ox.Pause(r.ID)?"progress-bar--disabled":void 0])}),z=wasIndexingDone(r.ID)&&l,_=M&&(!wasIndexingDone(r.ID)||l)&&!g,R=ox.Pause(r.ID)?(0,j.jsx)(Ea.Z,{shape:"solid",color:"norm",className:"ml1 w25",onClick:()=>o(),disabled:z,children:(0,u.c)("Action").t(RJ||(RJ=(0,d.Z)(["Resume"])))}):(0,j.jsx)(Ea.Z,{className:"ml1 w25",onClick:i,disabled:z,children:(0,u.c)("Action").t(GJ||(GJ=(0,d.Z)(["Pause"])))}),G=e?(0,u.c)("Action").t(YJ||(YJ=(0,d.Z)(["Show fewer search options"]))):(0,u.c)("Action").t(UJ||(UJ=(0,d.Z)(["Show more search options"]))),Y=e?(0,u.c)("Action").t(FJ||(FJ=(0,d.Z)(["Fewer search options"]))):(0,u.c)("Action").t(KJ||(KJ=(0,d.Z)(["More search options"]))),U=(0,j.jsx)("div",{className:"flex mb1",children:(0,j.jsx)(Jd.Z,{onClick:t,"aria-expanded":e,title:G,children:Y})});return(0,j.jsxs)("div",{className:"pt1-5",children:[(0,j.jsxs)("div",{className:"flex flex-column",children:[(0,j.jsxs)("div",{className:"flex flex-nowrap mb0-5 flex-align-items-center",children:[L,C]}),N&&O]}),M&&(0,j.jsxs)("div",{className:"mt0-5 flex flex-column",children:[(0,j.jsx)("span",{className:"color-weak relative advanced-search-progress-status mb0-5","aria-live":"polite","aria-atomic":"true",children:Z}),(0,j.jsxs)("div",{className:"flex flex-justify-space-between",children:[k,_&&R]}),(0,j.jsx)("span",{id:"timeRemaining","aria-live":"polite","aria-atomic":"true",className:(0,ht.dh)(["color-weak relative advanced-search-time-remaining mt0-5",x||ox.Pause(r.ID)?"visibility-hidden":void 0]),children:T})]}),(0,j.jsx)("hr",{className:"mt1"}),U]})};function useEncryptedSearchToggleState_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function useEncryptedSearchToggleState_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?useEncryptedSearchToggleState_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):useEncryptedSearchToggleState_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var BJ,WJ,VJ,QJ,HJ,XJ,JJ,qJ,$J,eq,tq,nq,rq,aq,oq,sq,iq,cq,lq,dq,header_useEncryptedSearchToggleState=e=>{const[t]=(0,bn.ZP)(),{getProgressRecorderRef:n,getESDBStatus:r}=useEncryptedSearchContext(),{isBuilding:a,isDBLimited:s,isRefreshing:i}=r(),[c,l]=(0,o.useState)(ve.DJ),d=(0,o.useRef)(new AbortController),setOldestTime=async()=>{if(wasIndexingDone(t.ID)&&s){const e=await getOldestTime(t.ID,1e3);l((t=>useEncryptedSearchToggleState_objectSpread(useEncryptedSearchToggleState_objectSpread({},t),{},{oldestTime:e})))}},startProgress=async()=>{d.current=new AbortController;const[e,r]=n().current;l((t=>useEncryptedSearchToggleState_objectSpread(useEncryptedSearchToggleState_objectSpread({},t),{},{startTime:performance.now(),esPrevProgress:e,totalIndexingMessages:r}))),await(0,Wt.D)(5*M.sh),(async()=>{for(;!d.current.signal.aborted;)l((e=>{const[r,a]=n().current,o=performance.now(),{estimatedMinutes:s,currentProgressValue:i}=estimateIndexingProgress(t.ID,r,a,o,e);return useEncryptedSearchToggleState_objectSpread(useEncryptedSearchToggleState_objectSpread({},e),{},{endTime:o,esProgress:r,totalIndexingMessages:a,estimatedMinutes:s||e.estimatedMinutes,currentProgressValue:i||e.currentProgressValue})})),await(0,Wt.D)(2*M.sh)})()};return(0,o.useEffect)((()=>{e&&setOldestTime()}),[e]),(0,o.useEffect)((()=>{a||i?startProgress():(d.current.abort(),l((()=>ve.DJ))),setOldestTime()}),[a,i]),c};function AdvancedSearchDropdown_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function AdvancedSearchDropdown_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?AdvancedSearchDropdown_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AdvancedSearchDropdown_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const uq=void 0,{ALL_MAIL:pq}=M.C7,mq={keyword:"",labelID:pq,from:[],to:[],attachments:uq,wildcard:undefined,filter:uq},AdvancedSearchDropdown_getRecipients=(e="")=>e.split(",").filter(Xe.H6).map((e=>({Address:e,Name:""}))),formatRecipients=(e=[])=>e.map((({Address:e})=>e)).join(",");var gq,jq,bq,yq,hq,Iq,header_AdvancedSearchDropdown=({keyword:e="",isNarrow:t})=>{const n=(0,s.k6)(),[r]=(0,o.useState)((0,ht.D)("advanced-search-dropdown")),[,a]=useMailSettings(),{anchorRef:i,isOpen:c,toggle:l,close:p}=(0,No.Z)();useClickMailContent((e=>{var t;null!==(t=i.current)&&void 0!==t&&t.contains(e.target)||p()}));const[,m]=useLabels(),[,g]=useFolders(),[h,I]=(0,o.useState)(mq),{state:f,toggle:M}=(0,lr.Z)(!1),[N]=(0,bn.ZP)(),{getESDBStatus:x,cacheIndexedDB:v,closeDropdown:w}=useEncryptedSearchContext(),{isDBLimited:D,dropdownOpened:S}=x(),[{loading:O,feature:A},{loading:C}]=(0,b.Z)([y.P.EnabledEncryptedSearch,y.P.ScheduledSend]),[E]=hooks_useWelcomeFlags(),L=header_useEncryptedSearchToggleState(c),getKeyword=(e,n)=>{if(n)return uq;const r=t?e:keywordToString(e);return r||uq},handleSubmit=(e,t)=>{e.preventDefault(),e.stopPropagation();const{keyword:r,begin:a,end:o,wildcard:s,from:i,to:c,attachments:l,filter:d}=t?mq:h;n.push((0,De.Nv)("/".concat(getHumanLabelID(h.labelID)),n.location.hash,{keyword:getKeyword(r,t),from:i.length?formatRecipients(i):uq,to:c.length?formatRecipients(c):uq,begin:a?String((0,mS.Z)(a)):uq,end:o?String((0,mS.Z)((0,FX.Z)(o,{days:1}))):uq,attachments:"number"==typeof l?String(l):uq,wildcard:s?String(s):uq,filter:d,sort:uq,page:uq})),p()};(0,o.useEffect)((()=>{c?I((()=>{const{keyword:t,address:r,attachments:a,wildcard:o,from:s,to:i,begin:c,end:l}=extractSearchParameters(n.location),{filter:d}=(0,De.Qw)(n.location.search);return AdvancedSearchDropdown_objectSpread(AdvancedSearchDropdown_objectSpread({},mq),{},{keyword:t||e||"",address:r,attachments:a,wildcard:o,from:AdvancedSearchDropdown_getRecipients(s),to:AdvancedSearchDropdown_getRecipients(i),begin:c?(0,vh.Z)(c):uq,end:l?(0,Vc.Z)((0,vh.Z)(l),{days:1}):uq,filter:d})})):w()}),[c]),(0,o.useEffect)((()=>{S&&l()}),[S]);const P=m||g||a||O||C,Z=!((0,mr.tq)()||!A||!A.Value||!(0,Tn.Om)(N)),T=!Z||f,k={ref:i,isOpen:c,hasCaret:!1,disabled:P,onClick:()=>{v(),l()}},{show:z,onDisplayed:_}=hooks_useSpotlightOnFeature(y.P.SpotlightEncryptedSearch,Z&&!E.isWelcomeFlow&&!c);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(spotlight_Spotlight,{originalPlacement:"bottom-left",show:z,onDisplayed:_,anchorRef:i,content:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:"text-bold text-lg mauto",children:(0,u.c)("Spotlight").t(BJ||(BJ=(0,d.Z)(["Message Content Search"])))}),(0,u.c)("Spotlight").t(WJ||(WJ=(0,d.Z)(["You can now search the content of your encrypted emails."]))),(0,j.jsx)("br",{}),(0,j.jsx)(Tu.Z,{url:"https://protonmail.com/support/knowledge-base/search-message-content/",title:"Message Content Search",children:(0,u.c)("Info").t(VJ||(VJ=(0,d.Z)(["Learn more"])))})]}),children:t?(0,j.jsx)(fo.Z,AdvancedSearchDropdown_objectSpread({as:WX},k)):(0,j.jsx)(fo.Z,AdvancedSearchDropdown_objectSpread(AdvancedSearchDropdown_objectSpread({as:Ea.Z,icon:!0,shape:"ghost",color:"weak",className:"searchbox-advanced-search-button flex"},k),{},{children:(0,j.jsx)(pr.Z,{name:"angle-down",className:(0,ht.dh)(["searchbox-advanced-search-icon mauto",c&&"rotateX-180"]),alt:(0,u.c)("Action").t(QJ||(QJ=(0,d.Z)(["Advanced search"])))})}))}),(0,j.jsx)(Mo.Z,{id:r,originalPlacement:"bottom-right",autoClose:!1,autoCloseOutside:!1,isOpen:c,noMaxSize:!0,anchorRef:i,onClose:p,className:"dropdown-content--wide advanced-search-dropdown",disableDefaultArrowNavigation:!0,UNSTABLE_AUTO_HEIGHT:!0,children:(0,j.jsxs)("form",{name:"advanced-search",className:"pl1-5 pr1-5 pt1 pb1",onSubmit:handleSubmit,onReset:e=>handleSubmit(e,!0),children:[!Z&&(0,j.jsx)(AdvancedSearchFields_SearchField,{value:h.keyword,onChange:({target:e})=>I(AdvancedSearchDropdown_objectSpread(AdvancedSearchDropdown_objectSpread({},h),{},{keyword:e.value})),onSubmit:handleSubmit,showEncryptedSearch:Z}),Z&&(0,j.jsx)(AdvancedSearchFields_EncryptedSearchField,{esState:L,showMore:f,toggleShowMore:M}),T&&(0,j.jsxs)(j.Fragment,{children:[Z&&(0,j.jsx)(AdvancedSearchFields_SearchField,{value:h.keyword,onChange:({target:e})=>I(AdvancedSearchDropdown_objectSpread(AdvancedSearchDropdown_objectSpread({},h),{},{keyword:e.value})),onSubmit:handleSubmit,showEncryptedSearch:Z}),(0,j.jsx)("div",{className:"mb0-5",children:(0,j.jsx)(AdvancedSearchFields_LocationField,{value:h.labelID,onChange:e=>I(AdvancedSearchDropdown_objectSpread(AdvancedSearchDropdown_objectSpread({},h),{},{labelID:e}))})}),(0,j.jsxs)("div",{className:"mb0-5 flex flex-justify-space-between on-mobile-flex-column",children:[(0,j.jsxs)("div",{className:"pr1 on-mobile-pr0 flex-item-fluid",children:[(0,j.jsx)(gr.Z,{className:"advanced-search-label text-semibold",htmlFor:"begin-date",children:(0,u.c)("Label").t(HJ||(HJ=(0,d.Z)(["From"])))}),(0,j.jsx)(input_DateInput,{placeholder:(0,u.c)("Placeholder").t(XJ||(XJ=(0,d.Z)(["Start date"]))),id:"begin-date",value:h.begin,onChange:async e=>{if(e){let t=-1;if(wasIndexingDone(N.ID)&&D&&(t=await getOldestTime(N.ID,1e3)),-1!==t&&(0,rl.Z)(e,t))return}h.end&&!(0,rl.Z)(e||-1/0,h.end)||I(AdvancedSearchDropdown_objectSpread(AdvancedSearchDropdown_objectSpread({},h),{},{begin:e}))}})]}),(0,j.jsxs)("div",{className:"flex-item-fluid",children:[(0,j.jsx)(gr.Z,{className:"advanced-search-label text-semibold",htmlFor:"end-date",children:(0,u.c)("Label").t(JJ||(JJ=(0,d.Z)(["To"])))}),(0,j.jsx)(input_DateInput,{placeholder:(0,u.c)("Placeholder").t(qJ||(qJ=(0,d.Z)(["End date"]))),id:"end-date",value:h.end,onChange:e=>(!h.begin||(0,Bc.Z)(e||1/0,h.begin))&&I(AdvancedSearchDropdown_objectSpread(AdvancedSearchDropdown_objectSpread({},h),{},{end:e}))})]})]}),(0,j.jsxs)("div",{className:"mb0-5",children:[(0,j.jsx)(gr.Z,{title:(0,u.c)("Label").t($J||($J=(0,d.Z)(["Sender"]))),className:"advanced-search-label text-semibold",htmlFor:"from",children:(0,u.c)("Label").t(eq||(eq=(0,d.Z)(["Sender"])))}),(0,j.jsx)(addresses_AddressesInput,{id:"from",recipients:h.from,onChange:e=>I(AdvancedSearchDropdown_objectSpread(AdvancedSearchDropdown_objectSpread({},h),{},{from:e})),placeholder:(0,u.c)("Placeholder").t(tq||(tq=(0,d.Z)(["Name or email address"])))})]}),(0,j.jsxs)("div",{className:"mb0-5",children:[(0,j.jsx)(gr.Z,{title:(0,u.c)("Label").t(nq||(nq=(0,d.Z)(["Recipient"]))),className:"advanced-search-label text-semibold",htmlFor:"to",children:(0,u.c)("Label").t(rq||(rq=(0,d.Z)(["Recipient"])))}),(0,j.jsx)(addresses_AddressesInput,{id:"to",recipients:h.to,onChange:e=>I(AdvancedSearchDropdown_objectSpread(AdvancedSearchDropdown_objectSpread({},h),{},{to:e})),placeholder:(0,u.c)("Placeholder").t(aq||(aq=(0,d.Z)(["Name or email address"])))})]}),(0,j.jsxs)("div",{className:"mb1-5",children:[(0,j.jsx)(gr.Z,{className:"advanced-search-label text-semibold",id:"advanced-search-attachments-label",children:(0,u.c)("Label").t(oq||(oq=(0,d.Z)(["Attachments"])))}),(0,j.jsxs)("div",{className:"pt0-5",children:[(0,j.jsx)(input_Radio,{id:"advanced-search-attachments-all",onChange:()=>I(AdvancedSearchDropdown_objectSpread(AdvancedSearchDropdown_objectSpread({},h),{},{attachments:uq})),checked:h.attachments===uq,name:"advanced-search-attachments","aria-describedby":"advanced-search-attachments-label",className:"inline-flex mr1",children:(0,u.c)("Attachment radio advanced search").t(sq||(sq=(0,d.Z)(["All"])))}),(0,j.jsx)(input_Radio,{id:"advanced-search-attachments-yes",onChange:()=>I(AdvancedSearchDropdown_objectSpread(AdvancedSearchDropdown_objectSpread({},h),{},{attachments:1})),checked:1===h.attachments,name:"advanced-search-attachments","aria-describedby":"advanced-search-attachments-label",className:"inline-flex mr1",children:(0,u.c)("Attachment radio advanced search").t(iq||(iq=(0,d.Z)(["With"])))}),(0,j.jsx)(input_Radio,{id:"advanced-search-attachments-no",onChange:()=>I(AdvancedSearchDropdown_objectSpread(AdvancedSearchDropdown_objectSpread({},h),{},{attachments:0})),checked:0===h.attachments,name:"advanced-search-attachments","aria-describedby":"advanced-search-attachments-label",children:(0,u.c)("Attachment radio advanced search").t(cq||(cq=(0,d.Z)(["Without"])))})]})]}),(0,j.jsxs)("div",{className:"flex flex-justify-space-between",children:[(0,j.jsx)(Ea.Z,{disabled:!Object.keys(h).length,type:"reset",children:(0,u.c)("Action").t(lq||(lq=(0,d.Z)(["Clear"])))}),(0,j.jsx)(yr.Z,{type:"submit",children:(0,u.c)("Action").t(dq||(dq=(0,d.Z)(["Search"])))})]})]})]})})]})};const MailHeader=({labelID:e,elementID:t,breakpoints:n,expanded:r,onToggleExpand:a,onSearch:i})=>{const c=(0,s.TH)(),{keyword:l=""}=extractSearchParameters(c),[p,m]=(0,o.useState)(l),g=(0,o.useRef)(M.C7.INBOX),[b=[]]=useLabels(),[y=[]]=useFolders(),{cacheIndexedDB:h,getESDBStatus:I,esDelete:f}=useEncryptedSearchContext(),{dbExists:N,esEnabled:x}=I(),{createModal:v}=(0,In.Z)(),w=useOnCompose(),D=useOnMailTo();(0,o.useEffect)((()=>m(l)),[l]);const S=(0,j.jsx)(header_AdvancedSearchDropdown,{keyword:p,isNarrow:n.isNarrow}),O=(0,j.jsx)(search_Searchbox,{delay:0,placeholder:(0,u.c)("Placeholder").t(gq||(gq=(0,d.Z)(["Search messages"]))),onSearch:t=>{t&&(g.current=e),i(t,t?void 0:g.current)},onChange:m,value:p,advanced:S,onFocus:()=>h()}),A=((e,t)=>getUrlPathname(t)+e.search)(c,{labelID:e}),C=n.isNarrow&&t,E=getLabelName(e,b,y),L=(0,j.jsx)(logo_MainLogo,{to:"/inbox"}),P=N||x?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("hr",{className:"mt0-5 mb0-5"}),(0,j.jsx)(ur.Z,{title:(0,u.c)("Info").t(hq||(hq=(0,d.Z)(["Clears browser data related to message content search including downloaded messages"]))),children:(0,j.jsx)(Do.Z,{onClick:()=>{v((0,j.jsx)(modal_Confirm,{onConfirm:f,title:(0,u.c)("Info").t(jq||(jq=(0,d.Z)(["Disable message content search"]))),confirm:(0,u.c)("Info").t(bq||(bq=(0,d.Z)(["Clear data"]))),mode:"alert",children:(0,u.c)("Info").t(yq||(yq=(0,d.Z)(["Clearing browser data also deactivates message content search on this device. All messages will need to be downloaded again to search within them."])))}))},className:"flex flex-nowrap flex-justify-center",children:(0,j.jsx)("span",{className:"color-weak",children:(0,u.c)("Action").t(Iq||(Iq=(0,d.Z)(["Clear browser data"])))})})})]}):null;return(0,j.jsx)(heading_PrivateHeader,{logo:L,backUrl:C&&A?A:void 0,title:E,settingsButton:(0,j.jsx)(heading_TopNavbarListItemSettingsDropdown,{to:"/mail",toApp:M.ei.PROTONACCOUNT,children:P}),contactsButton:(0,j.jsx)(widget_TopNavbarListItemContactsDropdown,{onCompose:(e,t)=>{w({action:ve.Xh.NEW,referenceMessage:{data:{ToList:e},initialAttachments:t}})},onMailTo:D}),searchBox:O,searchDropdown:S,expanded:!!r,onToggleExpand:a,isNarrow:n.isNarrow,floatingButton:(0,j.jsx)(UX,{onClick:()=>w({action:ve.Xh.NEW}),children:(0,j.jsx)(pr.Z,{size:24,name:"pen",className:"mauto"})})})};var fq=(0,o.memo)(MailHeader);const Mq=["children","className"];function SidebarPrimaryButton_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SidebarPrimaryButton_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SidebarPrimaryButton_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SidebarPrimaryButton_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const SidebarPrimaryButton=(e,t)=>{let{children:n,className:r=""}=e,a=(0,Sn.Z)(e,Mq);return(0,j.jsx)(Ea.Z,SidebarPrimaryButton_objectSpread(SidebarPrimaryButton_objectSpread({color:"norm",size:"large",className:(0,ht.dh)(["text-bold mt0-25 w100",r]),ref:t},a),{},{children:n}))};var Nq=(0,o.forwardRef)(SidebarPrimaryButton);var helpers_isBetween=(e,t,n)=>e>=t&&e<n;const xq=["thin","squared","label","min","max","value","id","className"];function Meter_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Meter_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Meter_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Meter_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let vq;!function(e){e[e.Optimum=0]="Optimum",e[e.Min=0]="Min",e[e.Low=50]="Low",e[e.High=80]="High",e[e.Max=100]="Max"}(vq||(vq={}));const{Optimum:wq,Min:Dq,Low:Sq,High:Oq,Max:Aq}=vq,getMeterColor=(e,t=wq,n=Dq,r=Sq,a=Oq,o=Aq)=>{const s=helpers_isBetween(e,n,r),i=helpers_isBetween(e,r,a),c=helpers_isBetween(e,a,o)||e>=o;if(helpers_isBetween(t,n,r)){if(c)return"danger";if(i)return"warning";if(s)return"success"}if(helpers_isBetween(t,r,a)){if(c)return"warning";if(i)return"success";if(s)return"warning"}if(helpers_isBetween(t,a,o)||t===o){if(c)return"success";if(i)return"warning";if(s)return"danger"}return console.error("Misuse of getMeterColor, verify values provided for value (".concat(e,"), optimum (").concat(t,"), min (").concat(n,"), max (").concat(o,"), low (").concat(r,"), high (").concat(a,")")),"danger"};var progress_Meter=e=>{let{thin:t=!1,squared:n=!1,label:r,min:a=Dq,max:o=Aq,value:s=0,id:i,className:c}=e,l=(0,Sn.Z)(e,xq);return(0,j.jsx)("div",Meter_objectSpread(Meter_objectSpread({id:i,className:(0,ht.dh)(["meter-bar",t&&"is-thin",n&&"is-squared",c]),role:"meter","aria-valuemin":a,"aria-valuemax":o,"aria-valuenow":s},l),{},{children:(0,j.jsx)("div",{className:(0,ht.dh)(["meter-bar-thumb w-custom","bg-".concat(getMeterColor(s)),"mrauto"]),style:{"--width-custom":"".concat(Math.ceil(s),"%")},children:!l["aria-labelledby"]&&(0,j.jsx)("span",{className:"sr-only",children:r||"".concat(s," / ").concat(o)})})}))};var sidebar_MobileNavServices=({children:e})=>{const{isNarrow:t}=hooks_useActiveBreakpoint(),{APP_NAME:n}=(0,Nn.Z)();return t&&n!==M.ei.PROTONVPN_SETTINGS?(0,j.jsx)("nav",{className:"p1 flex flex-row flex-justify-space-around flex-item-noshrink bg-norm",children:e}):null};const Cq=["icon","current"];function MobileNavLink_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function MobileNavLink_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MobileNavLink_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MobileNavLink_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var sidebar_MobileNavLink=e=>{let{icon:t="",current:n=!1}=e,r=(0,Sn.Z)(e,Cq);return(0,j.jsx)(dw.Z,MobileNavLink_objectSpread(MobileNavLink_objectSpread({"aria-current":n,className:"flex aside-link"},r),{},{children:(0,j.jsx)(pr.Z,{name:t,className:"aside-link-icon mauto"})}))};var Eq,Lq,sidebar_MobileAppsLinks=()=>{const{APP_NAME:e}=(0,Nn.Z)(),t=hooks_useApps().map((e=>({toApp:e,icon:M.mN[e].icon,title:M.mN[e].name})));return(0,j.jsxs)(sidebar_MobileNavServices,{children:[t.map((({toApp:t,icon:n},r)=>{const a=t===e;return(0,j.jsx)(sidebar_MobileNavLink,{to:"/",toApp:t,icon:n,current:a},r)})),(0,j.jsx)(Tu.Z,{url:"https://".concat(M.Rc,"/login"),className:"flex aside-link",children:(0,j.jsx)(pr.Z,{name:"brand-proton-vpn",className:"aside-link-icon mauto"})})]})};const Pq=["expanded","onToggleExpand","hasAppLinks","logo","primary","children","version","storageGift"];function Sidebar_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sidebar_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sidebar_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sidebar_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var sidebar_Sidebar=e=>{let{expanded:t=!1,onToggleExpand:n,hasAppLinks:r=!0,logo:a,primary:s,children:i,version:c,storageGift:l}=e,p=(0,Sn.Z)(e,Pq);const m=(0,o.useRef)(null),g=(0,AI.Z)({active:t,rootRef:m}),{APP_NAME:b}=(0,Nn.Z)(),[y]=(0,bn.ZP)(),[h]=hooks_useSubscription(),{UsedSpace:I,MaxSpace:f,isMember:N,isSubUser:x}=y,v=function percentage(e,t){return e&&t?t/e*100:0}(f,I),w=(0,o.useMemo)((()=>!!h&&(!x&&(!N&&(!hasVisionary(h)&&!hasMailProfessional(h))))),[h,y]),D=(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("span",{className:(0,ht.dh)(["used-space text-bold","color-".concat(getMeterColor(v))]),children:helpers_humanSize(I)})," / ",(0,j.jsx)("span",{className:"max-space",children:helpers_humanSize(f)})]});return(0,j.jsxs)("div",Sidebar_objectSpread(Sidebar_objectSpread(Sidebar_objectSpread({ref:m,className:"sidebar flex flex-nowrap flex-column no-print no-outline","data-expanded":t},p),g),{},{children:[(0,j.jsx)("div",{className:"no-desktop no-tablet flex-item-noshrink",children:(0,j.jsxs)("div",{className:"flex flex-justify-space-between flex-align-items-center pl1 pr1",children:[a,(0,j.jsx)(sidebar_Hamburger,{expanded:t,onToggle:n})]})}),s?(0,j.jsx)("div",{className:"pl1 pr1 pb1 flex-item-noshrink",children:s}):null,(0,j.jsx)("div",{className:"on-mobile-mt1","aria-hidden":"true"}),(0,j.jsx)("div",{className:"flex-item-fluid flex-nowrap flex flex-column scroll-if-needed pb1",children:i}),b!==M.ei.PROTONVPN_SETTINGS?(0,j.jsxs)("div",{className:"app-infos",children:[(0,j.jsx)(progress_Meter,{thin:!0,squared:!0,label:"".concat((0,u.c)("Storage").t(Eq||(Eq=(0,d.Z)(["Your current storage:"])))," ").concat(helpers_humanSize(I)," / ").concat(helpers_humanSize(f)),value:Math.ceil(v)}),(0,j.jsxs)("div",{className:"flex flex-nowrap flex-justify-space-between pt0-5 pr1-5 pb0-5 pl1-5",children:[(0,j.jsxs)("span",{children:[w?(0,j.jsx)(ur.Z,{title:(0,u.c)("Storage").t(Lq||(Lq=(0,d.Z)(["Upgrade storage"]))),children:(0,j.jsx)(sh.Z,{path:"/dashboard",className:"app-infos-storage text-no-decoration text-xs m0",children:D})}):(0,j.jsx)("span",{className:"app-infos-storage text-xs m0",children:D}),l]}),(0,j.jsx)("span",{className:"app-infos-compact",children:c})]})]}):(0,j.jsx)("div",{className:"border-top",children:(0,j.jsx)("div",{className:"text-center pt0-5 pr1 pb0-5 pl1",children:c})}),r?(0,j.jsx)(sidebar_MobileAppsLinks,{}):null]}))};const Zq=["children","className"];function SidebarNav_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SidebarNav_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SidebarNav_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SidebarNav_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var sidebar_SidebarNav=e=>{let{children:t,className:n}=e,r=(0,Sn.Z)(e,Zq);return(0,j.jsx)("nav",SidebarNav_objectSpread(SidebarNav_objectSpread({className:(0,ht.dh)(["navigation max-w100 flex-item-fluid-auto",n])},r),{},{children:t}))},Tq=n(23021),kq=n(52483);let zq;!function(e){e.SendMessage="SendMessage",e.MobileApp="MobileApp",e.RecoveryMethod="RecoveryMethod",e.Import="Import"}(zq||(zq={}));var checklist_ChecklistItem=({icon:e,text:t,complete:n,onClick:r})=>{const a=(0,ht.dh)(["checklist-item_root","mb1",n?"text-strike color-weak":"checklist-item_root--incomplete"]),o=(0,ht.dh)(["mt0-25 mr1-5 flex-item-noshrink",n?"color-success":"color-primary"]),s=(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(pr.Z,{className:o,name:n?"check":e}),(0,j.jsxs)("span",{children:[(0,j.jsx)("span",{className:"mr1",children:t}),!n&&(0,j.jsx)(pr.Z,{className:"rotateZ-270",size:12,name:"angle-down"})]})]});return n?(0,j.jsx)("li",{className:a,children:(0,j.jsx)("span",{className:"flex flex-nowrap flex-align-items-start text-left w100",children:s})}):(0,j.jsx)("li",{className:a,children:(0,j.jsx)("button",{onClick:r,type:"button",className:"flex flex-nowrap flex-align-items-start text-left w100",children:s})})},_q=n(39940);const Rq=M.sh;var countdown_Countdown=({start:e,end:t,render:n})=>{const[r,a]=(0,o.useState)((()=>new Date));if((0,o.useEffect)((()=>{const e=setInterval((()=>{a(new Date)}),Rq);return()=>{clearInterval(e)}}),[]),e&&(0,rl.Z)(r,e))return null;const s=(0,_q.Z)(t,r),i=s<0,c=Math.abs(s);return n({expired:i,diff:s,days:Math.floor(c/M.x4),hours:Math.floor(c%M.x4/M.kr),minutes:Math.floor(c%M.kr/M.EB),seconds:Math.floor(c%M.EB/M.sh)})};var Gq=n(61866);function GetStartedChecklistProvider_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function GetStartedChecklistProvider_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?GetStartedChecklistProvider_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GetStartedChecklistProvider_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Yq="GET_STARTED_CHECKLIST_DISMISSED_STORAGE_KEY",Uq=(0,o.createContext)({});var containers_GetStartedChecklistProvider=({children:e})=>{const[t,n]=(0,o.useState)({Items:[],CreatedAt:0}),[r]=(0,Dr.Z)(),[a,s]=(0,no.Z)(),{subscribe:i}=(0,Ie.Z)(),c=(0,Dn.Z)(),[l,d]=(0,o.useState)((()=>JSON.parse(Gq.rV(Yq)||JSON.stringify(!1))));(0,o.useEffect)((()=>{var e,t;null!==(e=r.Checklists)&&void 0!==e&&e.includes("get-started")&&s(c((t="get-started",{method:"get",url:"core/v4/checklist/".concat(t)})).then(n));const a=i((({Checklist:e})=>{null==e||e.forEach((({CompletedItem:e})=>{n((t=>GetStartedChecklistProvider_objectSpread(GetStartedChecklistProvider_objectSpread({},t),{},{Items:[...t.Items,e]})))}))}));return()=>{a()}}),[r]);const u={loading:a,checklist:t.Items,expires:(0,Rc.Z)((0,vh.Z)(t.CreatedAt),30),dismissed:l,handleDismiss:()=>{d(!0),Gq.LS(Yq,JSON.stringify(!0))}};return(0,j.jsx)(Uq.Provider,{value:u,children:e})};const Fq=["key"];var Kq,Bq,Wq,Vq,Qq,Hq,Xq,Jq,qq,$q,e$,t$,n$,r$,a$;function GetStartedChecklist_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function GetStartedChecklist_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?GetStartedChecklist_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GetStartedChecklist_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const GetStartedChecklistComplete=()=>{const e=(0,Dn.Z)();return(0,o.useEffect)((()=>{e(GetStartedChecklist_objectSpread(GetStartedChecklist_objectSpread({},{method:"post",url:"core/v4/checklist/".concat("get-started","/seen-completed-list")}),{},{silence:!0}))}),[]),(0,j.jsxs)("div",{className:"p1 text-center",children:[(0,j.jsx)("img",{className:"mb1-5 mt1-5",src:Tq,width:48}),(0,j.jsx)("p",{className:"h3 mb0 text-bold",children:(0,u.c)("Get started checklist completion").t(Kq||(Kq=(0,d.Z)(["You're all set!"])))}),(0,j.jsx)("p",{className:"color-weak mt0-5 mb1-5",children:(0,j.jsx)("span",{className:"get-started_completion-text inline-block",children:(0,u.c)("Get started checklist completion").t(Bq||(Bq=(0,d.Z)(["We've increased the total storage of your account to "," GB. Get additional storage and unlock premium features today."])),1)})}),(0,j.jsx)(VI.Z,{className:"inline-flex flex-align-items-center",shape:"outline",as:sh.Z,app:M.ei.PROTONMAIL,path:"/",children:(0,u.c)("Action").t(Wq||(Wq=(0,d.Z)(["Upgrade now"])))})]})};var o$,s$,i$,c$,checklist_GetStartedChecklist=({hideDismissButton:e,limitedMaxWidth:t,onDismiss:n,onItemSelection:r})=>{const{expires:a,checklist:s,loading:i}=(0,o.useContext)(Uq),c=[{key:zq.Import,text:(0,u.c)("Get started checklist item").t(Vq||(Vq=(0,d.Z)(["Import contacts or emails"]))),icon:"arrow-down-to-screen"},{key:zq.SendMessage,text:(0,u.c)("Get started checklist item").t(Qq||(Qq=(0,d.Z)(["Send a message"]))),icon:"paper-plane"},{key:zq.RecoveryMethod,text:(0,u.c)("Get started checklist item").t(Hq||(Hq=(0,d.Z)(["Set up a recovery method"]))),icon:"lock"},{key:zq.MobileApp,text:(0,u.c)("Get started checklist item").t(Xq||(Xq=(0,d.Z)(["Get mobile app"]))),icon:"mobile"}].filter(Za.Z).map((e=>{let{key:t}=e,n=(0,Sn.Z)(e,Fq);return GetStartedChecklist_objectSpread({key:t,complete:s.includes(t),onClick:r(t)},n)})),l=s.length;if(i)return(0,j.jsx)("div",{className:"p1 mauto",children:(0,j.jsx)(Yu.Z,{})});if(c.every((({complete:e})=>e)))return(0,j.jsx)(GetStartedChecklistComplete,{});const{length:p}=c;return(0,j.jsxs)("div",{className:(0,ht.dh)(["p1",t&&"get-started_root--limited-width mauto"]),children:[(0,j.jsxs)("div",{className:"flex flex-align-items-center flex-justify-space-between",children:[(0,j.jsxs)("span",{className:(0,ht.dh)(["flex flex-align-items-center",e?"w100":"w80"]),children:[(0,j.jsx)("span",{className:"get-started_gift mr1",children:(0,j.jsx)("img",{src:Tq,alt:""})}),(0,j.jsxs)("span",{className:"flex-item-fluid text-bold text-ellipsis",children:[(0,j.jsx)("span",{className:"no-mobile",children:(0,u.c)("Get started checklist title").t(Jq||(Jq=(0,d.Z)(["Get started"])))}),(0,j.jsx)("span",{className:"no-tablet no-desktop",children:(0,u.c)("Get started checklist title").t(qq||(qq=(0,d.Z)(["Get started"])))})]}),(0,j.jsx)("span",{className:"flex-justify-end",children:(0,u.c)("Amount of completed get started checklist items").t($q||($q=(0,d.Z)([""," of "," complete"])),l,p)})]}),!e&&(0,j.jsx)("div",{className:"pl1",children:(0,j.jsx)(Ea.Z,{icon:!0,shape:"ghost",onClick:n,children:(0,j.jsx)(pr.Z,{name:"xmark",size:12,alt:(0,u.c)("Action").t(e$||(e$=(0,d.Z)(["Dismiss get started checklist"])))})})})]}),(0,j.jsx)("div",{className:(0,ht.dh)(["ml0-5",e?"w100":"w80"]),children:(0,j.jsx)(progress_Progress,{className:"progress-bar--success",value:l,max:p})}),(0,j.jsx)("ul",{className:"unstyled ml0-5",children:c.sort((({complete:e},{complete:t})=>Number(e)-Number(t))).map((({key:e,text:t,icon:n,onClick:r})=>(0,j.jsx)(checklist_ChecklistItem,{text:t,icon:n,complete:s.includes(e),onClick:r},e)))}),(0,j.jsx)("hr",{}),(0,j.jsx)("div",{className:"flex",children:(0,j.jsx)("div",{className:"text-bold",children:(0,u.c)("Get started checklist incentive").t(t$||(t$=(0,d.Z)(["Complete all steps and get a total of "," GB on your account"])),1)})}),(0,j.jsx)("div",{children:(0,j.jsx)(countdown_Countdown,{end:a,render:({expired:e,days:t})=>(0,j.jsx)("div",{className:"color-weak",children:e?(0,u.c)("Get started checklist incentive").t(n$||(n$=(0,d.Z)(["Expires soon"]))):t>0?(0,u.c)("Get started checklist incentive").ngettext((0,u.msgid)(r$||(r$=(0,d.Z)(["Only "," day left"])),t),"Only ".concat(t," days left"),t):(0,u.c)("Get started checklist incentive").t(a$||(a$=(0,d.Z)(["Expires today"])))})})})]})};const l$=["onClose"];function ModalGetMobileApp_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ModalGetMobileApp_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ModalGetMobileApp_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ModalGetMobileApp_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const d$=(0,Or.PO)(M.ei.PROTONMAIL);var u$,p$,m$,g$,checklist_ModalGetMobileApp=e=>{let{onClose:t}=e,n=(0,Sn.Z)(e,l$);return(0,j.jsxs)(yg.Z,ModalGetMobileApp_objectSpread(ModalGetMobileApp_objectSpread({intermediate:!0,onClose:t},n),{},{children:[(0,j.jsx)(kq.Z,{onClose:t}),(0,j.jsxs)(Ig.Z,{className:"modal-content pb2 pt2 text-center",children:[(0,j.jsx)("h1",{className:"mb0-5 text-2xl text-bold",children:(0,u.c)("Get started checklist instructions").t(o$||(o$=(0,d.Z)(["Get the "," mobile app"])),d$)}),(0,j.jsx)("div",{className:"mb2 ",children:(0,u.c)("Get started checklist instructions").t(s$||(s$=(0,d.Z)(["Available on iOS and Android."])))}),(0,j.jsx)("div",{className:" mb2",children:(0,j.jsx)(YZ,{value:"https://pm.me/app?type=qr",size:200})}),(0,j.jsx)("div",{className:"mb1",children:(0,u.c)("Get started checklist instructions").t(i$||(i$=(0,d.Z)(["Using your mobile device, scan this QR code or visit"])))}),(0,j.jsx)("div",{className:"text-2xl text-bold",children:(0,j.jsx)(Tu.Z,{href:"https://pm.me/app",children:"pm.me/app"})}),(0,j.jsx)("p",{children:(0,u.c)("Get started checklist instructions").t(c$||(c$=(0,d.Z)(["Sign into the mobile app to complete the action"])))})]})]}))};const j$=["onClose"];function ModalImportEmails_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ModalImportEmails_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ModalImportEmails_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ModalImportEmails_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var checklist_ModalImportEmails=e=>{var t;let{onClose:n}=e,r=(0,Sn.Z)(e,j$);const a=null===(t=(0,nN.Z)(y.P.EasySwitch).feature)||void 0===t?void 0:t.Value;return(0,j.jsxs)(yg.Z,ModalImportEmails_objectSpread(ModalImportEmails_objectSpread({intermediate:!0,onClose:!0},r),{},{children:[(0,j.jsx)(kq.Z,{onClose:n}),(0,j.jsxs)(Ig.Z,{className:"modal-content pb2 pt2 text-center",children:[(0,j.jsx)("div",{className:"mlauto mrauto",children:(0,j.jsx)("img",{src:qH,alt:(0,u.c)("Get started checklist instructions").t(u$||(u$=(0,d.Z)(["Import your contacts or messages"])))})}),(0,j.jsx)("h1",{className:"mb0-5 text-2xl text-bold",children:(0,u.c)("Get started checklist instructions").t(p$||(p$=(0,d.Z)(["Import your contacts or messages"])))}),(0,j.jsx)("p",{className:"mb2",children:(0,u.c)("Get started checklist instructions").t(m$||(m$=(0,d.Z)(["Quickly transfer your contacts or emails from any provider using our Easy Switch import assistant."])))}),(0,j.jsx)(VI.Z,{fullWidth:!0,color:"norm",as:sh.Z,app:M.ei.PROTONMAIL,path:a?"/easy-switch":"/import-export",rel:"noopener noreferrer",target:"_blank",children:(0,u.c)("Get started checklist instructions").t(g$||(g$=(0,d.Z)(["Import contacts or emails"])))})]})]}))};const b$=["onClose","onSendMessage"];function GetStartedChecklistModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function GetStartedChecklistModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?GetStartedChecklistModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GetStartedChecklistModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var GetStartedChecklistModal=e=>{let{onClose:t,onSendMessage:n}=e,r=(0,Sn.Z)(e,b$);const{createModal:a}=(0,In.Z)(),[o]=hooks_useIsMnemonicAvailable(),s=link_useSettingsLink();return(0,j.jsxs)(yg.Z,GetStartedChecklistModal_objectSpread(GetStartedChecklistModal_objectSpread({intermediate:!0,onClose:t},r),{},{children:[(0,j.jsx)(kq.Z,{onClose:t}),(0,j.jsx)(Ig.Z,{className:"modal-content pb2 pt2",children:(0,j.jsx)(checklist_GetStartedChecklist,{hideDismissButton:!0,onItemSelection:e=>()=>{switch(null==t||t(),e){case zq.SendMessage:n();break;case zq.MobileApp:a((0,j.jsx)(checklist_ModalGetMobileApp,{}));break;case zq.RecoveryMethod:o?a((0,j.jsx)(mnemonic_MnemonicPromptModal,{})):s("/recovery",void 0,!0);break;case zq.Import:a((0,j.jsx)(checklist_ModalImportEmails,{}))}}})})]}))};const y$=["className","listClassName","children"];function SidebarList_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SidebarList_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SidebarList_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SidebarList_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const SidebarList=e=>{let{className:t,listClassName:n="navigation-list",children:r}=e,a=(0,Sn.Z)(e,y$);return(0,j.jsx)("ul",SidebarList_objectSpread(SidebarList_objectSpread({className:(0,ht.dh)(["unstyled mt0",n,t])},a),{},{children:r}))};var h$=SidebarList;const I$=["className","itemClassName","children"];function SidebarListItem_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SidebarListItem_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SidebarListItem_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SidebarListItem_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const SidebarListItem=e=>{let{className:t="",itemClassName:n="navigation-item",children:r}=e,a=(0,Sn.Z)(e,I$);return(0,j.jsx)("li",SidebarListItem_objectSpread(SidebarListItem_objectSpread({className:(0,ht.dh)([n,t])},a),{},{children:r}))};var f$=SidebarListItem;var sidebar_SimpleSidebarListItemHeader=({toggle:e,onToggle:t,hasCaret:n=!0,right:r,text:a,id:s,title:i,onFocus:l=c.ZT})=>{const d=(0,o.useRef)(null),u=[["ArrowRight",e=>{e.stopPropagation(),t(!0)}],["ArrowLeft",()=>{t(!1)}]];return(0,Co.y)(d,u),(0,j.jsx)(f$,{className:"navigation-link-header-group",children:(0,j.jsxs)("div",{className:"flex flex-nowrap",children:[(0,j.jsxs)("button",{ref:d,className:"text-uppercase flex-item-fluid text-left navigation-link-header-group-link",type:"button",onClick:()=>t(!e),title:i,"aria-expanded":e,onFocus:()=>l(s||""),"data-shortcut-target":s,children:[(0,j.jsx)("span",{className:"mr0-5 text-sm",children:a}),n&&(0,j.jsx)(pr.Z,{name:"angle-down",className:(0,ht.dh)(["navigation-icon--expand",e&&"rotateX-180"])})]}),r]})})};const M$=["info","icon"];function SidebarListItemHeaderLink_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SidebarListItemHeaderLink_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SidebarListItemHeaderLink_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SidebarListItemHeaderLink_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const SidebarListItemHeaderLinkButton=(e,t)=>{let{info:n,icon:r}=e,a=(0,Sn.Z)(e,M$);return(0,j.jsxs)(dw.Z,SidebarListItemHeaderLink_objectSpread(SidebarListItemHeaderLink_objectSpread({className:"flex navigation-link-header-group-control flex-item-noshrink mr-0-5",type:"button",ref:t},a),{},{children:[(0,j.jsx)(pr.Z,{name:r,className:"navigation-icon"}),(0,j.jsx)("span",{className:"sr-only",children:n})]}))};var N$=(0,o.forwardRef)(SidebarListItemHeaderLinkButton);var items_useItemsDroppable=(e,t="move",n)=>{const[r,a]=hooks_useDragOver((t=>t.dataTransfer.types.includes(LK)&&e(t)),t);return{dragOver:r,dragProps:a,handleDrop:async e=>{a.onDrop(e);const r=document.getElementById(e.dataTransfer.getData(PK)),o=new Event("dragend");o.dataTransfer=e.dataTransfer,o.dataTransfer.dropEffect=t,null==r||r.dispatchEvent(o);const s=JSON.parse(e.dataTransfer.getData(LK));n(s)}}},x$=n(43464);const v$=["children","itemClassName","className"];function SidebarListItemLink_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SidebarListItemLink_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SidebarListItemLink_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SidebarListItemLink_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const w$=(0,o.forwardRef)(((e,t)=>{let{children:n,itemClassName:r="navigation-link",className:a}=e,o=(0,Sn.Z)(e,v$);return(0,j.jsx)(x$.OL,SidebarListItemLink_objectSpread(SidebarListItemLink_objectSpread({ref:t,className:(0,ht.dh)([r,a])},o),{},{children:n}))}));w$.displayName="SidebarListItemLink";var D$=w$;const S$=["left","right","children"];function SidebarListItemContent_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SidebarListItemContent_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SidebarListItemContent_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SidebarListItemContent_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var sidebar_SidebarListItemContent=e=>{let{left:t,right:n,children:r}=e,a=(0,Sn.Z)(e,S$);return(0,j.jsxs)("span",SidebarListItemContent_objectSpread(SidebarListItemContent_objectSpread({className:"flex flex-nowrap w100 flex-align-items-center"},a),{},{children:[t,(0,j.jsx)("span",{className:"flex-item-fluid text-ellipsis max-w100",children:r}),n&&(0,j.jsx)("span",{className:"flex flex-align-items-center",children:n})]}))};const O$=["className"];function SidebarListItemContentIcon_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var A$,C$,sidebar_SidebarListItemContentIcon=e=>{let{className:t}=e,n=(0,Sn.Z)(e,O$);return(0,j.jsx)(pr.Z,function SidebarListItemContentIcon_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SidebarListItemContentIcon_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SidebarListItemContentIcon_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({className:(0,ht.dh)(["navigation-icon flex-item-noshrink mr0-5 flex-item-centered-vert",t])},n))};const{GROUP:E$}=M.WF;var sidebar_LocationAside=({unreadCount:e=0,active:t=!1,refreshing:n=!1})=>{const[r]=useMailSettings();return(0,j.jsxs)(j.Fragment,{children:[t&&(0,j.jsx)(pr.Z,{className:(0,ht.dh)(["mr0-5",n&&"location-refresh-rotate"]),name:"arrow-rotate-right","data-testid":"navigation-link:refresh-folder"}),e>0?(0,j.jsx)("span",{className:"navigation-counter-item flex-item-noshrink",title:(null==r?void 0:r.ViewMode)===E$?(0,u.c)("Info").ngettext((0,u.msgid)(A$||(A$=(0,d.Z)([""," unread conversation"])),e),"".concat(e," unread conversations"),e):(0,u.c)("Info").ngettext((0,u.msgid)(C$||(C$=(0,d.Z)([""," unread message"])),e),"".concat(e," unread messages"),e),"data-testid":"navigation-link:unread-count",children:e>9999?"9999+":e}):null]})};function useOptimisticApplyLabels_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function useOptimisticApplyLabels_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?useOptimisticApplyLabels_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):useOptimisticApplyLabels_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const{SENT:L$,DRAFTS:P$}=M.C7,computeRollbackLabelChanges=(e,t)=>{const n={};return Object.keys(t).forEach((r=>{t[r]&&!hasLabel(e,r)&&(n[r]=!1),!t[r]&&hasLabel(e,r)&&(n[r]=!0)})),n},useOptimisticApplyLabels=()=>{const e=(0,i.I0)(),t=useGetElementByID(),n=useMessageCache(),[r=[]]=useFolders(),a=(0,Ln.Z)(),o=useGetConversation(),s=(0,mn.ZP)(((i,c,l=!1,d,u)=>{const p=[],m=[],g=[],j=elements_isMessage(i[0]);let{value:b}=a.get(RN.L.key),{value:y}=a.get(_N.E.key);return i.forEach((a=>{const s=useOptimisticApplyLabels_objectSpread({},c);if(l){const e=[L$,P$].includes(u||"")?[u]:getCurrentFolderIDs(a,r);if(e.every((e=>s[e])))return;if(Object.keys(c).includes(M.C7.TRASH))if(j){const e=a;g.push({id:e.ID,unread:e.Unread})}else{const e=a;g.push({id:e.ID?e.ID:"",unread:e.NumUnread?e.NumUnread:0})}e.forEach((e=>{s[e]=!1}))}if(p.push({element:a,changes:computeRollbackLabelChanges(a,s)}),j){const r=a,i=getLocalID(n,r.ID),c=n.get(i);c&&c.data&&n.set(i,useOptimisticApplyLabels_objectSpread(useOptimisticApplyLabels_objectSpread({},c),{},{data:applyLabelChangesOnMessage(c.data,s,d)}));const l=o(r.ConversationID);if(l&&l.Conversation){const t=l.Conversation,{updatedConversation:n,conversationChanges:a}=applyLabelChangesOnOneMessageOfAConversation(t,s);e(av({ID:r.ConversationID,messageID:r.ID,changes:s,unreadStatuses:d,updatedConversation:n,conversationResult:l})),y=updateCounters(t,y,a)}const u=t(r.ID);u&&u.ID&&m.push(applyLabelChangesOnMessage(u,s,d));const p=t(r.ConversationID);if(p&&p.ID){const{updatedConversation:e}=applyLabelChangesOnOneMessageOfAConversation(p,s);m.push(e)}b=updateCounters(r,b,s)}else{const r=a,i=o(r.ID);e(ov({ID:r.ID,changes:s,unreadStatuses:d}));const c=t(r.ID);c&&c.ID&&m.push(applyLabelChangesOnConversation(c,s,d));const l=null==i?void 0:i.Messages;null==l||l.forEach((e=>{const t=getLocalID(n,e.ID),r=n.get(t);r&&r.data&&n.set(t,useOptimisticApplyLabels_objectSpread(useOptimisticApplyLabels_objectSpread({},r),{},{data:applyLabelChangesOnMessage(r.data,s,d)}))})),y=updateCounters(r,y,s)}})),m.length&&e(vx({elements:m,isMove:l})),a.set(RN.L.key,{value:b,status:Ov.Q.RESOLVED}),a.set(_N.E.key,{value:y,status:Ov.Q.RESOLVED}),()=>{p.forEach((e=>{s([e.element],e.changes,!1,g)}))}}));return s};var Z$,T$,k$,z$,_$,R$,G$,Y$,U$,F$,K$,B$,W$,V$,Q$,H$,X$,J$,q$,$$,e0,t0,n0,r0,a0,o0,s0,i0,c0,l0,d0,u0;const{SPAM:p0,TRASH:m0,SCHEDULED:g0}=M.C7,joinSentences=(e,t)=>[e,t].filter(Za.Z).join(" "),useApplyLabels=()=>{const e=(0,Dn.Z)(),{call:t,stop:n,start:r}=(0,Ie.Z)(),{createNotification:a}=(0,hn.Z)(),[s=[]]=useLabels(),i=useOptimisticApplyLabels();return(0,o.useCallback)((async(o,c,l=!1)=>{if(!o.length)return;const p=elements_isMessage(o[0]),m=p?En.OF:mx.Jp,g=p?En.$1:mx.tE,b=Object.keys(c),y=o.map((e=>e.ID)),h={},I=(async()=>{let a=[];try{n(),a=await Promise.all(b.map((async t=>{h[t]=i(o,{[t]:c[t]});try{const n=c[t]?m:g,{UndoToken:r}=await e(n({LabelID:t,IDs:y}));return r.Token}catch(e){throw h[t](),e}})))}finally{r(),await t()}return a})(),handleUndo=async()=>{try{n(),Object.values(h).forEach((e=>e()));const a=(await I).filter(Za.Z);await Promise.all(a.map((t=>e(undoActions(t)))))}finally{r(),await t()}};let f=(0,u.c)("Success").t(o0||(o0=(0,d.Z)(["Labels applied."])));const N=y.length;if(1===b.length){var x;const e=null===(x=s.filter((e=>e.ID===b[0]))[0])||void 0===x?void 0:x.Name;f=b[0]===M.C7.STARRED?((e,t)=>e?1===t?(0,u.c)("Success").t(Z$||(Z$=(0,d.Z)(["Message marked as Starred."]))):(0,u.c)("Success").ngettext((0,u.msgid)(T$||(T$=(0,d.Z)([""," message marked as Starred."])),t),"".concat(t," messages marked as Starred."),t):1===t?(0,u.c)("Success").t(k$||(k$=(0,d.Z)(["Conversation marked as Starred."]))):(0,u.c)("Success").ngettext((0,u.msgid)(z$||(z$=(0,d.Z)([""," conversation marked as Starred."])),t),"".concat(t," conversations marked as Starred."),t))(p,N):Object.values(c)[0]?((e,t,n)=>e?1===t?(0,u.c)("Success").t(U$||(U$=(0,d.Z)(["Message added to ","."])),n):(0,u.c)("Success").ngettext((0,u.msgid)(F$||(F$=(0,d.Z)([""," message added to ","."])),t,n),"".concat(t," messages added to ").concat(n,"."),t):1===t?(0,u.c)("Success").t(K$||(K$=(0,d.Z)(["Conversation added to ","."])),n):(0,u.c)("Success").ngettext((0,u.msgid)(B$||(B$=(0,d.Z)([""," conversation added to ","."])),t,n),"".concat(t," conversations added to ").concat(n,"."),t))(p,N,e):((e,t,n)=>e?1===t?(0,u.c)("Success").t(_$||(_$=(0,d.Z)(["Message removed from ","."])),n):(0,u.c)("Success").ngettext((0,u.msgid)(R$||(R$=(0,d.Z)([""," message removed from ","."])),t,n),"".concat(t," messages removed from ").concat(n,"."),t):1===t?(0,u.c)("Success").t(G$||(G$=(0,d.Z)(["Conversation removed from ","."])),n):(0,u.c)("Success").ngettext((0,u.msgid)(Y$||(Y$=(0,d.Z)([""," conversation removed from ","."])),t,n),"".concat(t," conversations removed from ").concat(n,"."),t))(p,N,e)}l||a({text:(0,j.jsx)(notifications_UndoActionNotification,{onUndo:handleUndo,children:f}),expiration:ve.lY})}),[s])},useMoveToFolder=()=>{const e=(0,Dn.Z)(),{call:t,stop:n,start:r}=(0,Ie.Z)(),{createNotification:a}=(0,hn.Z)(),[s=[]]=useLabels(),i=useOptimisticApplyLabels(),{createModal:c}=(0,In.Z)();let l=!0;return(0,o.useCallback)((async(o,s,p,m,g=!1)=>{if(!o.length)return;const b=elements_isMessage(o[0]);await(async(e,t,n)=>{if(e===m0){let e;if(e=t?n.filter((e=>e.LabelIDs.includes(g0))).length:n.filter((e=>{var t;return null===(t=e.Labels)||void 0===t?void 0:t.some((e=>e.ID===g0))})).length,e>0&&e===n.length&&(l=!1),!l){const e=t?(0,u.c)("Info").t(s0||(s0=(0,d.Z)(["Scheduled send of this message will be cancelled."]))):(0,u.c)("Info").t(i0||(i0=(0,d.Z)(["This conversation contains a scheduled message. Sending of this message will be cancelled."])));await new Promise(((t,n)=>{c((0,j.jsx)(modal_Confirm,{onConfirm:t,onClose:n,title:(0,u.c)("Title").t(c0||(c0=(0,d.Z)(["Moving a scheduled message"]))),confirm:(0,u.c)("Action").t(l0||(l0=(0,d.Z)(["OK"]))),cancel:(0,u.c)("Action").t(d0||(d0=(0,d.Z)(["Cancel"]))),children:(0,j.jsx)(Cn.Z,{type:"warning",children:e})}))}))}}})(s,b,o);const y=b?En.OF:mx.Jp,h=b?getMessagesAuthorizedToMove(o,s):o,I=h.map((e=>e.ID));if(!h.length)return void a({text:(0,u.c)("Error display when performing invalid move on message").t(u0||(u0=(0,d.Z)(["This action cannot be performed"]))),type:"error"});const f=i(h,{[s]:!0},!0,[],m),M=(async()=>{let a;try{n();const{UndoToken:o}=await e(y({LabelID:s,IDs:I}));a=o.Token}catch(e){f()}finally{r(),await t()}return a})();if(!g){const i=((e,t,n,r,a,o)=>{const s=n?(0,u.c)("Info").ngettext((0,u.msgid)(W$||(W$=(0,d.Z)([""," message could not be moved."])),n),"".concat(n," messages could not be moved."),n):"";return a===p0?e?1===t?(0,u.c)("Success").t(V$||(V$=(0,d.Z)(["Message moved to spam and sender added to Block List."]))):joinSentences((0,u.c)("Success").ngettext((0,u.msgid)(Q$||(Q$=(0,d.Z)([""," message moved to spam and sender added to Block List."])),t),"".concat(t," messages moved to spam and senders added to Block List."),t),s):1===t?(0,u.c)("Success").t(H$||(H$=(0,d.Z)(["Conversation moved to spam and sender added to Block List."]))):(0,u.c)("Success").ngettext((0,u.msgid)(X$||(X$=(0,d.Z)([""," conversation moved to spam and sender added to Block List."])),t),"".concat(t," conversations moved to spam and senders added to Block List."),t):o===p0&&a!==m0?e?1===t?(0,u.c)("Success").t(J$||(J$=(0,d.Z)(["Message moved to "," and sender added to Allow List."])),r):joinSentences((0,u.c)("Success").ngettext((0,u.msgid)(q$||(q$=(0,d.Z)([""," message moved to "," and sender added to Allow List."])),t,r),"".concat(t," messages moved to ").concat(r," and senders added to Allow List."),t),s):1===t?(0,u.c)("Success").t($$||($$=(0,d.Z)(["Conversation moved to "," and sender added to Allow List."])),r):(0,u.c)("Success").ngettext((0,u.msgid)(e0||(e0=(0,d.Z)([""," conversation moved to "," and sender added to Allow List."])),t,r),"".concat(t," conversations moved to ").concat(r," and senders added to Allow List."),t):e?1===t?(0,u.c)("Success").t(t0||(t0=(0,d.Z)(["Message moved to ","."])),r):joinSentences((0,u.c)("Success").ngettext((0,u.msgid)(n0||(n0=(0,d.Z)([""," message moved to ","."])),t,r),"".concat(t," messages moved to ").concat(r,"."),t),s):1===t?(0,u.c)("Success").t(r0||(r0=(0,d.Z)(["Conversation moved to ","."])),r):(0,u.c)("Success").ngettext((0,u.msgid)(a0||(a0=(0,d.Z)([""," conversation moved to ","."])),t,r),"".concat(t," conversations moved to ").concat(r,"."),t)})(b,h.length,o.length-h.length,p,s,m),handleUndo=async()=>{try{n(),f();const a=await M;await e(undoActions(a))}finally{r(),await t()}};a({text:(0,j.jsx)(notifications_UndoActionNotification,{onUndo:l?handleUndo:void 0,children:i}),expiration:ve.lY})}}),[s])},useStar=()=>{const e=(0,Dn.Z)(),{call:t,stop:n,start:r}=(0,Ie.Z)(),a=useOptimisticApplyLabels();return(0,o.useCallback)((async(o,s)=>{if(!o.length)return;const i=elements_isMessage(o[0]),c=i?En.OF:mx.Jp,l=i?En.$1:mx.tE,d=s?c:l,u=a(o,{[M.C7.STARRED]:s});try{n(),await e(d({LabelID:M.C7.STARRED,IDs:o.map((e=>e.ID))}))}catch(e){throw u(),e}finally{r(),await t()}}),[])};var j0;function SidebarItem_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SidebarItem_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SidebarItem_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SidebarItem_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const{ALL_MAIL:b0,DRAFTS:y0,ALL_DRAFTS:h0,SENT:I0,ALL_SENT:f0,SCHEDULED:M0}=M.C7,N0=[b0,y0,h0,I0,f0,M0],x0=[],SidebarItem=({currentLabelID:e,labelID:t,icon:n,iconSize:r,text:a,shortcutText:i,content:l=a,color:p,isFolder:m,unreadCount:g,totalMessagesCount:b=0,shortcutHandlers:y=x0,onFocus:h=c.ZT,id:I})=>{const{call:f}=(0,Ie.Z)(),M=(0,s.k6)(),[{Shortcuts:N=0}={}]=useMailSettings(),x=useGetElementsFromIDs(),[v,w]=(0,no.Z)(!1),D=useApplyLabels(),S=useMoveToFolder(),O=ve.Y4[t]?ve.Y4[t]:t,A="/".concat(O),C=t===e,E=C?"page":void 0,L=t===M0&&b>0,{dragOver:P,dragProps:Z,handleDrop:T}=items_useItemsDroppable((()=>e!==t&&!N0.includes(t)),m?"move":"link",(n=>{const r=x(n);m?S(r,t,a,e):D(r,{[t]:!0})})),k=(0,o.useRef)(null);(0,Co.y)(k,y);const z=L&&(0,j.jsx)("span",{className:"navigation-counter-item navigation-counter-item--transparent flex-item-noshrink color-weak text-sm",title:(0,u.c)("Info").ngettext((0,u.msgid)(j0||(j0=(0,d.Z)([""," scheduled message"])),b),"".concat(b," scheduled messages"),b),"data-testid":"navigation-link:total-messages-count",children:b>9999?"9999+":b});return(0,j.jsx)(f$,{className:(0,ht.dh)([P&&"navigation__dragover"]),children:(0,j.jsx)(D$,SidebarItem_objectSpread(SidebarItem_objectSpread({"aria-current":E,to:A,onClick:e=>{M.location.pathname.endsWith(A)&&""===M.location.hash&&!v&&(e.preventDefault(),w(Promise.all([f(),(0,Wt.D)(1e3)])))}},Z),{},{onDrop:T,title:void 0!==i&&N?"".concat(a," ").concat(i):a,ref:k,"data-testid":"navigation-link:".concat(a),"data-shortcut-target":["navigation-link",I].filter(Za.Z).join(" "),onFocus:()=>h(I||""),children:(0,j.jsxs)(sidebar_SidebarListItemContent,{left:n?(0,j.jsx)(sidebar_SidebarListItemContentIcon,{name:n,color:p,size:r}):void 0,right:(0,j.jsx)(sidebar_LocationAside,{unreadCount:g,active:C,refreshing:v}),children:[l,z]})}))})};var v0=(0,o.memo)(SidebarItem);function sidebar_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sidebar_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sidebar_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sidebar_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const getUnreadCount=(e,t)=>t.Expanded?e[t.ID]||0:((null==t?void 0:t.subfolders)||[]).reduce(((t,n)=>t+getUnreadCount(e,sidebar_objectSpread(sidebar_objectSpread({},n),{},{Expanded:0}))),e[t.ID]||0);var sidebar_SidebarFolder=({currentLabelID:e,folder:t,level:n,onToggle:r,unreadCount:a,expanded:o,onFocus:s,id:i})=>{var c;const l=[["ArrowRight",e=>{o||(e.stopPropagation(),r(t,!0))}],["ArrowLeft",()=>{o&&r(t,!1)}]];return(0,j.jsx)(v0,{currentLabelID:e,labelID:t.ID,isFolder:!0,text:t.Name,unreadCount:a,shortcutHandlers:l,id:i,onFocus:s,content:(0,j.jsxs)("div",{className:"flex flex-nowrap flex-align-items-center","data-level":n,children:[(0,j.jsx)(labels_FolderIcon,{className:"mr0-5 navigation-icon flex-item-noshrink",folder:t}),(0,j.jsx)("span",{className:"text-ellipsis pr0-5",children:formatFolderName(n,t.Name)}),null!==(c=t.subfolders)&&void 0!==c&&c.length?(0,j.jsx)("button",{type:"button",className:"mr0-5 flex-item-noshrink navigation-link--expand","aria-expanded":!!t.Expanded,onClick:e=>{e.stopPropagation(),e.preventDefault(),r(t,!o)},children:(0,j.jsx)(pr.Z,{name:"angle-down",className:(0,ht.dh)(["navigation-icon navigation-icon--expand",!!t.Expanded&&"rotateX-180"])})}):null]})})};const w0=["children","className","onFocus"];function SidebarListItemButton_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SidebarListItemButton_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SidebarListItemButton_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SidebarListItemButton_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D0,sidebar_SidebarListItemButton=e=>{let{children:t,className:n,onFocus:r}=e,a=(0,Sn.Z)(e,w0);return(0,j.jsx)("button",SidebarListItemButton_objectSpread(SidebarListItemButton_objectSpread({onFocus:r,className:(0,ht.dh)(["navigation-link w100 text-left",n]),type:"button"},a),{},{children:t}))};var sidebar_EmptyFolders=({onFocus:e})=>{const{createModal:t}=(0,In.Z)();return(0,j.jsx)(f$,{children:(0,j.jsx)(sidebar_SidebarListItemButton,{onFocus:e,"data-shortcut-target":"add-folder",onClick:()=>{t((0,j.jsx)(modals_EditLabelModal,{type:"folder"}))},children:(0,j.jsx)(sidebar_SidebarListItemContent,{right:(0,j.jsx)(sidebar_SidebarListItemContentIcon,{name:"plus",color:"white"}),children:(0,u.c)("Link").t(D0||(D0=(0,d.Z)(["Add folder"])))})})})};const SidebarFolders=({currentLabelID:e,counterMap:t,folders:n,loadingFolders:r,updateFocusItem:a,handleToggleFolder:o,foldersTreeview:s})=>{const treeviewReducer=(n,r,s=0)=>(n.push((0,j.jsx)(sidebar_SidebarFolder,{currentLabelID:e,folder:r,level:s,onToggle:o,expanded:Boolean(r.Expanded),unreadCount:getUnreadCount(t,r),id:r.ID,onFocus:a},r.ID)),r.Expanded&&Array.isArray(r.subfolders)&&r.subfolders.length&&r.subfolders.forEach((e=>treeviewReducer(n,e,s+1))),n);return r||null!=n&&n.length?(0,j.jsx)(j.Fragment,{children:s.reduce(((e,t)=>treeviewReducer(e,t)),[])}):(0,j.jsx)(sidebar_EmptyFolders,{onFocus:()=>a("add-folder")})};var S0,O0=(0,o.memo)(SidebarFolders);var sidebar_EmptyLabels=({onFocus:e})=>{const{createModal:t}=(0,In.Z)();return(0,j.jsx)(f$,{children:(0,j.jsx)(sidebar_SidebarListItemButton,{onFocus:e,"data-shortcut-target":"add-label",onClick:()=>{const e={Name:"",Color:M.dI[(0,c.lv)(0,M.dI.length-1)],Type:M.L7.MESSAGE_LABEL};t((0,j.jsx)(modals_EditLabelModal,{label:e}))},children:(0,j.jsx)(sidebar_SidebarListItemContent,{right:(0,j.jsx)(sidebar_SidebarListItemContentIcon,{name:"plus",color:"white"}),children:(0,u.c)("Link").t(S0||(S0=(0,d.Z)(["Add label"])))})})})};const SidebarLabels=({currentLabelID:e,counterMap:t,labels:n,updateFocusItem:r})=>(0,j.jsx)(j.Fragment,{children:n.length?n.map((n=>(0,j.jsx)(v0,{currentLabelID:e,labelID:n.ID,icon:"circle-filled",iconSize:12,text:n.Name,color:n.Color,isFolder:!1,unreadCount:t[n.ID],id:n.ID,onFocus:r},n.ID))):(0,j.jsx)(sidebar_EmptyLabels,{onFocus:()=>r("add-label")})});var A0=(0,o.memo)(SidebarLabels);const useDeepMemo=(e,t)=>{const n=(0,o.useRef)();return(0,o.useMemo)((()=>{const t=e();return(0,WI.Z)(t,n.current)?n.current:(n.current=t,t)}),t)};var C0,E0,L0,P0,Z0,T0,k0,z0,_0,R0,G0,Y0,U0,F0,K0,B0,W0,V0,Q0;function MailSidebarList_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function MailSidebarList_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MailSidebarList_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MailSidebarList_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const formatFolderID=e=>"folder_expanded_state_".concat(e);var sidebar_MailSidebarList=({labelID:e})=>{const t=(0,s.TH)(),[n]=(0,bn.ZP)(),[r]=useConversationCounts(),[a]=useMessageCounts(),[i]=useMailSettings(),[c,l]=hooks_useLocalState(!0,"".concat(n.ID,"-display-folders")),[p,m]=hooks_useLocalState(!0,"".concat(n.ID,"-display-labels")),[g]=useLabels(),[b,h]=useFolders(),{createModal:I}=(0,In.Z)(),{feature:f}=(0,nN.Z)(y.P.ScheduledSend),N=(0,o.useRef)(null),[x,v]=(0,o.useState)(null),[w,D]=(0,o.useState)([]),S=(0,o.useMemo)((()=>buildTreeview(w)),[w]);(0,o.useEffect)((()=>{b&&D(b.map((e=>MailSidebarList_objectSpread(MailSidebarList_objectSpread({},e),{},{Expanded:"false"===(0,FN.rV)(formatFolderID(e.ID))?0:1}))))}),[b]);const O=(0,o.useCallback)(((e,t)=>{D(w.map((n=>n.ID===e.ID?MailSidebarList_objectSpread(MailSidebarList_objectSpread({},n),{},{Expanded:t?1:0}):n))),(0,FN.LS)(formatFolderID(e.ID),"".concat(t))}),[w]),treeviewReducer=(e,t)=>{var n;(e.push(t.ID),t.Expanded)&&(null===(n=t.subfolders)||void 0===n||n.forEach((t=>treeviewReducer(e,t))));return e},A=(0,o.useMemo)((()=>S.reduce(((e,t)=>treeviewReducer(e,t)),[])),[S]),C=(0,o.useCallback)((e=>{var t;v(e);const n=null==N||null===(t=N.current)||void 0===t?void 0:t.querySelector('[data-shortcut-target~="'.concat(e,'"]'));null==n||n.focus(),(0,vo.zT)(n,{block:"nearest"})}),[]),E=(0,o.useMemo)((()=>{const e=null!=b&&b.length?A:["add-folder"],t=null!=g&&g.length?g.map((e=>e.ID)):["add-label"];return["inbox","drafts","scheduled","sent","starred","archive","spam","trash","allmail","toggle-folders",c&&e,"toggle-labels",p&&t].flat(1).filter(Za.Z)}),[A,b,g,c,p]),L=[["ArrowUp",e=>{e.preventDefault();const t=E.indexOf(x),n=null!==t?Math.max(0,t-1):E.length-1;C(E[n])}],[["Meta","ArrowUp"],e=>{e.preventDefault(),C(E[0])}],["ArrowDown",e=>{e.preventDefault();const t=E.indexOf(x),n=null!==t?Math.min(E.length-1,t+1):0;C(E[n])}],[["Meta","ArrowDown"],e=>{e.preventDefault(),C(E[E.length-1])}],["ArrowRight",()=>{const e=document.querySelector('[data-shortcut-target="item-container"][data-shortcut-target-selected="true"]')||document.querySelector('[data-shortcut-target="item-container"]');null==e||e.focus()}]];(0,Co.y)(N,L);const{ShowMoved:P}=i||{ShowMoved:0},Z=isConversationMode(e,i,t),T=useDeepMemo((()=>{if(!(i&&g&&b&&r&&a))return{};const e=[...g,...b],n=getCounterMap(e,r,a,i,t);return Object.entries(n).reduce(((e,[t,n])=>(e[t]=null==n?void 0:n.Unread,e)),{})}),[i,g,b,r,a,t]),k=useDeepMemo((()=>{if(!(i&&g&&b&&r&&a))return{};const e=[...g,...b],n=getCounterMap(e,r,a,i,t);return Object.entries(n).reduce(((e,[t,n])=>(e[t]=null==n?void 0:n.Total,e)),{})}),[a,r,g,b,i,t]),z=(null==f?void 0:f.Value)&&(n.hasPaidMail||(k[M.C7.SCHEDULED]||0)>0),getCommonProps=t=>({currentLabelID:e,labelID:t,isConversation:Z,unreadCount:T[t],totalMessagesCount:k[t]||0});return(0,j.jsx)("div",{ref:N,tabIndex:-1,className:"no-outline",children:(0,j.jsxs)(h$,{children:[(0,j.jsx)(v0,MailSidebarList_objectSpread(MailSidebarList_objectSpread({},getCommonProps(M.C7.INBOX)),{},{icon:"inbox",text:(0,u.c)("Link").t(C0||(C0=(0,d.Z)(["Inbox"]))),shortcutText:"[G] [I]",isFolder:!0,id:"inbox",onFocus:v})),(0,j.jsx)(v0,MailSidebarList_objectSpread(MailSidebarList_objectSpread({},getCommonProps(P&M.zC.DRAFTS?M.C7.ALL_DRAFTS:M.C7.DRAFTS)),{},{icon:"file-lines",text:(0,u.c)("Link").t(E0||(E0=(0,d.Z)(["Drafts"]))),shortcutText:"[G] [D]",isFolder:!0,id:"drafts",onFocus:v})),z?(0,j.jsx)(v0,MailSidebarList_objectSpread(MailSidebarList_objectSpread({},getCommonProps(M.C7.SCHEDULED)),{},{icon:"clock",text:(0,u.c)("Link").t(L0||(L0=(0,d.Z)(["Scheduled"]))),isFolder:!0,id:"scheduled",onFocus:v})):null,(0,j.jsx)(v0,MailSidebarList_objectSpread(MailSidebarList_objectSpread({},getCommonProps(P&M.zC.SENT?M.C7.ALL_SENT:M.C7.SENT)),{},{icon:"paper-plane",text:(0,u.c)("Link").t(P0||(P0=(0,d.Z)(["Sent"]))),shortcutText:"[G] [E]",isFolder:!0,id:"sent",onFocus:v})),(0,j.jsx)(v0,MailSidebarList_objectSpread(MailSidebarList_objectSpread({},getCommonProps(M.C7.STARRED)),{},{icon:"star",text:(0,u.c)("Link").t(Z0||(Z0=(0,d.Z)(["Starred"]))),shortcutText:"[G] [*]",isFolder:!1,id:"starred",onFocus:v})),(0,j.jsx)(v0,MailSidebarList_objectSpread(MailSidebarList_objectSpread({},getCommonProps(M.C7.ARCHIVE)),{},{icon:"box-archive",text:(0,u.c)("Link").t(T0||(T0=(0,d.Z)(["Archive"]))),shortcutText:"[G] [A]",isFolder:!0,id:"archive",onFocus:v})),(0,j.jsx)(v0,MailSidebarList_objectSpread(MailSidebarList_objectSpread({},getCommonProps(M.C7.SPAM)),{},{icon:"fire",text:(0,u.c)("Link").t(k0||(k0=(0,d.Z)(["Spam"]))),shortcutText:"[G] [S]",isFolder:!0,id:"spam",onFocus:v})),(0,j.jsx)(v0,MailSidebarList_objectSpread(MailSidebarList_objectSpread({},getCommonProps(M.C7.TRASH)),{},{icon:"trash",text:(0,u.c)("Link").t(z0||(z0=(0,d.Z)(["Trash"]))),shortcutText:"[G] [T]",isFolder:!0,id:"trash",onFocus:v})),(0,j.jsx)(v0,MailSidebarList_objectSpread(MailSidebarList_objectSpread({},getCommonProps(M.C7.ALL_MAIL)),{},{icon:"envelopes",text:(0,u.c)("Link").t(_0||(_0=(0,d.Z)(["All mail"]))),shortcutText:"[G] [M]",isFolder:!0,id:"allmail",onFocus:v})),(0,j.jsx)(sidebar_SimpleSidebarListItemHeader,{toggle:c,onToggle:e=>l(e),text:(0,u.c)("Link").t(R0||(R0=(0,d.Z)(["Folders"]))),title:(0,u.c)("Link").t(G0||(G0=(0,d.Z)(["Folders"]))),id:"toggle-folders",onFocus:v,right:(0,j.jsxs)("div",{className:"flex flex-align-items-center",children:[null!=b&&b.length?(0,j.jsx)("button",{type:"button",className:"flex navigation-link-header-group-control flex-item-noshrink",onClick:()=>I((0,j.jsx)(modals_EditLabelModal,{type:"folder"})),title:(0,u.c)("Title").t(Y0||(Y0=(0,d.Z)(["Create a new folder"]))),"data-testid":"navigation-link:add-folder",children:(0,j.jsx)(pr.Z,{name:"plus"})}):null,(0,j.jsx)(N$,{to:"/mail/folders-labels",toApp:M.ei.PROTONACCOUNT,icon:"gear",title:(0,u.c)("Info").t(U0||(U0=(0,d.Z)(["Manage your folders"]))),info:(0,u.c)("Link").t(F0||(F0=(0,d.Z)(["Manage your folders"]))),target:"_self","data-testid":"navigation-link:folders-settings"})]})}),c&&(0,j.jsx)(O0,{currentLabelID:e,counterMap:T,folders:b||[],loadingFolders:h,updateFocusItem:C,handleToggleFolder:O,foldersTreeview:S}),(0,j.jsx)(sidebar_SimpleSidebarListItemHeader,{toggle:p,onToggle:e=>m(e),text:(0,u.c)("Link").t(K0||(K0=(0,d.Z)(["Labels"]))),title:(0,u.c)("Link").t(B0||(B0=(0,d.Z)(["Labels"]))),id:"toggle-labels",onFocus:v,right:(0,j.jsxs)("div",{className:"flex flex-align-items-center",children:[null!=g&&g.length?(0,j.jsx)("button",{type:"button",className:"flex navigation-link-header-group-control flex-item-noshrink",onClick:()=>I((0,j.jsx)(modals_EditLabelModal,{})),title:(0,u.c)("Title").t(W0||(W0=(0,d.Z)(["Create a new label"]))),"data-testid":"navigation-link:add-label",children:(0,j.jsx)(pr.Z,{name:"plus"})}):null,(0,j.jsx)(N$,{to:"/mail/folders-labels",toApp:M.ei.PROTONACCOUNT,icon:"gear",title:(0,u.c)("Info").t(V0||(V0=(0,d.Z)(["Manage your labels"]))),info:(0,u.c)("Link").t(Q0||(Q0=(0,d.Z)(["Manage your labels"]))),target:"_self","data-testid":"navigation-link:labels-settings"})]})}),p&&(0,j.jsx)(A0,{currentLabelID:e,counterMap:T,labels:g||[],updateFocusItem:C})]})})};const getAppVersion=e=>e.replace(/-beta.(\d+)/," - Beta $1");var H0,X0;const J0=["changelog"];function ChangelogModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ChangelogModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ChangelogModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ChangelogModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const q0=$e()("default",{breaks:!0,linkify:!0}),$0=q0.renderer.rules.link_open||function render(e,t,n,r,a){return a.renderToken(e,t,n)};q0.renderer.rules.link_open=(e,t,n,r,a)=>(e[t].attrPush(["target","_blank"]),$0(e,t,n,r,a));var e4,version_ChangelogModal=e=>{let{changelog:t=""}=e,n=(0,Sn.Z)(e,J0);const[r]=(0,o.useState)((()=>{const e=t.replace(/\[(\d+\.\d+\.\d+[^\]]*)]/g,((e,t)=>"[".concat(getAppVersion(t),"]")));return{__html:q0.render(e)}}));return(0,j.jsx)(On.Z,ChangelogModal_objectSpread(ChangelogModal_objectSpread({title:(0,u.c)("Title").t(H0||(H0=(0,d.Z)(["What's new"]))),close:(0,u.c)("Action").t(X0||(X0=(0,d.Z)(["Close"]))),submit:null},n),{},{children:(0,j.jsx)("div",{className:"modal-content-inner-changelog",dangerouslySetInnerHTML:r,dir:"ltr",lang:"en"})}))};var version_AppVersion=({appVersion:e,appName:t,changelog:n})=>{var r;const{APP_NAME:a,APP_VERSION:o,APP_VERSION_DISPLAY:s,DATE_VERSION:i}=(0,Nn.Z)(),{createModal:c}=(0,In.Z)(),l=t||(null===(r=M.mN[a])||void 0===r?void 0:r.name),p=getAppVersion(e||s||o),m="app-infos-version text-xs m0",g=i,b=(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("span",{className:"app-infos-name mr0-25",children:l}),(0,j.jsx)("span",{className:"app-infos-number",children:p})]});return n?(0,j.jsx)(ur.Z,{title:(0,u.c)("Storage").t(e4||(e4=(0,d.Z)(["Release notes"]))),children:(0,j.jsx)("button",{type:"button",onClick:()=>{c((0,j.jsx)(version_ChangelogModal,{changelog:n}))},title:g,className:m,children:b})}):(0,j.jsx)("span",{title:g,className:m,children:b})},t4=n(66872);var n4,r4,a4,o4,i4,c4,sidebar_SidebarVersion=()=>(0,j.jsx)(version_AppVersion,{changelog:t4});const MailSidebar=({labelID:e,expanded:t=!1,onToggleExpand:n,onSendMessage:r})=>{var a;const s=useOnCompose(),[i]=(0,Dr.Z)(),{createModal:c}=(0,In.Z)(),{show:l,onDisplayed:p}=hooks_useSpotlightOnFeature(y.P.SpotlightGetStartedChecklist),{dismissed:m}=(0,o.useContext)(Uq),g=(0,o.useCallback)((()=>{s({action:ve.Xh.NEW})}),[s]),[{Shortcuts:b=0}={}]=useMailSettings(),h=b?(0,j.jsxs)(j.Fragment,{children:[(0,u.c)("Title").t(n4||(n4=(0,d.Z)(["New message"]))),(0,j.jsx)("br",{}),(0,j.jsx)("kbd",{className:"no-border",children:"N"})]}):null,I=b?(0,j.jsx)(ur.Z,{title:h,originalPlacement:"top",children:(0,j.jsx)(Nq,{className:"no-mobile",onClick:g,"data-testid":"sidebar:compose",children:(0,u.c)("Action").t(r4||(r4=(0,d.Z)(["New message"])))})}):(0,j.jsx)(Nq,{className:"no-mobile",onClick:g,"data-testid":"sidebar:compose",children:(0,u.c)("Action").t(a4||(a4=(0,d.Z)(["New message"])))});return(0,j.jsx)(sidebar_Sidebar,{expanded:t,onToggleExpand:n,primary:I,logo:(0,j.jsx)(logo_MainLogo,{to:"/inbox"}),version:(0,j.jsx)(sidebar_SidebarVersion,{}),storageGift:(null===(a=i.Checklists)||void 0===a?void 0:a.includes("get-started"))&&(0,j.jsx)(spotlight_Spotlight,{content:(0,u.c)("Get started checklist spotlight").t(o4||(o4=(0,d.Z)(["You can access the checklist anytime from here"]))),show:m&&l,onDisplayed:p,originalPlacement:"top",children:(0,j.jsx)("button",{type:"button",className:"ml0-5",onClick:()=>{c((0,j.jsx)(GetStartedChecklistModal,{onSendMessage:()=>{g(),null==r||r()}}))},children:(0,j.jsx)(ur.Z,{title:(0,u.c)("Storage").t(i4||(i4=(0,d.Z)(["Get extra storage for free"]))),children:(0,j.jsx)("img",{width:16,src:Tq,alt:(0,u.c)("Action").t(c4||(c4=(0,d.Z)(["Open get started checklist modal"])))})})})}),children:(0,j.jsx)(sidebar_SidebarNav,{children:(0,j.jsx)(sidebar_MailSidebarList,{labelID:e})})})};var l4=(0,o.memo)(MailSidebar);function PrivateLayout_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function PrivateLayout_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PrivateLayout_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PrivateLayout_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const PrivateLayout=({children:e,breakpoints:t,labelID:n,elementID:r,isBlurred:a},i)=>{const c=(0,s.k6)(),l=(0,s.TH)(),[d,u]=(0,o.useState)(!1),p=(0,o.useCallback)(((e="",t=M.C7.ALL_MAIL)=>{c.push(((e,t)=>(0,De.Nv)(e.pathname,e.hash,{page:void 0,keyword:keywordToString(t)}))(PrivateLayout_objectSpread(PrivateLayout_objectSpread({},c.location),{},{hash:"",pathname:"/".concat(getHumanLabelID(t))}),e))}),[]),m=(0,o.useCallback)((()=>u((e=>!e))),[]);(0,o.useEffect)((()=>{u(!1)}),[l.pathname,l.hash]);const g=(0,j.jsx)(fq,{labelID:n,elementID:r,breakpoints:t,expanded:d,onToggleExpand:m,onSearch:p}),b=(0,j.jsx)(l4,{labelID:n,expanded:d,onToggleExpand:m,onSendMessage:()=>u(!1)});return(0,j.jsx)(app_PrivateAppContainer,{header:g,sidebar:b,isBlurred:a,containerRef:i,children:e})};var d4=(0,o.forwardRef)(PrivateLayout),u4=n(89170);const useGetCalendarUserSettings=()=>{const e=(0,Dn.Z)(),t=(0,Ln.Z)();return(0,o.useCallback)((()=>(0,Zn.NC)(t,u4.O.key,(()=>u4.O.get(e)))),[t,e])},p4=["className","hasToolbar","children","hasRowMode"];function PrivateMainArea_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function PrivateMainArea_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PrivateMainArea_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PrivateMainArea_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m4=(0,o.forwardRef)(((e,t)=>{let{className:n,hasToolbar:r=!1,children:a,hasRowMode:o=!1}=e,s=(0,Sn.Z)(e,p4);return(0,j.jsx)("main",PrivateMainArea_objectSpread(PrivateMainArea_objectSpread({className:(0,ht.dh)([r?"main-area--with-toolbar":"main-area",o?"main-area--row-mode":"","flex-item-fluid relative",n]),ref:t},s),{},{children:a}))}));const g4=["icon","children","className","disabled","tabIndex","title","onClick"];function ToolbarButton_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ToolbarButton_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ToolbarButton_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ToolbarButton_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const ToolbarButton=(e,t)=>{let{icon:n,children:r,className:a,disabled:s,tabIndex:i,title:l,onClick:d}=e,u=(0,Sn.Z)(e,g4);const p=(0,j.jsxs)("button",ToolbarButton_objectSpread(ToolbarButton_objectSpread({type:"button",className:(0,ht.dh)([a,"flex flex-item-noshrink toolbar-button"]),onClick:s?c.ZT:d,tabIndex:s?-1:i,disabled:s,ref:t},u),{},{children:[(0,o.cloneElement)(n,{className:(0,ht.dh)([n.props.className,"toolbar-icon mauto"])}),r]}));return l?(0,j.jsx)(ur.Z,{title:l,children:p}):p};var j4=(0,o.forwardRef)(ToolbarButton);var b4,y4,h4,I4,f4,M4,N4=vr_Vr;const{READ:x4,UNREAD:v4}=zv;var toolbar_ReadUnreadButtons=({labelID:e,mailSettings:t,selectedIDs:n,onBack:r})=>{const{MessageButtons:a=M.B9.READ_UNREAD}=t,[o,s]=(0,no.Z)(),i=useMarkAs(),c=useGetElementsFromIDs(),[{Shortcuts:l=0}={}]=useMailSettings(),handleMarkAs=async t=>{const a=t===v4,o=c(n);a&&r(),await i(o,e,t)},p=l?(0,j.jsxs)(j.Fragment,{children:[(0,u.c)("Action").t(b4||(b4=(0,d.Z)(["Mark as read"]))),(0,j.jsx)("br",{}),(0,j.jsx)("kbd",{className:"no-border",children:"R"})]}):(0,u.c)("Action").t(y4||(y4=(0,d.Z)(["Mark as read"]))),m=l?(0,j.jsxs)(j.Fragment,{children:[(0,u.c)("Action").t(h4||(h4=(0,d.Z)(["Mark as unread"]))),(0,j.jsx)("br",{}),(0,j.jsx)("kbd",{className:"no-border",children:"U"})]}):(0,u.c)("Action").t(I4||(I4=(0,d.Z)(["Mark as unread"]))),g=[(0,j.jsx)(j4,{title:p,disabled:o||!n.length,onClick:()=>s(handleMarkAs(x4)),className:"no-tablet no-mobile","data-testid":"toolbar:read",icon:(0,j.jsx)(pr.Z,{name:"eye",alt:(0,u.c)("Action").t(f4||(f4=(0,d.Z)(["Mark as read"])))})},"read"),(0,j.jsx)(j4,{title:m,disabled:o||!n.length,onClick:()=>s(handleMarkAs(v4)),"data-testid":"toolbar:unread",icon:(0,j.jsx)(pr.Z,{name:"eye-slash",alt:(0,u.c)("Action").t(M4||(M4=(0,d.Z)(["Mark as unread"])))})},"unread")];return a===M.B9.UNREAD_READ&&g.reverse(),(0,j.jsx)(j.Fragment,{children:g})};const w4=["title","content","className","dropDownClassName","children","hasCaret","autoClose","disabled","noMaxSize","externalToggleRef"];function ToolbarDropdown_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ToolbarDropdown_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ToolbarDropdown_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ToolbarDropdown_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var toolbar_ToolbarDropdown=e=>{let{title:t,content:n,className:r,dropDownClassName:a,children:s,hasCaret:i=!0,autoClose:c=!0,disabled:l=!1,noMaxSize:d=!1,externalToggleRef:u}=e,p=(0,Sn.Z)(e,w4);const[m]=(0,o.useState)((0,ht.D)("dropdown")),[g,b]=(0,o.useState)(!1),{anchorRef:y,isOpen:h,toggle:I,close:f}=(0,No.Z)();return(0,o.useEffect)((()=>{u&&(u.current=I)}),[]),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(ur.Z,{title:t,children:(0,j.jsx)(fo.Z,ToolbarDropdown_objectSpread(ToolbarDropdown_objectSpread({as:"button",type:"button",ref:y,isOpen:h,onClick:I,hasCaret:i,disabled:l,caretClassName:"toolbar-icon",className:(0,ht.dh)(["toolbar-button toolbar-button--dropdown flex flex-align-items-center",r])},p),{},{children:n}))}),(0,j.jsx)(Mo.Z,{id:m,originalPlacement:"bottom",autoClose:c,autoCloseOutside:!g,isOpen:h,noMaxSize:d,anchorRef:y,onClose:f,className:(0,ht.dh)(["toolbar-dropdown",a]),children:s({onClose:f,onLock:b})})]})};function useOptimisticDelete_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function useOptimisticDelete_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?useOptimisticDelete_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):useOptimisticDelete_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D4,S4,O4,A4,C4,E4,L4,P4,Z4,T4,k4,z4,_4,R4,G4,Y4,U4,F4,K4,B4,W4,V4,optimistic_useOptimisticDelete=()=>{const e=(0,i.I0)(),t=useGetElementByID(),n=(0,Ln.Z)(),r=useMessageCache(),a=useGetAllConversations();return(0,mn.ZP)(((o,s)=>{const i=o.map((({ID:e})=>e||"")),c=elements_isConversation(o[0]),l=i.length,d=o.filter((e=>elements_isUnread(e,s))).length,u=[],p=[],m={};[...r.keys()].forEach((e=>{const t=r.get(e);i.includes(e)&&(r.delete(e),u.push(t))}));a().forEach((t=>{if(null!=t&&t.Conversation.ID&&i.includes(null==t?void 0:t.Conversation.ID))e(sv(null==t?void 0:t.Conversation.ID)),p.push(t);else if(null!=t&&t.Messages){var n,r;const a=null===(n=t.Messages)||void 0===n?void 0:n.filter((e=>!i.includes(e.ID)));t&&(null==a?void 0:a.length)!==(null==t||null===(r=t.Messages)||void 0===r?void 0:r.length)&&(e(iv({ID:t.Conversation.ID,messages:a})),p.push(t))}}));const g=i.map((e=>t(e))).filter(Za.Z);if(e(wx({elementIDs:i})),c){const e=n.get(_N.E.key),t=e.value.find((e=>e.LabelID===s));m[_N.E.key]=t,n.set(_N.E.key,useOptimisticDelete_objectSpread(useOptimisticDelete_objectSpread({},e),{},{value:replaceCounter(e.value,{LabelID:s,Total:(t.Total||0)-l,Unread:(t.Unread||0)-d})}))}else{const e=n.get(RN.L.key),t=e.value.find((e=>e.LabelID===s));m[RN.L.key]=t,n.set(RN.L.key,useOptimisticDelete_objectSpread(useOptimisticDelete_objectSpread({},e),{},{value:replaceCounter(e.value,{LabelID:s,Total:(t.Total||0)-l,Unread:(t.Unread||0)-d})}))}return()=>{u.forEach((e=>{r.set(e.localID,e)})),e(cv(p)),e(Dx({elements:g})),Object.entries(m).forEach((([e,t])=>{const r=n.get(e);n.set(e,useOptimisticDelete_objectSpread(useOptimisticDelete_objectSpread({},r),{},{value:replaceCounter(r.value,t)}))}))}}))};const{DRAFTS:Q4,ALL_DRAFTS:H4}=M.C7,getDeleteTitle=(e,t,n,r)=>e?1===n?(0,u.c)("Title").t(D4||(D4=(0,d.Z)(["Delete draft"]))):(0,u.c)("Title").ngettext((0,u.msgid)(S4||(S4=(0,d.Z)(["Delete "," draft"])),n),"Delete ".concat(n," drafts"),n):t?1===n?1===r?(0,u.c)("Title").t(O4||(O4=(0,d.Z)(["Delete message"]))):(0,u.c)("Title").t(A4||(A4=(0,d.Z)(["Delete conversation"]))):(0,u.c)("Title").ngettext((0,u.msgid)(C4||(C4=(0,d.Z)(["Delete "," conversation"])),n),"Delete ".concat(n," conversations"),n):1===n?(0,u.c)("Title").t(E4||(E4=(0,d.Z)(["Delete message"]))):(0,u.c)("Title").ngettext((0,u.msgid)(L4||(L4=(0,d.Z)(["Delete "," message"])),n),"Delete ".concat(n," messages"),n),getModalText=(e,t,n,r)=>e?1===n?(0,u.c)("Info").t(P4||(P4=(0,d.Z)(["Are you sure you want to permanently delete this draft?"]))):(0,u.c)("Info").ngettext((0,u.msgid)(Z4||(Z4=(0,d.Z)(["Are you sure you want to permanently delete "," draft?"])),n),"Are you sure you want to permanently delete ".concat(n," drafts?"),n):t?1===n?1===r?(0,u.c)("Info").t(T4||(T4=(0,d.Z)(["Are you sure you want to permanently delete this message?"]))):(0,u.c)("Info").t(k4||(k4=(0,d.Z)(["Are you sure you want to permanently delete this conversation?"]))):(0,u.c)("Info").ngettext((0,u.msgid)(z4||(z4=(0,d.Z)(["Are you sure you want to permanently delete "," conversation?"])),n),"Are you sure you want to permanently delete ".concat(n," conversations?"),n):1===n?(0,u.c)("Info").t(_4||(_4=(0,d.Z)(["Are you sure you want to permanently delete this message?"]))):(0,u.c)("Info").ngettext((0,u.msgid)(R4||(R4=(0,d.Z)(["Are you sure you want to permanently delete "," message?"])),n),"Are you sure you want to permanently delete ".concat(n," messages?"),n),getNotificationText=(e,t,n,r)=>e?1===n?(0,u.c)("Success").t(G4||(G4=(0,d.Z)(["Draft deleted"]))):(0,u.c)("Success").ngettext((0,u.msgid)(Y4||(Y4=(0,d.Z)([""," draft deleted"])),n),"".concat(n," drafts deleted"),n):t?1===n?1===r?(0,u.c)("Success").t(U4||(U4=(0,d.Z)(["Message deleted"]))):(0,u.c)("Success").t(F4||(F4=(0,d.Z)(["Conversation deleted"]))):(0,u.c)("Success").ngettext((0,u.msgid)(K4||(K4=(0,d.Z)([""," conversation deleted"])),n),"".concat(n," conversations deleted"),n):1===n?(0,u.c)("Success").t(B4||(B4=(0,d.Z)(["Message deleted"]))):(0,u.c)("Success").ngettext((0,u.msgid)(W4||(W4=(0,d.Z)([""," message deleted"])),n),"".concat(n," messages deleted"),n),usePermanentDelete=e=>{const{createNotification:t}=(0,hn.Z)(),{createModal:n}=(0,In.Z)(),{call:r}=(0,Ie.Z)(),a=(0,Dn.Z)(),o=useGetElementsFromIDs(),s=optimistic_useOptimisticDelete();return async i=>{const c=i.length,l=e===Q4||e===H4,p=o(i),m=p.reduce(((e,t)=>e+("ContextNumMessages"in t&&t.ContextNumMessages||0)),0),g=elements_isConversation(p[0]),b=getDeleteTitle(l,g,c,m),y=getModalText(l,g,c,m);await new Promise(((e,t)=>{n((0,j.jsx)(modal_Confirm,{title:b,confirm:(0,j.jsx)(po,{type:"submit",children:(0,u.c)("Action").t(V4||(V4=(0,d.Z)(["Delete"])))}),onConfirm:()=>e(void 0),onClose:t,children:(0,j.jsx)(Cn.Z,{className:"mb1",type:"error",children:y})}))}));const h=s(p,e);try{const n=g?(0,mx.S9)(i,e):(0,En.qP)(i);await a(n),await r();const o=getNotificationText(l,g,c,m);t({text:o})}catch(e){h()}}};var X4,J4,q4;var $4,e1,t1,n1,r1,a1,o1,s1,i1,c1,l1,d1,u1,p1,m1,toolbar_DeleteButton=({labelID:e="",selectedIDs:t=[]})=>{const[n,r]=(0,no.Z)(),[{Shortcuts:a=0}={}]=useMailSettings(),o=usePermanentDelete(e),s=a?(0,j.jsxs)(j.Fragment,{children:[(0,u.c)("Action").t(X4||(X4=(0,d.Z)(["Delete permanently"]))),(0,j.jsx)("br",{}),(0,j.jsx)("kbd",{className:"no-border",children:mr.OI})," + ",(0,j.jsx)("kbd",{className:"no-border",children:"Backspace"})]}):(0,u.c)("Action").t(J4||(J4=(0,d.Z)(["Delete permanently"])));return(0,j.jsx)(j4,{title:s,onClick:()=>r((async()=>{await o(t)})()),disabled:n||!t.length,"data-testid":"toolbar:deletepermanently",icon:(0,j.jsx)(pr.Z,{name:"circle-xmark",alt:(0,u.c)("Action").t(q4||(q4=(0,d.Z)(["Delete permanently"])))})})};const{TRASH:g1,SPAM:j1,DRAFTS:b1,ARCHIVE:y1,SENT:h1,INBOX:I1,ALL_DRAFTS:f1,ALL_SENT:M1,STARRED:N1,ALL_MAIL:x1,SCHEDULED:v1}=M.C7;var toolbar_MoveButtons=({labelID:e="",elementID:t,labels:n=[],folders:r=[],breakpoints:a,selectedIDs:o=[],onBack:s})=>{const[i,c]=(0,no.Z)(),l=useMoveToFolder(),p=n.map((({ID:e})=>e)),m=useGetElementsFromIDs(),[{Shortcuts:g=0}={}]=useMailSettings(),handleMove=async n=>{const a=getFolderName(n,r),i=p.includes(e)?I1:e,c=m(o);await l(c,n,a,i),o.includes(t||"")&&s()},b=g?(0,j.jsxs)(j.Fragment,{children:[(0,u.c)("Action").t($4||($4=(0,d.Z)(["Move to inbox"]))),(0,j.jsx)("br",{}),(0,j.jsx)("kbd",{className:"no-border",children:"I"})]}):(0,u.c)("Action").t(e1||(e1=(0,d.Z)(["Move to inbox"]))),y=(0,j.jsx)(j4,{title:b,onClick:()=>c(handleMove(I1)),disabled:i||!o.length,"data-testid":"toolbar:movetoinbox",icon:(0,j.jsx)(pr.Z,{name:"inbox",alt:(0,u.c)("Action").t(t1||(t1=(0,d.Z)(["Move to inbox"])))})},"inbox"),h=g?(0,j.jsxs)(j.Fragment,{children:[(0,u.c)("Action").t(n1||(n1=(0,d.Z)(["Move to archive"]))),(0,j.jsx)("br",{}),(0,j.jsx)("kbd",{className:"no-border",children:"A"})]}):(0,u.c)("Action").t(r1||(r1=(0,d.Z)(["Move to archive"]))),I=(0,j.jsx)(j4,{title:h,onClick:()=>c(handleMove(y1)),disabled:!o.length,"data-testid":"toolbar:movetoarchive",icon:(0,j.jsx)(pr.Z,{name:"box-archive",alt:(0,u.c)("Action").t(a1||(a1=(0,d.Z)(["Move to archive"])))})},"archive"),f=g?(0,j.jsxs)(j.Fragment,{children:[(0,u.c)("Action").t(o1||(o1=(0,d.Z)(["Move to spam"]))),(0,j.jsx)("br",{}),(0,j.jsx)("kbd",{className:"no-border",children:"S"})]}):(0,u.c)("Action").t(s1||(s1=(0,d.Z)(["Move to spam"]))),M=(0,j.jsx)(j4,{title:f,onClick:()=>c(handleMove(j1)),disabled:i||!o.length,"data-testid":"toolbar:movetospam",icon:(0,j.jsx)(pr.Z,{name:"fire",alt:(0,u.c)("Action").t(i1||(i1=(0,d.Z)(["Move to spam"])))})},"spam"),N=g?(0,j.jsxs)(j.Fragment,{children:[(0,u.c)("Action").t(c1||(c1=(0,d.Z)(["Move to inbox (not spam)"]))),(0,j.jsx)("br",{}),(0,j.jsx)("kbd",{className:"no-border",children:"I"})]}):(0,u.c)("Action").t(l1||(l1=(0,d.Z)(["Move to inbox (not spam)"]))),x=(0,j.jsx)(j4,{title:N,onClick:()=>c(handleMove(I1)),disabled:i||!o.length,"data-testid":"toolbar:movetonospam",icon:(0,j.jsx)(pr.Z,{name:"fire-slash",alt:(0,u.c)("Action").t(d1||(d1=(0,d.Z)(["Move to inbox (not spam)"])))})},"nospam"),v=g?(0,j.jsxs)(j.Fragment,{children:[(0,u.c)("Action").t(u1||(u1=(0,d.Z)(["Move to trash"]))),(0,j.jsx)("br",{}),(0,j.jsx)("kbd",{className:"no-border",children:"T"})]}):(0,u.c)("Action").t(p1||(p1=(0,d.Z)(["Move to trash"]))),w=(0,j.jsx)(j4,{title:v,onClick:()=>c(handleMove(g1)),disabled:i||!o.length,"data-testid":"toolbar:movetotrash",icon:(0,j.jsx)(pr.Z,{name:"trash",alt:(0,u.c)("Action").t(m1||(m1=(0,d.Z)(["Move to trash"])))})},"trash"),D=(0,j.jsx)(toolbar_DeleteButton,{labelID:e,selectedIDs:o},"delete");let S=[];return a.isNarrow?S=e===j1||e===g1?[D]:[w]:e===I1?S=[w,I,M]:e===b1||e===f1||e===h1||e===M1?S=[w,I,D]:e===v1?S=[w,I]:e===N1?S=[w,I,M]:e===y1?S=[w,y,M]:e===j1?S=[w,x,D]:e===g1?S=[y,I,D]:(e===x1||((e,t=[])=>t.some((t=>t.ID===e)))(e,r)||labels_isCustomLabel(e,n))&&(S=[w,I,M]),(0,j.jsx)(j.Fragment,{children:S})};function useOptimisticEmptyLabel_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function useOptimisticEmptyLabel_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?useOptimisticEmptyLabel_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):useOptimisticEmptyLabel_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const useOptimisticEmptyLabel=()=>{const e=(0,i.oR)(),t=(0,i.I0)(),n=(0,Ln.Z)(),r=useMessageCache(),a=useGetAllConversations();return(0,mn.ZP)((o=>{const s=[],i=[],c={};[...r.keys()].forEach((e=>{const t=r.get(e);hasLabel(t.data,o)&&(r.delete(e),s.push(t))}));a().forEach((e=>{if(null!=e&&e.Conversation.ID&&hasLabel(e.Conversation,o))t(sv(null==e?void 0:e.Conversation.ID)),i.push(e);else if(null!=e&&e.Messages){var n,r;const a=null===(n=e.Messages)||void 0===n?void 0:n.filter((e=>!hasLabel(e,o)));e&&(null==a?void 0:a.length)!==(null==e||null===(r=e.Messages)||void 0===r?void 0:r.length)&&(t(iv({ID:e.Conversation.ID,messages:a})),i.push(e))}}));const l=Object.values(e.getState().elements.elements);t(Sx());const d=n.get(RN.L.key);c[RN.L.key]=d.value.find((e=>e.LabelID===o)),n.set(RN.L.key,useOptimisticEmptyLabel_objectSpread(useOptimisticEmptyLabel_objectSpread({},d),{},{value:replaceCounter(d.value,{LabelID:o,Total:0,Unread:0})}));const u=n.get(_N.E.key);return c[_N.E.key]=u.value.find((e=>e.LabelID===o)),n.set(_N.E.key,useOptimisticEmptyLabel_objectSpread(useOptimisticEmptyLabel_objectSpread({},u),{},{value:replaceCounter(u.value,{LabelID:o,Total:0,Unread:0})})),()=>{s.forEach((e=>{r.set(e.localID,e)})),t(cv(i)),t(Ox({elements:l})),Object.entries(c).forEach((([e,t])=>{const r=n.get(e);n.set(e,useOptimisticEmptyLabel_objectSpread(useOptimisticEmptyLabel_objectSpread({},r),{},{value:replaceCounter(r.value,t)}))}))}}))};var w1,D1,S1,O1,A1,C1,E1,L1;var P1,Z1;const{DRAFTS:T1,ALL_DRAFTS:k1,ALL_MAIL:z1,INBOX:_1,SENT:R1,ALL_SENT:G1,ARCHIVE:Y1,STARRED:U1,SCHEDULED:F1}=M.C7;var K1,B1,W1,V1,Q1,H1,X1,J1,q1,$1,toolbar_MoreDropdown=({labelID:e="",elementIDs:t=[],selectedIDs:n=[]})=>{const[r,a]=(0,no.Z)(),i=(()=>{const{createNotification:e}=(0,hn.Z)(),{createModal:t}=(0,In.Z)(),{call:n}=(0,Ie.Z)(),r=(0,Dn.Z)(),a=useOptimisticEmptyLabel(),[s=[]]=useLabels(),[i=[]]=useFolders();return(0,o.useCallback)((async o=>{const i=labels_isCustomLabel(o,s);await new Promise(((e,n)=>{t((0,j.jsxs)(modal_Confirm,{title:(0,u.c)("Title").t(w1||(w1=(0,d.Z)(["Delete all messages"]))),confirm:(0,j.jsx)(po,{type:"submit","data-testid":"confirm-empty-folder",children:(0,u.c)("Action").t(D1||(D1=(0,d.Z)(["Delete"])))}),onConfirm:()=>e(void 0),onClose:n,children:[(0,j.jsx)(Cn.Z,{className:"mb1",type:"info",children:i?(0,u.c)("Info").t(S1||(S1=(0,d.Z)(["All messages stored with this label will be permanently deleted."]))):(0,u.c)("Info").t(O1||(O1=(0,d.Z)(["All messages stored in this folder will be permanently deleted."])))}),(0,j.jsx)(Cn.Z,{className:"mb1",type:"error",children:i?(0,u.c)("Info").t(A1||(A1=(0,d.Z)(["Are you sure you want to delete all messages with this label?"]))):(0,u.c)("Info").t(C1||(C1=(0,d.Z)(["Are you sure you want to delete all messages in this folder?"])))})]}))}));const c=a(o);try{await r((0,En.aC)({LabelID:o,AddressID:void 0}))}catch(e){throw c(),e}await n(),e({text:i?(0,u.c)("Success").t(E1||(E1=(0,d.Z)(["Label cleared"]))):(0,u.c)("Success").t(L1||(L1=(0,d.Z)(["Folder cleared"])))})}),[s,i])})(),c=(0,s.TH)(),l=extractSearchParameters(c);if(labelIncludes(e,_1,T1,k1,U1,R1,G1,Y1,z1,F1))return null;const handleEmptyLabel=()=>a(i(e));return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(toolbar_ToolbarDropdown,{title:(0,u.c)("Action").t(P1||(P1=(0,d.Z)(["More"]))),content:(0,j.jsx)(pr.Z,{className:"toolbar-icon",name:"ellipsis-vertical"}),"data-testid":"toolbar:more-dropdown",hasCaret:!1,children:()=>(0,j.jsx)(dropdown_DropdownMenu,{children:(0,j.jsx)(Do.Z,{"data-testid":"toolbar:empty",loading:r,disabled:!t.length||!!n.length||elements_isSearch(l),className:"text-left color-danger",onClick:handleEmptyLabel,children:(0,u.c)("Action").t(Z1||(Z1=(0,d.Z)(["Delete all"])))})})}),(0,j.jsx)(N4,{})]})};var e2,t2,n2,r2,a2,o2,s2,i2,toolbar_SelectAll=({labelID:e,loading:t,disabled:n,elementIDs:r,checkedIDs:a,onCheck:o})=>{const s=useGetElementsFromIDs(),i=!!r.length&&r.length===a.length,handleAll=e=>()=>o(r,e,!0),handleRead=t=>()=>o(s(r).filter((n=>t===!elements_isUnread(n,e))).map((({ID:e=""})=>e)),!0,!0),handleStarred=e=>()=>o(s(r).filter((t=>e===elements_isStarred(t))).map((({ID:e=""})=>e)),!0,!0);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(ur.Z,{title:i?(0,u.c)("Action").t(K1||(K1=(0,d.Z)(["Deselect all messages"]))):(0,u.c)("Action").t(B1||(B1=(0,d.Z)(["Select all messages"]))),children:(0,j.jsx)("span",{className:"flex ml0-5 pl1 ",children:(0,j.jsx)(Nr,{className:"select-all",checked:i,id:"idSelectAll",disabled:n,loading:t,onChange:({target:e})=>handleAll(e.checked)(),"data-testid":"toolbar:select-all-checkbox",children:(0,j.jsx)("span",{className:"sr-only",children:i?(0,u.c)("Action").t(W1||(W1=(0,d.Z)(["Deselect all messages"]))):(0,u.c)("Action").t(V1||(V1=(0,d.Z)(["Select all messages"])))})})})}),(0,j.jsx)(toolbar_ToolbarDropdown,{disabled:n,loading:t,title:(0,u.c)("Title").t(Q1||(Q1=(0,d.Z)(["More selections"]))),"data-testid":"toolbar:select-all-dropdown",children:()=>(0,j.jsxs)(dropdown_DropdownMenu,{children:[(0,j.jsxs)(Do.Z,{className:"text-left",onClick:handleAll(!0),"data-testid":"toolbar:select-all",children:[(0,j.jsx)(pr.Z,{name:"check-triple",className:"mr0-5"}),(0,u.c)("Action").t(H1||(H1=(0,d.Z)(["Select All"])))]}),(0,j.jsxs)(Do.Z,{className:"text-left",onClick:handleRead(!0),"data-testid":"toolbar:all-read",children:[(0,j.jsx)(pr.Z,{name:"eye",className:"mr0-5"}),(0,u.c)("Action").t(X1||(X1=(0,d.Z)(["All Read"])))]}),(0,j.jsxs)(Do.Z,{className:"text-left",onClick:handleRead(!1),"data-testid":"toolbar:all-unread",children:[(0,j.jsx)(pr.Z,{name:"eye-slash",className:"mr0-5"}),(0,u.c)("Action").t(J1||(J1=(0,d.Z)(["All Unread"])))]}),(0,j.jsxs)(Do.Z,{className:"text-left",onClick:handleStarred(!0),"data-testid":"toolbar:all-starred",children:[(0,j.jsx)(pr.Z,{name:"star-filled",className:"mr0-5"}),(0,u.c)("Action").t(q1||(q1=(0,d.Z)(["All Starred"])))]}),(0,j.jsxs)(Do.Z,{className:"text-left",onClick:handleStarred(!1),"data-testid":"toolbar:all-unstarred",children:[(0,j.jsx)(pr.Z,{name:"star",className:"mr0-5"}),(0,u.c)("Action").t($1||($1=(0,d.Z)(["All Unstarred"])))]})]})})]})};function MoveDropdown_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function MoveDropdown_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MoveDropdown_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MoveDropdown_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const{INBOX:c2,TRASH:l2,SPAM:d2,ARCHIVE:u2}=M.C7,MoveDropdown_folderReducer=(e,t,n=0)=>{var r;return e.push(MoveDropdown_objectSpread(MoveDropdown_objectSpread({},t),{},{Name:t.Name,icon:null!==(r=t.subfolders)&&void 0!==r&&r.length?"folders":"folder",level:n})),Array.isArray(t.subfolders)&&t.subfolders.forEach((t=>MoveDropdown_folderReducer(e,t,n+1))),e};var p2,m2,g2,j2,b2,y2,h2,dropdown_MoveDropdown=({selectedIDs:e,labelID:t,conversationMode:n,onClose:r,onLock:a,onBack:s,breakpoints:i})=>{const[c]=(0,o.useState)((0,ht.D)("move-dropdown")),[l,p]=(0,no.Z)(),{createModal:m}=(0,In.Z)(),[g=[]]=useFolders(),[b,y]=(0,o.useState)(""),[h,I]=(0,o.useState)(!0),f=(0,br.Fv)(b,!0),M=useGetElementsFromIDs(),N=useMoveToFolder();(0,o.useEffect)((()=>a(!h)),[h]);const x=buildTreeview(g),v=M(e),w=elements_isMessage(v[0]),D=!w||!!getMessagesAuthorizedToMove(v,c2).length,S=!w||!!getMessagesAuthorizedToMove(v,d2).length,O=x.reduce(((e,t)=>MoveDropdown_folderReducer(e,t)),[]).concat([D&&{ID:c2,Name:(0,u.c)("Mailbox").t(e2||(e2=(0,d.Z)(["Inbox"]))),icon:"inbox"},{ID:u2,Name:(0,u.c)("Mailbox").t(t2||(t2=(0,d.Z)(["Archive"]))),icon:"box-archive"},S&&{ID:d2,Name:(0,u.c)("Mailbox").t(n2||(n2=(0,d.Z)(["Spam"]))),icon:"fire"},{ID:l2,Name:(0,u.c)("Mailbox").t(r2||(r2=(0,d.Z)(["Trash"]))),icon:"trash"}]).filter(Za.Z).filter((({Name:e=""})=>{if(!b)return!0;return(0,br.Fv)(e,!0).includes(f)})),A="".concat(c,"-search"),C=!i.isNarrow;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"flex flex-justify-space-between flex-align-items-center m1 mb0",children:[(0,j.jsx)("span",{className:"text-bold",tabIndex:-2,children:(0,u.c)("Label").t(a2||(a2=(0,d.Z)(["Move to"])))}),(0,j.jsx)(ur.Z,{title:(0,u.c)("Title").t(o2||(o2=(0,d.Z)(["Create folder"]))),children:(0,j.jsxs)(Ea.Z,{icon:!0,color:"norm",size:"small",onClick:()=>{I(!1),m((0,j.jsx)(modals_EditLabelModal,{type:"folder",onClose:()=>I(!0)}))},className:"flex flex-align-items-center","data-testid":"folder-dropdown:add-folder","data-prevent-arrow-navigation":!0,children:[(0,j.jsx)(pr.Z,{name:"folder"})," +"]})})]}),(0,j.jsx)("div",{className:"m1 mb0",children:(0,j.jsx)(Ir,{value:b,onChange:y,id:A,placeholder:(0,u.c)("Placeholder").t(s2||(s2=(0,d.Z)(["Filter folders"]))),autoFocus:C,"data-testid":"folder-dropdown:search-folder","data-prevent-arrow-navigation":!0})}),(0,j.jsx)("div",{className:"scroll-if-needed scroll-smooth-touch mt1 move-dropdown-list-container","data-testid":"move-dropdown-list",children:(0,j.jsxs)("ul",{className:"unstyled mt0 mb0",children:[O.map((e=>{return(0,j.jsx)("li",{className:"dropdown-item",children:(0,j.jsxs)("button",{id:(a=e.ID,"".concat(c,"-").concat(a)),"data-level":e.level,type:"button",disabled:l,className:"dropdown-item-button w100 flex flex-nowrap flex-align-items-center pl1 pr1 pt0-5 pb0-5",onClick:()=>p((async e=>{await N(v,(null==e?void 0:e.ID)||"",(null==e?void 0:e.Name)||"",t),r(),w&&n||s()})(e)),"data-testid":"folder-dropdown:folder-".concat(e.Name),children:[(0,j.jsx)(labels_FolderIcon,{folder:e,name:e.icon,className:"flex-item-noshrink mr0-5"}),(0,j.jsx)("span",{className:"text-ellipsis",title:e.Name,children:(0,j.jsx)(Kl,{value:b,children:e.Name})})]})},e.ID);var a})),0===O.length&&(0,j.jsx)("li",{className:"dropdown-item w100 pt0-5 pb0-5 pl1 pr1",children:(0,u.c)("Info").t(i2||(i2=(0,d.Z)(["No folder found"])))},"empty")]})})]})};function LabelDropdown_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function LabelDropdown_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?LabelDropdown_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LabelDropdown_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e.On="On",e.Off="Off",e.Indeterminate="Indeterminate"}(h2||(h2={}));const{On:I2,Off:f2,Indeterminate:M2}=h2,LabelDropdown_getInitialState=(e=[],t=[])=>{const n={},r=t.map((e=>elements_getLabelIDs(e,void 0)));return e.forEach((({ID:e=""})=>{const a=r.reduce(((t,n)=>(void 0===n[e]?t[f2]+=1:n[e]?t[I2]+=1:t[M2]+=1,t)),{[I2]:0,[f2]:0,[M2]:0});n[e]=a[f2]===t.length?f2:a[I2]===t.length?I2:M2})),n};var dropdown_LabelDropdown=({selectedIDs:e,labelID:t,labels:n=[],onClose:r,onLock:a,breakpoints:s})=>{const i=n.map((({ID:e})=>e)),[l]=(0,o.useState)((0,ht.D)("label-dropdown")),[p,m]=(0,no.Z)(),{createModal:g}=(0,In.Z)(),[b,y]=(0,o.useState)(""),[h,I]=(0,o.useState)(!0),[f,N]=(0,o.useState)(""),[x,v]=(0,o.useState)(!1),w=useGetElementsFromIDs(),D=useApplyLabels(),S=useMoveToFolder(),O=(0,o.useMemo)((()=>LabelDropdown_getInitialState(n,w(e))),[e,n,t]),[A,C]=(0,o.useState)(O);if((0,o.useEffect)((()=>a(!h)),[h]),!e||!e.length)return null;const E="".concat(l,"-search"),L="".concat(l,"-archive"),labelCheckID=e=>"".concat(l,"-").concat(e),P=(0,WI.Z)(O,A)&&!x,Z=!s.isNarrow,T=(0,br.Fv)(b,!0),k=n.filter((({Name:e=""})=>{if(!b)return!0;return(0,br.Fv)(e,!0).includes(T)})),handleApply=async(a=A)=>{const o=(0,WI.Z)(O,a),s=[],c=w(e);if(!o){const e=LabelDropdown_getInitialState(n,c),t=Object.keys(a).reduce(((t,n)=>(a[n]===h2.On&&e[n]!==h2.On&&(t[n]=!0),a[n]===h2.Off&&e[n]!==h2.Off&&(t[n]=!1),t)),{});s.push(D(c,t))}if(x){const e=getStandardFolders()[M._t.archive].name,n=i.includes(t)?M._t.inbox:t;s.push(S(c,M._t.archive,e,n))}await Promise.all(s),r()},handleClickIcon=e=>()=>handleApply({[e]:h2.On}),applyCheck=(e,t)=>{const n=e.reduce(((e,n)=>(e[n]=t?h2.On:h2.Off,e)),{});C(LabelDropdown_objectSpread(LabelDropdown_objectSpread({},A),n))},handleCheck=e=>({target:t,nativeEvent:n})=>{const{shiftKey:r}=n,a=[e];if(f&&r){const t=k.findIndex((({ID:t})=>t===e)),n=k.findIndex((({ID:e})=>e===f));a.push(...k.slice(Math.min(t,n),Math.max(t,n)+1).map((({ID:e=""})=>e)))}N(e),applyCheck(a,t.checked)};return(0,j.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),await m(handleApply())},children:[(0,j.jsxs)("div",{className:"flex flex-justify-space-between flex-align-items-center m1 mb0",children:[(0,j.jsx)("span",{className:"text-bold",tabIndex:-2,children:(0,u.c)("Label").t(p2||(p2=(0,d.Z)(["Label as"])))}),(0,j.jsx)(ur.Z,{title:(0,u.c)("Title").t(m2||(m2=(0,d.Z)(["Create label"]))),children:(0,j.jsxs)(Ea.Z,{icon:!0,color:"norm",size:"small",onClick:()=>{I(!1);const e={Name:b,Color:M.dI[(0,c.lv)(0,M.dI.length-1)],Type:M.L7.MESSAGE_LABEL};g((0,j.jsx)(modals_EditLabelModal,{label:e,onAdd:e=>(e=>{applyCheck([(null==e?void 0:e.ID)||""],!0)})(e),onClose:()=>I(!0)}))},className:"flex flex-align-items-center","data-testid":"label-dropdown:add-label","data-prevent-arrow-navigation":!0,children:[(0,j.jsx)(pr.Z,{name:"tag"})," +"]})})]}),(0,j.jsx)("div",{className:"m1 mb0",children:(0,j.jsx)(Ir,{value:b,onChange:y,id:E,placeholder:(0,u.c)("Placeholder").t(g2||(g2=(0,d.Z)(["Filter labels"]))),autoFocus:Z,"data-test-selector":"label-dropdown:search-label","data-prevent-arrow-navigation":!0})}),(0,j.jsx)("div",{className:"scroll-if-needed scroll-smooth-touch mt1 label-dropdown-list-container","data-testid":"label-dropdown-list",children:(0,j.jsxs)("ul",{className:"unstyled mt0 mb0",children:[k.map((({ID:e="",Name:t="",Color:n=""})=>(0,j.jsxs)("li",{className:"dropdown-item dropdown-item-button relative cursor-pointer w100 flex flex-nowrap flex-align-items-center pt0-5 pb0-5 pl1 pr1",children:[(0,j.jsxs)("label",{htmlFor:labelCheckID(e),title:t,className:"flex flex-nowrap flex-align-items-center increase-click-surface flex-item-fluid","data-testid":"label-dropdown:label-".concat(t),children:[(0,j.jsx)(pr.Z,{name:"circle-filled",size:12,color:n,className:"flex-item-noshrink relative ml0-25 mr0-5",onClick:handleClickIcon(e)}),(0,j.jsx)("span",{className:"text-ellipsis",children:(0,j.jsx)(Kl,{value:b,children:t})})]}),(0,j.jsx)(Nr,{className:"flex-item-noshrink",id:labelCheckID(e),checked:A[e]===h2.On,indeterminate:A[e]===h2.Indeterminate,onChange:handleCheck(e),"data-testid":"label-dropdown:label-checkbox-".concat(t)})]},e))),0===k.length&&(0,j.jsx)("li",{className:"dropdown-item w100 pt0-5 pb0-5 pl1 pr1",children:(0,u.c)("Info").t(j2||(j2=(0,d.Z)(["No label found"])))},"empty")]})}),(0,j.jsxs)("div",{className:"flex m1 mb0",children:[(0,j.jsx)(Nr,{id:L,checked:x,onChange:({target:e})=>v(e.checked),"data-testid":"label-dropdown:also-archive","data-prevent-arrow-navigation":!0}),(0,j.jsx)("label",{htmlFor:L,className:"flex-item-fluid",children:(0,u.c)("Label").t(b2||(b2=(0,d.Z)(["Also archive"])))})]}),(0,j.jsx)("div",{className:"m1",children:(0,j.jsx)(yr.Z,{className:"w100",loading:p,disabled:P,"data-testid":"label-dropdown:apply","data-prevent-arrow-navigation":!0,type:"submit",children:(0,u.c)("Action").t(y2||(y2=(0,d.Z)(["Apply"])))})})]})};const usePaging=(e,t,n)=>{const getPage=()=>e+1,getTotal=()=>void 0===t?0:pageCount(t),[r,a]=(0,o.useState)(getPage),[s,i]=(0,o.useState)(getTotal);(0,o.useEffect)((()=>{a(getPage),i(getTotal)}),[e,t]);return{onNext:(0,o.useCallback)((()=>n(e===s-1?s-1:e+1)),[n,e,s]),onPrevious:(0,o.useCallback)((()=>n(0===e?0:e-1)),[n,e]),onPage:(0,o.useCallback)((e=>n(e-1)),[n]),onStart:(0,o.useCallback)((()=>n(0)),[n]),onEnd:(0,o.useCallback)((()=>n(s-1)),[n,s]),page:r,total:s}};var N2,x2,v2,w2,D2,S2,O2,A2;var C2,E2,L2,P2,Z2,T2,k2,z2,_2,R2,G2,Y2,toolbar_PagingControls=({loading:e,page:t,total:n,onPage:r})=>{const a=(0,s.TH)(),{onPrevious:o,onNext:i,onPage:c,page:l,total:p}=usePaging(t,n,r),{getESDBStatus:m}=useEncryptedSearchContext(),{dbExists:g,esEnabled:b,isSearchPartial:y,isCacheLimited:h,isSearching:I}=m(),f=extractSearchParameters(a),M=elements_isSearch(f)&&!e&&g&&b&&h&&y,N=I?(0,j.jsx)("div",{className:"flex flex-justify-center",children:(0,j.jsx)(Oh.Z,{})}):(0,j.jsx)(Do.Z,{className:"text-underline",onClick:()=>c(p),"aria-label":(0,u.c)("Action").t(N2||(N2=(0,d.Z)(["Load more"]))),children:(0,u.c)("Action").t(x2||(x2=(0,d.Z)(["Load more"])))});return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(j4,{disabled:e||l<=1,title:(0,u.c)("Action").t(v2||(v2=(0,d.Z)(["Previous page"]))),onClick:o,className:"no-tablet no-mobile on-rtl-mirror",icon:(0,j.jsx)(pr.Z,{className:"rotateZ-90",name:"angle-down",alt:(0,u.c)("Action").t(w2||(w2=(0,d.Z)(["Previous page"])))}),"data-testid":"toolbar:previous-page"}),(0,j.jsx)(toolbar_ToolbarDropdown,{title:(0,u.c)("Action").t(D2||(D2=(0,d.Z)(["Change page"]))),content:String(l),disabled:p<=1,size:"narrow","data-testid":"toolbar:page-number-dropdown",children:()=>(0,j.jsxs)(dropdown_DropdownMenu,{children:[[...Array(p)].map(((t,n)=>{const r=n+1;return(0,j.jsx)(Do.Z,{loading:e,disabled:l-1===n,onClick:()=>c(n+1),"aria-label":(0,u.c)("Action").t(S2||(S2=(0,d.Z)(["Page ",""])),r),"data-testid":"toolbar:page-number-".concat(r),children:r},n)})),M&&N]})}),(0,j.jsx)(j4,{disabled:e||l>=p,title:(0,u.c)("Action").t(O2||(O2=(0,d.Z)(["Next page"]))),onClick:i,className:"no-tablet no-mobile on-rtl-mirror",icon:(0,j.jsx)(pr.Z,{className:"rotateZ-270",name:"angle-down",alt:(0,u.c)("Action").t(A2||(A2=(0,d.Z)(["Next page"])))}),"data-testid":"toolbar:next-page"})]})};var U2,F2,K2,B2,W2,toolbar_NavigationControls=({loading:e,conversationMode:t,elementID:n,messageID:r,elementIDs:a,onElement:o,labelID:s,mailSettings:i,location:c})=>{const l=!isConversationMode(s,i,c)&&r?r:n,p=a.findIndex((e=>e===l)),[{Shortcuts:m=1}={}]=useMailSettings(),g=m?(0,j.jsxs)(j.Fragment,{children:[(0,u.c)("Title").t(C2||(C2=(0,d.Z)(["Previous conversation"]))),(0,j.jsx)("br",{}),(0,j.jsx)("kbd",{className:"no-border",children:"K"})]}):(0,u.c)("Title").t(E2||(E2=(0,d.Z)(["Previous conversation"]))),b=m?(0,j.jsxs)(j.Fragment,{children:[(0,u.c)("Title").t(L2||(L2=(0,d.Z)(["Previous message"]))),(0,j.jsx)("br",{}),(0,j.jsx)("kbd",{className:"no-border",children:"K"})]}):(0,u.c)("Title").t(P2||(P2=(0,d.Z)(["Previous message"]))),y=m?(0,j.jsxs)(j.Fragment,{children:[(0,u.c)("Title").t(Z2||(Z2=(0,d.Z)(["Next conversation"]))),(0,j.jsx)("br",{}),(0,j.jsx)("kbd",{className:"no-border",children:"J"})]}):(0,u.c)("Title").t(T2||(T2=(0,d.Z)(["Next conversation"]))),h=m?(0,j.jsxs)(j.Fragment,{children:[(0,u.c)("Title").t(k2||(k2=(0,d.Z)(["Next message"]))),(0,j.jsx)("br",{}),(0,j.jsx)("kbd",{className:"no-border",children:"J"})]}):(0,u.c)("Title").t(z2||(z2=(0,d.Z)(["Next message"])));return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(j4,{disabled:e||p<=0,title:t?g:b,onClick:()=>o(a[p-1],!0),className:"no-tablet no-mobile",icon:(0,j.jsx)(pr.Z,{className:"rotateZ-90",name:"angle-down",alt:t?(0,u.c)("Action").t(_2||(_2=(0,d.Z)(["Previous conversation"]))):(0,u.c)("Action").t(R2||(R2=(0,d.Z)(["Previous message"])))})}),(0,j.jsx)(j4,{disabled:e||p>=a.length-1,title:t?y:h,onClick:()=>o(a[p+1],!0),className:"no-tablet no-mobile",icon:(0,j.jsx)(pr.Z,{className:"rotateZ-270",name:"angle-down",alt:t?(0,u.c)("Action").t(G2||(G2=(0,d.Z)(["Next conversation"]))):(0,u.c)("Action").t(Y2||(Y2=(0,d.Z)(["Next message"])))})})]})};const V2=[],Toolbar=({labelID:e="",messageID:t,elementID:n,onCheck:r,mailSettings:a,columnMode:o,conversationMode:s,breakpoints:i,selectedIDs:c=V2,checkedIDs:l,elementIDs:p,loading:m=!1,onBack:g,page:b,total:y,onPage:h,onElement:I,labelDropdownToggleRef:f,moveDropdownToggleRef:M,location:N})=>{const[x]=useLabels(),[v]=useFolders(),w=o||!n,[{Shortcuts:D=0}={}]=useMailSettings(),S=D?(0,j.jsxs)(j.Fragment,{children:[(0,u.c)("Title").t(U2||(U2=(0,d.Z)(["Move to"]))),(0,j.jsx)("br",{}),(0,j.jsx)("kbd",{className:"no-border",children:"M"})]}):(0,u.c)("Title").t(F2||(F2=(0,d.Z)(["Move to"]))),O=D?(0,j.jsxs)(j.Fragment,{children:[(0,u.c)("Title").t(K2||(K2=(0,d.Z)(["Label as"]))),(0,j.jsx)("br",{}),(0,j.jsx)("kbd",{className:"no-border",children:"L"})]}):(0,u.c)("Title").t(B2||(B2=(0,d.Z)(["Label as"])));return(0,j.jsxs)("nav",{className:"toolbar toolbar--heavy flex no-print flex-justify-space-between",children:[(0,j.jsxs)("div",{className:"flex",children:[w?(0,j.jsx)(toolbar_SelectAll,{labelID:e,elementIDs:p,checkedIDs:l,onCheck:r,loading:m}):(0,j.jsx)(j4,{icon:(0,j.jsx)(pr.Z,{name:"arrow-left",alt:(0,u.c)("Action").t(W2||(W2=(0,d.Z)(["Back"])))}),onClick:g,"data-testid":"toolbar:back-button"}),(0,j.jsx)(N4,{}),(0,j.jsx)(toolbar_ReadUnreadButtons,{mailSettings:a,selectedIDs:c,onBack:g,labelID:e}),(0,j.jsx)(N4,{}),(0,j.jsx)(toolbar_MoveButtons,{labelID:e,elementID:n,labels:x,folders:v,breakpoints:i,selectedIDs:c,onBack:g}),(0,j.jsx)(N4,{}),(0,j.jsx)(toolbar_ToolbarDropdown,{autoClose:!1,noMaxSize:!0,disabled:!c||!c.length,content:(0,j.jsx)(pr.Z,{className:"toolbar-icon",name:"folder"}),dropDownClassName:"move-dropdown",className:"move-dropdown-button",title:S,"data-testid":"toolbar:moveto",externalToggleRef:M,children:({onClose:t,onLock:n})=>(0,j.jsx)(dropdown_MoveDropdown,{labelID:e,selectedIDs:c,conversationMode:s,onClose:t,onLock:n,onBack:g,breakpoints:i})}),(0,j.jsx)(toolbar_ToolbarDropdown,{autoClose:!1,noMaxSize:!0,disabled:!c||!c.length,content:(0,j.jsx)(pr.Z,{className:"toolbar-icon",name:"tag"}),dropDownClassName:"label-dropdown",className:"label-dropdown-button",title:O,"data-testid":"toolbar:labelas",externalToggleRef:f,children:({onClose:t,onLock:n})=>(0,j.jsx)(dropdown_LabelDropdown,{labelID:e,labels:x,selectedIDs:c,onClose:t,onLock:n,breakpoints:i})})]}),(0,j.jsxs)("div",{className:"flex",children:[i.isDesktop&&(0,j.jsx)(toolbar_MoreDropdown,{labelID:e,elementIDs:p,selectedIDs:c}),w?(0,j.jsx)(toolbar_PagingControls,{loading:m,page:b,total:y,onPage:h}):(0,j.jsx)(toolbar_NavigationControls,{loading:m,conversationMode:s,elementID:n,messageID:t,elementIDs:p,onElement:I,labelID:e,mailSettings:a,location:N})]})]})};var Q2,H2,X2,J2,q2,$2,e3,t3,n3,r3=(0,o.memo)(Toolbar);const PaginationRow=({onStart:e,onEnd:t,onPrevious:n,onNext:r,onPage:a,page:o,disabled:s,total:i,step:c=1,className:l,disableGoToLast:p=!1})=>{const m=(0,xe.w6)(o-c,o+c+1).filter((e=>e>0&&e<=i)),goToPageTitle=e=>(0,u.c)("Action").t(Q2||(Q2=(0,d.Z)(["Go to page ",""])),e),g=1===o,b=o===i;return(0,j.jsxs)(xc,{className:l,children:[(0,j.jsx)(ur.Z,{title:(0,u.c)("Action").t(H2||(H2=(0,d.Z)(["Go to first page"]))),children:(0,j.jsx)(Ea.Z,{className:"on-rtl-mirror",icon:!0,disabled:s||g,onClick:()=>e(),children:(0,j.jsx)(pr.Z,{name:"angles-left",className:"block",alt:(0,u.c)("Action").t(X2||(X2=(0,d.Z)(["Go to first page"])))})})}),(0,j.jsx)(ur.Z,{title:(0,u.c)("Action").t(J2||(J2=(0,d.Z)(["Go to previous page"]))),children:(0,j.jsx)(Ea.Z,{className:"on-rtl-mirror",disabled:s||g,onClick:()=>n(),children:(0,j.jsx)(pr.Z,{name:"angle-down",className:"block rotateZ-90",alt:(0,u.c)("Action").t(q2||(q2=(0,d.Z)(["Go to previous page"])))})})}),m.map((e=>{const t=e===o;return(0,j.jsx)(ur.Z,{title:goToPageTitle(e),children:(0,j.jsxs)(Ea.Z,{"aria-current":t,className:(0,ht.dh)([t&&"text-bold",t&&"no-pointer-events"]),disabled:s,onClick:()=>a(e),children:[(0,j.jsx)("span",{className:"sr-only",children:goToPageTitle(e)}),(0,j.jsx)("span",{"aria-hidden":"true",children:e})]})},e)})),(0,j.jsx)(ur.Z,{title:(0,u.c)("Action").t($2||($2=(0,d.Z)(["Go to next page"]))),children:(0,j.jsx)(Ea.Z,{className:"on-rtl-mirror",icon:!0,disabled:s||b,onClick:()=>r(),children:(0,j.jsx)(pr.Z,{name:"angle-down",className:"block rotateZ-270",alt:(0,u.c)("Action").t(e3||(e3=(0,d.Z)(["Go to next page"])))})})}),(0,j.jsx)(ur.Z,{title:(0,u.c)("Action").t(t3||(t3=(0,d.Z)(["Go to last page"]))),children:(0,j.jsx)(Ea.Z,{icon:!0,disabled:s||b||p,onClick:()=>t(),children:(0,j.jsx)(pr.Z,{name:"angles-left",className:"block mirror",alt:(0,u.c)("Action").t(n3||(n3=(0,d.Z)(["Go to last page"])))})})})]})};var a3,o3,s3,i3,c3=(0,o.memo)(PaginationRow);var list_ItemStar=({element:e,size:t})=>{const[n,r]=(0,no.Z)(),a=useStar(),[{Shortcuts:o=0}={}]=useMailSettings(),s=elements_isStarred(e||{}),i=elements_isMessage(e)?s?(0,u.c)("Alt").t(a3||(a3=(0,d.Z)(["Unstar message"]))):(0,u.c)("Alt").t(o3||(o3=(0,d.Z)(["Star message"]))):s?(0,u.c)("Alt").t(s3||(s3=(0,d.Z)(["Unstar conversation"]))):(0,u.c)("Alt").t(i3||(i3=(0,d.Z)(["Star conversation"])));return(0,j.jsx)(ur.Z,{title:o?(0,j.jsxs)(j.Fragment,{children:[i,(0,j.jsx)("br",{}),(0,j.jsx)("kbd",{className:"no-border",children:"*"})]}):i,children:(0,j.jsxs)("button",{"data-testid":"item-star-".concat(s),type:"button",className:(0,ht.dh)(["starbutton relative item-star flex stop-propagation",s&&"starbutton--is-starred"]),onClick:async t=>{t.stopPropagation(),n||r(a([e||{}],!s))},children:[(0,j.jsx)(pr.Z,{size:t,name:s?"star-filled":"star",className:"starbutton-icon-star"}),(0,j.jsx)("span",{className:"sr-only",children:i})]})})};var l3,list_ItemLabels=({element:e,labelID:t,showUnlabel:n=!1,labels:r=[],className:a="",isCollapsed:o=!0,maxNumber:i})=>{const c=useApplyLabels(),l=Object.keys(elements_getLabelIDs(e,t)),d=(0,Ne.qL)(r),u=l.map((e=>d[e])).filter(Za.Z),p=(0,xe.Xo)(u,"Order"),m=(0,s.k6)();if(!p.length)return null;const handleGo=e=>()=>m.push("/".concat(e.ID)),handleUnlabel=t=>()=>c([e||{}],{[t]:!1}),g=p.map((e=>({name:e.Name,color:e.Color,title:e.Name,onClick:handleGo(e),onDelete:handleUnlabel(e.ID)})));return(0,j.jsx)(labelStack_LabelStack,{labels:g,className:a,isStacked:o,showDelete:n,maxNumber:i})};function ItemAttachmentIcon_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ItemAttachmentIcon_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ItemAttachmentIcon_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ItemAttachmentIcon_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var list_ItemAttachmentIcon=({element:e,className:t,onClick:n})=>{const r=e?(e=>elements_isMessage(e)?(null==e?void 0:e.NumAttachments)||0:getNumAttachments(e))(e):0,a=void 0!==n;if(0===r)return null;const s=(0,u.c)("Info").ngettext((0,u.msgid)(l3||(l3=(0,d.Z)(["Has "," attachment"])),r),"Has ".concat(r," attachments"),r),i={className:(0,ht.dh)(["flex",t]),"data-testid":"item-attachment-icon"},c={onClick:n,type:"button"};return(0,j.jsx)(ur.Z,{title:s,children:o.createElement(a?"button":"div",ItemAttachmentIcon_objectSpread(ItemAttachmentIcon_objectSpread({},i),a?c:{}),(0,j.jsx)(pr.Z,{name:"paperclip",size:16,alt:s}))})};var list_ItemIcon=({folderInfo:e})=>{const t={Name:e.name,Color:e.color,ParentID:e.parentID},n=hooks_useFolderColor(t);return"folder"!==e.icon?(0,j.jsx)(pr.Z,{name:e.icon,alt:e.name}):(0,j.jsx)(pr.Z,{name:n?"folder-filled":"folder",color:n,alt:e.name})};const{ALL_SENT:d3,ALL_DRAFTS:u3}=M.C7;var list_ItemLocation=({element:e,labelID:t,shouldStack:n=!1,showTooltip:r=!0,withDefaultMargin:a=!0,ignoreIconFilter:o=!1})=>{const[s]=useMailSettings(),[i=[]]=useFolders();let c=getCurrentFolders(e,t,i,s);if(!o){if([d3,u3].includes(t)){const e=[(0,ve.UV)()[d3],(0,ve.UV)()[u3]];c=c.filter((t=>!e.includes(t.name)))}}return c.length>1&&n&&(c=[{to:c.map((e=>e.to)).join(","),name:c.map((e=>e.name)).join(", "),icon:"folders"}]),(0,j.jsx)(j.Fragment,{children:c.map((e=>(0,j.jsx)(ur.Z,{title:r?e.name:void 0,children:(0,j.jsx)("span",{className:(0,ht.dh)(["flex flex-item-noshrink pt0-125",a&&"mr0-25"]),children:(0,j.jsx)(list_ItemIcon,{folderInfo:e})})},e.to)))})};const p3={simple:formatSimpleDate,full:formatFullDate,distance:e=>(0,Zt.Z)(e,{locale:kt.RW,addSuffix:!0})};var list_ItemDate=({element:e,labelID:t,className:n,mode:r="simple"})=>{const a=p3[r]||p3.distance,[s,i]=(0,o.useState)((()=>{const n=elements_getDate(e,t);return 0===n.getTime()?"":a(n)})),c=(0,o.useMemo)((()=>{const n=elements_getDate(e,t);return 0===n.getTime()?"":p3.full(n)}),[e,t]);return(0,o.useEffect)((()=>{const n=elements_getDate(e,t);if(0===n.getTime())return;const update=()=>i(a(n));if(update(),"distance"===r){const e=setInterval(update,1e3);return()=>clearInterval(e)}}),[e,r,t]),(0,j.jsx)("span",{className:n,title:c,"data-testid":"item-date",children:s})};var m3,conversation_NumMessages=({conversation:e,className:t})=>{const{NumMessages:n=0}=e||{};return n<=1?null:(0,j.jsxs)("span",{className:t,children:["[",n,"]"]})};var g3,j3,b3,y3,h3,I3,list_ItemExpiration=({element:e,className:t})=>{const{ExpirationTime:n}=e||{},r=(0,o.useMemo)((()=>{const e=(0,vh.Z)(n||0),t=formatFullDate(e);return(0,u.c)("Info").t(m3||(m3=(0,d.Z)(["This message will expire ",""])),t)}),[n]);return n?(0,j.jsx)(ur.Z,{title:r,className:(0,ht.dh)(["flex",t]),children:(0,j.jsx)("div",{className:"pill-icon bg-global-warning","data-testid":"item-expiration",children:(0,j.jsx)(pr.Z,{name:"hourglass-empty",size:14,alt:r})})}):null};var f3,M3,list_ItemAction=({element:e,className:t})=>{if(!elements_isMessage(e))return null;const n=e;return n.IsReplied||n.IsRepliedAll||n.IsForwarded?(0,j.jsxs)("div",{className:(0,ht.dh)(["flex flex-nowrap",t]),children:[!!n.IsReplied&&(0,j.jsx)(ur.Z,{title:(0,u.c)("Alt").t(g3||(g3=(0,d.Z)(["Replied to"]))),children:(0,j.jsx)(pr.Z,{name:"arrow-up-and-left-big",alt:(0,u.c)("Alt").t(j3||(j3=(0,d.Z)(["Replied to"]))),className:"flex-item-noshrink mr0-5"})}),!!n.IsRepliedAll&&(0,j.jsx)(ur.Z,{title:(0,u.c)("Alt").t(b3||(b3=(0,d.Z)(["Replied to all"]))),children:(0,j.jsx)(pr.Z,{name:"arrow-up-and-left-double-big",alt:(0,u.c)("Alt").t(y3||(y3=(0,d.Z)(["Replied to all"]))),className:"flex-item-noshrink mr0-5"})}),!!n.IsForwarded&&(0,j.jsx)(ur.Z,{title:(0,u.c)("Alt").t(h3||(h3=(0,d.Z)(["Forwarded"]))),children:(0,j.jsx)(pr.Z,{name:"arrow-up-and-left-big",alt:(0,u.c)("Alt").t(I3||(I3=(0,d.Z)(["Forwarded"]))),className:"mirror flex-item-noshrink mr0-5"})})]}):null};var N3,x3,list_ItemColumnLayout=({labelID:e,labels:t,element:n,conversationMode:r,showIcon:a,senders:o,addresses:s,displayRecipients:i,loading:c,breakpoints:l,unread:p})=>{const{shouldHighlight:m,highlightMetadata:g,getESDBStatus:b}=useEncryptedSearchContext(),{dbExists:y,esEnabled:h}=b(),I=y&&h&&m(),f=n.decryptedBody,{Subject:M}=n,N=c||!i||o?m()?g(o,p,!0).resultJSX:o:(0,u.c)("Info").t(f3||(f3=(0,d.Z)(["(No Recipient)"]))),x=m()&&M?g(M,p,!0).resultJSX:M;let v,w=0;f&&({resultJSX:v,numOccurrences:w}=g(f,p,!0));const D=(0,u.c)("Info").ngettext((0,u.msgid)(M3||(M3=(0,d.Z)([""," occurrence found in the mail content"])),w),"".concat(w," occurrences found in the mail content"),w);return(0,j.jsxs)("div",{className:"flex-item-fluid flex flex-nowrap flex-column flex-justify-center item-titlesender","data-testid":"message-list:message",children:[(0,j.jsxs)("div",{className:"flex flex-align-items-center item-firstline",children:[(0,j.jsxs)("div",{className:"item-senders flex-item-fluid flex flex-nowrap pr1",children:[(0,j.jsx)("span",{className:"inline-block max-w100 text-ellipsis",title:s,"data-testid":"message-column:sender-address",children:N}),(0,j.jsx)(list_ItemAction,{element:n,className:"ml0-5 flex-item-noshrink mtauto mbauto"})]}),!!n.ExpirationTime&&(0,j.jsx)("span",{className:"flex-item-noshrink",children:(0,j.jsx)(list_ItemExpiration,{element:n,className:"mr0-5"})}),(0,j.jsx)(list_ItemDate,{element:n,labelID:e,className:"item-senddate-col"}),(0,j.jsx)("span",{className:"ml0-5 flex-flex-children flex-item-centered-vert",children:(0,j.jsx)(list_ItemStar,{element:n})})]}),(0,j.jsxs)("div",{className:"flex flex-nowrap flex-align-items-center item-secondline max-w100 no-scroll",children:[(0,j.jsxs)("div",{className:"item-subject flex-item-fluid flex flex-nowrap flex-align-items-center",children:[a&&(0,j.jsx)("span",{className:"flex flex-item-noshrink",children:(0,j.jsx)(list_ItemLocation,{element:n,labelID:e})}),r&&(0,j.jsx)(conversation_NumMessages,{className:"mr0-25 flex-item-noshrink",conversation:n}),(0,j.jsx)("span",{role:"heading","aria-level":2,className:"inline-block max-w100 text-ellipsis",title:M,"data-testid":"message-column:subject",children:x})]}),(0,j.jsxs)("div",{className:"item-icons flex flex-item-noshrink flex-nowrap",children:[(0,j.jsx)(list_ItemLabels,{className:"ml0-5",labels:t,element:n,labelID:e,maxNumber:l.isNarrow?1:5}),(0,j.jsx)(list_ItemAttachmentIcon,{element:n,className:"ml0-5 flex-align-self-center"})]})]}),I&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:"flex flex-nowrap flex-align-items-center item-secondline max-w80 no-scroll","aria-hidden":"true",children:(0,j.jsx)("div",{className:"item-subject flex-item-fluid flex flex-nowrap flex-align-items-center",children:(0,j.jsx)("span",{className:"inline-block max-w100 text-ellipsis",title:D,children:v})})}),(0,j.jsx)("div",{className:"sr-only",children:D})]})]})};var list_ItemRowLayout=({labelID:e,labels:t,element:n,conversationMode:r,showIcon:a,senders:o,addresses:s,unread:i,displayRecipients:c,loading:l})=>{const{shouldHighlight:p,highlightMetadata:m,getESDBStatus:g}=useEncryptedSearchContext(),{dbExists:b,esEnabled:y}=g(),h=b&&y&&p(),I=n.decryptedBody,{Subject:f,Size:M}=n,N=helpers_humanSize(M),x=l||!c||o?p()?m(o,i,!0).resultJSX:o:(0,u.c)("Info").t(N3||(N3=(0,d.Z)(["(No Recipient)"]))),v=p()&&f?m(f,i,!0).resultJSX:f;let w,D=0;I&&({resultJSX:w,numOccurrences:D}=m(I,i,!0));const S=(0,u.c)("Info").ngettext((0,u.msgid)(x3||(x3=(0,d.Z)([""," occurrence found"])),D),"".concat(D," occurrences found"),D);return(0,j.jsxs)("div",{className:"flex-item-fluid flex flex-align-items-center flex-nowrap flex-row item-titlesender",children:[(0,j.jsx)("div",{className:"mtauto mbauto flex mr0-5","data-testid":i,children:(0,j.jsx)(list_ItemStar,{element:n})}),(0,j.jsxs)("div",{className:(0,ht.dh)(["item-senders w20 flex flex-nowrap mauto pr1",i&&"text-bold"]),children:[(0,j.jsx)("span",{className:"max-w100 text-ellipsis",title:s,"data-testid":"message-row:sender-address",children:x}),(0,j.jsx)(list_ItemAction,{element:n,className:"ml0-5 flex-item-noshrink mtauto mbauto"})]}),(0,j.jsxs)("div",{className:"item-subject flex-item-fluid flex flex-align-items-center flex-nowrap mauto",children:[a&&(0,j.jsx)("span",{className:"mr0-25 inline-flex flex-item-noshrink",children:(0,j.jsx)(list_ItemLocation,{element:n,labelID:e})}),r&&(0,j.jsx)(conversation_NumMessages,{className:(0,ht.dh)(["mr0-25 flex-item-noshrink",i&&"text-bold"]),conversation:n}),(0,j.jsxs)("div",{className:"flex flex-column inline-block",children:[(0,j.jsx)("span",{role:"heading","aria-level":2,className:(0,ht.dh)(["max-w100 text-ellipsis mr1",i&&"text-bold"]),title:f,"data-testid":"message-row:subject",children:v}),h&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("span",{className:(0,ht.dh)(["max-w100 text-ellipsis mr1",i&&"text-bold"]),title:S,"aria-hidden":"true",children:w}),(0,j.jsx)("span",{className:"sr-only",children:S})]})]})]}),(0,j.jsx)(list_ItemLabels,{labels:t,element:n,labelID:e,maxNumber:5,className:"flex-item-noshrink mlauto"}),(0,j.jsx)("span",{className:"item-weight mtauto mbauto ml1 text-right","data-testid":"message-row:item-size",children:!l&&N}),(0,j.jsx)("span",{className:"flex w2e ml0-5 text-center",children:(0,j.jsx)(list_ItemAttachmentIcon,{element:n,className:"flex-item-noshrink"})}),(0,j.jsxs)("span",{className:"item-senddate-row w13e ml1 flex flex-nowrap flex-align-items-center flex-justify-end",children:[!!n.ExpirationTime&&(0,j.jsx)(list_ItemExpiration,{element:n,className:"mr0-5"}),(0,j.jsx)(list_ItemDate,{element:n,labelID:e,className:i?"text-bold":void 0})]})]})};const{SENT:v3,ALL_SENT:w3,ALL_MAIL:D3,STARRED:S3,DRAFTS:O3,ALL_DRAFTS:A3}=M.C7,C3=[D3,S3,w3,A3],Item=({conversationMode:e,labelID:t,labels:n,loading:r,element:a,elementID:s,columnLayout:i,mailSettings:c,checked:l=!1,onCheck:d,onClick:u,onDragStart:p,onDragEnd:m,dragged:g,index:b,breakpoints:y,onFocus:h})=>{const{shouldHighlight:I,getESDBStatus:f}=useEncryptedSearchContext(),{dbExists:N,esEnabled:x}=f(),v=N&&x&&I(),w=(0,o.useRef)(null),[D,S]=(0,o.useState)(!1),O=[v3,w3,O3,A3].includes(t)||te(a)||messages_isDraft(a),{getRecipientLabel:A,getRecipientsOrGroups:C,getRecipientsOrGroupsLabels:E}=useRecipientLabel(),L=c.ViewMode===M.WF.GROUP&&elements_isMessage(a)?s===a.ConversationID:s===a.ID,P=C3.includes(t)||labels_isCustomLabel(t,n),Z=e?(({Senders:e=[]})=>e)(a):getSender(a)?[getSender(a)]:[],T=e?(({Recipients:e=[]})=>e)(a):getRecipients(a),k=(0,o.useMemo)((()=>Z.map((e=>A(e,!0)))),[Z]),z=Z.map((e=>null==e?void 0:e.Address)),_=C(T),R=E(_),G=_.map((({recipient:e,group:t})=>e?e.Address:null==t?void 0:t.recipients.map((e=>e.Address)))).flat(),Y=i?list_ItemColumnLayout:list_ItemRowLayout,U=elements_isUnread(a,t);return(0,j.jsxs)("div",{onClick:e=>{e.target.closest(".stop-propagation")?e.stopPropagation():u(a.ID)},draggable:!0,onDragStart:e=>p(e,a),onDragEnd:m,className:(0,ht.dh)(["flex flex-nowrap flex-align-items-center cursor-pointer",i?"item-container":"item-container-row",L&&"item-is-selected",!U&&"read",U&&"unread",g&&"item-dragging",r&&"item-is-loading",D&&"item-is-focused",v&&i&&"es-three-rows"]),style:{"--index":b},ref:w,onFocus:()=>{S(!0),h(b)},onBlur:()=>{S(!1)},tabIndex:-1,"data-element-id":a.ID,"data-shortcut-target":"item-container","data-shortcut-target-selected":L,"data-testid":"message-item:".concat(a.Subject),children:[(0,j.jsx)(items_ItemCheckbox,{ID:a.ID,name:O?R[0]:k[0],checked:l,onChange:e=>{d(e,a.ID||"")},compactClassName:"mr0-75 stop-propagation",normalClassName:(0,ht.dh)(["ml0-1",i?"mr0-6":"mr0-5"])}),(0,j.jsx)(Y,{labelID:t,labels:n,element:a,conversationMode:e,showIcon:P,senders:(O?R:k).join(", "),addresses:(O?G:z).join(", "),unread:U,displayRecipients:O,loading:r,breakpoints:y})]})};var E3=(0,o.memo)(Item),L3=n(24900);function EmptyViewContainer_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function EmptyViewContainer_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?EmptyViewContainer_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EmptyViewContainer_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P3,Z3,T3,k3,z3,_3,R3,G3,Y3,U3,F3,K3,B3,app_EmptyViewContainer=({imageProps:e,children:t})=>(0,j.jsx)("div",{className:"mauto p1",children:(0,j.jsxs)("figure",{className:"flex-item-fluid text-center p3",children:[e&&(0,j.jsx)("img",EmptyViewContainer_objectSpread(EmptyViewContainer_objectSpread({className:"hauto"},e),{},{alt:e.alt||""})),(0,j.jsx)("figcaption",{className:"mt2",children:t})]})});var view_EmptyView=({labelID:e,isSearch:t})=>{const n=e===M.C7.INBOX&&!t,r=e===M.C7.SCHEDULED&&!t,a=!n&&!r&&!t,o=useOnCompose(),s=(0,j.jsx)(Ea.Z,{title:(0,u.c)("Action").t(P3||(P3=(0,d.Z)(["Create new message"]))),onClick:()=>o({action:ve.Xh.NEW}),children:(0,u.c)("Action").t(Z3||(Z3=(0,d.Z)(["Create new message"])))}),i=t?{src:Xd,alt:(0,u.c)("Search - no results").t(T3||(T3=(0,d.Z)(["No results found"])))}:a?{src:Xd,alt:(0,u.c)("Search - no results").t(k3||(k3=(0,d.Z)(["No messages found"])))}:n?{src:L3,alt:(0,u.c)("Search - no results").t(z3||(z3=(0,d.Z)(["No messages found"])))}:r?{src:Xd,alt:(0,u.c)("Search - no results").t(_3||(_3=(0,d.Z)(["No messages scheduled"])))}:void 0;return(0,j.jsxs)(app_EmptyViewContainer,{imageProps:i,children:[(0,j.jsx)("h3",{className:"text-bold",children:t?(0,u.c)("Search - no results").t(R3||(R3=(0,d.Z)(["No results found"]))):a?(0,u.c)("Search - no results").t(G3||(G3=(0,d.Z)(["No messages found"]))):r?(0,u.c)("Search - no results").t(Y3||(Y3=(0,d.Z)(["No messages scheduled"]))):(0,u.c)("Search - no results").t(U3||(U3=(0,d.Z)(["No messages found"])))}),(0,j.jsx)("p",{"data-if":"folder",children:t?(0,u.c)("Info").t(F3||(F3=(0,d.Z)(["You can either update your search query or clear it"]))):a?(0,u.c)("Info").t(K3||(K3=(0,d.Z)(["You do not have any messages here"]))):r?s:(0,u.c)("Info").t(B3||(B3=(0,d.Z)(["Seems like you are all caught up for now"])))})]})};const W3="placeholder",usePlaceholders=(e,t,n)=>{const r=(0,o.useMemo)((()=>(0,xe.w6)(0,n).map((()=>({ID:(0,ht.D)(W3)})))),[t,n]);return(0,o.useMemo)((()=>t?r:e),[t,e])};var V3,Q3,H3,X3,J3;var q3,$3,e5,t5,n5,r5,toolbar_FilterActions=({loading:e,filter:t={},mailSettings:n,onFilter:r})=>{const a=!Object.values(t).length,{isDesktop:o}=hooks_useActiveBreakpoint(),s={SHOW_ALL:(0,u.c)("Filter option").t(V3||(V3=(0,d.Z)(["All"]))),SHOW_UNREAD:(0,u.c)("Filter option").t(Q3||(Q3=(0,d.Z)(["Unread"]))),SHOW_READ:(0,u.c)("Filter option").t(H3||(H3=(0,d.Z)(["Read"]))),SHOW_MOVED_MESSAGE:(0,u.c)("Filter option").t(X3||(X3=(0,d.Z)(["Show moved message"]))),HIDE_MOVED_MESSAGE:(0,u.c)("Filter option").t(J3||(J3=(0,d.Z)(["Hide moved message"])))},i=[{text:s.SHOW_READ,ID:"filter-dropdown:show-read",isActive:0===t.Unread,onClick(){0!==t.Unread&&r({Unread:0})}},{text:s.SHOW_UNREAD,ID:"filter-dropdown:show-unread",isActive:1===t.Unread,onClick(){1!==t.Unread&&r({Unread:1})}}],c=[{text:s.SHOW_ALL,ID:"filter-dropdown:show-all",isActive:a,onClick(){a||r({})}},...n.MessageButtons===M.B9.READ_UNREAD?i:i.reverse()];if(!o){const getTextContent=()=>{const{text:e=""}=c.find((({isActive:e})=>e))||{};return e};return(0,j.jsx)(Sc,{as:Ea.Z,shape:"ghost",size:"small",hasCaret:!1,content:(0,j.jsxs)("span",{className:"flex flex-align-items-center flex-nowrap","data-testid":"toolbar:filter-dropdown",children:[(0,j.jsx)(pr.Z,{className:"toolbar-icon mr0-5",name:"filter"}),(0,j.jsx)("span",{className:"text-sm m0",children:getTextContent()})]}),children:(0,j.jsx)(dropdown_DropdownMenu,{children:c.map((({ID:t,text:n,isActive:r,onClick:a})=>(0,j.jsx)(Do.Z,{"data-testid":t,onClick:a,className:"text-left",isSelected:r,loading:e,children:n},t)))})})}return(0,j.jsx)("div",{children:c.map((({ID:t,text:n,isActive:r,onClick:a})=>(0,j.jsx)(Ea.Z,{"data-testid":t,size:"small",shape:"ghost",loading:e,"aria-pressed":r,className:(0,ht.dh)(["text-sm mt0 mb0 mr0-25 ml0-25",r&&"no-pointer-events bg-strong"]),onClick:a,children:n},t)))})};const a5="Time",o5="Size";var toolbar_SortDropdown=({loading:e,conversationMode:t,sort:{sort:n,desc:r},onSort:a,className:o,hasCaret:s,isSearch:i,isScheduledLabel:c=!1})=>{const{getESDBStatus:l}=useEncryptedSearchContext(),{dbExists:p,esEnabled:m}=l(),g=i&&p&&m,b={SMALL_TO_LARGE:(0,u.c)("Sort option").t(q3||(q3=(0,d.Z)(["Smallest first"]))),LARGE_TO_SMALL:(0,u.c)("Sort option").t($3||($3=(0,d.Z)(["Largest first"]))),NEW_TO_OLD:(0,u.c)("Sort option").t(e5||(e5=(0,d.Z)(["Newest first"]))),OLD_TO_NEW:(0,u.c)("Sort option").t(t5||(t5=(0,d.Z)(["Oldest first"])))};return(0,j.jsx)(Sc,{as:Ea.Z,shape:"ghost",size:"small",hasCaret:s,className:o,content:(0,j.jsxs)("span",{className:"flex flex-align-items-center flex-nowrap","data-testid":"toolbar:sort-dropdown",children:[(0,j.jsx)("span",{className:"text-sm m0 mr0-5",children:n!==o5||r?n===o5&&r?b.LARGE_TO_SMALL:n!==a5||r?c?b.OLD_TO_NEW:b.NEW_TO_OLD:c?b.NEW_TO_OLD:b.OLD_TO_NEW:b.SMALL_TO_LARGE}),(0,j.jsx)(pr.Z,{className:"toolbar-icon",name:"arrow-down-arrow-up"})]}),title:t?(0,u.c)("Title").t(n5||(n5=(0,d.Z)(["Sort conversations"]))):(0,u.c)("Title").t(r5||(r5=(0,d.Z)(["Sort messages"]))),children:(0,j.jsxs)(dropdown_DropdownMenu,{children:[(0,j.jsx)(Do.Z,{"data-testid":"toolbar:sort-new-to-old",isSelected:c?n===a5&&!r:n===a5&&r,className:"text-left",loading:e,onClick:()=>a({sort:a5,desc:!0}),children:b.NEW_TO_OLD}),(0,j.jsx)(Do.Z,{"data-testid":"toolbar:sort-old-to-new",isSelected:c?n===a5&&r:n===a5&&!r,className:"text-left",loading:e,onClick:()=>a({sort:a5,desc:!1}),children:b.OLD_TO_NEW}),!g&&(0,j.jsx)(Do.Z,{"data-testid":"toolbar:sort-desc",isSelected:n===o5&&r,className:"text-left",loading:e,onClick:()=>a({sort:o5,desc:!0}),children:b.LARGE_TO_SMALL}),!g&&(0,j.jsx)(Do.Z,{"data-testid":"toolbar:sort-asc",isSelected:n===o5&&!r,className:"text-left",loading:e,onClick:()=>a({sort:o5,desc:!1}),children:b.SMALL_TO_LARGE})]})})};const ListSettings=({sort:e,onSort:t,onFilter:n,filter:r,conversationMode:a,mailSettings:o,isSearch:s,labelID:i})=>{const c=i===M.C7.SCHEDULED;return(0,j.jsxs)("div",{className:"sticky-top z10 bg-norm border-bottom--weak pl0-5 pr0-5 pt0-25 pb0-25 flex flex-wrap flex-justify-space-between",children:[(0,j.jsx)(toolbar_FilterActions,{filter:r,onFilter:n,mailSettings:o}),(0,j.jsx)(toolbar_SortDropdown,{conversationMode:a,sort:e,onSort:t,hasCaret:!1,isSearch:s,isScheduledLabel:c})]})};var s5,i5,c5=(0,o.memo)(ListSettings);const ESSlowToolbar=()=>{const[{ID:e}]=(0,bn.ZP)(),{openDropdown:t}=useEncryptedSearchContext();return(0,o.useMemo)((()=>{(async e=>{const t=await getNumMessagesDB(e);await(0,Wt.D)(1e3*Math.floor(180*Math.random()+1)),esSentryReport("Search is taking too long, showing warning banner",{numMessagesIndexed:t})})(e)}),[]),(0,j.jsxs)("div",{className:"sticky-top bg-norm border-bottom--weak p0-5 flex flex-wrap flex-justify-center",children:[(0,u.c)("Info").t(s5||(s5=(0,d.Z)(["Taking too long?"]))),(0,j.jsx)(VM.Z,{onClick:t,className:"pl0-25",children:(0,u.c)("Action").t(i5||(i5=(0,d.Z)(["Refine your search"])))})]})};var l5,d5,u5=(0,o.memo)(ESSlowToolbar);var p5,m5,g5,j5,list_useEncryptedSearchList=(e,t,n,r)=>{const{getESDBStatus:a}=useEncryptedSearchContext(),{dbExists:s,esEnabled:i,isSearchPartial:c,isCacheLimited:l,isSearching:p}=a(),[m,g]=(0,o.useState)(setTimeout((()=>{}))),[b,y]=(0,o.useState)(!1),h=e&&t&&s&&i&&p,I=b&&h,f=e&&!t&&s&&i&&l,N=f&&c,x=f&&(p||!c)&&n===r,v=p?(0,u.c)("Info").t(l5||(l5=(0,d.Z)(["Loading"]))):(0,u.c)("Info").t(d5||(d5=(0,d.Z)(["No more results found"]))),w=(0,j.jsxs)("div",{className:"flex flex-nowrap flex-align-items-center flex-justify-center color-weak mt1-5 mb1-5",children:[v,p&&(0,j.jsx)(Oh.Z,{})]});return(0,o.useEffect)((()=>{h?g((()=>setTimeout((()=>{y((()=>!0))}),5*M.sh))):(clearTimeout(m),y((()=>!1)))}),[h]),{showESSlowToolbar:I,loadingElement:w,disableGoToLast:N,useLoadingElement:x}};function List_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function List_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?List_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):List_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const b5=[],y5=[],List=({labelID:e,loading:t,placeholderCount:n,elementID:r,userSettings:a,mailSettings:s,columnLayout:i,elements:c=y5,checkedIDs:l=b5,onCheck:p,onClick:m,conversationMode:g,isSearch:b,breakpoints:y,page:h,total:I,onPage:f,onFocus:N,onCheckOne:x,sort:v,onSort:w,filter:D,onFilter:S},O)=>{var A;const[C]=useLabels(),{shouldHighlight:E}=useEncryptedSearchContext(),L=a.Density===M.pw.COMPACT&&!E(),P=useOnCompose(),{createModal:Z}=(0,In.Z)(),[T]=hooks_useIsMnemonicAvailable(),k=link_useSettingsLink(),z=usePlaceholders(c,t,n),{dismissed:_,handleDismiss:R}=(0,o.useContext)(Uq),G=usePaging(h,I,f),{page:Y,total:U}=G;(0,o.useEffect)((()=>{var e,t;null===(e=O.current)||void 0===e||null===(t=e.scroll)||void 0===t||t.call(e,{top:0})}),[t,Y]);const{showESSlowToolbar:F,loadingElement:K,disableGoToLast:B,useLoadingElement:W}=list_useEncryptedSearchList(b,t,Y,U),{draggedIDs:V,handleDragStart:Q,handleDragEnd:H}=items_useItemsDraggable(z,l,p,(e=>{const t=z.length&&elements_isMessage(z[0]),n=e.length;return t?(0,u.c)("Success").ngettext((0,u.msgid)(p5||(p5=(0,d.Z)(["Move "," message"])),n),"Move ".concat(n," messages"),n):(0,u.c)("Success").ngettext((0,u.msgid)(m5||(m5=(0,d.Z)(["Move "," conversation"])),n),"Move ".concat(n," conversations"),n)}));return(0,j.jsxs)("div",{ref:O,className:(0,ht.dh)(["items-column-list scroll-if-needed scroll-smooth-touch",L&&"list-compact"]),children:[(0,j.jsx)("h1",{className:"sr-only",children:g?(0,u.c)("Title").t(g5||(g5=(0,d.Z)(["Conversation list"]))):(0,u.c)("Title").t(j5||(j5=(0,d.Z)(["Message list"])))}),(0,j.jsxs)("div",{className:"items-column-list-inner flex flex-nowrap flex-column relative",children:[(0,j.jsx)(c5,{sort:v,onSort:w,onFilter:S,filter:D,conversationMode:g,mailSettings:s,isSearch:b,labelID:e}),F&&(0,j.jsx)(u5,{}),0===z.length?(0,j.jsx)(view_EmptyView,{labelID:e,isSearch:b}):(0,j.jsxs)(j.Fragment,{children:[z.map(((n,a)=>(0,j.jsx)(E3,{conversationMode:g,labels:C,labelID:e,loading:t,columnLayout:i,elementID:r,element:n,checked:l.includes(n.ID||""),onCheck:x,onClick:m,mailSettings:s,onDragStart:Q,onDragEnd:H,dragged:V.includes(n.ID||""),index:a,breakpoints:y,onFocus:N},n.ID))),(null===(A=a.Checklists)||void 0===A?void 0:A.includes("get-started"))&&!t&&!(U>1)&&!_&&(0,j.jsx)(checklist_GetStartedChecklist,{limitedMaxWidth:!isColumnMode(s),onDismiss:R,onItemSelection:e=>()=>{switch(e){case zq.SendMessage:P({action:ve.Xh.NEW});break;case zq.MobileApp:Z((0,j.jsx)(checklist_ModalGetMobileApp,{}));break;case zq.RecoveryMethod:T?Z((0,j.jsx)(mnemonic_MnemonicPromptModal,{})):k("/recovery",void 0,!0);break;case zq.Import:Z((0,j.jsx)(checklist_ModalImportEmails,{}))}}}),W&&K,!t&&U>1&&(0,j.jsx)("div",{className:"p1-5 flex flex-column flex-align-items-center",children:(0,j.jsx)(c3,List_objectSpread(List_objectSpread({},G),{},{disabled:t,disableGoToLast:B}))})]})]})]})};var h5=(0,o.memo)((0,o.forwardRef)(List));var helpers_createScrollIntoView=(e,t,n,r=0)=>{let a,o;const run=s=>{o||(o=s);const i=s-o,c=(l=Math.min(i/600,1))<.5?4*l*l*l:(l-1)*(2*l-2)*(2*l-2)+1;var l;const d=e.getBoundingClientRect(),u=t.getBoundingClientRect(),p=d.top-u.top-r,m=t.scrollTop+p*c;t.scrollTop=Math.round(m),(i<600||n)&&(a=requestAnimationFrame(run))};return a=requestAnimationFrame(run),()=>{cancelAnimationFrame(a)}},I5=n(39558);const f5=["bodyRef"];var M5,N5;function MessageBodyImage_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function MessageBodyImage_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MessageBodyImage_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MessageBodyImage_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const x5=["width","height"],forEachStyle=(e,t)=>{if(e)for(let n=0;n<(e.length||0);n++){const r=e.item(n);t(r,e[r])}},MessageBodyImage=({showRemoteImages:e,showEmbeddedImages:t,image:n,anchor:r})=>{var a,s;const i=(0,o.useRef)(null),[c,l]=(0,o.useState)(!1),{type:p}=n,m=!(c||"loaded"!==n.status||("remote"===p?!e:!t)),g=(null===(a=n.original)||void 0===a?void 0:a.getAttributeNames().reduce(((e,t)=>{var r;return e[t]=null===(r=n.original)||void 0===r?void 0:r.getAttribute(t),e}),{}))||{};forEachStyle(null===(s=n.original)||void 0===s?void 0:s.style,((e,t)=>{r.style[e]=t})),(0,o.useEffect)((()=>{m&&Object.entries(g).filter((([e])=>!e.endsWith("src"))).forEach((([e,t])=>{var n;null===(n=i.current)||void 0===n||n.setAttribute(e,t)}))}),[m]);const handleError=()=>{l(!0)};if(m)return(0,j.jsx)("img",{ref:i,src:n.url,onError:handleError});const b="loading"===n.status,y=c?(0,u.c)("Message image").t(M5||(M5=(0,d.Z)(["Image did not load because the remote server’s identity certificate is invalid."]))):(0,u.c)("Message image").t(N5||(N5=(0,d.Z)(["Image has not been loaded in order to protect your privacy."]))),h=c?"circle-xmark":"file-shapes",I=(e=>{if(!e)return{};const t={};return forEachStyle(e.style,((e,n)=>{"display"!==e&&(t[(e=>e.replaceAll(/-([a-z])/g,((e,t)=>t.toUpperCase())))(e)]=n)})),x5.forEach((n=>{var r;const a=null==e||null===(r=e.getAttribute(n))||void 0===r?void 0:r.trim();null!=a&&a.endsWith("%")||"auto"===a?t[n]=a:a?t[n]="".concat(a,"px"):t[n]||(t[n]="30px")})),t})(n.original);return(0,j.jsx)(ur.Z,{title:y,children:(0,j.jsxs)("span",{style:I,className:(0,ht.dh)(["proton-image-placeholder inline-flex bordered rounded flex-justify-center flex-align-items-center",c&&"color-danger border--danger"]),children:[b?null:(0,j.jsx)(pr.Z,{name:h,size:20}),b?(0,j.jsx)(Yu.Z,{className:""}):null]})})};var v5,w5,message_MessageBodyImage=e=>{let{bodyRef:t}=e,n=(0,Sn.Z)(e,f5);const r=getAnchor(t.current,n.image);return r?(0,I5.createPortal)((0,j.jsx)(MessageBodyImage,MessageBodyImage_objectSpread(MessageBodyImage_objectSpread({},n),{},{anchor:r})),r):null};var message_MessageBody=({messageLoaded:e,bodyLoaded:t,sourceMode:n,message:r,forceBlockquote:a=!1,originalMessageMode:s,toggleOriginalMessage:i,onMessageReady:c,highlightKeywords:l=!1})=>{var p,m,g,b,y,h;const I=(0,o.useRef)(null),{highlightString:f,getESDBStatus:M}=useEncryptedSearchContext(),{dbExists:N,esEnabled:x}=M(),v=l&&N&&x,w=V(r.data),[D,S]=(0,o.useMemo)((()=>w?[r.plainText,""]:locateBlockquote(r.document)),[null===(p=r.document)||void 0===p?void 0:p.innerHTML,r.plainText,w]),[,O]=(0,o.useState)({}),A=e&&!(null===(m=r.errors)||void 0===m||null===(g=m.decryption)||void 0===g||!g.length),C=!A&&n,E=!A&&!C&&!t&&e,L=!e,P=!A&&!C&&t,Z=""!==S,T=!a&&Z,k=a||s,z=D&&v?f(D,!0):D,_=S&&v?f(S,!z.includes("data-auto-scroll")):S;return(0,o.useEffect)((()=>{L||E||!c||setTimeout(c)}),[L,E,null===(b=r.data)||void 0===b?void 0:b.ID]),(0,o.useEffect)((()=>{setTimeout((()=>O({})))}),[k]),(0,o.useEffect)((()=>{if(D&&v){var e;const t=null===(e=I.current)||void 0===e?void 0:e.querySelector("[data-auto-scroll]");(0,vo.zT)(t,{block:"center",behavior:"smooth"})}}),[z]),(0,j.jsxs)("div",{ref:I,className:(0,ht.dh)(["message-content scroll-horizontal-if-needed relative bodyDecrypted bg-norm color-norm",w&&"plain"]),"data-testid":"message-content:body",children:[A&&(0,j.jsx)("pre",{children:null===(y=r.data)||void 0===y?void 0:y.Body}),C&&(0,j.jsx)("pre",{children:r.decryptedBody}),(L||E)&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:"message-content-loading-placeholder mb0-25 max-w8e"}),(0,j.jsx)("div",{className:"message-content-loading-placeholder mb0-25 max-w50e"}),(0,j.jsx)("div",{className:"message-content-loading-placeholder mb0-25 max-w40e"}),(0,j.jsx)("div",{className:"message-content-loading-placeholder mb0-25 max-w50e"}),(0,j.jsx)("div",{className:"message-content-loading-placeholder mb0-25 max-w15e"}),(0,j.jsx)("div",{className:"message-content-loading-placeholder max-w8e"})]}),P&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{dangerouslySetInnerHTML:{__html:z}}),null===(h=r.messageImages)||void 0===h?void 0:h.images.map((e=>{var t,n;return(0,j.jsx)(message_MessageBodyImage,{bodyRef:I,showRemoteImages:(null===(t=r.messageImages)||void 0===t?void 0:t.showRemoteImages)||!1,showEmbeddedImages:(null===(n=r.messageImages)||void 0===n?void 0:n.showEmbeddedImages)||!1,image:e},e.id)})),Z&&(0,j.jsxs)(j.Fragment,{children:[T&&(0,j.jsx)(ur.Z,{title:s?(0,u.c)("Info").t(v5||(v5=(0,d.Z)(["Hide original message"]))):(0,u.c)("Info").t(w5||(w5=(0,d.Z)(["Show original message"]))),children:(0,j.jsx)(Ea.Z,{size:"small",shape:"outline",className:"m0-5 toggle-original-message-button",onClick:()=>null==i?void 0:i(),"data-testid":"message-view:expand-codeblock",children:"..."})}),k&&(0,j.jsx)("div",{dangerouslySetInnerHTML:{__html:_}})]})]})]})};var D5,S5,recipients_RecipientItemLayout=({button:e,label:t,showAddress:n=!0,address:r,title:a,icon:o,isLoading:s=!1,highlightKeywords:i=!1})=>{const{highlightMetadata:c}=useEncryptedSearchContext(),l=t&&i?highlightNode(t,c):t,d=r&&i?highlightNode(r,c):r;return(0,j.jsxs)("span",{className:(0,ht.dh)(["flex flex-align-items-center flex-nowrap message-recipient-item",s&&"flex-item-fluid"]),"data-testid":"message-header:from",children:[(0,j.jsx)("span",{className:"container-to container-to--item no-print",children:e}),(0,j.jsxs)("span",{className:(0,ht.dh)(["flex flex-align-items-center flex-nowrap text-ellipsis max-w100",s&&"flex-item-fluid"]),children:[(0,j.jsxs)("span",{className:"flex-item-fluid message-recipient-item-label-address text-ellipsis max-w100 inline-block",title:a,children:[(0,j.jsx)("span",{className:(0,ht.dh)(["message-recipient-item-label",s&&"inline-block"]),children:l})," ",n&&(0,j.jsx)("span",{className:(0,ht.dh)(["message-recipient-item-address color-weak",s&&"inline-block"]),children:d})]}),o]})]})};const O5=["recipientGroup","group","globalIcon","mapStatusIcons","onClose"];function GroupModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function GroupModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?GroupModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GroupModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A5,C5,E5,L5,P5,Z5,modals_GroupModal=e=>{var t;let{recipientGroup:n,group:r,globalIcon:a,mapStatusIcons:s,onClose:i}=e,c=(0,Sn.Z)(e,O5);const[l]=(0,o.useState)((0,ht.D)("header-group-modal")),p=(null==r?void 0:r.contacts)||[],isChecked=e=>{var t;return!(null===(t=n.recipients)||void 0===t||!t.find((t=>e.Email===t.Address)))},m=(0,u.c)("Info").t(D5||(D5=(0,d.Z)(["Members"]))),g="".concat(null==n||null===(t=n.group)||void 0===t?void 0:t.Name," (").concat(p.length," ").concat(m,")");return(0,j.jsx)(On.Z,GroupModal_objectSpread(GroupModal_objectSpread({title:g,submit:(0,u.c)("Action").t(S5||(S5=(0,d.Z)(["Close"]))),close:null,onSubmit:i,onClose:i},c),{},{children:(0,j.jsx)("ul",{className:"unstyled",children:p.map((e=>{const t="".concat(l,"-").concat(e.ID),n=a||(s?s[e.Email]:void 0);return(0,j.jsxs)("li",{className:"mb0-5",children:[(0,j.jsx)(Nr,{id:t,checked:isChecked(e),disabled:!0}),(0,j.jsx)("span",{className:"min-w1-4e inline-flex align-middle",children:n&&(0,j.jsx)(message_EncryptionStatusIcon,GroupModal_objectSpread({},n))}),(0,j.jsx)(gr.Z,{htmlFor:t,className:"pt0 pl0-5",children:contactToInput(e)})]},e.ID)}))})}))};var T5,k5,z5,_5,recipients_RecipientItemGroup=({group:e,mapStatusIcons:t,globalIcon:n,showAddress:r=!0,highlightKeywords:a=!1})=>{var s;const{getGroupLabel:i}=useRecipientLabel(),{createModal:c}=(0,In.Z)(),{createNotification:l}=(0,hn.Z)(),{groupsWithContactsMap:p}=useContactCache(),[m]=(0,o.useState)((0,ht.D)("dropdown-group")),{anchorRef:g,isOpen:b,toggle:y,close:h}=(0,No.Z)(),I=i(e),f=(0,br.Qm)(null===(s=e.group)||void 0===s?void 0:s.Name),M=useOnCompose();let N=e.recipients.map((e=>e.Address)).join(", ");const x=N;if(e.recipients.length>2){const t=e.recipients[0].Address,n=e.recipients.length-1;N=(0,u.c)("Label").t(A5||(A5=(0,d.Z)([""," and "," others"])),t,n)}return(0,j.jsx)(recipients_RecipientItemLayout,{button:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("button",{ref:g,type:"button",onClick:y,"aria-expanded":b,className:"item-icon flex-item-noshrink rounded inline-flex stop-propagation mr0-5",children:[(0,j.jsx)("span",{className:"mauto item-abbr","aria-hidden":"true",children:f}),(0,j.jsx)("span",{className:"mauto item-caret hidden","aria-hidden":"true",children:(0,j.jsx)(pr.Z,{name:"angle-down"})}),(0,j.jsx)("span",{className:"sr-only",children:(0,u.c)("Action").t(E5||(E5=(0,d.Z)(["Address options"])))})]}),(0,j.jsx)(Mo.Z,{id:m,originalPlacement:"bottom",isOpen:b,anchorRef:g,onClose:h,children:(0,j.jsxs)(dropdown_DropdownMenu,{children:[(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap",onClick:t=>{t.stopPropagation(),M({action:ve.Xh.NEW,referenceMessage:{data:{ToList:e.recipients}}}),h()},children:[(0,j.jsx)(pr.Z,{name:"envelope",className:"mr0-5 mt0-25"}),(0,j.jsx)("span",{className:"flex-item-fluid mtauto mbauto",children:(0,u.c)("Action").t(L5||(L5=(0,d.Z)(["New message"])))})]}),(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap",onClick:t=>{t.stopPropagation(),(0,mr.XD)(e.recipients.map((e=>e.Address)).join(";"),t.currentTarget),l({text:(0,u.c)("Info").t(C5||(C5=(0,d.Z)(["Copied to clipboard"])))}),h()},children:[(0,j.jsx)(pr.Z,{name:"copy",className:"mr0-5 mt0-25"}),(0,j.jsx)("span",{className:"flex-item-fluid mtauto mbauto",children:(0,u.c)("Action").t(P5||(P5=(0,d.Z)(["Copy addresses"])))})]}),(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap",onClick:r=>{var a;r.stopPropagation(),c((0,j.jsx)(modals_GroupModal,{recipientGroup:e,group:p[(null===(a=e.group)||void 0===a?void 0:a.ID)||""],mapStatusIcons:t,globalIcon:n}))},children:[(0,j.jsx)(pr.Z,{name:"user",className:"mr0-5 mt0-25"}),(0,j.jsx)("span",{className:"flex-item-fluid mtauto mbauto",children:(0,u.c)("Action").t(Z5||(Z5=(0,d.Z)(["View recipients"])))})]})]})})]}),label:I,showAddress:r,address:N,title:"".concat(I," ").concat(x),highlightKeywords:a})};var R5,G5,Y5,U5,F5,K5,B5,W5,V5,modals_SimplePublicKeyTable=({contact:e})=>{const[t,n]=(0,o.useState)(),[r,a]=(0,no.Z)(),{isNarrow:s,isTinyMobile:i}=hooks_useActiveBreakpoint(),c=e.bePinnedPublicKey,l=c.getFingerprint(),p=new Date(c.getCreationTime()),m=getFormattedAlgorithmName(c.getAlgorithmInfo());(0,o.useEffect)((()=>{a((async()=>{const e=await c.getExpirationTime();n(e)})())}),[]);const g=[(0,j.jsxs)("div",{title:l,className:"flex flex-nowrap",children:[(0,j.jsx)(icon_ContactKeyWarningIcon,{className:"mr0-5 flex-item-noshrink",publicKey:c,emailAddress:e.emailAddress,isInternal:e.isInternal}),(0,j.jsx)("span",{className:"flex-item-fluid text-ellipsis",children:l})]},l),s?null:(0,Zc.Z)(p)?(0,Et.Z)(p,"PP",{locale:kt.RW}):"-",i?null:r?(0,j.jsx)(Yu.Z,{className:"icon-18p mauto flex"}):(0,Zc.Z)(t)?(0,Et.Z)(t,"PP",{locale:kt.RW}):"-",!s&&m];return(0,j.jsxs)(table_Table,{className:"simple-table",children:[(0,j.jsx)("thead",{children:(0,j.jsxs)("tr",{children:[(0,j.jsx)("th",{scope:"col",className:"text-ellipsis",children:(0,u.c)("Table header").t(T5||(T5=(0,d.Z)(["Fingerprint"])))}),!s&&(0,j.jsx)("th",{scope:"col",className:"text-ellipsis",children:(0,u.c)("Table header").t(k5||(k5=(0,d.Z)(["Created"])))}),!i&&(0,j.jsx)("th",{scope:"col",className:"text-ellipsis",children:(0,u.c)("Table header").t(z5||(z5=(0,d.Z)(["Expires"])))}),!s&&(0,j.jsx)("th",{scope:"col",className:"text-ellipsis",children:(0,u.c)("Table header").t(_5||(_5=(0,d.Z)(["Type"])))})]})}),(0,j.jsx)(table_TableBody,{children:(0,j.jsx)(Qa,{cells:g},l)})]})};const Q5=["contact","onSubmit"];function TrustPublicKeyModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function TrustPublicKeyModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?TrustPublicKeyModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TrustPublicKeyModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H5,X5,J5,q5,$5,e9,t9,modals_TrustPublicKeyModal=e=>{let{contact:t,onSubmit:n}=e,r=(0,Sn.Z)(e,Q5);const a=(0,Dn.Z)(),o=(0,us.df)(),[s,i]=(0,no.Z)(!1),{createNotification:c}=(0,hn.Z)(),{call:l}=(0,Ie.Z)(),p=!t.contactID,m=p?async()=>{var e;const{privateKeys:s}=(0,ju.ee)(await o()),i=[s[0]],{Responses:[{Response:{Code:p}}]}=await(async({contact:e,api:t,privateKeys:n})=>{const{emailAddress:r,name:a,isInternal:o,bePinnedPublicKey:s}=e,i=await pinKeyCreateContact({emailAddress:r,name:a,isInternal:o,bePinnedPublicKey:s,privateKeys:n});return t((0,Lo.el)({Contacts:[{Cards:i}],Overwrite:1,Labels:0}))})({contact:t,api:a,privateKeys:i});var m;if(p!==M.vB.SINGLE_SUCCESS)return c({text:(0,u.c)("Error").t(G5||(G5=(0,d.Z)(["Public key could not be trusted"]))),type:"error"}),void(null===(m=r.onClose)||void 0===m||m.call(r));c({text:(0,u.c)("Success").t(Y5||(Y5=(0,d.Z)(["Public key trusted"]))),type:"success"}),l(),null==n||n(),null===(e=r.onClose)||void 0===e||e.call(r)}:async()=>{var e;const{privateKeys:s,publicKeys:i}=(0,ju.ee)(await o()),p=[s[0]];await(async({contact:e,api:t,publicKeys:n,privateKeys:r})=>{const{contactID:a,emailAddress:o,bePinnedPublicKey:s,isInternal:i}=e,{Contact:{Cards:c}}=await t((0,Lo.vS)(a)),l=!!c.find((({Type:e})=>e===M.BK.SIGNED));if(c.find((({Type:e})=>[M.BK.ENCRYPTED,M.BK.ENCRYPTED_AND_SIGNED].includes(e)))&&!l)throw new Error("Corrupted contact card data");const d=l?await pinKeyUpdateContact({contactCards:c,emailAddress:o,isInternal:i,bePinnedPublicKey:s,publicKeys:n,privateKeys:r}):await pinKeyCreateContact({emailAddress:o,isInternal:i,bePinnedPublicKey:s,privateKeys:r});await t((0,Lo.Tk)(a,{Cards:d}))})({contact:t,api:a,publicKeys:i,privateKeys:p}),c({text:(0,u.c)("Success").t(R5||(R5=(0,d.Z)(["Public key trusted"]))),type:"success"}),l(),null==n||n(),null===(e=r.onClose)||void 0===e||e.call(r)},g=(0,j.jsx)(yr.Z,{loading:s,type:"submit",children:(0,u.c)("Action").t(U5||(U5=(0,d.Z)(["Trust key"])))}),b=p?(0,u.c)("Key pinning").t(F5||(F5=(0,d.Z)(['Clicking "Trust Key" will create a new contact and associate this public key with\n        this sender. Emails from this address will be automatically cryptographically verified.']))):(0,u.c)("Key pinning").t(K5||(K5=(0,d.Z)(['Clicking "Trust Key" will associate this public key with this sender\n        and emails from this address will be automatically cryptographically verified.'])));return(0,j.jsxs)(On.Z,TrustPublicKeyModal_objectSpread(TrustPublicKeyModal_objectSpread({title:(0,u.c)("Title").t(B5||(B5=(0,d.Z)(["Trust public key?"]))),submit:g,onSubmit:()=>i(m()),loading:s},r),{},{children:[(0,j.jsx)(Cn.Z,{className:"mb1",learnMore:"https://protonmail.com/support/knowledge-base/address-verification",children:b}),(0,j.jsx)(Cn.Z,{className:"mb1",learnMore:"https://protonmail.com/support/knowledge-base/how-to-use-pgp/",children:(0,u.c)("Info").t(W5||(W5=(0,d.Z)(["This public key will be automatically used for encrypting email sent to this address."])))}),(0,j.jsxs)("div",{children:[(0,j.jsx)("div",{className:"mb0-5",children:(0,u.c)("Key pinning").t(V5||(V5=(0,d.Z)(["Do you want to trust the following public key?"])))}),(0,j.jsx)(modals_SimplePublicKeyTable,{contact:t})]})]}))};function RecipientItemSingle_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function RecipientItemSingle_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?RecipientItemSingle_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RecipientItemSingle_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var n9,r9,a9,recipients_RecipientItemSingle=({recipient:e,mapStatusIcons:t,globalIcon:n,showAddress:r=!0,showLockIcon:a=!0,signingPublicKey:s,highlightKeywords:i=!1})=>{const[c]=(0,o.useState)((0,ht.D)("dropdown-recipient")),{anchorRef:l,isOpen:p,toggle:m,close:g}=(0,No.Z)(),{createNotification:b}=(0,hn.Z)(),{createModal:y}=(0,In.Z)(),{contactsMap:h}=useContactCache(),{getRecipientLabel:I}=useRecipientLabel(),f=useOnCompose(),M=useOnMailTo(),{ContactID:N}=getContactEmail(h,e.Address)||{},x=n||(t?t[e.Address]:void 0),v=I(e,!0),w=(0,br.Qm)(v),D=!!s,handleClickContact=t=>{t.stopPropagation(),y(N?(0,j.jsx)(modals_ContactDetailsModal,{contactID:N,onMailTo:M}):(0,j.jsx)(modals_ContactModal,{properties:[{field:"email",value:e.Address||""},{field:"fn",value:e.Name||e.Address||""}]}))};return(0,j.jsx)(recipients_RecipientItemLayout,{button:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("button",{ref:l,type:"button",onClick:m,"aria-expanded":p,className:"item-icon flex-item-noshrink rounded inline-flex stop-propagation mr0-5","data-testid":"message:recipient-button",children:[(0,j.jsx)("span",{className:"mauto item-abbr","aria-hidden":"true",children:w}),(0,j.jsx)("span",{className:"mauto item-caret hidden","aria-hidden":"true",children:(0,j.jsx)(pr.Z,{name:"angle-down"})}),(0,j.jsx)("span",{className:"sr-only",children:(0,u.c)("Action").t(X5||(X5=(0,d.Z)(["Address options"])))})]}),(0,j.jsx)(Mo.Z,{id:c,originalPlacement:"bottom",isOpen:p,anchorRef:l,onClose:g,children:(0,j.jsxs)(dropdown_DropdownMenu,{children:[(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap",onClick:t=>{t.stopPropagation(),f({action:ve.Xh.NEW,referenceMessage:{data:{ToList:[e]}}}),g()},children:[(0,j.jsx)(pr.Z,{name:"envelope",className:"mr0-5 mt0-25"}),(0,j.jsx)("span",{className:"flex-item-fluid mtauto mbauto",children:(0,u.c)("Action").t(J5||(J5=(0,d.Z)(["New message"])))})]}),(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap",onClick:t=>{t.stopPropagation(),(0,mr.XD)(e.Address,t.currentTarget),b({text:(0,u.c)("Info").t(H5||(H5=(0,d.Z)(["Copied to clipboard"])))}),g()},children:[(0,j.jsx)(pr.Z,{name:"copy",className:"mr0-5 mt0-25"}),(0,j.jsx)("span",{className:"flex-item-fluid mtauto mbauto",children:(0,u.c)("Action").t(q5||(q5=(0,d.Z)(["Copy address"])))})]}),N?(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap",onClick:handleClickContact,children:[(0,j.jsx)(pr.Z,{name:"user",className:"mr0-5 mt0-25"}),(0,j.jsx)("span",{className:"flex-item-fluid mtauto mbauto",children:(0,u.c)("Action").t($5||($5=(0,d.Z)(["View contact details"])))})]}):(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap",onClick:handleClickContact,children:[(0,j.jsx)(pr.Z,{name:"user-plus",className:"mr0-5 mt0-25"}),(0,j.jsx)("span",{className:"flex-item-fluid mtauto mbauto",children:(0,u.c)("Action").t(e9||(e9=(0,d.Z)(["Create new contact"])))})]}),D&&(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap",onClick:t=>{t.stopPropagation();const n={emailAddress:e.Address||"",name:v,contactID:N,isInternal:!0,bePinnedPublicKey:s};y((0,j.jsx)(modals_TrustPublicKeyModal,{contact:n}))},children:[(0,j.jsx)(pr.Z,{name:"user",className:"mr0-5 mt0-25"}),(0,j.jsx)("span",{className:"flex-item-fluid mtauto mbauto",children:(0,u.c)("Action").t(t9||(t9=(0,d.Z)(["Trust Public Key"])))})]})]})})]}),label:v,showAddress:r,address:(0,j.jsxs)(j.Fragment,{children:["<",e.Address,">"]}),title:"".concat(v," <").concat(e.Address,">"),icon:a&&x&&(0,j.jsx)("span",{className:"flex ml0-25 flex-item-noshrink message-recipient-item-lockIcon",children:(0,j.jsx)(message_EncryptionStatusIcon,RecipientItemSingle_objectSpread({},x))}),highlightKeywords:i})};var o9,s9,i9,recipients_RecipientItem=({recipientOrGroup:e,mapStatusIcons:t,globalIcon:n,showAddress:r=!0,showLockIcon:a=!0,isLoading:o,signingPublicKey:s,highlightKeywords:i=!1})=>o?(0,j.jsx)(recipients_RecipientItemLayout,{isLoading:!0,button:(0,j.jsx)("span",{className:"message-recipient-item-icon item-icon flex-item-noshrink rounded block mr0-5"}),showAddress:r}):e.group?(0,j.jsx)(recipients_RecipientItemGroup,{group:e.group,mapStatusIcons:t,globalIcon:n,showAddress:r,highlightKeywords:i}):e.recipient?(0,j.jsx)(recipients_RecipientItemSingle,{recipient:e.recipient,mapStatusIcons:t,globalIcon:n,showAddress:r,showLockIcon:a,signingPublicKey:s,highlightKeywords:i}):(0,j.jsx)(recipients_RecipientItemLayout,{button:(0,j.jsx)(ur.Z,{title:(0,u.c)("Title").t(n9||(n9=(0,d.Z)(["All recipients were added to the BCC field and cannot be disclosed"]))),children:(0,j.jsx)("span",{className:"message-recipient-item-icon item-icon flex-item-noshrink rounded block mr0-5 flex flex-justify-center flex-align-items-center",children:"?"})}),label:(0,u.c)("Label").t(r9||(r9=(0,d.Z)(["Undisclosed Recipients"]))),title:(0,u.c)("Label").t(a9||(a9=(0,d.Z)(["Undisclosed Recipients"])))});var header_HeaderCollapsed=({labelID:e,labels:t,message:n,messageLoaded:r,isSentMessage:a,isUnreadMessage:o,onExpand:s,breakpoints:i,highlightKeywords:c=!1})=>{var l,p;const m=messages_isDraft(n.data)&&!n.sending,g=isOutbox(n.data)||n.sending,b=isScheduled(n.data);return(0,j.jsxs)("div",{className:(0,ht.dh)(["message-header message-header-collapsed flex flex-nowrap flex-align-items-center cursor-pointer",a?"is-outbound":"is-inbound",o&&"is-unread",!r&&"is-loading"]),onClick:e=>{e.target.closest(".stop-propagation")?e.stopPropagation():s()},"data-testid":"message-header-collapsed:".concat(null===(l=n.data)||void 0===l?void 0:l.Subject),children:[(0,j.jsxs)("div",{className:"flex flex-item-fluid flex-nowrap flex-align-items-center mr0-5",children:[(0,j.jsx)(recipients_RecipientItem,{recipientOrGroup:{recipient:null===(p=n.data)||void 0===p?void 0:p.Sender},showAddress:!1,isLoading:!r,highlightKeywords:c}),r&&(0,j.jsx)(list_ItemAction,{element:n.data,className:"flex-item-noshrink mtauto mbauto ml0-25"}),r&&m&&(0,j.jsx)("span",{className:"badge-label-success ml0-5 flex-item-noshrink",children:(0,u.c)("Info").t(o9||(o9=(0,d.Z)(["Draft"])))}),r&&g&&!b&&(0,j.jsx)("span",{className:"badge-label-primary ml0-5 flex-item-noshrink",children:(0,u.c)("Info").t(s9||(s9=(0,d.Z)(["Sending"])))}),r&&b&&(0,j.jsx)("span",{className:"badge-label-primary ml0-5 flex-item-noshrink",children:(0,u.c)("Info").t(i9||(i9=(0,d.Z)(["Scheduled"])))})]}),(0,j.jsxs)("div",{className:"flex flex-align-items-center flex-nowrap flex-item-noshrink",children:[r?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(list_ItemLabels,{className:"no-mobile",element:n.data,labels:t,labelID:e,showUnlabel:!0,maxNumber:i.isTablet?1:5,"data-testid":"message-header-collapsed:labels"}),!!hasAttachments(n.data)&&(0,j.jsx)("span",{className:"ml0-5 flex",children:(0,j.jsx)(list_ItemAttachmentIcon,{element:n.data,className:"mauto"})}),(0,j.jsx)("span",{className:"ml0-5 flex",children:(0,j.jsx)(list_ItemLocation,{element:n.data,labelID:e})}),(0,j.jsx)(list_ItemExpiration,{element:n.data,className:"flex flex-item-noshrink ml0-25 mr0-25"}),(0,j.jsx)(list_ItemDate,{className:"ml0-5",element:n.data,labelID:e})]}):(0,j.jsx)("span",{className:"message-header-metas ml0-5 flex"}),(0,j.jsx)("span",{className:"message-header-star ml0-5 flex",children:(0,j.jsx)(list_ItemStar,{element:n.data})})]})]})},c9=n(48956).Z;let l9,d9,u9,p9,m9;var g9,j9,b9,y9,h9,I9,f9,M9,N9,x9,v9,w9,D9,S9,O9,A9,C9,E9,L9,P9,Z9,T9,k9,z9,_9,R9,G9;!function(e){e.ALL="all",e.ANY="any"}(l9||(l9={})),function(e){e.SELECT="select",e.SUBJECT="subject",e.SENDER="sender",e.RECIPIENT="recipient",e.ATTACHMENTS="attachments"}(d9||(d9={})),function(e){e.CONTAINS="contains",e.IS="is",e.STARTS="starts",e.ENDS="ends",e.MATCHES="matches",e.IS_NOT="!is",e.DOES_NOT_CONTAIN="!contains",e.DOES_NOT_START="!starts",e.DOES_NOT_END="!ends",e.DOES_NOT_MATCH="!matches"}(u9||(u9={})),function(e){e[e.NAME=0]="NAME",e[e.CONDITIONS=1]="CONDITIONS",e[e.ACTIONS=2]="ACTIONS",e[e.PREVIEW=3]="PREVIEW"}(p9||(p9={})),function(e){e[e.NAME=0]="NAME",e[e.SIEVE=1]="SIEVE"}(m9||(m9={}));const Y9="email",U9="domain",F9=2,getConditionTypeLabels=e=>{switch(e){case d9.SELECT:return(0,u.c)("Filter modal type").t(g9||(g9=(0,d.Z)(["Select…"])));case d9.SUBJECT:return(0,u.c)("Filter modal type").t(j9||(j9=(0,d.Z)(["The subject"])));case d9.SENDER:return(0,u.c)("Filter modal type").t(b9||(b9=(0,d.Z)(["The sender"])));case d9.RECIPIENT:return(0,u.c)("Filter modal type").t(y9||(y9=(0,d.Z)(["The recipient"])));case d9.ATTACHMENTS:return(0,u.c)("Filter modal type").t(h9||(h9=(0,d.Z)(["The attachment"])));default:return""}},getComparatorLabels=e=>{switch(e){case u9.CONTAINS:return(0,u.c)("Condition for custom filter").t(I9||(I9=(0,d.Z)(["contains"])));case u9.IS:return(0,u.c)("Condition for custom filter").t(f9||(f9=(0,d.Z)(["is exactly"])));case u9.STARTS:return(0,u.c)("Condition for custom filter").t(M9||(M9=(0,d.Z)(["begins with"])));case u9.ENDS:return(0,u.c)("Condition for custom filter").t(N9||(N9=(0,d.Z)(["ends with"])));case u9.MATCHES:return(0,u.c)("Condition for custom filter").t(x9||(x9=(0,d.Z)(["matches"])));case u9.DOES_NOT_CONTAIN:return(0,u.c)("Condition for custom filter").t(v9||(v9=(0,d.Z)(["does not contain"])));case u9.IS_NOT:return(0,u.c)("Condition for custom filter").t(w9||(w9=(0,d.Z)(["is not"])));case u9.DOES_NOT_START:return(0,u.c)("Condition for custom filter").t(D9||(D9=(0,d.Z)(["does not begin with"])));case u9.DOES_NOT_END:return(0,u.c)("Condition for custom filter").t(S9||(S9=(0,d.Z)(["does not end with"])));case u9.DOES_NOT_MATCH:return(0,u.c)("Condition for custom filter").t(O9||(O9=(0,d.Z)(["does not match"])));default:return""}},getOperatorLabels=e=>{switch(e){case l9.ALL:return(0,u.c)("Filter modal operators").t(A9||(A9=(0,d.Z)(["All conditions must be fulfilled (AND)"])));case l9.ANY:return(0,u.c)("Filter modal operators").t(C9||(C9=(0,d.Z)(["One condition must be fulfilled (OR)"])));default:return""}},K9=[{label:getConditionTypeLabels(d9.SELECT),value:d9.SELECT},{label:getConditionTypeLabels(d9.SUBJECT),value:d9.SUBJECT},{label:getConditionTypeLabels(d9.SENDER),value:d9.SENDER},{label:getConditionTypeLabels(d9.RECIPIENT),value:d9.RECIPIENT},{label:getConditionTypeLabels(d9.ATTACHMENTS),value:d9.ATTACHMENTS}],B9=[{label:getComparatorLabels(u9.CONTAINS),value:u9.CONTAINS},{label:getComparatorLabels(u9.IS),value:u9.IS},{label:getComparatorLabels(u9.STARTS),value:u9.STARTS},{label:getComparatorLabels(u9.ENDS),value:u9.ENDS},{label:getComparatorLabels(u9.MATCHES),value:u9.MATCHES},{label:getComparatorLabels(u9.DOES_NOT_CONTAIN),value:u9.DOES_NOT_CONTAIN},{label:getComparatorLabels(u9.IS_NOT),value:u9.IS_NOT},{label:getComparatorLabels(u9.DOES_NOT_START),value:u9.DOES_NOT_START},{label:getComparatorLabels(u9.DOES_NOT_END),value:u9.DOES_NOT_END},{label:getComparatorLabels(u9.DOES_NOT_MATCH),value:u9.DOES_NOT_MATCH}],W9=[{label:getOperatorLabels(l9.ALL),value:l9.ALL},{label:getOperatorLabels(l9.ANY),value:l9.ANY}],getDefaultFolders=()=>[{group:(0,u.c)("Option group").t(E9||(E9=(0,d.Z)(["Move to..."]))),text:(0,u.c)("Filter Actions").t(L9||(L9=(0,d.Z)(["Select a folder"]))),value:"",disabled:!0},{group:(0,u.c)("Option group").t(P9||(P9=(0,d.Z)(["Default folders"]))),text:(0,u.c)("Filter Actions").t(Z9||(Z9=(0,d.Z)(["Archive"]))),value:"archive"},{group:(0,u.c)("Option group").t(T9||(T9=(0,d.Z)(["Default folders"]))),text:(0,u.c)("Filter Actions").t(k9||(k9=(0,d.Z)(["Inbox"]))),value:"inbox"},{group:(0,u.c)("Option group").t(z9||(z9=(0,d.Z)(["Default folders"]))),text:(0,u.c)("Filter Actions").t(_9||(_9=(0,d.Z)(["Spam"]))),value:"spam"},{group:(0,u.c)("Option group").t(R9||(R9=(0,d.Z)(["Default folders"]))),text:(0,u.c)("Filter Actions").t(G9||(G9=(0,d.Z)(["Trash"]))),value:"trash"}];function utils_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function utils_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?utils_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):utils_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const computeFromTree=e=>{const ignoreComment=({Type:e})=>"Comment"!==e,t=c9.fromTree(e.Tree),n=c9.toTree(t,e.Version).filter(ignoreComment),r=e.Tree.filter(ignoreComment);return(0,WI.Z)(n,r)?t:null},computeTree=({Simple:e,Version:t})=>e?c9.toTree(e,t):[];function normalize(){const e=new RegExp("[".concat(["‹","›","‚","‘","‛","’","❛","❜","❮","❯"].join(""),"]"),"g"),t=new RegExp("[".concat(["«","»","„","“","‟","”","❝","❞","〝","〞","〟","＂"].join(""),"]"),"g");return(n="")=>e.test(n)||t.test(n)?n.replace(e,"'").replace(t,'"'):n}const convertOperator=({statement:e})=>(0,Ne.qL)(W9,"value")[e],convertConditions=({conditions:e})=>{const t=(0,Ne.qL)(B9,"value"),n=(0,Ne.qL)(K9,"value");return e.map((e=>({Comparator:t[e.comparator],Type:n[e.type],Values:e.values||[]})))},convertActions=({actions:e})=>{const{labelAs:{labels:t},moveTo:{folder:n},markAs:r,autoReply:a}=e;return{FileInto:n?[n,...t]:[...t],Mark:{Read:r.read,Starred:r.starred},Vacation:a||null}},convertModel=(e,t=!1)=>{const n={ID:e.id||"",Name:e.name||"",Status:e.status||1,Version:e.version||F9};if(t){const t=e;return utils_objectSpread(utils_objectSpread({},n),{},{Sieve:t.sieve||""})}const r=utils_objectSpread(utils_objectSpread({},n),{},{Simple:{Operator:convertOperator(e),Conditions:convertConditions(e),Actions:convertActions(e)}});return utils_objectSpread(utils_objectSpread({},r),{},{Tree:computeTree(r)})},isSieve=e=>!computeFromTree(e),V9={1:"",2:'require ["include", "environment", "variables", "relational", "comparator-i;ascii-numeric", "spamtest"];\n\n# Generated: Do not run this script on spam messages\nif allof (environment :matches "vnd.proton.spam-threshold" "*",\nspamtest :value "ge" :comparator "i;ascii-numeric" "${1}")\n{\n    return;\n}\n\n\n'},newFilter=()=>({ID:"",Name:"",Status:1,Version:F9,Simple:{Operator:{label:W9[0].label,value:W9[0].value},Conditions:[{Values:[],Type:K9[0],Comparator:B9[0]}],Actions:{FileInto:[],Vacation:"",Mark:{Read:!1,Starred:!1}}}});var Q9=newFilter,H9=n(83192),X9=(0,vr.Z)(H9.t),J9=n(51126);var q9,$9,e8,t8,breadcrumb_Breadcrumb=({list:e,current:t=0,onClick:n,className:r,getIsDisabled:a})=>{const handleClick=e=>()=>{n&&n(e)};return(0,j.jsx)("ul",{className:(0,ht.dh)(["breadcrumb-container unstyled inline-flex pl0-5 pr0-5",r]),children:e.map(((n,r)=>{var o;const s=r.toString(),i=r===e.length-1,c=null!==(o=null==a?void 0:a(r))&&void 0!==o&&o;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("li",{className:"breadcrumb-item",children:(0,j.jsx)("button",{type:"button",disabled:r===t||c,"aria-current":t===r&&"step",onClick:handleClick(r),className:"breadcrumb-button",children:n},s)},s),!i&&(0,j.jsx)("li",{"aria-hidden":"true",className:"inline-flex color-disabled",children:(0,j.jsx)(pr.Z,{size:14,className:"flex-item-noshrink mauto",name:"angle-down",rotate:270})})]})}))})};function HeaderFilterModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function HeaderFilterModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?HeaderFilterModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HeaderFilterModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var n8,r8,a8,o8,s8,modal_HeaderFilterModal=({model:e,errors:t,onChange:n})=>{const r=[{step:p9.NAME,content:(0,u.c)("Step in filter modal").t(q9||(q9=(0,d.Z)(["Name"])))},{step:p9.CONDITIONS,content:(0,u.c)("Step in filter modal").t($9||($9=(0,d.Z)(["Conditions"])))},{step:p9.ACTIONS,content:(0,u.c)("Step in filter modal").t(e8||(e8=(0,d.Z)(["Actions"])))},{step:p9.PREVIEW,content:(0,u.c)("Step in filter modal").t(t8||(t8=(0,d.Z)(["Preview"])))}];return(0,j.jsx)("header",{children:(0,j.jsx)(breadcrumb_Breadcrumb,{onClick:t=>{const a=r[t];if(!a)return;const{step:o}=a;n(HeaderFilterModal_objectSpread(HeaderFilterModal_objectSpread({},e),{},{step:o}))},getIsDisabled:e=>{const n=r[e];if(!n)return!1;const{step:a}=n;return!(a!==p9.CONDITIONS||!t.name)||(!(a!==p9.ACTIONS||!t.name&&!t.conditions)||!(a!==p9.PREVIEW||!(t.name||t.actions||t.conditions)))},current:r.findIndex((({step:t})=>t===e.step)),list:r.map((({content:e})=>e))})})};function FooterFilterModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function FooterFilterModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FooterFilterModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FooterFilterModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const i8={[p9.NAME]:p9.CONDITIONS,[p9.CONDITIONS]:p9.ACTIONS,[p9.ACTIONS]:p9.PREVIEW,[p9.PREVIEW]:p9.PREVIEW},c8={[p9.NAME]:p9.NAME,[p9.CONDITIONS]:p9.NAME,[p9.ACTIONS]:p9.CONDITIONS,[p9.PREVIEW]:p9.ACTIONS};var l8,d8,u8,p8,modal_FooterFilterModal=({model:e,errors:t,onClose:n,onChange:r,loading:a})=>{const{step:o}=e;return(0,j.jsxs)(j.Fragment,{children:[o===p9.NAME?(0,j.jsx)(Ea.Z,{shape:"outline",disabled:a,onClick:n,children:(0,u.c)("Action").t(n8||(n8=(0,d.Z)(["Cancel"])))}):(0,j.jsx)(Ea.Z,{shape:"outline",disabled:a,onClick:()=>{r(FooterFilterModal_objectSpread(FooterFilterModal_objectSpread({},e),{},{step:c8[o]}))},children:(0,u.c)("Action").t(r8||(r8=(0,d.Z)(["Back"])))}),(0,j.jsxs)("div",{children:[o!==p9.PREVIEW&&(0,j.jsx)(Ea.Z,{shape:"outline",disabled:o===p9.CONDITIONS?!!t.conditions:[p9.ACTIONS,p9.PREVIEW].includes(o)?!!t.conditions||!!t.actions:a||!!t.name,onClick:()=>{r(FooterFilterModal_objectSpread(FooterFilterModal_objectSpread({},e),{},{step:i8[o]}))},className:(0,ht.dh)([o===p9.ACTIONS&&"mr1"]),children:o===p9.ACTIONS?(0,u.c)("Action").t(a8||(a8=(0,d.Z)(["Preview"]))):(0,u.c)("Action").t(o8||(o8=(0,d.Z)(["Next"])))}),[p9.ACTIONS,p9.PREVIEW].includes(o)&&(0,j.jsx)(Ea.Z,{color:"norm",disabled:a||!!t.name||!!t.conditions||!!t.actions,type:"submit",children:(0,u.c)("Action").t(s8||(s8=(0,d.Z)(["Save"])))})]})]})};function FilterNameForm_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function FilterNameForm_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FilterNameForm_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FilterNameForm_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m8,g8,j8,b8,modal_FilterNameForm=({isSieveFilter:e=!1,isNarrow:t,model:n,errors:r,onChange:a,loading:o})=>(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Cn.Z,{className:"mb1",children:e?(0,u.c)("Info").t(l8||(l8=(0,d.Z)(["Filters work on all emails, including incoming as well as sent emails. Each filter must contain at least a name and a valid Sieve script."]))):(0,u.c)("Info").t(d8||(d8=(0,d.Z)(["Filters work on all emails, including incoming as well as sent emails. Each filter must contain at least a name, a condition and an action."])))}),(0,j.jsxs)("div",{className:"flex flex-nowrap on-mobile-flex-column align-items-center pt1 pb1",children:[(0,j.jsx)("label",{htmlFor:"name",className:(0,ht.dh)(["w20 pt0-5",t&&"mb1"]),children:(0,u.c)("Label").t(u8||(u8=(0,d.Z)(["Filter Name"])))}),(0,j.jsx)(yo.Z,{className:(0,ht.dh)([!t&&"ml1"]),children:(0,j.jsx)(jr.Z,{id:"name",placeholder:(0,u.c)("Placeholder").t(p8||(p8=(0,d.Z)(["Name"]))),value:n.name,error:r.name,onChange:({target:e})=>a(FilterNameForm_objectSpread(FilterNameForm_objectSpread({},n),{},{name:e.value})),onKeyDown:t=>{if("Enter"===t.key&&!o&&!r.name){if(t.preventDefault(),t.stopPropagation(),e)return void a(FilterNameForm_objectSpread(FilterNameForm_objectSpread({},n),{},{step:m9.SIEVE}));a(FilterNameForm_objectSpread(FilterNameForm_objectSpread({},n),{},{step:p9.CONDITIONS}))}},autoFocus:!0,required:!0})})]})]});function FilterActionsFormLabelsRow_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function FilterActionsFormLabelsRow_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FilterActionsFormLabelsRow_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FilterActionsFormLabelsRow_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y8,h8,I8,f8,modal_FilterActionsFormLabelsRow=({actions:e,isNarrow:t,handleUpdateActions:n,labels:r})=>{const{createModal:a}=(0,In.Z)(),{labelAs:s}=e,{isOpen:i}=s,handleChangeModel=t=>{n({labelAs:FilterActionsFormLabelsRow_objectSpread(FilterActionsFormLabelsRow_objectSpread({},e.labelAs),t)})};return(0,j.jsxs)("div",{className:"border-bottom flex flex-nowrap on-mobile-flex-column align-items-center pt1 pb1",children:[(0,j.jsxs)("button",{type:"button",className:(0,ht.dh)(["w20 text-left",t&&"mb1"]),onClick:()=>{handleChangeModel({isOpen:!i})},children:[(0,j.jsx)(pr.Z,{name:"angle-down",className:(0,ht.dh)([i&&"rotateX-180"])}),(0,j.jsx)("span",{className:(0,ht.dh)(["ml0-5",e.error&&"color-danger"]),children:(0,u.c)("Label").t(g8||(g8=(0,d.Z)(["Label as"])))})]}),(0,j.jsx)("div",{className:(0,ht.dh)(["flex-item-fluid",!t&&"ml1"]),children:i?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:"w100",children:r.length?r.map((e=>(0,j.jsx)("div",{className:"mb0-5 inline-block text-ellipsis",children:(0,j.jsx)(Nr,{className:"mr1 flex-nowrap",checked:s.labels.includes(e.Name),onChange:()=>{const t=s.labels.indexOf(e.Name);t>=0?(s.labels.splice(t,1),handleChangeModel({labels:[...s.labels]})):handleChangeModel({labels:[...s.labels,e.Name]})},labelOnClick:e=>e.stopPropagation(),children:(0,j.jsx)("span",{className:"inline-flex align-middle",children:(0,j.jsx)(labelStack_LabelStack,{labels:[{name:e.Name,color:e.Color,title:e.Name}]})})})},e.Name))):(0,j.jsx)("div",{className:"pt0-5 mb1",children:(0,u.c)("Label").t(j8||(j8=(0,d.Z)(["No label found"])))})}),(0,j.jsx)(Ea.Z,{shape:"outline",className:"mt0",onClick:async()=>{const e=await new Promise(((e,t)=>{a((0,j.jsx)(modals_EditLabelModal,{onAdd:e,onClose:t,type:"label"}))}));handleChangeModel({labels:[...s.labels,e.Name]})},children:(0,u.c)("Action").t(b8||(b8=(0,d.Z)(["Create label"])))})]}):(0,j.jsx)("div",{className:"mt0-5",children:null!=s&&s.labels.length?(0,j.jsx)("div",{children:null==s?void 0:s.labels.map((e=>{const t=null==r?void 0:r.find((t=>t.Name===e));return t?(0,j.jsx)(o.Fragment,{children:(0,j.jsx)("span",{className:"ml0-5 mr0-5 mb0-5",children:(0,j.jsx)(labelStack_LabelStack,{labels:[{name:t.Name,color:t.Color,title:t.Name}]})})},e):null}))}):(0,j.jsx)("em",{children:(0,u.c)("Info").t(m8||(m8=(0,d.Z)(["No label selected"])))})})})]})};function FilterActionsFormFolderRow_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function FilterActionsFormFolderRow_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FilterActionsFormFolderRow_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FilterActionsFormFolderRow_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const FilterActionsFormFolderRow_reducer=(e=[],t,n=0)=>(e.push((({Path:e,Name:t},n=0)=>({value:e||"",text:formatFolderName(n,t," • "),group:(0,u.c)("Option group").t(y8||(y8=(0,d.Z)(["Custom folders"])))}))(t,n)),Array.isArray(t.subfolders)&&t.subfolders.forEach((t=>FilterActionsFormFolderRow_reducer(e,t,n+1))),e);var M8,N8,x8,v8,w8,D8,modal_FilterActionsFormFolderRow=({folders:e,isNarrow:t,actions:n,handleUpdateActions:r})=>{const{createModal:a}=(0,In.Z)(),s=buildTreeview(e).reduce(((e,t)=>FilterActionsFormFolderRow_reducer(e,t,0)),[]),i=[...getDefaultFolders()].concat(s),{moveTo:c}=n,{isOpen:l}=c,handleChangeModel=e=>{r({moveTo:FilterActionsFormFolderRow_objectSpread(FilterActionsFormFolderRow_objectSpread({},n.moveTo),e)})};return(0,j.jsxs)("div",{className:"border-bottom flex flex-nowrap on-mobile-flex-column align-items-center pt1 pb1",children:[(0,j.jsxs)("button",{type:"button",className:(0,ht.dh)(["w20 text-left",t&&"mb1"]),onClick:()=>{handleChangeModel({isOpen:!l})},children:[(0,j.jsx)(pr.Z,{name:"angle-down",className:(0,ht.dh)([l&&"rotateX-180"])}),(0,j.jsx)("span",{className:(0,ht.dh)(["ml0-5",n.error&&"color-danger"]),children:(0,u.c)("Label").t(I8||(I8=(0,d.Z)(["Move to"])))})]}),(0,j.jsx)("div",{className:(0,ht.dh)(["flex flex-column flex-item-fluid",!t&&"ml1"]),children:l?(0,j.jsxs)("div",{className:"w100",children:[(0,j.jsx)(Ec.Z,{id:"memberSelect",value:c.folder||"",options:i,onChange:({target:{value:e}})=>handleChangeModel({folder:e})}),(0,j.jsx)(Ea.Z,{shape:"outline",className:"mt1",onClick:async()=>{const e=await new Promise(((e,t)=>{a((0,j.jsx)(modals_EditLabelModal,{onAdd:e,onClose:t,type:"folder"}))}));handleChangeModel({folder:e.Path})},children:(0,u.c)("Action").t(f8||(f8=(0,d.Z)(["Create folder"])))})]}):(()=>{if(null==c||!c.folder)return(0,j.jsx)("em",{className:(0,ht.dh)(["pt0-5","color-weak"]),children:(0,u.c)("Info").t(h8||(h8=(0,d.Z)(["No folder selected"])))});let e;var t;["archive","inbox","spam","trash"].includes(null==c?void 0:c.folder)?e=(0,j.jsxs)("span",{className:"inline-flex flex-align-items-center mr2",children:[(0,j.jsx)(pr.Z,{name:null==c?void 0:c.folder,className:"mr0-5"}),null===(t=i.find((e=>e.value===(null==c?void 0:c.folder))))||void 0===t?void 0:t.text]}):e=null==c?void 0:c.folder.split("/").map(((e,t)=>(0,j.jsxs)(o.Fragment,{children:[0!==t&&(0,j.jsx)(pr.Z,{name:"angle-down",className:"ml0-5",style:{transform:"rotate(-90deg)"}}),(0,j.jsxs)("span",{className:(0,ht.dh)(["max-w100 flex-nowrap inline-flex flex-align-items-center",0!==t&&"ml0-5"]),children:[(0,j.jsx)(pr.Z,{name:"folder",className:"mr0-5"}),(0,j.jsx)("span",{className:"text-ellipsis",title:e,children:e})]})]},e)));return(0,j.jsx)("div",{className:"pt0-5 flex flex-align-items-center max-w100",children:e})})()})]})};function FilterActionsFormMarkAsRow_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function FilterActionsFormMarkAsRow_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FilterActionsFormMarkAsRow_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FilterActionsFormMarkAsRow_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var modal_FilterActionsFormMarkAsRow=({isNarrow:e,actions:t,handleUpdateActions:n})=>{const{markAs:r}=t,{isOpen:a}=r,handleChangeModel=e=>{n({markAs:FilterActionsFormMarkAsRow_objectSpread(FilterActionsFormMarkAsRow_objectSpread({},t.markAs),e)})};return(0,j.jsxs)("div",{className:"border-bottom flex flex-nowrap on-mobile-flex-column align-items-center pt1 pb1",children:[(0,j.jsxs)("button",{type:"button",className:(0,ht.dh)(["w20 text-left",e&&"mb1"]),onClick:()=>{handleChangeModel({isOpen:!a})},children:[(0,j.jsx)(pr.Z,{name:"angle-down",className:(0,ht.dh)([a&&"rotateX-180"])}),(0,j.jsx)("span",{className:(0,ht.dh)(["ml0-5",t.error&&"color-danger"]),children:(0,u.c)("Label").t(v8||(v8=(0,d.Z)(["Mark as"])))})]}),(0,j.jsx)("div",{className:(0,ht.dh)(["flex flex-column flex-item-fluid",!e&&"ml1"]),children:a?(0,j.jsxs)("div",{className:"w100 pt0-5 pb0-5",children:[(0,j.jsx)(Nr,{checked:r.read,onChange:e=>{handleChangeModel({read:e.target.checked})},labelOnClick:e=>e.stopPropagation(),children:(0,j.jsx)("span",{className:"ml0-5",children:(0,u.c)("Label").t(w8||(w8=(0,d.Z)(["Read"])))})}),(0,j.jsx)(Nr,{className:"ml2",checked:r.starred,onChange:e=>{handleChangeModel({starred:e.target.checked})},labelOnClick:e=>e.stopPropagation(),children:(0,j.jsx)("span",{className:"ml0-5",children:(0,u.c)("Label").t(D8||(D8=(0,d.Z)(["Starred"])))})})]}):null!=r&&r.read||null!=r&&r.starred?(0,j.jsxs)("div",{className:"pt0-5",children:[(null==r?void 0:r.read)&&(0,j.jsxs)("span",{className:"inline-flex flex-align-items-center mr2",children:[(0,j.jsx)(pr.Z,{name:"eye",className:"mr0-5"}),(0,u.c)("Label").t(N8||(N8=(0,d.Z)(["Read"])))]}),(null==r?void 0:r.starred)&&(0,j.jsxs)("span",{className:"inline-flex flex-align-items-center",children:[(0,j.jsx)(pr.Z,{name:"star",className:"mr0-5"}),(0,u.c)("Label").t(x8||(x8=(0,d.Z)(["Starred"])))]})]}):(0,j.jsx)("em",{className:"pt0-5",children:(0,u.c)("Info").t(M8||(M8=(0,d.Z)(["No action selected"])))})})]})};const SimpleSquireEditor=({className:e,supportImages:t=!0,isNarrow:n,onChange:r,disabled:a,onReady:o,onFocus:s,keydownHandler:i,id:c},l)=>{const{isNarrow:d}=hooks_useActiveBreakpoint();return(0,j.jsx)(qM,{id:c,ref:l,className:(0,ht.dh)([e,"simple-squire-editor"]),metadata:{supportImages:t},onChange:r,isNarrow:d||n,disabled:a,onReady:o,onFocus:s,onAddImages:e=>{e.forEach((e=>{(async e=>{var t;const n=await(0,To.s3)(e);null===(t=l.current)||void 0===t||t.insertImage(n)})(e)}))},keydownHandler:i})};var S8,O8,A8,C8=(0,o.forwardRef)(SimpleSquireEditor);var modal_FilterActionsFormAutoReplyRow=({isEdit:e,isNarrow:t,actions:n,handleUpdateActions:r})=>{const[a]=(0,bn.ZP)(),s=(0,o.useRef)(null),{autoReply:i}=n,[l,p]=(0,o.useState)(!!i),[m,g]=(0,o.useState)(i||"");return(0,o.useEffect)((()=>{r({autoReply:l?m:""})}),[l]),(0,j.jsx)("div",{className:"flex flex-nowrap on-mobile-flex-column align-items-center pt1 pb1",children:a.hasPaidMail?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("label",{htmlFor:"autoReply",className:(0,ht.dh)(["w20 pt0-5",t&&"mb1"]),children:(0,j.jsx)("span",{className:(0,ht.dh)([!t&&"ml1"]),children:(0,u.c)("Label").t(S8||(S8=(0,d.Z)(["Send auto-reply"])))})}),(0,j.jsxs)("div",{className:(0,ht.dh)(["flex flex-column flex-item-fluid",!t&&"ml1"]),children:[(0,j.jsx)(cm,{id:"autoReply",checked:l,onChange:()=>{p((e=>!e))}}),l&&(0,j.jsx)("div",{className:"w100 mt1",children:(0,j.jsx)(C8,{ref:s,onReady:()=>{s.current&&(s.current.value=m,e||s.current.focus())},supportImages:!1,onChange:e=>{g(e),r({autoReply:e})}})})]})]}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:(0,ht.dh)(["w20 mr1 pt0-5",t&&"mb1"]),children:(0,j.jsx)("span",{className:"ml0-5 mr0-5",children:(0,u.c)("Label").t(O8||(O8=(0,d.Z)(["Send auto-reply"])))})}),(0,j.jsx)(ur.Z,{title:(0,u.c)("Tooltip").t(A8||(A8=(0,d.Z)(["This feature is only available for paid users"]))),children:(0,j.jsx)("span",{children:(0,j.jsx)(cm,{disabled:!0,checked:!1,onChange:c.ZT})})})]})})};function FilterActionsForm_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function FilterActionsForm_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FilterActionsForm_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FilterActionsForm_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E8,L8,P8,Z8,T8,k8,z8,_8,R8,G8,Y8,U8,F8,K8,B8,W8,V8,modal_FilterActionsForm=({isNarrow:e,labels:t,folders:n,model:r,onChange:a,isEdit:o})=>{const onUpdateActions=e=>{a(FilterActionsForm_objectSpread(FilterActionsForm_objectSpread({},r),{},{actions:FilterActionsForm_objectSpread(FilterActionsForm_objectSpread({},r.actions),e)}))};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(modal_FilterActionsFormLabelsRow,{actions:r.actions,handleUpdateActions:onUpdateActions,labels:t,isNarrow:e}),(0,j.jsx)(modal_FilterActionsFormFolderRow,{actions:r.actions,handleUpdateActions:onUpdateActions,folders:n,isNarrow:e}),(0,j.jsx)(modal_FilterActionsFormMarkAsRow,{actions:r.actions,handleUpdateActions:onUpdateActions,isNarrow:e}),(0,j.jsx)(modal_FilterActionsFormAutoReplyRow,{actions:r.actions,handleUpdateActions:onUpdateActions,isNarrow:e,isEdit:o})]})};function FilterConditionsFormRow_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function FilterConditionsFormRow_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FilterConditionsFormRow_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FilterConditionsFormRow_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const{SELECT:Q8,SUBJECT:H8,SENDER:X8,RECIPIENT:J8}=d9;var q8,$8,e6,t6,n6,r6,FilterConditionsFormRow=({isNarrow:e,conditionIndex:t,statement:n,condition:r,handleDelete:a,handleUpdateCondition:s,displayDelete:i,isEdit:c})=>{const l=K9.map((({value:e},t)=>{const n={text:getConditionTypeLabels(e),value:e};return 0===t&&(n.disabled=!0),n})),p=B9.map((({value:e})=>({text:getComparatorLabels(e),value:e}))),[m,g]=(0,o.useState)(r.isOpen),[b,y]=(0,o.useState)(r.values||[]),[h,I]=(0,o.useState)(!c&&r.defaultValue?r.defaultValue:""),{type:f,comparator:M}=r,N=n===l9.ALL?(0,u.c)("Label").t(E8||(E8=(0,d.Z)(["AND"]))):(0,u.c)("Label").t(L8||(L8=(0,d.Z)(["OR"]))),x=0===t?(0,u.c)("Label").t(P8||(P8=(0,d.Z)(["IF"]))):N,onAddNewToken=()=>{y((e=>[...e,h.trim()])),I("")};(0,o.useEffect)((()=>{r.type===Q8?r.error=(0,u.c)("Error").t(Z8||(Z8=(0,d.Z)(["Empty condition"]))):![H8,X8,J8].includes(r.type)||r.values&&r.values.length?r.error="":r.error=(0,u.c)("Error").t(T8||(T8=(0,d.Z)(["Condition incomplete"])))}),[r]),(0,o.useEffect)((()=>{s(t,FilterConditionsFormRow_objectSpread(FilterConditionsFormRow_objectSpread({},r),{},{values:b}))}),[b]),(0,o.useEffect)((()=>{s(t,FilterConditionsFormRow_objectSpread(FilterConditionsFormRow_objectSpread({},r),{},{isOpen:m}))}),[m]);const onChangeInputValue=e=>{I(e.target.value)},renderToken=(e,n)=>(0,j.jsxs)(o.Fragment,{children:[n>0&&(0,j.jsx)("span",{className:"ml0-5 mr0-5",children:(0,u.c)("Label").t(_8||(_8=(0,d.Z)(["or"])))}),(0,j.jsxs)("span",{className:"inline-flex flex-row flex-align-items-center mb0-5 condition-token",role:"listitem",children:[(0,j.jsx)("span",{className:"text-ellipsis text-no-decoration",title:e,children:e}),(0,j.jsxs)("button",{type:"button",className:"flex flex-item-noshrink ml0-5",onClick:()=>(e=>{y((t=>(t.splice(e,1),[...t])))})(n),children:[(0,j.jsx)(pr.Z,{name:"xmark",size:11}),(0,j.jsx)("span",{className:"sr-only",children:(0,u.c)("Action").t(R8||(R8=(0,d.Z)(["Remove this label"])))})]})]},"condition-".concat(t,"-token-").concat(n))]},"Condition_".concat(t,"_Token_").concat(n));return(0,j.jsx)("div",{className:"border-bottom",children:(0,j.jsxs)("div",{className:"flex flex-nowrap on-mobile-flex-column align-items-center pt1 pb1",children:[(0,j.jsxs)("button",{type:"button",className:(0,ht.dh)(["w20 text-left",e&&"mb1"]),onClick:()=>g((e=>!e)),children:[(0,j.jsx)(pr.Z,{name:"angle-down",className:(0,ht.dh)([m&&"rotateX-180"])}),(0,j.jsx)("span",{className:(0,ht.dh)(["ml0-5",r.error&&"color-danger"]),children:x})]}),(0,j.jsxs)("div",{className:(0,ht.dh)(["flex flex-column flex-item-fluid",!e&&"ml1"]),children:[m?(0,j.jsxs)("div",{className:"flex",children:[(0,j.jsx)("span",{className:"w50 pr1",children:(0,j.jsx)(Ec.Z,{options:l,value:f,onChange:e=>{s(t,FilterConditionsFormRow_objectSpread(FilterConditionsFormRow_objectSpread({},r),{},{type:e.target.value}))}})}),f&&[d9.SUBJECT,d9.SENDER,d9.RECIPIENT].includes(f)&&(0,j.jsx)("span",{className:"w50",children:(0,j.jsx)(Ec.Z,{options:p,value:M,onChange:e=>{s(t,FilterConditionsFormRow_objectSpread(FilterConditionsFormRow_objectSpread({},r),{},{comparator:e.target.value}))}})})]}):(()=>{if(null!=r&&r.error)return(0,j.jsx)("em",{className:"pt0-5 color-danger",children:null==r?void 0:r.error});let e,t;if(f===d9.ATTACHMENTS){const n=(null==r?void 0:r.comparator)===u9.CONTAINS?(0,u.c)("Label").t(U8||(U8=(0,d.Z)(["with attachments"]))):(0,u.c)("Label").t(F8||(F8=(0,d.Z)(["without attachment"]))),a=(0,j.jsx)("strong",{children:n},"attachments");e=(0,u.c)("Label").jt(K8||(K8=(0,d.Z)(["The email was sent ",""])),a),t=(0,u.c)("Label").t(B8||(B8=(0,d.Z)(["The email was sent ",""])),n)}else{var n,a;const s=getConditionTypeLabels(f),i=getComparatorLabels(M),c=null==r||null===(n=r.values)||void 0===n?void 0:n.map(((e,t)=>t>0?(0,j.jsxs)(o.Fragment,{children:[" ",(0,u.c)("Label").t(W8||(W8=(0,d.Z)(["or"])))," ",(0,j.jsx)("strong",{children:e})]},"".concat(e).concat(t)):(0,j.jsx)("strong",{children:e},"".concat(e).concat(t)))),l=null==r||null===(a=r.values)||void 0===a?void 0:a.map(((e,t)=>t>0?" or ".concat(e):e));t="".concat(s," ").concat(i," ").concat(l),e=(0,j.jsxs)(j.Fragment,{children:[s," ",i," ",c]})}return(0,j.jsx)("span",{className:"max-w100 pt0-5 text-ellipsis",title:t,children:e})})(),m&&f&&f!==d9.SELECT&&(0,j.jsx)("div",{className:"flex",children:f===d9.ATTACHMENTS?(()=>{const e=(null==r?void 0:r.comparator)===u9.CONTAINS,toggleAttachment=()=>{s(t,FilterConditionsFormRow_objectSpread(FilterConditionsFormRow_objectSpread({},r),{},{comparator:e?u9.DOES_NOT_CONTAIN:u9.CONTAINS}))};return(0,j.jsxs)("div",{className:"mt1 flex",children:[(0,j.jsx)(input_Radio,{id:"condition-".concat(t,"-with-attachment"),name:"attachment-condition-".concat(t),className:"flex flex-nowrap radio--ontop mr1",checked:e,onChange:toggleAttachment,children:(0,u.c)("Label").t(k8||(k8=(0,d.Z)(["With attachment"])))}),(0,j.jsx)(input_Radio,{id:"condition-".concat(t,"-without-attachment"),name:"attachment-condition-".concat(t),className:"flex flex-nowrap radio--ontop",checked:!e,onChange:toggleAttachment,children:(0,u.c)("Label").t(z8||(z8=(0,d.Z)(["Without attachment"])))})]})})():(0,j.jsxs)("div",{className:"mt1 flex-item-fluid",children:[b.length?(0,j.jsx)("div",{className:"mb0-5",children:b.map(renderToken)}):null,(0,j.jsxs)("div",{className:"flex flex-nowrap",children:[(0,j.jsx)("span",{className:"flex-item-fluid pr1",children:(0,j.jsx)(jr.Z,{onChange:onChangeInputValue,type:"text",value:h,placeholder:(0,u.c)("Placeholder").t(G8||(G8=(0,d.Z)(["Type text or keyword"]))),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),onAddNewToken())}})}),(0,j.jsx)(Ea.Z,{disabled:!h.trim(),onClick:onAddNewToken,className:"button-blue",children:(0,u.c)("Action").t(Y8||(Y8=(0,d.Z)(["Insert"])))})]})]})})]}),i&&(0,j.jsx)("div",{children:(0,j.jsx)(ur.Z,{title:(0,u.c)("Action").t(V8||(V8=(0,d.Z)(["Delete"]))),children:(0,j.jsx)(Ea.Z,{onClick:()=>a(t),className:(0,ht.dh)([e?"mt1":"ml1"]),icon:!0,children:(0,j.jsx)(pr.Z,{name:"trash",className:"color-danger"})})})})]})})};function FilterConditionsForm_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function FilterConditionsForm_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FilterConditionsForm_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FilterConditionsForm_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const generateNewCondition=()=>({type:d9.SELECT,comparator:u9.CONTAINS,isOpen:!0,id:(0,ht.D)("condition")});var a6,o6,s6,i6,c6,l6,d6,u6,p6,m6,g6,j6,b6,y6,h6,I6,f6,M6,N6,x6,v6,modal_FilterConditionsForm=({isEdit:e,isNarrow:t,model:n,onChange:r})=>{const[a,s]=(0,o.useState)(n.conditions.length?n.conditions:[generateNewCondition()]),onDeleteCondition=e=>{s((t=>(t.splice(e,1),[...t])))},onUpdateCondition=(e,t)=>{s((n=>(n[e]=t,[...n])))};return(0,o.useEffect)((()=>{r(FilterConditionsForm_objectSpread(FilterConditionsForm_objectSpread({},n),{},{conditions:a}))}),[a]),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"flex flex-nowrap mb0 on-mobile-flex-column border-bottom",children:[(0,j.jsx)("div",{className:(0,ht.dh)(["w20",t&&"mb1"]),children:(0,u.c)("Label").t(q8||(q8=(0,d.Z)(["Statement"])))}),(0,j.jsxs)("div",{className:(0,ht.dh)([!t&&"ml1"]),children:[(0,j.jsxs)(input_Radio,{id:"statement-all",name:"filterConditionStatement",className:"flex flex-nowrap mb1 radio--ontop",checked:n.statement===l9.ALL,onChange:()=>r(FilterConditionsForm_objectSpread(FilterConditionsForm_objectSpread({},n),{},{statement:l9.ALL})),children:[(0,u.c)("Label").t($8||($8=(0,d.Z)(["ALL"]))),(0,j.jsx)("em",{className:"ml0-5",children:(0,u.c)("Info").t(e6||(e6=(0,d.Z)(["(Filter if ALL of the following conditions are met)"])))})]}),(0,j.jsxs)(input_Radio,{id:"statement-any",name:"filterConditionStatement",className:"flex flex-nowrap mb1 radio--ontop",checked:n.statement===l9.ANY,onChange:()=>r(FilterConditionsForm_objectSpread(FilterConditionsForm_objectSpread({},n),{},{statement:l9.ANY})),children:[(0,u.c)("Label").t(t6||(t6=(0,d.Z)(["ANY"]))),(0,j.jsx)("em",{className:"ml0-5",children:(0,u.c)("Info").t(n6||(n6=(0,d.Z)(["(Filter if ANY of the following conditions are met)"])))})]})]})]}),(0,j.jsx)("div",{className:"mb0-5",children:a.map(((r,o)=>(0,j.jsx)(FilterConditionsFormRow,{isEdit:e,isNarrow:t,condition:r,conditionIndex:o,handleDelete:onDeleteCondition,handleUpdateCondition:onUpdateCondition,statement:n.statement,displayDelete:a.length>1},r.id)))}),a.every((e=>!e.error))&&(0,j.jsx)(Jd.Z,{onClick:()=>{s((e=>[...e,FilterConditionsForm_objectSpread({},generateNewCondition())]))},className:"mt0-5 mb0-5",children:(0,j.jsx)("strong",{children:(0,u.c)("Action").t(r6||(r6=(0,d.Z)(["Add condition"])))})})]})};var w6,D6,S6,O6,A6,C6,E6,L6,P6,modal_FilterPreviewActions=({isOpen:e,isNarrow:t,toggleOpen:n,labels:r,folders:a,model:s})=>{const i={labelAs:(0,u.c)("Action").t(a6||(a6=(0,d.Z)(["label emails as"]))),moveTo:(0,u.c)("Action").t(o6||(o6=(0,d.Z)(["move emails to"]))),markAs:(0,u.c)("Action").t(s6||(s6=(0,d.Z)(["mark emails as"]))),autoReply:(0,u.c)("Action").t(i6||(i6=(0,d.Z)(["send auto-reply email"])))},{actions:c}=s,l=(0,Ne.qL)(r,"Name"),p=(0,o.useMemo)((()=>{const t=[];if(c.labelAs.labels.length){const n=c.labelAs.labels.map(((e,t)=>t>0?(0,u.c)("Label").t(c6||(c6=(0,d.Z)([" and ",""])),e):e)),r=c.labelAs.labels.map(((t,n)=>(0,j.jsxs)(o.Fragment,{children:[n>0&&(0,u.c)("Label").t(l6||(l6=(0,d.Z)([" and "]))),e?(0,j.jsx)("span",{className:"mb0-5",children:(0,j.jsx)(labelStack_LabelStack,{labels:[{name:l[t].Name,color:l[t].Color,title:l[t].Name}]})}):(0,j.jsx)("strong",{children:t})]},t)));t.push({element:(0,j.jsxs)("span",{children:[i.labelAs," ",r]}),title:"".concat(i.labelAs," ").concat(n)})}if(c.moveTo.folder){var n,r;const o=["archive","inbox","spam","trash"].includes(c.moveTo.folder),s=getDefaultFolders(),l=o?null===(n=s.find((e=>e.value===c.moveTo.folder)))||void 0===n?void 0:n.text:null===(r=a.find((e=>e.Path===c.moveTo.folder)))||void 0===r?void 0:r.Name,d=e?(0,j.jsx)("span",{className:"inline-flex flex-row flex-align-items-center condition-token mb0-5",role:"listitem",children:(0,j.jsx)("span",{className:"text-ellipsis text-no-decoration",title:l,children:l})}):(0,j.jsx)("strong",{children:l});t.push({element:(0,j.jsxs)(j.Fragment,{children:[i.moveTo," ",d]}),title:"".concat(i.moveTo," ").concat(l)})}if(c.markAs.read||c.markAs.starred){const n=e?(0,j.jsx)("span",{className:"inline-flex flex-row flex-align-items-center condition-token mb0-5",role:"listitem",children:(0,j.jsx)("span",{className:"text-ellipsis text-no-decoration",children:(0,u.c)("Filter preview").t(d6||(d6=(0,d.Z)(["read"])))})}):(0,j.jsx)("strong",{children:(0,u.c)("Filter preview").t(u6||(u6=(0,d.Z)(["read"])))}),r=e?(0,j.jsx)("span",{className:"inline-flex flex-row flex-align-items-center condition-token mb0-5",role:"listitem",children:(0,j.jsx)("span",{className:"text-ellipsis text-no-decoration",children:(0,u.c)("Filter preview").t(p6||(p6=(0,d.Z)(["starred"])))})}):(0,j.jsx)("strong",{children:(0,u.c)("Filter preview").t(m6||(m6=(0,d.Z)(["starred"])))}),a="".concat(c.markAs.read&&(0,u.c)("Filter preview").t(g6||(g6=(0,d.Z)(["read"])))).concat(c.markAs.read&&c.markAs.starred&&" ".concat((0,u.c)("Label").t(j6||(j6=(0,d.Z)(["and"])))," ")).concat(c.markAs.starred&&(0,u.c)("Filter preview").t(b6||(b6=(0,d.Z)(["starred"]))));t.push({element:(0,j.jsxs)(j.Fragment,{children:[i.markAs," ",c.markAs.read&&n,c.markAs.read&&c.markAs.starred&&(0,j.jsxs)(j.Fragment,{children:[" ",(0,u.c)("Label").t(y6||(y6=(0,d.Z)(["and"])))," "]}),c.markAs.starred&&r]}),title:"".concat(i.markAs," ").concat(a)})}if(c.autoReply){const n=e?(0,j.jsx)("span",{className:"inline-flex flex-row flex-align-items-center condition-token mb0-5",role:"listitem",children:(0,j.jsx)("span",{className:"text-no-decoration max-w-custom",style:{"--max-width-custom":"inherit"},children:i.autoReply})}):(0,j.jsx)("strong",{children:i.autoReply});t.push({element:n,title:i.autoReply})}const s=t.reduce(((e,t,n)=>(e+=0===n?(0,u.c)("Label").t(h6||(h6=(0,d.Z)(["Then"]))):" ".concat((0,u.c)("Label").t(I6||(I6=(0,d.Z)(["and"])))),"".concat(e," ").concat(t.title))),"");return e?(0,j.jsx)("div",{className:"pt0-5",children:t.map(((e,t)=>(0,j.jsxs)("div",{children:[0===t?(0,u.c)("Label").t(f6||(f6=(0,d.Z)(["Then"]))):(0,u.c)("Label").t(M6||(M6=(0,d.Z)(["And"])))," ",e.element]},"preview-action-".concat(t))))}):(0,j.jsx)("div",{className:"pt0-5 max-w100 text-ellipsis",title:s,children:t.map(((e,t)=>(0,j.jsxs)("span",{children:[0===t?(0,u.c)("Label").t(N6||(N6=(0,d.Z)(["Then"]))):" ".concat((0,u.c)("Label").t(x6||(x6=(0,d.Z)(["and"]))))," ",e.element]},"preview-action-".concat(t))))})}),[e]);return(0,j.jsx)("div",{className:"border-bottom mb2",children:(0,j.jsxs)("div",{className:"flex flex-nowrap on-mobile-flex-column align-items-center pt1 pb1",children:[(0,j.jsxs)("button",{type:"button",className:(0,ht.dh)(["w20 text-left",t&&"mb1"]),onClick:n,children:[(0,j.jsx)(pr.Z,{name:"angle-down",className:(0,ht.dh)([e&&"rotateX-180"])}),(0,j.jsx)("span",{className:"ml0-5",children:(0,u.c)("Label").t(v6||(v6=(0,d.Z)(["Actions"])))})]}),(0,j.jsx)("div",{className:(0,ht.dh)(["flex flex-column flex-item-fluid",!t&&"ml1"]),children:p})]})})};var Z6,modal_FilterPreviewConditions=({isOpen:e,isNarrow:t,toggleOpen:n,model:r})=>{const{conditions:a}=r,s=(0,o.useMemo)((()=>{const t=null==a?void 0:a.map((t=>{var n,r;if(t.type===d9.ATTACHMENTS){const n=t.comparator===u9.CONTAINS?(0,u.c)("Label").t(w6||(w6=(0,d.Z)(["with attachments"]))):(0,u.c)("Label").t(D6||(D6=(0,d.Z)(["without attachments"]))),r=e?(0,j.jsx)("span",{className:"inline-flex flex-row flex-align-items-center condition-token mb0-5",role:"listitem",children:(0,j.jsx)("span",{className:"text-ellipsis text-no-decoration",title:n,children:n})},"filter_preview_".concat(n)):(0,j.jsx)("strong",{children:n},"open_filter_preview_".concat(n));return{element:(0,u.c)("Label").jt(S6||(S6=(0,d.Z)(["the email was sent ",""])),r),title:(0,u.c)("Label").t(O6||(O6=(0,d.Z)(["the email was sent ",""])),n)}}const a=getConditionTypeLabels(t.type),s=getComparatorLabels(t.comparator),i=null==t||null===(n=t.values)||void 0===n?void 0:n.map(((e,t)=>t>0?" or ".concat(e):e)),c=null==t||null===(r=t.values)||void 0===r?void 0:r.map(((t,n)=>{const r=e?(0,j.jsx)("span",{className:"inline-flex flex-row flex-align-items-center condition-token mb0-5",role:"listitem",children:(0,j.jsx)("span",{className:"text-ellipsis text-no-decoration",title:t,children:t})},"".concat(t).concat(n)):(0,j.jsx)("strong",{children:t},"".concat(t).concat(n));return n>0?(0,j.jsxs)(o.Fragment,{children:[" ",(0,u.c)("Label").t(A6||(A6=(0,d.Z)(["or"])))," ",r]},"preview_condition_".concat(t).concat(n)):r}));return{element:(0,j.jsxs)(j.Fragment,{children:[null==a?void 0:a.toLowerCase()," ",s," ",c]}),title:"".concat(null==a?void 0:a.toLowerCase()," ").concat(s," ").concat(i)}})),n=(0,u.c)("Label").t(C6||(C6=(0,d.Z)(["If"]))),s=r.statement===l9.ALL?(0,u.c)("Label").t(E6||(E6=(0,d.Z)(["And"]))):(0,u.c)("Label").t(L6||(L6=(0,d.Z)(["Or"]))),i=t.reduce(((e,t,r)=>(e+=0===r?n:" ".concat(s.toLowerCase()),"".concat(e," ").concat(t.title))),"");return e?(0,j.jsx)("div",{className:"pt0-5",children:t.map(((e,t)=>(0,j.jsxs)("div",{children:[0===t?n:s," ",e.element]},"preview-condition-".concat(t))))}):(0,j.jsx)("div",{className:"pt0-5 max-w100 text-ellipsis",title:i,children:t.map(((e,t)=>(0,j.jsxs)("span",{children:[0===t?n:s.toLowerCase()," ",e.element]},"preview-condition-".concat(t))))})}),[e]);return(0,j.jsx)("div",{className:"border-bottom",children:(0,j.jsxs)("div",{className:"flex flex-nowrap on-mobile-flex-column align-items-center pt1 pb1",children:[(0,j.jsxs)("button",{type:"button",className:(0,ht.dh)(["w20 text-left",t&&"mb1"]),onClick:n,children:[(0,j.jsx)(pr.Z,{name:"angle-down",className:(0,ht.dh)([e&&"rotateX-180"])}),(0,j.jsx)("span",{className:"ml0-5",children:(0,u.c)("Label").t(P6||(P6=(0,d.Z)(["Conditions"])))})]}),(0,j.jsx)("div",{className:(0,ht.dh)(["flex flex-column flex-item-fluid",!t&&"ml1"]),children:s})]})})};var modal_FilterPreview=({isNarrow:e,labels:t,folders:n,model:r})=>{const[a,s]=(0,o.useState)(!0),[i,c]=(0,o.useState)(!0);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:"border-bottom",children:(0,j.jsxs)("div",{className:"flex flex-nowrap on-mobile-flex-column align-items-center pb1",children:[(0,j.jsx)("div",{className:(0,ht.dh)(["w20 pt0-5",e&&"mb1"]),children:(0,j.jsx)("span",{className:(0,ht.dh)(["mr0-5",!e&&"ml0-5"]),children:(0,u.c)("Label").t(Z6||(Z6=(0,d.Z)(["Filter Name"])))})}),(0,j.jsx)("div",{title:r.name,className:(0,ht.dh)(["pt0-5 flex flex-column flex-item-fluid max-w100",!e&&"ml1"]),children:(0,j.jsx)("span",{className:"max-w100 text-ellipsis",children:r.name})})]})}),(0,j.jsx)(modal_FilterPreviewConditions,{isNarrow:e,model:r,isOpen:a,toggleOpen:()=>s(!a)}),(0,j.jsx)(modal_FilterPreviewActions,{isNarrow:e,labels:t,folders:n,model:r,isOpen:i,toggleOpen:()=>c(!i)})]})};const T6=["filter","onClose"];var k6,z6,_6,R6,G6,Y6,U6,F6,K6,B6,W6,V6,Q6,H6;function FilterModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function FilterModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?FilterModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FilterModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const checkNameErrors=(e,t)=>t?e.find((({Name:e})=>(0,br.Fv)(e)===(0,br.Fv)(t)))?(0,u.c)("Error").t(z6||(z6=(0,d.Z)(["Filter with this name already exists"]))):"":(0,u.c)("Error").t(k6||(k6=(0,d.Z)(["This field is required"]))),checkConditionsErrors=e=>e.some((e=>!!e.error))?(0,u.c)("Error").t(_6||(_6=(0,d.Z)(["Error in one of the conditions"]))):e.length?"":(0,u.c)("Error").t(R6||(R6=(0,d.Z)(["Require at least one condition"]))),checkActionsErrors=e=>{const{labelAs:t,markAs:n,moveTo:r,autoReply:a}=e;return t.labels.length||r.folder||n.read||n.starred||a?"":(0,u.c)("Error").t(G6||(G6=(0,d.Z)(["Require at least one action"])))};var X6,J6,q6,$6,e7,t7,n7,r7,a7,o7,s7,modal_FilterModal=e=>{let{filter:t,onClose:n=c.ZT}=e,r=(0,Sn.Z)(e,T6);const{isNarrow:a}=hooks_useActiveBreakpoint(),[s=[]]=X9(),[i=[],l]=useLabels(),[p=[],m]=useFolders(),{createNotification:g}=(0,hn.Z)(),{call:b}=(0,Ie.Z)(),[y,h]=(0,no.Z)(),{createModal:I}=(0,In.Z)(),f=!(null==t||!t.ID),initializeModel=e=>{const t=e?computeFromTree(e):{},{Actions:n,Conditions:r,Operator:a}=t||{},o=null==n?void 0:n.FileInto.reduce(((e,t)=>((getDefaultFolders().map((e=>e.value)).includes(t)||null!=p&&p.find((e=>e.Path===t)))&&(e.folder=[t]),null!=i&&i.find((e=>e.Name===t))&&e.labels.push(t),e)),{folder:[],labels:[]});return{step:p9.NAME,id:null==e?void 0:e.ID,statement:(null==a?void 0:a.value)||l9.ALL,name:(null==e?void 0:e.Name)||"",conditions:(null==r?void 0:r.map((e=>({type:e.Type.value,comparator:e.Comparator.value,values:f?e.Values:[],isOpen:!0,defaultValue:e.Values[0]||"",id:(0,ht.D)("condition")}))))||[],actions:{labelAs:{labels:(null==o?void 0:o.labels)||[],isOpen:!0},moveTo:{folder:null!=o&&o.folder?null==o?void 0:o.folder[0]:void 0,isOpen:!0},markAs:{read:(null==n?void 0:n.Mark.Read)||!1,starred:(null==n?void 0:n.Mark.Starred)||!1,isOpen:!0},autoReply:(null==n?void 0:n.Vacation)||null}}},[M,N]=(0,o.useState)(initializeModel()),x=f?(0,u.c)("Title").t(Y6||(Y6=(0,d.Z)(["Edit filter"]))):(0,u.c)("Title").t(U6||(U6=(0,d.Z)(["Add filter"]))),{name:v,conditions:w,actions:D}=M,S=(0,o.useMemo)((()=>({name:M.name&&(null==t?void 0:t.Name)===v?"":checkNameErrors(s,v),conditions:checkConditionsErrors(w),actions:checkActionsErrors(D)})),[v,D,w]),O=hooks_useApiWithoutResult(J9.sI),A=hooks_useApiWithoutResult(J9.a8),handleSubmit=async e=>{let t=M;if(M.actions.autoReply){const{message:e,containsImages:n}=(0,et.a9)(M.actions.autoReply);n&&g({type:"warning",text:(0,u.c)("Info").t(B6||(B6=(0,d.Z)(["Images have been removed because they are not allowed in auto-reply"])))}),t=FilterModal_objectSpread(FilterModal_objectSpread({},M),{},{actions:FilterModal_objectSpread(FilterModal_objectSpread({},D),{},{autoReply:e})}),N(t)}e.preventDefault(),f?await(async e=>{const{Filter:t}=await A.request(e.ID,e);await b(),g({text:(0,u.c)("Filter notification").t(K6||(K6=(0,d.Z)(["Filter "," updated"])),t.Name)}),n()})(convertModel(t)):await(async e=>{try{const{Filter:t}=await O.request(e);g({text:(0,u.c)("Notification").t(F6||(F6=(0,d.Z)([""," created"])),t.Name)})}finally{await b(),n()}})(convertModel(t))},handleClose=()=>{if(!((e,t)=>{const cleanConditions=e=>({type:e.type,comparator:e.comparator,values:e.values});return!(e.name===t.name&&e.statement===t.statement&&(0,WI.Z)(e.conditions.map(cleanConditions),t.conditions.map(cleanConditions))&&(0,WI.Z)(e.actions.labelAs.labels,t.actions.labelAs.labels)&&e.actions.moveTo.folder===t.actions.moveTo.folder&&e.actions.markAs.read===t.actions.markAs.read&&e.actions.markAs.starred===t.actions.markAs.starred&&(!e.actions.autoReply||!t.actions.autoReply||e.actions.autoReply===t.actions.autoReply))})(M,initializeModel(t)))return n();I((0,j.jsxs)(modal_Confirm,{onConfirm:n,title:(0,u.c)("Title").t(W6||(W6=(0,d.Z)(["Are you sure you want to close?"]))),confirm:(0,j.jsx)(Ea.Z,{color:"danger",type:"submit",children:(0,u.c)("Action").t(V6||(V6=(0,d.Z)(["Discard"])))}),children:[(0,j.jsx)(Cn.Z,{className:"mb1",children:(0,u.c)("Info").t(Q6||(Q6=(0,d.Z)(["All your changes will be lost."])))}),(0,j.jsx)(Cn.Z,{className:"mb1",type:"error",children:(0,u.c)("Info").t(H6||(H6=(0,d.Z)(["Are you sure you want to discard your changes?"])))})]}))};return(0,o.useEffect)((()=>{!t||m||l||N(initializeModel(t))}),[m,l]),(0,j.jsxs)(On.Z,FilterModal_objectSpread(FilterModal_objectSpread({title:x,onClose:handleClose,loading:y||l||m,onSubmit:e=>{h(handleSubmit(e))},footer:(0,j.jsx)(modal_FooterFilterModal,{model:M,errors:S,onChange:e=>N(e),onClose:handleClose,loading:y})},r),{},{children:[(0,j.jsx)(modal_HeaderFilterModal,{model:M,errors:S,onChange:e=>N(e)}),l||m?(0,j.jsx)(Yu.Z,{}):(()=>{switch(M.step){case p9.NAME:return(0,j.jsx)(modal_FilterNameForm,{isNarrow:a,model:M,onChange:e=>N(e),errors:S,loading:y});case p9.CONDITIONS:return(0,j.jsx)(modal_FilterConditionsForm,{isEdit:f,isNarrow:a,model:M,onChange:N});case p9.ACTIONS:return(0,j.jsx)(modal_FilterActionsForm,{labels:i,folders:p,isNarrow:a,model:M,onChange:N,isEdit:f});case p9.PREVIEW:return(0,j.jsx)(modal_FilterPreview,{labels:i,folders:p,isNarrow:a,model:M});default:return null}})()]}))};function CustomFilterDropdown_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function CustomFilterDropdown_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CustomFilterDropdown_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CustomFilterDropdown_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const{computeTree:i7,newFilter:c7}=a,{OPERATORS:l7}=r,d7=[{value:d9.SUBJECT,label:(0,u.c)("CustomFilter").t(X6||(X6=(0,d.Z)(["Subject"]))),conditionLabel:(0,u.c)("Filter modal type").t(J6||(J6=(0,d.Z)(["If the subject"])))},{value:d9.SENDER,label:(0,u.c)("CustomFilter").t(q6||(q6=(0,d.Z)(["Sender"]))),conditionLabel:(0,u.c)("Filter modal type").t($6||($6=(0,d.Z)(["If the sender"])))},{value:d9.RECIPIENT,label:(0,u.c)("CustomFilter").t(e7||(e7=(0,d.Z)(["Recipient"]))),conditionLabel:(0,u.c)("Filter modal type").t(t7||(t7=(0,d.Z)(["If the recipient"])))},{value:d9.ATTACHMENTS,label:(0,u.c)("CustomFilter").t(n7||(n7=(0,d.Z)(["Attachments"]))),conditionLabel:(0,u.c)("Filter modal type").t(r7||(r7=(0,d.Z)(["If the attachments"])))}];var u7,p7,m7,g7,j7,b7,dropdown_CustomFilterDropdown=({message:e,onClose:t})=>{const[n,r]=(0,o.useState)({[d9.SELECT]:!1,[d9.SUBJECT]:!1,[d9.SENDER]:!1,[d9.RECIPIENT]:!1,[d9.ATTACHMENTS]:!1}),{createModal:a}=(0,In.Z)(),{createNotification:s}=(0,hn.Z)(),[i]=(0,bn.ZP)(),[l=[]]=X9(),formatConditions=t=>t.map((t=>{const n=d7.find((e=>e.value===t));let r;switch(t){case d9.SUBJECT:r=e.Subject;break;case d9.SENDER:r=e.Sender?e.Sender.Address:"";break;case d9.RECIPIENT:r=e.ToList&&e.ToList.length?e.ToList[0].Address:"";break;case d9.ATTACHMENTS:default:r=""}return{value:r,Values:[r],Type:{label:null==n?void 0:n.conditionLabel,value:null==n?void 0:n.value},Comparator:{label:"contains",value:u9.CONTAINS}}})),p=!Object.values(n).some(c.yR);return(0,j.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(()=>{if(!(0,Tn.Om)(i)&&l.filter((e=>e.Status===M.v3.ENABLED)).length>0)return s({text:(0,u.c)("Error").t(a7||(a7=(0,d.Z)(["Too many active filters. Please upgrade to a paid plan to activate more filters."]))),type:"error"}),void t();const e=c7(),r=[];let o;for(o in n)n[o]&&r.push(o);e.Simple={Operator:{label:l7[0].label,value:l7[0].value},Conditions:formatConditions(r),Actions:{FileInto:[],Vacation:"",Mark:{Read:!1,Starred:!1}}},a((0,j.jsx)(modal_FilterModal,{filter:CustomFilterDropdown_objectSpread(CustomFilterDropdown_objectSpread({},e),{},{Tree:i7(e)})}))})()},children:[(0,j.jsx)("div",{className:"m1",children:(0,j.jsx)("span",{className:"text-bold",tabIndex:-2,children:(0,u.c)("CustomFilter").t(o7||(o7=(0,d.Z)(["Filter on"])))})}),(0,j.jsx)("ul",{className:"unstyled mt1 mb1",children:d7.map((e=>(0,j.jsxs)("li",{className:"dropdown-item w100 flex flex-nowrap flex-align-items-center p0-5 pl1 pr1",children:[(0,j.jsx)(Nr,{className:"flex-item-noshrink",id:e.value,checked:n[e.value],onChange:()=>(e=>{r(CustomFilterDropdown_objectSpread(CustomFilterDropdown_objectSpread({},n),{},{[e]:!n[e]}))})(e.value)}),(0,j.jsx)("label",{htmlFor:e.value,title:e.label,className:"flex-item-fluid text-ellipsis",children:e.label})]},e.value)))}),(0,j.jsx)("div",{className:"m1",children:(0,j.jsx)(yr.Z,{className:"w100",disabled:p,"data-prevent-arrow-navigation":!0,type:"submit",children:(0,u.c)("CustomFilter").t(s7||(s7=(0,d.Z)(["Next"])))})})]})};var y7,h7,I7,f7,M7,N7,x7,v7,w7,D7,S7,O7,A7,C7,E7,L7,P7,Z7,T7,k7,extras_ExtraImages=({message:e,type:t,onLoadImages:n})=>{const[r]=useMailSettings(),[{Shortcuts:a=0}={}]=useMailSettings(),{showRemoteImages:o=!0,showEmbeddedImages:s=!0}=e.messageImages||{};if("embedded"===t&&hasShowEmbedded(r))return null;if("embedded"===t&&!1!==s)return null;if("remote"===t&&hasShowRemote(r))return null;if("remote"===t&&!1!==o)return null;const i="remote"===t?(0,j.jsxs)(j.Fragment,{children:[(0,u.c)("Title").t(u7||(u7=(0,d.Z)(["Load remote content"]))),(0,j.jsx)("br",{}),(0,j.jsx)("kbd",{className:"no-border",children:mr.AI})," + ",(0,j.jsx)("kbd",{className:"no-border",children:"C"})]}):(0,j.jsxs)(j.Fragment,{children:[(0,u.c)("Title").t(p7||(p7=(0,d.Z)(["Load embedded images"]))),(0,j.jsx)("br",{}),(0,j.jsx)("kbd",{className:"no-border",children:mr.AI})," + ",(0,j.jsx)("kbd",{className:"no-border",children:"E"})]}),c=a?(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(ur.Z,{title:i,children:(0,j.jsx)("button",{type:"button",onClick:n,className:"flex flex-item-noshrink text-underline link","data-testid":"remote-content:load1",children:(0,u.c)("Action").t(m7||(m7=(0,d.Z)(["Load"])))})})}):(0,j.jsx)("button",{type:"button",onClick:n,className:"text-underline link","data-testid":"remote-content:load2",children:(0,u.c)("Action").t(g7||(g7=(0,d.Z)(["Load"])))});return(0,j.jsxs)("div",{className:"bg-norm rounded bordered p0-5 mb0-5 flex flex-nowrap",children:[(0,j.jsx)(pr.Z,{name:"image",className:"mtauto mbauto"}),(0,j.jsx)("span",{className:"pl0-5 pr0-5 flex-item-fluid",children:"remote"===t?(0,u.c)("Action").t(j7||(j7=(0,d.Z)(["This message contains remote content."]))):(0,u.c)("Action").t(b7||(b7=(0,d.Z)(["This message contains embedded images."])))}),c]})};var z7,_7,R7,G7,Y7,U7,F7,K7,B7,extras_ExtraUnsubscribe=({message:e})=>{var t,n;const{createNotification:r}=(0,hn.Z)(),a=(0,Dn.Z)(),{call:o}=(0,Ie.Z)(),{createModal:s}=(0,In.Z)(),[i]=(0,yn.ZP)(),{extendedVerifications:c}=useSendVerifications(),l=useSaveDraft(),p=useSendMessage(),[m,g]=(0,no.Z)(),b=useOnCompose(),y=getOriginalTo(e.data),h=i.find((({Email:e})=>(0,Xe.GZ)(e)===(0,Xe.GZ)(y))),I=(null==e||null===(t=e.data)||void 0===t?void 0:t.UnsubscribeMethods)||{};if(!Object.keys(I).length||!h)return null;const f=null==e||null===(n=e.data)||void 0===n?void 0:n.ID;return(0,j.jsxs)("div",{className:"bg-norm rounded bordered p0-5 mb0-5 flex flex-nowrap","data-testid":"unsubscribe-banner",children:[(0,j.jsx)(pr.Z,{name:"envelope",className:"flex-item-noshrink mtauto mbauto"}),(0,j.jsxs)("span",{className:"pl0-5 pr0-5 flex-item-fluid",children:[(0,j.jsx)("span",{className:"mr0-25",children:(0,u.c)("Info").t(E7||(E7=(0,d.Z)(["This message is from a mailing list."])))}),(0,j.jsx)(Tu.Z,{className:"inline-block mr1",href:"https://protonmail.com/support/knowledge-base/auto-unsubscribe",children:(0,u.c)("Info").t(L7||(L7=(0,d.Z)(["Learn more"])))})]}),(0,j.jsx)("span",{className:"flex-item-noshrink flex",children:se(e.data)?(0,u.c)("Status").t(P7||(P7=(0,d.Z)(["Unsubscribed"]))):m?(0,u.c)("Status").t(Z7||(Z7=(0,d.Z)(["Unsubscribing..."]))):(0,j.jsx)(VM.Z,{className:"text-underline",onClick:()=>g((async()=>{if(I.OneClick)await new Promise(((e,t)=>{s((0,j.jsx)(modal_Confirm,{title:(0,u.c)("Title").t(y7||(y7=(0,d.Z)(["Unsubscribe"]))),onConfirm:e,onClose:t,confirm:(0,u.c)("Action").t(h7||(h7=(0,d.Z)(["Unsubscribe"]))),small:!1,className:"pm-modal--shorterLabels",children:(0,j.jsx)(Cn.Z,{className:"mb1",type:"warning",learnMore:"https://protonmail.com/support/knowledge-base/avoid-spam/",children:(0,u.c)("Info").t(I7||(I7=(0,d.Z)(["A request to unsubscribe from this mailing list will be sent to the sender of the newsletter and automatically processed."])))})}))})),await a((0,En.G)(f));else if(I.Mailto){const{Subject:e="Unsubscribe",Body:t="Please, unsubscribe me",ToList:n=[]}=I.Mailto,r=findSender(i,{AddressID:h.ID},!0);if(!r)throw new Error("Unable to find from address");const{DisplayName:a,Email:o}=r,m=[a,a?"<".concat(o,">"):o].filter(Za.Z).join(" "),g=(0,j.jsx)("strong",{children:m},"email"),y=n.join(", ");await new Promise(((n,r)=>{s((0,j.jsxs)(modal_Confirm,{title:(0,u.c)("Title").t(f7||(f7=(0,d.Z)(["Unsubscribe"]))),onConfirm:n,onClose:r,confirm:(0,u.c)("Action").t(M7||(M7=(0,d.Z)(["Unsubscribe"]))),small:!1,className:"pm-modal--shorterLabels",children:[(0,j.jsx)(Cn.Z,{className:"mb1",type:"warning",learnMore:"https://protonmail.com/support/knowledge-base/avoid-spam/",children:(0,u.c)("Info").jt(N7||(N7=(0,d.Z)(["To unsubscribe from this mailing list, an email will be sent from "," with following details as defined by the sender of the newsletter:"])),g)}),(0,j.jsxs)(bo.Z,{children:[(0,j.jsx)(gr.Z,{className:"cursor-default",children:(0,j.jsx)("span",{className:"mr0-5",children:(0,u.c)("Info").t(x7||(x7=(0,d.Z)(["Recipient: "])))})}),(0,j.jsx)(yo.Z,{className:"bordered bg-weak",children:(0,j.jsx)("div",{className:"pl1 pr1 pt0-5 pb0-5 text-ellipsis",title:y,children:y})})]}),(0,j.jsxs)(bo.Z,{children:[(0,j.jsx)(gr.Z,{className:"cursor-default",children:(0,j.jsx)("span",{className:"mr0-5",children:(0,u.c)("Info").t(v7||(v7=(0,d.Z)(["Subject: "])))})}),(0,j.jsx)(yo.Z,{className:"bordered bg-weak",children:(0,j.jsx)("div",{className:"pl1 pr1 pt0-5 pb0-5 text-ellipsis",title:e,children:e})})]}),(0,j.jsxs)(bo.Z,{children:[(0,j.jsx)(gr.Z,{className:"cursor-default",children:(0,j.jsx)("span",{className:"mr0-5",children:(0,u.c)("Info").t(w7||(w7=(0,d.Z)(["Body: "])))})}),(0,j.jsx)(yo.Z,{className:"bordered bg-weak",children:(0,j.jsx)("div",{className:"pl1 pr1 pt0-5 pb0-5 text-ellipsis",title:t,children:t})})]})]}))}));const f={localID:(0,ht.D)("unsubscribe"),autoSaveContacts:0,plainText:t,data:{AddressID:r.ID,Subject:e,Sender:{Address:o,Name:a},ToList:n.map((e=>({Address:e,Name:e}))),CCList:[],BCCList:[],MIMEType:M.LO.PLAINTEXT}},{cleanMessage:N,mapSendPrefs:x}=await c(f,{});await l(N),await p({inputMessage:N,mapSendPrefs:x,onCompose:b})}else I.HttpClient&&(await new Promise(((e,t)=>{s((0,j.jsxs)(modal_Confirm,{title:(0,u.c)("Title").t(D7||(D7=(0,d.Z)(["Unsubscribe"]))),onConfirm:e,onClose:t,confirm:(0,u.c)("Action").t(S7||(S7=(0,d.Z)(["Unsubscribe"]))),small:!1,className:"pm-modal--shorterLabels",children:[(0,j.jsx)(Cn.Z,{className:"mb1",type:"warning",learnMore:"https://protonmail.com/support/knowledge-base/avoid-spam/",children:(0,u.c)("Info").jt(O7||(O7=(0,d.Z)(["To unsubscribe from this mailing list, you will be taken to the following URL where instructions will be provided by the sender of the newsletter:"])))}),(0,j.jsx)("div",{className:"text-bold rounded bordered p1 bg-weak text-break mb1",children:(0,u.c)("Info").t(A7||(A7=(0,d.Z)(["URL: ",""])),I.HttpClient)})]}))})),(0,mr.RB)(I.HttpClient));await a((0,En.LV)([f])),await o(),r({text:(0,u.c)("Success").t(C7||(C7=(0,d.Z)(["Mail list unsubscribed"])))})})()),children:m?(0,u.c)("Action").t(T7||(T7=(0,d.Z)(["Unsubscribing"]))):(0,u.c)("Action").t(k7||(k7=(0,d.Z)(["Unsubscribe"])))})})]})};var W7,V7,Q7,extras_ExtraSpamScore=({message:e})=>{const{createModal:t}=(0,In.Z)(),[n,r]=(0,no.Z)(),{Flags:a,LabelIDs:o=[]}=e.data||{},{call:s}=(0,Ie.Z)(),i=(0,Dn.Z)(),{createNotification:c}=(0,hn.Z)();if((0,N.jl)(a,x.FLAG_DMARC_FAIL))return(0,j.jsxs)("div",{className:"bg-danger rounded p0-5 mb0-5 flex flex-nowrap",children:[(0,j.jsx)(pr.Z,{name:"fire",className:"flex-item-noshrink mtauto mbauto"}),(0,j.jsx)("span",{className:"pl0-5 pr0-5 flex-item-fluid",children:(0,u.c)("Info").t(z7||(z7=(0,d.Z)(["This email has failed its domain's authentication requirements. It may be spoofed or improperly forwarded!"])))}),(0,j.jsx)("span",{className:"flex-item-noshrink flex",children:(0,j.jsx)(Tu.Z,{className:"text-underline color-inherit",url:"https://protonmail.com/support/knowledge-base/email-has-failed-its-domains-authentication-requirements-warning/",children:(0,u.c)("Info").t(_7||(_7=(0,d.Z)(["Learn more"])))})})]});if((0,N.jl)(a,x.FLAG_PHISHING_AUTO)&&(!(0,N.jl)(a,x.FLAG_HAM_MANUAL)||o.includes(M.C7.SPAM))){const markAsLegitimate=async()=>{var n;await new Promise(((e,n)=>{t((0,j.jsx)(modal_Confirm,{title:(0,u.c)("Title").t(R7||(R7=(0,d.Z)(["Mark email as legitimate"]))),confirm:(0,u.c)("Action").t(G7||(G7=(0,d.Z)(["Mark legitimate"]))),onClose:n,onConfirm:()=>e(void 0),children:(0,j.jsx)(Cn.Z,{className:"mb1",children:(0,u.c)("Info").t(Y7||(Y7=(0,d.Z)(["We apologize. This might have been a mistake from our side. Can you please confirm that you want to mark this email as a legitimate one?"])))})}))})),await i((0,En.cJ)(null===(n=e.data)||void 0===n?void 0:n.ID)),await s(),c({text:(0,u.c)("Success").t(U7||(U7=(0,d.Z)(["Message marked as legitimate"])))})};return(0,j.jsxs)("div",{className:"bg-danger rounded p0-5 mb0-5 flex flex-nowrap","data-testid":"phishing-banner",children:[(0,j.jsx)(pr.Z,{name:"fire",className:"flex-item-noshrink mtauto mbauto"}),(0,j.jsxs)("span",{className:"pl0-5 pr0-5 flex-item-fluid",children:[(0,u.c)("Info").t(F7||(F7=(0,d.Z)(["Our system flagged this message as a phishing attempt. Please check that it is legitimate."]))),(0,j.jsx)(Tu.Z,{className:"pl0-5 pr0-5",url:"https://protonmail.com/blog/prevent-phishing-attacks/",children:(0,u.c)("Info").t(K7||(K7=(0,d.Z)(["Learn more"])))})]}),(0,j.jsx)("span",{className:"flex-item-noshrink flex",children:(0,j.jsx)(VM.Z,{className:"color-inherit",onClick:()=>r(markAsLegitimate()),disabled:n,children:(0,u.c)("Action").t(B7||(B7=(0,d.Z)(["Mark legitimate"])))})})]})}return null};var H7,X7,extras_ExtraReadReceipt=({message:e})=>{const t=(0,Dn.Z)(),{call:n}=(0,Ie.Z)(),{createNotification:r}=(0,hn.Z)(),[a,o]=(0,no.Z)(),{ID:s}=e.data||{};if(!(e=>!(!getParsedHeaders(e,"Disposition-Notification-To")||X(e)||te(e)))(e.data))return null;return(0,j.jsxs)("div",{className:"bg-warning rounded bordered p0-5 mb0-5 flex flex-nowrap",children:[(0,j.jsx)(pr.Z,{name:"bell",className:"flex-item-noshrink mtauto mbauto"}),(0,j.jsx)("span",{className:"pl0-5 pr0-5 flex-item-fluid",children:(0,u.c)("Info").t(V7||(V7=(0,d.Z)(["The sender has requested a read receipt."])))}),(0,j.jsx)("span",{className:"flex-item-noshrink flex",children:(0,j.jsx)(VM.Z,{onClick:()=>o((async()=>{await t((0,En.T0)(s)),await n(),r({text:(0,u.c)("Success").t(W7||(W7=(0,d.Z)(["Read receipt sent"])))})})()),disabled:a,className:"color-inherit text-underline","data-testid":"message-view:send-receipt",children:(0,u.c)("Action").t(Q7||(Q7=(0,d.Z)(["Send receipt"])))})})]})};var J7,q7,$7,eee,tee,nee,ree,aee,oee,see,iee,cee,lee,dee,uee,pee,mee,gee,jee,bee,extras_ExtraAutoReply=({message:e})=>(e=>{const t=(null==e?void 0:e.ParsedHeaders)||{};return B.some((e=>e in t))})(e.data)?(0,j.jsxs)("div",{className:"bg-norm rounded bordered p0-5 mb0-5 flex flex-nowrap",children:[(0,j.jsx)(pr.Z,{name:"robot",className:"flex-item-noshrink mtauto mbauto"}),(0,j.jsx)("span",{className:"pl0-5 pr0-5 flex-item-fluid",children:(0,u.c)("Info").t(H7||(H7=(0,d.Z)(["This message is automatically generated as a response to a previous message."])))}),(0,j.jsx)("span",{className:"flex-item-noshrink flex",children:(0,j.jsx)(Tu.Z,{className:"text-underline",href:"https://protonmail.com/support/knowledge-base/autoresponder/",children:(0,u.c)("Info").t(X7||(X7=(0,d.Z)(["Learn more"])))})})]}):null;let yee;!function(e){e[e.INVITATION_INVALID=0]="INVITATION_INVALID",e[e.INVITATION_UNSUPPORTED=1]="INVITATION_UNSUPPORTED",e[e.INVALID_METHOD=2]="INVALID_METHOD",e[e.NO_COMPONENT=3]="NO_COMPONENT",e[e.NO_VEVENT=4]="NO_VEVENT",e[e.PARSING_ERROR=5]="PARSING_ERROR",e[e.DECRYPTION_ERROR=6]="DECRYPTION_ERROR",e[e.FETCHING_ERROR=7]="FETCHING_ERROR",e[e.UPDATING_ERROR=8]="UPDATING_ERROR",e[e.EVENT_CREATION_ERROR=9]="EVENT_CREATION_ERROR",e[e.EVENT_UPDATE_ERROR=10]="EVENT_UPDATE_ERROR",e[e.CANCELLATION_ERROR=11]="CANCELLATION_ERROR",e[e.UNEXPECTED_ERROR=12]="UNEXPECTED_ERROR",e[e.EXTERNAL_ERROR=13]="EXTERNAL_ERROR"}(yee||(yee={}));const{INVITATION_INVALID:hee,INVITATION_UNSUPPORTED:Iee,INVALID_METHOD:fee,NO_COMPONENT:Mee,NO_VEVENT:Nee,PARSING_ERROR:xee,DECRYPTION_ERROR:vee,FETCHING_ERROR:wee,UPDATING_ERROR:Dee,EVENT_CREATION_ERROR:See,EVENT_UPDATE_ERROR:Oee,CANCELLATION_ERROR:Aee,UNEXPECTED_ERROR:Cee,EXTERNAL_ERROR:Eee}=yee,EventInvitationError_getErrorMessage=(e,t)=>{const n=!(null!=t&&t.method),r=(null==t?void 0:t.method)===Zr.PUBLISH,a=(null==t?void 0:t.method)&&Tr.includes(null==t?void 0:t.method);return e===hee?n?(0,u.c)("Attached ics file error").t(J7||(J7=(0,d.Z)(["Invalid ICS file"]))):r?(0,u.c)("Attached ics file error").t(q7||(q7=(0,d.Z)(["Invalid event"]))):a?(0,u.c)("Event invitation error").t($7||($7=(0,d.Z)(["Invalid response"]))):(0,u.c)("Event invitation error").t(eee||(eee=(0,d.Z)(["Invalid invitation"]))):e===Iee?r?(0,u.c)("Attached ics file error").t(tee||(tee=(0,d.Z)(["Unsupported event"]))):a?(0,u.c)("Event invitation error").t(nee||(nee=(0,d.Z)(["Unsupported response"]))):(0,u.c)("Event invitation error").t(ree||(ree=(0,d.Z)(["Unsupported invitation"]))):e===Mee?(0,u.c)("Attached ics file error").t(aee||(aee=(0,d.Z)(["Empty ICS file"]))):e===Nee?(0,u.c)("Attached ics file error").t(oee||(oee=(0,d.Z)(["Unsupported calendar component"]))):e===fee?n?(0,u.c)("Attached ics file error").t(see||(see=(0,d.Z)(["Invalid method"]))):a?(0,u.c)("Event invitation error").t(iee||(iee=(0,d.Z)(["Invalid invitation"]))):(0,u.c)("Event invitation error").t(cee||(cee=(0,d.Z)(["Invalid response"]))):e===xee?(0,u.c)("Event invitation error").t(lee||(lee=(0,d.Z)(["Attached ICS file could not be read"]))):e===vee?(0,u.c)("Event invitation error").t(dee||(dee=(0,d.Z)(["Attached ICS file could not be decrypted"]))):e===wee?(0,u.c)("Event invitation error").t(uee||(uee=(0,d.Z)(["We could not retrieve the event from your calendar"]))):e===Dee?(0,u.c)("Event invitation error").t(pee||(pee=(0,d.Z)(["We could not update the event in your calendar"]))):e===See?(0,u.c)("Event invitation error").t(mee||(mee=(0,d.Z)(["Your answer was sent, but the event could not be added to your calendar"]))):e===Oee?(0,u.c)("Event invitation error").t(gee||(gee=(0,d.Z)(["Your answer was sent, but the event could not be updated in your calendar"]))):e===Aee?(0,u.c)("Event invitation error").t(jee||(jee=(0,d.Z)(["We could not cancel the event in your calendar"]))):e===Cee?(0,u.c)("Event invitation error").t(bee||(bee=(0,d.Z)(["Unexpected error"]))):e===Eee&&(null==t||null===(o=t.externalError)||void 0===o?void 0:o.message)||"";var o};class EventInvitationError extends Error{constructor(e,t){super(EventInvitationError_getErrorMessage(e,t)),this.type=void 0,this.partstat=void 0,this.timestamp=void 0,this.externalError=void 0,this.method=void 0,this.type=e,this.partstat=null==t?void 0:t.partstat,this.timestamp=null==t?void 0:t.timestamp,this.externalError=null==t?void 0:t.externalError,Object.setPrototypeOf(this,EventInvitationError.prototype)}}const vcalHelper_getIsPropertyAllDay=e=>{var t,n;return null!==(t="date"===(null===(n=e.parameters)||void 0===n?void 0:n.type))&&void 0!==t&&t},vcalHelper_getPropertyTzid=e=>{var t;if(!vcalHelper_getIsPropertyAllDay(e))return e.value.isUTC?"UTC":null===(t=e.parameters)||void 0===t?void 0:t.tzid},vcalHelper_getIsAllDay=({dtstart:e})=>vcalHelper_getIsPropertyAllDay(e),vcalHelper_getSequence=e=>{var t;const n=+((null===(t=e.sequence)||void 0===t?void 0:t.value)||0);return Math.max(n,0)},getIsDateTimeValue=e=>void 0!==e.hours,vcalHelper_getIsCalendar=e=>{var t;return"vcalendar"===(null==e||null===(t=e.component)||void 0===t?void 0:t.toLowerCase())},vcalHelper_getIsEventComponent=e=>{var t;return"vevent"===(null==e||null===(t=e.component)||void 0===t?void 0:t.toLowerCase())},vcalHelper_getIsTimezoneComponent=e=>{var t;return"vtimezone"===(null==e||null===(t=e.component)||void 0===t?void 0:t.toLowerCase())},getIsAlarmComponent=e=>{var t;return"valarm"===(null==e||null===(t=e.component)||void 0===t?void 0:t.toLowerCase())},vcalHelper_getHasRecurrenceId=e=>!!e["recurrence-id"],getHasAttendee=e=>!!e.attendee,getAttendeeHasToken=e=>{var t;return!(null===(t=e.parameters)||void 0===t||!t["x-pm-token"])},getEventStatus=({status:e})=>Object.values(zr).some((t=>t===(null==e?void 0:e.value)))?null==e?void 0:e.value:zr.CONFIRMED,getAttendeePartstat=(e={},t)=>{var n;const r=null===(n=e.parameters)||void 0===n?void 0:n.partstat;if(r===Gr.NEEDS_ACTION&&t){if("BUSY"===t)return Gr.ACCEPTED;if("TENTATIVE"===t)return Gr.TENTATIVE;if("FREE"===t)return Gr.DECLINED}return Object.values(Gr).some((e=>e===r))?r:Gr.NEEDS_ACTION},getAttendeeToken=(e={})=>{var t;return null==e||null===(t=e.parameters)||void 0===t?void 0:t["x-pm-token"]},Lee=["x-pm-token","partstat"],Pee=["parameters"];function attendees_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function attendees_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?attendees_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):attendees_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const toApiPartstat=e=>e===Gr.TENTATIVE?Yr.TENTATIVE:e===Gr.ACCEPTED?Yr.ACCEPTED:e===Gr.DECLINED?Yr.DECLINED:Yr.NEEDS_ACTION,attendees_toIcsPartstat=e=>e===Yr.TENTATIVE?Gr.TENTATIVE:e===Yr.ACCEPTED?Gr.ACCEPTED:e===Yr.DECLINED?Gr.DECLINED:Gr.NEEDS_ACTION,fromInternalAttendee=e=>{let{parameters:{"x-pm-token":t="",partstat:n}={}}=e,r=(0,Sn.Z)(e.parameters,Lee),a=(0,Sn.Z)(e,Pee);return{attendee:attendees_objectSpread({parameters:attendees_objectSpread(attendees_objectSpread({},r),{},{"x-pm-token":t})},a),clear:{token:t,status:toApiPartstat(n)}}},getAttendeeEmail=e=>{const{cn:t,email:n}=e.parameters||{},r=(0,Xe.BF)(e.value);return(0,Xe.H6)(r)?r:n&&(0,Xe.H6)(n)?n:t&&(0,Xe.H6)(t)?t:r},modifyAttendeesPartstat=(e,t)=>{const n=Object.keys(t);return e.map((e=>{const r=getAttendeeEmail(e);return n.includes(r)?attendees_objectSpread(attendees_objectSpread({},e),{},{parameters:attendees_objectSpread(attendees_objectSpread({},e.parameters),{},{partstat:t[r]})}):e}))},getSupportedAttendee=e=>{const{parameters:{cn:t,role:n,partstat:r,rsvp:a,"x-pm-token":o}={}}=e,s=getAttendeeEmail(e),i={value:(0,Xe.F$)(s),parameters:{cn:(0,br.nn)(null!=t?t:s,190)}},c=(0,br.Fv)(n).toUpperCase();return c!==Rr.REQUIRED&&c!==Rr.OPTIONAL||(i.parameters.role=c),"true"===(0,br.Fv)(a)&&(i.parameters.rsvp="TRUE"),r&&(i.parameters.partstat=getAttendeePartstat(e)),40===(null==o?void 0:o.length)&&(i.parameters["x-pm-token"]=o),i},withPmAttendees=async(e,t,n=!1)=>{const{uid:r,attendee:a}=e;if(null==a||!a.length)return(0,Ne.CE)(e,["attendee"]);const o=a.map((e=>({attendee:e,emailAddress:getAttendeeEmail(e)}))),s=o.filter((({attendee:e})=>{var t;return!(null!==(t=e.parameters)&&void 0!==t&&t["x-pm-token"])})).map((({emailAddress:e})=>e)),i=await t(s),c=await Promise.all(o.map((async({attendee:e,emailAddress:t})=>{const a=getSupportedAttendee(e);if(getAttendeeHasToken(a))return a;const o=i[t];if(!o&&!n)throw new Error("No canonical email provided");const s=await(async(e,t)=>{const n="".concat(t).concat(e),r=(0,Gt.h6)(n),a=await(0,Gt.fM)(r);return(0,Gt.uG)(a)})(o||t,r.value);return attendees_objectSpread(attendees_objectSpread({},a),{},{parameters:attendees_objectSpread(attendees_objectSpread({},a.parameters),{},{"x-pm-token":s})})})));return attendees_objectSpread(attendees_objectSpread({},e),{},{attendee:c})},{REQUIRED:Zee}=Rr,{TRUE:Tee}=_r,{NEEDS_ACTION:kee}=Gr,addMilliseconds=(e,t)=>new Date(e.getTime()+t),date_fns_utc_addDays=(e,t)=>{const n=new Date(e);return n.setUTCDate(e.getUTCDate()+t),n},date_fns_utc_isSameDay=(e,t)=>!!((e,t)=>!!((e,t)=>e.getUTCFullYear()===t.getUTCFullYear())(e,t)&&e.getUTCMonth()===t.getUTCMonth())(e,t)&&e.getUTCDate()===t.getUTCDate(),isNextDay=(e,t)=>{const n=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()+1));return date_fns_utc_isSameDay(n,t)};let zee;!function(e){e[e.SU=0]="SU",e[e.MO=1]="MO",e[e.TU=2]="TU",e[e.WE=3]="WE",e[e.TH=4]="TH",e[e.FR=5]="FR",e[e.SA=6]="SA"}(zee||(zee={}));const dateToProperty=({year:e=1,month:t=1,day:n=1})=>({value:{year:e,month:t,day:n},parameters:{type:"date"}}),dateTimeToProperty=({year:e=1,month:t=1,day:n=1,hours:r=0,minutes:a=0,seconds:o=0},s=!1,i)=>{const c={year:e,month:t,day:n,hours:r,minutes:a,seconds:o,isUTC:s};return!i||s?{value:c}:{value:c,parameters:{tzid:i}}},vcalConverter_getDateProperty=({year:e,month:t,day:n})=>dateToProperty({year:e,month:t,day:n}),vcalConverter_getDateTimeProperty=(e,t="")=>{const n=(t||"").toLowerCase().includes("utc");return dateTimeToProperty(e,n,n?void 0:t)},propertyToLocalDate=e=>{var t;return vcalHelper_getIsPropertyAllDay(e)?(0,fV.Bx)(e.value):e.value.isUTC||null===(t=e.parameters)||void 0===t||!t.tzid?(0,fV.uq)(e.value):(0,fV.uq)((0,fV.OC)(e.value,e.parameters.tzid))},vcalConverter_propertyToUTCDate=e=>{var t;return vcalHelper_getIsPropertyAllDay(e)||e.value.isUTC||null===(t=e.parameters)||void 0===t||!t.tzid?(0,fV.uq)(e.value):(0,fV.uq)((0,fV.OC)(e.value,e.parameters.tzid))},getDtendProperty=({dtstart:e,dtend:t})=>{if(t)return t;if(vcalHelper_getIsPropertyAllDay(e)){const t=date_fns_utc_addDays((0,fV.uq)(e.value),1);return vcalConverter_getDateProperty((0,fV.Dn)(t))}return vcalConverter_getDateTimeProperty(e.value,vcalHelper_getPropertyTzid(e))},dayToNumericDay=e=>zee[e];var _ee;const Ree="sha1-uid-",Gee="-original-uid-",helper_generateVeventHashUID=async(e,t="")=>{const n=(0,Gt.uG)(await(0,Gt.fM)((0,Gt.h6)(e)));if(!t)return"".concat(Ree).concat(n);const r="".concat(Ree).concat(n).concat(Gee),a=t.length,o=Ur-r.length,s=t.substring(a-o,a);return"".concat(r).concat(s)},getSupportedUID=e=>{const t=e.length;return e.substring(t-Ur,t)},getIsWellFormedDateOrDateTime=e=>vcalHelper_getIsPropertyAllDay(e)||(e=>e.value.isUTC||!!e.parameters.tzid)(e),getIsDateOutOfBounds=e=>{const t=vcalConverter_propertyToUTCDate(e);return+t<+Qr||+t>+Xr},helper_getDisplayTitle=(e="")=>e.trim()||(0,u.c)("Event title").t(_ee||(_ee=(0,d.Z)(["(no title)"]))),unwrap=e=>{if("BEGIN:VCALENDAR"!==e.slice(0,15))return e;const t=e.indexOf("BEGIN:",1);if(-1===t||0===t)return"";const n=e.lastIndexOf("END:VCALENDAR");return e.slice(t,n).trim()};var Yee=n(44371);function trigger_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function trigger_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?trigger_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):trigger_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Uee=3600,Fee=86400,Kee=604800,getIsAbsoluteTrigger=e=>{var t;return"date-time"===(null===(t=e.parameters)||void 0===t?void 0:t.type)},trigger_normalizeDurationToUnit=(e,t)=>[Math.floor((e.weeks||0)*Kee/t),Math.floor((e.days||0)*Fee/t),Math.floor((e.hours||0)*Uee/t),Math.floor(60*(e.minutes||0)/t),Math.floor((e.seconds||0)/t)].reduce(((e,t)=>e+t),0),normalizeTrigger=(e,t)=>((e,t)=>{const{minutes:n,hours:r,weeks:a,days:o,isNegative:s}=e;if(t){const t=0===r&&0===n,i=!s||t?0===o:6===o;return trigger_objectSpread(trigger_objectSpread({},e),{},i?{seconds:0}:{weeks:0,days:o+7*a,seconds:0})}if([n,r,a,o].filter(Za.Z).length<=1)return trigger_objectSpread(trigger_objectSpread({},e),{},{seconds:0});const i={weeks:0,days:0,hours:0,minutes:0,seconds:0,isNegative:s},c=trigger_normalizeDurationToUnit(e,60);if(c%60!=0)return trigger_objectSpread(trigger_objectSpread({},i),{},{minutes:c});const l=Math.floor(c/60);if(l%24!=0)return trigger_objectSpread(trigger_objectSpread({},i),{},{hours:l});const d=Math.floor(l/24);if(d%7!=0)return trigger_objectSpread(trigger_objectSpread({},i),{},{days:d});const u=Math.floor(d/7);return trigger_objectSpread(trigger_objectSpread({},i),{},{weeks:u})})(getIsAbsoluteTrigger(e)?((e,t)=>{const n=vcalConverter_propertyToUTCDate(t),r=vcalConverter_propertyToUTCDate(e),a=(0,Yee.Z)(n,r),o=Math.abs(60*a);return{weeks:Math.floor(o/Kee),days:Math.floor(o%Kee/Fee),hours:Math.floor(o%Fee/Uee),minutes:Math.floor(o%Uee/60),seconds:0,isNegative:a>=0}})(e,t):e.value,vcalHelper_getIsPropertyAllDay(t)),getSmallestNonZeroNumericValueFromDurationValue=e=>Math.min(...Object.values((0,Ne.CE)(e,["isNegative"])).filter(Boolean)),sortAlarmsByAscendingTriggerValue=(e,t)=>getSmallestNonZeroNumericValueFromDurationValue(e.trigger.value)-getSmallestNonZeroNumericValueFromDurationValue(t.trigger.value),uniqueAlarmComparator=e=>{const t=e.trigger.value,n="isNegative"in t&&t.isNegative;return"".concat(e.action.value,"-").concat(trigger_normalizeDurationToUnit(t,da.MINUTES)*(n?-1:1))},Bee=new Set(["version","prodid","calscale","method","attach","categories","class","comment","description","geo","location","percent-complete","priority","resources","status","summary","completed","dtend","due","dtstart","duration","freebusy","transp","tzid","tzname","tzoffsetfrom","tzoffsetto","tzurl","attendee","contact","organizer","recurrence-id","related-to","url","uid","exdate","exrule","rdate","rrule","action","repeat","trigger","created","dtstamp","last-modified","sequence","request-status"]),Wee=new Set(["id","uid","dtstamp","class","created","description","geo","last-modified","recurrence-id","location","organizer","priority","sequence","status","summary","transp","trigger","action","url","rrule","dtstart","dtend","duration","repeat","attach","due","tzid","prodid","x-wr-calname","x-wr-timezone","x-pm-session-key","x-pm-shared-event-id","x-pm-proton-reply","x-yahoo-yid","x-yahoo-user-status","version","calscale","method"]),Vee=["type"],Qee=["component","components"];function vcal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vcal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vcal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vcal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const getIcalDateValue=(e,t,n)=>{const r=e.isUTC?Zo().Timezone.utcTimezone:Zo().Timezone.localTimezone,a={year:e.year,month:e.month,day:e.day,hour:e.hours||0,minute:e.minutes||0,second:e.seconds||0,isDate:n};return Zo().Time.fromData(a,r)},getIcalDurationValue=e=>Zo().Duration.fromData(e),internalValueToIcalValue=(e,t,{tzid:n}={})=>{if(Array.isArray(t))return t;if("string"==typeof t)return t;if("date"===e||"date-time"===e)return getIcalDateValue(t,0,"date"===e);if("duration"===e)return getIcalDurationValue(t);if("period"===e)return((e,t)=>Zo().Period.fromData({start:e.start?getIcalDateValue(e.start,0,!1):void 0,end:e.end?getIcalDateValue(e.end,0,!1):void 0,duration:e.duration?Zo().Duration.fromData(e.duration):void 0}))(t);if("recur"===e){if(!t.until)return Zo().Recur.fromData(t);const e=(e=>{if(e)return getIcalDateValue(e,0,void 0===e.hours)})(t.until);return Zo().Recur.fromData(vcal_objectSpread(vcal_objectSpread({},t),{},{until:e}))}return t.toString()},getInternalDateValue=e=>({year:e.year,month:e.month,day:e.day}),getInternalDateTimeValue=e=>vcal_objectSpread(vcal_objectSpread({},getInternalDateValue(e)),{},{hours:e.hour,minutes:e.minute,seconds:e.second,isUTC:"UTC"===e.zone.tzid}),getInternalDurationValue=e=>({weeks:e.weeks,days:e.days,hours:e.hours,minutes:e.minutes,seconds:e.seconds,isNegative:e.isNegative}),getInternalRecur=e=>{if(!e)return;const t=vcal_objectSpread({},e.toJSON());0===e.count&&(t.count=0);const n=(e=>{if(e)return"date"===e.icaltype?getInternalDateValue(e):getInternalDateTimeValue(e)})(e.until);return n&&(t.until=n),t},getProperty=(e,{value:t,parameters:n})=>{const r=new(Zo().Property)(e),a=n||{},{type:o}=a,s=(0,Sn.Z)(a,Vee);o&&r.resetType(o);const i=o||r.type;return r.isMultiValue&&Array.isArray(t)?r.setValues(t.map((e=>internalValueToIcalValue(i,e,s)))):r.setValue(internalValueToIcalValue(i,t,s)),Object.keys(s).forEach((e=>{r.setParameter(e,s[e])})),r},fromInternalComponent=e=>{const{component:t,components:n}=e,r=(0,Sn.Z)(e,Qee),a=((e,t)=>(Object.keys(t).forEach((n=>{const r=t[n];Array.isArray(r)?r.forEach((t=>{e.addProperty(getProperty(n,t))})):e.addProperty(getProperty(n,r))})),e))(new(Zo().Component)(t),r);return Array.isArray(n)&&n.forEach((e=>{a.addSubcomponent(fromInternalComponent(e))})),a},vcal_serialize=e=>fromInternalComponent(e).toString(),fromIcalProperties=(e=[])=>{if(0!==e.length)return e.reduce(((e,t)=>{const{name:n}=t;if(!n)return e;const{type:r}=t,a=t.getValues().map((e=>((e,t)=>{if(Array.isArray(t))return t;if("string"==typeof t||"integer"===e)return t;if("date"===e)return getInternalDateValue(t);if("date-time"===e)return getInternalDateTimeValue(t);if("duration"===e)return getInternalDurationValue(t);if("period"===e){const e={};return t.start&&(e.start=getInternalDateTimeValue(t.start)),t.end&&(e.end=getInternalDateTimeValue(t.end)),t.duration&&(e.duration=getInternalDurationValue(t.duration)),e}return"recur"===e?getInternalRecur(t):t.toString()})(r,e))),o=((e,t)=>{const n=(t.toJSON()||[])[1],r=e===t.getDefaultType(),a=vcal_objectSpread({},n);return r||(a.type=e),a})(r,t),s=vcal_objectSpread({value:t.isMultiValue?a:a[0]},Object.keys(o).length&&{parameters:o});if(Wee.has(n))return e[n]=s,e;if(e[n]||(e[n]=[]),"exdate"===n){const t=a.map((e=>vcal_objectSpread(vcal_objectSpread({},s),{},{value:e})));e[n]=e[n].concat(t)}else e[n].push(s);return e}),{})},fromIcalComponent=e=>{const t=e.getAllSubcomponents().map(fromIcalComponent);return vcal_objectSpread(vcal_objectSpread({component:e.name},t.length&&{components:t}),fromIcalProperties(e?e.getAllProperties():void 0))},fromIcalComponentWithErrors=e=>{const t=e.getAllSubcomponents().map((e=>{try{return fromIcalComponentWithErrors(e)}catch(t){return{error:t,icalComponent:e}}}));return vcal_objectSpread(vcal_objectSpread({component:e.name},t.length&&{components:t}),fromIcalProperties(e?e.getAllProperties():void 0))},vcal_parse=(e="")=>e?fromIcalComponent(new(Zo().Component)(Zo().parse(e))):{},vcal_parseWithErrors=(e="",t={retryLineBreaks:!0,retryEnclosing:!0})=>{const{retryLineBreaks:n,retryEnclosing:r}=t;try{return e?fromIcalComponentWithErrors(new(Zo().Component)(Zo().parse(e))):{}}catch(a){if(a.message.toLowerCase().includes('invalid line (no token ";" or ":")')&&n){const n=((e="")=>{const t=e.includes("\r\n")?"\r\n":"\n";return e.split(t).reduce(((e,n)=>{const r=n.match(/^(\w+-?\w*)(?::|;)/);if(!r)return"".concat(e).concat(t," ").concat(n);const a=r[1].toLowerCase();return Bee.has(a)||a.startsWith("x-")||["begin","end"].includes(a)?e?"".concat(e).concat(t).concat(n):n:"".concat(e).concat(t," ").concat(n)}),"")})(e);return vcal_parseWithErrors(n,vcal_objectSpread(vcal_objectSpread({},t),{},{retryLineBreaks:!1}))}if(a.message.toLowerCase().includes("invalid ical body")&&r){const n=((e="")=>{let t=e;return t.startsWith("BEGIN:VCALENDAR")||(t="BEGIN:VCALENDAR\r\n".concat(t)),t.endsWith("END:VCALENDAR")||(t="".concat(t,"\r\nEND:VCALENDAR")),t})(e);return vcal_parseWithErrors(n,vcal_objectSpread(vcal_objectSpread({},t),{},{retryEnclosing:!1}))}throw a}},fromTriggerString=(e="")=>getInternalDurationValue(Zo().Duration.fromString(e)),durationToMilliseconds=({isNegative:e=!1,weeks:t=0,days:n=0,hours:r=0,minutes:a=0,seconds:o=0,milliseconds:s=0})=>{const i=t*M.ps+n*M.x4+r*M.kr+a*M.EB+o*M.sh+s;return e?-i:i};var date_fns_utc_startOfDay=e=>{const t=new Date(+e);return t.setUTCHours(0,0,0,0),t};var date_fns_utc_differenceInCalendarDays=(e,t)=>{const n=date_fns_utc_startOfDay(e),r=date_fns_utc_startOfDay(t),a=n.getTime()-r.getTime();return Math.round(a/864e5)};const createExdateMap=(e=[])=>e.reduce(((e,t)=>(e[+(0,fV.uq)(t.value)]=!0,e)),{});function recurring_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function recurring_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?recurring_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):recurring_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Hee=Date.UTC(1971,0,1),isInInterval=(e,t,n,r)=>e<=r&&t>=n,Xee={value:{freq:"DAILY",count:1}},getOccurrenceSetup=e=>{const{dtstart:t,rrule:n,exdate:r}=e,a=getDtendProperty(e),o=vcalHelper_getIsAllDay(e),s=internalValueToIcalValue(o?"date":"date-time",recurring_objectSpread(recurring_objectSpread({},t.value),{},{isUTC:!0})),i=((e,t)=>{if(!(e&&e.value&&e.value.until&&t))return e;const n=(0,fV.uq)(e.value.until),r=(0,fV.Tx)((0,fV.Dn)(n),t);return recurring_objectSpread(recurring_objectSpread({},e),{},{value:recurring_objectSpread(recurring_objectSpread({},e.value),{},{until:recurring_objectSpread(recurring_objectSpread({},r),{},{isUTC:!0})})})})(n||Xee,vcalHelper_getPropertyTzid(t)),c=vcalConverter_propertyToUTCDate(t);let l;if(o){const e=vcalConverter_propertyToUTCDate(a),t=date_fns_utc_addDays(e,-1),n=+(d=c)>+(u=t)?d:u;l=date_fns_utc_differenceInCalendarDays(n,c)}else{const e=vcalConverter_propertyToUTCDate(t),n=vcalConverter_propertyToUTCDate(a);l=Math.max(+n-+e,0)}var d,u;return{dtstart:s,utcStart:c,isAllDay:o,eventDuration:l,modifiedRrule:i,exdateMap:createExdateMap(r)}},getOccurrences=({component:e,maxStart:t=new Date(9999,0,1),maxCount:n=1,cache:r={}})=>{var a;if(n<=0||0===(null==e||null===(a=e.rrule)||void 0===a?void 0:a.value.count))return[];r.start||(r.start=getOccurrenceSetup(e));const{eventDuration:o,isAllDay:s,dtstart:i,modifiedRrule:c,exdateMap:l}=r.start,d=internalValueToIcalValue("recur",c.value).iterator(i),u=[];let p;for(;p=d.next();){const e=(0,fV.uq)(getInternalDateTimeValue(p));if(l[+e])continue;if(u.length>=n||e>=t)break;const r=s?date_fns_utc_addDays(e,o):addMilliseconds(e,o);u.push({localStart:e,localEnd:r,occurrenceNumber:d.occurrence_number})}return u},getOccurrencesBetween=(e,t,n,r={},a)=>{var o;if(0===(null==e||null===(o=e.rrule)||void 0===o?void 0:o.value.count))return[];r.start||(r.start=getOccurrenceSetup(e));const s=e.dtstart,i=getDtendProperty(e),{eventDuration:c,isAllDay:l,utcStart:d,dtstart:u,modifiedRrule:p,exdateMap:m}=r.start;if(+d>n)return[];if(!r.iteration||t<r.iteration.interval[0]||n>r.iteration.interval[1]){const e=internalValueToIcalValue("recur",p.value).iterator(u),o=[t-Hee,n+Hee];try{const t=(({interval:[e,t],iterator:n,eventDuration:r,originalDtstart:a,originalDtend:o,isAllDay:s,exdateMap:i,maxCount:c})=>{const l=[];let d;const u=vcalHelper_getPropertyTzid(a),p=vcalHelper_getPropertyTzid(o);for(;(d=n.next())&&!(void 0!==c&&l.length>c);){const a=(0,fV.uq)(getInternalDateTimeValue(d));if(i[+a])continue;let o,c,m;if(s)o=date_fns_utc_addDays(a,r),c=a,m=o;else if(u&&p){const e=addMilliseconds(a,r),t=(0,fV.OC)((0,fV.Dn)(e),u);o=(0,fV.uq)((0,fV.Tx)(t,p)),c=(0,fV.uq)((0,fV.OC)((0,fV.Dn)(a),u)),m=(0,fV.uq)(t)}else{const e=addMilliseconds(a,r);o=e,c=a,m=e}if(+c>t)break;isInInterval(+c,+m,e,t)&&l.push({localStart:a,localEnd:o,utcStart:c,utcEnd:m,occurrenceNumber:n.occurrence_number})}return l})({interval:o,iterator:e,eventDuration:c,originalDtstart:s,originalDtend:i,isAllDay:l,exdateMap:m,maxCount:a});r.iteration={iterator:e,result:t,interval:o}}catch(e){return console.error(e),[]}}return r.iteration.result.filter((({utcStart:e,utcEnd:r})=>isInInterval(+e,+r,t,n)))};function rrule_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rrule_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rrule_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rrule_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const getIsStandardByday=(e="")=>/^(SU|MO|TU|WE|TH|FR|SA)$/.test(e),getDayAndSetpos=(e,t)=>{if(e){const t=/^([-+]?\d{1})(SU|MO|TU|WE|TH|FR|SA$)/.exec(e);if(t){const[,e,n]=t;return{day:n,setpos:+e}}}const n={};return e&&(n.day=e),t&&(n.setpos=t),n},getRruleValue=e=>{if(e)return rrule_objectSpread({},e.value)},Jee=["freq","count","interval","until","wkst","bysetpos","byday","bymonthday","bymonth","byyearday"],qee=["freq","count","interval","until","wkst","bysetpos","bysecond","byminute","byhour","byday","byweekno","bymonthday","bymonth","byyearday"],$ee=["freq","count","interval","until","wkst"],ete=["freq","count","interval","until","wkst","byday"],tte=["freq","count","interval","until","wkst","bymonthday","byday","bysetpos"],nte=["freq","count","interval","until","wkst","bymonthday","bymonth","byyearday"],rte=[-1,1,2,3,4],isLongArray=e=>Array.isArray(e)&&e.length>1,getIsRruleSupported=(e,t=!1)=>{if(!e)return!1;const n=Object.keys(e);if(t?n.some((e=>!qee.includes(e))):n.some((e=>!Jee.includes(e))))return!1;const{freq:r,interval:a=1,count:o,until:s,byday:i,bysetpos:c,bymonthday:l,bymonth:d,byyearday:u}=e;if(o&&o>(t?499:49))return!1;if(s){if("isUTC"in s&&s.isUTC&&+(0,fV.uq)(s)>+Xr)return!1;if(+(0,fV.Bx)(s)>+Hr)return!1}if("DAILY"===r)return!(a>qr[r])&&(t?!n.some((e=>!qee.includes(e))):!n.some((e=>!$ee.includes(e))));if("WEEKLY"===r)return!(a>qr[r])&&(t?!n.some((e=>!qee.includes(e))):!n.some((e=>!ete.includes(e))));if("MONTHLY"===r){if(a>qr[r])return!1;if(t)return!n.some((e=>!qee.includes(e)));if(n.some((e=>!tte.includes(e))))return!1;if(isLongArray(i)||isLongArray(c)||isLongArray(l))return!1;const{setpos:e,day:o}=getDayAndSetpos(i,c);return o&&e?getIsStandardByday(o)&&(e=>rte.includes(e))(e)&&!l:!(+!!o^+!!e)}return"YEARLY"===r&&(!(a>qr[r])&&(t?!(l&&!d)&&!n.some((e=>!qee.includes(e))):!n.some((e=>!nte.includes(e)))&&(!(isLongArray(l)||isLongArray(d)||isLongArray(u))&&!(l&&!d))))},getSupportedRrule=(e,t=!1,n)=>{var r;if(null===(r=e.rrule)||void 0===r||!r.value)return;const{dtstart:a,rrule:o}=e,{until:s}=o.value,i=rrule_objectSpread({},o);if(s){const e=(({until:e,dtstart:t,guessTzid:n="UTC"})=>{const r=vcalHelper_getIsPropertyAllDay(t),a=vcalHelper_getPropertyTzid(t)||"UTC",o=vcalConverter_propertyToUTCDate(t),s=+o>+(0,fV.uq)(e)?(0,fV.Dn)(o):e;if(r){if(getIsDateTimeValue(s)){const e=(0,fV.Tx)(s,n);return{year:e.year,month:e.month,day:e.day}}return{year:s.year,month:s.month,day:s.day}}const i=getIsDateTimeValue(s)?(0,Ne.ei)(s,["year","month","day","hours","minutes","seconds"]):rrule_objectSpread(rrule_objectSpread({},(0,Ne.ei)(s,["year","month","day"])),{},{hours:0,minutes:0,seconds:0}),c=rrule_objectSpread(rrule_objectSpread({},(0,fV.Tx)(i,a)),{},{hours:23,minutes:59,seconds:59});return rrule_objectSpread(rrule_objectSpread({},(0,fV.OC)(c,a)),{},{isUTC:!0})})({until:s,dtstart:a,guessTzid:n});i.value.until=e}return getIsRruleSupported(o.value,t)?i:void 0};var ate,ote,ste,ite,cte,lte,dte,ute,pte,mte,gte,jte,bte,yte,hte,Ite,fte,Mte,Nte,xte,vte,wte,Dte,Ste,Ote;let Ate;!function(e){e[e.WRONG_FORMAT=0]="WRONG_FORMAT",e[e.NON_GREGORIAN=1]="NON_GREGORIAN",e[e.TODO_FORMAT=2]="TODO_FORMAT",e[e.JOURNAL_FORMAT=3]="JOURNAL_FORMAT",e[e.FREEBUSY_FORMAT=4]="FREEBUSY_FORMAT",e[e.TIMEZONE_FORMAT=5]="TIMEZONE_FORMAT",e[e.TIMEZONE_IGNORE=6]="TIMEZONE_IGNORE",e[e.VEVENT_INVALID=7]="VEVENT_INVALID",e[e.VEVENT_UNSUPPORTED=8]="VEVENT_UNSUPPORTED",e[e.FLOATING_TIME=9]="FLOATING_TIME",e[e.ALLDAY_INCONSISTENCY=10]="ALLDAY_INCONSISTENCY",e[e.DTSTART_MISSING=11]="DTSTART_MISSING",e[e.DTSTART_MALFORMED=12]="DTSTART_MALFORMED",e[e.DTSTART_OUT_OF_BOUNDS=13]="DTSTART_OUT_OF_BOUNDS",e[e.DTEND_MALFORMED=14]="DTEND_MALFORMED",e[e.DTEND_OUT_OF_BOUNDS=15]="DTEND_OUT_OF_BOUNDS",e[e.X_WR_TIMEZONE_UNSUPPORTED=16]="X_WR_TIMEZONE_UNSUPPORTED",e[e.TZID_UNSUPPORTED=17]="TZID_UNSUPPORTED",e[e.RRULE_MALFORMED=18]="RRULE_MALFORMED",e[e.RRULE_UNSUPPORTED=19]="RRULE_UNSUPPORTED",e[e.SINGLE_EDIT_UNSUPPORTED=20]="SINGLE_EDIT_UNSUPPORTED",e[e.NOTIFICATION_OUT_OF_BOUNDS=21]="NOTIFICATION_OUT_OF_BOUNDS",e[e.VALIDATION_ERROR=22]="VALIDATION_ERROR",e[e.ENCRYPTION_ERROR=23]="ENCRYPTION_ERROR",e[e.PARENT_EVENT_MISSING=24]="PARENT_EVENT_MISSING",e[e.EXTERNAL_ERROR=25]="EXTERNAL_ERROR",e[e.NO_OCCURRENCES=26]="NO_OCCURRENCES"}(Ate||(Ate={}));class ImportEventError_ImportEventError extends Error{constructor(e,t,n,r){super(((e,t)=>e===Ate.NO_OCCURRENCES?(0,u.c)("Error importing event").t(ate||(ate=(0,d.Z)(["Recurring event has no occurrences"]))):e===Ate.WRONG_FORMAT?(0,u.c)("Error importing event").t(ote||(ote=(0,d.Z)(["Component with wrong format"]))):e===Ate.NON_GREGORIAN?(0,u.c)("Error importing event").t(ste||(ste=(0,d.Z)(["Non-Gregorian"]))):e===Ate.TODO_FORMAT?(0,u.c)("Error importing event").t(ite||(ite=(0,d.Z)(["To-do entry"]))):e===Ate.JOURNAL_FORMAT?(0,u.c)("Error importing event").t(cte||(cte=(0,d.Z)(["Journal entry"]))):e===Ate.FREEBUSY_FORMAT?(0,u.c)("Error importing event").t(lte||(lte=(0,d.Z)(["Free-busy time information"]))):e===Ate.TIMEZONE_FORMAT?(0,u.c)("Error importing event").t(dte||(dte=(0,d.Z)(["Custom timezone"]))):e===Ate.TIMEZONE_IGNORE?"Timezone component ignored":e===Ate.VEVENT_INVALID?(0,u.c)("Error importing event").t(ute||(ute=(0,d.Z)(["Invalid event"]))):e===Ate.VEVENT_UNSUPPORTED?(0,u.c)("Error importing event").t(pte||(pte=(0,d.Z)(["Unsupported event"]))):e===Ate.ALLDAY_INCONSISTENCY?(0,u.c)("Error importing event").t(mte||(mte=(0,d.Z)(["Malformed all-day event"]))):e===Ate.DTSTART_MISSING?(0,u.c)("Error importing event").t(gte||(gte=(0,d.Z)(["Missing start time"]))):e===Ate.DTSTART_MALFORMED?(0,u.c)("Error importing event").t(jte||(jte=(0,d.Z)(["Malformed start time"]))):e===Ate.FLOATING_TIME?(0,u.c)("Error importing event").t(bte||(bte=(0,d.Z)(["Floating times not supported"]))):e===Ate.DTSTART_OUT_OF_BOUNDS?(0,u.c)("Error importing event").t(yte||(yte=(0,d.Z)(["Start time out of bounds"]))):e===Ate.DTEND_MALFORMED?(0,u.c)("Error importing event").t(hte||(hte=(0,d.Z)(["Malformed end time"]))):e===Ate.DTEND_OUT_OF_BOUNDS?(0,u.c)("Error importing event").t(Ite||(Ite=(0,d.Z)(["End time out of bounds"]))):e===Ate.X_WR_TIMEZONE_UNSUPPORTED?(0,u.c)("Error importing event").t(fte||(fte=(0,d.Z)(["Calendar timezone not supported"]))):e===Ate.TZID_UNSUPPORTED?(0,u.c)("Error importing event").t(Mte||(Mte=(0,d.Z)(["Timezone not supported"]))):e===Ate.RRULE_MALFORMED?(0,u.c)("Error importing event").t(Nte||(Nte=(0,d.Z)(["Malformed recurring event"]))):e===Ate.RRULE_UNSUPPORTED?(0,u.c)("Error importing event").t(xte||(xte=(0,d.Z)(["Recurring rule not supported"]))):e===Ate.SINGLE_EDIT_UNSUPPORTED?(0,u.c)("Error importing event").t(vte||(vte=(0,d.Z)(["Edited event not supported"]))):e===Ate.NOTIFICATION_OUT_OF_BOUNDS?(0,u.c)("Error importing event").t(wte||(wte=(0,d.Z)(["Notification out of bounds"]))):e===Ate.VALIDATION_ERROR?(0,u.c)("Error importing event").t(Dte||(Dte=(0,d.Z)(["Event validation failed"]))):e===Ate.ENCRYPTION_ERROR?(0,u.c)("Error importing event").t(Ste||(Ste=(0,d.Z)(["Encryption failed"]))):e===Ate.PARENT_EVENT_MISSING?(0,u.c)("Error importing event").t(Ote||(Ote=(0,d.Z)(["Original recurring event could not be found"]))):e===Ate.EXTERNAL_ERROR&&(null==t?void 0:t.message)||"")(e,r)),this.component=void 0,this.componentId=void 0,this.type=void 0,this.externalError=void 0,this.type=e,this.component=t,this.componentId=n,this.externalError=r,Object.setPrototypeOf(this,ImportEventError_ImportEventError.prototype)}}const getSupportedAlarm=(e,t,n=!1)=>{var r,a;if(!(e=>{const{action:t,trigger:n,duration:r,repeat:a}=e;return!(!["AUDIO","DISPLAY","EMAIL"].includes(null==t?void 0:t.value)||!n||getIsAbsoluteTrigger(n)&&!getIsDateTimeValue(n.value)||+!r^+!a)})(e))return;const o=(s=e.action,"email"===(0,br.Fv)(s.value)?{value:"EMAIL"}:{value:"DISPLAY"});var s;if("EMAIL"===o.value&&!n)return;const{trigger:i}=e;if(!getIsAbsoluteTrigger(i)&&"end"===(null===(r=i.parameters)||void 0===r||null===(a=r.related)||void 0===a?void 0:a.toLocaleLowerCase()))return;const c=normalizeTrigger(i,t),l=trigger_normalizeDurationToUnit(c,1),d=vcalHelper_getIsPropertyAllDay(t)?!c.isNegative&&l>=86400:!c.isNegative&&0!==l,u=0!==c.seconds||c.minutes>ua[da.MINUTES]||c.hours>ua[da.HOURS]||c.days>ua[da.DAY]||c.weeks>ua[da.WEEK];return d||u?void 0:{component:"valarm",action:o,trigger:{value:c}}};function vevent_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vevent_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vevent_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vevent_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const getSupportedDateOrDateTimeProperty=({property:e,component:t,componentId:n="",hasXWrTimezone:r,calendarTzid:a,isRecurring:o=!1,method:s,isInvite:i,guessTzid:c})=>{if(vcalHelper_getIsPropertyAllDay(e))return dateToProperty(e.value);const l=e;if(l.value.isUTC&&!o&&r&&a){const e=(0,fV.Tx)(l.value,a);return vcalConverter_getDateTimeProperty(e,a)}const d=vcalHelper_getPropertyTzid(l);if(!d){if(!r){if(c)return vcalConverter_getDateTimeProperty(l.value,c);if(i)throw new EventInvitationError(yee.INVITATION_UNSUPPORTED,{method:s});throw new ImportEventError_ImportEventError(Ate.FLOATING_TIME,"vevent",n)}if(r&&!a){if(i)throw new EventInvitationError(yee.INVITATION_UNSUPPORTED,{method:s});throw new ImportEventError_ImportEventError(Ate.X_WR_TIMEZONE_UNSUPPORTED,"vevent",n)}return vcalConverter_getDateTimeProperty(l.value,a)}const u=(0,fV.yJ)(d);if(!u){if(i)throw new EventInvitationError(yee.INVITATION_UNSUPPORTED,{method:s});throw new ImportEventError_ImportEventError(Ate.TZID_UNSUPPORTED,t,n)}return vcalConverter_getDateTimeProperty(l.value,u)},vevent_getLinkedDateTimeProperty=({property:e,component:t,isAllDay:n,tzid:r,componentId:a="",method:o,isInvite:s})=>{if(n)return dateToProperty(e.value);if(vcalHelper_getIsPropertyAllDay(e)){if(s)throw new EventInvitationError(yee.INVITATION_INVALID,{method:o});throw new ImportEventError_ImportEventError(Ate.ALLDAY_INCONSISTENCY,t,a)}const i=vcalHelper_getPropertyTzid(e);if(!i||!r){if(s)throw new EventInvitationError(yee.INVITATION_UNSUPPORTED,{method:o});throw new ImportEventError_ImportEventError(Ate.FLOATING_TIME,t,a)}return r!==i?((e,t,n)=>{if(!0===n||vcalHelper_getIsPropertyAllDay(e))return vcalConverter_getDateProperty(e.value);const r=vcalConverter_propertyToUTCDate(e),a=(0,fV.Tx)((0,fV.Dn)(r),t);return vcalConverter_getDateTimeProperty(a,t)})(e,r,n):vcalConverter_getDateTimeProperty(e.value,r)},vevent_getSupportedEvent=({method:e=Zr.PUBLISH,vcalVeventComponent:t,hasXWrTimezone:n,calendarTzid:r,guessTzid:a,componentId:o="",isEventInvitation:s,generatedHashUid:i=!1,enabledEmailNotifications:c})=>{const l=e===Zr.PUBLISH,d=s&&!l;try{const{component:u,components:p,uid:m,dtstamp:g,dtstart:j,dtend:b,rrule:y,exdate:h,description:I,summary:f,location:N,sequence:x,"recurrence-id":v,organizer:w,attendee:D,duration:S,"x-pm-session-key":O,"x-pm-shared-event-id":A,"x-pm-proton-reply":C,"x-yahoo-yid":E,"x-yahoo-user-status":L}=t,P=null==f?void 0:f.value.trim(),Z=null==I?void 0:I.value.trim(),T=null==N?void 0:N.value.trim(),k=!!y||!!v,z={component:u,uid:{value:getSupportedUID(m.value)},dtstamp:vevent_objectSpread({},g),dtstart:vevent_objectSpread({},j)};let _=!1;P&&(z.summary=vevent_objectSpread(vevent_objectSpread({},f),{},{value:(0,br.$G)(P,Kr)})),Z&&(z.description=vevent_objectSpread(vevent_objectSpread({},I),{},{value:(0,br.$G)(Z,Br)})),T&&(z.location=vevent_objectSpread(vevent_objectSpread({},N),{},{value:(0,br.$G)(T,Wr)}));const R=(null==x?void 0:x.value)||0,G=Number.isSafeInteger(R)?R:0;z.sequence={value:Math.max(0,G)},z.dtstart=getSupportedDateOrDateTimeProperty({property:j,component:"vevent",componentId:o,hasXWrTimezone:n,calendarTzid:r,isRecurring:k,guessTzid:a});const Y=vcalHelper_getIsPropertyAllDay(z.dtstart),U=vcalHelper_getPropertyTzid(z.dtstart);if(!getIsWellFormedDateOrDateTime(z.dtstart)){if(s)throw new EventInvitationError(yee.INVITATION_INVALID,{method:e});throw new ImportEventError_ImportEventError(Ate.DTSTART_MALFORMED,"vevent",o)}if(getIsDateOutOfBounds(z.dtstart)){if(s)throw new EventInvitationError(yee.INVITATION_UNSUPPORTED,{method:e});throw new ImportEventError_ImportEventError(Ate.DTSTART_OUT_OF_BOUNDS,"vevent",o)}if(b){const t=getSupportedDateOrDateTimeProperty({property:b,component:"vevent",componentId:o,hasXWrTimezone:n,calendarTzid:r,isRecurring:k,guessTzid:a});if(!getIsWellFormedDateOrDateTime(t)){if(s)throw new EventInvitationError(yee.INVITATION_INVALID,{method:e});throw new ImportEventError_ImportEventError(Ate.DTEND_MALFORMED,"vevent",o)}if(getIsDateOutOfBounds(t)){if(s)throw new EventInvitationError(yee.INVITATION_UNSUPPORTED,{method:e});throw new ImportEventError_ImportEventError(Ate.DTEND_OUT_OF_BOUNDS,"vevent",o)}const i=vcalConverter_propertyToUTCDate(z.dtstart),c=vcalConverter_propertyToUTCDate(t),l=vcalHelper_getIsPropertyAllDay(b)&&+i!=+c?(0,Rc.Z)(c,-1):c;+l-+i>0&&(z.dtend=t)}else if(S&&d)throw new EventInvitationError(yee.INVITATION_UNSUPPORTED,{method:e});const F=z.dtend?vcalHelper_getIsPropertyAllDay(z.dtend):void 0;if(void 0!==F&&+Y^+F){if(s)throw new EventInvitationError(yee.INVITATION_INVALID,{method:e});throw new ImportEventError_ImportEventError(Ate.ALLDAY_INCONSISTENCY,"vevent",o)}if(h){if(!y){if(s)throw new EventInvitationError(yee.INVITATION_INVALID,{method:e});throw new ImportEventError_ImportEventError(Ate.RRULE_MALFORMED,"vevent",o)}const t=h.map((e=>getSupportedDateOrDateTimeProperty({property:e,component:"vevent",componentId:o,hasXWrTimezone:n,calendarTzid:r,isRecurring:k,guessTzid:a})));z.exdate=t.map((e=>vevent_getLinkedDateTimeProperty({property:e,component:"vevent",componentId:o,isAllDay:Y,tzid:U})))}if(v&&!i){if(y){if(e!==Zr.REPLY){if(s)throw new EventInvitationError(yee.INVITATION_UNSUPPORTED,{method:e});throw new ImportEventError_ImportEventError(Ate.SINGLE_EDIT_UNSUPPORTED,"vevent",o)}_=!0}z["recurrence-id"]=getSupportedDateOrDateTimeProperty({property:v,component:"vevent",componentId:o,hasXWrTimezone:n,calendarTzid:r,isRecurring:k,guessTzid:a})}if(y&&!_){const t=getSupportedRrule(vevent_objectSpread(vevent_objectSpread({},z),{},{rrule:y}),d,a);if(!t){if(s)throw new EventInvitationError(yee.INVITATION_UNSUPPORTED,{method:e});throw new ImportEventError_ImportEventError(Ate.RRULE_UNSUPPORTED,"vevent",o)}if(z.rrule=t,!(e=>{const{rrule:t}=e;if(null==t||!t.value)return!0;const{until:n,count:r}=t.value;if(n&&void 0!==r)return!1;const a=(0,Ne.CE)(t.value,["count","until"]),[o]=getOccurrences({component:(0,Ne.CE)(rrule_objectSpread(rrule_objectSpread({},e),{},{rrule:{value:a}}),["exdate"]),maxCount:1});return!!o&&+o.localStart==+(0,fV.uq)(e.dtstart.value)})(z)){if(s)throw new EventInvitationError(yee.INVITATION_INVALID,{method:e});throw new ImportEventError_ImportEventError(Ate.RRULE_MALFORMED,"vevent",o)}if(!getOccurrences({component:z,maxCount:1}).length){if(s)throw new EventInvitationError(yee.INVITATION_INVALID,{method:e});throw new ImportEventError_ImportEventError(Ate.NO_OCCURRENCES,"vevent",o)}}if(!d){if(!b&&S){const t=((e,t)=>{const n=vcalConverter_propertyToUTCDate(e),r="number"==typeof t?t:durationToMilliseconds(t),a=+n+r,o=(0,fV.Dn)((0,vh.Z)(a/1e3));if(vcalHelper_getIsPropertyAllDay(e)){if(r<=M.x4)return;const e=r<=0||o.hours||o.minutes||o.seconds?(0,fV.Dn)((0,Rc.Z)(vcalConverter_propertyToUTCDate({value:vevent_objectSpread(vevent_objectSpread({},o),{},{isUTC:!0})}),1)):vevent_objectSpread({},o);return dateToProperty(e)}if(r<=0)return;const s=vcalHelper_getPropertyTzid(e);return vcalConverter_getDateTimeProperty((0,fV.Tx)(o,s),s)})(z.dtstart,S.value);if(t&&(z.dtend=t),z.dtend&&getIsDateOutOfBounds(z.dtend)){if(s)throw new EventInvitationError(yee.INVITATION_UNSUPPORTED,{method:e});throw new ImportEventError_ImportEventError(Ate.DTEND_OUT_OF_BOUNDS,"vevent",o)}}if(!s&&l){const e=(null==p?void 0:p.filter((({component:e})=>"valarm"===e)))||[],t=(e=>{const t=[...e].sort(sortAlarmsByAscendingTriggerValue);return(0,xe.uw)(t,uniqueAlarmComparator)})(((e,t,n=!1)=>e.map((e=>getSupportedAlarm(e,t,n))).filter(Za.Z).slice(0,10))(e,j,c));t.length&&(z.components=t)}}if(d){if(O&&(z["x-pm-session-key"]=vevent_objectSpread({},O)),A&&(z["x-pm-shared-event-id"]=vevent_objectSpread({},A)),C&&(z["x-pm-proton-reply"]=vevent_objectSpread({},C)),E&&(z["x-yahoo-yid"]=vevent_objectSpread({},E)),L&&(z["x-yahoo-user-status"]=vevent_objectSpread({},L)),!w)throw new EventInvitationError(yee.INVITATION_INVALID,{method:e});if(z.organizer=(e=>{const{parameters:{cn:t}={}}=e,n=getAttendeeEmail(e);return{value:(0,Xe.F$)(n),parameters:{cn:(0,br.nn)(null!=t?t:n,190)}}})(w),D){if(D.length>100)throw new EventInvitationError(yee.INVITATION_UNSUPPORTED,{method:e});const t=D.map((e=>getAttendeeEmail(e)));if((0,xe.Tw)(t).length!==t.length)throw new EventInvitationError(yee.INVITATION_UNSUPPORTED,{method:e});z.attendee=D.map((e=>getSupportedAttendee(e)))}}return z}catch(e){if(e instanceof ImportEventError_ImportEventError||e instanceof EventInvitationError)throw e;if(s)throw new EventInvitationError(yee.INVITATION_UNSUPPORTED,{externalError:e});throw new ImportEventError_ImportEventError(Ate.VALIDATION_ERROR,"vevent",o||"")}};var Cte=n(3205),Ete=n.n(Cte),Lte=n(94035),Pte=n.n(Lte),Zte=n(55324);const Tte=/^'([^]*?)'?$/,kte=/''/g,zte=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,_te=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Rte=/[a-zA-Z]/,toInteger=e=>{if(null===e||!0===e||!1===e)return NaN;const t=Number(e);return Number.isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)};var date_fns_utc_format=(e,t,n={})=>{var r,a;const o=n.locale||Zte.Z,s=null===(r=o.options)||void 0===r?void 0:r.firstWeekContainsDate,i=void 0===s?1:toInteger(s),c=void 0===n.firstWeekContainsDate?i:toInteger(n.firstWeekContainsDate),l=null==o||null===(a=o.options)||void 0===a?void 0:a.weekStartsOn,d=void 0===l?0:toInteger(l),u={firstWeekContainsDate:c,weekStartsOn:void 0===n.weekStartsOn?d:toInteger(n.weekStartsOn),locale:o,_originalDate:e},p=t.match(_te);if(!p)return"";const m=p.map((e=>{const t=e[0];if("p"===t||"P"===t){return(0,Ete()[t])(e,o.formatLong,u)}return e})).join("").match(zte);return m?m.map((t=>{if("''"===t)return"'";const n=t[0];if("'"===n)return(e=>{const t=e.match(Tte);return t?t[1].replace(kte,"'"):""})(t);const r=Pte()[n];if(r)return r(e,t,o.localize,u);if(n.match(Rte))throw new Error("Format string contains an unescaped latin alphabet character `".concat(n,"`"));return t})).join(""):""};const Gte=["components"];function veventHelper_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function veventHelper_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?veventHelper_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):veventHelper_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const{ENCRYPTED_AND_SIGNED:Yte,SIGNED:Ute,CLEAR_TEXT:Fte}=Cr,veventHelper_getIsEventCancelled=e=>{var t;const n=e.CalendarEvents.find((({Type:e})=>[Fte,Ute].includes(e)));if(!n)return;const r=vcal_parse(n.Data),a=vcalHelper_getIsCalendar(r)?null===(t=r.components)||void 0===t?void 0:t.find(vcalHelper_getIsEventComponent):void 0;return a?getEventStatus(a)===zr.CANCELLED:void 0},veventHelper_withDtstamp=(e,t)=>{if(e.dtstamp)return e;const n=void 0!==t?t:+(0,$p.u)();return veventHelper_objectSpread(veventHelper_objectSpread({},e),{},{dtstamp:dateTimeToProperty((0,fV.Dn)(new Date(n)),!0)})},toResult=(e,t=[])=>{return n=vcal_serialize(veventHelper_objectSpread(veventHelper_objectSpread({},e),{},{component:"vevent",components:t})),"BEGIN:VCALENDAR\r\nVERSION:2.0\r\n".concat(n,"\r\nEND:VCALENDAR");var n},toResultOptimized=(e,t=[])=>((e,t={})=>Object.keys(t).some((t=>!e.has(t))))(xa,e)||t.length?toResult(e,t):void 0,getVeventParts=e=>{let{components:t}=e,n=(0,Sn.Z)(e,Gte);const r=(0,Ne.CE)(n,va),a=(e=>({[Ute]:(0,Ne.ei)(e,ya),[Yte]:(0,Ne.ei)(e,ha)}))(n),o=(e=>({[Ute]:(0,Ne.ei)(e,Ia),[Yte]:(0,Ne.ei)(e,fa)}))(n),s=(i=n,{[Ute]:(0,Ne.ei)(i,Ma),[Yte]:(0,Ne.ei)(i,Na)});var i;const c=(e=>{const t={[Fte]:[],attendee:[]};if(Array.isArray(e.attendee))for(const n of e.attendee){const{clear:e,attendee:r}=fromInternalAttendee(n);t[Fte].push(e),t.attendee.push(r)}if(!t.attendee.length)return{[Yte]:{},[Fte]:[]};const n={uid:e.uid,attendee:t.attendee};return{[Yte]:n,[Fte]:t[Fte]}})(n);return{sharedPart:{[Ute]:toResult(a[Ute]),[Yte]:toResult(veventHelper_objectSpread(veventHelper_objectSpread({},a[Yte]),r))},calendarPart:{[Ute]:toResultOptimized(o[Ute]),[Yte]:toResultOptimized(o[Yte])},personalPart:{[Ute]:toResultOptimized(s[Ute],t),[Yte]:void 0},attendeesPart:{[Ute]:void 0,[Yte]:toResultOptimized(c[Yte]),[Fte]:c[Fte]}}};var Kte,Bte,Wte,Vte,Qte,Hte,Xte,Jte,qte,$te,ene,tne,nne;function invite_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function invite_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?invite_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):invite_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const getParticipant=({participant:e,contactEmails:t,selfAddress:n,selfAttendee:r,emailTo:a,index:o,calendarAttendees:s,xYahooUserStatus:i})=>{var c;const l=getAttendeeEmail(e),p=(0,Xe.GZ)(l),m=(0,Xe.O6)(l),g=n&&(0,Xe.GZ)(n.Email)===p,j=a?(0,Xe.GZ)(a)===p:g,b=t.find((({Email:e})=>(0,Xe.mQ)(e)===m)),y=(null==e||null===(c=e.parameters)||void 0===c?void 0:c.cn)||l,h=g&&(null==n?void 0:n.DisplayName)||(null==b?void 0:b.Name)||y,I={vcalComponent:e,name:y,emailAddress:l,partstat:getAttendeePartstat(e,i),displayName:j?(0,u.c)("Participant name").t(Kte||(Kte=(0,d.Z)(["You"]))):h,displayEmail:l},{role:f,email:M,"x-pm-token":N}=e.parameters||{},x=N?null==s?void 0:s.find((({Token:e})=>e===N)):void 0;return f&&(I.role=((e={})=>{var t;const n=null===(t=e.parameters)||void 0===t?void 0:t.role;return Object.values(Rr).some((e=>e===n))?n:Rr.REQUIRED})(e)),M&&(I.displayEmail=M),N&&(I.token=N),x&&(I.updateTime=x.UpdateTime,I.attendeeID=x.ID),n&&r&&g&&(I.addressID=n.ID,I.emailAddress=(({selfAttendeeEmail:e,selfAddressEmail:t})=>{if(!e)return t;const n=e.indexOf("+"),r=e.indexOf("@"),a=e.substring(n+1,r);return-1===n?t:(0,Xe.rf)(t,a)})({selfAttendeeEmail:getAttendeeEmail(r),selfAddressEmail:n.Email}),I.name=n.DisplayName||y),void 0!==o&&(I.attendeeIndex=o),I},createInviteVevent=({method:e,attendeesTo:t,vevent:n,keepDtstamp:r})=>{if([Zr.REPLY,Zr.CANCEL].includes(e)&&null!=t&&t.length){const a=["uid","dtstart","dtend","sequence","recurrence-id","organizer","rrule","location","summary","x-pm-shared-event-id","x-pm-session-key"];e===Zr.REPLY&&a.push("x-pm-proton-reply"),r&&a.push("dtstamp");const o=t.map((({value:t,parameters:n})=>{const{partstat:r}=n||{};if(e===Zr.REPLY){if(!r)throw new Error("Cannot reply without participant status");return{value:t,parameters:{partstat:r}}}return{value:t}}));return veventHelper_withDtstamp(invite_objectSpread(invite_objectSpread({},(0,Ne.ei)(n,a)),{},{component:"vevent",attendee:o}))}if(e===Zr.REQUEST){const e=["components","x-pm-proton-reply"];r||e.push("dtstamp");const t=(a=n).summary?a:veventHelper_objectSpread(veventHelper_objectSpread({},a),{},{summary:{value:""}});return veventHelper_withDtstamp((0,Ne.CE)(t,e))}var a},findAttendee=(e,t=[])=>{const n=(0,Xe.GZ)(e),r=t.findIndex((e=>(0,Xe.GZ)(getAttendeeEmail(e))===n));return{index:r,attendee:-1!==r?t[r]:void 0}},getSelfAddressData=({isOrganizer:e,organizer:t,attendees:n=[],addresses:r=[]})=>{if(e){if(!t)return{};const e=(0,Xe.GZ)(getAttendeeEmail(t));return{selfAddress:r.find((({Email:t})=>(0,Xe.GZ)(t)===e))}}const a=n.map((e=>(0,Xe.GZ)(getAttendeeEmail(e)))),o=r.filter((({Status:e})=>0!==e)),{selfActiveAttendee:s,selfActiveAddress:i,selfActiveAttendeeIndex:l}=o.reduce(((e,t)=>{if(e.answeredAttendeeFound)return e;const r=(0,Xe.GZ)(t.Email),o=a.findIndex((e=>e===r));if(-1===o)return e;const s=n[o],i=getAttendeePartstat(s)!==Gr.NEEDS_ACTION;return!i&&e.selfActiveAttendee&&e.selfActiveAddress?e:{selfActiveAttendee:s,selfActiveAddress:t,selfActiveAttendeeIndex:o,answeredAttendeeFound:i}}),{answeredAttendeeFound:!1});if(s&&i)return{selfAttendee:s,selfAddress:i,selfAttendeeIndex:l};const d=r.filter((0,c.Qm)(IV.Hg)),{selfDisabledAttendee:u,selfDisabledAddress:p,selfDisabledAttendeeIndex:m}=d.reduce(((e,t)=>{if(e.answeredAttendeeFound)return e;const r=(0,Xe.GZ)(t.Email),o=a.findIndex((e=>e===r));if(-1===o)return e;const s=n[o],i=getAttendeePartstat(s)!==Gr.NEEDS_ACTION;return!i&&e.selfDisabledAttendee&&e.selfDisabledAddress?e:{selfDisabledAttendee:s,selfDisabledAttendeeIndex:o,selfDisabledAddress:t,answeredAttendeeFound:i}}),{answeredAttendeeFound:!1});return{selfAttendee:u,selfAddress:p,selfAttendeeIndex:m}},getEventWithCalendarAlarms=(e,t,n=!1)=>{const{components:r}=e,a=(vcalHelper_getIsAllDay(e)?t.DefaultFullDayNotifications:t.DefaultPartDayNotifications).filter((({Type:e})=>n||e!==wa.EMAIL)).map((({Trigger:e,Type:t})=>({component:"valarm",action:{value:t===wa.EMAIL?"EMAIL":"DISPLAY"},trigger:{value:fromTriggerString(e)}})));return invite_objectSpread(invite_objectSpread({},e),{},{components:r?r.concat(a):a})},getInvitedEventWithAlarms=({vevent:e,partstat:t,calendarSettings:n,oldPartstat:r,enabledEmailNotifications:a})=>{const{components:o}=e,s=null==o?void 0:o.filter((e=>!getIsAlarmComponent(e)));if([Gr.DECLINED,Gr.NEEDS_ACTION].includes(t))return null!=s&&s.length?invite_objectSpread(invite_objectSpread({},e),{},{components:s}):(0,Ne.CE)(e,["components"]);if(r&&[Gr.ACCEPTED,Gr.TENTATIVE].includes(r))return invite_objectSpread({},e);if(!n)throw new Error("Cannot retrieve calendar default notifications");return getEventWithCalendarAlarms(e,n,a)},getFormattedDateInfo=(e,t={locale:kt.RW})=>{const{dtstart:n,dtend:r}=e,{isAllDay:a,isSingleAllDay:o}=((e,t)=>{if(!vcalHelper_getIsPropertyAllDay(e))return{isAllDay:!1,isSingleAllDay:!1};if(!t)return{isAllDay:!0,isSingleAllDay:!0};const n=(0,fV.uq)(e.value),r=(0,fV.uq)(t.value);return{isAllDay:!0,isSingleAllDay:isNextDay(n,r)||+n==+r}})(n,r);if(a)return{formattedStart:date_fns_utc_format((0,fV.uq)(n.value),"cccc PPP",t),formattedEnd:r?date_fns_utc_format(date_fns_utc_addDays((0,fV.uq)(r.value),-1),"cccc PPP",t):void 0,isAllDay:a,isSingleAllDay:o};const s=date_fns_utc_format((0,fV.uq)(n.value),"cccc PPPp",t),i=r?date_fns_utc_format((0,fV.uq)(r.value),"cccc PPPp",t):void 0,{offset:c}=(0,fV.pQ)(vcalConverter_propertyToUTCDate(n),vcalHelper_getPropertyTzid(n)||"UTC"),{offset:l}=r?(0,fV.pQ)(vcalConverter_propertyToUTCDate(r),vcalHelper_getPropertyTzid(r)||"UTC"):{offset:0},d="GMT".concat((0,fV.Ze)(c)),u="GMT".concat((0,fV.Ze)(l));return{formattedStart:"".concat(s," (").concat(d,")"),formattedEnd:i?"".concat(i," (").concat(u,")"):void 0,isAllDay:a,isSingleAllDay:o}},getEmailBodyTexts=(e,t)=>{const{summary:n,location:r,description:a}=e,o=helper_getDisplayTitle(null==n?void 0:n.value),s=null==r?void 0:r.value,i=null==a?void 0:a.value,c=((e,t)=>{const{formattedStart:n,formattedEnd:r,isAllDay:a,isSingleAllDay:o}=getFormattedDateInfo(e,t);return a?o||!r?(0,u.c)("Email body for invitation (date part)").t(Bte||(Bte=(0,d.Z)(["When: "," (all day)"])),n):(0,u.c)("Email body for invitation (date part)").t(Wte||(Wte=(0,d.Z)(["When: "," - ",""])),n,r):r?(0,u.c)("Email body for invitation (date part)").t(Vte||(Vte=(0,d.Z)(["When: "," - ",""])),n,r):(0,u.c)("Email body for invitation (date part)").t(Qte||(Qte=(0,d.Z)(["When: ",""])),n)})(e,t),l=s?(0,u.c)("Email body for invitation (location part)").t(Hte||(Hte=(0,d.Z)(["Where: ",""])),s):void 0,p=i?(0,u.c)("Email body for description (description part)").t(Xte||(Xte=(0,d.Z)(["Description: ",""])),i):void 0,m=l&&p?"".concat(l,"\n").concat(p):l||p?"".concat(l||p):"";return{eventTitle:o,eventDetailsText:m?"".concat(c,"\n").concat(m):"".concat(c)}},generateEmailBody=({method:e,vevent:t,isCreateEvent:n,partstat:r,emailAddress:a,options:o})=>{const{eventTitle:s,eventDetailsText:i}=getEmailBodyTexts(t,o);if(e===Zr.REQUEST)return n?(0,u.c)("Email body for invitation").t(Jte||(Jte=(0,d.Z)(["You are invited to ","\n",""])),s,i):(0,u.c)("Email body for invitation").t(qte||(qte=(0,d.Z)([""," has been updated.\n",""])),s,i);if(e===Zr.CANCEL)return(0,u.c)("Email body for invitation").t($te||($te=(0,d.Z)([""," has been canceled."])),s);if(e===Zr.REPLY){if(!r||!a)throw new Error("Missing parameters for reply body");if(r===Gr.ACCEPTED)return(0,u.c)("Email body for response to invitation").t(ene||(ene=(0,d.Z)([""," has accepted your invitation to ",""])),a,s);if(r===Gr.TENTATIVE)return(0,u.c)("Email body for response to invitation").t(tne||(tne=(0,d.Z)([""," has tentatively accepted your invitation to ",""])),a,s);if(r===Gr.DECLINED)return(0,u.c)("Email body for response to invitation").t(nne||(nne=(0,d.Z)([""," has declined your invitation to ",""])),a,s);throw new Error("Unanswered partstat")}throw new Error("Unexpected method")},getResetPartstatActions=(e,t,n)=>{const r=(0,mS.Z)((0,$p.u)()),a=e.map((e=>{if(veventHelper_getIsEventCancelled(e))return;const a=e.Attendees.find((({Token:e})=>e===t));if(!a)return;const o=attendees_toIcsPartstat(a.Status);return[Gr.NEEDS_ACTION,n].includes(o)?void 0:{attendeeID:a.ID,eventID:e.ID,calendarID:e.CalendarID,updateTime:r,partstat:Gr.NEEDS_ACTION}})).filter(Za.Z),o=a.map((({eventID:e,calendarID:t})=>({eventID:e,calendarID:t}))).filter(Za.Z);return{updatePartstatActions:a,updatePersonalPartActions:o}};function calendar_invite_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function calendar_invite_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?calendar_invite_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):calendar_invite_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let rne,ane;!function(e){e[e.PAST=0]="PAST",e[e.HAPPENING=1]="HAPPENING",e[e.FUTURE=2]="FUTURE"}(rne||(rne={})),function(e){e[e.NONE=0]="NONE",e[e.KEEP_PARTSTAT=1]="KEEP_PARTSTAT",e[e.RESET_PARTSTAT=2]="RESET_PARTSTAT",e[e.UPDATE_PARTSTAT=3]="UPDATE_PARTSTAT",e[e.CANCEL=4]="CANCEL"}(ane||(ane={}));const getInvitationHasAttendee=e=>void 0!==e.attendee,getHasFullCalendarData=e=>{const{memberID:t,addressKeys:n,calendarKeys:r,calendarSettings:a}=e||{};return!!(t&&n&&r&&a)},withMessageDtstamp=(e,{Time:t})=>e.dtstamp?e:calendar_invite_objectSpread(calendar_invite_objectSpread({},e),{},{dtstamp:dateTimeToProperty((0,fV.Dn)(new Date(t*M.sh)),!0)}),getIsInvitationOutdated=({invitationIcs:e,invitationApi:t,isOrganizerMode:n})=>{var r;const a=e.vevent,o=null==t?void 0:t.vevent,s=null==t||null===(r=t.attendee)||void 0===r?void 0:r.updateTime;if(!o)return!1;const i=a.dtstamp?(0,mS.Z)(vcalConverter_propertyToUTCDate(a.dtstamp)):void 0,c=o.dtstamp?(0,mS.Z)(vcalConverter_propertyToUTCDate(o.dtstamp)):void 0,l=void 0!==i&&void 0!==c?i-c:0,d=void 0!==i&&void 0!==s?i-s:0,u=vcalHelper_getSequence(a)-vcalHelper_getSequence(o);return n?u<0||d<0:u<0||l<0},getIsInvitationFromFuture=({invitationIcs:e,invitationApi:t,isOrganizerMode:n})=>{const r=e.vevent,a=null==t?void 0:t.vevent;if(!a)return!1;const o=vcalHelper_getSequence(r)-vcalHelper_getSequence(a);return n&&o>0},getIsProtonInvite=({invitationIcs:e,invitationApi:t,pmData:n,xYahooUserStatus:r})=>{const{method:a}=e,{sharedEventID:o,isProtonReply:s}=n||{},i=!r&&o===(null==t?void 0:t.calendarEvent.SharedEventID);return[Zr.REQUEST,Zr.CANCEL].includes(a)?t?i:!!o:a===Zr.REPLY&&(void 0!==s?s:i)},getIsReinvite=({invitationIcs:e,invitationApi:t,isOrganizerMode:n})=>{const{method:r}=e,a=getIsInvitationOutdated({invitationIcs:e,invitationApi:t,isOrganizerMode:n});if(n||r!==Zr.REQUEST||!t||a)return!1;const{calendarEvent:o}=t;return veventHelper_getIsEventCancelled(o)},getCanCreateSingleEdit=(e,t)=>{if(!(({rrule:e})=>!!e)(t)||!vcalHelper_getHasRecurrenceId(e))return!1;const n=+vcalConverter_propertyToUTCDate(e["recurrence-id"]);return 1===getOccurrencesBetween(t,n,n).length},getEventTimeStatus=(e,t)=>{var n;if(null!==(n=e.rrule)&&void 0!==n&&n.value)return rne.FUTURE;const r=(0,mS.Z)(t),a=(0,mS.Z)(vcalConverter_propertyToUTCDate(e.dtstart));return r>=(0,mS.Z)(vcalConverter_propertyToUTCDate(getDtendProperty(e)))?rne.PAST:r>=a?rne.HAPPENING:rne.FUTURE},processEventInvitation=(e,t,n,r)=>{const{vevent:a,calendarEvent:o,method:s}=e,i=s===Zr.PUBLISH,c=getEventTimeStatus(a,+(0,$p.u)()),l=a.attendee||[],{organizer:d}=a,u=getOriginalTo(t.data),p=t.data.SenderAddress,m=!i&&((e,t)=>{if(!e.organizer)return!1;const n=getAttendeeEmail(e.organizer);return(0,Xe.GZ)(n)===(0,Xe.GZ)(t)})(a,u),{selfAddress:g,selfAttendee:j}=getSelfAddressData({isOrganizer:m,organizer:d,attendees:l,addresses:r}),b=!g||(0,IV.Bb)(g),y=!!g&&(0,IV.Hg)(g),h=calendar_invite_objectSpread({},e);if(l&&(h.participants=l.map((e=>getParticipant({participant:e,contactEmails:n,selfAddress:g,selfAttendee:j,emailTo:u})))),d&&(h.organizer=getParticipant({participant:d,selfAddress:g,contactEmails:n,emailTo:u})),m){const{attendee:e,index:t}=findAttendee(p,l);var I;if(e)h.attendee=getParticipant({participant:e,selfAddress:g,contactEmails:n,emailTo:u,index:t,calendarAttendees:null==o?void 0:o.Attendees,xYahooUserStatus:null===(I=a["x-yahoo-user-status"])||void 0===I?void 0:I.value})}else j&&(h.attendee=getParticipant({participant:j,selfAddress:g,selfAttendee:j,contactEmails:n,emailTo:u,calendarAttendees:null==o?void 0:o.Attendees}));return{isImport:i,isOrganizerMode:m,timeStatus:c,isAddressActive:b,isAddressDisabled:y,invitation:h}},getInitialInvitationModel=({invitationOrError:e,message:t,contactEmails:n,ownAddresses:r,calendar:a,hasNoCalendars:o,canCreateCalendar:s,maxUserCalendarsDisabled:i,mustReactivateCalendars:c})=>{const l={isImport:!1,hasMultipleVevents:!1,isOrganizerMode:!1,isAddressDisabled:!1,isAddressActive:!0,canCreateCalendar:s,maxUserCalendarsDisabled:i,mustReactivateCalendars:c,hasNoCalendars:o,timeStatus:rne.FUTURE};if(e instanceof EventInvitationError)return calendar_invite_objectSpread(calendar_invite_objectSpread({},l),{},{error:e});if(!(e=>void 0!==e.method)(e))throw new Error("Initial invitation lacks ICAL method");const{isOrganizerMode:d,isImport:u,timeStatus:p,isAddressActive:m,isAddressDisabled:g,invitation:j}=processEventInvitation(e,t,n,r);if(j.method===Zr.REPLY&&!j.attendee)return calendar_invite_objectSpread(calendar_invite_objectSpread({},l),{},{error:new EventInvitationError(yee.INVITATION_INVALID,{method:j.method})});const b={isOrganizerMode:d,isImport:u,hasMultipleVevents:!!j.hasMultipleVevents,timeStatus:p,isAddressActive:m,isAddressDisabled:g,canCreateCalendar:s,maxUserCalendarsDisabled:i,mustReactivateCalendars:c,hasNoCalendars:o,invitationIcs:j,isPartyCrasher:!d&&!u&&!j.attendee};a&&(b.calendarData={calendar:a,isCalendarDisabled:getIsCalendarDisabled(a),calendarNeedsUserAction:getDoesCalendarNeedUserAction(a)}),u||((e,t)=>e!==Zr.DECLINECOUNTER&&(t?Tr.includes(e):kr.includes(e)))(j.method,d)||(b.error=new EventInvitationError(yee.INVALID_METHOD,{method:j.method}));const y=(e=>{var t;const n=null===(t=e["x-pm-proton-reply"])||void 0===t?void 0:t.value;if(n)return"true"===n})(j.vevent),h=(I=j.vevent,null===(f=I["x-pm-shared-event-id"])||void 0===f?void 0:f.value);var I,f;const N=(e=>{var t;return null===(t=e["x-pm-session-key"])||void 0===t?void 0:t.value})(j.vevent);if(void 0!==y||h||N){const e={};void 0!==y&&(e.isProtonReply=y),h&&(e.sharedEventID=h),N&&(e.sharedSessionKey=N),b.pmData=e}return(e=>!(!e["x-yahoo-yid"]&&!e["x-yahoo-user-status"]))(j.vevent)&&(j.vevent=veventHelper_withDtstamp((0,Ne.CE)(j.vevent,["dtstamp"]),t.data.Time*M.sh)),b},getSupportedEventInvitation=async({vcalComponent:e,message:t,icsBinaryString:n,icsFileName:r})=>{var a,o;const{calscale:s,"x-wr-timezone":i,method:l}=e,d=(e=>{if(!e)return Zr.PUBLISH;const t=(0,br.Fv)(e.value);return Object.values(Zr).find((e=>(0,br.Fv)(e)===t))})(l);if(!d)throw new EventInvitationError(yee.INVALID_METHOD);if(s&&"gregorian"!==s.value.toLowerCase())throw new EventInvitationError(yee.INVITATION_UNSUPPORTED,{method:d});if(null===(a=e.components)||void 0===a||!a.length)throw new EventInvitationError(yee.NO_COMPONENT,{method:d});const u=(e=>{var t;const n=null==e||null===(t=e.components)||void 0===t?void 0:t.find(vcalHelper_getIsEventComponent);return n?calendar_invite_objectSpread({},n):void 0})(e),p=(e=>{var t;const n=null==e||null===(t=e.components)||void 0===t?void 0:t.find(vcalHelper_getIsTimezoneComponent);return n?calendar_invite_objectSpread({},n):void 0})(e);if(!u)throw new EventInvitationError(yee.NO_VEVENT,{method:d});if(!(e=>{var t;return!(null===(t=e.dtstart)||void 0===t||!t.value)})(u))throw new EventInvitationError(yee.INVITATION_INVALID,{method:d});const m=((e,t)=>{const{uid:n,sequence:r}=e,{uid:a,sequence:o}=t,s=calendar_invite_objectSpread({},e);return!n&&a&&(s.uid=calendar_invite_objectSpread({},a)),!r&&o&&(s.sequence=calendar_invite_objectSpread({},o)),s})(u,e),g=((null==(j=e)||null===(b=j.components)||void 0===b?void 0:b.filter((0,c.Qm)(vcalHelper_getIsEventComponent)).length)||0)>1;var j,b;const y=d===Zr.PUBLISH,h=null===(o=m.uid)||void 0===o?void 0:o.value,I=g||!h?await helper_generateVeventHashUID(vcal_serialize(e)):h;if(y){var f;const e=await helper_generateVeventHashUID(n,null===(f=m.uid)||void 0===f?void 0:f.value);m.uid={value:e}}else if(!m.organizer){const e=Tr.includes(d)?getOriginalTo(t):t.SenderAddress;m.organizer=(M=e,{value:(0,Xe.F$)(M),parameters:{cn:N||M}})}var M,N;const x=!(null==i||!i.value),v=i?(0,fV.yJ)(i.value):void 0,w=null==p?void 0:p.tzid.value,D=w?(0,fV.yJ)(w):void 0;try{return{method:d,vevent:vevent_getSupportedEvent({method:d,vcalVeventComponent:withMessageDtstamp(m,t),hasXWrTimezone:x,calendarTzid:v,guessTzid:D,isEventInvitation:!0,generatedHashUid:y}),vtimezone:p,originalVcalInvitation:e,originalUniqueIdentifier:I,hasMultipleVevents:g,fileName:r}}catch(e){if(e instanceof EventInvitationError)throw e;throw new EventInvitationError(yee.INVITATION_UNSUPPORTED,{externalError:e,method:d})}},getDisableButtons=e=>{const{calendarData:t,isAddressActive:n,isImport:r}=e,a=!(null!=t&&t.calendar)||t.isCalendarDisabled||t.calendarNeedsUserAction;return r?a:a||!n},getParticipantsList=(e,t)=>{const n=e?[...e]:[];if(t){const e=(0,Xe.O6)(t.emailAddress),r=n.findIndex((({emailAddress:t})=>(0,Xe.O6)(t)===e));-1!==r&&n.splice(r,1),n.unshift(t)}return n};var one=n(62443);const helper_getWeekStartsOn=({WeekStart:e})=>e===one.BC.LOCALE_DEFAULT?(()=>{var e;const t=null===kt.pw||void 0===kt.pw||null===(e=kt.pw.options)||void 0===e?void 0:e.weekStartsOn;return void 0!==t&&t>=0&&t<=6?t:0})():e>=1&&e<=7?e%7:0;var sne;!function(e){e[e.alpha=4]="alpha",e[e.beta=2]="beta",e[e.default=1]="default"}(sne||(sne={}));const ine=Object.keys(sne).length/2,getResult=(e=0,t,n)=>{const r={};let a=e;const o=null!==(s=sne[t])&&void 0!==s?s:sne.default;var s;for(const e of n)r[e]=(0,N.jl)(a,o),a>>=ine;return r};var hooks_useCalendarEmailNotificationsFeature=()=>{var e,t;const{currentEnvironment:n}=(0,nO.ZP)(),r=null===(e=(0,nN.Z)(y.P.CalendarEmailNotification))||void 0===e||null===(t=e.feature)||void 0===t?void 0:t.Value;return getResult(r,n,["enabled"]).enabled};var integration_getMemberAndAddress=(e=[],t=[],n="")=>{if(!t.length)throw new Error("No members");if(!e.length)throw new Error("No addresses");const r=e.find((e=>e.Email===n)),a=r?t.find((e=>e.Email===r.Email)):void 0;if(a&&r)return[a,r];const[o]=t,s=e.find((({Email:e})=>o.Email===e));if(!s)throw new Error("Self as member not found");return[o,s]};const cne="CALENDAR_BOOTSTRAP",useGetCalendarBootstrap=()=>{const e=(0,Dn.Z)(),t=(0,Ln.Z)(),n=(0,o.useCallback)((t=>t?e((0,cL.vO)(t)):Promise.resolve()),[e]);return(0,o.useCallback)((e=>(t.has(cne)||t.set(cne,(0,Me.Z)()),(0,Zn.NC)(t.get(cne),e,n))),[t,n])};function useGetDecryptedPassphraseAndCalendarKeys_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function useGetDecryptedPassphraseAndCalendarKeys_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?useGetDecryptedPassphraseAndCalendarKeys_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):useGetDecryptedPassphraseAndCalendarKeys_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const lne="CALENDAR_KEYS",useGetDecryptedPassphraseAndCalendarKeys=()=>{const e=(0,Ln.Z)(),t=(()=>{const e=(0,yn._2)(),t=(0,Zb.lW)(),n=useGetCalendarBootstrap();return(0,o.useCallback)((async r=>{const[{Keys:a=[],Passphrase:o={},Members:s=[]},i=[]]=await Promise.all([n(r),e()]),{ID:l,MemberPassphrases:d}=o,u=getAddressesMembersMap(s,i),p=await(async(e=[],n={})=>{for(const{Passphrase:r,Signature:a,MemberID:o}of e){const e=n[o];if(!e)continue;const s=await t(e.ID),i=await decryptPassphrase(useGetDecryptedPassphraseAndCalendarKeys_objectSpread({armoredPassphrase:r,armoredSignature:a},(0,ju.ee)(s))).catch(c.ZT);if(i)return i}})(d,u);if(!p)throw new Error("No passphrase");return{decryptedCalendarKeys:await getDecryptedCalendarKeys(a,{[l]:p}),decryptedPassphrase:p,passphraseID:l}}),[e,t,n])})();return(0,o.useCallback)((n=>{e.has(lne)||e.set(lne,new Map);const r=e.get(lne);return(0,Zn.NC)(r,n,t)}),[e,t])};var hooks_useGetCalendarInfo=()=>{const e=useGetCalendarBootstrap(),t=(0,yn._2)(),n=useGetDecryptedPassphraseAndCalendarKeys(),r=(0,Zb.lW)();return(0,o.useCallback)((async a=>{const[{Members:o,CalendarSettings:s},i]=await Promise.all([e(a),t()]),[c,l]=(([{ID:e},{ID:t}])=>[e,t])(integration_getMemberAndAddress(i,o)),{decryptedCalendarKeys:d,decryptedPassphrase:u,passphraseID:p}=await n(a);return{memberID:c,addressKeys:await r(l),decryptedCalendarKeys:d,calendarSettings:s,decryptedPassphrase:u,passphraseID:p}}),[e,t,n,r])};function author_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function author_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?author_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):author_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const{SIGNED:dne,ENCRYPTED_AND_SIGNED:une}=Cr,withNormalizedAuthor=e=>author_objectSpread(author_objectSpread({},e),{},{Author:(0,Xe.GZ)(e.Author)}),withNormalizedAuthors=e=>e?e.map(withNormalizedAuthor):[],getAuthorPublicKeysMap=async({event:e,addresses:t,getAddressKeys:n,getEncryptionPreferences:r})=>{const a={},o=(0,xe.Tw)([...e.SharedEvents,...e.CalendarEvents].map((({Author:e,Type:t})=>{if([dne,une].includes(t))return(0,Xe.GZ)(e)})).filter(Za.Z)),s=t.map((e=>author_objectSpread(author_objectSpread({},e),{},{normalizedEmailAddress:(0,Xe.GZ)(e.Email)}))),i=o.map((async e=>{const t=s.find((({normalizedEmailAddress:t})=>t===e));if(t){const r=await n(t.ID);a[e]=(0,ju.ee)(r).publicKeys}else{const{pinnedKeys:t}=await r(e);a[e]=t}}));return await Promise.all(i),a},getEventVerificationStatus=(e,t)=>t&&void 0!==e?e===Yt.bR.SIGNED_AND_VALID?Da.SUCCESSFUL:Da.FAILED:Da.NOT_VERIFIED,verifySignedCard=async(e,t,n)=>{const r=t?(await(0,Rt.n5)({message:await(0,Rt.b$)(e),publicKeys:n,signature:await(0,Rt.o$)(t),detached:!0})).verified:void 0,a=Array.isArray(n)?!!n.length:!!n;return{data:e,verificationStatus:getEventVerificationStatus(r,a)}},decryptCard=async(e,t,n,r)=>{const{data:a,verified:o}=await(0,_t.WB)({message:await(0,Rt.FC)(e),publicKeys:n,signature:t?await(0,Rt.o$)(t):void 0,sessionKeys:r?[r]:void 0}),s=Array.isArray(n)?!!n.length:!!n,i=getEventVerificationStatus(o,s);if("string"!=typeof a)throw new Error("Unknown data");return{data:a,verificationStatus:i}},decryptAndVerifyCalendarEvent=({Type:e,Data:t,Signature:n,Author:r},a,o)=>{const s=a[r]||[];if(e===Cr.CLEAR_TEXT)return Promise.resolve({data:t,verificationStatus:Da.NOT_VERIFIED});if(e===Cr.ENCRYPTED)return decryptCard((0,bI.bh)(t),n,[],o);if(e===Cr.SIGNED){if(!n)throw new Error("Signed card is missing signature");return verifySignedCard(t,n,s)}if(e===Cr.ENCRYPTED_AND_SIGNED){if(!n)throw new Error("Encrypted and signed card is missing signature");return decryptCard((0,bI.bh)(t),n,s,o)}throw new Error("Unknow event card type")};function deserialize_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function deserialize_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?deserialize_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):deserialize_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const readSessionKey=(e,t)=>{if(e&&t)return(async(e,t)=>(0,Kt.U)({message:await(0,Rt.FC)(e),privateKeys:t}))((0,bI.bh)(e),t)},readSessionKeys=async({decryptedSharedKeyPacket:e,calendarEvent:t,privateKeys:n})=>{const r=e?Promise.resolve({algorithm:M.xK,data:(0,bI.bh)(e)}):readSessionKey(null==t?void 0:t.SharedKeyPacket,n),a=readSessionKey(null==t?void 0:t.CalendarKeyPacket,n);return Promise.all([r,a])},readCalendarEvent=async({isOrganizer:e,event:{SharedEvents:t=[],CalendarEvents:n=[],AttendeesEvents:r=[],Attendees:a=[]},publicKeysMap:o={},sharedSessionKey:s,calendarSessionKey:i,addresses:c})=>{const l=await Promise.all([Promise.all(t.map((e=>decryptAndVerifyCalendarEvent(e,o,s)))),Promise.all(n.map((e=>decryptAndVerifyCalendarEvent(e,o,i)))),Promise.all(r.map((e=>decryptAndVerifyCalendarEvent(e,o,s))))]),[d,u,p]=l.map((e=>e.map((({data:e})=>e)))),m=l.map((e=>e.map((({verificationStatus:e})=>e)))).flat(),g=(j=m).length?j.some((e=>e===Da.FAILED))?Da.FAILED:j.every((e=>e===Da.SUCCESSFUL))?Da.SUCCESSFUL:Da.NOT_VERIFIED:Da.NOT_VERIFIED;var j;const b=[...d,...u].reduce(((e,t)=>{if(!t)return e;const n=vcal_parse(unwrap(t));return vcalHelper_getIsEventComponent(n)?deserialize_objectSpread(deserialize_objectSpread({},e),n):e}),{}),y=p.reduce(((e,t)=>{if(!t)return e;const n=vcal_parse(unwrap(t));return vcalHelper_getIsEventComponent(n)?e.concat((({attendee:e=[]},t=[])=>e.map((e=>{if(!e.parameters)return e;const n=e.parameters["x-pm-token"],r=t.find((({Token:e})=>e===n));if(!n||!r)return e;const a=attendees_toIcsPartstat(r.Status);return attendees_objectSpread(attendees_objectSpread({},e),{},{parameters:attendees_objectSpread(attendees_objectSpread({},e.parameters),{},{partstat:a})})})))(n,a)):e}),[]);return{veventComponent:y.length?deserialize_objectSpread(deserialize_objectSpread({},b),{},{attendee:y}):b,verificationStatus:g,selfAddressData:getSelfAddressData({isOrganizer:e,organizer:b.organizer,attendees:y,addresses:c})}};function useGetCalendarEventRaw_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var hooks_useGetCalendarEventRaw=()=>{const e=useGetDecryptedPassphraseAndCalendarKeys(),t=(0,yn._2)(),n=(0,Zb.lW)(),r=hooks_useGetEncryptionPreferences();return(0,o.useCallback)((async a=>{const o=await t(),[{decryptedCalendarKeys:s},i]=await Promise.all([e(a.CalendarID),getAuthorPublicKeysMap({event:a,addresses:o,getAddressKeys:n,getEncryptionPreferences:r})]),[c,l]=await readSessionKeys(function useGetCalendarEventRaw_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?useGetCalendarEventRaw_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):useGetCalendarEventRaw_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({calendarEvent:a},(0,ju.ee)(s)));return readCalendarEvent({isOrganizer:!!a.IsOrganizer,event:{SharedEvents:withNormalizedAuthors(a.SharedEvents),CalendarEvents:withNormalizedAuthors(a.CalendarEvents),AttendeesEvents:withNormalizedAuthors(a.AttendeesEvents),Attendees:a.Attendees},publicKeysMap:i,sharedSessionKey:c,calendarSessionKey:l,addresses:o})}),[t,n,e])};let pne;!function(e){e.NORM="norm",e.WEAK="weak",e.STRONG="strong",e.INFO="info",e.WARNING="warning",e.DANGER="danger",e.SUCCESS="success"}(pne||(pne={}));var banner_Banner=({backgroundColor:e=pne.NORM,icon:t,action:n,children:r})=>(0,j.jsxs)("div",{className:"bg-".concat(e," rounded p0-75 mb0-5 flex flex-align-items-center flex-nowrap"),children:[t?"string"==typeof t?(0,j.jsx)(pr.Z,{name:t,className:"mr0-75 flex-item-noshrink"}):t:null,(0,j.jsx)("span",{className:(0,ht.dh)([!!n&&"mr1"]),children:r}),n]});function useGetCanonicalEmailsMap_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function useGetCanonicalEmailsMap_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?useGetCanonicalEmailsMap_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):useGetCanonicalEmailsMap_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const mne="CANONICAL_EMAILS",useGetCanonicalEmailsMap=()=>{const e=(0,Dn.Z)(),t=(0,Ln.Z)(),n=(0,o.useCallback)((async t=>{if(!t.length)return Promise.resolve({});const n=t.map((e=>encodeURIComponent(e))),r=(0,xe.yo)(n,M.d9);return(await Promise.all(r.map((async t=>{const{Responses:n,Code:r}=await e((0,aO.k4)(t));if(r!==M.vB.GLOBAL_SUCCESS)throw new Error("Canonize operation failed");return n.reduce(((e,{Email:t,Response:{CanonicalEmail:n}})=>(e[t]=n,e)),{})})))).reduce(((e,t)=>useGetCanonicalEmailsMap_objectSpread(useGetCanonicalEmailsMap_objectSpread({},e),t)),{})}),[e,t]);return(0,o.useCallback)((e=>{t.has(mne)||t.set(mne,new Map);const r=t.get(mne),a=e.filter((e=>(0,Zn.fd)(r.get(e)))),o=n(a),miss=async e=>(await o)[e];return Promise.all(e.map((async e=>({email:e,result:await(0,Zn.NC)(r,e,miss)})))).then((e=>e.reduce(((e,{email:t,result:n})=>(e[t]=n,e)),{})))}),[t,n])};var hooks_useGetCalendarEventPersonal=()=>{const e=useGetCalendarBootstrap(),t=(0,yn._2)(),n=(0,Zb.lW)();return(0,o.useCallback)((async r=>{const[a,{Members:o}]=await Promise.all([t(),e(r.CalendarID)]),s=getAddressesMembersMap(o,a),i=(({PersonalEvent:e=[]})=>e.reduce(((e,t)=>{const{MemberID:n}=t;return e[n]=t,e}),{}))(r),c=Object.keys(i),l=await Promise.all(c.map((async e=>{const{ID:t}=s[e]||{};if(!t)return;const r=i[e],a=await n(t);return(async({Data:e,Signature:t},n)=>{const{data:r,verificationStatus:a}=await verifySignedCard(e,t,n);return{veventComponent:vcal_parse(unwrap(r)),verificationStatus:a}})(r,(0,ju.ee)(a).publicKeys).catch((e=>e))})));return c.reduce(((e,t,n)=>(e[t]=l[n],e)),{})}),[t,n,e])};let gne;var jne,bne;function getCreationKeys_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function getCreationKeys_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?getCreationKeys_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):getCreationKeys_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e){e[e.INACTIVE=0]="INACTIVE",e[e.ACTIVE=1]="ACTIVE",e[e.PRIMARY=2]="PRIMARY"}(gne||(gne={}));var integration_getCreationKeys=async({Event:e,addressKeys:t,newCalendarKeys:n,oldCalendarKeys:r,decryptedSharedKeyPacket:a})=>{const o=(0,bV.x)(t),s=o?o.privateKey:void 0;if(!s)throw new Error((0,u.c)("Error").t(jne||(jne=(0,d.Z)(["Address primary private key not found"]))));const{privateKey:i,publicKey:c}=n.find((({Key:{Flags:e}})=>(0,N.jl)(e,gne.PRIMARY)))||{};if(!i||!c)throw new Error((0,u.c)("Error").t(bne||(bne=(0,d.Z)(["Calendar primary private key is not decrypted"]))));const l=r||n,[p,m]=await readSessionKeys(getCreationKeys_objectSpread(getCreationKeys_objectSpread({calendarEvent:e},(0,ju.ee)(l)),{},{decryptedSharedKeyPacket:a}));return{privateKey:i,publicKey:c,signingKey:s,sharedSessionKey:p,calendarSessionKey:m}};var integration_getPaginatedEventsByUID=async({api:e,uid:t,recurrenceID:n,max:r=100})=>{let a=0,o=[];for(;a<r;){const r=await e((0,cL.xd)({UID:t,RecurrenceID:n,Page:a,PageSize:100}));if(o=o.concat(r.Events),100!==r.Events.length)break;a++}return o};function rruleWkst_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rruleWkst_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rruleWkst_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rruleWkst_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const withRruleWkst=(e,t=zee.MO)=>{if(t!==zee.MO){var n;const a=e.freq===Jr.WEEKLY&&(null!==(n=e.interval)&&void 0!==n?n:0)>=1&&void 0!==e.byday,o=e.freq===Jr.YEARLY&&void 0!==e.byweekno;if(a||o)return rruleWkst_objectSpread(rruleWkst_objectSpread({},e),{},{wkst:(r=t,r in zee?zee[r]:zee[mod(r,7)])})}var r;return e.wkst?(0,Ne.CE)(e,["wkst"]):e};function rruleEqual_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const yne=["byday","bymonthday","bymonth","bysecond","byminute","byhour","byyearday","byweekno"],isSingleValue=e=>void 0!==e&&(!Array.isArray(e)||1===e.length),getNormalizedRrule=(e,t=zee.MO)=>{const{freq:n,count:r,interval:a,byday:o,bymonth:s,bymonthday:i,wkst:c}=e,l=c?dayToNumericDay(c):t,d=[];return r&&1===r&&d.push("count"),a&&1===a&&d.push("interval"),n===Jr.WEEKLY&&isSingleValue(o)&&d.push("byday"),n===Jr.MONTHLY&&isSingleValue(i)&&d.push("bymonthday"),n===Jr.YEARLY&&isSingleValue(o)&&isSingleValue(s)&&d.push("byday","bymonth"),withRruleWkst(function rruleEqual_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rruleEqual_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rruleEqual_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({freq:n},(0,Ne.CE)(e,d)),l)},rruleEqual_getIsRruleEqual=(e,t,n=!1)=>{const r=getRruleValue(e),a=getRruleValue(t);if(n&&r&&a&&(r.wkst=zee[zee.MO],a.wkst=zee[zee.MO]),a&&r){const e=getNormalizedRrule(r),t=getNormalizedRrule(a),n=(0,Ne.CE)(e,[...yne,"until"]),i=(0,Ne.CE)(t,[...yne,"until"]);return!!(0,WI.Z)(i,n)&&(o=r.until,s=a.until,!!(!o&&!s||o&&s&&date_fns_utc_isSameDay((0,fV.uq)(o),(0,fV.uq)(s)))&&!yne.some((n=>!((e,t)=>Array.isArray(e)&&Array.isArray(t)?(0,xe.wU)(e.slice().sort(),t.slice().sort()):e===t)(e[n],t[n]))))}var o,s;return(0,WI.Z)(e,t)};async function signPart(e,t){if(!e)return;const{signature:n}=await(0,Rt.l)({data:e,privateKeys:[t],armor:!1,detached:!0});return{data:e,signature:n}}async function encryptPart(e,t,n){if(!e)return;const{message:r,signature:a}=await(0,Ft.Z)({data:e,privateKeys:[t],sessionKey:n,armor:!1,detached:!0}),{encrypted:o}=await(0,Rt.Pe)(r);return{dataPacket:o[0],signature:a}}const getEncryptedSessionKey=async({data:e,algorithm:t},n)=>{const{message:r}=await(0,pw.i)({data:e,algorithm:t,publicKeys:[n]}),{asymmetric:a}=await(0,Rt.Pe)(r);return a[0]},createSessionKey=async e=>{const t=await(0,ku.yJ)([e]);return{data:await(0,ku.zt)(t),algorithm:t}},{ENCRYPTED_AND_SIGNED:hne,SIGNED:Ine}=Cr,getArmoredSignatureString=e=>e.armor(),{ENCRYPTED_AND_SIGNED:fne,SIGNED:Mne,CLEAR_TEXT:Nne}=Cr,getHasSharedEventContent=e=>!!e.SharedEventContent,getHasSharedKeyPacket=e=>!!e.SharedKeyPacket,getParts=e=>{if(!vcalHelper_getIsEventComponent(e))throw new Error("Type other than vevent not supported");return getVeventParts(e)},createCalendarEvent=async({eventComponent:e,privateKey:t,publicKey:n,signingKey:r,sharedSessionKey:a,calendarSessionKey:o,isCreateEvent:s,isSwitchCalendar:i,isInvitation:c,removedAttendees:l=[]})=>{const{sharedPart:d,calendarPart:u,personalPart:p,attendeesPart:m}=getParts(e),g=s||i,j=i&&c,b=!!u[fne],[y,h]=await Promise.all([b?o||createSessionKey(n):void 0,a||createSessionKey(n)]),[I,f,M,N,x,v,w,D]=await Promise.all([g&&y?getEncryptedSessionKey(y,t):void 0,g?getEncryptedSessionKey(h,t):void 0,j?void 0:signPart(d[Mne],r),j?void 0:encryptPart(d[fne],r,h),signPart(u[Mne],r),y&&encryptPart(u[fne],r,y),signPart(p[Mne],r),j?void 0:encryptPart(m[fne],r,h)]);return(({sharedSignedPart:e,sharedEncryptedPart:t,sharedSessionKey:n,calendarSignedPart:r,calendarEncryptedPart:a,calendarSessionKey:o,personalSignedPart:s,attendeesEncryptedPart:i,attendeesClearPart:c,removedAttendees:l})=>({SharedKeyPacket:n?(0,bI.oG)(n):void 0,SharedEventContent:e&&t?[{Type:Ine,Data:e.data,Signature:getArmoredSignatureString(e.signature)},{Type:hne,Data:(0,bI.oG)(t.dataPacket),Signature:getArmoredSignatureString(t.signature)}]:void 0,CalendarKeyPacket:a&&o?(0,bI.oG)(o):void 0,CalendarEventContent:r||a?[r&&{Type:Ine,Data:r.data,Signature:getArmoredSignatureString(r.signature)},a&&{Type:hne,Data:(0,bI.oG)(a.dataPacket),Signature:getArmoredSignatureString(a.signature)}].filter(Za.Z):void 0,PersonalEventContent:s?{Type:Ine,Data:s.data,Signature:getArmoredSignatureString(s.signature)}:void 0,AttendeesEventContent:i?[{Type:hne,Data:(0,bI.oG)(i.dataPacket),Signature:getArmoredSignatureString(i.signature)}]:void 0,Attendees:c?c.map((({token:e,status:t})=>({Token:e,Status:t}))):void 0,RemovedAttendeeAddresses:null!=l&&l.length?l:void 0}))({sharedSignedPart:M,sharedEncryptedPart:N,sharedSessionKey:f,calendarSignedPart:x,calendarEncryptedPart:v,calendarSessionKey:I,personalSignedPart:w,attendeesEncryptedPart:D,attendeesClearPart:j?void 0:m[Nne],removedAttendees:l})},createPersonalEvent=async({eventComponent:e,signingKey:t})=>{const{personalPart:n}=getParts(e);return(e=>{if(e)return{Type:Mne,Data:e.data,Signature:getArmoredSignatureString(e.signature)}})(await signPart(n[Mne],t))};var xne,vne;var keys_setupCalendarHelper=async({addresses:e,api:t,getAddressKeys:n})=>{const r=(0,IV.dB)(e);if(!r.length)throw new Error((0,u.c)("Error").t(xne||(xne=(0,d.Z)(["No valid address found"]))));const[{ID:a}]=r,{privateKey:o}=(0,bV.x)(await n(a))||{};if(!o)throw new Error((0,u.c)("Error").t(vne||(vne=(0,d.Z)(["Primary address key is not decrypted."]))));const{Calendar:s}=await t((0,cL.YR)({Name:sa,Color:M.dI[(0,c.lv)(0,M.dI.length-1)],Description:ia,Display:1,AddressID:a})),i={PrimaryTimezone:(0,fV.EP)(),AutoDetectPrimaryTimezone:1};return await Promise.all([t((0,cL.rU)(i)),setupCalendarKey({api:t,calendarID:s.ID,addresses:r,getAddressKeys:n})]),{calendar:s,updatedCalendarUserSettings:i}};function inviteApi_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function inviteApi_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?inviteApi_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):inviteApi_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const{CANCELLED:wne}=zr,{NONE:Dne,KEEP_PARTSTAT:Sne,RESET_PARTSTAT:One,UPDATE_PARTSTAT:Ane,CANCEL:Cne}=ane,fetchEventInvitation=async({veventComponent:e,api:t,getCalendarInfo:n,getCalendarEventRaw:r,getCalendarEventPersonal:a,calendars:o,defaultCalendar:s,message:i,contactEmails:l,ownAddresses:d})=>{const u=await(async({uid:e,api:t,recurrenceId:n})=>{const r=n?(0,mS.Z)(vcalConverter_propertyToUTCDate(n)):void 0,a=[integration_getPaginatedEventsByUID({api:t,uid:e})];n&&a.unshift(integration_getPaginatedEventsByUID({api:t,uid:e,recurrenceID:r}));const[[o,...s]=[],[i,...l]=[]]=await Promise.all(a);if(!i)return{event:o,otherEvents:s};if(!o&&n)try{const r=vevent_getLinkedDateTimeProperty({component:"vevent",property:n,isAllDay:!!i.FullDay,tzid:i.StartTimezone}),a=(0,mS.Z)(vcalConverter_propertyToUTCDate(r)),[o,...s]=await integration_getPaginatedEventsByUID({api:t,uid:e,recurrenceID:a});return o?{event:o,otherEvents:s,parentEvent:i,otherParentEvents:l,supportedRecurrenceId:r}:{event:i,otherEvents:l,supportedRecurrenceId:r}}catch(e){(0,c.ZT)()}return{event:o,otherEvents:s,parentEvent:i,otherParentEvents:l}})({uid:e.uid.value,api:t,recurrenceId:e["recurrence-id"]}),{event:p,parentEvent:m,supportedRecurrenceId:g}=u,j=o.find((({ID:e})=>{var t;return e===(null===(t=p||m)||void 0===t?void 0:t.CalendarID)}))||s;if(!j)return{};const{memberID:b,addressKeys:y,decryptedCalendarKeys:h,calendarSettings:I}=await n(j.ID),f={calendar:j,calendarSettings:I,isCalendarDisabled:getIsCalendarDisabled(j),calendarNeedsUserAction:getDoesCalendarNeedUserAction(j),memberID:b,addressKeys:y,calendarKeys:h};if(!p||((e,t,n)=>!(!e.RecurrenceID||vcalHelper_getHasRecurrenceId(t)&&(0,mS.Z)(vcalConverter_propertyToUTCDate(n||t["recurrence-id"]))===e.RecurrenceID))(p,e,g))return{calendarData:f};const M=(({otherEvents:e,otherParentEvents:t})=>(t||e).filter((({RecurrenceID:e})=>!!e)))(u);try{const e=await Promise.all([p,m].filter(Za.Z).map((e=>(async({calendarEvent:e,memberID:t,getCalendarEventRaw:n,getCalendarEventPersonal:r})=>{const[{veventComponent:a},o]=await Promise.all([n(e),r(e)]),s=t?o[t]:void 0;return inviteApi_objectSpread(inviteApi_objectSpread({},s?s.veventComponent:{}),a)})({calendarEvent:e,memberID:f.memberID,getCalendarEventRaw:r,getCalendarEventPersonal:a})))),[t,n]=e,o={calendarData:f,singleEditData:M,supportedRecurrenceId:g},{invitation:s}=processEventInvitation({vevent:t,calendarEvent:p},i,l,d);if(o.invitation=s,n&&m){const{invitation:e}=processEventInvitation({vevent:n,calendarEvent:m},i,l,d);o.parentInvitation=e}return o}catch(e){return console.error(e.message),{calendarData:f,hasDecryptionError:e.message.includes("decrypt")}}},updateEventApi=async({calendarEvent:e,vevent:t,api:n,getCanonicalEmailsMap:r,calendarData:a,createSingleEdit:o=!1,updateTime:s,updatePartstat:i,attendee:c,overwrite:l,deleteIds:d=[]})=>{var u;const{calendar:{ID:p},memberID:m,addressKeys:g,calendarKeys:j}=a;if(void 0!==s&&i){var b;const{ID:t,Attendees:r}=e,a=null==c?void 0:c.token,o=null===(b=r.find((({Token:e})=>e===a)))||void 0===b?void 0:b.ID;if(!o)throw new Error("Missing data for updating participation status");const l={Status:toApiPartstat(i),UpdateTime:s},{Event:d}=await n((0,cL.nA)(p,t,o,l));return d}const y=await withPmAttendees(t,r,!0),h=await integration_getCreationKeys({Event:o?void 0:e,addressKeys:g,newCalendarKeys:j}),I=await createCalendarEvent(inviteApi_objectSpread({eventComponent:y,isCreateEvent:!!o,isSwitchCalendar:!1,isInvitation:!e.IsOrganizer},h));if(o){if(!getHasSharedKeyPacket(I)||!getHasSharedEventContent(I))throw new Error("Missing shared data");const e=[{Event:inviteApi_objectSpread({Permissions:1,IsOrganizer:0},I),Overwrite:l?1:0}],{Responses:[{Response:{Code:t,Event:r}}]}=await n(inviteApi_objectSpread(inviteApi_objectSpread({},(0,cL.Ul)(p,{MemberID:m,Events:e})),{},{silence:!0}));if(t!==M.vB.SINGLE_SUCCESS||!r)throw new Error("Update unsuccessful");return r}if(!getHasSharedEventContent(I))throw new Error("Missing shared data");const f=[...d.map((e=>({ID:e}))),{Event:inviteApi_objectSpread({Permissions:1},I),ID:e.ID}],N=await n(inviteApi_objectSpread(inviteApi_objectSpread({},(0,cL.Ul)(p,{MemberID:m,Events:f})),{},{silence:!0})),{Code:x,Event:v}=(null===(u=N.Responses.pop())||void 0===u?void 0:u.Response)||{};if(x!==M.vB.SINGLE_SUCCESS||!v)throw new Error("Update unsuccessful");return v},updateEventInvitation=async({isOrganizerMode:e,invitationIcs:t,invitationApi:n,parentInvitationApi:r,calendarData:a,singleEditData:o,pmData:s,api:i,getCanonicalEmailsMap:c,message:l,contactEmails:d,ownAddresses:u,overwrite:p,enabledEmailNotifications:m})=>{var g;const{method:j,vevent:b,attendee:y}=t,{calendarEvent:h,vevent:I,attendee:f}=n,M=null==y?void 0:y.partstat,N=null==f?void 0:f.partstat,x=I.attendee,v=b["recurrence-id"],w=vcalHelper_getSequence(b)-vcalHelper_getSequence(I);if(a.isCalendarDisabled||getIsInvitationOutdated({invitationIcs:t,invitationApi:n,isOrganizerMode:e})||getIsInvitationFromFuture({invitationIcs:t,invitationApi:n,isOrganizerMode:e})||veventHelper_getIsEventCancelled(h)||!y||!f||getIsProtonInvite({invitationIcs:t,invitationApi:n,pmData:s,xYahooUserStatus:null===(g=b["x-yahoo-user-status"])||void 0===g?void 0:g.value}))return{action:Dne};if(e){const e=j===Zr.COUNTER&&M&&[Gr.ACCEPTED,Gr.DECLINED,Gr.TENTATIVE].includes(M);if(j===Zr.REPLY||e){if(!I)return{action:Dne};if(v)return{action:Dne};if(!M||!N||!x)throw new EventInvitationError(yee.UPDATING_ERROR);try{const e=(0,mS.Z)(b.dtstamp?vcalConverter_propertyToUTCDate(b.dtstamp):l.data.Time);if(f.updateTime&&e<=f.updateTime)return{action:Dne};const t=inviteApi_objectSpread(inviteApi_objectSpread({},I),{},{attendee:modifyAttendeesPartstat(x,{[f.emailAddress]:M})}),n=await updateEventApi({calendarEvent:h,vevent:t,updateTime:e,updatePartstat:y.partstat,attendee:f,calendarData:a,api:i,getCanonicalEmailsMap:c,overwrite:!1}),{invitation:r}=processEventInvitation({vevent:t,calendarEvent:n},l,d,u);if(!getInvitationHasAttendee(r))throw new Error("Missing attendee after update");return{action:Ane,invitation:inviteApi_objectSpread(inviteApi_objectSpread({},r),{},{calendarEvent:n})}}catch(e){throw new EventInvitationError(yee.UPDATING_ERROR)}}return{action:Dne}}if(j===Zr.REQUEST){var D,S,O,A,C,E;if(!I)return{action:Dne};const e=((e,t)=>{const{dtstamp:n}=e,{dtstamp:r}=t;if(n&&r)return+vcalConverter_propertyToUTCDate(n)!=+vcalConverter_propertyToUTCDate(r)})(b,I),t=((e,t)=>{const{dtstart:n}=e,{dtstart:r}=t,a=+vcalConverter_propertyToUTCDate(n)==+vcalConverter_propertyToUTCDate(r),o=+vcalConverter_propertyToUTCDate(getDtendProperty(e))==+vcalConverter_propertyToUTCDate(getDtendProperty(t));return!a||!o})(b,I),n=(null===(D=b.summary)||void 0===D?void 0:D.value)!==(null===(S=I.summary)||void 0===S?void 0:S.value),r=(null===(O=b.description)||void 0===O?void 0:O.value)!==(null===(A=I.description)||void 0===A?void 0:A.value),s=(null===(C=b.location)||void 0===C?void 0:C.value)!==(null===(E=I.location)||void 0===E?void 0:E.value),g=!rruleEqual_getIsRruleEqual(b.rrule,I.rrule),j=(({veventIcs:e,veventApi:t,attendeeIcs:n,attendeeApi:r})=>{const{attendee:a}=e,{attendee:o}=t;if(!a)return!!o;if(!o||o.length!==a.length)return!0;const s=a.filter((e=>(0,Xe.mQ)(getAttendeeEmail(e))!==(0,Xe.mQ)(n.emailAddress))),i=o.filter((e=>(0,Xe.mQ)(getAttendeeEmail(e))!==(0,Xe.mQ)(r.emailAddress)));return s.reduce(((e,t)=>{if(!0===e)return!0;const n=i.findIndex((e=>((e,t)=>{var n,r,a,o;return e.value===t.value&&(null===(n=e.parameters)||void 0===n?void 0:n.partstat)===(null===(r=t.parameters)||void 0===r?void 0:r.partstat)&&(null===(a=e.parameters)||void 0===a?void 0:a.role)===(null===(o=t.parameters)||void 0===o?void 0:o.role)})(e,t)));return-1===n||(i.splice(n,1),!1)}),!1)})({veventIcs:b,veventApi:I,attendeeIcs:y,attendeeApi:f}),x=!!e&&(t||n||r||s||g||j),v=!!e&&w>0?One:x?Sne:Dne;if([Sne,One].includes(v)){const e=vcalHelper_getHasRecurrenceId(b)&&!vcalHelper_getHasRecurrenceId(I),t=e?getCanCreateSingleEdit(b,I):void 0;if(e&&!t)return{action:Dne};try{if(!M)throw new Error("Missing attendee parameters");const t=inviteApi_objectSpread(inviteApi_objectSpread({},b),{},{components:[...b.components||[],...(I.components||[]).filter((e=>getIsAlarmComponent(e)))]}),n=veventHelper_withDtstamp(getInvitedEventWithAlarms({vevent:t,partstat:M,calendarSettings:a.calendarSettings,oldPartstat:N,enabledEmailNotifications:m})),r=await withPmAttendees(n,c,!0),s=await updateEventApi({calendarEvent:h,vevent:r,calendarData:a,createSingleEdit:e,deleteIds:null==o?void 0:o.map((({ID:e})=>e)),api:i,getCanonicalEmailsMap:c,overwrite:p}),{invitation:g}=processEventInvitation({vevent:r,calendarEvent:s},l,d,u);if(!getInvitationHasAttendee(g))throw new Error("Missing attendee after update");return{action:v,invitation:inviteApi_objectSpread(inviteApi_objectSpread({},g),{},{calendarEvent:s})}}catch(e){throw new EventInvitationError(yee.UPDATING_ERROR)}}return{action:v}}if(j===Zr.CANCEL){let e=!1;if(I){if(getEventStatus(I)===wne)return{action:Dne};e=!0}else{const t=null==r?void 0:r.vevent.exdate;if(!v||!t)return{action:Dne};e=!t.find((e=>+vcalConverter_propertyToUTCDate(e)==+vcalConverter_propertyToUTCDate(v)))}if(e){const e=vcalHelper_getHasRecurrenceId(b)&&!vcalHelper_getHasRecurrenceId(I),t=e?getCanCreateSingleEdit(b,I):void 0;if(e&&!t)return{action:Dne};try{const t=e?inviteApi_objectSpread(inviteApi_objectSpread({},(0,Ne.CE)(b,["rrule"])),{},{status:{value:wne}}):inviteApi_objectSpread(inviteApi_objectSpread({},I),{},{dtstamp:b.dtstamp,status:{value:wne}});await updateEventApi({calendarEvent:h,vevent:getInvitedEventWithAlarms({vevent:t,partstat:Gr.DECLINED,enabledEmailNotifications:m}),calendarData:a,createSingleEdit:e,api:i,getCanonicalEmailsMap:c,overwrite:p});const{invitation:n}=processEventInvitation({vevent:t},l,d,u);if(!getInvitationHasAttendee(n))throw new Error("Missing attendee after update");return{action:Cne,invitation:inviteApi_objectSpread(inviteApi_objectSpread({},n),{},{calendarEvent:h})}}catch(e){throw new EventInvitationError(yee.CANCELLATION_ERROR)}}return{action:One}}return{action:Dne}},createCalendarEventFromInvitation=async({vevent:e,vcalAttendee:t,partstat:n,api:r,getCanonicalEmailsMap:a,calendarData:o,pmData:s,overwrite:i,enabledEmailNotifications:c})=>{var l,d;const{calendar:u,memberID:p,addressKeys:m,calendarKeys:g,calendarSettings:j}=o||{};if(!(u&&p&&m&&g&&j))throw new Error("Missing data for creating calendar event from invitation");const b=inviteApi_objectSpread(inviteApi_objectSpread({},t),{},{parameters:inviteApi_objectSpread(inviteApi_objectSpread({},t.parameters),{},{partstat:n})}),y=getInvitedEventWithAlarms({vevent:e,partstat:n,calendarSettings:j,enabledEmailNotifications:c}),{index:h}=findAttendee(getAttendeeEmail(t),y.attendee);if(!y.attendee||void 0===h||-1===h)throw new Error("Missing data for creating calendar event from invitation");s?y.attendee=[b]:y.attendee[h]=b;const I=await withPmAttendees(y,a,!0),f=s?null==I||null===(l=I.attendee)||void 0===l?void 0:l[0]:null==I||null===(d=I.attendee)||void 0===d?void 0:d[h];if(!f)throw new Error("Failed to generate PM attendee");const N=inviteApi_objectSpread({eventComponent:I,isCreateEvent:!0,isSwitchCalendar:!1,isInvitation:!0},await integration_getCreationKeys({addressKeys:m,newCalendarKeys:g,decryptedSharedKeyPacket:null==s?void 0:s.sharedSessionKey})),x=await createCalendarEvent(N);if(!getHasSharedKeyPacket(x)||!getHasSharedEventContent(x))throw new Error("Missing shared data");const v=null!=s&&s.sharedEventID?[{Overwrite:i?1:0,Event:inviteApi_objectSpread({SharedEventID:s.sharedEventID,UID:y.uid.value,IsOrganizer:0},(0,Ne.CE)(x,["SharedEventContent","AttendeesEventContent"]))}]:[{Overwrite:i?1:0,Event:inviteApi_objectSpread({IsOrganizer:0,Permissions:1},x)}],{Responses:[{Response:{Code:w,Event:D}}]}=await r(inviteApi_objectSpread(inviteApi_objectSpread({},(0,cL.Ul)(u.ID,{MemberID:p,Events:v})),{},{silence:!0}));if(w!==M.vB.SINGLE_SUCCESS||!D)throw new Error("Creating calendar event from invitation failed");return{savedEvent:D,savedVevent:I,savedVcalAttendee:f}};var Ene,Lne,Pne,Zne,Tne,kne,zne,_ne,Rne,Gne,Yne,Une,Fne,Kne;const Bne=(0,Or.PO)(M.ei.PROTONCALENDAR);var Wne,Vne,Qne,Hne,Xne,Jne,qne,$ne,ere,tre,nre,rre,are,ore,sre;var calendar_ExtraEventAlert=({model:e})=>{const{isOrganizerMode:t,isImport:n,hasMultipleVevents:r,isOutdated:a,isPartyCrasher:o,invitationIcs:{method:s},invitationApi:i,calendarData:c,isAddressActive:l,canCreateCalendar:p,maxUserCalendarsDisabled:m,hasNoCalendars:g}=e,b=s===Zr.CANCEL,y="mb0-5";if(a||o||n&&r)return null;if(t){var h,I,f;if(s!==Zr.REPLY)return null;const t=null===(h=e.invitationIcs.attendee)||void 0===h?void 0:h.partstat,n=null===(I=e.invitationApi)||void 0===I||null===(f=I.attendee)||void 0===f?void 0:f.partstat;if(!t||!n)return null;if(null!=c&&c.isCalendarDisabled){const e=a?(0,u.c)("Link").t(Wne||(Wne=(0,d.Z)(["Re-enable the address linked to this calendar to manage your invitation."]))):(0,u.c)("Link").t(Vne||(Vne=(0,d.Z)(["Re-enable the address linked to this calendar to update your invitation."])));return(0,j.jsxs)(Cn.Z,{className:y,type:"warning",children:[(0,j.jsx)("span",{className:"mr0-5",children:(0,u.c)("Info").t(Qne||(Qne=(0,d.Z)(["This invitation is saved in a disabled calendar."])))}),(0,j.jsx)("span",{children:(0,j.jsx)(sh.Z,{path:"/identity-addresses",app:M.ei.PROTONMAIL,children:e})})]})}return null}if(!i){if(b)return null;if(!l&&!n)return(0,j.jsxs)(Cn.Z,{className:y,type:"warning",children:[(0,j.jsx)("span",{className:"mr0-5",children:(0,u.c)("Info").t(Hne||(Hne=(0,d.Z)(["You cannot reply from the invited address."])))}),(0,j.jsx)("span",{children:(0,j.jsx)(sh.Z,{path:"/identity-addresses",app:M.ei.PROTONMAIL,children:(0,u.c)("Link").t(Xne||(Xne=(0,d.Z)(["Enable your address to answer this invitation."])))})})]});if(!c){if(g)return null;if(p)return(0,j.jsxs)(Cn.Z,{className:y,type:"warning",children:[(0,j.jsx)("span",{className:"mr0-5",children:(0,u.c)("Info").t(Jne||(Jne=(0,d.Z)(["All your calendars are disabled."])))}),(0,j.jsx)(sh.Z,{path:"/calendars",app:M.ei.PROTONCALENDAR,children:(0,u.c)("Link").t(qne||(qne=(0,d.Z)(["Create a calendar linked to an active email address."])))})]});if(m)return(0,j.jsxs)(Cn.Z,{className:y,type:"warning",children:[(0,j.jsx)("span",{className:"mr0-5",children:(0,u.c)("Info").t($ne||($ne=(0,d.Z)(["All your calendars are disabled."])))}),(0,j.jsx)("span",{className:"mr0-5",children:(0,j.jsx)(sh.Z,{path:"/identity-addresses",app:M.ei.PROTONMAIL,children:(0,u.c)("Link").t(ere||(ere=(0,d.Z)(["Enable an email address linked to one of your calendars."])))})}),(0,j.jsx)("span",{children:(0,j.jsx)(sh.Z,{path:"/calendars",app:M.ei.PROTONCALENDAR,children:(0,u.c)("Link").t(tre||(tre=(0,d.Z)(["Or you can delete one of your calendars and create a new one linked to an active email address."])))})})]})}return null}if(n)return null;if(veventHelper_getIsEventCancelled(i.calendarEvent))return null;if(!l)return b?null:(0,j.jsxs)(Cn.Z,{className:y,type:"warning",children:[(0,j.jsx)("span",{className:"mr0-5",children:(0,u.c)("Info").t(nre||(nre=(0,d.Z)(["You cannot reply from the invited address."])))}),(0,j.jsx)("span",{children:(0,j.jsx)(sh.Z,{path:"/identity-addresses",app:M.ei.PROTONMAIL,children:(0,u.c)("Link").t(rre||(rre=(0,d.Z)(["Enable your address again to modify your answer."])))})})]});if(null!=c&&c.isCalendarDisabled){const e=b?(0,u.c)("Link").t(are||(are=(0,d.Z)(["Enable the email address linked to the disabled calendar to cancel the event."]))):(0,u.c)("Link").t(ore||(ore=(0,d.Z)(["Enable the email address linked to the disabled calendar to modify your answer."])));return(0,j.jsxs)(Cn.Z,{className:y,type:"warning",children:[(0,j.jsx)("span",{className:"mr0-5",children:(0,u.c)("Info").t(sre||(sre=(0,d.Z)(["This invitation is saved in a disabled calendar."])))}),(0,j.jsx)("span",{children:(0,j.jsx)(sh.Z,{path:"/identity-addresses",app:M.ei.PROTONMAIL,children:e})})]})}return null};function useLoadingMap_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function useLoadingMap_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?useLoadingMap_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):useLoadingMap_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var hooks_useLoadingMap=(e={})=>{const[t,n]=(0,o.useState)(e),r=(0,o.useRef)(!1),a=(0,o.useRef)({});(0,o.useEffect)((()=>()=>{r.current=!0}),[]);return[t,(0,o.useCallback)((e=>{if(!e)return n({}),Promise.resolve();const t=Object.keys(e).reduce(((e,t)=>{const n=e[t]||0;return e[t]=n+1,e}),useLoadingMap_objectSpread({},a.current));a.current=t;const o=Object.fromEntries(Object.keys(e).map((e=>[e,!0])));return n(o),Promise.all(Object.entries(e).map((([e,o])=>o.catch(c.ZT).finally((()=>{a.current[e]!==t[e]||r.current||n((t=>useLoadingMap_objectSpread(useLoadingMap_objectSpread({},t),{},{[e]:!1})))}))))).then(c.ZT)}),[])]};const ire=["text"];var cre,lre,dre,ure,pre,mre,gre;function CalendarInviteButtons_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function CalendarInviteButtons_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CalendarInviteButtons_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CalendarInviteButtons_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var calendar_CalendarInviteButtons=({actions:e,partstat:t=Gr.NEEDS_ACTION,disabled:n,className:r=""})=>{const[a,o]=hooks_useLoadingMap(),{accept:s,acceptTentatively:i,decline:l}=e,onAccept=async()=>o({accept:s()}),onTentative=async()=>o({tentative:i()}),onDecline=async()=>o({decline:l()}),{accept:p,tentative:m,decline:g}=a,b=p||m||g,y=(0,u.c)("Action").t(cre||(cre=(0,d.Z)(["Yes, I'll attend"]))),h=(0,u.c)("Action").t(lre||(lre=(0,d.Z)(["Maybe I'll attend"]))),I=(0,u.c)("Action").t(dre||(dre=(0,d.Z)(["No, I won't attend"])));if(t===Gr.NEEDS_ACTION)return(0,j.jsxs)(xc,{className:r,children:[(0,j.jsx)(Ea.Z,{onClick:onAccept,disabled:b||n,loading:p,title:y,children:(0,u.c)("Action").t(ure||(ure=(0,d.Z)(["Yes"])))}),(0,j.jsx)(Ea.Z,{onClick:onTentative,disabled:b||n,loading:m,title:h,children:(0,u.c)("Action").t(pre||(pre=(0,d.Z)(["Maybe"])))}),(0,j.jsx)(Ea.Z,{onClick:onDecline,disabled:b||n,loading:g,title:I,children:(0,u.c)("Action").t(mre||(mre=(0,d.Z)(["No"])))})]});const f=t===Gr.ACCEPTED,M=t===Gr.TENTATIVE,N=t===Gr.DECLINED,x=[{text:y,onClick:f?c.ZT:onAccept},{text:h,onClick:M?c.ZT:onTentative},{text:I,onClick:N?c.ZT:onDecline}],v=[f,M,N].findIndex((e=>!0===e)),w=(0,xe.pB)(x,v,0),[{text:D},...S]=w;return(0,j.jsx)(Sc,{originalPlacement:"top-right",disabled:n,loading:b,className:r,title:(0,u.c)("Title").t(gre||(gre=(0,d.Z)(["Change my answer"]))),content:D,"data-test-id":"dropdown:open",children:(0,j.jsx)(dropdown_DropdownMenu,{children:S.map(((e,t)=>{let{text:n}=e,r=(0,Sn.Z)(e,ire);return(0,j.jsx)(Do.Z,CalendarInviteButtons_objectSpread(CalendarInviteButtons_objectSpread({className:"text-left"},r),{},{children:n}),t)}))})})};function useGetVtimezonesMap_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function useGetVtimezonesMap_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?useGetVtimezonesMap_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):useGetVtimezonesMap_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const jre="VTIMEZONES",{SEND_CLEAR:bre,SEND_CLEAR_MIME:yre}=M.uG,sendEncrypt_packToBase64=({data:e,algorithm:t=M.xK})=>({Key:(0,bI.oG)(e),Algorithm:t}),sendEncrypt_encryptAttachmentKeys=async({pack:e,attachmentKeys:t})=>{if(e.MIMEType===M.LO.MIME)return;const n=Object.values(e.Addresses||{}).map((async e=>{if(null==e||!e.PublicKey)return;const n=await(async({sessionKeys:e=[],publicKeys:t=[],passwords:n=[]})=>Promise.all(e.map((async e=>{const{message:r}=await(0,pw.i)({data:e.data,algorithm:e.algorithm,publicKeys:t.length>0?t:void 0,passwords:n}),a=r.packets.write();return(0,bI.oG)(a)}))))({sessionKeys:t.map((({SessionKey:e})=>e)),publicKeys:[e.PublicKey]});e.AttachmentKeyPackets=n}));if((0,N.jl)(e.Type,M.uG.SEND_CLEAR)){const n=[];t.forEach((({SessionKey:e})=>{n.push(sendEncrypt_packToBase64(e))})),e.AttachmentKeys=n}return Promise.all(n)},sendEncrypt_generateSessionKeyHelper=async()=>({algorithm:M.xK,data:await(0,ku.zt)(M.xK)}),sendEncrypt_encryptDraftBodyPackage=async({body:e,publicKeys:t,privateKeys:n,publicKeysList:r=[]})=>{const a=[...t,...r].filter(c.yR),{data:o,sessionKey:s}=await(0,Ft.Z)({data:e||"",publicKeys:a,privateKeys:n,returnSessionKey:!0}),i=await(0,Rt.Pe)(o),{asymmetric:l,encrypted:d}=i;i.asymmetric=i.asymmetric.slice(0,t.length);const u=(0,Gt.w3)(Object.values(i).flat()),p=await(0,Rt.m)(u);return{keys:l.slice(t.length),encrypted:d,sessionKey:s,armoredBody:p}},encryptDraftBody=async({publicKeys:e,privateKeys:t,message:n})=>{const{armoredBody:r}=await sendEncrypt_encryptDraftBodyPackage({body:n.Body,publicKeys:e,privateKeys:t});n.Body=r},send_sendEncrypt_encryptBody=async({pack:e,privateKeys:t,publicKeys:n,message:r})=>{const a=Object.keys(e.Addresses||{}).filter(Za.Z),o=Object.values(e.Addresses||{}).filter(Za.Z).map((({PublicKey:e})=>e)),{keys:s,encrypted:i,sessionKey:l}=r.MIMEType===e.MIMEType?await sendEncrypt_encryptDraftBodyPackage({body:e.Body,publicKeys:n,privateKeys:t,publicKeysList:o}):await(async({body:e,privateKeys:t,publicKeysList:n})=>{const r=n.filter(c.yR),{data:a,sessionKey:o}=await(0,Ft.Z)({data:e||"",publicKeys:r,sessionKey:r.length?void 0:await sendEncrypt_generateSessionKeyHelper(),privateKeys:t,returnSessionKey:!0}),{asymmetric:s,encrypted:i}=await(0,Rt.Pe)(a);return{keys:s,encrypted:i,sessionKey:o}})({body:e.Body,privateKeys:t,publicKeysList:o});let d=0;o.forEach(((t,n)=>{var r;if(!t)return;const o=s[d++],i=null===(r=e.Addresses)||void 0===r?void 0:r[a[n]];i&&(i.BodyKeyPacket=(0,bI.oG)(o))})),(e.Type||0)&(bre|yre)&&(e.BodyKey=sendEncrypt_packToBase64(l)),e.Body=(0,bI.oG)(i[0])},sendEncrypt_encryptPackages=async({packages:e,attachments:t,privateKeys:n,publicKeys:r,message:a})=>{const o=await(async(e,t)=>Promise.all(e.map((async e=>({Attachment:e,SessionKey:await getSessionKey(e,t)})))))(t,n),s=Object.values(e);return await Promise.all([...s.map((e=>(async({pack:e,publicKeys:t,privateKeys:n,attachmentKeys:r,message:a})=>{await Promise.all([send_sendEncrypt_encryptBody({pack:e,publicKeys:t,privateKeys:n,message:a}),sendEncrypt_encryptAttachmentKeys({pack:e,attachmentKeys:r})]),Object.values(e.Addresses||{}).forEach((e=>delete e.PublicKey))})({pack:e,privateKeys:n,publicKeys:r,attachmentKeys:o,message:a}))),encryptDraftBody({publicKeys:r,privateKeys:n,message:a})]),e},{PLAINTEXT:hre,DEFAULT:Ire,MIME:fre}=M.LO,{SEND_PM:Mre,SEND_CLEAR:Nre,SEND_PGP_INLINE:xre,SEND_PGP_MIME:vre,SEND_CLEAR_MIME:wre}=M.uG,sendSubPackages_sendClear=async()=>({Type:Nre,Signature:0}),sendSubPackages_attachSubPackages=async({packages:e,attachments:t=[],emails:n,sendPreferencesMap:r})=>{const bindPackageSet=async(t,n,r)=>{const a=await t,o=e[r];o.Addresses||(o.Addresses={}),o.Type||(o.Type=0),o.Addresses[n]=a,o.Type|=a.Type||0},a=n.map((e=>{const n=r[e];if(!n)throw new Error("Missing send preferences");const{encrypt:a,sign:o,pgpScheme:s,mimeType:i,publicKeys:c}=n,l="text/html"===i?Ire:hre;switch(s){case Mre:return bindPackageSet((async({publicKeys:e},t=[])=>({Type:Mre,PublicKey:(null==e?void 0:e.length)&&e[0]||void 0,Signature:+t.every((({Signature:e})=>e))}))({publicKeys:c},t),e,l);case vre:return o||a?bindPackageSet((async({encrypt:e,sign:t,publicKeys:n})=>e?{Type:vre,PublicKey:(null==n?void 0:n.length)&&n[0]||void 0}:{Type:wre,Signature:+t})({encrypt:a,sign:o,publicKeys:c}),e,fre):bindPackageSet(sendSubPackages_sendClear(),e,Ire);case xre:return bindPackageSet((async({encrypt:e,sign:t,publicKeys:n},r=[])=>e?{Type:xre,PublicKey:(null==n?void 0:n.length)&&n[0]||void 0,Signature:+r.every((({Signature:e})=>e))}:{Type:Nre,Signature:+t})({encrypt:a,sign:o,publicKeys:c},t),e,hre);case Nre:return bindPackageSet(sendSubPackages_sendClear(),e,l);default:throw new Error("Invalid PGP scheme")}}));return await Promise.all(a),e},helpers_extractContentValue=(e="")=>{const t=e.indexOf(";");return-1===t?e:e.substr(0,t)},helpers_constructMime=(e,t)=>{const n=(e=>{const t=mw.ZP.factory({body:e,contentTransferEncoding:"quoted-printable"});return e||(t.internalBody=""),t})(e),r=(e=>{const{attachment:t,data:n}=e,r=JSON.stringify(t.Filename),a=t.Headers||{},o=helpers_extractContentValue(a["content-type"])||t.MIMEType||"application/octet-stream",s=helpers_extractContentValue(a["content-disposition"])||"attachment",i=mw.ZP.factory({contentType:"".concat(o,"; filename=").concat(r,"; name=").concat(r),contentTransferEncoding:"base64",body:(0,Gt.lz)(n)});return i.header("content-disposition","".concat(s,"; filename=").concat(r,"; name=").concat(r)),a["content-id"]&&i.header("content-id",a["content-id"]),i})(t),a=[n].concat(r),o=mw.ZP.factory({contentType:"multipart/mixed",body:a});return"".concat(o.toString(),"\r\n")},{PLAINTEXT:Dre,DEFAULT:Sre,MIME:Ore}=M.LO,sendTopPackages_generateTopPackages=({message:e,sendPreferencesMap:t,attachmentData:n})=>{const r=Object.values(t).filter(Za.Z).reduce(((e,{encrypt:t,sign:n,pgpScheme:r,mimeType:a})=>({[Dre]:e[Dre]||a===M.LO.PLAINTEXT,[Sre]:e[Sre]||a===Sre||r===M.uG.SEND_PGP_MIME&&!t&&!n,[Ore]:e[Ore]||r===M.uG.SEND_PGP_MIME&&(t||n)})),{[Dre]:!1,[Sre]:!1,[Ore]:!1}),a=Object.values(M.LO).filter((e=>r[e])),o={};return a.map((async t=>{switch(t){case Ore:return void(o[Ore]=((e,t)=>({Addresses:{},MIMEType:Ore,Body:helpers_constructMime(e.Body,t)}))(e,n));case Dre:return void(o[Dre]=(e=>({Addresses:{},MIMEType:Dre,Body:e.Body}))(e));case Sre:return void(o[Sre]=(e=>({Addresses:{},MIMEType:Sre,Body:e.Body}))(e));default:throw new Error}})),o};var send_generatePackages=async({message:e,emails:t,sendPreferencesMap:n,attachments:r,attachmentData:a,publicKeys:o,privateKeys:s})=>{let i=sendTopPackages_generateTopPackages({message:e,sendPreferencesMap:n,attachmentData:a});return i=await sendSubPackages_attachSubPackages({packages:i,attachments:r,emails:t,sendPreferencesMap:n}),sendEncrypt_encryptPackages({packages:i,attachments:r,publicKeys:o,privateKeys:s,message:e})};function useSendIcs_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function useSendIcs_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?useSendIcs_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):useSendIcs_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var hooks_useSendIcs=()=>{const e=(0,Dn.Z)(),t=(0,Zb.ZP)(),n=useGetMailSettings(),r=hooks_useGetEncryptionPreferences();return(0,o.useCallback)((async({method:a,ics:o,from:s,addressID:i,parentID:c,to:l,subject:d,plainTextBody:u="",sendPreferencesMap:p={},contactEmailsMap:m})=>{if(!l.length)return;if(!i)throw new Error("Missing addressID");const{publicKeys:g,privateKeys:j}=(0,ju.ee)(await t(i)),[b,y]=[g.slice(0,1),j.slice(0,1)],{AutoSaveContacts:h,Sign:I}=await n(),f=new File([new Blob([o])],"invite.ics",{type:"text/calendar; method=".concat(a)}),N=await encryptAttachment(o,f,!1,b,y),v=(0,Gt.w3)([N.data,N.keys,N.signature].filter(Za.Z)),w=l.map((({Address:e})=>e)),D={Filename:N.Filename,MIMEType:N.MIMEType,Contents:(0,bI.oG)(v),KeyPackets:(0,bI.oG)(N.keys),Signature:N.signature?(0,bI.oG)(N.signature):void 0},S={attachment:D,data:o},O={ToList:l,CCList:[],BCCList:[],Subject:d,Sender:s,Body:u,MIMEType:M.LO.PLAINTEXT,Attachments:[(0,Ne.ei)(D,["Filename","MIMEType","Contents"])],Flags:I?x.FLAG_SIGN:void 0},A={};if(await Promise.all(w.map((async e=>{const t=p[e];if(t)return void(A[e]=t);const n=await r(e,0,m),a=send_getSendPreferences(n,O);A[e]=a}))),a===Zr.REPLY){var C;const e=null===(C=A[l[0].Address])||void 0===C?void 0:C.error;if(e)throw e}const E=await send_generatePackages({message:O,sendPreferencesMap:A,attachmentData:S,attachments:[D],emails:w,publicKeys:b,privateKeys:y}),L={Message:O,AttachmentKeys:(0,bI.oG)(N.keys),AutoSaveContacts:a===Zr.REPLY?0:h,Packages:Object.values(E)};c&&(L.ParentID=c,L.Action=0),await e(useSendIcs_objectSpread(useSendIcs_objectSpread({},(0,En.Nt)(L)),{},{silence:!0}))}),[e,n,t,r])};function useInviteButtons_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function useInviteButtons_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?useInviteButtons_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):useInviteButtons_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Are,Cre,Ere,Lre,Pre,Zre,Tre,kre,zre,hooks_useInviteButtons=({veventApi:e,veventIcs:t,attendee:n,organizer:r,subject:a,messageID:s,calendarData:i,pmData:l,singleEditData:d,calendarEvent:u,onEmailSuccess:p,onEmailError:m,onCreateEventSuccess:g,onUpdateEventSuccess:j,onSuccess:b,onCreateEventError:y,onUpdateEventError:h,onUnexpectedError:I,overwrite:f,reinviteEventID:N,disabled:x=!1})=>{const v=(0,Dn.Z)(),w=hooks_useSendIcs(),D=(0,Nn.Z)(),S=hooks_useCalendarEmailNotificationsFeature(),O=useGetCanonicalEmailsMap(),A=(()=>{const e=(0,Dn.Z)(),t=(0,Ln.Z)(),n=(0,o.useCallback)((async t=>{const n=(0,xe.Tw)(t.filter((e=>"utc"!==e.toLowerCase()))),r=n.map((e=>encodeURIComponent(e)));if(!n.length)return Promise.resolve({});const a=(0,xe.yo)(r,M.Hk);return(await Promise.all(a.map((async n=>{const{Timezones:r={}}=await e((0,cL.BQ)(n));return t.reduce(((e,t)=>{const n=r[t];return n&&(e[t]={vtimezoneString:n,vtimezone:vcal_parse(n)}),e}),{})})))).reduce(((e,t)=>useGetVtimezonesMap_objectSpread(useGetVtimezonesMap_objectSpread({},e),t)),{})}),[e,t]);return(0,o.useCallback)((e=>{t.has(jre)||t.set(jre,new Map);const r=t.get(jre),a=e.filter((e=>(0,Zn.fd)(r.get(e)))),o=n(a),miss=async e=>(await o)[e];return Promise.all(e.map((async e=>({tzid:e,result:await(0,Zn.NC)(r,e,miss)})))).then((e=>e.reduce(((e,{tzid:t,result:n})=>(e[t]=n,e)),{})))}),[t,n])})(),{contactsMap:C}=useContactCache(),E=(0,o.useCallback)((async(e,o)=>{if(!(n&&(i=n,i.addressID)&&r&&D))return I(),!1;var i;try{const i=(e=>{const{APP_NAME:t,APP_VERSION:n}=e,r=M.mN[t].name;return a=n,"-//Proton Technologies//".concat(r," ").concat(a,"//EN");var a})(D),d=useInviteButtons_objectSpread(useInviteButtons_objectSpread({},n.vcalComponent),{},{parameters:useInviteButtons_objectSpread(useInviteButtons_objectSpread({},n.vcalComponent.parameters),{},{partstat:e})}),u=veventHelper_withDtstamp((0,Ne.CE)(t,["dtstamp"]),o),m=await(async({dtstart:e,dtend:t,"recurrence-id":n,exdate:r=[]},a)=>{const o=[e,t,n,...r].filter(Za.Z).map((0,c.Qm)(vcalHelper_getPropertyTzid)).filter(Za.Z),s=await a(o);return Object.values(s).filter(Za.Z).map((({vtimezone:e})=>e))})(u,A);null!=l&&l.sharedEventID&&null!=l&&l.sharedSessionKey&&(u["x-pm-shared-event-id"]={value:l.sharedEventID},u["x-pm-session-key"]={value:l.sharedSessionKey},u["x-pm-proton-reply"]={value:"true",parameters:{type:"boolean"}});const g=(({method:e,prodId:t,attendeesTo:n,vevent:r,vtimezones:a,keepDtstamp:o})=>{const s=createInviteVevent({method:e,vevent:r,attendeesTo:n,keepDtstamp:o});if(!s)throw new Error("Invite vevent failed to be created");const i={component:"vcalendar",components:[s],prodid:{value:t},version:{value:"2.0"},method:{value:e},calscale:{value:"GREGORIAN"}};return null!=a&&a.length&&(i.components=[...a,...i.components]),vcal_serialize(i)})({method:Zr.REPLY,prodId:i,vevent:veventHelper_withDtstamp((0,Ne.CE)(u,["dtstamp"]),o),vtimezones:m,attendeesTo:[d],keepDtstamp:!0});return await w({method:Zr.REPLY,ics:g,addressID:n.addressID,parentID:s,from:{Address:n.emailAddress,Name:n.name||n.emailAddress},to:[{Address:r.emailAddress,Name:r.name}],subject:a,plainTextBody:generateEmailBody({method:Zr.REPLY,vevent:u,emailAddress:n.emailAddress,partstat:e}),contactEmailsMap:C}),p(),!0}catch(e){return m(e),!1}}),[e,t,n,r,D,p,m]),L=(0,o.useCallback)((async e=>{if(!getHasFullCalendarData(i))return I(),!1;try{return(async({calendarEventID:e,calendarData:t,api:n})=>{n((0,cL.Ul)(t.calendar.ID,{MemberID:t.memberID,Events:[{ID:e}]}))})({calendarEventID:e,calendarData:i,api:v}),!0}catch(e){return I(),!1}}),[e,t,n,v,i,u]),P=(0,o.useCallback)((async e=>{if(n&&t)try{const{savedEvent:r,savedVevent:a,savedVcalAttendee:o}=await createCalendarEventFromInvitation({vevent:t,vcalAttendee:n.vcalComponent,partstat:e,api:v,getCanonicalEmailsMap:O,calendarData:i,pmData:l,overwrite:f,enabledEmailNotifications:S});return g(),{savedEvent:r,savedVevent:a,savedVcalAttendee:o}}catch(t){y(e,t)}else I()}),[t,n,v,O,i,l,f]),Z=(0,o.useCallback)((async(r,a)=>{if(n&&e&&u)try{const{savedEvent:o,savedVevent:s,savedVcalAttendee:l}=await(async({veventApi:e,calendarEvent:t,veventIcs:n,vcalAttendee:r,attendeeToken:a,partstat:o,oldPartstat:s,timestamp:i,calendarData:l,singleEditData:d,api:u,enabledEmailNotifications:p})=>{var m;const{calendar:g,memberID:j,addressKeys:b,calendarSettings:y}=l||{},h=(0,bV.x)(b);if(!(getHasAttendee(e)&&getHasAttendee(n)&&g&&j&&h&&y))throw new Error("Missing data for updating calendar event from invitation");const{ID:I,Attendees:f}=t,M=vcalHelper_getHasRecurrenceId(n),N=null===(m=f.find((({Token:e})=>e===a)))||void 0===m?void 0:m.ID;if(!N)throw new Error("Missing data for updating participation status");const x={Status:toApiPartstat(o),UpdateTime:(0,mS.Z)(i)},{Event:v}=await u((0,cL.nA)(g.ID,I,N,x));if(!M&&null!=d&&d.length&&a)try{const{updatePartstatActions:e,updatePersonalPartActions:t}=getResetPartstatActions(d,a,o),n=e.map((({eventID:e,calendarID:t,attendeeID:n,updateTime:r,partstat:a})=>()=>u(inviteApi_objectSpread(inviteApi_objectSpread({},(0,cL.nA)(t,e,n,{Status:toApiPartstat(a),UpdateTime:r})),{},{silence:!0})))),r=t.map((({eventID:e,calendarID:t})=>()=>u(inviteApi_objectSpread(inviteApi_objectSpread({},(0,cL.Hx)(t,e,{MemberID:j})),{},{silence:!0})))),s=processApiRequestsSafe(n,1e3,1e5),i=processApiRequestsSafe(r,1e3,1e5);await Promise.all([s,i])}catch(e){(0,c.ZT)()}let w;const D=getAttendeeEmail(r),S=inviteApi_objectSpread(inviteApi_objectSpread({},n),(0,Ne.ei)(e,["components","exdate"])),O=inviteApi_objectSpread(inviteApi_objectSpread({},S),{},{attendee:modifyAttendeesPartstat(S.attendee,{[D]:o})}),A=getInvitedEventWithAlarms({vevent:O,partstat:o,calendarSettings:y,oldPartstat:s,enabledEmailNotifications:p});try{const e=await createPersonalEvent({eventComponent:A,signingKey:h.privateKey}),t={MemberID:j,PersonalEventContent:e},{Event:n}=await u((0,cL.Hx)(g.ID,I,t));w=n}catch(e){(0,c.ZT)()}return{savedEvent:w||v,savedVevent:w?A:O,savedVcalAttendee:inviteApi_objectSpread(inviteApi_objectSpread({},r),{},{parameters:inviteApi_objectSpread(inviteApi_objectSpread({},r.parameters),{},{partstat:o})})}})({veventIcs:t,veventApi:e,calendarEvent:u,vcalAttendee:n.vcalComponent,attendeeToken:n.token,partstat:r,oldPartstat:n.partstat,timestamp:a,api:v,calendarData:i,singleEditData:d,enabledEmailNotifications:S});return j(),{savedEvent:o,savedVevent:s,savedVcalAttendee:l}}catch(e){h(r,e)}else I()}),[e,t,n,v,i,u,d]),T=(0,o.useCallback)((async t=>{if(N){if(!await L(N))return}const r=+(0,$p.u)();if(l){const a=!e||N?await P(t):await Z(t,r);if(!a)return;const o=a.savedEvent.Attendees.find((({Token:e})=>e===(null==n?void 0:n.token)));if(!o)throw new Error("Could not retrieve attendee");return await E(t,o.UpdateTime*M.sh),void b(a)}if(!await E(t,r))return;const a=!e||N?await P(t):await Z(t,r);a&&b(a)}),[E,P,Z,N,l]);return n&&r&&!x?{accept:()=>T(Gr.ACCEPTED),acceptTentatively:()=>T(Gr.TENTATIVE),decline:()=>T(Gr.DECLINED),retryCreateEvent:async e=>{const t=await P(e);t&&b(t)},retryUpdateEvent:async(e,t)=>{const n=await Z(e,t);n&&b(n)}}:{accept:()=>(0,Wt.D)(0),acceptTentatively:()=>(0,Wt.D)(0),decline:()=>(0,Wt.D)(0),retryCreateEvent:()=>(0,Wt.D)(0),retryUpdateEvent:()=>(0,Wt.D)(0)}};function ExtraEventAttendeeButtons_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ExtraEventAttendeeButtons_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ExtraEventAttendeeButtons_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ExtraEventAttendeeButtons_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const{EVENT_CREATION_ERROR:_re,EVENT_UPDATE_ERROR:Rre}=yee;var Gre,calendar_ExtraEventAttendeeButtons=({model:e,setModel:t,message:n})=>{var r,a,s;const{isOrganizerMode:i,invitationIcs:c,invitationIcs:{method:l},invitationApi:p,calendarData:m,pmData:g,singleEditData:b,error:y,hasDecryptionError:h,reinviteEventID:I}=e,f=(null==p||null===(r=p.attendee)||void 0===r?void 0:r.partstat)||Gr.NEEDS_ACTION,{attendee:M}=p||c,{organizer:N}=p||c,[x,v]=(0,no.Z)(),{createNotification:w}=(0,hn.Z)(),D=(0,o.useCallback)((({savedEvent:n,savedVevent:r,savedVcalAttendee:a})=>{if(!M)throw new Error("Missing attendee");const o=ExtraEventAttendeeButtons_objectSpread(ExtraEventAttendeeButtons_objectSpread({},M),{},{vcalComponent:a,partstat:getAttendeePartstat(a),token:getAttendeeToken(a)}),s=ExtraEventAttendeeButtons_objectSpread(ExtraEventAttendeeButtons_objectSpread({},p),{},{vevent:r,calendarEvent:n,attendee:o,organizer:N});t(ExtraEventAttendeeButtons_objectSpread(ExtraEventAttendeeButtons_objectSpread({},(0,Ne.CE)(e,["error"])),{},{invitationApi:s,hideSummary:!0,hideLink:!1,updateAction:ane.NONE}))}),[p,M,N]),handleUnexpectedError=()=>{t(ExtraEventAttendeeButtons_objectSpread(ExtraEventAttendeeButtons_objectSpread({},e),{},{error:new EventInvitationError(yee.UNEXPECTED_ERROR)}))},S=getDisableButtons(e),O=getIsProtonInvite({invitationIcs:c,invitationApi:p,pmData:g})||g&&getIsReinvite({invitationIcs:c,invitationApi:p,isOrganizerMode:i}),A=hooks_useInviteButtons({veventIcs:c.vevent,veventApi:null==p?void 0:p.vevent,calendarEvent:null==p?void 0:p.calendarEvent,attendee:M,organizer:N,subject:messages_formatSubject(null===(a=n.data)||void 0===a?void 0:a.Subject,ce),messageID:null===(s=n.data)||void 0===s?void 0:s.ID,calendarData:m,pmData:O?g:void 0,singleEditData:b,onEmailSuccess:()=>{w({type:"success",text:(0,u.c)("Reply to calendar invitation").t(Are||(Are=(0,d.Z)(["Answer sent"])))})},onCreateEventSuccess:()=>{w({type:"success",text:(0,u.c)("Reply to calendar invitation").t(Cre||(Cre=(0,d.Z)(["Calendar event created"])))})},onUpdateEventSuccess:()=>{w({type:"success",text:(0,u.c)("Reply to calendar invitation").t(Ere||(Ere=(0,d.Z)(["Calendar event updated"])))})},onEmailError:e=>{if(e instanceof EncryptionPreferencesError){const t=(e=>e.toLowerCase().endsWith(". please try again")?e.slice(0,-18):e)(e.message);w({type:"error",text:(0,u.c)("Reply to calendar invitation").t(Zre||(Zre=(0,d.Z)(["Cannot send to organizer address: ",""])),t)})}else w({type:"error",text:(0,u.c)("Reply to calendar invitation").t(Tre||(Tre=(0,d.Z)(["Answering invitation failed"])))})},onCreateEventError:n=>{w({type:"error",text:(0,u.c)("Reply to calendar invitation").t(Lre||(Lre=(0,d.Z)(["Creating calendar event failed"])))}),y instanceof EventInvitationError&&y.type===yee.UNEXPECTED_ERROR?handleUnexpectedError():t(ExtraEventAttendeeButtons_objectSpread(ExtraEventAttendeeButtons_objectSpread({},e),{},{hideLink:!0,error:new EventInvitationError(yee.EVENT_CREATION_ERROR,{partstat:n})}))},onUpdateEventError:(n,r)=>{w({type:"error",text:(0,u.c)("Reply to calendar invitation").t(Pre||(Pre=(0,d.Z)(["Updating calendar event failed"])))}),y instanceof EventInvitationError&&y.type===yee.UNEXPECTED_ERROR?handleUnexpectedError():t(ExtraEventAttendeeButtons_objectSpread(ExtraEventAttendeeButtons_objectSpread({},e),{},{hideLink:!0,error:new EventInvitationError(yee.EVENT_UPDATE_ERROR,{partstat:n,timestamp:r})}))},onSuccess:D,onUnexpectedError:handleUnexpectedError,disabled:S,overwrite:!!h,reinviteEventID:I});if(y&&[_re,Rre].includes(y.type)){const{partstat:e,timestamp:t}=y,{retryCreateEvent:n,retryUpdateEvent:r}=A,a=y.type===Rre,o=EventInvitationError_getErrorMessage(y.type),handleRetry=()=>e?a?void 0!==t?r(e,t):v((0,Wt.D)(0)):n(e):v((0,Wt.D)(0));return x?(0,j.jsx)(Yu.Z,{className:"center flex mt1 mb1 "}):(0,j.jsx)(banner_Banner,{backgroundColor:pne.DANGER,icon:"triangle-exclamation",action:(0,j.jsx)("span",{className:"flex-item-noshrink flex",children:(0,j.jsx)(VM.Z,{onClick:handleRetry,className:"text-underline color-inherit",children:(0,u.c)("Action").t(kre||(kre=(0,d.Z)(["Try again"])))})}),children:o})}return l===Zr.REQUEST&&f?(0,j.jsxs)("div",{className:"mt1-5 flex flex-align-items-center",children:[(0,j.jsx)("div",{className:"text-bold mr1",children:(0,u.c)("Calendar invite buttons label").t(zre||(zre=(0,d.Z)(["Attending?"])))}),(0,j.jsx)(calendar_CalendarInviteButtons,{actions:A,partstat:f,disabled:S})]}):null};const getParsedComponentHasError=e=>!!e.error,getComponentIdentifier=(e,t={locale:kt.RW})=>{var n;if(getParsedComponentHasError(e))return"";if(vcalHelper_getIsTimezoneComponent(e))return e.tzid.value||"";const r=((e="")=>{if(!e)return"";const t=new RegExp("^".concat(Ree,"[abcdef\\d]{40}").concat(Gee,"(.+)")),[,n]=e.match(t)||[];return n||(new RegExp("^".concat(Ree,"[abcdef\\d]{40}$")).test(e)?"":e)})("uid"in e?null===(n=e.uid)||void 0===n?void 0:n.value:void 0);if(r)return r;if(vcalHelper_getIsEventComponent(e)){const{summary:n,dtstart:r}=e,a=(0,br.$G)((null==n?void 0:n.value)||"");if(a)return a;if(null!=r&&r.value){const e=vcalHelper_getIsPropertyAllDay(r)?"PP":"PPpp";return date_fns_utc_format((0,fV.uq)(r.value),e,t)}return(0,u.c)("Error importing event").t(Gre||(Gre=(0,d.Z)(["No UID, title or start time"])))}return""},import_import_splitErrors=e=>e.reduce(((e,t)=>(t instanceof ImportEventError_ImportEventError?e.errors.push(t):e.rest.push(t),e)),{errors:[],rest:[]});function import_encryptAndSubmit_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function import_encryptAndSubmit_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?import_encryptAndSubmit_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):import_encryptAndSubmit_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const encryptEvent=async(e,t,n)=>{const r=getComponentIdentifier(e);try{const r=await createCalendarEvent(import_encryptAndSubmit_objectSpread({eventComponent:e,isCreateEvent:!0,isSwitchCalendar:!1},await integration_getCreationKeys({addressKeys:t,newCalendarKeys:n})));if(!getHasSharedKeyPacket(r)||!getHasSharedEventContent(r))throw new Error("Missing shared data");return{data:r,component:e}}catch(e){return new ImportEventError_ImportEventError(Ate.ENCRYPTION_ERROR,"vevent",r)}},submitEvents=async(e,t,n,r,a)=>{const o=e.map((e=>({Overwrite:a,Event:import_encryptAndSubmit_objectSpread({Permissions:1},e.data)})));let s;try{const{Responses:e}=await r(import_encryptAndSubmit_objectSpread(import_encryptAndSubmit_objectSpread({},(0,cL.Ul)(t,{MemberID:n,IsImport:1,Events:o})),{},{timeout:M.kr,silence:!0}));s=e}catch(t){s=e.map(((e,n)=>({Index:n,Response:{Code:0,Error:"".concat(t)}})))}return s},processResponses=(e,t)=>e.map((e=>{var n;const{Index:r,Response:{Error:a}}=e;if((e=>{const{Response:{Code:t,Event:n}}=e;return t===M.vB.SINGLE_SUCCESS&&!!n})(e))return import_encryptAndSubmit_objectSpread(import_encryptAndSubmit_objectSpread({},t[r]),{},{response:e});const o=new Error(a),s=null===(n=t[r])||void 0===n?void 0:n.component,i=s?getComponentIdentifier(s):"";return new ImportEventError_ImportEventError(Ate.EXTERNAL_ERROR,"vevent",i,o)}));var Yre;var Ure,Fre,calendar_AddToCalendarButton=({events:e,calendarData:t,disabled:n,onSuccess:r,onError:a,className:s})=>{const i=(0,Dn.Z)(),[l,p]=(0,no.Z)(),{calendar:m,isCalendarDisabled:g,calendarKeys:b,memberID:y,addressKeys:h}=t||{},I=(0,o.useCallback)((async()=>{if(!m||g||!b||!y||!h)return(0,c.ZT)();const{importedEvents:t,importErrors:n}=await(async({events:e,calendarID:t,memberID:n,overwrite:r=1,addressKeys:a,calendarKeys:o,api:s,signal:i,onProgress:c})=>{const l=(0,xe.yo)(e,10),d=[],u=[],p=[];for(let e=0;e<l.length;e++){if(null!=i&&i.aborted)return{importedEvents:[],importErrors:[]};const m=l[e],[g]=await Promise.all([Promise.all(m.map((e=>encryptEvent(e,a,o)))),(0,Wt.D)(300)]),{errors:j,rest:b}=import_import_splitErrors(g);if(null!=i&&i.aborted)return{importedEvents:[],importErrors:[]};if(null==c||c(b,[],j),j.length&&p.push(j),b.length){const e=submitEvents(b,t,n,s,r).then((e=>{const t=processResponses(e,b),{errors:n,rest:r}=import_import_splitErrors(t);u.push(r),p.push(n),null==c||c([],r,n)}));d.push(e)}}return await Promise.all(d),{importedEvents:u.flat(),importErrors:p.flat()}})({events:e,api:i,memberID:y,addressKeys:h,calendarID:m.ID,calendarKeys:b});t.length&&r(t),n.length&&a(n)}),[e,i,m,y,h,m]),f=(0,u.c)("Action").t(Yre||(Yre=(0,d.Z)(["Add to ",""])),Ar);return(0,j.jsx)(Ea.Z,{className:s,color:"weak",onClick:()=>p(I()),disabled:n,loading:l,title:f,children:f})};function ExtraEventImportButton_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ExtraEventImportButton_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ExtraEventImportButton_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ExtraEventImportButton_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Kre,Bre,calendar_ExtraEventImportButton=({model:e,setModel:t})=>{const{createNotification:n}=(0,hn.Z)(),r=hooks_useCalendarEmailNotificationsFeature(),{calendarData:a,invitationIcs:{vevent:s}}=e,i=null!=a&&a.calendarSettings?getEventWithCalendarAlarms(s,a.calendarSettings,r):s,c=(0,o.useCallback)((([{response:r,component:a}])=>{const o={vevent:a,calendarEvent:r.Response.Event};n({type:"success",text:(0,u.c)("Import ICS file from Mail").t(Ure||(Ure=(0,d.Z)(["Calendar event created"])))}),t(ExtraEventImportButton_objectSpread(ExtraEventImportButton_objectSpread({},(0,Ne.CE)(e,["error"])),{},{invitationApi:o,hideSummary:!0,hideLink:!1,updateAction:ane.NONE}))}),[]),l=(0,o.useCallback)((()=>{n({type:"error",text:(0,u.c)("Import ICS file from Mail").t(Fre||(Fre=(0,d.Z)(["Creating calendar event failed"])))})}),[]);return(0,j.jsx)(calendar_AddToCalendarButton,{events:[i],calendarData:a,disabled:getDisableButtons(e),onSuccess:c,onError:l,className:"mb0-5"})};var calendar_ExtraEventOrganizerButtons=({model:e})=>{const{invitationIcs:t,invitationIcs:{method:n},invitationApi:r}=e;if(null==r||!r.vevent.sequence)return null;const{vevent:a}=t,{vevent:o}=r,[s,i]=[o,a].map(vcalHelper_getSequence),c=i-s;if(n===Zr.COUNTER){if(0===c)return(0,j.jsx)(Ea.Z,{size:"small",children:(0,u.c)("Action").t(Kre||(Kre=(0,d.Z)(["Accept"])))});if(c<0)return(0,j.jsx)(Ea.Z,{size:"small",disabled:!0,children:(0,u.c)("Action").t(Bre||(Bre=(0,d.Z)(["Accept"])))})}return null};var calendar_ExtraEventButtons=({model:e,setModel:t,message:n})=>{const{isImport:r,isOrganizerMode:a}=e,o=a?(0,j.jsx)(calendar_ExtraEventOrganizerButtons,{model:e}):(0,j.jsx)(calendar_ExtraEventAttendeeButtons,{model:e,setModel:t,message:n}),s=r?(0,j.jsx)(calendar_ExtraEventImportButton,{model:e,setModel:t}):o,i=(e=>{const{isImport:t,hasMultipleVevents:n,isOrganizerMode:r,isPartyCrasher:a,invitationIcs:{method:o},invitationApi:s,calendarData:i,isOutdated:c,isAddressActive:l}=e;return!!(r||t&&(s||n))||o===Zr.CANCEL||!!c||!l||!(null==i||!i.isCalendarDisabled)||a})(e)?null:s,c=(e=>{const{isOrganizerMode:t,isImport:n,hasMultipleVevents:r,hideLink:a,isPartyCrasher:o,isOutdated:s,isAddressActive:i,calendarData:c,invitationIcs:{method:l,attendee:p},invitationApi:m,hasNoCalendars:g,canCreateCalendar:b,mustReactivateCalendars:y,hasDecryptionError:h}=e;if(a)return null;const I=(null==p?void 0:p.partstat)&&[Gr.ACCEPTED,Gr.TENTATIVE,Gr.DECLINED].includes(null==p?void 0:p.partstat),f=n,N=!t&&l===Zr.REQUEST&&!s&&i&&!n,x=t&&(l===Zr.REPLY||l===Zr.COUNTER&&I)&&!n,v=[Zr.CANCEL,Zr.COUNTER,Zr.REFRESH].includes(l)||!t&&l===Zr.REQUEST&&s;if((null==c?void 0:c.calendarNeedsUserAction)&&!o||y)return n?(0,j.jsx)(dw.Z,{to:"/",toApp:M.ei.PROTONCALENDAR,children:(0,u.c)("Link").t(Ene||(Ene=(0,d.Z)(["You need to activate your calendar keys to add this event"])))}):x?(0,j.jsx)(dw.Z,{to:"/",toApp:M.ei.PROTONCALENDAR,children:(0,u.c)("Link").t(Lne||(Lne=(0,d.Z)(["You need to activate your calendar keys to manage this invitation"])))}):N?(0,j.jsx)(dw.Z,{to:"/",toApp:M.ei.PROTONCALENDAR,children:(0,u.c)("Link").t(Pne||(Pne=(0,d.Z)(["You need to activate your calendar keys to answer this invitation"])))}):v&&m?(0,j.jsx)(dw.Z,{to:"/",toApp:M.ei.PROTONCALENDAR,children:t?(0,u.c)("Link").t(Zne||(Zne=(0,d.Z)(["You need to activate your calendar keys to see the updated event"]))):(0,u.c)("Link").t(Tne||(Tne=(0,d.Z)(["You need to activate your calendar keys to see the updated invitation"])))}):null;if(n&&r)return(0,j.jsx)(sh.Z,{path:"/calendars#import",app:M.ei.PROTONCALENDAR,children:(0,u.c)("Link").t(kne||(kne=(0,d.Z)(["This ICS file contains more than one event. Please download it and import the events in ",""])),Bne)});if(!m){if(h){if(x)return(0,j.jsx)(sh.Z,{path:"/encryption-keys#addresses",app:M.ei.PROTONMAIL,children:(0,u.c)("Link").t(zne||(zne=(0,d.Z)(["You need to reactivate your keys to manage this invitation"])))});if(v)return(0,j.jsx)(sh.Z,{path:"/encryption-keys#addresses",app:M.ei.PROTONMAIL,children:t?(0,u.c)("Link").t(_ne||(_ne=(0,d.Z)(["You need to reactivate your keys to see the updated event"]))):(0,u.c)("Link").t(Rne||(Rne=(0,d.Z)(["You need to reactivate your keys to see the updated invitation"])))})}if(g&&b&&!o){if(f)return(0,j.jsx)(dw.Z,{to:"/",toApp:M.ei.PROTONCALENDAR,children:(0,u.c)("Link").t(Gne||(Gne=(0,d.Z)(["Create a new calendar to add this event"])))});if(N)return(0,j.jsx)(dw.Z,{to:"/",toApp:M.ei.PROTONCALENDAR,children:(0,u.c)("Link").t(Yne||(Yne=(0,d.Z)(["Create a new calendar to answer this invitation"])))});if(x)return(0,j.jsx)(dw.Z,{to:"/",toApp:M.ei.PROTONCALENDAR,children:(0,u.c)("Link").t(Une||(Une=(0,d.Z)(["Create a new calendar to manage your invitations"])))})}return null}const w=(null==c?void 0:c.calendar.ID)||"",D=null==m?void 0:m.calendarEvent.ID,S=null==m?void 0:m.vevent["recurrence-id"],O=S?(0,mS.Z)(vcalConverter_propertyToUTCDate(S)):void 0,A=new URLSearchParams;A.set("Action","VIEW"),A.set("EventID",D),A.set("CalendarID",w),O&&A.set("RecurrenceID","".concat(O));const C=w&&D?"/event?".concat(A.toString()):void 0;return C?(0,j.jsx)(dw.Z,{to:C,toApp:M.ei.PROTONCALENDAR,children:s?(0,u.c)("Link").t(Fne||(Fne=(0,d.Z)(["Open updated event in ",""])),Bne):(0,u.c)("Link").t(Kne||(Kne=(0,d.Z)(["Open in ",""])),Bne)}):null})(e);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(calendar_ExtraEventAlert,{model:e}),c&&(0,j.jsx)("div",{className:"mb0-5",children:c}),i]})};var calendarSelect_CalendarSelectIcon=({color:e,className:t})=>(0,j.jsx)("div",{className:(0,ht.dh)(["calendar-select-color",t]),style:{backgroundColor:e}});jI().addHook("afterSanitizeAttributes",(e=>{"A"===e.tagName&&(e.setAttribute("rel","noopener noreferrer"),e.setAttribute("target","_blank"))}));const restrictedCalendarSanitize=e=>jI().sanitize(e,{ALLOWED_TAGS:["a","b","em","br","i","u","ul","ol","li","span","p"],ALLOWED_ATTR:["href"]}),Wre=/(\b(?:https|ftps|file|mailto|tel|sms):(?:(?!["<>\^`{|}])\S)+)/gi,Vre=/(<a[^>]+>.+?<\/a>)/gi;var calendar_urlify=e=>e.split(Vre).map((e=>e.match(Vre)?e:e.replace(Wre,'<a href="$1">$1</a>'))).join("");var iconRow_IconRow=({children:e,icon:t,iconColor:n,className:r,title:a,iconClassName:o,labelClassName:s="pb0-5",id:i})=>(0,j.jsxs)("div",{className:"flex flex-nowrap flex-align-items-start mb1 form--icon-labels",children:[(0,j.jsx)(gr.Z,{className:s,htmlFor:i,title:a,children:t?"string"==typeof t?(0,j.jsx)(pr.Z,{name:t,className:o,alt:a,color:n}):t:(0,j.jsxs)(j.Fragment,{children:[" ",a&&(0,j.jsx)("span",{className:"sr-only",children:a})]})}),(0,j.jsx)("div",{className:r||"flex-item-fluid",children:e})]});const rruleProperties_getEndType=(e,t)=>e&&e>=1?ra.AFTER_N_TIMES:t?ra.UNTIL:ra.NEVER,getMonthType=(e,t)=>{if("string"==typeof e&&!Array.isArray(t)){const{setpos:n}=getDayAndSetpos(e,t);if(n)return n>0?ta.ON_NTH_DAY:ta.ON_MINUS_NTH_DAY}return ta.ON_MONTH_DAY},getUntilDate=(e,t)=>{if(!e)return;if(!e.isUTC||!t){const{year:t,month:n,day:r}=e;return new Date(Date.UTC(t,n-1,r))}const n=vcalConverter_propertyToUTCDate({value:e}),r=(0,fV.Tx)((0,fV.Dn)(n),t);return new Date(Date.UTC(r.year,r.month-1,r.day))},rruleProperties_getWeeklyDays=e=>{if(void 0===e)return[];const t=Array.isArray(e)?e:[e];if(!(e=>!e.some((e=>!getIsStandardByday(e))))(t))return[];const n=t.map(dayToNumericDay).filter((e=>void 0!==e));return(0,xe.Tw)(n)};var Qre,Hre,Xre,Jre,qre,$re,eae,tae,nae,rae,aae,oae,sae,iae,cae,lae,dae,uae,pae,mae,gae,jae,bae,yae,hae,Iae,fae,Mae,Nae,xae,vae,wae,Dae,Sae,Oae,Aae,Cae,Eae,Lae,Pae,Zae,Tae,kae,zae,_ae,Rae,Gae,Yae,Uae,Fae,Kae,Bae,Wae,Vae,Qae,Hae,Xae,Jae,qae,$ae,eoe,toe,noe,roe,aoe,ooe,soe,ioe,coe,loe,doe,uoe,poe,moe,goe,joe,boe,yoe,hoe,Ioe,foe,Moe,Noe,xoe,voe,woe,Doe,Soe,Ooe,Aoe,Coe,Eoe,Loe,Poe,Zoe,Toe,koe,zoe,_oe,Roe,Goe,Yoe,Uoe,Foe,Koe,Boe,Woe,Voe,Qoe,Hoe,Xoe,Joe,qoe,$oe,ese,tse,nse,rse,ase,ose,sse,ise,cse,lse,dse,use,pse,mse,gse,jse,bse,yse;const getOnDayString=(e,t)=>{const n=e.getUTCDate(),r=e.getUTCDay();if(t===ta.ON_NTH_DAY){const t=(e=>{const t=e.getUTCDate()-1;return Math.floor(t/7)+1})(e);if(1===t){if(0===r)return(0,u.c)("Monthly recurring event, repeats on").t(Qre||(Qre=(0,d.Z)(["on the first Sunday"])));if(1===r)return(0,u.c)("Monthly recurring event, repeats on").t(Hre||(Hre=(0,d.Z)(["on the first Monday"])));if(2===r)return(0,u.c)("Monthly recurring event, repeats on").t(Xre||(Xre=(0,d.Z)(["on the first Tuesday"])));if(3===r)return(0,u.c)("Monthly recurring event, repeats on").t(Jre||(Jre=(0,d.Z)(["on the first Wednesday"])));if(4===r)return(0,u.c)("Monthly recurring event, repeats on").t(qre||(qre=(0,d.Z)(["on the first Thursday"])));if(5===r)return(0,u.c)("Monthly recurring event, repeats on").t($re||($re=(0,d.Z)(["on the first Friday"])));if(6===r)return(0,u.c)("Monthly recurring event, repeats on").t(eae||(eae=(0,d.Z)(["on the first Saturday"])))}if(2===t){if(0===r)return(0,u.c)("Monthly recurring event, repeats on").t(tae||(tae=(0,d.Z)(["on the second Sunday"])));if(1===r)return(0,u.c)("Monthly recurring event, repeats on").t(nae||(nae=(0,d.Z)(["on the second Monday"])));if(2===r)return(0,u.c)("Monthly recurring event, repeats on").t(rae||(rae=(0,d.Z)(["on the second Tuesday"])));if(3===r)return(0,u.c)("Monthly recurring event, repeats on").t(aae||(aae=(0,d.Z)(["on the second Wednesday"])));if(4===r)return(0,u.c)("Monthly recurring event, repeats on").t(oae||(oae=(0,d.Z)(["on the second Thursday"])));if(5===r)return(0,u.c)("Monthly recurring event, repeats on").t(sae||(sae=(0,d.Z)(["on the second Friday"])));if(6===r)return(0,u.c)("Monthly recurring event, repeats on").t(iae||(iae=(0,d.Z)(["on the second Saturday"])))}if(3===t){if(0===r)return(0,u.c)("Monthly recurring event, repeats on").t(cae||(cae=(0,d.Z)(["on the third Sunday"])));if(1===r)return(0,u.c)("Monthly recurring event, repeats on").t(lae||(lae=(0,d.Z)(["on the third Monday"])));if(2===r)return(0,u.c)("Monthly recurring event, repeats on").t(dae||(dae=(0,d.Z)(["on the third Tuesday"])));if(3===r)return(0,u.c)("Monthly recurring event, repeats on").t(uae||(uae=(0,d.Z)(["on the third Wednesday"])));if(4===r)return(0,u.c)("Monthly recurring event, repeats on").t(pae||(pae=(0,d.Z)(["on the third Thursday"])));if(5===r)return(0,u.c)("Monthly recurring event, repeats on").t(mae||(mae=(0,d.Z)(["on the third Friday"])));if(6===r)return(0,u.c)("Monthly recurring event, repeats on").t(gae||(gae=(0,d.Z)(["on the third Saturday"])))}if(4===t){if(0===r)return(0,u.c)("Monthly recurring event, repeats on").t(jae||(jae=(0,d.Z)(["on the fourth Sunday"])));if(1===r)return(0,u.c)("Monthly recurring event, repeats on").t(bae||(bae=(0,d.Z)(["on the fourth Monday"])));if(2===r)return(0,u.c)("Monthly recurring event, repeats on").t(yae||(yae=(0,d.Z)(["on the fourth Tuesday"])));if(3===r)return(0,u.c)("Monthly recurring event, repeats on").t(hae||(hae=(0,d.Z)(["on the fourth Wednesday"])));if(4===r)return(0,u.c)("Monthly recurring event, repeats on").t(Iae||(Iae=(0,d.Z)(["on the fourth Thursday"])));if(5===r)return(0,u.c)("Monthly recurring event, repeats on").t(fae||(fae=(0,d.Z)(["on the fourth Friday"])));if(6===r)return(0,u.c)("Monthly recurring event, repeats on").t(Mae||(Mae=(0,d.Z)(["on the fourth Saturday"])))}}if(t===ta.ON_MINUS_NTH_DAY){if(0===r)return(0,u.c)("Monthly recurring event, repeats on").t(Nae||(Nae=(0,d.Z)(["on the last Sunday"])));if(1===r)return(0,u.c)("Monthly recurring event, repeats on").t(xae||(xae=(0,d.Z)(["on the last Monday"])));if(2===r)return(0,u.c)("Monthly recurring event, repeats on").t(vae||(vae=(0,d.Z)(["on the last Tuesday"])));if(3===r)return(0,u.c)("Monthly recurring event, repeats on").t(wae||(wae=(0,d.Z)(["on the last Wednesday"])));if(4===r)return(0,u.c)("Monthly recurring event, repeats on").t(Dae||(Dae=(0,d.Z)(["on the last Thursday"])));if(5===r)return(0,u.c)("Monthly recurring event, repeats on").t(Sae||(Sae=(0,d.Z)(["on the last Friday"])));if(6===r)return(0,u.c)("Monthly recurring event, repeats on").t(Oae||(Oae=(0,d.Z)(["on the last Saturday"])))}return(0,u.c)("Monthly recurring event, repeats on").t(Aae||(Aae=(0,d.Z)(["on day ",""])),n)},getTimesString=e=>(0,u.c)("Daily recurring event, frequency").ngettext((0,u.msgid)(Cae||(Cae=(0,d.Z)([""," time"])),e),"".concat(e," times"),e),getUntilString=e=>(0,u.c)("Daily recurring event, frequency").t(Eae||(Eae=(0,d.Z)(["until ",""])),e),getWeekdayString=e=>{if(0===e)return(0,u.c)("Weekly recurring event, repeats on (multiple days), frequency").t(_ae||(_ae=(0,d.Z)(["Sunday"])));if(1===e)return(0,u.c)("Weekly recurring event, repeats on (multiple days), frequency").t(Rae||(Rae=(0,d.Z)(["Monday"])));if(2===e)return(0,u.c)("Weekly recurring event, repeats on (multiple days), frequency").t(Gae||(Gae=(0,d.Z)(["Tuesday"])));if(3===e)return(0,u.c)("Weekly recurring event, repeats on (multiple days), frequency").t(Yae||(Yae=(0,d.Z)(["Wednesday"])));if(4===e)return(0,u.c)("Weekly recurring event, repeats on (multiple days), frequency").t(Uae||(Uae=(0,d.Z)(["Thursday"])));if(5===e)return(0,u.c)("Weekly recurring event, repeats on (multiple days), frequency").t(Fae||(Fae=(0,d.Z)(["Friday"])));if(6===e)return(0,u.c)("Weekly recurring event, repeats on (multiple days), frequency").t(Kae||(Kae=(0,d.Z)(["Saturday"])));throw new Error("Unknown weekday")},getFrequencyString=(e,t,{weekStartsOn:n,locale:r})=>{const{freq:a,count:o,until:s}=e,i=(e=>{if(!e)return!1;const t=Object.entries(e).filter((([,e])=>void 0!==e)).map((([e])=>e)),{freq:n,count:r,interval:a,until:o,bysetpos:s,byday:i,bymonth:c,bymonthday:l,byyearday:d}=e,u=t.some((e=>!Jee.includes(e)));if(!n||u)return!1;const p=!(a&&1!==a||r||o);return n===Jr.DAILY?!t.some((e=>!$ee.includes(e)))&&p:n===Jr.WEEKLY?!t.some((e=>!ete.includes(e)))&&!isLongArray(i)&&p:n===Jr.MONTHLY?!t.some((e=>!tte.includes(e)))&&!(i||isLongArray(l)||s)&&p:n===Jr.YEARLY&&!t.some((e=>!nte.includes(e)))&&!(isLongArray(l)||isLongArray(c)||d)&&p})(e),c=(e=>{if(!e)return!1;const t=Object.entries(e).filter((([,e])=>void 0!==e)).map((([e])=>e)),{freq:n,count:r,interval:a,until:o,bysetpos:s,byday:i,bymonth:c,bymonthday:l,byyearday:d}=e,u=t.some((e=>!Jee.includes(e)));if(!n||u)return!1;const p=a&&a>1||r&&r>=1||!!o;if(n===Jr.DAILY)return!t.some((e=>!$ee.includes(e)))&&p;if(n===Jr.WEEKLY)return!t.some((e=>!ete.includes(e)))&&(isLongArray(i)||p);if(n===Jr.MONTHLY){if(t.some((e=>!tte.includes(e))))return!1;if(isLongArray(i)||isLongArray(l)||isLongArray(s))return!1;const{setpos:e}=getDayAndSetpos(i,s);return e&&!!i||p}return n===Jr.YEARLY&&!t.some((e=>!nte.includes(e)))&&!(isLongArray(l)||isLongArray(c)||isLongArray(d))&&p})(e),l=(0,fV.uq)(t.value),p=l.getUTCDay(),m={type:rruleProperties_getEndType(o,s),count:o,until:getUntilDate(s,vcalHelper_getPropertyTzid(t))};if(!i){if(!c)return a===Jr.DAILY?(0,u.c)("Info").t(rse||(rse=(0,d.Z)(["Custom daily"]))):a===Jr.WEEKLY?(0,u.c)("Info").t(ase||(ase=(0,d.Z)(["Custom weekly"]))):a===Jr.MONTHLY?(0,u.c)("Info").t(ose||(ose=(0,d.Z)(["Custom monthly"]))):a===Jr.YEARLY?(0,u.c)("Info").t(sse||(sse=(0,d.Z)(["Custom yearly"]))):(0,u.c)("Info").t(ise||(ise=(0,d.Z)(["Custom"])));if(a===Jr.DAILY)return((e,{type:t,count:n=1,until:r},a)=>{const{interval:o=1}=e;if(t===ra.NEVER)return 1===o?(0,u.c)("Daily recurring event, frequency").t(Lae||(Lae=(0,d.Z)(["Daily"]))):(0,u.c)("Daily recurring event, frequency").ngettext((0,u.msgid)(Pae||(Pae=(0,d.Z)(["Every "," day"])),o),"Every ".concat(o," days"),o);if(t===ra.AFTER_N_TIMES){const e=getTimesString(n);return 1===o?(0,u.c)("Daily recurring event, frequency").t(Zae||(Zae=(0,d.Z)(["Daily, ",""])),e):(0,u.c)("Daily recurring event, frequency").ngettext((0,u.msgid)(Tae||(Tae=(0,d.Z)(["Every "," day, ",""])),o,e),"Every ".concat(o," days, ").concat(e),o)}if(t===ra.UNTIL&&r){const e=date_fns_utc_format(r,"PP",{locale:a}),t=getUntilString(e);return 1===o?(0,u.c)("Daily recurring event, frequency").t(kae||(kae=(0,d.Z)(["Daily, ",""])),t):(0,u.c)("Daily recurring event, frequency").ngettext((0,u.msgid)(zae||(zae=(0,d.Z)(["Every "," day, ",""])),o,t),"Every ".concat(o," days, ").concat(t),o)}})(e,m,r);if(a===Jr.WEEKLY)return(({interval:e=1,byday:t},{type:n,count:r=1,until:a},o,s,i)=>{const c=rruleProperties_getWeeklyDays(t),l=(0,xe.Tw)([...c,s.getUTCDay()]).slice().sort(((e,t)=>mod(e-o,7)-mod(t-o,7))).map(getWeekdayString).join(", ");if(n===ra.NEVER){if(7===c.length)return 1===e?(0,u.c)("Weekly recurring event, frequency").t(Bae||(Bae=(0,d.Z)(["Weekly on all days"]))):(0,u.c)("Weekly recurring event, frequency").ngettext((0,u.msgid)(Wae||(Wae=(0,d.Z)(["Every "," week on all days"])),e),"Every ".concat(e," weeks on all days"),e);if(1===c.length){const t=c[0];if(0===t)return 1===e?(0,u.c)("Weekly recurring event, frequency").t(Vae||(Vae=(0,d.Z)(["Weekly on Sunday"]))):(0,u.c)("Weekly recurring event, frequency").ngettext((0,u.msgid)(Qae||(Qae=(0,d.Z)(["Every "," week on Sunday"])),e),"Every ".concat(e," weeks on Sunday"),e);if(1===t)return 1===e?(0,u.c)("Weekly recurring event, frequency").t(Hae||(Hae=(0,d.Z)(["Weekly on Monday"]))):(0,u.c)("Weekly recurring event, frequency").ngettext((0,u.msgid)(Xae||(Xae=(0,d.Z)(["Every "," week on Monday"])),e),"Every ".concat(e," weeks on Monday"),e);if(2===t)return 1===e?(0,u.c)("Weekly recurring event, frequency").t(Jae||(Jae=(0,d.Z)(["Weekly on Tuesday"]))):(0,u.c)("Weekly recurring event, frequency").ngettext((0,u.msgid)(qae||(qae=(0,d.Z)(["Every "," week on Tuesday"])),e),"Every ".concat(e," weeks on Tuesday"),e);if(3===t)return 1===e?(0,u.c)("Weekly recurring event, frequency").t($ae||($ae=(0,d.Z)(["Weekly on Wednesday"]))):(0,u.c)("Weekly recurring event, frequency").ngettext((0,u.msgid)(eoe||(eoe=(0,d.Z)(["Every "," week on Wednesday"])),e),"Every ".concat(e," weeks on Wednesday"),e);if(4===t)return 1===e?(0,u.c)("Weekly recurring event, frequency").t(toe||(toe=(0,d.Z)(["Weekly on Thursday"]))):(0,u.c)("Weekly recurring event, frequency").ngettext((0,u.msgid)(noe||(noe=(0,d.Z)(["Every "," week on Thursday"])),e),"Every ".concat(e," weeks on Thursday"),e);if(5===t)return 1===e?(0,u.c)("Weekly recurring event, frequency").t(roe||(roe=(0,d.Z)(["Weekly on Friday"]))):(0,u.c)("Weekly recurring event, frequency").ngettext((0,u.msgid)(aoe||(aoe=(0,d.Z)(["Every "," week on Friday"])),e),"Every ".concat(e," weeks on Friday"),e);if(6===t)return 1===e?(0,u.c)("Weekly recurring event, frequency").t(ooe||(ooe=(0,d.Z)(["Weekly on Saturday"]))):(0,u.c)("Weekly recurring event, frequency").ngettext((0,u.msgid)(soe||(soe=(0,d.Z)(["Every "," week on Saturday"])),e),"Every ".concat(e," weeks on Saturday"),e)}return 1===e?(0,u.c)("Weekly recurring event, frequency").t(ioe||(ioe=(0,d.Z)(["Weekly on ",""])),l):(0,u.c)("Weekly recurring event, frequency").ngettext((0,u.msgid)(coe||(coe=(0,d.Z)(["Every "," week on ",""])),e,l),"Every ".concat(e," weeks on ").concat(l),e)}if(n===ra.AFTER_N_TIMES){const t=getTimesString(r);if(7===c.length)return 1===e?(0,u.c)("Weekly recurring event, frequency").t(loe||(loe=(0,d.Z)(["Weekly on all days, ",""])),t):(0,u.c)("Weekly recurring event, frequency").ngettext((0,u.msgid)(doe||(doe=(0,d.Z)(["Every "," week on all days, ",""])),e,t),"Every ".concat(e," weeks on all days, ").concat(t),e);if(1===c.length){const n=c[0];if(0===n)return 1===e?(0,u.c)("Weekly recurring event, frequency").t(uoe||(uoe=(0,d.Z)(["Weekly on Sunday, ",""])),t):(0,u.c)("Weekly recurring event, frequency").ngettext((0,u.msgid)(poe||(poe=(0,d.Z)(["Every "," week on Sunday, ",""])),e,t),"Every ".concat(e," weeks on Sunday, ").concat(t),e);if(1===n)return 1===e?(0,u.c)("Weekly recurring event, frequency").t(moe||(moe=(0,d.Z)(["Weekly on Monday, ",""])),t):(0,u.c)("Weekly recurring event, frequency").ngettext((0,u.msgid)(goe||(goe=(0,d.Z)(["Every "," week on Monday, ",""])),e,t),"Every ".concat(e," weeks on Monday, ").concat(t),e);if(2===n)return 1===e?(0,u.c)("Weekly recurring event, frequency").t(joe||(joe=(0,d.Z)(["Weekly on Tuesday, ",""])),t):(0,u.c)("Weekly recurring event, frequency").ngettext((0,u.msgid)(boe||(boe=(0,d.Z)(["Every "," week on Tuesday, ",""])),e,t),"Every ".concat(e," weeks on Tuesday, ").concat(t),e);if(3===n)return 1===e?(0,u.c)("Weekly recurring event, frequency").t(yoe||(yoe=(0,d.Z)(["Weekly on Wednesday, ",""])),t):(0,u.c)("Weekly recurring event, frequency").ngettext((0,u.msgid)(hoe||(hoe=(0,d.Z)(["Every "," week on Wednesday, ",""])),e,t),"Every ".concat(e," weeks on Wednesday, ").concat(t),e);if(4===n)return 1===e?(0,u.c)("Weekly recurring event, frequency").t(Ioe||(Ioe=(0,d.Z)(["Weekly on Thursday, ",""])),t):(0,u.c)("Weekly recurring event, frequency").ngettext((0,u.msgid)(foe||(foe=(0,d.Z)(["Every "," week on Thursday, ",""])),e,t),"Every ".concat(e," weeks on Thursday, ").concat(t),e);if(5===n)return 1===e?(0,u.c)("Weekly recurring event, frequency").t(Moe||(Moe=(0,d.Z)(["Weekly on Friday, ",""])),t):(0,u.c)("Weekly recurring event, frequency").ngettext((0,u.msgid)(Noe||(Noe=(0,d.Z)(["Every "," week on Friday, ",""])),e,t),"Every ".concat(e," weeks on Friday, ").concat(t),e);if(6===n)return 1===e?(0,u.c)("Weekly recurring event, frequency").t(xoe||(xoe=(0,d.Z)(["Weekly on Saturday, ",""])),t):(0,u.c)("Weekly recurring event, frequency").ngettext((0,u.msgid)(voe||(voe=(0,d.Z)(["Every "," week on Saturday, ",""])),e,t),"Every ".concat(e," weeks on Saturday, ").concat(t),e)}return 1===e?(0,u.c)("Weekly recurring event, frequency").t(woe||(woe=(0,d.Z)(["Weekly on ",", ",""])),l,t):(0,u.c)("Weekly recurring event, frequency").ngettext((0,u.msgid)(Doe||(Doe=(0,d.Z)(["Every "," week on ",", ",""])),e,l,t),"Every ".concat(e," weeks on ").concat(l,", ").concat(t),e)}if(n===ra.UNTIL&&a){const t=date_fns_utc_format(a,"PP",{locale:i}),n=getUntilString(t);if(7===c.length)return 1===e?(0,u.c)("Weekly recurring event, frequency").t(Soe||(Soe=(0,d.Z)(["Weekly on all days, ",""])),n):(0,u.c)("Weekly recurring event, frequency").ngettext((0,u.msgid)(Ooe||(Ooe=(0,d.Z)(["Every "," week on all days, ",""])),e,n),"Every ".concat(e," weeks on all days, ").concat(n),e);if(1===c.length){const t=c[0];if(0===t)return 1===e?(0,u.c)("Weekly recurring event, frequency").t(Aoe||(Aoe=(0,d.Z)(["Weekly on Sunday, ",""])),n):(0,u.c)("Weekly recurring event, frequency").ngettext((0,u.msgid)(Coe||(Coe=(0,d.Z)(["Every "," week on Sunday, ",""])),e,n),"Every ".concat(e," weeks on Sunday, ").concat(n),e);if(1===t)return 1===e?(0,u.c)("Weekly recurring event, frequency").t(Eoe||(Eoe=(0,d.Z)(["Weekly on Monday, ",""])),n):(0,u.c)("Weekly recurring event, frequency").ngettext((0,u.msgid)(Loe||(Loe=(0,d.Z)(["Every "," week on Monday, ",""])),e,n),"Every ".concat(e," weeks on Monday, ").concat(n),e);if(2===t)return 1===e?(0,u.c)("Weekly recurring event, frequency").t(Poe||(Poe=(0,d.Z)(["Weekly on Tuesday, ",""])),n):(0,u.c)("Weekly recurring event, frequency").ngettext((0,u.msgid)(Zoe||(Zoe=(0,d.Z)(["Every "," week on Tuesday, ",""])),e,n),"Every ".concat(e," weeks on Tuesday, ").concat(n),e);if(3===t)return 1===e?(0,u.c)("Weekly recurring event, frequency").t(Toe||(Toe=(0,d.Z)(["Weekly on Wednesday, ",""])),n):(0,u.c)("Weekly recurring event, frequency").ngettext((0,u.msgid)(koe||(koe=(0,d.Z)(["Every "," week on Wednesday, ",""])),e,n),"Every ".concat(e," weeks on Wednesday, ").concat(n),e);if(4===t)return 1===e?(0,u.c)("Weekly recurring event, frequency").t(zoe||(zoe=(0,d.Z)(["Weekly on Thursday, ",""])),n):(0,u.c)("Weekly recurring event, frequency").ngettext((0,u.msgid)(_oe||(_oe=(0,d.Z)(["Every "," week on Thursday, ",""])),e,n),"Every ".concat(e," weeks on Thursday, ").concat(n),e);if(5===t)return 1===e?(0,u.c)("Weekly recurring event, frequency").t(Roe||(Roe=(0,d.Z)(["Weekly on Friday, ",""])),n):(0,u.c)("Weekly recurring event, frequency").ngettext((0,u.msgid)(Goe||(Goe=(0,d.Z)(["Every "," week on Friday, ",""])),e,n),"Every ".concat(e," weeks on Friday, ").concat(n),e);if(6===t)return 1===e?(0,u.c)("Weekly recurring event, frequency").t(Yoe||(Yoe=(0,d.Z)(["Weekly on Saturday, ",""])),n):(0,u.c)("Weekly recurring event, frequency").ngettext((0,u.msgid)(Uoe||(Uoe=(0,d.Z)(["Every "," week on Saturday, ",""])),e,n),"Every ".concat(e," weeks on Saturday, ").concat(n),e)}return 1===e?(0,u.c)("Weekly recurring event, frequency").t(Foe||(Foe=(0,d.Z)(["Weekly on ",", ",""])),l,n):(0,u.c)("Weekly recurring event, frequency").ngettext((0,u.msgid)(Koe||(Koe=(0,d.Z)(["Every "," week on ",", ",""])),e,l,n),"Every ".concat(e," weeks on ").concat(l,", ").concat(n),e)}})(e,m,n,l,r);if(a===Jr.MONTHLY){const{byday:t,bysetpos:n}=e;return((e,{type:t,count:n=1,until:r},a,o,s)=>{const{interval:i=1}=e,c=o?getOnDayString(o,a):"";if(t===ra.NEVER)return 1===i?(0,u.c)("Monthly recurring event, frequency").t(Boe||(Boe=(0,d.Z)(["Monthly ",""])),c):(0,u.c)("Monthly recurring event, frequency").ngettext((0,u.msgid)(Woe||(Woe=(0,d.Z)(["Every "," month ",""])),i,c),"Every ".concat(i," months ").concat(c),i);if(t===ra.AFTER_N_TIMES){const e=getTimesString(n);return 1===i?(0,u.c)("Monthly recurring event, frequency").t(Voe||(Voe=(0,d.Z)(["Monthly ",", ",""])),c,e):(0,u.c)("Monthly recurring event, frequency").ngettext((0,u.msgid)(Qoe||(Qoe=(0,d.Z)(["Every "," month ",", ",""])),i,c,e),"Every ".concat(i," months ").concat(c,", ").concat(e),i)}if(t===ra.UNTIL&&r){const e=date_fns_utc_format(r,"PP",{locale:s}),t=getUntilString(e);return 1===i?(0,u.c)("Monthly recurring event, frequency").t(Hoe||(Hoe=(0,d.Z)(["Monthly ",", ",""])),c,t):(0,u.c)("Monthly recurring event, frequency").ngettext((0,u.msgid)(Xoe||(Xoe=(0,d.Z)(["Every "," month ",", ",""])),i,c,t),"Every ".concat(i," months ").concat(c,", ").concat(t),i)}})(e,m,getMonthType(t,n),l,r)}if(a===Jr.YEARLY)return(({interval:e=1},{type:t,count:n=1,until:r},a)=>{if(t===ra.NEVER)return 1===e?(0,u.c)("Yearly recurring event, frequency").t(Joe||(Joe=(0,d.Z)(["Yearly"]))):(0,u.c)("Yearly recurring event, frequency").ngettext((0,u.msgid)(qoe||(qoe=(0,d.Z)(["Every "," year"])),e),"Every ".concat(e," years"),e);if(t===ra.AFTER_N_TIMES){const t=getTimesString(n);return 1===e?(0,u.c)("Yearly recurring event, frequency").t($oe||($oe=(0,d.Z)(["Yearly, ",""])),t):(0,u.c)("Yearly recurring event, frequency").ngettext((0,u.msgid)(ese||(ese=(0,d.Z)(["Every "," year, ",""])),e,t),"Every ".concat(e," years, ").concat(t),e)}if(t===ra.UNTIL&&r){const t=date_fns_utc_format(r,"PP",{locale:a}),n=getUntilString(t);return 1===e?(0,u.c)("Yearly recurring event, frequency").t(tse||(tse=(0,d.Z)(["Yearly, ",""])),n):(0,u.c)("Yearly recurring event, frequency").ngettext((0,u.msgid)(nse||(nse=(0,d.Z)(["Every "," year, ",""])),e,n),"Every ".concat(e," years, ").concat(n),e)}})(e,m,r)}if(a===Jr.DAILY)return(0,u.c)("Info").t(cse||(cse=(0,d.Z)(["Daily"])));if(a===Jr.WEEKLY){if(0===p)return(0,u.c)("Weekly recurring event, frequency").t(lse||(lse=(0,d.Z)(["Weekly on Sunday"])));if(1===p)return(0,u.c)("Weekly recurring event, frequency").t(dse||(dse=(0,d.Z)(["Weekly on Monday"])));if(2===p)return(0,u.c)("Weekly recurring event, frequency").t(use||(use=(0,d.Z)(["Weekly on Tuesday"])));if(3===p)return(0,u.c)("Weekly recurring event, frequency").t(pse||(pse=(0,d.Z)(["Weekly on Wednesday"])));if(4===p)return(0,u.c)("Weekly recurring event, frequency").t(mse||(mse=(0,d.Z)(["Weekly on Thursday"])));if(5===p)return(0,u.c)("Weekly recurring event, frequency").t(gse||(gse=(0,d.Z)(["Weekly on Friday"])));if(6===p)return(0,u.c)("Weekly recurring event, frequency").t(jse||(jse=(0,d.Z)(["Weekly on Saturday"])))}if(a===Jr.MONTHLY){const{byday:t,bysetpos:n}=e,r=getMonthType(t,n),a=getOnDayString(l,r);return(0,u.c)("Info").t(bse||(bse=(0,d.Z)(["Monthly ",""])),a)}return a===Jr.YEARLY?(0,u.c)("Info").t(yse||(yse=(0,d.Z)(["Yearly"]))):""};var hse;var Ise,fse,Mse,calendar_ExtraEventParticipant=({participant:e,isOrganizer:t=!1})=>{const{displayEmail:n,displayName:r}=e,a=r!==n?"".concat(r," <").concat(n,">"):n;return(0,j.jsxs)("div",{className:(0,ht.dh)(["text-ellipsis",t&&"mb0-25"]),children:[t&&(0,j.jsx)("span",{className:"mr0-25",children:(0,u.c)("ICS widget label for event details").t(hse||(hse=(0,d.Z)(["Organizer:"])))}),(0,j.jsx)("a",{href:(0,Xe.F$)(n),title:a,children:a})]})};var calendar_ExtraEventParticipants=({list:e})=>{const[t,n]=(0,o.useState)(!1),[r,...a]=e,s=a.length,toggleShowMore=()=>n((e=>!e));return s<=1?(0,j.jsx)(j.Fragment,{children:e.map(((e,t)=>(0,j.jsx)(calendar_ExtraEventParticipant,{participant:e,isOrganizer:0===t},e.emailAddress)))}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(calendar_ExtraEventParticipant,{participant:r,isOrganizer:!0}),!t&&(0,j.jsxs)("div",{className:"flex flex-align-items-center",children:[(0,j.jsx)("span",{className:"mr0-5",children:(0,u.c)("ICS widget label for event details").ngettext((0,u.msgid)(Ise||(Ise=(0,d.Z)([""," participant"])),s),"".concat(s," participants"),s)}),(0,j.jsx)(Jd.Z,{onClick:toggleShowMore,children:(0,u.c)("Action").t(fse||(fse=(0,d.Z)(["Show"])))})]}),t&&a.map((e=>(0,j.jsx)(calendar_ExtraEventParticipant,{participant:e},e.emailAddress))),t&&(0,j.jsx)("div",{children:(0,j.jsx)(Jd.Z,{onClick:toggleShowMore,children:(0,u.c)("Action").t(Mse||(Mse=(0,d.Z)(["Show less"])))})})]})};const{REFRESH:Nse,REPLY:xse}=Zr;var calendar_ExtraEventDetails=({model:e,weekStartsOn:t})=>{var n,r;const{isImport:a,hasMultipleVevents:s,calendarData:i,invitationIcs:c,invitationIcs:{method:l},invitationApi:d}=e,u=[Nse,xse].includes(l),{vevent:p,organizer:m,participants:g}=d&&u?d:c,{rrule:b,dtstart:y}=p,h=null===(n=p.location)||void 0===n||null===(r=n.value)||void 0===r?void 0:r.trim(),I=(0,o.useMemo)((()=>restrictedCalendarSanitize(calendar_urlify(h||""))),[h]),f=b?getFrequencyString(b.value,y,{weekStartsOn:t,locale:kt.RW}):void 0,M=null==i?void 0:i.calendar,N=getParticipantsList(g,m);return a&&s?null:(0,j.jsxs)("div",{className:"p1-5",children:[!!f&&(0,j.jsx)(iconRow_IconRow,{icon:"arrows-rotate",labelClassName:"inline-flex pt0-25",children:f}),!!M&&(0,j.jsx)(iconRow_IconRow,{icon:(0,j.jsx)(calendarSelect_CalendarSelectIcon,{color:M.Color}),labelClassName:"inline-flex pt0-25",children:M.Name}),!!h&&(0,j.jsx)(iconRow_IconRow,{icon:"map-marker",labelClassName:"inline-flex pt0-25",children:(0,j.jsx)("span",{dangerouslySetInnerHTML:{__html:I}})}),!!N.length&&(0,j.jsx)(iconRow_IconRow,{icon:"user-group",labelClassName:"inline-flex pt0-25",children:(0,j.jsx)(calendar_ExtraEventParticipants,{list:N})})]})};var text_EnDash=()=>(0,j.jsx)("span",{className:"ml0-5 mr0-5",children:"–"});const vse=["startDate","endDate","isAllDay","formatDate","formatTime","hasFakeUtcDates","hasModifiedAllDayEndDate","formatOptions"];function CalendarEventDateHeader_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function CalendarEventDateHeader_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CalendarEventDateHeader_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CalendarEventDateHeader_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wse,calendarEventDateHeader_CalendarEventDateHeader=e=>{let{startDate:t,endDate:n,isAllDay:r,formatDate:a,formatTime:o,hasFakeUtcDates:s=!1,hasModifiedAllDayEndDate:i=!1,formatOptions:c}=e,l=(0,Sn.Z)(e,vse);const d=c||{locale:kt.RW},formatDate=e=>a?a(e):s?date_fns_utc_format(e,"ccc, PP",d):(0,Et.Z)(e,"ccc, PP",d),u=formatDate(t),p=formatDate(r&&!i?date_fns_utc_addDays(n,-1):n);if(r)return u===p?(0,j.jsx)("div",CalendarEventDateHeader_objectSpread(CalendarEventDateHeader_objectSpread({},l),{},{children:u})):(0,j.jsxs)("div",CalendarEventDateHeader_objectSpread(CalendarEventDateHeader_objectSpread({},l),{},{children:[u,(0,j.jsx)(text_EnDash,{}),p]}));const[m,g]=[t,n].map((e=>(e=>o?o(e):s?date_fns_utc_format(e,"p",d):(0,Et.Z)(e,"p",d))(e)));return u===p?(0,j.jsxs)("div",CalendarEventDateHeader_objectSpread(CalendarEventDateHeader_objectSpread({},l),{},{children:[u,", ",(0,j.jsxs)("span",{className:"inline-block",children:[m,(0,j.jsx)(text_EnDash,{}),g]})]})):(0,j.jsxs)("div",CalendarEventDateHeader_objectSpread(CalendarEventDateHeader_objectSpread({},l),{},{children:[u," ",m,(0,j.jsx)(text_EnDash,{}),p," ",g]}))};const{DECLINECOUNTER:Dse,REPLY:Sse,REFRESH:Ose}=Zr;var Ase,Cse,Ese,Lse,Pse,Zse,Tse,kse,zse,_se,Rse,Gse,Yse,Use,Fse,Kse,Bse,Wse,Vse,Qse,Hse,Xse,Jse,qse,$se,eie,tie,nie,rie,aie,oie,sie,iie,cie,lie,die,uie,pie,mie,gie,jie,bie,yie,hie,Iie,fie,Mie,Nie,xie,vie,wie,Die,Sie,Oie,Aie,Cie,Eie,Lie,Pie,Zie,Tie,kie,zie,calendar_ExtraEventHeader=({model:e})=>{const{invitationIcs:t,invitationIcs:{method:n,attendee:r},invitationApi:a,isOutdated:o,isPartyCrasher:s,isImport:i,hasMultipleVevents:c}=e,l=[Ose,Dse,Sse].includes(n),{vevent:p}=a&&l?a:t,{dtstart:m,summary:g}=p,b=getDtendProperty(p),y=vcalHelper_getIsPropertyAllDay(m),h=propertyToLocalDate(m),I=propertyToLocalDate(b),f=i&&c?(null==t?void 0:t.fileName)||"":helper_getDisplayTitle(null==g?void 0:g.value),M=n===Zr.REQUEST&&!o&&!s&&!i&&(null==r?void 0:r.role)===Rr.OPTIONAL?(0,u.c)("Calendar invite info").t(wse||(wse=(0,d.Z)(["(Attendance optional)"]))):null;return(0,j.jsxs)("div",{className:"mb0-75",children:[(0,j.jsx)("div",{className:"h3 mb0-25 text-bold",children:f}),!c&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(calendarEventDateHeader_CalendarEventDateHeader,{className:"text-lg",startDate:h,endDate:I,isAllDay:y,"data-testid":"extra-event-date-header"}),M&&(0,j.jsx)("div",{className:"text-sm color-weak",children:M})]})]})};const{REPLY:_ie,COUNTER:Rie,REFRESH:Gie,REQUEST:Yie,CANCEL:Uie,ADD:Fie}=Zr,{NEEDS_ACTION:Kie,ACCEPTED:Bie,TENTATIVE:Wie,DECLINED:Vie}=Gr,{CANCELLED:Qie}=zr,{KEEP_PARTSTAT:Hie,RESET_PARTSTAT:Xie}=ane;var Jie,qie,$ie,ece,tce,nce,rce,ace,oce,calendar_ExtraEventSummary=({model:e})=>{const{isImport:t,hideSummary:n,isOrganizerMode:r,isPartyCrasher:a}=e,o=r?(e=>{const{invitationIcs:{method:t,attendee:n,vevent:r},invitationApi:a,hasNoCalendars:o,hasDecryptionError:s,isOutdated:i,isFromFuture:c}=e,l=!!r["recurrence-id"];if(t===_ie){if(null==n||!n.partstat)return;const{partstat:e}=n,t=n.displayName;if(!a){if(o)return(0,u.c)("Calendar invite info").t(Ese||(Ese=(0,d.Z)(["This response is out of date. You have no calendars."])));if(s){if(e===Bie)return(0,u.c)("Calendar invite info").t(Lse||(Lse=(0,d.Z)([""," accepted your invitation."])),t);if(e===Vie)return(0,u.c)("Calendar invite info").t(Pse||(Pse=(0,d.Z)([""," declined your invitation."])),t);if(e===Wie)return(0,u.c)("Calendar invite info").t(Zse||(Zse=(0,d.Z)([""," tentatively accepted your invitation."])),t)}return(0,u.c)("Calendar invite info").t(Tse||(Tse=(0,d.Z)(["This response is out of date. The event does not exist in your calendar anymore."])))}if(c)return(0,u.c)("Calendar invite info").t(kse||(kse=(0,d.Z)([" This response doesn't match your invitation details. Please verify the invitation details in your calendar."])));if(!i){if(e===Bie)return l?(0,u.c)("Calendar invite info").t(zse||(zse=(0,d.Z)([""," accepted your invitation to one occurrence of the event."])),t):(0,u.c)("Calendar invite info").t(_se||(_se=(0,d.Z)([""," accepted your invitation."])),t);if(e===Vie)return l?(0,u.c)("Calendar invite info").t(Rse||(Rse=(0,d.Z)([""," declined your invitation to one occurrence of the event."])),t):(0,u.c)("Calendar invite info").t(Gse||(Gse=(0,d.Z)([""," declined your invitation."])),t);if(e===Wie)return l?(0,u.c)("Calendar invite info").t(Yse||(Yse=(0,d.Z)([""," tentatively accepted your invitation to one occurrence of the event."])),t):(0,u.c)("Calendar invite info").t(Use||(Use=(0,d.Z)([""," tentatively accepted your invitation."])),t)}if(e===Bie)return l?(0,u.c)("Calendar invite info").t(Fse||(Fse=(0,d.Z)([""," had previously accepted your invitation to one occurrence of the event."])),t):(0,u.c)("Calendar invite info").t(Kse||(Kse=(0,d.Z)([""," had previously accepted your invitation."])),t);if(e===Vie)return l?(0,u.c)("Calendar invite info").t(Bse||(Bse=(0,d.Z)([""," had previously declined your invitation to one occurrence of the event."])),t):(0,u.c)("Calendar invite info").t(Wse||(Wse=(0,d.Z)([""," had previously declined your invitation."])),t);if(e===Wie)return l?(0,u.c)("Calendar invite info").t(Vse||(Vse=(0,d.Z)([""," had previously tentatively accepted your invitation to one occurrence of the event."])),t):(0,u.c)("Calendar invite info").t(Qse||(Qse=(0,d.Z)([""," had previously tentatively accepted your invitation."])),t)}return t===Rie&&n?(()=>{const{displayName:e,partstat:t}=n,r=t&&[Bie,Wie,Vie].includes(t);if(!a){if(o)return l?(0,u.c)("Calendar invite info").t(Hse||(Hse=(0,d.Z)([""," had proposed a new time for one occurrence of this event. This proposal is out of date. You have no calendars."])),e):(0,u.c)("Calendar invite info").t(Xse||(Xse=(0,d.Z)([""," had proposed a new time for this event. This proposal is out of date. You have no calendars."])),e);if(s){if(r){if(t===Bie)return l?(0,u.c)("Calendar invite info").t(Jse||(Jse=(0,d.Z)([""," accepted your invitation and proposed a new time for one occurrence of this event."])),e):(0,u.c)("Calendar invite info").t(qse||(qse=(0,d.Z)([""," accepted your invitation and proposed a new time for this event."])),e);if(t===Vie)return l?(0,u.c)("Calendar invite info").t($se||($se=(0,d.Z)([""," declined your invitation and proposed a new time for one occurrence of this event."])),e):(0,u.c)("Calendar invite info").t(eie||(eie=(0,d.Z)([""," declined your invitation and proposed a new time for this event."])),e);if(t===Wie)return l?(0,u.c)("Calendar invite info").t(tie||(tie=(0,d.Z)([""," tentatively accepted your invitation and proposed a new time for one occurrence of this event."])),e):(0,u.c)("Calendar invite info").t(nie||(nie=(0,d.Z)([""," tentatively accepted your invitation and proposed a new time for this event."])),e)}return l?(0,u.c)("Calendar invite info").t(rie||(rie=(0,d.Z)([""," proposed a new time for one occurrence of this event."])),e):(0,u.c)("Calendar invite info").t(aie||(aie=(0,d.Z)([""," proposed a new time for this event."])),e)}return l?(0,u.c)("Calendar invite info").t(oie||(oie=(0,d.Z)([""," had proposed a new time for one occurrence of this event. This proposal is out of date. The event does not exist in your calendar anymore."])),e):(0,u.c)("Calendar invite info").t(sie||(sie=(0,d.Z)([""," had proposed a new time for this event. This proposal is out of date. The event does not exist in your calendar anymore."])),e)}if(c)return(0,u.c)("Calendar invite info").t(iie||(iie=(0,d.Z)([" This new time proposal doesn't match your invitation details. Please verify the invitation details in your calendar."])));if(i){if(r){if(t===Bie)return l?(0,u.c)("Calendar invite info").t(cie||(cie=(0,d.Z)([""," had accepted your invitation and proposed a new time for one occurrence of this event. Answer and proposal are out of date."])),e):(0,u.c)("Calendar invite info").t(lie||(lie=(0,d.Z)([""," had accepted your invitation and proposed a new time for this event. Answer and proposal are out of date."])),e);if(t===Vie)return l?(0,u.c)("Calendar invite info").t(die||(die=(0,d.Z)([""," had declined your invitation and proposed a new time for one occurrence of this event. Answer and proposal are out of date."])),e):(0,u.c)("Calendar invite info").t(uie||(uie=(0,d.Z)([""," had declined your invitation and proposed a new time for this event. Answer and proposal are out of date."])),e);if(t===Wie)return l?(0,u.c)("Calendar invite info").t(pie||(pie=(0,d.Z)([""," had tentatively accepted your invitation and proposed a new time for one occurrence of this event. Answer and proposal are out of date."])),e):(0,u.c)("Calendar invite info").t(mie||(mie=(0,d.Z)([""," had tentatively accepted your invitation and proposed a new time for this event. Answer and proposal are out of date."])),e)}return l?(0,u.c)("Calendar invite info").t(gie||(gie=(0,d.Z)([""," had proposed a new time for one occurrence of this event. This proposal is out of date."])),e):(0,u.c)("Calendar invite info").t(jie||(jie=(0,d.Z)([""," had proposed a new time for this event. This proposal is out of date."])),e)}if(r){if(t===Bie)return l?(0,u.c)("Calendar invite info").t(bie||(bie=(0,d.Z)([""," accepted your invitation and proposed a new time for one occurrence of this event."])),e):(0,u.c)("Calendar invite info").t(yie||(yie=(0,d.Z)([""," accepted your invitation and proposed a new time for this event."])),e);if(t===Vie)return l?(0,u.c)("Calendar invite info").t(hie||(hie=(0,d.Z)([""," declined your invitation and proposed a new time for one occurrence of this event."])),e):(0,u.c)("Calendar invite info").t(Iie||(Iie=(0,d.Z)([""," declined your invitation and proposed a new time for this event."])),e);if(t===Wie)return l?(0,u.c)("Calendar invite info").t(fie||(fie=(0,d.Z)([""," tentatively accepted your invitation and proposed a new time for one occurrence of this event."])),e):(0,u.c)("Calendar invite info").t(Mie||(Mie=(0,d.Z)([""," tentatively accepted your invitation and proposed a new time for this event."])),e)}return l?(0,u.c)("Calendar invite info").t(Nie||(Nie=(0,d.Z)([""," proposed a new time for one occurrence of this event."])),e):(0,u.c)("Calendar invite info").t(xie||(xie=(0,d.Z)([""," proposed a new time for this event."])),e)})():t===Gie&&n?(()=>{const{displayName:e}=n;return a?(0,u.c)("Calendar invite info").t(Sie||(Sie=(0,d.Z)([""," asked for the latest event updates."])),e):o?(0,u.c)("Calendar invite info").t(vie||(vie=(0,d.Z)([""," asked for the latest updates to an event which does not exist anymore. You have no calendars."])),e):s?(0,u.c)("Calendar invite info").t(wie||(wie=(0,d.Z)([""," asked for the latest event updates."])),e):(0,u.c)("Calendar invite info").t(Die||(Die=(0,d.Z)([""," asked for the latest updates to an event which does not exist in your calendar anymore."])),e)})():void 0})(e):(e=>{var t;const{invitationIcs:n,invitationApi:r,isOutdated:a}=e,{method:o,attendee:s,vevent:i}=n,{vevent:c,attendee:l}=r||{},p=helper_getDisplayTitle(null===(t=i.summary)||void 0===t?void 0:t.value);if(o===Yie){if(a)return c&&getEventStatus(c)===Qie?(0,u.c)("Calendar invite info").t(Oie||(Oie=(0,d.Z)(["This invitation is out of date. The event has been canceled."]))):(0,u.c)("Calendar invite info").t(Aie||(Aie=(0,d.Z)(["This invitation is out of date. The event has been updated."])));const e=l||s,t=c&&(null==e?void 0:e.partstat)||Kie;if(t===Bie)return(0,u.c)("Calendar invite info").t(Cie||(Cie=(0,d.Z)(["You already accepted this invitation."])));if(t===Wie)return(0,u.c)("Calendar invite info").t(Eie||(Eie=(0,d.Z)(["You already tentatively accepted this invitation."])));if(t===Vie)return(0,u.c)("Calendar invite info").t(Lie||(Lie=(0,d.Z)(["You already declined this invitation."])))}return o===Uie?(0,u.c)("Calendar invite info").t(Pie||(Pie=(0,d.Z)(["This event has been canceled."]))):o===Fie?c?a?getEventStatus(c)===Qie?(0,u.c)("Calendar invite info").t(Tie||(Tie=(0,d.Z)(["This invitation is out of date. The event has been canceled."]))):(0,u.c)("Calendar invite info").t(kie||(kie=(0,d.Z)(["This invitation is out of date. The event has been updated."]))):(0,u.c)("Calendar invite info").t(zie||(zie=(0,d.Z)(["An occurrence has been added to the event ",""])),p):(0,u.c)("Calendar invite info").t(Zie||(Zie=(0,d.Z)(["This invitation is out of date. The event has been deleted."]))):void 0})(e),s=(e=>{var t;const{invitationIcs:n,invitationApi:r,isOutdated:a,isFromFuture:o,updateAction:s}=e,{method:i}=n;if(!o)return i===_ie&&r&&null!==(t=n.attendee)&&void 0!==t&&t.partstat&&a?(0,u.c)("Calendar invite info").t(Ase||(Ase=(0,d.Z)(["This response is out of date. This event has been updated."]))):i===Yie&&!a&&s&&[Hie,Xie].includes(s)?(0,u.c)("Calendar invite info").t(Cse||(Cse=(0,d.Z)(["This event has been updated."]))):void 0})(e);return t||n||a||!o?null:((e,t)=>{if(!e&&!t)return null;const n=e&&t?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("span",{children:e}),(0,j.jsx)("span",{children:t})]}):(0,j.jsx)("span",{children:e||t});return(0,j.jsx)("div",{className:"mt0-5 mb0-5 rounded bordered bg-weak p0-5 flex flex-column text-break",children:n})})(s,o)};const sce=(0,Or.PO)(M.ei.PROTONCALENDAR);var calendar_ExtraEventWarning=({model:e})=>{const{isImport:t,isOrganizerMode:n,invitationIcs:{method:r,vevent:a},invitationApi:o,hasDecryptionError:s,isOutdated:i,isFromFuture:c,timeStatus:l,isPartyCrasher:p,hasMultipleVevents:m}=e,g="mt0-5 mb0-5";if(p&&!t){const e=n?(0,u.c)("Calendar invite info").t(Jie||(Jie=(0,d.Z)(["The sender of this email has not been invited to this event and cannot be added as a participant"]))):(0,u.c)("Calendar invite info").t(qie||(qie=(0,d.Z)(["Your email address is not in the participants list"])));return(0,j.jsx)(Cn.Z,{className:g,type:"warning",children:e})}if((i||c)&&r!==Zr.REFRESH)return null;if(n){if(!o&&!s)return null;if(r===Zr.REFRESH)return(0,j.jsx)(Cn.Z,{className:g,type:"warning",children:(0,u.c)("Calendar invite info").t($ie||($ie=(0,d.Z)(["Event refreshing is not supported for the moment"])))});if(r===Zr.COUNTER)return(0,j.jsxs)(j.Fragment,{children:[a["recurrence-id"]&&(0,j.jsx)(Cn.Z,{className:g,type:"warning",children:(0,u.c)("Calendar invite info").t(ece||(ece=(0,d.Z)(["This answer cannot be added to "," as we only support answers to all events of a series for the moment"])),sce)}),(0,j.jsx)(Cn.Z,{className:g,type:"warning",children:(0,u.c)("Calendar invite info").t(tce||(tce=(0,d.Z)(["Event rescheduling is not supported for the moment"])))})]});if(r===Zr.REPLY&&a["recurrence-id"])return(0,j.jsx)(Cn.Z,{className:g,type:"warning",children:(0,u.c)("Calendar invite info").t(nce||(nce=(0,d.Z)(["This answer cannot be added to "," as we only support answers to all events of a series for the moment"])),sce)})}return r===Zr.ADD&&o?(0,j.jsx)(Cn.Z,{className:g,type:"warning",children:(0,u.c)("Calendar invite info").t(rce||(rce=(0,d.Z)(["Adding occurrences to an event is not supported for the moment"])))}):m?null:l===rne.PAST?(0,j.jsx)(Cn.Z,{className:g,type:"warning",children:(0,u.c)("Calendar invite info").t(ace||(ace=(0,d.Z)(["Event already ended"])))}):l===rne.HAPPENING?(0,j.jsx)(Cn.Z,{className:g,type:"warning",children:(0,u.c)("Calendar invite info").t(oce||(oce=(0,d.Z)(["Event in progress"])))}):null};var ice,calendar_EmailReminderWidgetSkeleton=()=>(0,j.jsx)("div",{"data-testid":"calendar-widget-widget-skeleton",children:(0,j.jsxs)("div",{className:"bg-norm rounded bordered",children:[(0,j.jsxs)("div",{className:"p1-5",children:[(0,j.jsx)("div",{className:"h3 mb0-25 calendar-widget-skeleton calendar-widget-skeleton--title"}),(0,j.jsx)("p",{className:"text-sm mt0 mb1-5 calendar-widget-skeleton calendar-widget-skeleton--date"}),(0,j.jsx)("div",{className:"calendar-widget-skeleton calendar-widget-skeleton--link"})]}),(0,j.jsx)("hr",{className:"mt0-75 mb0"}),(0,j.jsx)("div",{className:"p1-5",children:(0,j.jsx)(iconRow_IconRow,{icon:(0,j.jsx)("div",{className:"calendar-select-color calendar-widget-skeleton calendar-widget-skeleton--icon p0"}),labelClassName:"inline-flex pt0-25",children:(0,j.jsx)("div",{className:"calendar-widget-skeleton calendar-widget-skeleton--details"})})})]})});function ExtraEvent_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ExtraEvent_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ExtraEvent_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ExtraEvent_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const{DECRYPTION_ERROR:cce,FETCHING_ERROR:lce,UPDATING_ERROR:dce,CANCELLATION_ERROR:uce,EVENT_CREATION_ERROR:pce,EVENT_UPDATE_ERROR:mce}=yee;var calendar_ExtraEvent=({invitationOrError:e,message:t,calendars:n,defaultCalendar:r,canCreateCalendar:a,maxUserCalendarsDisabled:s,mustReactivateCalendars:i,contactEmails:c,ownAddresses:l,userSettings:p})=>{const[m,g]=(0,o.useState)((()=>getInitialInvitationModel({invitationOrError:e,message:t,contactEmails:c,ownAddresses:l,calendar:r,hasNoCalendars:0===n.length,canCreateCalendar:a,maxUserCalendarsDisabled:s,mustReactivateCalendars:i}))),[b,y]=(0,no.Z)(!0),[h,I]=(0,o.useState)(0),f=(0,Dn.Z)(),M=hooks_useCalendarEmailNotificationsFeature(),N=hooks_useGetCalendarInfo(),x=hooks_useGetCalendarEventRaw(),v=hooks_useGetCalendarEventPersonal(),w=useGetCanonicalEmailsMap(),handleRetry=()=>{I((e=>e+1)),g(getInitialInvitationModel({invitationOrError:e,message:t,contactEmails:c,ownAddresses:l,calendar:r,hasNoCalendars:0===n.length,canCreateCalendar:a,maxUserCalendarsDisabled:s,mustReactivateCalendars:i}))},{isOrganizerMode:D,invitationIcs:S,isPartyCrasher:O,pmData:A}=m;if((0,o.useEffect)((()=>{let e=!1;return y((async()=>{if(null==S||!S.vevent)return;let a,o,s,i,d,u,p=O;const j=S;try{const{invitation:I,parentInvitation:M,calendarData:w,singleEditData:O,hasDecryptionError:A,supportedRecurrenceId:C}=await fetchEventInvitation({veventComponent:S.vevent,api:f,getCalendarInfo:N,getCalendarEventRaw:x,getCalendarEventPersonal:v,calendars:n,defaultCalendar:r,message:t,contactEmails:c,ownAddresses:l});var b,y,h;if(a=I,s=w,d=O,i=A,getIsReinvite({invitationIcs:S,invitationApi:a,isOrganizerMode:D}))u=null===(b=a)||void 0===b?void 0:b.calendarEvent.ID,null===(y=a)||void 0===y||(null===(h=y.attendee)||void 0===h||delete h.partstat);const E=getIsInvitationOutdated({invitationIcs:S,invitationApi:a,isOrganizerMode:D}),L=getIsInvitationFromFuture({invitationIcs:S,invitationApi:a,isOrganizerMode:D});M&&(o=M),C&&(j.vevent["recurrence-id"]=C),D&&I&&(p=!I.attendee),e||g(ExtraEvent_objectSpread(ExtraEvent_objectSpread({},m),{},{invitationIcs:j,invitationApi:a,parentInvitationApi:o,isOutdated:E,isFromFuture:L,reinviteEventID:u,calendarData:s,singleEditData:d,hasDecryptionError:i,isPartyCrasher:p}))}catch(e){return}var I;if(a&&void 0!==(null===(I=a.calendarEvent)||void 0===I?void 0:I.ID)&&getHasFullCalendarData(s)&&!s.calendarNeedsUserAction&&!e)try{const{action:n,invitation:r}=await updateEventInvitation({isOrganizerMode:D,invitationIcs:j,invitationApi:a,api:f,getCanonicalEmailsMap:w,calendarData:s,singleEditData:d,pmData:A,message:t,contactEmails:c,ownAddresses:l,overwrite:!!i,enabledEmailNotifications:M}),b=r||a,y=n===ane.NONE&&getIsInvitationOutdated({invitationIcs:j,invitationApi:b,isOrganizerMode:D}),h=getIsInvitationFromFuture({invitationIcs:j,invitationApi:b,isOrganizerMode:D});e||g(ExtraEvent_objectSpread(ExtraEvent_objectSpread({},m),{},{invitationIcs:j,invitationApi:b,parentInvitationApi:o,calendarData:s,singleEditData:d,timeStatus:getEventTimeStatus(b.vevent,Date.now()),isOutdated:y,isFromFuture:h,reinviteEventID:u,updateAction:n,hasDecryptionError:i,isPartyCrasher:p}))}catch(t){e||g(ExtraEvent_objectSpread(ExtraEvent_objectSpread({},m),{},{invitationApi:a,parentInvitationApi:o,error:new EventInvitationError(yee.UPDATING_ERROR)}))}})()),()=>{e=!0}}),[h]),b)return(0,j.jsx)(calendar_EmailReminderWidgetSkeleton,{});if(m.error&&![pce,mce].includes(m.error.type)){const{message:e}=m.error,t=[cce,lce,dce,uce].includes(m.error.type);return(0,j.jsx)(banner_Banner,{backgroundColor:pne.DANGER,icon:"triangle-exclamation",action:t&&(0,j.jsx)("span",{className:"flex-item-noshrink flex",children:(0,j.jsx)(VM.Z,{onClick:handleRetry,className:"text-underline color-inherit",children:(0,u.c)("Action").t(ice||(ice=(0,d.Z)(["Try again"])))})}),children:e})}return(e=>!!e.invitationIcs)(m)?(0,j.jsxs)("div",{className:"calendar-widget rounded bordered bg-norm mb0-5 scroll-if-needed",children:[(0,j.jsxs)("div",{className:"p1-5",children:[(0,j.jsx)(calendar_ExtraEventSummary,{model:m}),(0,j.jsx)(calendar_ExtraEventHeader,{model:m}),(0,j.jsx)(calendar_ExtraEventWarning,{model:m}),(0,j.jsx)(calendar_ExtraEventButtons,{model:m,setModel:g,message:t})]}),(0,j.jsx)("hr",{className:"m0"}),(0,j.jsx)(calendar_ExtraEventDetails,{model:m,weekStartsOn:helper_getWeekStartsOn(p)})]}):null};var gce,jce,bce,yce,hce,Ice,fce,extras_ExtraEvents=({message:e})=>{var t,n,r;const a=(0,Dn.Z)(),s=hooks_useIsMounted(),l=useGetMessageKeys(),d=useGetAttachment(),u=(0,i.I0)(),p=useMessageCache(),m=useGetCalendars(),[g=[],b]=wr(),[y=[],h]=(0,yn.ZP)(),I=(0,Zb.ZP)(),[f,M]=(0,bn.ZP)(),[N,x]=(0,Dr.Z)(),v=useGetCalendarUserSettings(),[w,D]=(0,no.Z)(),[S,O]=(0,o.useState)(""),[A,C]=(0,o.useState)([]),[E,L]=(0,o.useState)({calendars:[],canCreateCalendar:!0,maxUserCalendarsDisabled:!1,mustReactivateCalendars:!1}),P=b||h||x||M,Z=!(null===(t=e.errors)||void 0===t||null===(n=t.decryption)||void 0===n||!n.length);return(0,o.useEffect)((()=>{try{const t=(e=>e.filter((({Name:e=""})=>aa.includes((0,To.EQ)(e)[1]))))(getAttachments(e.data));if(!t.length)return void C([]);if(Z||P||!getMessageHasData(e)||S===e.data.ID)return;D((async()=>{const[n,r]=await Promise.all([(async()=>{const{calendars:e,calendarUserSettings:t}=await(async({api:e,addresses:t,getAddressKeys:n,getCalendars:r,getCalendarUserSettings:a})=>{const silentApi=t=>e(inviteApi_objectSpread(inviteApi_objectSpread({},t),{},{silence:!0}));let[o=[],s]=await Promise.all([r(),a()]);if(o=o.filter((0,c.Qm)(getIsPersonalCalendar)),!o.length)try{const{calendar:e,updatedCalendarUserSettings:r}=await keys_setupCalendarHelper({api:silentApi,addresses:t,getAddressKeys:n});s=inviteApi_objectSpread(inviteApi_objectSpread({},s),r),o=[e]}catch(e){(0,c.ZT)()}return{calendars:o,calendarUserSettings:s}})({api:a,addresses:y,getAddressKeys:I,getCalendars:m,getCalendarUserSettings:v}),n=getProbablyActiveCalendars(e),r=getDefaultCalendar(n,t.DefaultCalendarID),o=e.filter((0,c.Qm)(getIsCalendarDisabled)),s=((e,t,n,r)=>{const a=e.length+t.length;return!(a<n.length)&&a<(r?1:20)})(n,o,e,f.isFree),i=((e,t)=>{const n=t?1:20;return e.length===n})(o,f.isFree);return{calendars:e,defaultCalendar:r,canCreateCalendar:s,maxUserCalendarsDisabled:i,mustReactivateCalendars:!r&&!s&&!i}})(),(async()=>{const n=[...t].sort((({MIMEType:e},{MIMEType:t})=>e===oa?-1:t===oa?1:0)),onUpdateAttachment=(e,t)=>{u(Bh({ID:e,attachment:t}))},r=(await Promise.all(n.map((async t=>{try{const n=await l(e.data),r=await formatDownload(t,e.verification,n,d,onUpdateAttachment,a);if(r.isError)return new EventInvitationError(yee.DECRYPTION_ERROR);const o=(0,Gt.Wf)(r.data),s=(e=>{try{if(!e)return;const t=vcal_parseWithErrors(e);if(!vcalHelper_getIsCalendar(t))return;return t}catch(e){throw new EventInvitationError(yee.PARSING_ERROR)}})((0,Gt.FO)(o));if(!s)return;return await getSupportedEventInvitation({vcalComponent:s,message:e.data,icsBinaryString:o,icsFileName:t.Name||""})}catch(e){return e instanceof EventInvitationError?e:new EventInvitationError(yee.INVITATION_INVALID,e)}})))).filter(Za.Z),{uniqueInvitations:o}=r.reduce(((e,t)=>{const{uniqueInvitations:n,uniqueUids:r}=e;if(t instanceof EventInvitationError)return n.push(t),e;const a=t.originalUniqueIdentifier||t.vevent.uid.value;return r.includes(a)||(r.push(a),n.push(t)),e}),{uniqueInvitations:[],uniqueUids:[]});return o})()]);s()&&(L(n),C(r))})()),O(e.data.ID)}catch(t){const n={};isNetworkError(t)?n.network=[t]:n.unknown=[t],updateMessageCache(p,e.localID,{errors:n})}}),[e.data,e.errors,P,null===(r=e.data)||void 0===r?void 0:r.ID]),P||Z||!getMessageHasData(e)||w?null:(0,j.jsx)(j.Fragment,{children:A.map(((t,n)=>(0,j.jsx)(calendar_ExtraEvent,{invitationOrError:t,message:e,calendars:E.calendars,defaultCalendar:E.defaultCalendar,canCreateCalendar:E.canCreateCalendar,maxUserCalendarsDisabled:E.maxUserCalendarsDisabled,mustReactivateCalendars:E.mustReactivateCalendars,contactEmails:g,ownAddresses:y,userSettings:N},n)))})};const{NOT_VERIFIED:Mce,SIGNED_AND_INVALID:Nce}=v;var xce;!function(e){e[e.AUTOPROMPT=1]="AUTOPROMPT",e[e.PIN_UNSEEN=2]="PIN_UNSEEN",e[e.PIN_ATTACHED_SIGNING=3]="PIN_ATTACHED_SIGNING",e[e.PIN_ATTACHED=4]="PIN_ATTACHED"}(xce||(xce={}));const getBannerMessage=e=>e===xce.PIN_UNSEEN?(0,u.c)("Info").t(gce||(gce=(0,d.Z)(["This message is signed by a key that has not been trusted yet."]))):e===xce.PIN_ATTACHED_SIGNING?(0,u.c)("Info").t(jce||(jce=(0,d.Z)(["This message is signed by the key attached, that has not been trusted yet."]))):e===xce.PIN_ATTACHED?(0,u.c)("Info").t(bce||(bce=(0,d.Z)(["An unknown public key has been detected for this recipient."]))):e===xce.AUTOPROMPT?(0,u.c)("Info").t(yce||(yce=(0,d.Z)(["This sender's public key has not been trusted yet."]))):void 0;var vce,wce,Dce,Sce,Oce,Ace,Cce,extras_ExtraPinKey=({message:e,messageVerification:t})=>{var n,r,a;const s=(0,Dn.Z)(),[i]=useMailSettings(),[c]=(0,yn.ZP)(),[l,p]=(0,no.Z)(),{createModal:m}=(0,In.Z)(),{createNotification:g}=(0,hn.Z)(),{call:b}=(0,Ie.Z)(),{contactsMap:y}=useContactCache(),h=null==e?void 0:e.SenderAddress,I=null==e?void 0:e.SenderName,f=q(e),M=null==e||null===(n=e.Sender)||void 0===n?void 0:n.ContactID,N=(0,o.useMemo)((()=>{if(M)return M;if(!h)return;const e=getContactEmail(y,h);return null==e?void 0:e.ContactID}),[M,y,h]),x=(0,o.useMemo)((()=>{if(h)return(({messageVerification:e,mailSettings:t={},addresses:n,senderAddress:r})=>{var a,o,s,i,c;if(n.find((({Email:e})=>(0,Xe.GZ)(e)===(0,Xe.GZ)(r))))return;const{PromptPin:l}=t,d=!(null==e||null===(a=e.senderPinnedKeys)||void 0===a||!a.length),u=null!=e&&null!==(o=e.attachedPublicKeys)&&void 0!==o&&o.length?e.attachedPublicKeys[0]:void 0,p=!(null==e||!e.signingPublicKey)&&(null==e||null===(s=e.attachedPublicKeys)||void 0===s?void 0:s.map((e=>e.armor())).includes(null===(i=e.signingPublicKey)||void 0===i?void 0:i.armor())),m=u&&(null==e||null===(c=e.senderPinnedKeys)||void 0===c?void 0:c.map((e=>e.armor())).includes(u.armor()));if((null==e?void 0:e.verificationStatus)===Nce||(null==e?void 0:e.verificationStatus)===Mce){if(!e.signingPublicKey)return u?xce.PIN_ATTACHED:void 0;if(d)return xce.PIN_UNSEEN;if(p)return xce.PIN_ATTACHED_SIGNING;if(l)return xce.AUTOPROMPT}if((null==e?void 0:e.verificationStatus)===v.NOT_SIGNED){if(!u||m)return;return xce.PIN_ATTACHED}})({messageVerification:t,mailSettings:i,addresses:c,senderAddress:h})}),[e,i,c,h]),w=x===xce.PIN_UNSEEN,D=null!=t&&null!==(r=t.attachedPublicKeys)&&void 0!==r&&r.length?t.attachedPublicKeys[0]:void 0,S=(null==t?void 0:t.signingPublicKey)||D,O=l||!h||w&&!N||!S,A=w?"bg-warning":"bg-norm",C=null==t||null===(a=t.senderPinnedKeys)||void 0===a?void 0:a.some((e=>e.armor()===(null==S?void 0:S.armor())));if(void 0===x||C)return null;return(0,j.jsxs)("div",{className:(0,ht.dh)(["rounded bordered p0-5 mb0-5 flex flex-nowrap flex-align-items-center flex-justify-space-between",A]),children:[(0,j.jsxs)("div",{className:"flex flex-nowrap mr1",children:[(0,j.jsx)(pr.Z,{name:"key",className:"mtauto mbauto mr0-5 flex-item-noshrink"}),(0,j.jsxs)("div",{children:[(0,j.jsx)("span",{className:"mr0-5",children:getBannerMessage(x)}),x===xce.AUTOPROMPT?(0,j.jsx)(VM.Z,{className:"color-inherit text-underline",disabled:l,onClick:()=>p((async()=>{await s((0,Fg.mx)(0)),await b(),g({text:(0,u.c)("Success").t(hce||(hce=(0,d.Z)(["Address verification disabled"])))})})()),children:(0,u.c)("Action").t(Ice||(Ice=(0,d.Z)(["Never show"])))}):(0,j.jsx)(dE.Z,{className:"color-inherit",url:"https://protonmail.com/support/knowledge-base/address-verification/"})]})]}),(0,j.jsx)("span",{className:"flex-align-items-center flex-item-noshrink",children:(0,j.jsx)(Ea.Z,{onClick:()=>{if(O||!S||!h)return;const e={emailAddress:h,name:I,contactID:N,isInternal:f,bePinnedPublicKey:S};m((0,j.jsx)(modals_TrustPublicKeyModal,{contact:e}))},disabled:O,children:(0,u.c)("Action").t(fce||(fce=(0,d.Z)(["Trust key"])))})})]})};var extras_ExtraAskResign=({message:e,messageVerification:t,onResignContact:n})=>{const{senderVerified:r,senderPinnedKeys:a}=t||{},{Address:s=""}=(null==e?void 0:e.Sender)||{},{createModal:i}=(0,In.Z)(),{contactsMap:c}=useContactCache(),l=(0,o.useMemo)((()=>getContactEmail(c,s)),[c,s]);if(r||null==a||!a.length)return null;return(0,j.jsxs)("div",{className:"bg-norm rounded bordered p0-5 mb0-5 flex flex-nowrap",children:[(0,j.jsx)(pr.Z,{name:"triangle-exclamation",className:"flex-item-noshrink mtauto mbauto"}),(0,j.jsxs)("span",{className:"pl0-5 pr0-5 flex-item-fluid flex-align-self-center",children:[(0,j.jsx)("span",{className:"mr0-25",children:(0,u.c)("Info").t(Oce||(Oce=(0,d.Z)(["We could not verify the sender's trusted keys."])))}),(0,j.jsx)(Tu.Z,{className:"mr1 inline-block",href:"https://protonmail.com/support/knowledge-base/address-verification/",children:(0,u.c)("Info").t(Ace||(Ace=(0,d.Z)(["Learn more"])))})]}),(0,j.jsx)("button",{type:"button",className:"text-underline link",onClick:()=>{if(!l)return;const t={contactID:l.ContactID},r=(null==e?void 0:e.SenderName)||"";i((0,j.jsxs)(modals_ContactResignModal,{title:(0,u.c)("Title").t(vce||(vce=(0,d.Z)(["Trust pinned keys?"]))),submit:(0,u.c)("Action").t(wce||(wce=(0,d.Z)(["Trust"]))),onResign:n,contacts:[t],children:[(0,j.jsx)(Cn.Z,{className:"mb1",type:"info",children:(0,u.c)("Info").t(Dce||(Dce=(0,d.Z)(["When you enabled trusted keys for ",", the public keys were added to the contact details."])),r)}),(0,j.jsx)(Cn.Z,{className:"mb1",type:"error",children:(0,u.c)("Info").t(Sce||(Sce=(0,d.Z)(["There has been an error with the signature used to verify the contact details, which may be the result of a password reset."])))})]}))},children:(0,u.c)("Action").t(Cce||(Cce=(0,d.Z)(["Verify"])))})]})};const useLoadMessage=e=>{const t=(0,Dn.Z)(),n=useMessageCache();return(0,o.useCallback)((async()=>{var r;const a=e.ID||"",o=updateMessageCache(n,a,{data:e});if(null===(r=o.data)||void 0===r||!r.Body)try{var s,i;const{Message:e}=await t((0,En.FC)(null===(s=o.data)||void 0===s?void 0:s.ID)),r=((null===(i=n.get(a))||void 0===i?void 0:i.loadRetry)||0)+1;updateMessageCache(n,a,{data:e,loadRetry:r})}catch(e){var c;const t=((null===(c=n.get(a))||void 0===c?void 0:c.loadRetry)||0)+1;throw updateMessageCache(n,a,{loadRetry:t}),await(0,Wt.D)(ve.HE),e}}),[e])};var Ece,Lce,Pce,Zce,Tce,kce,zce,_ce;const getTranslations=(e,t)=>{switch(e){case"network":return(0,u.c)("Error").t(Ece||(Ece=(0,d.Z)(["Network error: Please check your connection and try again."])));case"decryption":return t?(0,u.c)("Error").t(Lce||(Lce=(0,d.Z)(["Sorry, Proton can't decrypt your message. Please check that all your keys are active."]))):(0,u.c)("Error").t(Pce||(Pce=(0,d.Z)(["Decryption error: decryption of this message's encrypted content failed."])));case"processing":return(0,u.c)("Error").t(Zce||(Zce=(0,d.Z)(["Message processing error."])));case"signature":return(0,u.c)("Error").t(Tce||(Tce=(0,d.Z)(["Signature verification error."])));default:return(0,u.c)("Error").t(kce||(kce=(0,d.Z)(["Unknown error."])))}};var Rce,Gce,Yce,extras_ExtraErrors=({message:e})=>{const t=(e=>{const t=useMessageCache(),n=useInitializeMessage(e);return(0,o.useCallback)((async()=>{t.set(e,{localID:e}),await n()}),[e])})(e.localID),[n,r]=(0,o.useState)(!1),a=Object.keys(e.errors||{}).filter((t=>{var n,r;return null===(n=e.errors)||void 0===n||null===(r=n[t])||void 0===r?void 0:r.length}));if(0===a.length)return null;const handleReload=()=>{t(),r(!0)};return(0,j.jsx)(j.Fragment,{children:a.map((e=>{const t="network"===e||"decryption"===e&&!n,r="decryption"===e&&n;return(0,j.jsxs)("div",{className:"bg-danger rounded p0-5 mb0-5 flex flex-nowrap flex-align-items-center","data-testid":"errors-banner",children:[(0,j.jsx)(pr.Z,{name:"triangle-exclamation",className:"flex-item-noshrink mtauto mbauto"}),(0,j.jsx)("span",{className:"pl0-5 pr0-5 flex-item-fluid",children:getTranslations(e,n)}),t&&(0,j.jsx)("span",{className:"flex-item-noshrink flex",children:(0,j.jsx)(Ea.Z,{size:"small",onClick:handleReload,children:(0,u.c)("Action").t(zce||(zce=(0,d.Z)(["Try again"])))})}),r&&(0,j.jsx)("span",{className:"flex-item-noshrink flex",children:(0,j.jsx)(sh.Z,{path:"/encryption-keys",app:M.ei.PROTONMAIL,className:"text-underline color-inherit mtauto",children:(0,u.c)("Action").t(_ce||(_ce=(0,d.Z)(["View keys"])))})})]},e)}))})};var Uce,Fce,Kce,Bce,Wce,Vce,Qce,Hce,extras_ExtraDecryptedSubject=({message:e})=>{var t;return"..."===(null===(t=e.data)||void 0===t?void 0:t.Subject)&&e.decryptedSubject?(0,j.jsx)("div",{className:"bg-norm rounded bordered p0-5 mb0-5 flex flex-nowrap flex-align-items-center flex-justify-space-between","data-testid":"encrypted-subject-banner",children:(0,j.jsxs)("div",{className:"flex",children:[(0,j.jsx)(ur.Z,{title:(0,u.c)("Info").t(Rce||(Rce=(0,d.Z)(["Subject is end-to-end encrypted"]))),children:(0,j.jsx)(pr.Z,{name:"lock-filled",className:"mtauto mbauto mr0-5",alt:(0,u.c)("Info").t(Gce||(Gce=(0,d.Z)(["Subject is end-to-end encrypted"])))})}),(0,j.jsxs)("div",{className:"mr0-5",children:[(0,u.c)("Info").t(Yce||(Yce=(0,d.Z)(["Subject:"])))," ",e.decryptedSubject]})]})}):null};var extras_ExtraScheduledMessage=({message:e})=>{const t=(0,Dn.Z)(),{call:n}=(0,Ie.Z)(),{createNotification:r}=(0,hn.Z)(),[a,s]=(0,o.useState)((()=>Date.now())),i=useOnCompose(),{createModal:c}=(0,In.Z)(),l=isScheduled(e.data)&&e.data?new Date(1e3*e.data.Time):new Date,p=l.getTime()-a<ve.RR;(0,o.useEffect)((()=>{const e=setInterval((()=>s(Date.now())),1e3);return()=>{clearInterval(e)}}),[]);const handleUnscheduleMessage=async()=>{var a;e.loadRetry=0,await t((0,En.vD)(null===(a=e.data)||void 0===a?void 0:a.ID)),await n(),r({text:(0,u.c)("Message notification").t(Uce||(Uce=(0,d.Z)(["Scheduling cancelled. Message has been moved to Drafts."])))}),i({existingDraft:e,fromUndo:!1})};return(0,j.jsxs)("div",{className:"bg-info rounded p0-5 mb0-5 flex flex-nowrap","data-testid":"message:schedule-banner",children:[(0,j.jsx)(pr.Z,{name:"clock",className:"mtauto mbauto"}),(0,j.jsx)("span",{className:"pl0-5 pr0-5 flex-item-fluid",children:(()=>{if(p)return(0,u.c)("Info").t(Vce||(Vce=(0,d.Z)(["This message will be sent shortly"])));const{dateString:e,formattedTime:t}=formatDateToHuman(l);return(0,u.c)("Info").t(Qce||(Qce=(0,d.Z)(["This message will be sent "," at ",""])),e,t)})()}),p?null:(0,j.jsx)("button",{type:"button",onClick:()=>{c((0,j.jsx)(modal_Confirm,{onConfirm:handleUnscheduleMessage,title:(0,u.c)("Confirm modal title").t(Fce||(Fce=(0,d.Z)(["Edit and reschedule"]))),cancel:(0,u.c)("Action").t(Kce||(Kce=(0,d.Z)(["Cancel"]))),confirm:(0,j.jsx)(Ea.Z,{color:"norm",type:"submit","data-testid":"message:modal-edit-draft-button",children:(0,u.c)("Action").t(Bce||(Bce=(0,d.Z)(["Edit draft"])))}),children:(0,u.c)("Info").t(Wce||(Wce=(0,d.Z)(["This message will be moved to Drafts so you can edit it. You'll need to reschedule when it will be sent."])))}))},className:"flex flex-item-noshrink text-underline link mtauto mbauto","data-testid":"message:schedule-banner-edit-button",children:(0,u.c)("Action").t(Hce||(Hce=(0,d.Z)(["Edit"])))})]})};var Xce,Jce,qce,$ce,ele,tle,nle=n(11612);var rle,ale,calendar_EventReminderText=({isAllDay:e,startDate:t,endDate:n})=>{const[r,a]=(0,o.useState)(new Date);(0,o.useEffect)((()=>{const e=setInterval((()=>{a(new Date)}),30*M.sh);return()=>{clearInterval(e)}}),[t]);const s=+t-+r,i=s<=0,c=+n<+r,l=(()=>{if(c)return[pne.WARNING,(0,u.c)("Email reminder banner").t(Xce||(Xce=(0,d.Z)(["Event already ended"])))];if(i)return[pne.WARNING,(0,u.c)("Email reminder banner").t(Jce||(Jce=(0,d.Z)(["Event in progress"])))];if(!e&&s<M.kr){const e=Math.round(s/M.EB),t=0===e?(0,u.c)("Email reminder banner").t(qce||(qce=(0,d.Z)(["Event starting now"]))):(0,u.c)("Email reminder banner").ngettext((0,u.msgid)($ce||($ce=(0,d.Z)(["Event starts in "," minute"])),e),"Event starts in ".concat(e," minutes"),e);return[pne.INFO,t]}if(e&&s<M.x4){const e=1===(0,nle.Z)(n,t)?(0,u.c)("Email reminder banner").t(ele||(ele=(0,d.Z)(["Event is tomorrow"]))):(0,u.c)("Email reminder banner").t(tle||(tle=(0,d.Z)(["Event starts tomorrow"])));return[pne.INFO,e]}return null})();if(!l)return null;const[p,m]=l;return(0,j.jsx)(banner_Banner,{backgroundColor:p,icon:"bell",children:m})};var ole,sle,ile,cle,lle,dle,ule,calendar_EventReminderBanner=({isAllDay:e,startDate:t,endDate:n,isOutdated:r,isCanceled:a})=>r?(0,j.jsx)(banner_Banner,{icon:"circle-exclamation",backgroundColor:pne.DANGER,children:(0,u.c)("Email reminder out of date alert").t(rle||(rle=(0,d.Z)(["Event was updated. This reminder is out-of-date."])))}):a?(0,j.jsx)(banner_Banner,{icon:"circle-exclamation",backgroundColor:pne.WARNING,children:(0,u.c)("Email reminder out of date alert").t(ale||(ale=(0,d.Z)(["Event was canceled"])))}):(0,j.jsx)(calendar_EventReminderText,{startDate:t,endDate:n,isAllDay:e});function EmailReminderWidget_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function EmailReminderWidget_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?EmailReminderWidget_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EmailReminderWidget_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const ple="EVENT_NOT_FOUND",mle="DECRYPTION_ERROR";var calendar_EmailReminderWidget=({message:e})=>{var t,n,r;const a=getParsedHeadersFirstValue(e.data,"X-Pm-Calendar-Calendarid"),s=getParsedHeadersFirstValue(e.data,"X-Pm-Calendar-Eventid"),i=getParsedHeadersFirstValue(e.data,"X-Pm-Calendar-Occurrence"),c=getParsedHeadersFirstValue(e.data,"X-Pm-Calendar-Sequence"),l=getParsedHeadersFirstValue(e.data,"X-Pm-Calendar-Eventuid"),p=getParsedHeadersFirstValue(e.data,"X-Pm-Calendar-Eventisrecurring"),m=getParsedHeadersFirstValue(e.data,"X-Pm-Calendar-Recurrenceid"),[g,b]=(0,o.useState)(),[y,h]=(0,o.useState)(),[I]=(0,yn.ZP)(),[f,N]=(0,o.useState)(),[x,v]=(0,o.useState)(!1),[w,D]=(0,o.useState)(null),[S,O]=(0,o.useState)(""),{createNotification:A}=(0,hn.Z)(),C=(0,Dn.Z)(),E=hooks_useGetCalendarEventRaw(),L=wr()[0]||[],P=useGetCalendars(),Z=hooks_useIsMounted(),T=!(null===(t=e.errors)||void 0===t||null===(n=t.decryption)||void 0===n||!n.length);(0,o.useEffect)((()=>{a&&s&&!T&&(async()=>{let t;if(getMessageHasData(e)&&S!==e.data.ID)try{var n;v(!0),D(null);const r=parseInt("".concat(i),10),fetchEvent=async(e="1"===p)=>{if(e){const e=await integration_getPaginatedEventsByUID({api:C,uid:"".concat(l),recurrenceID:m?parseInt(m,10):void 0});if(!e.length)throw new Error(ple);if(e.find((({Exdates:e})=>e.includes(r))))throw new Error(ple);const t=e.find((({RecurrenceID:e})=>e===r));if(t)return{Event:t};const n=e.filter((({RecurrenceID:e})=>!e))[0];return n?{Event:n}:{Event:e[0]}}return C(EmailReminderWidget_objectSpread(EmailReminderWidget_objectSpread({},(0,cL.EY)(a,s)),{},{silence:!0})).catch((()=>fetchEvent(!0)))},[{Event:o},c=[]]=await Promise.all([fetchEvent(),P()]),d=c.find((({ID:e})=>e===o.CalendarID));if(t=d,!Z())return;h(d),N(o);const{veventComponent:u}=await E(o).catch((()=>{throw new Error(mle)}));if(!Z())return;const{until:g,count:j}=(null===(n=u.rrule)||void 0===n?void 0:n.value)||{},y=r*M.sh,I=!!g&&r>(0,mS.Z)((0,fV.uq)(g)),f=void 0!==j&&!getOccurrencesBetween(u,y,y).length;if(I||f)throw new Error(ple);b(u)}catch(e){if(e instanceof Error||A({type:"error",text:"Unknown error"}),!Z())return;if(t&&e.message===mle){if(getDoesCalendarNeedUserAction(t)){const e=(0,j.jsx)(Tu.Z,{url:"https://protonmail.com/support/knowledge-base/restoring-encrypted-calendar/",className:"link align-baseline",children:(0,u.c)("Action").t(ole||(ole=(0,d.Z)(["Learn more"])))},"learn-more");return void D((0,j.jsx)(banner_Banner,{icon:"key",action:(0,j.jsx)(VI.Z,{as:dw.Z,toApp:M.ei.PROTONCALENDAR,to:"/",color:"norm",className:"flex-item-noshrink",children:(0,j.jsxs)("div",{className:"flex flex-align-items-center",children:[(0,j.jsx)("span",{className:"mr0-75",children:(0,u.c)("Action").t(sle||(sle=(0,d.Z)(["Open ",""])),Ar)}),(0,j.jsx)(pr.Z,{name:"arrow-up-right-from-square"})]})}),children:(0,u.c)("Email reminder decryption error").jt(ile||(ile=(0,d.Z)(["Event details are encrypted. Sign in again to restore Calendar and decrypt your data. ",""])),e)}))}const e=(0,j.jsx)(Tu.Z,{url:"https://protonmail.com/support/knowledge-base/restoring-encrypted-calendar/",className:"link align-baseline",children:(0,u.c)("Action").t(cle||(cle=(0,d.Z)(["Why not?"])))},"learn-more");return void D((0,j.jsx)(banner_Banner,{icon:"circle-exclamation",backgroundColor:pne.DANGER,children:(0,u.c)("Email reminder decryption error").jt(lle||(lle=(0,d.Z)(["Event details cannot be decrypted. ",""])),e)}))}if(e.message===ple)return void D((0,j.jsx)(banner_Banner,{icon:"circle-exclamation",backgroundColor:pne.DANGER,children:(0,u.c)("Email reminder error").t(dle||(dle=(0,d.Z)(["Event is no longer in your calendar"])))}));A({type:"error",text:e.message})}finally{Z()&&(v(!1),O(e.data.ID))}})()}),[a,s,T,null===(r=e.data)||void 0===r?void 0:r.ID]);const k=(0,o.useMemo)((()=>{var e,t;const n=null==g||null===(e=g.location)||void 0===e||null===(t=e.value)||void 0===t?void 0:t.trim();return n?restrictedCalendarSanitize(calendar_urlify(n)):null}),[g]);if(x)return(0,j.jsx)(calendar_EmailReminderWidgetSkeleton,{});if(w&&!T)return(0,j.jsx)(j.Fragment,{children:w});if(!f||!g||!y||!a||!s||!i||T)return null;const{summary:z,organizer:_,attendee:R,sequence:G}=g,{FullDay:Y,IsOrganizer:U}=f,{Color:F,Name:K}=y,B=getSelfAddressData({isOrganizer:!!U,organizer:_,attendees:R,addresses:I}),W=_?getParticipant(EmailReminderWidget_objectSpread({participant:_,contactEmails:L},B)):void 0,V=R?R.map((e=>getParticipant(EmailReminderWidget_objectSpread({participant:e,contactEmails:L},B)))):void 0,Q=getParticipantsList(V,W),H=new URLSearchParams;H.set("Action","VIEW"),H.set("EventID","".concat(s)),H.set("CalendarID","".concat(a)),H.set("RecurrenceID","".concat(i));const X="/event?".concat(H.toString()),[J,q]=((e,t)=>{const{StartTime:n,EndTime:r,FullDay:a}=e,o=!!a,s=(r-n)*M.sh,i=new Date(t*M.sh),c=o?(0,fV.Bx)((0,fV.Dn)(i)):i;return[c,new Date(+c+s)]})(f,parseInt(i,10)),$=((null==G?void 0:G.value)||0)>parseInt("".concat(c),10);return(0,j.jsxs)("div",{className:"calendar-widget",children:[(0,j.jsx)(calendar_EventReminderBanner,{startDate:J,endDate:q,isAllDay:!!Y,isCanceled:veventHelper_getIsEventCancelled(f),isOutdated:$}),!$&&(0,j.jsxs)("div",{className:"rounded bordered bg-norm mb0-5 scroll-if-needed",children:[(0,j.jsxs)("div",{className:"p1-5",children:[(0,j.jsx)("h2",{className:"h3 mb0-25 text-bold",children:helper_getDisplayTitle(null==z?void 0:z.value)}),(0,j.jsx)(calendarEventDateHeader_CalendarEventDateHeader,{className:"text-lg mt0 mb0-75",startDate:J,endDate:q,isAllDay:!!Y}),(0,j.jsx)(dw.Z,{toApp:M.ei.PROTONCALENDAR,to:X,children:(0,u.c)("Link to calendar event").t(ule||(ule=(0,d.Z)(["Open in ",""])),Ar)})]}),(0,j.jsx)("hr",{className:"m0"}),(0,j.jsxs)("div",{className:"p1-5",children:[(0,j.jsx)(iconRow_IconRow,{icon:(0,j.jsx)(calendarSelect_CalendarSelectIcon,{color:F}),labelClassName:"inline-flex pt0-25",children:K}),!!k&&(0,j.jsx)(iconRow_IconRow,{icon:"map-marker",labelClassName:"inline-flex pt0-25",children:(0,j.jsx)("span",{dangerouslySetInnerHTML:{__html:k}})}),!!Q.length&&(0,j.jsx)(iconRow_IconRow,{icon:"user-group",labelClassName:"inline-flex pt0-25",children:(0,j.jsx)(calendar_ExtraEventParticipants,{list:Q})})]})]})]})};var gle,jle,header_HeaderExtra=({message:e,sourceMode:t,messageLoaded:n,bodyLoaded:r,onResignContact:a,onLoadRemoteImages:o,onLoadEmbeddedImages:s})=>{const i=e.data&&ee(e.data),{feature:c}=(0,nN.Z)(y.P.ScheduledSend),l=isScheduled(e.data);return(0,j.jsxs)("section",{className:"message-header-extra border-top pt0-5",children:[(0,j.jsx)(extras_ExtraExpirationTime,{message:e}),(0,j.jsx)(extras_ExtraDecryptedSubject,{message:e}),(0,j.jsx)(extras_ExtraSpamScore,{message:e}),r&&(0,j.jsx)(extras_ExtraErrors,{message:e}),(0,j.jsx)(extras_ExtraUnsubscribe,{message:e}),(0,j.jsx)(extras_ExtraReadReceipt,{message:e}),(0,j.jsx)(extras_ExtraAutoReply,{message:e}),n&&(0,j.jsx)(extras_ExtraPinKey,{message:e.data,messageVerification:e.verification}),(0,j.jsx)(extras_ExtraAskResign,{message:e.data,messageVerification:e.verification,onResignContact:a}),!t&&(0,j.jsx)(extras_ExtraImages,{message:e,type:"remote",onLoadImages:o}),!t&&(0,j.jsx)(extras_ExtraImages,{message:e,type:"embedded",onLoadImages:s}),n&&i&&(0,j.jsx)(calendar_EmailReminderWidget,{message:e}),n&&i?(0,j.jsx)(extras_ExtraEvents,{message:e}):null,l&&null!=c&&c.Value?(0,j.jsx)(extras_ExtraScheduledMessage,{message:e}):null]})};var recipients_RecipientsSimple=({message:e,isLoading:t,highlightKeywords:n=!1})=>{const{getRecipientsOrGroups:r,getRecipientOrGroupLabel:a}=useRecipientLabel(),{highlightMetadata:o}=useEncryptedSearchContext(),s=getRecipients(e),i=r(s);return(0,j.jsxs)("div",{className:"flex flex-nowrap","data-testid":"message-header:to",children:[(0,j.jsx)("span",{className:"message-header-to container-to pl0-5",children:!t&&(0,u.c)("Label").t(gle||(gle=(0,d.Z)(["To:"])))}),(0,j.jsx)("span",{className:"message-header-contact text-ellipsis",children:!t&&(0,j.jsx)(j.Fragment,{children:s.length?i.map(((e,t)=>{const r=a(e),s=r&&n?o(r).resultJSX:r;return(0,j.jsxs)("span",{title:r,children:[(0,j.jsx)("span",{children:s}),t<i.length-1&&", "]},t)})):(0,u.c)("Label").t(jle||(jle=(0,d.Z)(["Undisclosed Recipients"])))})})]})};var recipients_RecipientType=({label:e,className:t="flex flex-align-items-start flex-nowrap message-recipient-item-expanded max-w100",children:n})=>(0,j.jsxs)("span",{className:t,"data-testid":"message-header-expanded:".concat(e),children:[(0,j.jsx)("span",{className:"container-to pt0-5",children:e}),(0,j.jsx)("span",{className:"flex-align-self-center message-recipient-item-expanded-content",children:n})]});var ble,yle,hle,Ile,recipients_RecipientsList=({list:e,mapStatusIcons:t,isLoading:n,highlightKeywords:r=!1})=>{const{getRecipientsOrGroups:a}=useRecipientLabel(),o=a(e);return(0,j.jsx)(j.Fragment,{children:o.map(((e,a)=>(0,j.jsx)(recipients_RecipientItem,{recipientOrGroup:e,mapStatusIcons:t,isLoading:n,highlightKeywords:r},a)))})};var recipients_RecipientsDetails=({message:e,mapStatusIcons:t,isLoading:n,highlightKeywords:r=!1})=>{const{ToList:a=[],CCList:o=[],BCCList:s=[]}=(null==e?void 0:e.data)||{},i=a.length+o.length+s.length===0;return(0,j.jsxs)("div",{className:"flex flex-column",children:[a.length>0&&(0,j.jsx)(recipients_RecipientType,{label:(0,u.c)("Label").t(ble||(ble=(0,d.Z)(["To:"]))),children:(0,j.jsx)(recipients_RecipientsList,{list:a,mapStatusIcons:t,isLoading:n,highlightKeywords:r})}),o.length>0&&(0,j.jsx)(recipients_RecipientType,{label:(0,u.c)("Label").t(yle||(yle=(0,d.Z)(["CC:"]))),children:(0,j.jsx)(recipients_RecipientsList,{list:o,mapStatusIcons:t,isLoading:n,highlightKeywords:r})}),s.length>0&&(0,j.jsx)(recipients_RecipientType,{label:(0,u.c)("Label").t(hle||(hle=(0,d.Z)(["BCC:"]))),children:(0,j.jsx)(recipients_RecipientsList,{list:s,mapStatusIcons:t,isLoading:n,highlightKeywords:r})}),i&&(0,j.jsx)(recipients_RecipientType,{label:(0,u.c)("Label").t(Ile||(Ile=(0,d.Z)(["To:"]))),children:(0,j.jsx)(recipients_RecipientItem,{recipientOrGroup:{},isLoading:n})})]})};const fle=["title","content","children","autoClose","noMaxSize","loading","className","dropDownClassName","externalToggleRef","additionalDropdowns"];function HeaderDropdown_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function HeaderDropdown_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?HeaderDropdown_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HeaderDropdown_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Mle,Nle,header_HeaderDropdown=e=>{let{title:t,content:n,children:r,autoClose:a,noMaxSize:s,loading:i,className:c,dropDownClassName:l,externalToggleRef:d,additionalDropdowns:u}=e,p=(0,Sn.Z)(e,fle);const[m]=(0,o.useState)((0,ht.D)("dropdown")),[g,b]=(0,o.useState)(!1),[y,h]=(0,o.useState)(),{anchorRef:I,isOpen:f,toggle:M,close:N}=(0,No.Z)(),handleAdditionalClose=()=>{h(void 0)};return(0,o.useEffect)((()=>{d&&(d.current=M)}),[]),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(ur.Z,{title:t,children:(0,j.jsx)(fo.Z,HeaderDropdown_objectSpread(HeaderDropdown_objectSpread({as:Ea.Z,className:c,ref:I,isOpen:f,onClick:M,hasCaret:!0,disabled:i},p),{},{children:n}))}),(0,j.jsx)(Mo.Z,{id:m,className:l,originalPlacement:"bottom",autoClose:a,autoCloseOutside:!g,isOpen:f,noMaxSize:s,anchorRef:I,onClose:N,children:r({onClose:N,onLock:b,onOpenAdditionnal:h})}),null==u?void 0:u.map(((e,t)=>(0,j.jsx)(Mo.Z,{id:"".concat(m,"-").concat(t),className:l,originalPlacement:"bottom",autoClose:!1,isOpen:y===t,noMaxSize:!0,anchorRef:I,onClose:handleAdditionalClose,children:e({onClose:handleAdditionalClose,onLock:b,onOpenAdditionnal:h})},t)))]})},xle=n(97625);const vle=["message","onClose"];function MessageHeadersModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function MessageHeadersModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MessageHeadersModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MessageHeadersModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var modals_MessageHeadersModal=e=>{let{message:t,onClose:n}=e,r=(0,Sn.Z)(e,vle);const a="".concat(null==t?void 0:t.Header,"\n\r").concat(null==t?void 0:t.Body);return(0,j.jsx)(On.Z,MessageHeadersModal_objectSpread(MessageHeadersModal_objectSpread({title:(0,u.c)("Info").t(Mle||(Mle=(0,d.Z)(["Message headers"]))),submit:(0,u.c)("Action").t(Nle||(Nle=(0,d.Z)(["Download"]))),onSubmit:()=>{const e=new Blob([a],{type:"text/plain;charset=utf-8"});helpers_downloadFile(e,"pgp.txt")},onClose:n},r),{},{children:(0,j.jsx)("pre",{className:"text-break",children:a})}))};var wle,Dle,Sle,Ole,message_MessageFooter=({message:e,showActions:t=!0})=>{const n=getAttachments(e.data);return(0,j.jsx)("div",{className:(0,ht.dh)(["message-attachments border-top m0-5",!t&&"no-pointer-events"]),"data-testid":"message-attachments",children:(0,j.jsx)(attachment_AttachmentList,{attachments:n,message:e,primaryAction:BI.Preview,secondaryAction:t?BI.Download:BI.None,collapsable:!1,showDownloadAll:t,className:"message-attachments-list"})})};const Ale=["labelID","message","onClose"];function MessagePrintModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function MessagePrintModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MessagePrintModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MessagePrintModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Cle,Ele,Lle,Ple,Zle,Tle,kle,zle,_le,Rle,Gle,Yle,Ule,Fle,Kle,Ble,Wle,Vle,Qle,Hle,Xle,Jle,qle,$le,ede,tde,nde,rde,ade,ode,modals_MessagePrintModal=e=>{var t;let{labelID:n,message:r,onClose:a}=e,s=(0,Sn.Z)(e,Ale);const{getRecipientLabel:i}=useRecipientLabel(),c=getSender(r.data),handlePrint=()=>window.print();(0,o.useEffect)((()=>{document.body.classList.add("is-printed-version")}),[]);return(0,j.jsx)(On.Z,MessagePrintModal_objectSpread(MessagePrintModal_objectSpread({title:(0,u.c)("Info").t(wle||(wle=(0,d.Z)(["Print email"]))),submit:(0,u.c)("Action").t(Dle||(Dle=(0,d.Z)(["Print"]))),onEnter:handlePrint,onSubmit:handlePrint,onClose:()=>{document.body.classList.remove("is-printed-version"),null==a||a()},className:"modal--wider "},s),{},{children:(0,j.jsxs)("div",{className:"message-print",children:[(0,j.jsxs)("div",{className:"message-print-header pb1 mb1",children:[(0,j.jsx)("h2",{className:"message-print-subject text-bold pb0-5 mb0-5",children:null===(t=r.data)||void 0===t?void 0:t.Subject}),(0,j.jsxs)(recipients_RecipientType,{label:(0,u.c)("Label").t(Sle||(Sle=(0,d.Z)(["From:"]))),children:[i(c,!0)," ",(0,j.jsxs)("span",{className:"color-weak",children:["<",null==c?void 0:c.Address,">"]})]}),(0,j.jsx)(recipients_RecipientsDetails,{message:r,isLoading:!1}),(0,j.jsx)(recipients_RecipientType,{label:(0,u.c)("Label").t(Ole||(Ole=(0,d.Z)(["Date:"]))),children:(0,j.jsx)(list_ItemDate,{element:r.data,labelID:n,mode:"full"})})]}),(0,j.jsx)(message_MessageBody,{messageLoaded:!0,bodyLoaded:!0,sourceMode:!1,message:r,originalMessageMode:!1,forceBlockquote:!0}),hasAttachments(r.data)?(0,j.jsx)(message_MessageFooter,{message:r,showActions:!1}):null]})}))};const{INBOX:sde,TRASH:ide,SPAM:cde}=M.C7;var header_HeaderMoreDropdown=({labelID:e,message:t,messageLoaded:n,sourceMode:r,onBack:a,onToggle:l,onSourceMode:p,breakpoints:m,parentMessageRef:g,mailSettings:b})=>{var y,h;const I=(0,s.TH)(),f=(0,Dn.Z)(),M=useGetAttachment(),N=(0,i.I0)(),{call:x}=(0,Ie.Z)(),{createNotification:v}=(0,hn.Z)(),{createModal:w}=(0,In.Z)(),D=(0,o.useRef)(),S=useMoveToFolder(),[O=[]]=useFolders(),[A=[]]=useLabels(),C=useMarkAs(),E=useGetMessageKeys(),[{Shortcuts:L=0}={}]=useMailSettings(),handleMove=(e,n)=>async()=>{var r;null===(r=D.current)||void 0===r||r.call(D);const a=getFolderName(e,O);await S([t.data||{}],e,a,n)},handleUnread=async()=>{var n,r;(null===(n=D.current)||void 0===n||n.call(D),l(),isConversationMode(e,b,I))?null===(r=g.current)||void 0===r||r.focus():a();C([t.data],e,zv.UNREAD),await x()},handleConfirmPhishing=async()=>{var e,n;await f((0,xle._j)({MessageID:null===(e=t.data)||void 0===e?void 0:e.ID,MIMEType:"text/plain"===(null===(n=t.data)||void 0===n?void 0:n.MIMEType)?"text/plain":"text/html",Body:t.decryptedBody})),await S([t.data||{}],cde,"","",!0),v({text:(0,u.c)("Success").t(Cle||(Cle=(0,d.Z)(["Phishing reported"])))}),a()},handlePhishing=()=>{w((0,j.jsx)(modal_Confirm,{title:(0,u.c)("Info").t(Ele||(Ele=(0,d.Z)(["Confirm phishing report"]))),onConfirm:handleConfirmPhishing,onClose:c.ZT,children:(0,j.jsx)(Cn.Z,{className:"mb1",type:"warning",children:(0,u.c)("Info").t(Lle||(Lle=(0,d.Z)(["Reporting a message as a phishing attempt will send the message to us, so we can analyze it and improve our filters. This means that we will be able to see the contents of the message in full."])))})}))},handleDelete=async()=>{var e;await new Promise(((e,t)=>{w((0,j.jsx)(modal_Confirm,{title:getDeleteTitle(!1,!1,1),confirm:(0,j.jsx)(po,{type:"submit",children:(0,u.c)("Action").t(Ple||(Ple=(0,d.Z)(["Delete"])))}),onConfirm:()=>e(void 0),onClose:t,children:(0,j.jsx)(Cn.Z,{className:"mb1",type:"error",children:getModalText(!1,!1,1)})}))})),await f((0,En.qP)([null===(e=t.data)||void 0===e?void 0:e.ID])),await x(),v({text:getNotificationText(!1,!1,1)})},handleHeaders=()=>{w((0,j.jsx)(modals_MessageHeadersModal,{message:t.data}))},onUpdateAttachment=(e,t)=>{N(Bh({ID:e,attachment:t}))},handleExport=async()=>{const n=await E(t.data),{Subject:r=""}=t.data||{},a=(o=elements_getDate(t.data,e),(0,Et.Z)(o,"yyyy-MM-dd'T'HH_mm_ssxxx",{locale:kt.RW}));var o;const s=await exportBlob(t,n,M,onUpdateAttachment,f),i="".concat(r," ").concat(a,".eml");helpers_downloadFile(s,i)},handlePrint=async()=>{w((0,j.jsx)(modals_MessagePrintModal,{message:t,labelID:e}))},P=(null===(y=t.data)||void 0===y?void 0:y.LabelIDs)||[],Z=[(null===(h=t.data)||void 0===h?void 0:h.ID)||""],T=P.includes(cde),k=P.includes(ide),z=getCurrentFolderID(P,O),{isNarrow:_}=m,R=_?[({onClose:e})=>(0,j.jsx)(dropdown_CustomFilterDropdown,{message:t.data,onClose:e}),({onClose:e,onLock:t})=>(0,j.jsx)(dropdown_MoveDropdown,{labelID:z,selectedIDs:Z,conversationMode:!1,onClose:e,onLock:t,onBack:a,breakpoints:m}),({onClose:t,onLock:n})=>(0,j.jsx)(dropdown_LabelDropdown,{labelID:e,labels:A,selectedIDs:Z,onClose:t,onLock:n,breakpoints:m})]:void 0,G=L?(0,j.jsxs)(j.Fragment,{children:[(0,u.c)("Title").t(Zle||(Zle=(0,d.Z)(["Move to inbox (not spam)"]))),(0,j.jsx)("br",{}),(0,j.jsx)("kbd",{className:"no-border",children:"I"})]}):(0,u.c)("Title").t(Tle||(Tle=(0,d.Z)(["Move to inbox (not spam)"]))),Y=L?(0,j.jsxs)(j.Fragment,{children:[(0,u.c)("Title").t(kle||(kle=(0,d.Z)(["Mark as unread"]))),(0,j.jsx)("br",{}),(0,j.jsx)("kbd",{className:"no-border",children:"U"})]}):(0,u.c)("Title").t(zle||(zle=(0,d.Z)(["Mark as unread"]))),U=L?(0,j.jsxs)(j.Fragment,{children:[(0,u.c)("Title").t(_le||(_le=(0,d.Z)(["Move to inbox"]))),(0,j.jsx)("br",{}),(0,j.jsx)("kbd",{className:"no-border",children:"I"})]}):(0,u.c)("Title").t(Rle||(Rle=(0,d.Z)(["Move to inbox"]))),F=L?(0,j.jsxs)(j.Fragment,{children:[(0,u.c)("Title").t(Gle||(Gle=(0,d.Z)(["Move to trash"]))),(0,j.jsx)("br",{}),(0,j.jsx)("kbd",{className:"no-border",children:"T"})]}):(0,u.c)("Title").t(Yle||(Yle=(0,d.Z)(["Move to trash"])));return(0,j.jsxs)(xc,{className:"mr1 mb0-5",children:[T?(0,j.jsx)(ur.Z,{title:G,children:(0,j.jsx)(Ea.Z,{icon:!0,disabled:!n,onClick:handleMove(sde,cde),children:(0,j.jsx)(pr.Z,{name:"fire-slash",alt:(0,u.c)("Title").t(Ule||(Ule=(0,d.Z)(["Move to inbox (not spam)"])))})})}):(0,j.jsx)(ur.Z,{title:Y,children:(0,j.jsx)(Ea.Z,{icon:!0,disabled:!n,onClick:handleUnread,"data-testid":"message-header-expanded:mark-as-unread",children:(0,j.jsx)(pr.Z,{name:"eye-slash",alt:(0,u.c)("Title").t(Fle||(Fle=(0,d.Z)(["Mark as unread"])))})})}),k?(0,j.jsx)(ur.Z,{title:U,children:(0,j.jsx)(Ea.Z,{icon:!0,disabled:!n,onClick:handleMove(sde,ide),children:(0,j.jsx)(pr.Z,{name:"inbox",alt:(0,u.c)("Title").t(Kle||(Kle=(0,d.Z)(["Move to inbox"])))})})}):(0,j.jsx)(ur.Z,{title:F,children:(0,j.jsx)(Ea.Z,{icon:!0,disabled:!n,onClick:handleMove(ide,z),"data-testid":"message-header-expanded:move-to-trash",children:(0,j.jsx)(pr.Z,{name:"trash",alt:(0,u.c)("Title").t(Ble||(Ble=(0,d.Z)(["Move to trash"])))})})}),(0,j.jsx)(header_HeaderDropdown,{icon:!0,disabled:!n,autoClose:!0,title:(0,u.c)("Title").t(Wle||(Wle=(0,d.Z)(["More"]))),content:(0,j.jsx)(pr.Z,{name:"angle-down",className:"caret-like",alt:(0,u.c)("Title").t(Vle||(Vle=(0,d.Z)(["More options"])))}),hasCaret:!1,additionalDropdowns:R,"data-testid":"message-header-expanded:more-dropdown",children:({onClose:e,onOpenAdditionnal:t})=>(D.current=e,(0,j.jsxs)(dropdown_DropdownMenu,{children:[_&&(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap",onClick:()=>t(0),children:[(0,j.jsx)(pr.Z,{name:"filter",className:"mr0-5 mt0-25"}),(0,j.jsx)("span",{className:"flex-item-fluid mtauto mbauto",children:(0,u.c)("Action").t(Qle||(Qle=(0,d.Z)(["Filter on..."])))})]}),_&&(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap",onClick:()=>t(1),children:[(0,j.jsx)(pr.Z,{name:"folder",className:"mr0-5 mt0-25"}),(0,j.jsx)("span",{className:"flex-item-fluid mtauto mbauto",children:(0,u.c)("Action").t(Hle||(Hle=(0,d.Z)(["Move to..."])))})]}),_&&(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap",onClick:()=>t(2),children:[(0,j.jsx)(pr.Z,{name:"tag",className:"mr0-5 mt0-25"}),(0,j.jsx)("span",{className:"flex-item-fluid mtauto mbauto",children:(0,u.c)("Action").t(Xle||(Xle=(0,d.Z)(["Label as..."])))})]}),T?(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap",onClick:handleUnread,children:[(0,j.jsx)(pr.Z,{name:"eye-slash",className:"mr0-5 mt0-25"}),(0,j.jsx)("span",{className:"flex-item-fluid mtauto mbauto",children:(0,u.c)("Action").t(Jle||(Jle=(0,d.Z)(["Mark as unread"])))})]}):(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap",onClick:handleMove(cde,z),children:[(0,j.jsx)(pr.Z,{name:"fire",className:"mr0-5 mt0-25"}),(0,j.jsx)("span",{className:"flex-item-fluid mtauto mbauto",children:(0,u.c)("Action").t(qle||(qle=(0,d.Z)(["Move to spam"])))})]}),k?(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap",onClick:handleDelete,children:[(0,j.jsx)(pr.Z,{name:"circle-xmark",className:"mr0-5 mt0-25"}),(0,j.jsx)("span",{className:"flex-item-fluid mtauto mbauto",children:(0,u.c)("Action").t($le||($le=(0,d.Z)(["Delete"])))})]}):null,(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap",onClick:handlePhishing,children:[(0,j.jsx)(pr.Z,{name:"hook",className:"mr0-5 mt0-25"}),(0,j.jsx)("span",{className:"flex-item-fluid mtauto mbauto",children:(0,u.c)("Action").t(ede||(ede=(0,d.Z)(["Report phishing"])))})]}),!r&&(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap",onClick:()=>p(!0),children:[(0,j.jsx)(pr.Z,{name:"code",className:"mr0-5 mt0-25"}),(0,j.jsx)("span",{className:"flex-item-fluid mtauto mbauto",children:(0,u.c)("Action").t(tde||(tde=(0,d.Z)(["View source code"])))})]}),r&&(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap",onClick:()=>p(!1),children:[(0,j.jsx)(pr.Z,{name:"window-image",className:"mr0-5 mt0-25"}),(0,j.jsx)("span",{className:"flex-item-fluid mtauto mbauto",children:(0,u.c)("Action").t(nde||(nde=(0,d.Z)(["View rendered HTML"])))})]}),(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap",onClick:handleHeaders,children:[(0,j.jsx)(pr.Z,{name:"window-terminal",className:"mr0-5 mt0-25"}),(0,j.jsx)("span",{className:"flex-item-fluid mtauto mbauto",children:(0,u.c)("Action").t(rde||(rde=(0,d.Z)(["View headers"])))})]}),(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap",onClick:handleExport,children:[(0,j.jsx)(pr.Z,{name:"arrow-up-from-screen",className:"mr0-5 mt0-25"}),(0,j.jsx)("span",{className:"flex-item-fluid mtauto mbauto",children:(0,u.c)("Action").t(ade||(ade=(0,d.Z)(["Export"])))})]}),(0,j.jsxs)(Do.Z,{className:"text-left flex flex-nowrap",onClick:handlePrint,children:[(0,j.jsx)(pr.Z,{name:"printer",className:"mr0-5 mt0-25"}),(0,j.jsx)("span",{className:"flex-item-fluid mtauto mbauto",children:(0,u.c)("Action").t(ode||(ode=(0,d.Z)(["Print"])))})]})]}))})]})};const lde=["numberOfElements","className"];function NumberOfElementsBubble_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function NumberOfElementsBubble_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?NumberOfElementsBubble_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NumberOfElementsBubble_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var dde,spy_tracker_NumberOfElementsBubble=e=>{let{numberOfElements:t,className:n}=e,r=(0,Sn.Z)(e,lde);return(0,j.jsx)("span",NumberOfElementsBubble_objectSpread(NumberOfElementsBubble_objectSpread({},r),{},{className:(0,ht.dh)([n,"number-of-elements-icon-bubble bg-primary rounded50 text-center text-sm m0 lh130",t>9&&"item-spy-tracker-icon-bubble--9plus"]),children:t>9?"9+":t}))};var ude,pde,spy_tracker_SpyTrackerIcon=({numberOfTrackers:e,needsMoreProtection:t,title:n,className:r,openSpyTrackerModal:a})=>(0,j.jsxs)("div",{className:(0,ht.dh)(["relative inline-flex mr0-1 item-spy-tracker-link flex-align-items-center",r]),children:[(0,j.jsx)(pr.Z,{name:"shield",size:16,alt:n,"data-testid":"privacy:tracker-icon",className:(0,ht.dh)([t&&0===e?"color-weak":"color-primary","relative inline-flex mr0-1 item-spy-tracker-link flex-align-items-center cursor-pointer",r]),onClick:a}),e>0&&(0,j.jsx)(spy_tracker_NumberOfElementsBubble,{numberOfElements:e,className:"absolute","data-testid":"privacy:icon-number-of-trackers","aria-label":(0,u.c)("Info").ngettext((0,u.msgid)(dde||(dde=(0,d.Z)([""," email tracker blocked"])),e),"".concat(e," email trackers blocked"),e)})]});const mde=["defaultIsExpanded","children","headerContent","openText","closeText","showButton"];function Collapsible_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Collapsible_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Collapsible_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Collapsible_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const gde=!0;var jde,collapsible_Collapsible=e=>{let{defaultIsExpanded:t=gde,children:n,headerContent:r,openText:a=(0,u.c)("Collapsible tooltip").t(ude||(ude=(0,d.Z)(["Open"]))),closeText:s=(0,u.c)("Collapsible tooltip").t(pde||(pde=(0,d.Z)(["Close"]))),showButton:i=!0}=e,c=(0,Sn.Z)(e,mde);const[l,p]=(0,o.useState)(t),m=l?s:a,g=(0,ht.D)("collapsible"),b=(0,ht.D)("collapsible");return(0,j.jsxs)("div",Collapsible_objectSpread(Collapsible_objectSpread({},c),{},{children:[(0,j.jsxs)("header",{className:"flex flex-nowrap flex-align-items-center",children:[(0,j.jsx)("div",{id:b,className:"flex-item-fluid",children:r}),i&&(0,j.jsx)(ur.Z,{title:m,children:(0,j.jsxs)(VI.Z,{className:"flex flex-item-noshrink ml0-5",onClick:()=>p((e=>!e)),icon:!0,"aria-expanded":l,"aria-controls":g,type:"button",shape:"ghost",color:"weak",children:[(0,j.jsx)(pr.Z,{name:"angle-down",className:"caret-like"}),(0,j.jsx)("span",{className:"sr-only",children:m})]})})]}),(0,j.jsx)("div",{id:g,role:"region","aria-labelledby":b,hidden:!l,"aria-hidden":!l,children:n})]}))};const bde=["id","preventTracking"];function PreventTrackingToggle_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var yde,hde,Ide,fde,Mde,Nde,xde,vde,wde,Dde,Sde,Ode,emailPrivacy_PreventTrackingToggle=e=>{let{id:t,preventTracking:n}=e,r=(0,Sn.Z)(e,bde);const[a,o]=(0,no.Z)(),{createNotification:s}=(0,hn.Z)(),{call:i}=(0,Ie.Z)(),c=(0,Dn.Z)(),{state:l,toggle:p}=(0,lr.Z)((0,N.jl)(n,M.C8.PROXY));return(0,j.jsx)(cm,function PreventTrackingToggle_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PreventTrackingToggle_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PreventTrackingToggle_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:t,checked:l,onChange:({target:e})=>o((async e=>{e||await c((0,Fg.bC)(M.C8.INCORPORATOR,"remove")),await c((0,Fg.bC)(M.C8.PROXY,e?"add":"remove")),await i(),p(),s({text:(0,u.c)("Success").t(jde||(jde=(0,d.Z)(["Preference saved"])))})})(e.checked)),loading:a},r))};function useMessageTrackers_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function useMessageTrackers_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?useMessageTrackers_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):useMessageTrackers_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const useMessageTrackers=({message:e,isDetails:t=!1})=>{var n;const[r]=useMailSettings(),{createModal:a}=(0,In.Z)(),[s,i]=(0,o.useState)(""),[c,l]=(0,o.useState)(""),p=(null!=r&&r.ImageProxy?r.ImageProxy:0)>M.C8.NONE,m=(0,N.jl)(null!=r&&r.ShowImages?r.ShowImages:0,M.pn.REMOTE),g=null===(n=e.messageImages)||void 0===n?void 0:n.images.filter((e=>e.tracker)),b=(null==g?void 0:g.length)||0,y=!p&&!m;(0,o.useEffect)((()=>{let e,t;y?(e=(0,u.c)("Info").t(yde||(yde=(0,d.Z)(["Email tracker protection is disabled"]))),t=(0,u.c)("Info").t(hde||(hde=(0,d.Z)(["Email trackers can violate your privacy. Turn on tracker protection to prevent senders from knowing whether and when you have opened a message."])))):p&&0===b?(e=(0,u.c)("Info").t(Ide||(Ide=(0,d.Z)(["No email trackers found"]))),t=(0,u.c)("Info").t(fde||(fde=(0,d.Z)(["Email trackers can violate your privacy. Proton did not find any trackers on this message."])))):(e=(0,u.c)("Info").ngettext((0,u.msgid)(Mde||(Mde=(0,d.Z)([""," email tracker blocked"])),b),"".concat(b," email trackers blocked"),b),t=(0,u.c)("Info").ngettext((0,u.msgid)(Nde||(Nde=(0,d.Z)(["Email trackers can violate your privacy. Proton found and blocked "," tracker."])),b),"Email trackers can violate your privacy. Proton found and blocked ".concat(b," trackers."),b)),i(e),l(t)}),[b,y,p,t]);const getHeaderContent=e=>(0,j.jsxs)("div",{className:"flex flex-align-items-center",children:[(0,j.jsx)("div",{className:"flex-item-fluid text-break",children:e.name}),(0,j.jsx)(spy_tracker_NumberOfElementsBubble,{numberOfElements:e.urls.length,className:"flex-item-noshrink","data-testid":"privacy:icon-number-of-trackers","aria-label":(0,u.c)("Info").ngettext((0,u.msgid)(xde||(xde=(0,d.Z)([""," email tracker blocked"])),b),"".concat(b," email trackers blocked"),b)})]});return{hasProtection:p,hasShowImage:m,numberOfTrackers:b,needsMoreProtection:y,title:s,openSpyTrackerModal:()=>{const e=(0,j.jsx)(Tu.Z,{url:ve.WV,children:(0,u.c)("Info").t(vde||(vde=(0,d.Z)(["Learn more"])))});if(y)a((0,j.jsxs)(modal_Confirm,{title:s,confirm:(0,u.c)("Action").t(wde||(wde=(0,d.Z)(["OK"]))),cancel:null,small:!1,children:[c,(0,j.jsx)("div",{children:e}),(0,j.jsxs)("div",{className:"mt1",children:[(0,j.jsx)(emailPrivacy_PreventTrackingToggle,{id:"preventTrackingToggle",preventTracking:(null==r?void 0:r.ImageProxy)||0,"data-testid":"privacy:prevent-tracking-toggle"}),(0,j.jsx)("span",{className:"ml0-5",children:(0,u.c)("Action").t(Dde||(Dde=(0,d.Z)(["Turn on tracker protection"])))})]})]}));else if(p&&0===b)a((0,j.jsxs)(modal_Confirm,{title:s,confirm:(0,u.c)("Action").t(Sde||(Sde=(0,d.Z)(["Got it"]))),cancel:null,small:!1,children:[c,(0,j.jsx)("div",{children:e})]}));else{const t=(()=>{const e=[];return null==g||g.forEach((t=>{const n=e.findIndex((e=>e.name===t.tracker));let r="";"cloc"in t?r=t.cloc:"originalURL"in t&&(r=t.originalURL||""),n<0?e.push({name:t.tracker||"",urls:[r]}):e[n]=useMessageTrackers_objectSpread(useMessageTrackers_objectSpread({},e[n]),{},{urls:[...e[n].urls,r]})})),e})();a((0,j.jsxs)(modal_Confirm,{title:s,confirm:(0,u.c)("Action").t(Ode||(Ode=(0,d.Z)(["Got it"]))),cancel:null,small:!1,children:[c,(0,j.jsx)("div",{className:"mb1",children:e}),t.map(((e,t)=>(0,j.jsx)(collapsible_Collapsible,{headerContent:getHeaderContent(e),defaultIsExpanded:!1,className:(0,ht.dh)(["border-bottom border---weak",0===t&&"border-top"]),children:e.urls.map(((t,n)=>(0,j.jsx)("p",{className:"color-weak text-break mb0-5 mt0-5",children:t},"".concat(e.name,"-").concat(n,"-tracker"))))},e.name)))]}))}}}};var Ade,Cde,Ede,Lde,Pde;function HeaderExpandedDetails_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function HeaderExpandedDetails_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?HeaderExpandedDetails_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HeaderExpandedDetails_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Zde,Tde,header_HeaderExpandedDetails=({labelID:e,labels:t,message:n,messageViewIcons:r,mailSettings:a,onAttachmentIconClick:o})=>{var s;const{feature:i}=(0,nN.Z)(y.P.SpyTrackerProtection),c=r.globalIcon,[l=[]]=useFolders(),p=getCurrentFolders(n.data,e,l,a).map((e=>e.name)).join(", "),m=helpers_humanSize(elements_getSize(n.data||{})),{hasProtection:g,hasShowImage:b,numberOfTrackers:h,needsMoreProtection:I,title:f,openSpyTrackerModal:M}=useMessageTrackers({message:n,isDetails:!0}),N=!(!g&&b&&0===h)&&(null==i?void 0:i.Value),{pureAttachmentsCount:x,embeddedAttachmentsCount:v}=getAttachmentCounts(getAttachments(n.data),n.messageImages),w=[];x&&w.push((0,u.c)("Info").ngettext((0,u.msgid)(Ade||(Ade=(0,d.Z)([""," file attached"])),x),"".concat(x," files attached"),x)),v&&w.push((0,u.c)("Info").ngettext((0,u.msgid)(Cde||(Cde=(0,d.Z)([""," embedded image"])),v),"".concat(v," embedded images"),v));const D=w.join(", "),S=((null===(s=n.data)||void 0===s?void 0:s.LabelIDs)||[]).filter((e=>labels_isCustomLabel(e,t)));return(0,j.jsxs)("div",{className:"message-detailed-header-extra border-top pt0-5","data-testid":"message:message-expanded-header-extra",children:[c&&(0,j.jsxs)("div",{className:"mb0-5 flex flex-nowrap flex-align-items-center",children:[(0,j.jsx)("span",{className:"container-to flex flex-justify-center",children:(0,j.jsx)(message_EncryptionStatusIcon,HeaderExpandedDetails_objectSpread({useTooltip:!1},c))}),(0,j.jsx)("span",{className:"text-ellipsis",title:c.text,children:c.text})]}),(0,j.jsxs)("div",{className:"mb0-5 flex flex-nowrap",children:[(0,j.jsx)("span",{className:"container-to flex",children:(0,j.jsx)(pr.Z,{name:"calendar-days",className:"mauto",alt:(0,u.c)("Label").t(Ede||(Ede=(0,d.Z)(["Date:"])))})}),(0,j.jsx)("span",{className:"flex-align-self-center mr0-5 text-ellipsis",children:(0,j.jsx)(list_ItemDate,{element:n.data,labelID:e,mode:"full"})})]}),(0,j.jsxs)("div",{className:"mb0-5 flex flex-nowrap",children:[(0,j.jsx)("span",{className:"container-to flex",children:(0,j.jsx)("span",{className:"mauto flex",children:(0,j.jsx)(list_ItemLocation,{element:n.data,labelID:e,shouldStack:!0,showTooltip:!1,withDefaultMargin:!1,ignoreIconFilter:!0})})}),(0,j.jsx)("span",{className:"flex-align-self-center mr0-5 text-ellipsis",title:p,children:p})]}),(0,j.jsxs)("div",{className:"mb0-5 flex flex-nowrap",children:[(0,j.jsx)("span",{className:"container-to flex",children:(0,j.jsx)(pr.Z,{name:"filing-cabinet",className:"mauto",alt:(0,u.c)("Label").t(Lde||(Lde=(0,d.Z)(["Size:"])))})}),(0,j.jsx)("span",{className:"flex-align-self-center mr0-5 text-ellipsis",title:m,children:m})]}),D&&(0,j.jsxs)("div",{className:"mb0-5 flex flex-nowrap",children:[(0,j.jsx)("span",{className:"container-to flex flex-justify-center flex-align-items-center",children:(0,j.jsx)(list_ItemAttachmentIcon,{element:n.data,onClick:o})}),(0,j.jsx)("span",{className:"flex-align-self-center mr0-5 text-ellipsis",title:D,children:D})]}),N&&(0,j.jsxs)("div",{className:"mb0-5 flex flex-nowrap",children:[(0,j.jsx)("span",{className:"container-to relative inline-flex item-spy-tracker-link flex-align-items-center",children:(0,j.jsx)(spy_tracker_SpyTrackerIcon,{numberOfTrackers:h,needsMoreProtection:I,title:f,className:"mauto",openSpyTrackerModal:M})}),(0,j.jsx)("span",{className:"flex-align-self-center mr0-5 text-ellipsis",title:f,children:f})]}),S.length>0&&(0,j.jsxs)("div",{className:"mb0-5 flex flex-nowrap",children:[(0,j.jsx)("span",{className:"container-to flex",children:(0,j.jsx)(pr.Z,{name:"tag",className:"mauto",alt:(0,u.c)("Label").t(Pde||(Pde=(0,d.Z)(["Labels:"])))})}),(0,j.jsx)(list_ItemLabels,{isCollapsed:!1,element:n.data,labelID:e,labels:t,showUnlabel:!0})]})]})};var kde,zde,_de,Rde,Gde,Yde,Ude,Fde,Kde,Bde,Wde,Vde,Qde,Hde,Xde,Jde,qde,$de,eue,tue,nue,rue,aue,oue,spy_tracker_ItemSpyTrackerIcon=({message:e,className:t})=>{const n=(0,o.useRef)(null),{hasProtection:r,hasShowImage:a,numberOfTrackers:s,needsMoreProtection:i,title:c,openSpyTrackerModal:l}=useMessageTrackers({message:e}),{show:p,onDisplayed:m}=hooks_useSpotlightOnFeature(y.P.SpotlightSpyTrackerProtection,s>0);return!r&&a&&0===s?null:(0,j.jsx)(spotlight_Spotlight,{originalPlacement:"top-right",show:p,onDisplayed:m,anchorRef:n,content:(0,j.jsxs)(j.Fragment,{children:[(0,u.c)("Spotlight").t(Zde||(Zde=(0,d.Z)(["To protect your privacy, Proton blocked email trackers in this message"]))),(0,j.jsx)("br",{}),(0,j.jsx)(Tu.Z,{url:"https://protonmail.com/support/email-tracker-protection",title:"Tracker protection",children:(0,u.c)("Info").t(Tde||(Tde=(0,d.Z)(["Learn more"])))})]}),children:(0,j.jsx)("div",{children:(0,j.jsx)(ur.Z,{title:c,"data-testid":"privacy:icon-tooltip",children:(0,j.jsx)("div",{className:(0,ht.dh)(["flex",t]),ref:n,children:(0,j.jsx)(spy_tracker_SpyTrackerIcon,{numberOfTrackers:s,needsMoreProtection:i,title:c,openSpyTrackerModal:l})})})})})};function HeaderExpanded_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function HeaderExpanded_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?HeaderExpanded_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HeaderExpanded_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var header_HeaderExpanded=({labelID:e,conversationMode:t,labels:n,message:r,messageViewIcons:a,isSentMessage:o,messageLoaded:s,bodyLoaded:i,sourceMode:c,onResignContact:l,onLoadRemoteImages:p,onLoadEmbeddedImages:m,mailSettings:g,onToggle:b,onBack:h,onSourceMode:I,breakpoints:f,labelDropdownToggleRef:M,moveDropdownToggleRef:N,filterDropdownToggleRef:x,highlightKeywords:w=!1,parentMessageRef:D})=>{var S,O,A,C,E,L,P,Z;const[T=[]]=(0,yn.ZP)(),[k=[]]=useFolders(),{state:z,toggle:_}=(0,lr.Z)(),R=[(null===(S=r.data)||void 0===S?void 0:S.ID)||""],G=getCurrentFolderID(null===(O=r.data)||void 0===O?void 0:O.LabelIDs,k),Y=r.sending,U=isOutbox(r.data),{feature:F}=(0,nN.Z)(y.P.SpyTrackerProtection),K=isScheduled(r.data),[{Shortcuts:B}={Shortcuts:0}]=useMailSettings(),W=useOnCompose(),handleAttachmentIconClick=()=>{(0,vo.zT)(D.current,{block:"end"})},handleCompose=e=>async()=>{W({action:e,referenceMessage:r})},V=q(r.data)&&!((e,t)=>!!t.find((({Email:t})=>(0,Xe.GZ)(t)===(0,Xe.GZ)(e||""))))(null===(A=r.data)||void 0===A?void 0:A.Sender.Address,T)&&(null===(C=r.verification)||void 0===C?void 0:C.signingPublicKey)&&(null===(E=r.verification)||void 0===E?void 0:E.verificationStatus)!==v.SIGNED_AND_VALID,Q=(0,j.jsx)(recipients_RecipientItem,{recipientOrGroup:{recipient:null===(L=r.data)||void 0===L?void 0:L.Sender},isLoading:!s,signingPublicKey:V?null===(P=r.verification)||void 0===P?void 0:P.signingPublicKey:void 0,highlightKeywords:w}),{isNarrow:H}=f,X=B?(0,j.jsxs)(j.Fragment,{children:[(0,u.c)("Title").t(kde||(kde=(0,d.Z)(["Reply"]))),(0,j.jsx)("br",{}),(0,j.jsx)("kbd",{className:"no-border",children:"R"})]}):(0,u.c)("Title").t(zde||(zde=(0,d.Z)(["Reply"]))),J=B?(0,j.jsxs)(j.Fragment,{children:[(0,u.c)("Title").t(_de||(_de=(0,d.Z)(["Reply all"]))),(0,j.jsx)("br",{}),(0,j.jsx)("kbd",{className:"no-border",children:mr.AI})," + ",(0,j.jsx)("kbd",{className:"no-border",children:"R"})]}):(0,u.c)("Title").t(Rde||(Rde=(0,d.Z)(["Reply all"]))),$=B?(0,j.jsxs)(j.Fragment,{children:[(0,u.c)("Title").t(Gde||(Gde=(0,d.Z)(["Forward"]))),(0,j.jsx)("br",{}),(0,j.jsx)("kbd",{className:"no-border",children:mr.AI})," + ",(0,j.jsx)("kbd",{className:"no-border",children:"F"})]}):(0,u.c)("Title").t(Yde||(Yde=(0,d.Z)(["Forward"]))),ee=B?(0,j.jsxs)(j.Fragment,{children:[(0,u.c)("Title").t(Ude||(Ude=(0,d.Z)(["Filter on"]))),(0,j.jsx)("br",{}),(0,j.jsx)("kbd",{className:"no-border",children:"F"})]}):(0,u.c)("Title").t(Fde||(Fde=(0,d.Z)(["Filter on"]))),te=B?(0,j.jsxs)(j.Fragment,{children:[(0,u.c)("Title").t(Kde||(Kde=(0,d.Z)(["Move to"]))),(0,j.jsx)("br",{}),(0,j.jsx)("kbd",{className:"no-border",children:"M"})]}):(0,u.c)("Title").t(Bde||(Bde=(0,d.Z)(["Move to"]))),ne=B?(0,j.jsxs)(j.Fragment,{children:[(0,u.c)("Title").t(Wde||(Wde=(0,d.Z)(["Label as"]))),(0,j.jsx)("br",{}),(0,j.jsx)("kbd",{className:"no-border",children:"L"})]}):(0,u.c)("Title").t(Vde||(Vde=(0,d.Z)(["Label as"])));return(0,j.jsxs)("div",{className:(0,ht.dh)(["message-header message-header-expanded",z&&"message-header--showDetails",o?"is-outbound":"is-inbound",!s&&"is-loading"]),"data-testid":"message-header-expanded:".concat(null===(Z=r.data)||void 0===Z?void 0:Z.Subject),children:[(0,j.jsxs)("div",{className:"flex flex-nowrap flex-align-items-center cursor-pointer",onClick:e=>{var t;e.target.closest(".stop-propagation")||null!==(t=window.getSelection())&&void 0!==t&&t.toString().length||document.querySelector(".dropdown")?e.stopPropagation():b()},children:[(0,j.jsx)("span",{className:"flex flex-item-fluid flex-nowrap mr0-5",children:z?(0,j.jsx)(recipients_RecipientType,{label:(0,u.c)("Label").t(Qde||(Qde=(0,d.Z)(["From:"]))),className:(0,ht.dh)(["flex flex-align-items-start flex-nowrap",!s&&"flex-item-fluid"]),children:Q}):(0,j.jsx)("div",{className:(0,ht.dh)(["flex flex-nowrap",!s&&"flex-item-fluid"]),children:Q})}),(0,j.jsxs)("div",{className:(0,ht.dh)(["message-header-metas-container flex flex-align-items-center flex-item-noshrink",H&&"flex-align-self-start"]),"data-testid":"message:message-header-metas",children:[s&&(U||Y)&&!K&&(0,j.jsx)("span",{className:"badge-label-primary mr0-5 flex-item-noshrink",children:(0,u.c)("Info").t(Hde||(Hde=(0,d.Z)(["Sending"])))}),s&&K&&(0,j.jsx)("span",{className:"badge-label-primary mr0-5 flex-item-noshrink",children:(0,u.c)("Info").t(Xde||(Xde=(0,d.Z)(["Scheduled"])))}),s&&!z&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("span",{className:"inline-flex",children:[(0,j.jsx)(list_ItemAction,{element:r.data,className:"flex-item-noshrink"}),(0,j.jsx)(message_EncryptionStatusIcon,HeaderExpanded_objectSpread(HeaderExpanded_objectSpread({},a.globalIcon),{},{className:"mr0-5"})),(0,j.jsx)(list_ItemLocation,{element:r.data,labelID:e})]}),!H&&(0,j.jsx)(list_ItemDate,{className:"ml0-5",element:r.data,labelID:e})]}),s&&z&&(0,j.jsx)("span",{className:"ml0-5 inline-flex",children:(0,j.jsx)(list_ItemAction,{element:r.data,className:"flex-item-noshrink"})}),!s&&(0,j.jsx)("span",{className:"message-header-metas ml0-5 inline-flex"}),(0,j.jsx)("span",{className:"message-header-star ml0-5 inline-flex",children:(0,j.jsx)(list_ItemStar,{element:r.data})})]})]}),(0,j.jsxs)("div",{className:(0,ht.dh)(["flex flex-nowrap flex-align-items-center mb0-5 on-mobile-flex-wrap",!z&&"mt0-5"]),children:[(0,j.jsxs)("div",{className:"flex-item-fluid flex flex-nowrap mr0-5 on-mobile-mr0 message-header-recipients",children:[z?(0,j.jsx)(recipients_RecipientsDetails,{message:r,mapStatusIcons:a.mapStatusIcon,isLoading:!s,highlightKeywords:w}):(0,j.jsx)(recipients_RecipientsSimple,{message:r.data,isLoading:!s,highlightKeywords:w}),(0,j.jsx)("span",{className:(0,ht.dh)(["message-show-hide-link-container flex-item-noshrink",z?"mt0-25 on-mobile-mt0-5":"ml0-5"]),children:s&&(0,j.jsx)(VM.Z,{onClick:_,className:"message-show-hide-link",disabled:!s,"data-testid":"message-show-details",children:z?(0,u.c)("Action").t(Jde||(Jde=(0,d.Z)(["Hide details"]))):H?(0,u.c)("Action").t(qde||(qde=(0,d.Z)(["Details"]))):(0,u.c)("Action").t($de||($de=(0,d.Z)(["Show details"])))})})]}),s&&!z&&!H&&(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("div",{className:"flex-item-noshrink flex flex-align-items-center message-header-expanded-label-container",children:[(0,j.jsx)(list_ItemLabels,{element:r.data,labelID:e,labels:n,showUnlabel:!0,maxNumber:5,className:"on-mobile-pt0-25 ml0-5"}),(null==F?void 0:F.Value)&&(0,j.jsx)(spy_tracker_ItemSpyTrackerIcon,{message:r,className:"ml0-5"}),(0,j.jsx)(list_ItemAttachmentIcon,{onClick:handleAttachmentIconClick,element:r.data,className:"ml0-5"})]})})]}),!z&&H&&(0,j.jsx)("div",{className:"flex flex-justify-space-between flex-align-items-center border-top pt0-5 mb0-5",children:s?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"flex flex-nowrap flex-align-items-center",children:[(0,j.jsx)(pr.Z,{name:"calendar-days",className:"ml0-5 mr0-5"}),(0,j.jsx)(list_ItemDate,{element:r.data,labelID:e})]}),(0,j.jsxs)("div",{className:"mlauto flex flex-nowrap flex-align-items-center",children:[(null==F?void 0:F.Value)&&(0,j.jsx)(spy_tracker_ItemSpyTrackerIcon,{message:r}),(0,j.jsx)(list_ItemLabels,{element:r.data,labelID:e,labels:n,showUnlabel:!0,maxNumber:1}),(0,j.jsx)(list_ItemAttachmentIcon,{onClick:handleAttachmentIconClick,element:r.data,className:"ml0-5"})]})]}):(0,j.jsx)("span",{className:"message-header-metas inline-flex"})}),z&&(0,j.jsx)(header_HeaderExpandedDetails,{labelID:e,message:r,messageViewIcons:a,labels:n,mailSettings:g,onAttachmentIconClick:handleAttachmentIconClick}),(0,j.jsx)(header_HeaderExtra,{message:r,sourceMode:c,onResignContact:l,messageLoaded:s,bodyLoaded:i,onLoadRemoteImages:p,onLoadEmbeddedImages:m}),(0,j.jsxs)("div",{className:"pt0-5 flex flex-justify-space-between border-top",children:[(0,j.jsxs)("div",{className:"flex",children:[(0,j.jsx)(header_HeaderMoreDropdown,{labelID:e,message:r,messageLoaded:s,sourceMode:c,onBack:h,onToggle:b,onSourceMode:I,breakpoints:f,"data-testid":"message-header-expanded:more-dropdown",parentMessageRef:D,mailSettings:g}),!H&&(0,j.jsxs)(xc,{className:"mr1 mb0-5",children:[(0,j.jsx)(header_HeaderDropdown,{icon:!0,autoClose:!1,content:(0,j.jsx)(pr.Z,{name:"filter",alt:(0,u.c)("Action").t(eue||(eue=(0,d.Z)(["Custom filter"])))}),className:"messageFilterDropdownButton",dropDownClassName:"customFilterDropdown",title:ee,loading:!s,externalToggleRef:x,"data-testid":"message-header-expanded:filter-dropdown",children:({onClose:e})=>(0,j.jsx)(dropdown_CustomFilterDropdown,{message:r.data,onClose:e})}),(0,j.jsx)(header_HeaderDropdown,{icon:!0,autoClose:!1,noMaxSize:!0,content:(0,j.jsx)(pr.Z,{name:"folder",alt:(0,u.c)("Action").t(tue||(tue=(0,d.Z)(["Move to"])))}),className:"messageMoveDropdownButton",dropDownClassName:"move-dropdown",title:te,loading:!s,externalToggleRef:N,"data-testid":"message-header-expanded:folder-dropdown",children:({onClose:e,onLock:n})=>(0,j.jsx)(dropdown_MoveDropdown,{labelID:G,selectedIDs:R,conversationMode:t,onClose:e,onLock:n,onBack:h,breakpoints:f})}),(0,j.jsx)(header_HeaderDropdown,{icon:!0,autoClose:!1,noMaxSize:!0,content:(0,j.jsx)(pr.Z,{name:"tag",alt:(0,u.c)("Action").t(nue||(nue=(0,d.Z)(["Label as"])))}),className:"messageLabelDropdownButton",dropDownClassName:"label-dropdown",title:ne,loading:!s,externalToggleRef:M,"data-testid":"message-header-expanded:label-dropdown",children:({onClose:t,onLock:r})=>(0,j.jsx)(dropdown_LabelDropdown,{labelID:e,labels:n,selectedIDs:R,onClose:t,onLock:r,breakpoints:f})})]})]}),!K&&(0,j.jsxs)(xc,{className:"mb0-5",children:[(0,j.jsx)(ur.Z,{title:X,children:(0,j.jsx)(Ea.Z,{icon:!0,disabled:!s||!i||Y,onClick:handleCompose(ve.Xh.REPLY),"data-testid":"message-view:reply",children:(0,j.jsx)(pr.Z,{name:"arrow-up-and-left-big",className:"on-rtl-mirror",alt:(0,u.c)("Title").t(rue||(rue=(0,d.Z)(["Reply"])))})})}),(0,j.jsx)(ur.Z,{title:J,children:(0,j.jsx)(Ea.Z,{icon:!0,disabled:!s||!i||Y,onClick:handleCompose(ve.Xh.REPLY_ALL),"data-testid":"message-view:reply-all",children:(0,j.jsx)(pr.Z,{name:"arrow-up-and-left-double-big",className:"on-rtl-mirror",alt:(0,u.c)("Title").t(aue||(aue=(0,d.Z)(["Reply all"])))})})}),(0,j.jsx)(ur.Z,{title:$,children:(0,j.jsx)(Ea.Z,{icon:!0,disabled:!s||!i||Y,onClick:handleCompose(ve.Xh.FORWARD),"data-testid":"message-view:forward",children:(0,j.jsx)(pr.Z,{name:"arrow-right-big",className:"on-rtl-mirror",alt:(0,u.c)("Title").t(oue||(oue=(0,d.Z)(["Forward"])))})})})]})]})]})};function useLoadImages_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function useLoadImages_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?useLoadImages_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):useLoadImages_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function useResignContact_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function useResignContact_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?useResignContact_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):useResignContact_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const sue=["keydata","addr"],iue=["prefer-encrypt"].concat(sue),extractKeysFromAutocrypt=async(e,t)=>{if(null==e||!e.Autocrypt)return[];const n=Array.isArray(e.Autocrypt)?e.Autocrypt:[e.Autocrypt];return(await Promise.all(n.map((async e=>{try{const n=((e="",t="")=>{let n=!1;const r=Object.fromEntries(e.split(";").map((e=>{const t=e.trim();if(t.startsWith("keydata="))try{const e=t.slice("keydata=".length);return["keydata",(0,Gt.h6)((0,Gt.NV)(e))]}catch(e){return["",""]}const[r="",a=""]=e.split("="),o=r.trim();return iue.includes(o)||o.startsWith("_")?[o,a.trim()]:(n=!0,["",""])})).filter((([e,t])=>e&&t)));if(!sue.some((e=>!r[e]))&&!n&&r.addr.toLowerCase()===t.toLowerCase()&&"mutual"===r["prefer-encrypt"])return r})(e,t);if(!n)return;const[r]=await(0,ku.RR)(n.keydata);return r}catch(e){return null}})))).filter(Za.Z)},useVerifyMessage=e=>{const t=(0,Dn.Z)(),n=useMessageCache(),r=useGetAttachment(),a=(0,i.I0)(),s=hooks_useGetEncryptionPreferences(),c=useGetMessageKeys(),{contactsMap:l}=useContactCache(),onUpdateAttachment=(e,t)=>{a(Bh({ID:e,attachment:t}))};return(0,o.useCallback)((async(a=new Uint8Array,o)=>{const getData=()=>n.get(e).data,i={};let d,u,p,m;try{const h=getData().Sender.Address;d=await s(h,0,l);const I=await c(getData());u=await(async(e,t,n,r)=>{try{let a,o,s;const i=getParsedHeadersFirstValue(n,"Content-Type");if(r.length&&t&&(a=(await(0,Rt.n5)({message:(0,Rt.tn)(e),signature:t,publicKeys:r})).verified),i===M.LO.MIME){const t=await JN({publicKeys:r},binaryToString(e));[o]=t.signatures,s=t.verified}return t||o?r.length?t?{verified:a,signature:t}:{verified:s,signature:o}:{verified:HN,signature:t}:{verified:XN,signature:void 0}}catch(e){return{verified:HN,verificationErrors:[e]}}})(a,o,getData(),d.pinnedKeys),m=await(async(e=[],t,n,r,a)=>{const o=e.filter((({Name:e,Size:t})=>"asc"===(0,To.EQ)(e)[1]&&(t||0)<ve.G1))||[];return(await Promise.all(o.map((async e=>{try{const{data:o}=await get(e,void 0,t,n,r,a),[s]=await(0,ku.RR)((0,Gt.Wf)(o));return s}catch(e){return null}})))).filter(Za.Z)})(getData().Attachments,I,r,onUpdateAttachment,t);const f=await extractKeysFromAutocrypt(getData().ParsedHeaders,h),N=[...d.pinnedKeys,...d.apiKeys,...m,...f];p=u.verified!==v.NOT_SIGNED&&u.signature?await(0,ku.ZM)(u.signature,N):void 0}catch(e){isNetworkError(e)?i.network=[e]:i.signature=[e]}finally{var g,j,b,y;updateMessageCache(n,e,{verification:{senderPinnedKeys:null===(g=d)||void 0===g?void 0:g.pinnedKeys,signingPublicKey:p,attachedPublicKeys:m,senderVerified:null===(j=d)||void 0===j?void 0:j.isContactSignatureVerified,verificationStatus:null===(b=u)||void 0===b?void 0:b.verified,verificationErrors:null===(y=u)||void 0===y?void 0:y.verificationErrors},errors:i})}}),[e,l])};var cue=n(10157);const lue=["input","select","textarea"],isTargetEditable=e=>{const{tagName:t,isContentEditable:n}=e.target;return lue.includes(t.toLowerCase())||n},{DRAFTS:due,SENT:uue,TRASH:pue,SPAM:mue,ARCHIVE:gue,INBOX:jue,STARRED:bue,ALL_MAIL:yue}=M.C7,useFolderNavigationHotkeys=()=>{const e=(0,s.k6)(),[{Shortcuts:t=0}={}]=useMailSettings(),setFocusOnSidebar=()=>{const e=document.querySelector('[data-shortcut-target~="navigation-link"][aria-current="page"]');null==e||e.focus()},navigateTo=t=>{e.push("/".concat(ve.Y4[t]))};return t?[["G","I",e=>{isTargetEditable(e)||(e.stopPropagation(),e.preventDefault(),navigateTo(jue),setFocusOnSidebar())}],["G","D",e=>{isTargetEditable(e)||(e.stopPropagation(),e.preventDefault(),navigateTo(due),setFocusOnSidebar())}],["G","E",e=>{isTargetEditable(e)||(e.stopPropagation(),e.preventDefault(),navigateTo(uue),setFocusOnSidebar())}],["G",cue.u.Star,e=>{isTargetEditable(e)||(e.stopPropagation(),e.preventDefault(),navigateTo(bue),setFocusOnSidebar())}],["G","A",e=>{isTargetEditable(e)||(e.stopPropagation(),e.preventDefault(),navigateTo(gue),setFocusOnSidebar())}],["G","S",e=>{isTargetEditable(e)||(e.stopPropagation(),e.preventDefault(),navigateTo(mue),setFocusOnSidebar())}],["G","T",e=>{isTargetEditable(e)||(e.stopPropagation(),e.preventDefault(),navigateTo(pue),setFocusOnSidebar())}],["G","M",e=>{isTargetEditable(e)||(e.stopPropagation(),e.preventDefault(),navigateTo(yue),setFocusOnSidebar())}]]:[]},{TRASH:hue,SPAM:Iue,ARCHIVE:fue,INBOX:Mue}=M.C7;var Nue;!function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN"}(Nue||(Nue={}));const MessageView=({labelID:e,conversationMode:t,loading:n,labels:r=[],message:a,mailSettings:l,conversationIndex:d=0,conversationID:u,onBack:p,breakpoints:m,onFocus:g=c.ZT,onMessageReady:b,columnLayout:y=!1,isComposerOpened:h,containerRef:I,wrapperRef:f,highlightKeywords:N=!1},x)=>{var v,w,D,S,O,A;const getInitialExpand=()=>!t&&!messages_isDraft(a)&&!isOutbox(a),[C,E]=(0,o.useState)(getInitialExpand),{isSearchResult:L}=useEncryptedSearchContext(),P=L(a.ID)&&isMessageForwarded(a.Subject),[Z,T]=(0,o.useState)(P),[k,z]=(0,o.useState)(!1),_=(0,o.useRef)(null),{message:R,messageLoaded:G,bodyLoaded:Y}=useMessage(a.ID,u),U=useLoadMessage(a),F=useInitializeMessage(R.localID,e),K=useVerifyMessage(R.localID),B=(e=>{const t=(0,Dn.Z)(),n=useMessageCache(),[r]=useMailSettings();return(0,o.useCallback)((async()=>{const a=n.get(e),{remoteImages:o}=transformRemote(useLoadImages_objectSpread(useLoadImages_objectSpread({},a),{},{messageImages:updateImages(a.messageImages,{showRemoteImages:!0},void 0,void 0)}),r,t,n);updateMessageCache(n,e,{document:a.document,messageImages:updateImages(a.messageImages,{showRemoteImages:!0},o,void 0)})}),[e])})(R.localID),W=(e=>{const t=(0,Dn.Z)(),n=useMessageCache(),r=useGetAttachment(),a=(0,i.I0)(),s=useGetMessageKeys(),[c]=useMailSettings(),onUpdateAttachment=(e,t)=>{a(Bh({ID:e,attachment:t}))};return(0,o.useCallback)((async()=>{const a=n.get(e),o=await s(a.data),{embeddedImages:i}=await transformEmbedded(useLoadImages_objectSpread(useLoadImages_objectSpread({},a),{},{messageImages:updateImages(a.messageImages,{showEmbeddedImages:!0},void 0,void 0)}),o,n,r,onUpdateAttachment,t,c);updateMessageCache(n,e,{document:a.document,messageImages:updateImages(a.messageImages,{showEmbeddedImages:!0},void 0,i)})}),[e])})(R.localID),V=(e=>{const t=hooks_useGetEncryptionPreferences(),n=useMessageCache(),r=(0,Dn.Z)();return(0,o.useCallback)((async()=>{var a;const o=n.get(e),s=null===(a=(await loadMessage(o,r)).data.Sender)||void 0===a?void 0:a.Address;if(!s||!o.verification)return;const{isContactSignatureVerified:i}=await t(s);updateMessageCache(n,e,{verification:useResignContact_objectSpread(useResignContact_objectSpread({},o.verification),{},{senderVerified:i})})}),[e])})(R.localID),Q=useMarkAs(),H=useOnCompose(),X=!n&&messages_isDraft(R.data),J=!n&&(isOutbox(R.data)||R.sending),q=te(R.data),$=elements_isUnread(R.data,e),ee=hasAttachments(R.data)&&Array.isArray(null===(v=R.data)||void 0===v?void 0:v.Attachments),ne=(0,o.useMemo)((()=>q?(e=>{var t;if(null===(t=e.data)||void 0===t||!t.ParsedHeaders)return{mapStatusIcon:{}};const n=getMapEmailHeaders(getParsedHeadersFirstValue(e.data,"X-Pm-Recipient-Authentication")),r=getMapEmailHeaders(getParsedHeadersFirstValue(e.data,"X-Pm-Recipient-Encryption")),a=getParsedHeadersFirstValue(e.data,"X-Pm-Content-Encryption");return{globalIcon:getSentStatusIcon({mapAuthentication:n,mapEncryption:r,contentEncryption:a}),mapStatusIcon:Object.keys(n).reduce(((e,t)=>(e[t]=getSentStatusIcon({mapAuthentication:n,mapEncryption:r,contentEncryption:a,emailAddress:t}),e)),{})}})(R):{globalIcon:getReceivedStatusIcon(R.data,R.verification),mapStatusIcon:{}}),[R]),handleLoadRemoteImages=async()=>{await B()},handleLoadEmbeddedImages=async()=>{await W()},handleToggle=e=>()=>{!X||J?E(e):H({existingDraft:R,fromUndo:!1})},toggleOriginalMessage=()=>T(!Z),setParentBottomPadding=e=>{if(!_.current)return;const t=_.current.parentNode;t.classList.add("pb-custom"),t.style.setProperty("--padding-bottom-custom","".concat(e,"px"))},scrollToMessage=()=>{if(!_.current||null==I||!I.current||null==f||!f.current)return;setParentBottomPadding(0);const{offsetHeight:e}=I.current,t=I.current.firstChild,{offsetHeight:n}=t,r=n+.25*(e-n);if(_.current.offsetTop-r<I.current.scrollTop)return;const a=parseInt(getComputedStyle(f.current).paddingBottom,10),o=parseInt(getComputedStyle(f.current).paddingTop,10);setParentBottomPadding(Math.max(e-r-_.current.offsetHeight+a+o,0)),helpers_createScrollIntoView(_.current,I.current,!1,r)};(0,o.useImperativeHandle)(x,(()=>({expand:()=>{var e,t;messages_isDraft(R.data)||(E(!0),y||null===(e=_.current)||void 0===e||null===(t=e.parentElement)||void 0===t||t.focus())}}))),(0,o.useEffect)((()=>{var e,t;(n||G||U(),!h&&messages_isDraft(R.data)&&G)&&(b&&setTimeout(b),y||null===(e=_.current)||void 0===e||null===(t=e.parentElement)||void 0===t||t.focus())}),[n,G,Y,null===(w=R.data)||void 0===w?void 0:w.ID]),(0,o.useEffect)((()=>{if(!n&&C&&void 0===R.initialized){if((R.loadRetry||0)>ve.Z1)return;F()}}),[n,C,R.initialized]),(0,o.useEffect)((()=>{!n&&C&&R.initialized&&R.data&&void 0===R.verification&&K(R.decryptedRawContent,R.signature)}),[n,C,R.initialized,R.verification]),(0,o.useEffect)((()=>{C&&scrollToMessage()}),[C]),(0,o.useEffect)((()=>{C&&$&&Y&&Q([R.data],e,zv.READ)}),[C,$,Y]),(0,o.useEffect)((()=>{var e;null!==(e=R.data)&&void 0!==e&&e.ID&&(E(getInitialExpand),z(!1))}),[null===(D=R.data)||void 0===D?void 0:D.ID]);const re=!(null===(S=R.errors)||void 0===S||null===(O=S.processing)||void 0===O||!O.length);(0,o.useEffect)((()=>{re&&z(!0)}),[re]);const{hasFocus:ae,handleFocus:oe,handleBlur:se,labelDropdownToggleRef:ie,moveDropdownToggleRef:ce,filterDropdownToggleRef:le}=((e,{labelID:t,conversationIndex:n,message:r,bodyLoaded:a,expanded:i,messageLoaded:l,draft:d,conversationMode:u,mailSettings:p,messageRef:m},{onFocus:g,setExpanded:j,toggleOriginalMessage:b,handleLoadRemoteImages:y,handleLoadEmbeddedImages:h,onBack:I})=>{var f,N;const x=(0,s.TH)(),[{Shortcuts:v=0}={}]=useMailSettings(),[w]=useFolders(),D=useFolderNavigationHotkeys(),{call:S}=(0,Ie.Z)(),O=(0,o.useRef)(c.ZT),A=(0,o.useRef)(c.ZT),C=(0,o.useRef)(c.ZT),E=useMarkAs(),L=useMoveToFolder(),P=useStar(),[Z,T]=(0,o.useState)(!1),k=useOnCompose(),z=l&&a,_=v&&z&&i&&r.initialized,R=null===(f=r.data)||void 0===f||null===(N=f.LabelIDs)||void 0===N?void 0:N.includes(M.C7.SCHEDULED),moveElementTo=async(e,n)=>{var a;if(!r.data)return;const o=getFolderName(n,w),s=null!==(a=r.data.LabelIDs)&&void 0!==a&&a.includes(t)?Mue:t;await L([r.data],n,o,s)},shouldStopPropagation=(t,n)=>{var r,a;const{bottom:o}=(null===(r=document.querySelector('[data-shortcut-target="message-conversation-summary"]'))||void 0===r?void 0:r.getBoundingClientRect())||{},s=window.innerHeight,{top:i,bottom:c}=(null==e||null===(a=e.current)||void 0===a?void 0:a.getBoundingClientRect())||{};if(!i||!c||!o)return;const l=i-o,d=s-c;n===Nue.UP&&l<28&&t.stopPropagation(),n===Nue.DOWN&&d<28&&t.stopPropagation()},G=[...D,["Enter",e=>{d&&(e.stopPropagation(),e.preventDefault(),k({existingDraft:r,fromUndo:!1}))}],["ArrowUp",e=>{shouldStopPropagation(e,Nue.UP)}],["ArrowDown",e=>{shouldStopPropagation(e,Nue.DOWN)}],["Escape",e=>{z&&i&&u&&(e.stopPropagation(),j(!1))}],["O",()=>{v&&z&&i&&b()}],["R",e=>{_&&!R&&(e.preventDefault(),e.stopPropagation(),k({action:ve.Xh.REPLY,referenceMessage:r}))}],[["Shift","R"],e=>{_&&!R&&(e.preventDefault(),e.stopPropagation(),k({action:ve.Xh.REPLY_ALL,referenceMessage:r}))}],[["Shift","F"],e=>{_&&!R&&(e.preventDefault(),e.stopPropagation(),k({action:ve.Xh.FORWARD,referenceMessage:r}))}],[["Shift","C"],async e=>{_&&(e.stopPropagation(),await y())}],[["Shift","E"],async e=>{_&&(e.stopPropagation(),await h())}],["U",async e=>{var n;_&&(e.stopPropagation(),j(!1),isConversationMode(t,p,x)?null===(n=m.current)||void 0===n||n.focus():I(),E([r.data],t,zv.UNREAD),await S())}],[cue.u.Star,async e=>{_&&r.data&&(e.stopPropagation(),await P([r.data],!elements_isStarred(r.data)))}],["I",async e=>{_&&(e.stopPropagation(),await moveElementTo(0,Mue))}],["A",async e=>{_&&(e.stopPropagation(),await moveElementTo(0,fue))}],["S",async e=>{_&&(e.stopPropagation(),await moveElementTo(0,Iue))}],["T",async e=>{_&&(e.stopPropagation(),await moveElementTo(0,hue))}],["L",e=>{var t;_&&(e.stopPropagation(),e.preventDefault(),null===(t=O.current)||void 0===t||t.call(O))}],["M",e=>{var t;_&&(e.stopPropagation(),e.preventDefault(),null===(t=A.current)||void 0===t||t.call(A))}],["F",e=>{var t;_&&(e.stopPropagation(),null===(t=C.current)||void 0===t||t.call(C))}]];return(0,Co.y)(e,G,{dependencies:[Z]}),{hasFocus:Z,handleFocus:()=>{T(!0),g(n)},handleBlur:()=>{T(!1)},labelDropdownToggleRef:O,moveDropdownToggleRef:A,filterDropdownToggleRef:C}})(_,{labelID:e,conversationIndex:d,message:R,bodyLoaded:Y,expanded:C,messageLoaded:G,draft:X,conversationMode:t,mailSettings:l,messageRef:_},{onFocus:g,setExpanded:E,toggleOriginalMessage:toggleOriginalMessage,handleLoadRemoteImages:handleLoadRemoteImages,handleLoadEmbeddedImages:handleLoadEmbeddedImages,onBack:p});return(0,j.jsx)("article",{ref:_,className:(0,ht.dh)(["message-container m0-5 mb1 no-outline",C&&"is-opened",hasAttachments(R.data)&&"message-container--hasAttachment",ae&&"is-focused"]),style:{"--index":2*d},"data-testid":"message-view",tabIndex:-1,"data-message-id":null===(A=R.data)||void 0===A?void 0:A.ID,"data-shortcut-target":"message-container",onFocus:oe,onBlur:se,children:C?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(header_HeaderExpanded,{labelID:e,conversationMode:t,message:R,messageViewIcons:ne,messageLoaded:G,bodyLoaded:Y,isSentMessage:q,sourceMode:k,onLoadRemoteImages:handleLoadRemoteImages,onLoadEmbeddedImages:handleLoadEmbeddedImages,onResignContact:async()=>{await V()},labels:r,mailSettings:l,onToggle:handleToggle(!1),onBack:p,onSourceMode:z,breakpoints:m,labelDropdownToggleRef:ie,moveDropdownToggleRef:ce,filterDropdownToggleRef:le,highlightKeywords:N,parentMessageRef:_}),(0,j.jsx)(message_MessageBody,{messageLoaded:G,bodyLoaded:Y,sourceMode:k,message:R,originalMessageMode:Z,toggleOriginalMessage:toggleOriginalMessage,onMessageReady:b,highlightKeywords:N}),ee?(0,j.jsx)(message_MessageFooter,{message:R}):null]}):(0,j.jsx)(header_HeaderCollapsed,{labelID:e,labels:r,message:R,messageLoaded:G,isSentMessage:q,isUnreadMessage:$,onExpand:handleToggle(!0),breakpoints:m,highlightKeywords:N})})};var xue=(0,o.memo)((0,o.forwardRef)(MessageView));const getFirstMessageToRead=e=>{if(0===e.length)return;let t=e.length,n=!1;for(;--t>0;)if(0===e[t-1].Unread){n=!0;break}return e[n?t:0]},getLast=e=>{if(0!==e.length)return e[e.length-1]},findMessageToExpand=(e="",t=[])=>{if(0===t.length)return;if(t[0].ID.startsWith(W3))return getLast(t);if(e===M.C7.STARRED||(e=>!Object.values(M.C7).includes(e))(e))return getFirstMessageToRead(t.filter((t=>hasLabel(t,e)&&!messages_isDraft(t))));if(e===M.C7.DRAFTS||e===M.C7.ALL_DRAFTS)return getLast(t.filter(messages_isDraft));const n=t.filter((e=>!messages_isDraft(e)&&!(({Flags:e,ParsedHeaders:t={}})=>!!te({Flags:e})&&(!!$({Flags:e})||(B.some((e=>e in t))||[["Auto-Submitted","auto-replied"],["Precedence","auto_reply"],["X-Precedence","auto_reply"],["Delivered-To","autoresponder"]].some((([e,n])=>{var r;return null===(r=getParsedHeadersAsArray({ParsedHeaders:t},e))||void 0===r?void 0:r.some((e=>e===n))})))))(e))),r=getLast(n);return r&&0===r.Unread?r:getFirstMessageToRead(n)};var vue,wue,Due,Sue,Oue,Aue;const TrashWarning=({inTrash:e,filter:t,onToggle:n},r)=>((0,Co.y)(r,[["Enter",e=>{e.stopPropagation(),n()}],["ArrowDown",e=>{e.stopPropagation();const t=document.querySelectorAll('[data-shortcut-target="message-container"]');if(t.length){t[0].focus()}}]]),(0,j.jsxs)("div",{ref:r,tabIndex:-1,className:"bordered m0-5 mb1 p1 flex flex-nowrap flex-align-items-center flex-justify-space-between trashed-messages no-outline","data-shortcut-target":"trash-warning",children:[(0,j.jsxs)("div",{className:"flex flex-nowrap flex-align-items-center",children:[(0,j.jsx)(pr.Z,{name:"trash",className:"mr1"}),(0,j.jsx)("span",{children:e?(0,u.c)("Info").t(vue||(vue=(0,d.Z)(["This conversation contains non-trashed messages."]))):(0,u.c)("Info").t(wue||(wue=(0,d.Z)(["This conversation contains trashed messages."])))})]}),(0,j.jsx)(VM.Z,{onClick:n,className:"ml0-5 text-underline",children:e?t?(0,u.c)("Action").t(Due||(Due=(0,d.Z)(["Show messages"]))):(0,u.c)("Action").t(Sue||(Sue=(0,d.Z)(["Hide messages"]))):t?(0,u.c)("Action").t(Oue||(Oue=(0,d.Z)(["Show messages"]))):(0,u.c)("Action").t(Aue||(Aue=(0,d.Z)(["Hide messages"])))})]}));var Cue=(0,o.forwardRef)(TrashWarning);const{ALL_MAIL:Eue}=M.C7,cacheEntryToElement=e=>(null==e?void 0:e.Conversation)||(null==e?void 0:e.data)||{},useShouldMoveOut=(e,t,n,r)=>{const a=useMessageCache(),s=useGetConversation(),[c=[]]=useFolders(),l=(0,o.useRef)(),d=(0,o.useMemo)((()=>e?t:getLocalID(a,t||"")),[t]),u=(0,i.v9)((e=>$x(e,{ID:d||""}))),onChange=e=>{if(!e)return void r();const t=cacheEntryToElement(l.current),n=cacheEntryToElement(e),a=hasLabel(t,Eue),o=getCurrentFolderIDs(t,c),s=getCurrentFolderIDs(n,c);a&&o.length>0&&!(0,WI.Z)(o,s)?r():l.current=e};(0,o.useEffect)((()=>(l.current=d?e?s(d):a.get(d):void 0,a.subscribe((e=>{if(e!==d)return;const t=a.get(d);onChange(t)})))),[a,d]),(0,o.useEffect)((()=>{e&&void 0!==l.current&&onChange(u)}),[u]),(0,o.useEffect)((()=>{if(!d)return;const t=e?s(d):a.get(d);!n&&((e,t)=>{var n,r;if(e)return hasErrorType(null==t?void 0:t.errors,"notExist");const a=t;return(null==a||null===(n=a.data)||void 0===n?void 0:n.ID)&&!(null!=a&&null!==(r=a.data)&&void 0!==r&&r.Subject)})(e,t)&&r()}),[a,d,n])};var Lue,conversation_ConversationHeader=({className:e,loading:t,element:n,labelID:r,highlightKeywords:a=!1})=>{const[o=[]]=useLabels(),{highlightMetadata:s}=useEncryptedSearchContext(),i=elements_isConversation(n),c=null!=n&&n.Subject&&a?s(n.Subject,!0).resultJSX:(0,j.jsx)("span",{children:null==n?void 0:n.Subject});return(0,j.jsxs)("header",{className:(0,ht.dh)(["border-bottom max-w100 message-conversation-summary sticky-top z10 pt1 pb0-5 pr0-5 pl0-5 ml1 mr1 flex-item-noshrink",t&&"message-conversation-summary-is-loading",e]),"data-shortcut-target":"message-conversation-summary","data-testid":"conversation-header",children:[(0,j.jsxs)("div",{className:"flex flex-nowrap",children:[(0,j.jsx)("h1",{className:"message-conversation-summary-header mb0 h3 text-bold text-ellipsis-two-lines lh-rg flex-item-fluid pr1",title:null==n?void 0:n.Subject,"data-testid":"conversation-header:subject",children:t?(0,j.jsx)(j.Fragment,{children:" "}):(0,j.jsxs)(j.Fragment,{children:[i&&(0,j.jsx)(conversation_NumMessages,{className:"mr0-25",conversation:n}),c]})}),(0,j.jsx)("div",{className:"message-conversation-summary-star flex-item-noshrink pt0-25",children:(0,j.jsx)(list_ItemStar,{element:n,size:22})})]}),!t&&(0,j.jsx)("div",{className:"flex-item-fluid text-left no-scroll mt0-5",children:(0,j.jsx)(list_ItemLabels,{labels:o,element:n,labelID:r,showUnlabel:!0,isCollapsed:!1})})]})};var conversation_UnreadMessages=({conversationID:e,messages:t,onClick:n})=>{const[r,a]=(0,o.useState)(0),[s,i]=(0,o.useState)(t),newUnreads=()=>{if(void 0===s||void 0===t)return[];const e=s.map((e=>e.ID));return t.filter((t=>!e.includes(t.ID))).filter((e=>elements_isUnread(e,void 0)))};if((0,o.useEffect)((()=>{i(t)}),[e]),(0,o.useEffect)((()=>{void 0===s&&Array.isArray(t)&&i(t)}),[t]),(0,o.useEffect)((()=>a(newUnreads().length))),0===r)return null;const c=(0,u.c)("Info").ngettext((0,u.msgid)(Lue||(Lue=(0,d.Z)([""," unread message"])),r),"".concat(r," unread messages"),r);return(0,j.jsx)("span",{className:"absolute centered-absolute-horizontal bottom pb1","aria-live":"assertive","aria-atomic":"true",children:(0,j.jsxs)(Ea.Z,{pill:!0,color:"norm",className:"flex flex-nowrap flex-align-items-center conversation-unread-messages",onClick:()=>n(newUnreads()[0].ID),children:[(0,j.jsx)("span",{children:c})," ",(0,j.jsx)(pr.Z,{name:"arrow-down",className:"ml0-5"})]})})};var Pue,Zue,Tue;const ConversationErrorBanner_getTranslations=e=>{switch(e){case"network":return(0,u.c)("Error").t(Pue||(Pue=(0,d.Z)(["Network error: Please check your connection and try again."])));default:return(0,u.c)("Error").t(Zue||(Zue=(0,d.Z)(["Unknown error."])))}},ConversationErrorBanner=({errors:e={},onRetry:t},n)=>{if(!hasError(e))return null;const r=Object.keys(e).filter((t=>{var n;return null==e||null===(n=e[t])||void 0===n?void 0:n.length}))[0];return(0,j.jsxs)("div",{ref:n,tabIndex:-1,className:"bg-danger rounded p0-5 m1 flex flex-nowrap flex-align-items-center","data-shortcut-target":"trash-warning",children:[(0,j.jsx)(pr.Z,{name:"triangle-exclamation",className:"mr1"}),(0,j.jsx)("span",{className:"pl0-5 pr0-5 flex-item-fluid",children:ConversationErrorBanner_getTranslations(r)}),(0,j.jsx)("span",{className:"flex-item-noshrink flex",children:(0,j.jsx)(Ea.Z,{size:"small",onClick:t,children:(0,u.c)("Action").t(Tue||(Tue=(0,d.Z)(["Try again"])))})})]})};var kue=(0,o.forwardRef)(ConversationErrorBanner);const{TRASH:zue}=M.C7,ConversationView=({hidden:e,labelID:t,conversationID:n,messageID:r,mailSettings:a,onBack:s,breakpoints:i,onMessageReady:c,columnLayout:l,isComposerOpened:d,containerRef:u,highlightKeywords:p=!1})=>{var m;const{isSearchResult:g}=useEncryptedSearchContext(),[b=[]]=useLabels(),{conversationID:y,conversation:h,pendingRequest:I,loadingConversation:f,loadingMessages:M,handleRetry:N}=useConversation(n,r),{state:x,toggle:v,set:w}=(0,lr.Z)(true);useShouldMoveOut(!0,y,I,s);const D=(0,o.useRef)({}),S=(0,o.useRef)(null),O=useOnMailTo();useLinkHandler(S,O);const{Conversation:A,Messages:C=[]}=h||{},E=usePlaceholders(C,M,(null==A?void 0:A.NumMessages)||1),L=t===zue,P=E.filter((e=>L===hasLabel(e,zue)||g(e.ID))),Z=!M&&x?P:E,T=!M&&P.length!==E.length,k=null==h||null===(m=h.Messages)||void 0===m?void 0:m.find((e=>e.ID===r)),z=f||M,_=!(z||null!=h&&h.Conversation),R=!(z||_||null!=h&&h.Messages),expandMessage=e=>{var t;null===(t=D.current[e||""])||void 0===t||t.expand()};(0,o.useEffect)((()=>{var e;M||r||expandMessage(null===(e=findMessageToExpand(t,Z))||void 0===e?void 0:e.ID)}),[y,r,M]),(0,o.useEffect)((()=>{M||!r||messages_isDraft(k)||expandMessage(r)}),[y,r,M,k]),(0,o.useEffect)((()=>{w(true)}),[n]);const{focusIndex:G,handleFocus:Y,getFocusedId:U}=(e=>{const[t,n]=(0,o.useState)(),r=(0,o.useCallback)((()=>{var n;return null===(n=void 0!==t?e[t]:void 0)||void 0===n?void 0:n.ID}),[t,e]),a=(0,o.useCallback)((e=>{e!==t&&n(e)}),[t]);return(0,o.useEffect)((()=>{var n;if(void 0===t)return;const r=document.querySelector('[data-shortcut-target="message-container"][data-message-id="'.concat(null===(n=e[t])||void 0===n?void 0:n.ID,'"]'));null==r||r.focus({preventScroll:!0})}),[t]),{focusIndex:t,handleFocus:a,getFocusedId:r}})(Z),{elementRef:F}=(({messages:e,focusIndex:t},{handleFocus:n,expandMessage:r,getFocusedId:a})=>{const s=(0,o.useRef)(null),i=[["ArrowLeft",e=>{e.preventDefault(),e.stopPropagation();const t=document.querySelector('[data-shortcut-target="item-container"][data-shortcut-target-selected="true"]')||document.querySelector('[data-shortcut-target="item-container"]');null==t||t.focus(),n(void 0)}],[["Meta","ArrowUp"],e=>{e.stopPropagation(),n(0)}],["ArrowUp",r=>{r.stopPropagation();const a=document.querySelector('[data-shortcut-target="trash-warning"]');if(a&&0===t)return void a.focus();const o=void 0!==t?Math.max(0,t-1):e.length-1;0!==o&&r.preventDefault(),n(o)}],[["Meta","ArrowDown"],t=>{t.stopPropagation(),n(e.length-1)}],["ArrowDown",r=>{r.stopPropagation();const a=e.length-1,o=void 0!==t?Math.min(a,t+1):0;o!==a&&r.preventDefault(),n(o)}],["Enter",e=>{e.stopPropagation();const t=a();t&&r(t)}]];return(0,Co.y)(s,i),{elementRef:s}})({messages:Z,focusIndex:G},{handleFocus:Y,getFocusedId:U,expandMessage:expandMessage}),K=(0,o.useRef)(null),B=!M&&!P.length;return(0,o.useEffect)((()=>{var e,t;B&&(setTimeout(c),l||null===(e=K.current)||void 0===e||null===(t=e.parentElement)||void 0===t||t.focus())}),[B,y,l]),_?(0,j.jsx)(kue,{errors:null==h?void 0:h.errors,onRetry:N}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(conversation_ConversationHeader,{className:(0,ht.dh)([e&&"hidden"]),loading:f,element:A,labelID:t,highlightKeywords:p}),(0,j.jsx)("div",{ref:S,className:"flex-item-fluid pt0-5 pr1 pl1",children:(0,j.jsxs)("div",{className:(0,ht.dh)(["no-outline",e&&"hidden"]),ref:F,tabIndex:-1,children:[R?(0,j.jsx)(kue,{errors:null==h?void 0:h.errors,onRetry:N}):null,T&&(0,j.jsx)(Cue,{ref:K,inTrash:L,filter:x,onToggle:v}),Z.map(((e,n)=>(0,j.jsx)(xue,{ref:t=>{D.current[e.ID]=t||void 0},labelID:t,conversationMode:!0,loading:M,message:e,labels:b,mailSettings:a,conversationIndex:n,conversationID:y,onBack:s,breakpoints:i,onFocus:Y,onMessageReady:c,columnLayout:l,isComposerOpened:d,containerRef:u,wrapperRef:S,highlightKeywords:p},e.ID)))]})}),(0,j.jsx)(conversation_UnreadMessages,{conversationID:y,messages:null==h?void 0:h.Messages,onClick:e=>{expandMessage(e)}})]})};var _ue=(0,o.memo)(ConversationView),Rue=n(57458);const Gue=(0,vr.Z)(Rue.Gc);(0,vr.Z)(Rue.v3),(0,vr.Z)(Rue.HI),(0,vr.Z)(Rue.v8);var Yue,Uue,Fue,Kue,Bue,Wue,Vue,Que,Hue,Xue,Jue,que,$ue,epe,tpe,npe,rpe,ape,ope,spe,ipe,cpe,lpe,dpe,upe,ppe,mpe,gpe,jpe=n(57633);var bpe,ype,hpe,Ipe,fpe,Mpe,Npe,xpe,vpe,wpe,Dpe,view_WelcomePaneBanner=({plans:e,theme:t,userSettings:n,calendars:r=[]})=>{const{createModal:a}=(0,In.Z)(),[s,i]=(0,o.useState)(),[{Currency:c}={Currency:void 0}]=e,getPrice=()=>{const t=e.find((e=>"plus"===e.Name));return t?t.Pricing[12]/12:0},l=(0,FN.rV)("WelcomePaneEncounteredMessages"),p={upgrade:(0,u.c)("Action").t(Yue||(Yue=(0,d.Z)(["Upgrade"]))),learnMore:(0,u.c)("Action").t(Uue||(Uue=(0,d.Z)(["Learn more"]))),openShop:(0,u.c)("Action").t(Fue||(Fue=(0,d.Z)(["Open shop"]))),openCalendar:(0,u.c)("Action").t(Kue||(Kue=(0,d.Z)(["Open calendar"])))},m=[{id:0,text:(0,u.c)("Info").t(Bue||(Bue=(0,d.Z)(["Get more storage and premium features."]))),cta:(0,j.jsx)(sh.Z,{path:ve.mg.plansSelection,className:"text-bold link align-baseline color-inherit",children:p.upgrade})},{id:1,text:(0,j.jsx)(price_Price,{currency:c,prefix:(0,u.c)("Info").t(Wue||(Wue=(0,d.Z)(["Support privacy by upgrading for"]))),suffix:(0,u.c)("Info").t(Vue||(Vue=(0,d.Z)(["/month."]))),isDisplayedInSentence:!0,children:getPrice()}),cta:(0,j.jsx)(sh.Z,{path:ve.mg.plansSelection,className:"text-bold link align-baseline color-inherit",children:p.upgrade})},{id:2,text:(0,u.c)("Info").t(Que||(Que=(0,d.Z)(["Upgrade to send email from @pm.me addresses."]))),cta:(0,j.jsx)(sh.Z,{path:ve.mg.plansSelection,className:"text-bold link align-baseline color-inherit",children:p.upgrade})},{id:3,text:(0,u.c)("Info").t(Hue||(Hue=(0,d.Z)(["Upgrade to create more folders, filters, and addresses."]))),cta:(0,j.jsx)(sh.Z,{path:ve.mg.plansSelection,className:"text-bold link align-baseline color-inherit",children:p.upgrade})},{id:4,text:(0,u.c)("Info").t(Xue||(Xue=(0,d.Z)(["Upgrade to configure a vacation auto-responder."]))),cta:(0,j.jsx)(sh.Z,{path:ve.mg.plansSelection,className:"text-bold link align-baseline color-inherit",children:p.upgrade})},{id:5,text:(0,u.c)("Info").t(Jue||(Jue=(0,d.Z)(["Upgrade to use ProtonMail with third-party desktop clients."]))),cta:(0,j.jsx)(sh.Z,{path:ve.mg.plansSelection,className:"text-bold link align-baseline color-inherit",children:p.upgrade})},{id:6,text:(0,u.c)("Info").t(que||(que=(0,d.Z)(["Proton doesn't make money by abusing privacy."]))),cta:(0,j.jsx)(sh.Z,{path:ve.mg.plansSelection,className:"text-bold link align-baseline color-inherit",children:p.upgrade})},{id:7,text:(0,u.c)("Info").t($ue||($ue=(0,d.Z)(["Upgrade to support privacy and get more features."]))),cta:(0,j.jsx)(sh.Z,{path:ve.mg.plansSelection,className:"text-bold link align-baseline color-inherit",children:p.upgrade})},{id:8,text:(0,u.c)("Info").t(epe||(epe=(0,d.Z)(["Visit our shop to get Proton merchandise."]))),cta:(0,j.jsx)(Tu.Z,{url:ve.mg.protonShop,className:"text-bold link align-baseline color-inherit",children:p.openShop})},{id:9,text:(0,j.jsx)(price_Price,{currency:c,prefix:(0,u.c)("Info").t(tpe||(tpe=(0,d.Z)(["Increase storage space starting at"]))),suffix:(0,u.c)("Info").t(npe||(npe=(0,d.Z)(["/month."]))),isDisplayedInSentence:!0,children:getPrice()}),cta:(0,j.jsx)(sh.Z,{path:ve.mg.plansSelection,className:"text-bold link align-baseline color-inherit",children:p.upgrade})},n["2FA"]&&1!==n["2FA"].Enabled&&{id:10,text:(0,u.c)("Info").t(rpe||(rpe=(0,d.Z)(["For increased security, activate 2FA."]))),cta:(0,j.jsx)(Tu.Z,{url:ve.mg.proton2FA,className:"text-bold link align-baseline color-inherit",children:p.learnMore})},{id:11,text:(0,u.c)("Info").t(ape||(ape=(0,d.Z)(["Use keyboard shortcuts to manage your email faster."]))),cta:(0,j.jsx)("span",{onClick:()=>a((0,j.jsx)(MailShortcutsModal,{}),"shortcuts-modal"),className:"text-bold link align-baseline color-inherit",children:p.learnMore})},t===sO.BR.Default&&{id:12,text:(0,u.c)("Info").t(ope||(ope=(0,d.Z)(["Themes can give your inbox a new look."]))),cta:(0,j.jsx)("span",{onClick:()=>a((0,j.jsx)(themes_ThemesModal,{})),className:"text-bold link align-baseline color-inherit",children:p.learnMore})},{id:13,text:(0,u.c)("Info").t(spe||(spe=(0,d.Z)(["Upgrade to host emails from your own domain name."]))),cta:(0,j.jsx)(sh.Z,{path:ve.mg.plansSelection,className:"text-bold link align-baseline color-inherit",children:p.upgrade})},{id:14,text:(0,u.c)("Info").t(ipe||(ipe=(0,d.Z)(["ProtonMail can protect your business as well."]))),cta:(0,j.jsx)(Tu.Z,{url:ve.mg.protonBusiness,className:"text-bold link align-baseline color-inherit",children:p.learnMore})},{id:15,text:(0,u.c)("Info").t(cpe||(cpe=(0,d.Z)(["Upgrade to add more addresses to your account."]))),cta:(0,j.jsx)(sh.Z,{path:ve.mg.plansSelection,className:"text-bold link align-baseline color-inherit",children:p.upgrade})},{id:16,text:(0,u.c)("Info").t(lpe||(lpe=(0,d.Z)(["Upgrade to send emails to contact groups easily."]))),cta:(0,j.jsx)(sh.Z,{path:ve.mg.plansSelection,className:"text-bold link align-baseline color-inherit",children:p.upgrade})},{id:17,text:(0,u.c)("Info").t(dpe||(dpe=(0,d.Z)(["Upgrade to support a privacy-first internet."]))),cta:(0,j.jsx)(sh.Z,{path:ve.mg.plansSelection,className:"text-bold link align-baseline color-inherit",children:p.upgrade})},{id:18,text:(0,u.c)("Info").t(upe||(upe=(0,d.Z)(["Upgrade to support our mission of privacy for all."]))),cta:(0,j.jsx)(sh.Z,{path:ve.mg.plansSelection,className:"text-bold link align-baseline color-inherit",children:p.upgrade})},{id:19,text:(0,u.c)("Info").t(ppe||(ppe=(0,d.Z)(["Store and share files securely with Proton Drive."]))),cta:(0,j.jsx)(sh.Z,{path:ve.mg.plansSelection,className:"text-bold link align-baseline color-inherit",children:p.upgrade})},{id:20,text:(0,u.c)("Info").t(mpe||(mpe=(0,d.Z)(["You can use ProtonVPN for free today."]))),cta:(0,j.jsx)(Tu.Z,{url:ve.mg.vpn,className:"text-bold link align-baseline color-inherit",children:p.learnMore})},0===(null==r?void 0:r.length)&&{id:21,text:(0,u.c)("Info").t(gpe||(gpe=(0,d.Z)(["Use Proton Calendar to keep your agenda private."]))),cta:(0,j.jsx)(Tu.Z,{url:ve.mg.calendar,className:"text-bold link align-baseline color-inherit",children:p.openCalendar})}].filter(Za.Z);return(0,o.useEffect)((()=>{try{i((()=>{let e=!1;l&&(e=m.every((e=>l.includes(e.id.toString()))));const t=!l||e?[]:JSON.parse(l),n=m.filter((e=>!t.includes(e.id))),r=n.length?n[Math.floor(Math.random()*n.length)]:m[0];return(0,FN.LS)("WelcomePaneEncounteredMessages",JSON.stringify([...t,r.id])),r})())}catch(e){console.error(e)}}),[]),(0,j.jsx)(j.Fragment,{children:s?(0,j.jsxs)("div",{className:"bg-primary p1 text-center",children:[(0,j.jsx)("span",{className:"mr1",children:s.text}),s.cta]}):null})};const Container=({children:e})=>(0,j.jsx)("div",{className:"flex h100 scroll-if-needed pt1 pb1 pr2 pl2",children:(0,j.jsx)("div",{className:"mauto text-center max-w30e",children:e})});var Spe,Ope,Ape,Cpe,Epe,Lpe,Ppe,Zpe,Tpe,kpe,view_WelcomePane=({mailSettings:e,location:t,labelCount:n})=>{var r;const a=isConversationMode(M.C7.INBOX,e,t),{feature:o,loading:s}=(0,nN.Z)(y.P.UsedMailMobileApp),i=null===(r=(0,nN.Z)(y.P.EasySwitch).feature)||void 0===r?void 0:r.Value,[c,l]=(0,bn.ZP)(),[p=[],m]=hooks_usePlans(),[g]=(0,tA.Fg)(),[b,h]=(0,Dr.Z)(),[I,f]=hooks_useCalendars(),[N=[],x]=Gue(),v=N.length,w=x||s||l||m||h||f,D=(null==n?void 0:n.Unread)||0,S=(null==n?void 0:n.Total)||0,O=null!=o&&o.Value?zZ:jpe,A=(0,j.jsx)("span",{className:"inline-block max-w100 text-ellipsis align-bottom",children:(0,br.kC)(c.DisplayName)},"display-name"),C=a?(0,j.jsx)("strong",{children:(0,u.c)("Info").ngettext((0,u.msgid)(bpe||(bpe=(0,d.Z)([""," unread conversation"])),D),"".concat(D," unread conversations"),D)},"unreads-label"):(0,j.jsx)("strong",{children:(0,u.c)("Info").ngettext((0,u.msgid)(ype||(ype=(0,d.Z)([""," unread message"])),D),"".concat(D," unread messages"),D)},"unreads-label"),E=a?(0,j.jsx)("strong",{children:(0,u.c)("Info").ngettext((0,u.msgid)(hpe||(hpe=(0,d.Z)([""," conversation"])),S),"".concat(S," conversations"),S)},"total-label"):(0,j.jsx)("strong",{children:(0,u.c)("Info").ngettext((0,u.msgid)(Ipe||(Ipe=(0,d.Z)([""," message"])),S),"".concat(S," messages"),S)},"total-label"),L=D?(0,u.c)("Info").jt(fpe||(fpe=(0,d.Z)(["You have "," in your inbox."])),C):(0,u.c)("Info").jt(Mpe||(Mpe=(0,d.Z)(["You have "," in your inbox."])),E);return w?(0,j.jsx)(Container,{children:(0,j.jsx)(Yu.Z,{})}):(0,j.jsxs)(j.Fragment,{children:[c.isFree?(0,j.jsx)(view_WelcomePaneBanner,{plans:p,userSettings:b,theme:g,calendars:I||void 0}):null,(0,j.jsxs)(Container,{children:[(0,j.jsx)("h1",{children:c.DisplayName?(0,u.c)("Title").jt(Npe||(Npe=(0,d.Z)(["Welcome ",""])),A):(0,u.c)("Title").t(xpe||(xpe=(0,d.Z)(["Welcome"])))}),(0,j.jsx)("p",{className:"text-keep-space",children:n?L:null}),(0,j.jsx)("hr",{className:"mb2 mt2"}),(0,j.jsx)("div",{className:"text-rg",children:(0,j.jsx)("img",{className:"hauto",src:O,alt:(0,u.c)("Alternative text for welcome image").t(vpe||(vpe=(0,d.Z)(["Welcome"])))})}),null!=o&&o.Value?null:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("p",{children:(0,u.c)("Info").t(wpe||(wpe=(0,d.Z)(["Download our mobile application from your favorite app store to communicate securely on-the-go."])))}),(0,j.jsxs)("div",{className:"text-rg",children:[(0,j.jsx)(Tu.Z,{className:"inline-block mr1",url:"https://itunes.apple.com/app/protonmail-encrypted-email/id979659905",children:(0,j.jsx)("img",{className:"hauto",src:pR,alt:"App Store"})}),(0,j.jsx)(Tu.Z,{className:"inline-block",url:"https://play.google.com/store/apps/details?id=ch.protonmail.android",children:(0,j.jsx)("img",{className:"hauto",src:mR,alt:"Play Store"})})]})]}),v?null:(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:"mb2 mt2"}),(0,j.jsx)("div",{className:"text-rg",children:(0,j.jsx)(VI.Z,{as:sh.Z,color:"weak",shape:"outline",path:i?"/easy-switch":"/import-export",app:M.ei.PROTONMAIL,target:"_self",className:"inline-block mtauto",children:(0,u.c)("Action").t(Dpe||(Dpe=(0,d.Z)(["Import messages"])))})})]})]})]})},zpe=n(37506);var view_SelectionPane=({labelID:e,mailSettings:t,location:n,labelCount:r,checkedIDs:a=[],onCheckAll:s})=>{const i=isConversationMode(e,t,n),[c]=useLabels(),[l]=useFolders(),p=labels_isCustomLabel(e,c),m=(null==r?void 0:r.Total)||0,g=a.length,b=(0,o.useMemo)((()=>getLabelName(e,c,l)),[e,c,l]),y=g||m,h=p?g?i?(0,u.c)("Info").ngettext((0,u.msgid)(Epe||(Epe=(0,d.Z)(["You selected **"," conversation** with this label"])),y),"You selected **".concat(y," conversations** with this label"),y):(0,u.c)("Info").ngettext((0,u.msgid)(Lpe||(Lpe=(0,d.Z)(["You selected **"," message** with this label"])),y),"You selected **".concat(y," messages** with this label"),y):i?(0,u.c)("Info").ngettext((0,u.msgid)(Ppe||(Ppe=(0,d.Z)(["You have **"," conversation** tagged with this label"])),y),"You have **".concat(y," conversations** tagged with this label"),y):(0,u.c)("Info").ngettext((0,u.msgid)(Zpe||(Zpe=(0,d.Z)(["You have **"," message** tagged with this label"])),y),"You have **".concat(y," messages** tagged with this label"),y):g?i?(0,u.c)("Info").ngettext((0,u.msgid)(Spe||(Spe=(0,d.Z)(["You selected **"," conversation** from this folder"])),y),"You selected **".concat(y," conversations** from this folder"),y):(0,u.c)("Info").ngettext((0,u.msgid)(Ope||(Ope=(0,d.Z)(["You selected **"," message** from this folder"])),y),"You selected **".concat(y," messages** from this folder"),y):i?(0,u.c)("Info").ngettext((0,u.msgid)(Ape||(Ape=(0,d.Z)(["You have **"," conversation** stored in this folder"])),y),"You have **".concat(y," conversations** stored in this folder"),y):(0,u.c)("Info").ngettext((0,u.msgid)(Cpe||(Cpe=(0,d.Z)(["You have **"," message** stored in this folder"])),y),"You have **".concat(y," messages** stored in this folder"),y),I=g||r;return(0,j.jsxs)("div",{className:"mauto text-center p2 max-w100",children:[0===g&&b&&(0,j.jsx)("h3",{className:"text-bold lh-rg text-ellipsis",title:b,children:b}),(0,j.jsx)("p",{className:"mb2 text-keep-space",children:I?(e=>{const t=e.split("**");if(t.length>2&&t.length%2!=0){const e=t.map(((e,t)=>t%2!=0?(0,j.jsx)("strong",{children:e},"formattedText-".concat(e)):(0,j.jsx)("span",{children:e},"formattedText-".concat(e))));return(0,j.jsx)(j.Fragment,{children:e})}return e})(h):null}),(0,j.jsx)("div",{className:"mb2",children:(0,j.jsx)("img",{src:zpe,alt:(0,u.c)("Alternative text for conversation image").t(Tpe||(Tpe=(0,d.Z)(["Conversation"]))),className:"hauto"})}),g>0&&(0,j.jsx)(Ea.Z,{onClick:()=>s(!1),children:(0,u.c)("Action").t(kpe||(kpe=(0,d.Z)(["Deselect"])))})]})};var view_PlaceholderView=({welcomeFlag:e,labelID:t="",checkedIDs:n=[],onCheckAll:r})=>{const a=(0,s.TH)(),[i]=useMailSettings(),[c=[]]=useConversationCounts(),[l=[]]=useMessageCounts(),d=(({labelID:e,mailSettings:t,location:n})=>isConversationMode(e,t,n)?ve.Yj.CONVERSATION:ve.Yj.MESSAGE)({mailSettings:i,labelID:t,location:a}),u=(0,o.useMemo)((()=>(d===ve.Yj.CONVERSATION?c:l).find((e=>e.LabelID===t))),[t,c,l]);return e?(0,j.jsx)(view_WelcomePane,{mailSettings:i,location:a,labelCount:u}):(0,j.jsx)(view_SelectionPane,{labelID:t,mailSettings:i,location:a,labelCount:u,checkedIDs:n,onCheckAll:r})};var message_MessageOnlyView=({hidden:e,labelID:t,messageID:n,mailSettings:r,onBack:a,breakpoints:s,onMessageReady:i,columnLayout:c,isComposerOpened:l,highlightKeywords:d=!1})=>{const[u=[]]=useLabels(),{message:p,messageLoaded:m,bodyLoaded:g}=useMessage(n),b=useLoadMessage(p.data||{ID:n});useShouldMoveOut(!1,n,!g,a),(0,o.useEffect)((()=>{m||b()}),[m]);const y=p.data||{ID:n},h=(0,o.useRef)(null),I=useOnMailTo();useLinkHandler(h,I),(0,Co.y)(h,[["ArrowLeft",e=>{e.preventDefault(),e.stopPropagation();const t=document.querySelector('[data-shortcut-target="item-container"][data-shortcut-target-selected="true"]')||document.querySelector('[data-shortcut-target="item-container"]');null==t||t.focus()}]]);const f=(0,o.useRef)(null);return(0,o.useEffect)((()=>{var e;messages_isDraft(p.data)||(null==f||null===(e=f.current)||void 0===e||e.expand())}),[n]),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(conversation_ConversationHeader,{className:(0,ht.dh)([e&&"hidden"]),loading:!m,element:p.data,labelID:t,highlightKeywords:d}),(0,j.jsx)("div",{className:(0,ht.dh)(["flex-item-fluid pt0-5 pr1-5 pl1-5 max-w100 no-outline",e&&"hidden"]),ref:h,tabIndex:-1,children:(0,j.jsx)(xue,{ref:f,labelID:t,conversationMode:!1,loading:!m,message:y,labels:u,mailSettings:r,onBack:a,breakpoints:s,onMessageReady:i,columnLayout:c,isComposerOpened:l,highlightKeywords:d})})]})};var _pe,Rpe,Gpe=n(15577);function useNewEmailNotification_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function useNewEmailNotification_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?useNewEmailNotification_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):useNewEmailNotification_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var mailbox_useNewEmailNotification=e=>{const t=(0,s.k6)(),[n]=useMailSettings(),[r=[]]=useFolders(),a=[M.C7.INBOX,M.C7.STARRED,...r.filter((({Notify:e})=>e)).map((({ID:e})=>e))];(0,mn.ko)((({Messages:r=[]})=>{r.filter((({Action:e,Message:t})=>!J(t)&&1===e&&1===(null==t?void 0:t.Unread)&&t.LabelIDs.some((e=>a.includes(e))))).forEach((({Message:r})=>{const{Subject:o,Sender:s,ID:i,ConversationID:c,LabelIDs:l}=r,p=s.Name||s.Address,m=(0,u.c)("Desktop notification title").t(_pe||(_pe=(0,d.Z)(["New email received"]))),g=l.find((e=>a.includes(e)))||M.C7.ALL_MAIL;return create(m,{body:(0,u.c)("Desktop notification body").t(Rpe||(Rpe=(0,d.Z)(["From: "," - ",""])),p,o),icon:Gpe,onClick(){const r=useNewEmailNotification_objectSpread(useNewEmailNotification_objectSpread({},t.location),{},{hash:""});window.focus(),t.push(setParamsInLocation(r,{labelID:g,elementID:isConversationMode(g,n,r)?c:i})),e()}})}))}))};const{TRASH:Ype,SPAM:Upe,ARCHIVE:Fpe,INBOX:Kpe,DRAFTS:Bpe,ALL_DRAFTS:Wpe,SENT:Vpe,ALL_SENT:Qpe}=M.C7,useMailboxFocus=({elementIDs:e,showList:t,listRef:n,labelID:r,isComposerOpened:a})=>{const s=hooks_useIsMounted(),[i,c]=(0,o.useState)(),l=(0,o.useCallback)((()=>void 0!==i?e[i]:void 0),[i,e]),d=(0,o.useRef)(r),u=(0,o.useRef)(l()),p=(0,mn.ZP)((e=>c(e))),focusOnElementByIndex=t=>{var r;const a=null===(r=n.current)||void 0===r?void 0:r.querySelector('[data-shortcut-target="item-container"][data-element-id="'.concat(e[t],'"]'));null==a||a.focus()},m=(0,o.useCallback)((()=>{const e=document.querySelectorAll('[data-shortcut-target="message-container"]');if(e.length){return e[e.length-1].focus(),void c(void 0)}const t=document.querySelector('[data-shortcut-target="trash-warning"]');null==t||t.focus()}),[]);return(0,o.useEffect)((()=>{if(d.current!==r)return c(void 0),u.current=void 0,void(d.current=r);if(!a&&e.length)if(u.current&&e.includes(u.current))setTimeout((()=>{s()&&(t=>{if(!t)return;const n=e.findIndex((e=>e===t));c(n)})(u.current)}));else if(void 0!==i){if(e[i])return void setTimeout((()=>focusOnElementByIndex(i)));setTimeout((()=>focusOnElementByIndex(e.length-1)))}}),[r,e]),(0,o.useEffect)((()=>{t&&e.length&&c(0)}),[t]),(0,o.useEffect)((()=>{void 0!==i&&focusOnElementByIndex(i),u.current=l()}),[i]),{focusIndex:i,getFocusedId:l,setFocusIndex:c,handleFocus:p,focusOnLastMessage:m}};var Hpe,Xpe;const useEncryptedSearch=({conversationMode:e,labelID:t,search:n,page:r,sort:a,filter:s,onPage:c})=>{const l=(0,Dn.Z)(),{createNotification:p}=(0,hn.Z)(),m=(0,i.I0)(),{getESDBStatus:g,encryptedSearch:j,incrementSearch:b}=useEncryptedSearchContext(),y=g(),{esEnabled:h}=y,I={labelID:t,page:r,conversationMode:e,sort:a,filter:s,search:n,esEnabled:h},f=(0,i.v9)((e=>Ux(e,{search:n,esDBStatus:y}))),M=(0,i.v9)((e=>Rx(e,{page:r,params:I}))),N=(0,i.v9)((e=>Yx(e,{page:r}))),x=(0,i.v9)((e=>Fx(e,{page:r,search:n,esDBStatus:y}))),setEncryptedSearchResults=(e,t)=>{m(xx({elements:e,page:t}))};(0,o.useEffect)((()=>{M&&elements_isSearch(n)&&(async()=>{m(Mx());try{let n=!1;f&&(n=await j(t,setEncryptedSearchResults)),n||(r>=200?(p({text:(0,u.c)("Error").t(Hpe||(Hpe=(0,d.Z)(["Your search matched too many results. Please limit your search and try again."]))),type:"error"}),m(Nx()),c(0)):m(yx({api:l,conversationMode:e,page:r,params:I,abortController:void 0})))}catch(t){p({text:(0,u.c)("Error").t(Xpe||(Xpe=(0,d.Z)(["There has been an issue with content search. Default search has been used instead."]))),type:"error"}),m(yx({api:l,conversationMode:e,page:r,params:I,abortController:void 0}))}})(),f&&(N||x)&&(x&&m(Mx()),b(r,setEncryptedSearchResults,x))}),[M,N,x,n])};var Jpe;const MailboxContainer=({labelID:e,userSettings:t,mailSettings:n,breakpoints:r,elementID:a,messageID:i,location:l,history:p,isComposerOpened:m})=>{const g=useGetElementsFromIDs(),{shouldHighlight:b}=useEncryptedSearchContext(),y=(0,o.useRef)(null),h=r.isNarrow||r.isTablet,I=isColumnMode(n),f=I&&!h,N=I||h,x=(0,o.useRef)(null),v=(0,o.useRef)(null),w=(0,o.useRef)(null),D=useOnMailTo(),{enableResize:S,resetWidth:O}=((e,t,n)=>{const[r,a]=(0,o.useState)(!1),[s]=hooks_useWindowSize(),i=.35*s,[l]=(0,o.useState)(+((0,FN.rV)("messageListWidth")||i)),[d,u]=(0,o.useState)(s),p=e.current?e.current.getBoundingClientRect().left:0,m=t.current?t.current.getBoundingClientRect().width:0,g=s-p-400,j=(0,c.Ds)((e=>{(0,FN.LS)("messageListWidth",e.toString())}),2e3),resize=e=>{e>g?e=g:e<320&&(e=320),document.documentElement.style.setProperty("--width-conversation-column","".concat(e,"px")),j(e)},resizeWithAmount=e=>{const t=(n.current?n.current.getBoundingClientRect().width:0)+e;resize(t)},b=(0,o.useCallback)((e=>{if(r){const t=e.clientX-p-m/2;resize(t)}}),[r]),y=(0,o.useCallback)((()=>{a(!0)}),[a]),h=(0,o.useCallback)((()=>{a(!1)}),[a]);return(0,Co.y)(t,[["ArrowRight",e=>{e.stopPropagation(),resizeWithAmount(50)}],["ArrowLeft",e=>{e.stopPropagation(),resizeWithAmount(-50)}]]),(0,o.useEffect)((()=>{if(s!==d){const e=n.current?n.current.getBoundingClientRect().width:0;resize(s*(e/d)),u(s)}}),[s]),(0,o.useEffect)((()=>{l&&document.documentElement.style.setProperty("--width-conversation-column","".concat(l,"px"))}),[l]),(0,o.useEffect)((()=>{const e=(0,c.P2)(b,20);return document.addEventListener("mousemove",e),document.addEventListener("mouseup",h),document.addEventListener("mouseleave",h),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",h),document.addEventListener("mouseleave",h)}}),[h,resize]),{enableResize:y,resetWidth:()=>{resize(i)}}})(v,w,y),A=pageFromUrl(l),C=(0,De.Qw)(l.hash),E=n.ViewMode===M.WF.GROUP,L=useDeepMemo((()=>extractSearchParameters(l)),[l]),P=elements_isSearch(L),Z=(0,o.useMemo)((()=>sortFromUrl(l,e)),[C.sort,e]),T=(0,o.useMemo)((()=>filterFromUrl(l)),[C.filter]);(0,o.useEffect)((()=>{if(!P&&l.hash){l.hash.substring(1).split("&").forEach((e=>{const t=e.split("=");if(t[0]===ve.Kc)try{D(decodeURIComponent(t[1]))}catch(e){console.error(e)}}))}}),[l.hash,P]);const k=(0,o.useCallback)((e=>{p.push(((e,t)=>(0,De.Nv)(e.pathname,e.hash,{page:0===t?void 0:String(t+1)}))(p.location,e))}),[]),z=(0,o.useCallback)((e=>p.push(setSortInUrl(p.location,e))),[]),_=(0,o.useCallback)((e=>p.push(((e,t)=>(0,De.Nv)(e.pathname,e.hash,{page:void 0,filter:filterToString(t)}))(p.location,e))),[]),[R,G]=(0,o.useState)(!1),onMessageLoad=()=>G(!0),Y=(0,o.useCallback)((()=>G(!1)),[G]),U={conversationMode:isConversationMode(e,n,l),labelID:e,page:pageFromUrl(l),sort:Z,filter:T,search:L,onPage:k},{labelID:F,elements:K,elementIDs:B,loading:W,placeholderCount:V,total:Q}=useElements(U);useEncryptedSearch(U);const H=(0,o.useCallback)((()=>p.push(setParamsInLocation(p.location,{labelID:F}))),[F]),X=useOnCompose();((e,t)=>{const[n]=useMailSettings(),[r]=useLabels(),[a]=useFolders(),[s]=(0,bn.ZP)(),[i]=useConversationCounts(),[c]=useMessageCounts();(0,o.useEffect)((()=>{const o=isConversationMode(e,n,t)?i:c,l=((0,Ne.qL)(o,"LabelID")[e]||{}).Unread||0,d=l>0?"(".concat(l,") "):"",u=getLabelName(e,r,a),p=s.Email;document.title="".concat(d).concat(u," | ").concat(p," | ProtonMail")}),[e,n,s,r,a,i,c])})(F,l);const{checkedIDs:J,selectedIDs:q,handleCheck:$,handleCheckAll:ee,handleCheckOne:te,handleCheckOnlyOne:ne,handleCheckRange:re}=items_useItemsSelection(a,B,[a,F]);mailbox_useNewEmailNotification((()=>ee(!1))),hooks_useCalendars(),(()=>{const e=(0,Ln.Z)(),t=useGetCalendarUserSettings();(0,Zn.ZP)(e,u4.O.key,t)})();const ae=W?V:K.length,oe=!r.isNarrow||!a,se=f||!a,ie=f&&!!ae||!!a,ce=!(r.isNarrow||a&&!J.length),le=ie&&!!a,de=J.length?void 0:a,{focusIndex:ue,getFocusedId:pe,setFocusIndex:me,handleFocus:ge,focusOnLastMessage:je}=useMailboxFocus({elementIDs:B,showList:se,listRef:y,labelID:F,isComposerOpened:m}),be=(e=>{const{UID:t}=(0,UN.Z)(),[n,r]=(0,o.useState)((()=>{const e="w-".concat(t),n=(0,Gq.rV)(e,"0");return(0,Gq.LS)(e,"1"),"0"===n})),[a,s]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{a?r(!1):(r(!0),s(!0))}),e),n})([F,q.length]),ye=(0,o.useCallback)(((e,t=!1)=>{const[n]=g([e||""]);elements_isMessage(n)&&messages_isDraft(n)&&!t&&X({existingDraft:{localID:n.ID,data:n},fromUndo:!1}),E&&elements_isMessage(n)?(onMessageLoad(),p.push(setParamsInLocation(p.location,{labelID:F,elementID:n.ConversationID,messageID:n.ID}))):(onMessageLoad(),p.push(setParamsInLocation(p.location,{labelID:F,elementID:n.ID}))),ee(!1)}),[X,E,F]),he=isConversationMode(F,n,l),{elementRef:Ie,labelDropdownToggleRef:fe,moveDropdownToggleRef:Me}=(({labelID:e,elementID:t,messageID:n,elementIDs:r,checkedIDs:a,selectedIDs:i,focusIndex:l,columnLayout:d,isMessageOpening:u,location:p},{handleBack:m,getFocusedId:g,setFocusIndex:j,focusOnLastMessage:b,handleElement:y,handleCheck:h,handleCheckAll:I,handleCheckOnlyOne:f,handleCheckRange:N,handleFilter:x})=>{const[v]=useMailSettings(),{Shortcuts:w=0}=v||{},D=useGetElementsFromIDs(),S=(0,s.k6)(),[O]=useFolders(),[A]=useLabels(),C=useFolderNavigationHotkeys(),E=null==A?void 0:A.map((({ID:e})=>e)),L=a.length?void 0:t,P=(0,o.useRef)(null),Z=(0,o.useRef)(c.ZT),T=(0,o.useRef)(c.ZT),k=useMoveToFolder(),z=useStar(),_=useMarkAs(),R=usePermanentDelete(e),G=(null==v?void 0:v.ViewLayout)===M.p9.COLUMN||!t,getElementsForShortcuts=()=>{let e=[];return t&&(e=D([t])),a.length&&(e=D(a)),e},moveElementsTo=async(t,n)=>{const r=getElementsForShortcuts();if(!r.length)return;t.stopPropagation();const a=getFolderName(n,O),o=null!=E&&E.includes(e)?Kpe:e;await k(r,n,a,o),L&&m()},Y=[...C,["ArrowRight",e=>{d&&(e.preventDefault(),e.stopPropagation(),b())}],["ArrowLeft",e=>{e.preventDefault();const t=document.querySelector('[data-shortcut-target~="navigation-link"][aria-current="page"]');t&&(t.focus(),j(void 0))}],[["Meta","ArrowUp"],e=>{e.preventDefault(),j(0)}],["ArrowUp",e=>{e.preventDefault();const t=void 0!==l?Math.max(0,l-1):r.length-1;j(t)}],[["Meta","ArrowDown"],e=>{e.preventDefault(),j(r.length-1)}],["ArrowDown",e=>{e.preventDefault();const t=void 0!==l?Math.min(r.length-1,l+1):0;j(t)}],["Enter",e=>{const t=g(),{activeElement:n}=document;t&&"button"!==(null==n?void 0:n.tagName.toLocaleLowerCase())&&(e.stopPropagation(),y(t))}],[["Meta","A"],e=>{if(w){e.preventDefault(),e.stopPropagation();const t=r.length===a.length;h(r,!t,!0)}}],["X",e=>{if(w){const t=g();t&&(e.preventDefault(),f(t))}}],[["Shift","X"],e=>{if(w){const t=g();t&&(e.preventDefault(),N(t))}}],[cue.u.Spacebar,e=>{const t=g(),{activeElement:n}=document;t&&"button"!==(null==n?void 0:n.tagName.toLocaleLowerCase())&&G&&(e.preventDefault(),f(t))}],[["Shift",cue.u.Spacebar],e=>{const t=g();t&&(e.preventDefault(),N(t))}],["Escape",t=>{a.length&&(t.stopPropagation(),I(!1));const n=l;S.push(setParamsInLocation(S.location,{labelID:e})),j(n)}],[["Shift","A"],e=>{w&&(e.stopPropagation(),x({}))}],[["Shift","U"],e=>{w&&(e.stopPropagation(),x({Unread:1}))}],["U",async t=>{if(w){const n=getElementsForShortcuts();if(!n.length)return;t.stopPropagation(),m(),_(n,e,zv.UNREAD)}}],["R",async t=>{if(w){const n=getElementsForShortcuts();if(!n.length)return;t.stopPropagation(),_(n,e,zv.READ)}}],["A",async e=>{w&&await moveElementsTo(e,Fpe)}],["I",async e=>{w&&await moveElementsTo(e,Kpe)}],["S",async e=>{w&&await moveElementsTo(e,Upe)}],[cue.u.Star,async e=>{if(w){const t=getElementsForShortcuts();if(!t.length)return;e.stopPropagation();const n=t.filter((e=>elements_isStarred(e))).length===t.length;await z(t,!n)}}],["T",async e=>{w&&await moveElementsTo(e,Ype)}],[["Meta","Backspace"],async()=>{if(w&&labelIncludes(e,Bpe,Wpe,Upe,Ype,Vpe,Qpe)){const e=getElementsForShortcuts();if(!e.length)return;await R(e.map((e=>e.ID)).filter(Za.Z))}}],["L",e=>{var t;w&&i.length&&(e.preventDefault(),null===(t=Z.current)||void 0===t||t.call(Z))}],["M",e=>{var t;w&&i.length&&(e.preventDefault(),null===(t=T.current)||void 0===t||t.call(T))}],["K",a=>{if(w&&t&&!u){a.preventDefault();const o=!isConversationMode(e,v,p)&&n?n:t,s=r.findIndex((e=>e===o)),i=null!==s?Math.max(0,s-1):r.length-1;if(s===i)return;j(i),y(r[i],!0)}}],["J",a=>{if(w&&t&&!u){a.preventDefault();const o=!isConversationMode(e,v,p)&&n?n:t,s=r.findIndex((e=>e===o)),i=null!==s?Math.min(r.length-1,s+1):0;if(s===i)return;j(i),y(r[i],!0)}}],["Tab",()=>{const e=document.querySelector(":focus");if(e&&e!==P.current)return;const t=document.querySelector('[data-shortcut-target="item-container"][data-shortcut-target-selected="true"]')||document.querySelector('[data-shortcut-target="item-container"]');null==t||t.focus()}]];return(0,Co.y)(P,Y),{elementRef:P,labelDropdownToggleRef:Z,moveDropdownToggleRef:T}})({labelID:F,elementID:a,messageID:i,elementIDs:B,checkedIDs:J,selectedIDs:q,focusIndex:ue,columnLayout:N,isMessageOpening:R,location:l},{focusOnLastMessage:je,getFocusedId:pe,handleBack:H,handleCheck:$,handleCheckOnlyOne:ne,handleCheckRange:re,handleElement:ye,handleFilter:_,handleCheckAll:ee,setFocusIndex:me});return(0,j.jsxs)("div",{ref:Ie,tabIndex:-1,className:"flex-item-fluid flex flex-column flex-nowrap no-outline",children:[oe&&(0,j.jsx)(r3,{labelID:F,elementID:a,messageID:i,selectedIDs:q,checkedIDs:J,elementIDs:B,mailSettings:n,columnMode:f,conversationMode:he,breakpoints:r,onCheck:$,page:A,total:Q,onPage:k,onBack:H,onElement:ye,labelDropdownToggleRef:fe,moveDropdownToggleRef:Me,location:l}),(0,j.jsxs)(m4,{className:"flex",hasToolbar:oe,hasRowMode:!ie,ref:v,children:[se&&(0,j.jsx)(h5,{ref:y,conversationMode:he,labelID:F,loading:W,placeholderCount:V,columnLayout:N,mailSettings:n,elementID:de,elements:K,checkedIDs:J,onCheck:$,onClick:ye,userSettings:t,isSearch:P,breakpoints:r,page:A,total:Q,onPage:k,onFocus:ge,onCheckOne:te,sort:Z,onSort:z,filter:T,onFilter:_}),ie&&(0,j.jsxs)(j.Fragment,{children:[f&&(0,j.jsx)("div",{className:"relative w10p resize-area-container",ref:w,children:(0,j.jsx)("button",{type:"button",className:"cursor-col-resize w100 h100",onMouseDown:S,onDoubleClick:O,children:(0,j.jsx)("span",{className:"sr-only",children:(0,u.c)("Action").t(Jpe||(Jpe=(0,d.Z)(["Use your mouse to resize the view. If you're using your keyboard, you can use left and right arrow keys to resize."])))})})}),(0,j.jsxs)("section",{ref:x,className:"view-column-detail flex-no-min-children flex-column flex-item-fluid flex-nowrap scroll-if-needed relative",children:[ce&&(0,j.jsx)(view_PlaceholderView,{welcomeFlag:be,labelID:F,checkedIDs:J,onCheckAll:ee}),le&&(E?(0,j.jsx)(_ue,{hidden:ce,labelID:F,messageID:i,mailSettings:n,conversationID:a,onBack:H,breakpoints:r,onMessageReady:Y,columnLayout:N,isComposerOpened:m,containerRef:x,highlightKeywords:b()}):(0,j.jsx)(message_MessageOnlyView,{hidden:ce,labelID:F,mailSettings:n,messageID:a,onBack:H,breakpoints:r,onMessageReady:Y,columnLayout:N,isComposerOpened:m,highlightKeywords:b()}))]})]})]})]})};var qpe,$pe,eme,tme,nme,rme,ame,ome,sme,ime,cme,lme,dme,ume=(0,o.memo)(MailboxContainer),pme=n(47054);function MailOnboardingModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function MailOnboardingModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?MailOnboardingModal_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MailOnboardingModal_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var onboarding_MailOnboardingModal=e=>{var t;const n=(0,Or.PO)(M.ei.PROTONMAIL),[r]=(0,bn.ZP)(),a=link_useSettingsLink(),o=(0,j.jsx)("strong",{children:"pm.me/app"},"link"),[s,i]=Gue(),c=!i&&s.length,l=null===(t=(0,nN.Z)(y.P.EasySwitch).feature)||void 0===t?void 0:t.Value,{feature:p}=(0,nN.Z)(y.P.UsedMailMobileApp);return(0,j.jsx)(onboarding_OnboardingModal,MailOnboardingModal_objectSpread(MailOnboardingModal_objectSpread({},e),{},{children:[({onNext:e,displayGenericSteps:t})=>t?null:(0,j.jsx)(onboarding_OnboardingStep,{submit:(0,u.c)("Onboarding").t(qpe||(qpe=(0,d.Z)(["Next"]))),onSubmit:e,close:null,children:(0,j.jsx)(onboarding_OnboardingContent,{img:(0,j.jsx)("img",{src:pme,alt:(0,u.c)("Onboarding ProtonMail").t($pe||($pe=(0,d.Z)(["Meet your encrypted mailbox"])))}),title:(0,u.c)("Onboarding ProtonMail").t(eme||(eme=(0,d.Z)(["Meet your encrypted mailbox"]))),description:(0,u.c)("Onboarding ProtonMail").t(tme||(tme=(0,d.Z)([""," is now more modern and customizable while still protecting your data with advanced encryption."])),n)})}),({onNext:e})=>void 0===p||p.Value||r.isFree?null:(0,j.jsx)(onboarding_OnboardingStep,{submit:(0,u.c)("Onboarding").t(nme||(nme=(0,d.Z)(["Next"]))),onSubmit:e,close:null,children:(0,j.jsxs)(onboarding_OnboardingContent,{title:(0,u.c)("Onboarding ProtonMail").t(rme||(rme=(0,d.Z)(["Get the "," mobile app"])),n),description:(0,u.c)("Onboarding ProtonMail").t(ame||(ame=(0,d.Z)(["Available on iOS and Android."]))),children:[(0,j.jsx)("div",{className:"text-center",children:(0,j.jsx)(YZ,{value:"https://pm.me/app?type=qr",size:200})}),(0,j.jsx)("p",{className:"text-center",children:(0,u.c)("Info").jt(ome||(ome=(0,d.Z)(["Using your mobile device, scan this QR-Code or visit ","."])),o)})]})}),({onNext:e})=>c||r.isFree?null:(0,j.jsx)(onboarding_OnboardingStep,{submit:(0,u.c)("Action").t(sme||(sme=(0,d.Z)(["Import messages"]))),onSubmit:()=>{a(l?"/easy-switch":"/import-export",M.ei.PROTONMAIL,!0),e()},onClose:e,close:(0,u.c)("Action").t(ime||(ime=(0,d.Z)(["Start using ",""])),n),children:(0,j.jsx)(onboarding_OnboardingContent,{img:(0,j.jsx)("img",{src:qH,alt:(0,u.c)("Onboarding ProtonMail").t(cme||(cme=(0,d.Z)(["Import your messages"])))}),title:(0,u.c)("Onboarding ProtonMail").t(lme||(lme=(0,d.Z)(["Import your messages"]))),description:(0,u.c)("Onboarding ProtonMail").t(dme||(dme=(0,d.Z)(["Our Import Assistant quickly transfers all your emails to your new encrypted mailbox."])))})})]}))};const processContactUpdate=async(e,t,n,r)=>{const a=null==e?void 0:e.Cards.find((({Type:e})=>e===M.BK.SIGNED));if(!a)return;const{data:o}=await readSigned(a,{publicKeys:t}),s=parse(o).filter((({field:e,group:t})=>"email"===e&&void 0!==t)).map((e=>(0,Xe.mQ)(e.value))),i=n.get(zb);s.forEach((e=>{i&&i.delete(e)})),r.forEach(((e,t)=>{var n;const a=(0,Xe.mQ)((null===(n=e.data)||void 0===n?void 0:n.Sender.Address)||"");s.includes(a)&&updateMessageCache(r,t,{verification:void 0})}))};function useConversationsEvents_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const useConversationsEvent=()=>{const e=(0,Dn.Z)(),t=(0,i.I0)(),n=useGetConversation();(0,mn.ko)((async({Conversations:r=[],Messages:a=[]})=>{const{toCreate:o,toUpdate:s,toDelete:i}=a.reduce((({toCreate:e,toUpdate:t,toDelete:r},{ID:a,Action:o,Message:s})=>{const i=s&&n(s.ConversationID);return o===M.P.CREATE&&i?e.push(s):o!==M.P.UPDATE_DRAFT&&o!==M.P.UPDATE_FLAGS||!i?o===M.P.DELETE&&(r[a]=!0):t.push(function useConversationsEvents_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?useConversationsEvents_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):useConversationsEvents_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({ID:a},s)),{toCreate:e,toUpdate:t,toDelete:r}}),{toCreate:[],toUpdate:[],toDelete:{}});t(mv({toCreate:o,toUpdate:s,toDelete:i}));for(const{ID:a,Action:o,Conversation:s}of r){if(!n(a))return;if(o===M.P.DELETE&&t(gv(a)),o===M.P.UPDATE_DRAFT||o===M.P.UPDATE_FLAGS){const r=n(a);try{var c;const n=parseLabelIDsInEvent((null==r?void 0:r.Conversation)||{},s);n.NumMessages!==(null==r||null===(c=r.Messages)||void 0===c?void 0:c.length)?t(nv({api:e,conversationID:a,messageID:void 0})):t(jv({ID:a,updatedConversation:n}))}catch(n){console.warn("Something went wrong on updating a conversation from an event.",n),t(nv({api:e,conversationID:a,messageID:void 0}))}}}}))};function PageContainer_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function PageContainer_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PageContainer_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PageContainer_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const PageContainer=({params:{elementID:e,labelID:t,messageID:n},breakpoints:r,isComposerOpened:a},i)=>{const c=(0,s.TH)(),l=(0,s.k6)(),[d]=useMailSettings(),[u]=(0,Dr.Z)(),{createModal:p}=(0,In.Z)(),[m,g]=hooks_useWelcomeFlags(),[b]=hooks_useIsMnemonicAvailable(),[h]=(0,bn.ZP)(),I=(0,o.useRef)(!1),{feature:f}=(0,nN.Z)(y.P.SeenMnemonicPrompt);(0,o.useEffect)((()=>{if(I.current)return;const e=new URLSearchParams(c.search),t=e.has("beta");t&&(e.delete("beta"),l.replace({search:e.toString()}));const n=t&&!u.EarlyAccess,r=b&&h.MnemonicStatus===IC.PROMPT&&!1===(null==f?void 0:f.Value);m.isWelcomeFlow?(I.current=!0,p((0,j.jsx)(onboarding_MailOnboardingModal,{onDone:()=>{n?p((0,j.jsx)(onboarding_BetaOnboardingModal,{onClose:()=>{g()}})):g()}}))):n?(I.current=!0,p((0,j.jsx)(onboarding_BetaOnboardingModal,{}))):r&&(I.current=!0,p((0,j.jsx)(mnemonic_MnemonicPromptModal,{})))}),[b,f]),(()=>{const e=(0,Ln.Z)(),t=useMessageCache(),{subscribe:n}=(0,Ie.Z)(),[r=[]]=(0,us.Fj)(),{publicKeys:a}=(0,ju.ee)(r);(0,o.useEffect)((()=>n((({Contacts:n=[]})=>{for(const{Contact:r}of n)processContactUpdate(r,a,e,t)}))),[a])})(),useConversationsEvent();return(({onOpenShortcutsModal:e})=>{const[{Shortcuts:t=0}={}]=useMailSettings(),n=useFolderNavigationHotkeys(),r=useOnCompose(),a=(0,o.useRef)(window.document),s=[...n,[cue.u.QuestionMark,t=>{isTargetEditable(t)||e()}],["Tab",()=>{if(document.querySelector(":focus"))return;const e=document.querySelector('[data-shortcut-target="item-container"][data-shortcut-target-selected="true"]')||document.querySelector('[data-shortcut-target="item-container"]');null==e||e.focus()}],[cue.u.Slash,e=>{if(t&&!isTargetEditable(e)){e.preventDefault();const t=document.querySelector('[data-shorcut-target="searchbox-field"]');null==t||t.focus()}}],["N",e=>{t&&!isTargetEditable(e)&&r({action:ve.Xh.NEW})}]];(0,Co.y)(a,s)})({onOpenShortcutsModal:()=>{p((0,j.jsx)(MailShortcutsModal,{}),"shortcuts-modal")}}),t?(0,j.jsx)(d4,{ref:i,isBlurred:m.isWelcomeFlow,labelID:t,elementID:e,breakpoints:r,children:(0,j.jsx)(app_LocationErrorBoundary,{children:(0,j.jsx)(ume,{labelID:t,userSettings:u,mailSettings:d,breakpoints:r,elementID:e,messageID:n,location:c,history:l,isComposerOpened:a})})}):(0,j.jsx)(s.l_,{to:"/inbox"})},mme=(0,o.memo)((0,o.forwardRef)(PageContainer)),PageParamsParser=(e,t)=>{const[n=[]]=useLabels(),[r=[]]=useFolders(),a=(0,s.$B)(),o=useDeepMemo((()=>{const e=[...n,...r].map((({ID:e})=>e)),{elementID:t,labelID:o="",messageID:s}=(a||{}).params||{};return{elementID:t,labelID:ve.L1[o]||e.includes(o)&&o,messageID:s}}),[a]);return(0,j.jsx)(mme,PageContainer_objectSpread(PageContainer_objectSpread({ref:t},e),{},{params:o}))};var gme=(0,o.forwardRef)(PageParamsParser);const globalReset=e=>{Object.assign(e,newState())},elementsReducers_reset=(e,t)=>{Object.assign(e,newState(t.payload))},elementsReducers_updatePage=(e,t)=>{e.page=t.payload},loadPending=(e,t)=>{e.pendingRequest=!0,e.page=t.meta.arg.page},loadFulfilled=(e,t)=>{const{page:n,params:r}=t.meta.arg,{Total:a,Elements:o}=t.payload;Object.assign(e,{beforeFirstLoad:!1,invalidated:!1,pendingRequest:!1,page:n,total:a,retry:newRetry(e.retry,r,void 0)}),e.pages.push(n),Object.assign(e.elements,(0,Ne.qL)(o,"ID"))},elementsReducers_manualPending=e=>{e.pendingRequest=!0},elementsReducers_manualFulfilled=e=>{e.pendingRequest=!1},elementsReducers_removeExpired=(e,t)=>{delete e.elements[t.payload.ID||""]},elementsReducers_invalidate=e=>{e.invalidated=!0},eventUpdatesPending=(e,t)=>{const{toCreate:n,toUpdate:r,toDelete:a}=t.meta.arg;n.forEach((t=>{e.elements[t.ID||""]=t})),r.forEach((t=>{const n=e.elements[t.ID||""];n&&(e.elements[t.ID||""]=parseLabelIDsInEvent(n,t))})),a.forEach((t=>{delete e.elements[t]}))},eventUpdatesFulfilled=(e,t)=>{t.payload.filter(Za.Z).forEach((t=>{e.elements[t.ID||""]=t}))},elementsReducers_addESResults=(e,t)=>{const n=t.payload.elements.length,r=(0,xe.w6)(0,Math.ceil(n/ve.IV));Object.assign(e,{bypassFilter:[],beforeFirstLoad:!1,invalidated:!1,pendingRequest:!1,page:t.payload.page,total:n,pages:r,elements:(0,Ne.qL)(t.payload.elements,"ID"),retry:{payload:void 0,count:ve.$O,error:void 0}})},optimisticUpdates=(e,t)=>{if(t.payload.elements.forEach((t=>{t.ID&&(e.elements[t.ID]=t)})),t.payload.isMove){const n=t.payload.elements.map((({ID:e})=>e||""));e.bypassFilter=(0,xe.Hg)(e.bypassFilter,n)}if(t.payload.bypass){const{conversationMode:n}=t.payload;t.payload.elements.forEach((t=>{const r=(elements_isMessage(t)&&n?t.ConversationID:t.ID)||"";e.bypassFilter.includes(r)||e.bypassFilter.push(r)}))}},elementsReducers_optimisticDelete=(e,t)=>{t.payload.elementIDs.forEach((t=>{delete e.elements[t]}))},elementsReducers_optimisticEmptyLabel=e=>{e.elements={},e.page=0},jme=(0,Fh.PH)("reset");function elementsSlice_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function elementsSlice_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?elementsSlice_ownKeys(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):elementsSlice_ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const newState=({page:e=0,params:t={},retry:n={payload:null,count:0,error:void 0},beforeFirstLoad:r=!0}={})=>({beforeFirstLoad:r,invalidated:!1,pendingRequest:!1,params:elementsSlice_objectSpread(elementsSlice_objectSpread({},{labelID:M.C7.INBOX,conversationMode:!0,filter:{},sort:{sort:"Time",desc:!0},search:{},esEnabled:!1}),t),page:e,total:void 0,elements:{},pages:[],bypassFilter:[],retry:n});var bme=(0,Fh.oM)({name:"elements",initialState:newState(),reducers:{},extraReducers:e=>{e.addCase(jme,globalReset),e.addCase(gx,elementsReducers_reset),e.addCase(jx,elementsReducers_updatePage),e.addCase(yx.pending,loadPending),e.addCase(yx.fulfilled,loadFulfilled),e.addCase(hx,elementsReducers_removeExpired),e.addCase(Ix,elementsReducers_invalidate),e.addCase(fx.pending,eventUpdatesPending),e.addCase(fx.fulfilled,eventUpdatesFulfilled),e.addCase(Mx,elementsReducers_manualPending),e.addCase(Nx,elementsReducers_manualFulfilled),e.addCase(xx,elementsReducers_addESResults),e.addCase(vx,optimisticUpdates),e.addCase(wx,elementsReducers_optimisticDelete),e.addCase(Dx,optimisticUpdates),e.addCase(Sx,elementsReducers_optimisticEmptyLabel),e.addCase(Ox,optimisticUpdates),e.addCase(Ax,optimisticUpdates)}}).reducer;const attachmentsReducers_globalReset=e=>{Object.keys(e).forEach((t=>delete e[t]))},setAttachment=(e,{payload:{ID:t,attachment:n}})=>{e[t]=n};var yme=(0,Fh.oM)({name:"attachments",initialState:{},reducers:{},extraReducers:e=>{e.addCase(jme,attachmentsReducers_globalReset),e.addCase(Kh,setAttachment),e.addCase(Bh,setAttachment)}}).reducer;const conversationsReducers_globalReset=e=>{Object.keys(e).forEach((t=>delete e[t]))},getConversation=(e,t)=>$x({conversations:e},{ID:t}),getAllConversation=e=>ev({conversations:e}),conversationsReducers_initialize=(e,t)=>{e[t.payload.Conversation.ID]=t.payload},conversationsReducers_loadFulfilled=(e,t)=>{const{Conversation:n,Messages:r}=t.payload,{conversationID:a}=t.meta.arg,o=getConversation(e,a);o?(o.Conversation=n,o.Messages=r,o.loadRetry=o.loadRetry?o.loadRetry+1:1,o.errors={network:[],unknown:[]}):e[n.ID]={Conversation:n,Messages:r,loadRetry:1,errors:{network:[],unknown:[]}}},loadRejected=(e,t)=>{const n=t.payload,r={};isNetworkError(n)?r.network=[n]:isNotExistError(n)?r.notExist=[n]:r.unknown=[n];const{conversationID:a}=t.meta.arg,o=getConversation(e,a);o&&(o.errors=r,o.loadRetry=o.loadRetry?o.loadRetry+1:1)},conversationsReducers_retryLoading=(e,{payload:{ID:t}})=>{const n=getConversation(e,t);n&&(n.loadRetry=0,n.errors={})},conversationsReducers_applyLabelsOnConversationMessages=(e,{payload:{ID:t,messageID:n,changes:r,unreadStatuses:a,updatedConversation:o,conversationResult:s}})=>{const i=getConversation(e,t);var c;i&&(i.Conversation=o,i.Messages=null===(c=s.Messages)||void 0===c?void 0:c.map((e=>e.ID===n?applyLabelChangesOnMessage(e,r,a):e)))},conversationsReducers_applyLabelsOnConversation=(e,{payload:{ID:t,changes:n,unreadStatuses:r}})=>{const a=getConversation(e,t);a&&(a.Conversation=applyLabelChangesOnConversation(a.Conversation,n,r))},conversationsReducers_optimisticDelete=(e,{payload:t})=>{delete e[t]},conversationsReducers_optimisticDeleteConversationMessages=(e,{payload:{ID:t,messages:n}})=>{const r=getConversation(e,t);r&&(r.Messages=n)},conversationsReducers_optimisticRestore=(e,{payload:t})=>{t.forEach((t=>{e[t.Conversation.ID]=t}))},conversationsReducers_optimisticMarkAsConversationMessages=(e,{payload:{ID:t,messageID:n,updatedConversation:r,changes:a}})=>{const o=getConversation(e,t);var s;o&&(o.Conversation=r,o.Messages=null===(s=o.Messages)||void 0===s?void 0:s.map((e=>e.ID===n?applyMarkAsChangesOnMessage(e,a):e)))},conversationsReducers_optimisticMarkAsConversation=(e,{payload:{ID:t,labelID:n,changes:r}})=>{const a=getConversation(e,t);a&&(a.Conversation=applyMarkAsChangesOnConversation(a.Conversation,n,r))},conversationsReducers_deleteConversation=(e,{payload:t})=>{delete e[t]},conversationsReducers_updateConversation=(e,{payload:{ID:t,updates:n}})=>{const r=e[t],a=(s=n,conversation_objectSpread(conversation_objectSpread(conversation_objectSpread({},o=r),s),{},{Conversation:null!=o&&o.Conversation||s.Conversation?conversation_objectSpread(conversation_objectSpread({},null==o?void 0:o.Conversation),s.Conversation):void 0,errors:conversation_objectSpread(conversation_objectSpread({},null==o?void 0:o.errors),s.errors)}));var o,s;e[t]=a},eventMessagesUpdates=(e,t)=>{const{toCreate:n,toUpdate:r,toDelete:a}=t.payload;if([...n,...r].forEach((t=>{const n=getConversation(e,t.ConversationID);if(n){var r;n.loadRetry=0,n.errors={};let e;e=(null===(r=n.Messages)||void 0===r?void 0:r.some((e=>e.ID===t.ID)))&&n.Messages?n.Messages.map((e=>e.ID===t.ID?parseLabelIDsInEvent(e,t):e)):[...n.Messages||[],t],n.Messages=e}})),Object.keys(a).length>0){getAllConversation(e).forEach((e=>{if(null!=e&&e.Conversation.ID&&e.Messages){const t=e.Messages.filter((({ID:e})=>!a[e]));e.Messages.length!==t.length&&(e.Messages=t)}}))}},conversationsReducers_eventConversationUpdate=(e,{payload:{ID:t,updatedConversation:n}})=>{const r=getConversation(e,t);r&&(r.Conversation=n)};var hme=(0,Fh.oM)({name:"conversations",initialState:{},reducers:{},extraReducers:e=>{e.addCase(jme,conversationsReducers_globalReset),e.addCase(tv,conversationsReducers_initialize),e.addCase(nv.fulfilled,conversationsReducers_loadFulfilled),e.addCase(nv.rejected,loadRejected),e.addCase(rv,conversationsReducers_retryLoading),e.addCase(av,conversationsReducers_applyLabelsOnConversationMessages),e.addCase(ov,conversationsReducers_applyLabelsOnConversation),e.addCase(uv,conversationsReducers_deleteConversation),e.addCase(sv,conversationsReducers_optimisticDelete),e.addCase(cv,conversationsReducers_optimisticRestore),e.addCase(iv,conversationsReducers_optimisticDeleteConversationMessages),e.addCase(lv,conversationsReducers_optimisticMarkAsConversationMessages),e.addCase(dv,conversationsReducers_optimisticMarkAsConversation),e.addCase(pv,conversationsReducers_updateConversation),e.addCase(mv,eventMessagesUpdates),e.addCase(gv,conversationsReducers_deleteConversation),e.addCase(jv,conversationsReducers_eventConversationUpdate)}}).reducer;const Ime=(0,Fh.xC)({reducer:{elements:bme,conversations:hme,attachments:yme},middleware:e=>e({serializableCheck:{ignoreState:!0,ignoredActionPaths:["payload.abortController","meta.arg.api","payload.attachment"]}})}),MainContainer=()=>{const e=hooks_useActiveBreakpoint(),t=(0,o.useRef)(null);return(0,b.Z)([y.P.EarlyAccessScope,y.P.ScheduledSend,y.P.SpotlightScheduledSend,y.P.BundlePromoShown,y.P.EnabledEncryptedSearch,y.P.SpotlightEncryptedSearch,y.P.UsedMailMobileApp,y.P.Mnemonic,y.P.CalendarEmailNotification,y.P.SpyTrackerProtection]),(0,j.jsx)(i.zt,{store:Ime,children:(0,j.jsx)(containers_MessageProvider,{children:(0,j.jsx)(containers_ContactProvider,{children:(0,j.jsx)(containers_EncryptedSearchProvider,{children:(0,j.jsx)(MailContentRefProvider,{mailContentRef:t,children:(0,j.jsx)(containers_GetStartedChecklistProvider,{children:(0,j.jsx)(qS,{breakpoints:e,children:({isComposerOpened:n})=>(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(h.Z,{}),(0,j.jsx)(s.rs,{children:(0,j.jsx)(s.AW,{path:ve.Gw,render:()=>(0,j.jsx)(gme,{ref:t,breakpoints:e,isComposerOpened:n})})})]})})})})})})})})};var app_MainContainer=()=>(0,j.jsx)(I.Z,{component:(0,j.jsx)(app_StandardErrorPage,{}),children:(0,j.jsx)(MainContainer,{})})},63813:function(e,t,n){"use strict";n.d(t,{Z:function(){return dropdown_Dropdown}});var r=n(82389),a=n(19745),o=n(22572),s=n(15841),i=n(40635),c=n(62366),l=n(24737),d=n(23710);var u,p,hooks_useDropdownArrowNavigation=({rootRef:e})=>{const getDropdownMenuItems=()=>e.current?(0,d.ht)(e.current,{includeContainer:!1}).filter((e=>!e.dataset.preventArrowNavigation)):[],getFocusIndex=()=>getDropdownMenuItems().findIndex((e=>e===document.activeElement)),findElementAndFocus=e=>{const t=getDropdownMenuItems();if(!t.length)return;const n=t.length-1;let r=e;r>n&&(r=0),r<0&&(r=n);t[r].focus()};return{shortcutHandlers:[["ArrowUp",e=>{e.preventDefault(),(()=>{const e=getFocusIndex();findElementAndFocus(e-1)})()}],[["Meta","ArrowUp"],e=>{e.preventDefault(),findElementAndFocus(0)}],["ArrowDown",e=>{e.preventDefault(),(()=>{const e=getFocusIndex();findElementAndFocus(e+1)})()}],[["Meta","ArrowDown"],e=>{e.preventDefault(),(()=>{const e=getDropdownMenuItems().length-1;findElementAndFocus(e)})()}]]}},m=n(15707),g=n(73746),j=n(20826),b=n(8432),y=n(80892),h=n(65272),I=n(48632),f=n(67233),M=n(63402),N=n(5792),x=n(37010);const v=["anchorRef","children","className","style","originalPlacement","availablePlacements","originalPosition","offset","onClose","onClosed","onContextMenu","isOpen","noMaxWidth","noMaxHeight","noMaxSize","noCaret","disableFocusTrap","sameAnchorWidth","autoClose","autoCloseOutside","autoCloseOutsideAnchor","contentProps","disableDefaultArrowNavigation","updatePositionOnDOMChange","UNSTABLE_AUTO_HEIGHT"];function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var dropdown_Dropdown=e=>{var t;let{anchorRef:n,children:a,className:d,style:w,originalPlacement:D="bottom",availablePlacements:S=f.SV,originalPosition:O,offset:A=8,onClose:C=c.ZT,onClosed:E,onContextMenu:L=c.ZT,isOpen:P=!1,noMaxWidth:Z=!1,noMaxHeight:T=!1,noMaxSize:k=!1,noCaret:z=!1,disableFocusTrap:_=!1,sameAnchorWidth:R=!1,autoClose:G=!0,autoCloseOutside:Y=!0,autoCloseOutsideAnchor:U=!0,contentProps:F,disableDefaultArrowNavigation:K=!1,updatePositionOnDOMChange:B=!0,UNSTABLE_AUTO_HEIGHT:W}=e,V=(0,o.Z)(e,v);const[Q]=(0,h.Z)(),H=D.includes("right")?D.replace("right","left"):D.replace("left","right"),[X,J]=(0,s.useState)(null),{position:q,placement:$}=(0,I.Z)({popperEl:X,anchorEl:n.current,isOpen:P,originalPlacement:Q?H:D,availablePlacements:S,originalPosition:O,offset:A,updatePositionOnDOMChange:B}),ee=(0,s.useRef)(null),te=(0,m.Z)(ee,J),ne=(0,s.useRef)(null),re=(0,s.useRef)(),[ae,oe]=(0,s.useState)(),se=(0,N.Z)({rootRef:ee,active:P&&!_,enableInitialFocus:!1}),{shortcutHandlers:ie}=hooks_useDropdownArrowNavigation({rootRef:ee}),ce=["Escape",e=>{e.stopPropagation(),null==C||C()}],le=K?[ce]:[...ie,ce];(0,g.y)(ee,le,{dependencies:[P,!K]}),(0,s.useLayoutEffect)((()=>{var e;P&&(R&&(re.current=null===(e=n.current)||void 0===e?void 0:e.getBoundingClientRect()))}),[P]),(0,s.useEffect)((()=>{if(!P)return;const handleClickOutside=({target:e})=>{var t;const r=e,a=n.current;!Y||U&&null!=a&&a.contains(r)||null!=X&&X.contains(r)||null!==(t=r.dataset)&&void 0!==t&&t.ignoreClose||C()};return document.addEventListener("dropdownclose",C),document.addEventListener("click",handleClickOutside,{capture:!0}),()=>{document.removeEventListener("dropdownclose",C),document.removeEventListener("click",handleClickOutside,{capture:!0})}}),[P,Y,C,n.current,X]);const[de,ue,pe]=(0,j.Z)(P),me=(0,b.dh)([l.X9,k&&"dropdown--no-max-size","dropdown--".concat($),de&&"is-dropdown-out",z&&"dropdown--no-caret",d,"no-outline"]);if(ue&&!P)return null;const ge={"--top":q.top,"--left":q.left},je=ae||re.current?{"--width":"".concat((null===(t=re.current)||void 0===t?void 0:t.width)||(null==ae?void 0:ae.width)),"--height":"".concat((null==ae?void 0:ae.height)||void 0)}:{},be=_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread({},T?{"--max-height":"unset"}:{}),Z?{"--max-width":"unset"}:{}),w),ge),je),ye=W?{"--height-custom":"auto"}:void 0;return(0,x.jsx)(M.Z,{children:(0,x.jsxs)("div",_objectSpread(_objectSpread(_objectSpread({ref:te,style:_objectSpread(_objectSpread(_objectSpread(_objectSpread({},be),w),ge),je),role:"dialog",className:me,onClick:e=>{G&&C(e)},onAnimationEnd:({animationName:e})=>{if(e.includes("anime-dropdown-out")&&de&&(pe(),oe(void 0),null==E||E()),e.includes("anime-dropdown-in")&&P&&ne.current&&!ae){var t;const e=null===(t=ne.current)||void 0===t?void 0:t.getBoundingClientRect();oe(e)}},onContextMenu:L,"data-testid":"dropdown-button"},V),se),{},{children:[(0,x.jsx)("div",{role:"button",tabIndex:0,"data-ignore-close":"true",className:"dropdown-backdrop",title:(0,i.c)("Action").t(u||(u=(0,r.Z)(["Close"]))),onClick:C,children:(0,x.jsx)("span",{className:"sr-only",children:(0,i.c)("Action").t(p||(p=(0,r.Z)(["Close"])))})}),(0,x.jsx)("div",_objectSpread(_objectSpread({ref:ne,style:ye},F),{},{className:(0,b.dh)(["dropdown-content",(0,y.P)(ye),null==F?void 0:F.className]),children:a}))]}))})}},40674:function(e,t,n){"use strict";var r=n(19745),a=n(22572),o=n(15841),s=n(8432),i=n(52188),c=n(10368),l=n(62873),d=n(48736),u=n(37010);const p=["children","className","hasCaret","isOpen","caretClassName","loading","disabled"];function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const m=i.Z,g=(0,o.forwardRef)(((e,t)=>{let{children:n,className:r,hasCaret:o=!1,isOpen:i=!1,caretClassName:g="",loading:j=!1,disabled:b}=e,y=(0,a.Z)(e,p);return(0,u.jsxs)(l.x,_objectSpread(_objectSpread({as:m,ref:t,"aria-expanded":i,"aria-busy":j,disabled:!!j||b,"data-testid":"dropdown-button",className:(0,s.dh)([n&&o?"flex flex-align-items-center":"",r])},y),{},{children:[n,j&&(0,u.jsx)("span",{className:"loader-container",children:(0,u.jsx)(d.Z,{})}),o&&(0,u.jsx)(c.Z,{className:(0,s.dh)(["flex-item-noshrink",n?"ml0-5":"",g]),isOpen:i})]}))}));t.Z=g},10368:function(e,t,n){"use strict";var r=n(8432),a=n(75622),o=n(37010);t.Z=({className:e,isOpen:t})=>(0,o.jsx)(a.Z,{className:(0,r.dh)([t&&"rotateX-180",e]),size:12,name:"angle-down"})},69024:function(e,t,n){"use strict";var r=n(19745),a=n(22572),o=n(15841),s=n(8432),i=n(48736),c=n(37010);const l=["className","isSelected","disabled","loading","children","liClassName","actionType"];function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const d=(0,o.forwardRef)(((e,t)=>{let{className:n="",isSelected:r,disabled:o,loading:d,children:u,liClassName:p,actionType:m}=e,g=(0,a.Z)(e,l);return(0,c.jsx)("button",_objectSpread(_objectSpread({ref:t,type:"button",disabled:o||d,className:(0,s.dh)(["dropdown-item-button w100 pr1 pl1 pt0-5 pb0-5",r&&"dropdown-item--is-selected",n]),"aria-busy":d},g),{},{children:d?(0,c.jsxs)("div",{className:"flex flex-align-items-center flex-nowrap",children:[(0,c.jsx)("span",{className:"flex-item-fluid text-ellipsis",children:u}),(0,c.jsx)(i.Z,{className:"flex-item-noshrink"})]}):u}))}));t.Z=d},80892:function(e,t,n){"use strict";n.d(t,{P:function(){return getCustomSizingClasses}});var r=n(8432);const getCustomSizingClasses=e=>e?(0,r.dh)([void 0!==e["--height-custom"]&&"h-custom",void 0!==e["--width-custom"]&&"w-custom",void 0!==e["--top-custom"]&&"top-custom",void 0!==e["--right-custom"]&&"right-custom",void 0!==e["--left-custom"]&&"left-custom",void 0!==e["--bottom-custom"]&&"bottom-custom"]):""},20826:function(e,t,n){"use strict";var r=n(15841),a=n(32778);t.Z=(e=!1)=>{const[[t,n],o]=(0,r.useState)((()=>[!1,!e])),s=(0,a.Z)(e);(0,r.useLayoutEffect)((()=>{e?o([!1,!1]):!e&&s&&o([!0,!1])}),[e,s]);return[t,n,()=>o([!1,!0])]}},32778:function(e,t,n){"use strict";var r=n(15841);t.Z=e=>{const t=(0,r.useRef)();return(0,r.useEffect)((()=>{t.current=e})),t.current}},66872:function(e){"use strict";e.exports='## Release 4.0.12 - Dec 8, 2021\n\n### Improvements\n\n-   Updated the User Interface of the composer\n-   Added support for images loaded via CSS style attributes\n-   Added the ability to jump to My addresses directly from the composer "To" field\n-   Added the ability to prompt the default handler browser setting from the UI for Firefox users, eliminating the prompt on each page load\n-   Added the ability to change the default font from the Mail interface without the need to navigate to Settings\n-   Added automatic calendar creation for cases when an invite is received but no calendar exists yet\n-   Various minor UI improvements\n\n### Bug fixes\n\n-   Fixed an issue where some base64-encoded message bodies would not be displayed correctly\n-   Fixed an issue where on rare occasions, attachments in external PGP-encrypted messages would only display on page reload\n-   Fixed an issue where the contacts widget would flash rapidly for some particular screen resolutions\n\n## Release 4.0.11 - Nov 24, 2021\n\n### Improvements\n\n-   Improved the error management when trying to view a contact with corrupted data inside\n-   Added some technical improvements related to the State Management of the application\n-   Minor UI improvements and enhancements\n\n### Bug fixes\n\n-   Fixed an issue where sending external, signed, non-encrypted messages would time out due to the message size\n-   Fixed an issue where the width of the advanced search widget would vary depending on the options chosen\n-   Fixed an issue where some attachment file icons would not be displayed properly\n-   Fixed an issue where the sent icon would be missing in header details if the setting "Keep messages in Sent/Drafts" was enabled\n-   Fixed an issue where mailto: links were considered as links if the mail contains a <base> tag\n-   Fixed an issue where it was possible to use the Space key to invisibly select a conversation in Row layout\n-   Fixed an issue where the file preview would not be full screen if clicked on a file from inside the composer\n\n## Release 4.0.10 - Nov 10, 2021\n\n### Improvements\n\n-   Added the contact import functionality to the Mail Settings "Import/Export" page\n-   Added a warning for keys that are considered less secure in Settings\n-   Added an option to filter locations in the advanced search widget\n-   Improved the autocomplete functionality that displays when adding contacts to a group to display most frequently used contacts first\n-   Added file preview support for videos up to 100MB\n-   Added icons for additional attachment file types\n-   Clicking on the attachment icon in the expanded message view redirects to the attachment list\n-   Removed the success banner when marking messages as read/unread\n\n### Bug fixes\n\n-   Fixed an issue where if two attachments had the same name, both attachments would be removed if attempting to remove one inside the composer\n-   Fixed an issue where for emails with certain styles, the styles would be displayed outside of the email boundaries\n-   Fixed an issue where particular HTML content would look broken if pasted from an external source and saved as a draft\n-   Fixed an issue where the wrong conversation would be opened if pressing "Enter" after archiving something\n-   Fixed an issue where importing a contacts csv file from Google would fail if the file contains multiple addresses of the same type\n-   Fixed an issue where base tag support would not work properly in some cases\n-   Fixed an issue where after moving several messages to Trash one by one, the whole conversation would appear as moved to Trash for a short moment\n-   Fixed an issue where under certain circumstances a "Sending..." banner would be displayed in addition to a failure banner if a message actually failed to be sent\n-   Fixed an issue where some dropdown elements would stay on the screen when scrolling\n-   Fixed an issue where the "Delete" option would not display if adding a search location with a lot of characters\n-   Updated "Inline PGP" wording to be "PGP/Inline" in contacts\n\n## Release 4.0.9 - Oct 27, 2021\n\n### Improvements\n\n-   The composer window can now be moved horizontally allowing to customize the writing experience even further\n-   In column layout, the message view can now be resized by dragging the vertical separator between the list view and the message view\n-   Updated the UX of the location field inside the advanced search\n-   Improved focus management by placing the autofocus on the attachment popup when adding an attachment to the composer\n-   Improved the search mechanism by defaulting to the current location when opening advanced search\n-   Updated the icon for "Encryption & keys" in settings to match the encryption icon in the message view\n-   Improved the underlying technology for undoing various actions, like sending and moving messages\n-   Implemented various performance improvements to speed up loading times, including but not limited to: composer, sidebar, drag&drop elements, focus management and pagination\n-   Updated the design of email calendar invitations\n\n### Bug fixes\n\n-   Fixed an issue where sending large attachments with non-Latin file names would cause a sending problem\n-   Fixed an issue where a wrong error message would be displayed if the sending limit has been reached\n-   Fixed an issue where the last day was excluded in search results if defining a specific date range in advanced search\n-   Fixed an issue where adding an image URL with extra URL parameters in contacts would show a broken image\n-   Fixed an issue where embedded images would not display correctly for some seconds while the message is in "Sending" state\n-   Fixed an issue where the "Drag&Drop" area would be activated too late when dragging attachments into the composer from particular directions\n-   Fixed an issue where if clicking into the composer body first, it would require two clicks to open the "CC/BCC" fields\n-   Fixed an issue where when moving messages from the Spam folder, the "Undo" action would sometimes not appear in the success notification\n-   Fixed an issue where moving a labelled message to Trash and undoing the action would result in missing labels\n-   Renamed all "X25519" key references to "Curve25519"\n\n## Release 4.0.8 - Oct 13, 2021\n\n### Improvements\n\n-   Updated the UX of the advanced search widget\n-   Added the ability to navigate the contact widget using the keyboard\n-   Added the ability to jump to the attachment list by clicking on the attachment icon in the header of an email\n-   Added support for internal links inside messages\n\n### Bug fixes\n\n-   Fixed a rare issue where under certain circumstances attachments would not be displayed in PGP-encrypted messages that are forwarded\n-   Fixed an issue where an additional draft would be visible for a short amount of time for messages already sent\n-   Fixed an issue where embedded images would sometimes not be displayed correctly in a sent email if the email has been sent before their upload has finished\n-   Fixed an issue where sometimes a "Conversation does not exist" error message would be displayed if clicking on a browser notification informing about new messages\n-   Fixed various minor localization and translation issues\n\n## Release 4.0.7 - Sep 29, 2021\n\n### Improvements\n\n-   Added the option to set a default font for composing new messages.\n-   Added a reminder after a password reset, that decryption keys need to be re-activated to read old email messages.\n-   Saving drafts now also saves message expiration settings which were added to the draft.\n-   Added more information in the mail settings UI: for encryption keys which have subkey(s) of a different key type(s) than the primary key, the subkey type(s) will also be displayed.\n-   Improved keyboard shortcuts when navigating interfaces to pick a date and when editing contacts.\n-   Improved the error messages and instructions when sending a message to a recipient, whose encryption key is invalid.\n-   Improved the error message when trying to include an image to the auto reply option, while configuring an automated filter.\n\n### Bug fixes\n\n-   Fixed a rare bug which prevented replying to messages with attachments, when the encryption settings (i.e PGP-inline & sign messages) changed since receiving the message.\n-   Fixed a rare bug which can cause the read/unread filter to automatically be applied to search results\n-   Fixed an issue where imported contacts with unexpected characters (\\n) would not be usable or exportable\n-   Fixed an issue where the location of Sent/Draft messages would not be shown in the Sent/Draft folder, the "Keep messages in Sent/Draft" setting is enabled.\n-   Fixed an issue where navigating to a folder/label after an advanced searching in said location would not behave as expected\n\n## Release 4.0.6 - Sep 15, 2021\n\n### Improvements\n\n-   Search results now highlight matching keywords to make results easier and faster to read\n-   Added the ability to copy the primary email address right from the contact widget\n-   Attachment reminder - added support for Italian, Portuguese, Dutch and Polish\n-   Added an informational message for cases where an image cannot be loaded due to it\'s hosting on http as opposed to https\n-   Improved the search algorithm to include contacts in the "CC" and "BCC" fields when searching inside the "To" field\n-   Placed the cursor auto-focus on the URL field when adding images or links from the composer\n\n### Bug fixes\n\n-   Fixed an issue where emails using special styles would be displayed with a message "Can\'t load styles"\n-   Fixed an issue where an empty inbox would be displayed if quickly moving a large number of messages to another location several times\n-   Fixed an issue where it was not possible to open contact settings when a contact email address was very long\n-   Fixed an issue where the message selection would be reset if marking emails as unread and read quickly one after another\n-   Adjusted styling for the banner displayed on emails where an expiration date is set\n-   Fixed an issue where images in particular newsletters would appear either too big or too small\n-   Fixed an issue where "Composer size" would be referred to as "Composer mode" in the top navigation bar quick settings\n\n## Release 4.0.5 - Sep 1, 2021\n\n### Improvements\n\n-   Improved handling of drafts that have been sent from other clients\n-   When clicking on the Refresh icon next to a location in the sidebar, filters are now preserved\n-   Added a clearer notification text when a message is marked as not spam\n-   Added autofocus to the name field of the modals used for creating folders and labels\n\n### Bug fixes\n\n-   Fixed an issue where an unnecessary character would be added at the end of a link confirmation URL\n-   Fixed an issue where a request timeout would prevent a message with bigger attachments from sending\n-   Fixed an issue where Shift+Click for selecting multiple items in a list would not work in compact density mode on Firefox\n-   Fixed an issue where the subject and the body would not be populated when using a mailto: link in Firefox\n-   Fixed an issue where conversation ordering was incorrect if several conversations have the exact same timestamp\n-   Fixed an issue where on very rare occasions a negative attachments counter would be displayed\n\n## Release 4.0.4 - Aug 18, 2021\n\n### Improvements\n\n-   ProtonMail as your default mail handler - set up your browser to open a new ProtonMail composer each time you click onto a mailto: link. Latest versions of Chrome, Brave, Firefox, Opera and Edge are supported.\n-   Attachment reminder - ProtonMail will now remind you to add attachments if certain keywords are detected in your draft. Keyword detection respects your privacy and happens locally in the browser.\n-   Improved the message expiration date experience by setting the default expiration period to 7 days\n-   Marking a single message within a conversation as unread will now keep the conversation in question open\n-   Use keyboard shortcuts in autocomplete suggestions (for example, "Enter" to select and "Esc" to cancel recipient suggestions in the composer)\n-   Updated welcome banner messaging for free accounts\n-   Contacts import - improved handling of some existing contact fields (Organization, Member, Gender, Language, Timezone, Country) and other fields that are not supported by Proton Contacts\n-   Placed the autofocus on the name field when adding new or editing existing contacts\n\n### Bug fixes\n\n-   Fixed an issue where a Draft uploaded from a mobile client would only show on the Web version after a page refresh\n-   Fixed wrong wording for the "Delete all" confirmation modals\n-   Fixed an issue where an auto-reply end date that is before the start date could be entered\n-   Fixed an issue where a newly added remote image would not be displayed in signatures under certain circumstances\n-   Fixed an issue where reordering labels using drag&drop was too slow if having a big amount of labels\n-   Fixed an issue where a dropdown field would sometimes disappear on the contacts import matching screen\n-   Fixed an issue where the contact name would not be displayed if adding a new group while creating a new contact\n\n## Release 4.0.3 — July 28, 2021\n\n### Improvements\n\n-   Added the ability to add an email address to a group directly during the contact creation process\n-   Improved the error message shown when the maximum number of composers is reached\n-   Improved the warning shown when trying to send to invalid recipients\n-   Added the ability to add events that do not require a response to calendar\n\n### Bug fixes\n\n-   Fixed an issue where in some rare cases the message list view would not load\n-   Fixed an issue where copy & pasted content in signatures would be sent incorrectly\n-   Fixed an issue where an embedded image from a draft could not be removed on reopening\n-   Fixed an issue where on rare occasions an embedded image would not be sent when deleting and undoing the delete action immediately\n-   Fixed an issue where merging contacts could not proceed if all contacts are marked for deletion\n-   Fixed an issue where custom field headings would be replaced by "Other" headings on contact import\n-   Fixed an issue where the confirmation modal would display "Delete conversation" when deleting a single message\n-   Fixed an issue where contacts containing specific characters could not be merged\n-   Fixed an issue where incorrect attachment icons would be displayed for key, .zip and .ics files\n-   Fixed an issue where duplicated recipients in the CC field could not be deleted if typing their email addresses manually beforehand\n-   Fixed an issue where folder names would disappear when dragging something into them on light themes\n-   Fixed an issue where a contact image would not be displayed if editing a contact just after adding it\n\n## Release: 4.0.2 — July 14, 2021\n\n### Improvements\n\n-   Removed automatic domain suggestions in the autocomplete dropdown in the composer so that only saved contacts are now appearing as suggestions\n-   Added the ability to change the mailbox layout, density and composer mode from the top navigation bar ("Settings" menu)\n-   Updated attachment icons\n-   Improved the display of remote and embedded images that are not loaded inside an email\n-   Improved the messaging for cases where remote content cannot be loaded due to a certificate validity issue on sender\'s side\n-   Improved error messaging for cases when a key associated with a calendar is deleted\n-   Improved error messaging for cases where too many search results are found and the search needs to be further limited\n-   Added headings to the Contacts widget to improve accessibility\n-   Removed icons indicating Sent and Draft messages inside the Sent and Draft locations\n\n### Bug fixes\n\n-   Fixed an issue where the message format would be broken if changing from HTML to default composer mode back and forth several times\n-   Fixed an issue where in some cases, embedded images would not be removed if deleting respective placeholders when forwarding an email\n-   Fixed an issue where the translated version of a folder title would not be displayed inside the browser tab page title\n-   Fixed an issue where an English version of a confirmation modal would be displayed for non-English versions\n\n## Release: 4.0.1 — June 16, 2021\n\n### Improvements\n\n-   Added support for keyboard shortcuts inside dropdown menus\n-   Improved and accelerated the loading of messages in the list view\n-   Improved loading times of the composer when replying to/forwarding a message with a lot of attachments\n-   Added a retry mechanism in cases where a message fails to load due to network issues\n-   Added an inactive state to the composer if the focus is somewhere else\n-   Improved contact search by adding diacritics support\n-   Improved the way the focus returns to the previous element after closing the composer\n\n### Bug fixes\n\n-   Fixed an issue where the focus would be lost after taking action on messages in the list view using keyboard shortcuts\n-   Fixed an issue where the contact widget would not be fully displayed for some screen resolutions\n-   Fixed an issue where exporting a message containing an attachment with a decryption error would fail\n-   Fixed an issue where the contact encryption status would not be updated if changing the status while the composer is open\n-   Fixed an issue where contacts in a particular format could not be merged\n-   Fixed an issue where images inserted from an external URL would not be displayed\n-   Fixed an issue where a single message would be auto-focused when selecting a conversation in row layout\n-   Fixed an issue where an update would not be visible on the web client if previously updated from a mobile client\n-   Fixed an issue where an error message would be displayed when deleting messages on the last folder page\n-   Fixed an issue where addresses in contacts would be displayed without line breaks\n-   Fixed an issue where the specific folders icons were missing inside the "Move to" menu\n-   Fixed an issue where the focus would disappear from the conversation if navigating to a draft message inside\n-   Fixed an issue where the formatting option selected would not be highlighted in the composer toolbar\n-   Fixed an issue where the "Trust key" banner would be displayed even if the key was already trusted\n-   Fixed an issue where the notification option would appear disabled for folders created using the "Move to" menu in the navigation bar\n-   Fixed an issue where the "Unread" filter would disappear in the responsive view\n-   Fixed an issue where messages that were partially hidden below the toolbar could not be selected\n-   Fixed an issue where empty groups would be suggested in the composer autocomplete element\n-   Fixed an issue where selecting a date field in contacts and then changing the selection would result in the value being displayed incorrectly\n-   Fixed an issue where on some occasions the Unsubscribe URL would be shown twice in the Unsubscribe confirmation modal\n\n# Introducing the new ProtonMail!\n\n## Release: 4.0.0 — June 8, 2021\n\nFully revamped, the latest version of ProtonMail has a modern design, more customization options, and improved usability. This means keeping your data private is even easier and more enjoyable. [Learn more about this release](https://protonmail.com/blog/new-protonmail-announcement).\n\n### New features\n\n-   **New design**: Clean layout and modern design provide a fresh look and better experience.\n-   **Themes and layouts**: Customize your inbox with new themes, such as dark mode, and various layouts.\n-   **Subfolders**: Manage your emails by people, topics, projects, etc.\n-   **Preview attachments**: Preview PDF and image attachments before you open them. It\'s faster and more secure.\n-   **Undo send**: Sent an email by mistake? Undo send with a single click right after the email goes out.\n-   **App selector**: Quickly select and switch between different Proton services (Mail, Calendar, Drive, VPN).\n-   **Persistent session**: Stay signed in without losing your user session, even after closing your browser.\n-   **Calendar integration**: RSVP to calendar invitations directly from an email.\n-   **Encrypted address book**: Securely store your contacts’ details.\n\n### Improvements\n\n-   **Quick filters**: Makes sorting and finding messages faster and easier.\n-   **Keyboard shortcuts**: We have redesigned shortcuts so you can navigate your inbox and take action on messages with increased ease. Type "?" to view the shortcuts.\n-   **Load time**: Faster load times for improved performance.\n-   **Usability enhancements**: Create folders and labels from the sidebar and access contacts directly from the top navigation bar.\n-   **Accessibility**: Improved contrast and screen reader friendliness make privacy truly accessible to all.\n\nThank you to our beta users for making ProtonMail the best secure email service available! We welcome your continued feedback on our current release. You can also report an issue or request a feature under "Help" in the top menu bar.\n'},15577:function(e){"use strict";e.exports="data:image/gif;base64,R0lGODlhyADIAMQAAOTl9K6y28nM5/n5/Jqf0qes1+vs9tfY7fLy+bW53tDS6t7f8aGl1by/4cLG5P///5OYzwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4zLWMwMTEgNjYuMTQ1NjYxLCAyMDEyLzAyLzA2LTE0OjU2OjI3ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjA2MzRCN0Y5MTYyODExRTY5OUMxRjBFRjQyNEUwMzAzIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjA2MzRCN0ZBMTYyODExRTY5OUMxRjBFRjQyNEUwMzAzIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDYzNEI3RjcxNjI4MTFFNjk5QzFGMEVGNDI0RTAzMDMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDYzNEI3RjgxNjI4MTFFNjk5QzFGMEVGNDI0RTAzMDMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4B//79/Pv6+fj39vX08/Lx8O/u7ezr6uno5+bl5OPi4eDf3t3c29rZ2NfW1dTT0tHQz87NzMvKycjHxsXEw8LBwL++vby7urm4t7a1tLOysbCvrq2sq6qpqKempaSjoqGgn56dnJuamZiXlpWUk5KRkI+OjYyLiomIh4aFhIOCgYB/fn18e3p5eHd2dXRzcnFwb25tbGtqaWhnZmVkY2JhYF9eXVxbWllYV1ZVVFNSUVBPTk1MS0pJSEdGRURDQkFAPz49PDs6OTg3NjU0MzIxMC8uLSwrKikoJyYlJCMiISAfHh0cGxoZGBcWFRQTEhEQDw4NDAsKCQgHBgUEAwIBAAAh+QQAAAAAACwAAAAAyADIAAAF/yAkjmRpnmiqrmzrvnAsz3Rt33iu73zv/8CgcEgsGo/IpHLJbDqf0Kh0Sq1ar9isdsvter/gsHhMLpvP6LR6zW673/C4fE6v2+/4vH7P7/v/gIGCg4SFhoeIiYqLjI2Oj5CRkpOUlZaXmJmam5ydnp+goaKjpKWmp6ipqqusra6vsLGys7S1tre4ubq7vL2+v8DBwsOjBQHHAQXEOgkKBg/Q0dAGCgnLMgEHA9Lc3AMHAdcsAQDd5uYA4eImBArn7+YKBOsjBQjw+NwIyusB2/kAoQ1QtyxBwIPRrBEr8A9hwAH8ghG45xDhgHnBFiA0AADAs4MLghkEeCABRhEEEv8cCKjQF0V4BxioYLASH4JfDfANdOEPXwNfH89BhMEQnoFeBeANjVH0XcRc7t61jDHynAJeL7sBsFHu3E1dSd8RnBEA3lNbDt4dvRG0mwNdNc29vZH23AFdXc2NpVH23NZcebvtJfvuL67A3AZjK4xXLI6+6BqfUxwDslbJeh8zBuz4hmVuhm8hlnZAgOnTqFOrPh33MueKsF0fjk07Wmhbo2sjvF0rt+6AvGn5/p0v+KzhxOEZl9U6ecC7uQg0dJ7v4q6m1JWexVWgbXZuBrZH1/id24KTugTIFNFgOvUBP0UwEIAXfj3vxMOPaL88VtfzKDWn2wEYEUBef7DkhQD/Qe39Zp8IAbyE4CuI0ScffhutB4EAoGEWjQEaRlXRVRfKJpo5D0LQ00E7seceNBO6MhyAEBgYEI02+uVhNwuOkMCL0gzQUoTK7WiOhTWKyI08I3CIT4ytIPdhRAUEBgCVGJqI20NziVCAaU85AGRkr92IHgk5AmekTuqRMN+Ym80GmwEHHJBlcWuWp2VveuJZZp86/gnonsINGueJhpIpZ6IdQsVoNyTiMtGj0SBwpi0EIKPpppx26umnl9Ij6qiklmrqqaimquqqrLbq6quwxirrrLTWauutuOaq66689urrr8AGK+ywxBZr7LHIJqvsssw26+yz0EYr7bTUVmvtE7XYZqvtttx26+234IYr7riqhAAAOw=="},8886:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MCIgaGVpZ2h0PSI0NCIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDkwIDQ0Ij4KICA8cGF0aCBmaWxsPSIjQTRBOUI1IiBmaWxsLW9wYWNpdHk9Ii42IiBkPSJNNDUuODgyIDE3LjQ4MUM0NC4wMTIgMTYuMjExIDQyLjEwOSAxNiA0MC42ODkgMTZjLTMuMjUyIDAtNS4wOTUgMS44NjktNS4wOTUgNC4yNzYgMCAxLjgzMyAxLjMxNCAyLjk1MyAzLjQyIDMuMzU4bC42LjExNWMxLjM0LjI1NSAyLjA0NS41MDIgMi4wNDUgMS4xOSAwIC44MDItLjgzNyAxLjE5LTEuOTY2IDEuMTktMS4yNyAwLTIuODAzLS4zODgtNC4wODEtMS4zOTNsLTEuNjY2IDIuMzM2YzEuMzkzIDEuMTkgMy42NzYgMS43MjggNS41MTggMS43MjggMy4xODIgMCA1LjQwNC0xLjY2NiA1LjQwNC00LjMxIDAtMS44MjUtMS4zNDktMi45MDEtMy41OC0zLjMyNGwtLjU1NC0uMTA2Yy0uOTc5LS4xOTQtMS45MzEtLjQ1LTEuOTMxLTEuMjE2IDAtLjYxOC41NzMtMS4xNDYgMS44ODYtMS4xNDYuOSAwIDIuNTA0LjI2NCAzLjY4NSAxLjEyOGwxLjUwOC0yLjM0NXpNNTIuMDM3IDI1Ljc4NWMtLjU3My41MzgtMS4yMzQuNjk3LTEuODc4LjY5Ny0uOTE3IDAtMS41MjUtLjQ3Ni0xLjU5Ni0xLjM4NGg1LjcyMmMuMTk0LS40NS4zNTItMS4yNy4zNTItMS44NDMgMC0yLjEzMy0xLjU2OS0zLjU3LTMuNzQ2LTMuNTctMy42MjMgMC01LjAyNSAzLjE5MS01LjAyNSA1LjMyNCAwIDIuMTk1IDEuNTI1IDMuNzkxIDQuMTA4IDMuNzkxIDEuNjA0IDAgMi44My0uNDg1IDMuNjU4LTEuMzc1bC0xLjU5NS0xLjY0em0tMS4zMTQtMy43NTVjLjc5NCAwIDEuMjk2LjQyMyAxLjI5NiAxLjI3OHYuMDQ0aC0zLjExMmMuMzE4LS43MDUuODktMS4zMjIgMS44MTYtMS4zMjJ6TTY0LjEzNiAyMi4wMzljLS42OC0xLjQ3My0yLjAwMS0yLjMzNy0zLjg0NC0yLjMzNy0yLjk2MiAwLTQuOTcyIDIuMjY2LTQuOTcyIDQuOTY0IDAgMi4zOCAxLjc2MyA0LjEwOCA0LjMwMiA0LjEwOCAxLjQ5OSAwIDIuNzc3LS42NTMgMy42OTQtMS43NDZsLTEuOTc1LTEuNjIyYy0uNDY3LjUzOC0xLjAwNS44MDItMS42MTMuODAyLS45MTcgMC0xLjU3LS43MTQtMS41Ny0xLjcyOCAwLTEuMjA3LjgxMi0yLjIyMSAxLjk5My0yLjIyMS41ODIgMCAxLjE3Mi4yMyAxLjU1MS45MzRsMi40MzQtMS4xNTR6TTczLjgyMyAxOS45MjNoLTIuNzg2bC0uOTYxIDQuNTg0Yy0uMjMgMS4wOTMtLjgzNyAxLjcxOS0xLjcyIDEuNzE5LS42NTEgMC0xLjA5Mi0uMzI2LTEuMDkyLTEuMDMxIDAtLjE0Mi4wMDktLjI4My4wNDQtLjQ1bDEuMDMxLTQuODIyaC0yLjc4NWwtLjk2MSA0LjU0YTUuMjE4IDUuMjE4IDAgMDAtLjEzMyAxLjEyYzAgMi4xMjQgMS41MjYgMy4yMTcgMy42OTQgMy4yMTcgMi4wOTggMCAzLjk3Ni0uOTI2IDQuNTkzLTMuODA4bDEuMDc2LTUuMDd6TTc3LjQ3IDI0LjA2NmMuMjQ3LTEuMTgxIDEuMDMyLTEuNzI4IDEuOTMxLTEuNzI4LjQzMiAwIC45MTcuMDg4IDEuMjg3LjIzOGwuNzc2LTIuNjdjLS4zODgtLjEzMy0uNzc2LS4yMjEtMS4xNTUtLjIyMS0uOTE3IDAtMS42OTMuMzI2LTIuMzEgMS4xNjRsLjIxMi0uOTI2SDc1LjZMNzMuNzYgMjguNTdoMi43NjhsLjk0My00LjUwNXpNODcuMjk5IDI1Ljc4NWMtLjU3NC41MzgtMS4yMzUuNjk3LTEuODc4LjY5Ny0uOTE3IDAtMS41MjUtLjQ3Ni0xLjU5Ni0xLjM4NGg1LjcyMWMuMTk0LS40NS4zNTMtMS4yNy4zNTMtMS44NDMgMC0yLjEzMy0xLjU3LTMuNTctMy43NDYtMy41Ny0zLjYyNCAwLTUuMDI1IDMuMTkxLTUuMDI1IDUuMzI0IDAgMi4xOTUgMS41MjUgMy43OTEgNC4xMDggMy43OTEgMS42MDQgMCAyLjgzLS40ODUgMy42NTgtMS4zNzVsLTEuNTk2LTEuNjR6bS0xLjMxNC0zLjc1NWMuNzkzIDAgMS4yOTYuNDIzIDEuMjk2IDEuMjc4di4wNDRoLTMuMTEyYy4zMTctLjcwNS44OS0xLjMyMiAxLjgxNi0xLjMyMnoiLz4KICA8Zz4KICAgIDxwYXRoIGZpbGw9IiM2OTZGN0QiIGZpbGwtb3BhY2l0eT0iLjYiIGQ9Ik0zLjAwNiAxOS42ODVjLjY0NC0uNTkgMS41MzQtMS4xMiAyLjU1Ny0xLjEyLjk0MyAwIDEuNTY5LjQwNiAxLjU2OSAxLjA3NiAwIC43OTMtLjc4NSAxLjQ0Ni0yLjE0MiAxLjQ0NkgzLjY2N2wtLjUzOCAyLjUxMmgxLjM0YzEuMDMyIDAgMS43OTkuMzk3IDEuNzk5IDEuMTQ2IDAgLjgzNy0uNjQ0IDEuNDktMS45ODQgMS40OS0uOTg3IDAtMS44NS0uMzUzLTIuMzk3LTEuMDIzTDAgMjcuMDAyYy43ODUgMS4xMjggMi4yMyAxLjc5IDQuMjE0IDEuNzkgMy4xMzggMCA0Ljk3Mi0xLjggNC45NzItMy45OTQgMC0uOTk2LS41Mi0xLjg0My0xLjUwOC0yLjMxIDEuNDgxLS41OSAyLjQ0Mi0xLjg4NiAyLjQ0Mi0zLjI4OCAwLTEuNzI4LTEuNTUxLTMuMTkxLTQuMS0zLjE5MS0xLjk1NiAwLTMuMjcuNjI2LTQuMzI3IDEuNjQ4bDEuMzEzIDIuMDI4ek0xNi4yODggMjIuNzA5SDExLjA2bC0uNTAyIDIuMzUzaDUuMjM2bC40OTQtMi4zNTN6TTI0LjA5NiAxNi4yM2gtNC42MDJsLTIuNjI3IDEyLjM0aDUuMzI1YzQuOSAwIDcuNTk4LTMuMTY0IDcuNTk4LTcuMjEgMC0yLjgxMi0yLjE0Mi01LjEzLTUuNjk0LTUuMTN6bS0uMzQ0IDIuNzIzYzIuMDM2IDAgMi45MjcgMS4xOSAyLjkyNyAyLjgwMyAwIDIuNDA3LTEuNTQzIDQuMDktNC4xNTMgNC4wOWgtMi4wNjJsMS40NjMtNi44OTNoMS44MjV6Ii8+CiAgPC9nPgo8L3N2Zz4K"},73543:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2OCIgaGVpZ2h0PSI0NCIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDY4IDQ0Ij4KICA8cGF0aCBmaWxsPSIjNjk2RjdEIiBmaWxsLW9wYWNpdHk9Ii42IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0zMi44MTYgMjUuODE3Yy0uMTEzLTEuMjk4LS43NjItMS45ODctMS45NjMtMS45ODctLjk3MiAwLTEuODY0LjU0NS0yLjA2IDEuOTg3aDQuMDIzem0tNi4wNS44MzRjMC0zLjIzOCAyLjMyLTQuNDIzIDQuMTA0LTQuNDIzIDEuOTMgMCAzLjc4IDEuMTM3IDMuNzggNC41OTl2LjQ2NGgtNS44ODhjLjA4IDEuNTM5IDEuMDM4IDIuMjEyIDIuMzAzIDIuMjEyIDEuMTE5IDAgMS43NjctLjM2OSAyLjQxNi0uOTkzbDEuMDU1IDEuMDI1Yy0uODkzLjk3OC0yLjA3NyAxLjUzOC0zLjYxOCAxLjUzOC0yLjE1NiAwLTQuMTUyLTEuMjk3LTQuMTUyLTQuNDIyem0tNC44OTggNC4yNDZWMjMuOTZoLTEuNDkydi0xLjU3MWgxLjQ5MnYtLjg2NWMwLTEuNDI3LjYtMi41MzIgMi43OS0yLjUzMi4zNzMgMCAxLjAzOC4wNjQgMS4xODQuMDh2MS41MjJhMy43NiAzLjc2IDAgMDAtLjY4Mi0uMDY0Yy0uNzEzIDAtMS4yOTcuMTkzLTEuMjk3IDEuMTA2di43NTNoMS44ODF2MS41N2gtMS44OHY2Ljk0aC0xLjk5NnptLTUuMjM5LTIuMzcxVjI2LjY1Yy0yLjM4NC4zMi0zLjY1Ljg5Ny0zLjY1IDEuODI2IDAgLjY3NC40NzEgMS4wMjYgMS4yMDEgMS4wMjYgMS4wMjIgMCAxLjgxNi0uMzg1IDIuNDUtLjk3N3ptLTUuNjEyLjMyYzAtMS44NDMgMS41OS0zLjA3NyA1LjYxMi0zLjUyNnYtLjI1NmMwLS44NS0uNDU0LTEuMjE4LTEuNDEtMS4yMTgtMS4yMDEgMC0yLjE3NS41NzctMi45MDQgMS4xNTRsLS45NzMtMS4yMzRjLjkyNS0uODMzIDIuMzY4LTEuNTM4IDQuMTUyLTEuNTM4IDIuMzAzIDAgMy4wOTggMS4wOSAzLjA5OCAzLjA3NnYzLjUxYzAgMS4wMjYuMDY1IDEuNjUuMjQzIDIuMDgzaC0yLjAxMWMtLjExMy0uMzUyLS4xOTUtLjYwOS0uMTk1LTEuMDktLjg3Ni44ODItMS44OTcgMS4yMTgtMy4xNzkgMS4yMTgtMS4zOTUgMC0yLjQzMy0uNzY5LTIuNDMzLTIuMTh6TS4xODMgMjguMTA5bDEuNjA2LS44MzNjLjcxMyAxLjM5NCAxLjgxNiAyLjA2NyAzLjMwOCAyLjA2NyAxLjQ2IDAgMi40NS0uNDY1IDIuNDUtMS41MzkgMC0xLjAyNS0uNzQ3LTEuNTA2LTIuNzI1LTIuMDgzLTIuMzItLjY3My00LjE4NS0xLjI5OC00LjE4NS0zLjU1OCAwLTIuMDE4IDEuNjctMy4zNDkgNC4xMDQtMy4zNDkgMi4zNjcgMCAzLjc2MiAxLjE1NCA0LjQ5MiAyLjU0OGwtMS40NzYgMS4wMWMtLjcxMy0xLjE4Ni0xLjczNS0xLjczMS0zLjAzMi0xLjczMS0xLjMzIDAtMi4wOTMuNDgxLTIuMDkzIDEuMzQ2IDAgMS4xMDYuODYgMS40NzQgMi44MjIgMi4wNTEgMi4yNy42NTggNC4wODcgMS4zOTUgNC4wODcgMy42MjIgMCAxLjk0LTEuNjcgMy40NjItNC41MjUgMy40NjItMi4zODQgMC00LjA3LTEuMjE5LTQuODMzLTMuMDEzeiIgY2xpcC1ydWxlPSJldmVub2RkIi8+CiAgPHBhdGggZmlsbD0iI0E0QTlCNSIgZmlsbC1vcGFjaXR5PSIuNiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNjUuNTcgMjMuNjE1Yy4xNTMgMCAuMjM5LS4wNS4yMzktLjE4IDAtLjEyMi0uMDg2LS4xNzktLjIzOS0uMTc5aC0uMTg3di4zNmguMTg3em0tLjUzMy0uNjYxaC41NTZjLjM0NiAwIC41NS4xNTEuNTUuNDY1IDAgLjIxOS0uMDk2LjMzNy0uMjU1LjQxbC4yODQuNTM4aC0uMzYzbC0uMjU2LS41aC0uMTd2LjVoLS4zNDZ2LTEuNDEzem0xLjU2Ljc0YzAtLjYtLjQ0OC0xLjA2LTEuMDUtMS4wNi0uNTkgMC0xLjAzMi40NDgtMS4wMzIgMS4wNDkgMCAuNi40NDIgMS4wNTQgMS4wNSAxLjA1NC41OSAwIDEuMDMyLS40NDMgMS4wMzItMS4wNDN6bS0yLjM1IDBjMC0uNzM1LjU3My0xLjMwMSAxLjMxNy0xLjMwMS43MzMgMCAxLjMuNTYgMS4zIDEuMjkgMCAuNzM0LS41NzMgMS4zLTEuMzE3IDEuMy0uNzM3IDAtMS4zLS41Ni0xLjMtMS4yODl6TTU1LjU0IDMzLjk0MmwuMzI0LTEuMTA1Yy4yNDQuMDYzLjY2NS4xNDMgMS4yNjUuMTQzLjg3NiAwIDEuMjk4LS4zNjggMS42MzktMS4yMDFsLjMyNC0uODM0LTMuMzA5LTguNTFoMS40NzZsMi41MTQgNi44NDRoLjAzM2wyLjUxMy02Ljg0M2gxLjQxMWwtMy42NjUgOS40MjNjLS41ODQgMS40OS0xLjI1IDIuMjkxLTIuOTIgMi4yOTEtLjc2MiAwLTEuMjMyLS4wOTYtMS42MDUtLjIwOHptLTIuMzUyLTcuOTk3Yy0uMTEzLTEuNTA2LS44NDMtMi41MzItMi4yNTUtMi41MzItMS4xNTEgMC0yLjIzOC43ODYtMi40MzIgMi41MzJoNC42ODd6bS02LjExNS43MjFjMC0zLjA3NiAyLjA3Ni00LjQwNiAzLjg3Ny00LjQwNiAyLjAyNyAwIDMuNTY3IDEuNDEgMy41NjcgNC40N3YuMjloLTYuMDVjLjA1IDEuOTA2IDEuMTY5IDIuOTMyIDIuNTggMi45MzIgMS4yMzMgMCAxLjkzLS40OTcgMi41NzgtMS4zNzhsLjgxMS43MDVjLS43OTQgMS4xMjItMS44OCAxLjc5NC0zLjQ4NiAxLjc5NC0yLjAyOCAwLTMuODc3LTEuNDU4LTMuODc3LTQuNDA3em0tOS45MjYgNC4yMzFWMTkuMDRoMS40Mjh2Ni4xMjFsNS40MzItNi4xMjFoMS43MmwtNC4xMiA0LjUxOSA0LjY4OCA3LjM0aC0xLjYzOWwtMy45OS02LjI2Ny0yLjA5MSAyLjI2djQuMDA2aC0xLjQyOHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPgogIDxwYXRoIGZpbGw9IiM2OTZGN0QiIGZpbGwtb3BhY2l0eT0iLjYiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTQ2LjMyNSAxNC4zMTFoLS42MDh2LS42MjhoLjYxYy4yNDIgMCAuNDE2LjA4OC40MTYuMzAzcy0uMTguMzI1LS40MTkuMzI1em0uMjUxLTEuMTk0SDQ0LjU2MnYyLjc2NmgxLjE1NVYxNC45aC43NTZjLjM1IDAgLjY0OC0uMDI3LjkxOS0uMTQuMzE2LS4xMy41NDYtLjM1Ni41NDYtLjc2NSAwLS43NTQtLjY3Mi0uODgtMS4zNjItLjg4em0tMTAuMzc4IDBoMi44ODN2LjU2NmgtMS42MDl2LjUxOGgxLjYwOXYuNTM1aC0xLjYwOXYuNTRoMS42MDl2LjYwN2gtMi44ODN2LTIuNzY2em0tOS45NzYgMS41OTVsLjQzNC0uODkyLjQzMi44OTJoLS44NjZ6bS0uMzA5LTEuNTk1bC0xLjQzMyAyLjc2NmgxLjE3NmwuMjYzLS41NDVoMS40NzNsLjI2NS41NDVIMjguOWwtMS40MzItMi43NjZoLTEuNTU2em02LjUwMyAwaDEuMTU1djIuNzY2aC0xLjMyOWwtMS43MDMtMS41NjF2MS41NmgtMS4xNTR2LTIuNzY1aDEuMzE0bDEuNzE3IDEuNTY3di0xLjU2N3ptMTcuOTI2IDEuMjQ0aC0uNjg1di0uNjU1aC42ODdjLjI0NCAwIC40MTguMTE2LjQxOC4zMyAwIC4yMTYtLjE4LjMyNS0uNDIuMzI1em0xLjYxMy0uMzY1YzAtLjc1NC0uNjcyLS44OC0xLjM2LS44OGgtMi4wOTN2Mi43NjdoMS4xNTR2LTEuMDI4aC4wOTNsLjg3NyAxLjAyOGgxLjYyMWwtMS4xNzktMS4wOWMuNTY2LS4wOTUuODg3LS4zODguODg3LS43OTd6bTExLjU4MyAxLjA2M2MwIC4yODEtLjIzMi45MTItMS42NTcuOTEyLTEuMTcyIDAtMS41OTktLjIzNC0xLjg1LS4zNzNsLjM3NS0uNDk1Yy40OS4xOS44NzMuMTk4IDEuMTUyLjE5NS4yOTctLjAwNC41NzMtLjA1OC41NzYtLjIzOS4wMDQtLjE4OC0uMTg0LS4yMzMtLjYzLS4yNjctLjQxNS0uMDMtMS4zMjMtLjE0NS0xLjMzLS43OTYtLjAwNy0uNjM0LjY3NS0uOTQzIDEuNjU0LS45NDMuNTMzIDAgMS4xODcuMDggMS42NS4zMjdsLS4zOTguNDg2YTIuNjEzIDIuNjEzIDAgMDAtLjkxNy0uMTUzYy0uMzAyIDAtLjYxMi4wNTQtLjYxMi4yNiAwIC4yMDYuMzIuMjEzLjU0OC4yNC4yOTQuMDM0LjY3LjAzOS45NzQuMTcyLjM2Mi4xNi40NjUuMzguNDY1LjY3NHptLTMuODgzIDBjMCAuMjgxLS4yMzQuOTEyLTEuNjU5LjkxMi0xLjE3MiAwLTEuNTQyLS4yMzQtMS43OTMtLjM3M2wuMzItLjQ5NWMuNDg5LjE5Ljg3My4xOTggMS4xNTEuMTk1LjI5Ny0uMDA0LjU3NS0uMDU4LjU3Ni0uMjM5LjAwMy0uMTg4LS4xODUtLjIzMy0uNjMyLS4yNjctLjQxMi0uMDMtMS4yNjYtLjE0NS0xLjI3Mi0uNzk2LS4wMDgtLjYzNC42MTgtLjk0MyAxLjYtLjk0My41MyAwIDEuMTg2LjA4IDEuNjQ3LjMyN2wtLjM5Ni40ODZhMi42MjUgMi42MjUgMCAwMC0uOTE5LS4xNTNjLS4zMDIgMC0uNjEuMDU0LS42MS4yNiAwIC4yMDYuMzIuMjEzLjU0OC4yNC4yOTMuMDM0LjY2OC4wMzkuOTc0LjE3Mi4zNjEuMTYuNDY1LjM4LjQ2NS42NzR6bS02Ljg3NC0xLjk0MmgyLjg4MnYuNTY2aC0xLjYwN3YuNTE4aDEuNjA3di41MzVoLTEuNjA3di41NGgxLjYwN3YuNjA3aC0yLjg4MnYtMi43NjZ6bS0xMC4xMTMgMS4zMzlsMS4yOTYgMS40MjdoLTEuMzc2bC0uNzU3LS44ODctLjc1NC44ODdIMzkuN2wxLjI5OS0xLjQyNy0xLjE2OC0xLjM0aDEuMzk3bC42MDMuNzM4LjYwNS0uNzM3aDEuMzk4bC0xLjE2NiAxLjMzOXpNOS42OSAxMy4xMTZsLjY3NiAyLjc2N0g5LjIxbC0uMzgyLTEuNTY4LS43NDEgMS41NjhoLS43M2wtLjc0Mi0xLjU2OC0uMzgyIDEuNTY4SDUuMTQ1bC42NzctMi43NjZoMS4yNGwuNjYgMS4zNjcuNjU2LTEuMzY3aDEuMzEzem0tNy4zMzkgMS41OTZsLjQzMy0uODkyLjQzMy44OTJoLS44NjZ6bS0uMzA5LTEuNTk1TC42MTEgMTUuODgzaDEuMTc0bC4yNjQtLjU0NWgxLjQ3M2wuMjY0LjU0NWgxLjI0NmwtMS40MzMtMi43NjZIMi4wNDN6bTguOTM4IDBoMi44ODJ2LjU2NmgtMS42MDd2LjUxOGgxLjYwN3YuNTM1aC0xLjYwN3YuNTRoMS42MDd2LjYwN2gtMi44ODJ2LTIuNzY2em03Ljk2OCAyLjc2NmgxLjIyM3YtMi43NjZoLTEuMjIzdjIuNzY2em00LjA5LTIuODMyYy41MTUgMCAuODk3LjA3NCAxLjEwNi4xNTJ2LjY3OGEzLjYyIDMuNjIgMCAwMC0uOTA0LS4xMTdjLS4xOTIgMC0xLjA5Ny4wMjktMS4wOTcuNzU4IDAgLjczLjkwNS43MzcgMS4wOTcuNzM3LjM1NSAwIC42OS0uMDY1LjkwNC0uMTJ2LjY4Yy0uMjEuMDc4LS41OTEuMTUyLTEuMTA1LjE1Mi0uNjA1IDAtMi4xNzUtLjE2MS0yLjE3NS0xLjQ0OSAwLTEuMjg3IDEuNTctMS40NzEgMi4xNzUtMS40NzF6bS02LjQ5IDEuMzFoLS42ODV2LS42NTVoLjY4OGMuMjQzIDAgLjQxNy4xMTYuNDE3LjMzIDAgLjIxNi0uMTguMzI1LS40Mi4zMjV6bTEuNjE0LS4zNjVjMC0uNzU0LS42NzMtLjg4LTEuMzYxLS44OGgtMi4wOTN2Mi43NjdoMS4xNTV2LTEuMDI4aC4wOTJsLjg3NyAxLjAyOGgxLjYyMmwtMS4xOC0xLjA5Yy41NjYtLjA5NS44ODgtLjM4OC44ODgtLjc5N3oiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPgo8L3N2Zz4K"},1657:function(e,t,n){"use strict";e.exports=n.p+"assets/860ab2b3bb714602d2bf.svg"},25861:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MCIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAxMyA2MCAxNiI+CiAgPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwKSI+CiAgICA8cGF0aCBmaWxsPSIjMTc5QkQ3IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00MS4wMjYgMTguMzY4Yy0uMjU1IDEuNjc0LTEuNTM1IDEuNjc0LTIuNzcyIDEuNjc0aC0uNzA0bC40OTQtMy4xMjZhLjM4OC4zODggMCAwMS4zODQtLjMyN2guMzIzYy44NDIgMCAxLjYzOCAwIDIuMDQ4LjQ3OS4yNDUuMjg3LjMyLjcxMi4yMjcgMS4zek00MC40ODcgMTRIMzUuODJjLS4zMiAwLS41OS4yMzItLjY0LjU0N2wtMS44ODggMTEuOTU5YS4zODkuMzg5IDAgMDAuMzg0LjQ0OWgyLjM5NWEuNDU0LjQ1NCAwIDAwLjQ0OC0uMzgzbC41MzYtMy4zOWEuNjQ4LjY0OCAwIDAxLjY0LS41NDdoMS40NzdjMy4wNzQgMCA0Ljg0OS0xLjQ4NyA1LjMxMi00LjQzNC4yMDktMS4yODguMDA4LTIuMy0uNTk1LTMuMDEtLjY2NC0uNzc5LTEuODQtMS4xOTEtMy40MDItMS4xOTF6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz4KICAgIDxwYXRoIGZpbGw9IiMyNTNCODAiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTcuNzM4IDE4LjM2OGMtLjI1NSAxLjY3NC0xLjUzNCAxLjY3NC0yLjc3MiAxLjY3NGgtLjcwNGwuNDk0LTMuMTI2YS4zODguMzg4IDAgMDEuMzg0LS4zMjdoLjMyM2MuODQzIDAgMS42MzggMCAyLjA0OC40NzkuMjQ2LjI4Ny4zMi43MTIuMjI3IDEuM3pNNy4yIDE0SDIuNTMzYy0uMzIgMC0uNTkxLjIzMi0uNjQxLjU0N0wuMDA1IDI2LjUwNmEuMzg5LjM4OSAwIDAwLjM4NC40NDloMi4yMjljLjMxOCAwIC41OS0uMjMyLjY0LS41NDdsLjUxLTMuMjI2YS42NDguNjQ4IDAgMDEuNjQtLjU0N2gxLjQ3NmMzLjA3NSAwIDQuODUtMS40ODcgNS4zMTItNC40MzQuMjEtMS4yODguMDA5LTIuMy0uNTk1LTMuMDFDOS45MzggMTQuNDEzIDguNzYxIDE0IDcuMiAxNHpNMTguMDM1IDIyLjY2Yy0uMjE2IDEuMjc3LTEuMjMgMi4xMzQtMi41MjMgMi4xMzQtLjY0OCAwLTEuMTY3LS4yMDktMS41LS42MDMtLjMzLS4zOTEtLjQ1NS0uOTQ5LS4zNS0xLjU2OS4yLTEuMjY1IDEuMjMtMi4xNDkgMi41MDQtMi4xNDkuNjM0IDAgMS4xNS4yMSAxLjQ5LjYwOS4zNDIuNDAxLjQ3Ny45NjEuMzc5IDEuNTc5em0zLjExNC00LjM0NmgtMi4yMzVhLjM5LjM5IDAgMDAtLjM4NC4zMjhsLS4wOTguNjI1LS4xNTYtLjIyNmMtLjQ4NC0uNzAyLTEuNTYzLS45MzctMi42NC0uOTM3LTIuNDcgMC00LjU3OCAxLjg3LTQuOTg5IDQuNDkyLS4yMTMgMS4zMDguMDkgMi41NTguODMyIDMuNDMuNjgyLjgwMiAxLjY1NSAxLjEzNiAyLjgxNSAxLjEzNiAxLjk5IDAgMy4wOTQtMS4yNzcgMy4wOTQtMS4yNzdsLS4xLjYyYS4zODkuMzg5IDAgMDAuMzg0LjQ1aDIuMDEzYy4zMiAwIC41OS0uMjMyLjY0LS41NDdsMS4yMDktNy42NDVhLjM4OS4zODkgMCAwMC0uMzg1LS40NDl6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz4KICAgIDxwYXRoIGZpbGw9IiMxNzlCRDciIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTUxLjMyMiAyMi42NmMtLjIxNiAxLjI3Ny0xLjIzIDIuMTM0LTIuNTIyIDIuMTM0LS42NDggMC0xLjE2OC0uMjA5LTEuNTAxLS42MDMtLjMzMS0uMzkxLS40NTUtLjk0OS0uMzUtMS41NjkuMi0xLjI2NSAxLjIzLTIuMTQ5IDIuNTA0LTIuMTQ5LjYzNSAwIDEuMTUuMjEgMS40OS42MDkuMzQyLjQwMS40NzcuOTYxLjM4IDEuNTc5em0zLjExNS00LjM0NmgtMi4yMzVhLjM5LjM5IDAgMDAtLjM4NS4zMjhsLS4wOTguNjI1LS4xNTYtLjIyNmMtLjQ4NC0uNzAyLTEuNTYzLS45MzctMi42NC0uOTM3LTIuNDY5IDAtNC41NzggMS44Ny00Ljk4OCA0LjQ5Mi0uMjE0IDEuMzA4LjA5IDIuNTU4LjgzMiAzLjQzLjY4Mi44MDIgMS42NTUgMS4xMzYgMi44MTQgMS4xMzYgMS45OSAwIDMuMDk0LTEuMjc3IDMuMDk0LTEuMjc3bC0uMS42MmEuMzg5LjM4OSAwIDAwLjM4NS40NWgyLjAxMmMuMzIgMCAuNTkxLS4yMzIuNjQtLjU0N2wxLjIxLTcuNjQ1YS4zODkuMzg5IDAgMDAtLjM4NS0uNDQ5eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+CiAgICA8cGF0aCBmaWxsPSIjMjUzQjgwIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0zMy4wNTIgMTguMzE0aC0yLjI0N2EuNjQ3LjY0NyAwIDAwLS41MzYuMjg1bC0zLjA5OCA0LjU2LTEuMzEzLTQuMzgyYS42NS42NSAwIDAwLS42MjItLjQ2M2gtMi4yMDhhLjM4OS4zODkgMCAwMC0uMzY4LjUxNGwyLjQ3MyA3LjI1Ni0yLjMyNiAzLjI4YS4zODkuMzg5IDAgMDAuMzE3LjYxM2gyLjI0NGEuNjUuNjUgMCAwMC41MzMtLjI3OWw3LjQ3LTEwLjc3NGEuMzg5LjM4OSAwIDAwLS4zMi0uNjF6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz4KICAgIDxwYXRoIGZpbGw9IiMxNzlCRDciIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTU3LjA3IDE0LjMyOWwtMS45MTQgMTIuMTc3YS4zODkuMzg5IDAgMDAuMzgzLjQ1aDEuOTI3Yy4zMTkgMCAuNTkxLS4yMzMuNjQtLjU0OGwxLjg5LTExLjk1OUEuMzg5LjM4OSAwIDAwNTkuNjEgMTRoLTIuMTU2YS4zODguMzg4IDAgMDAtLjM4NC4zMjl6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz4KICA8L2c+CiAgPGRlZnM+CiAgICA8Y2xpcFBhdGggaWQ9ImNsaXAwIj4KICAgICAgPHBhdGggZmlsbD0iI2ZmZiIgZD0iTTAgMGg2MHY0NEgweiIvPgogICAgPC9jbGlwUGF0aD4KICA8L2RlZnM+Cjwvc3ZnPgo="},5864:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MCIgaGVpZ2h0PSI0NCIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDYwIDQ0Ij4KICA8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDApIj4KICAgIDxwYXRoIGZpbGw9IiNBNEE5QjUiIGZpbGwtb3BhY2l0eT0iLjYiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTQxLjAyNiAxOC4zNjhjLS4yNTUgMS42NzQtMS41MzUgMS42NzQtMi43NzIgMS42NzRoLS43MDRsLjQ5NC0zLjEyNmEuMzg4LjM4OCAwIDAxLjM4NC0uMzI3aC4zMjNjLjg0MiAwIDEuNjM4IDAgMi4wNDguNDc5LjI0NS4yODcuMzIuNzEyLjIyNyAxLjN6TTQwLjQ4NyAxNEgzNS44MmMtLjMyIDAtLjU5LjIzMi0uNjQuNTQ3bC0xLjg4OCAxMS45NTlhLjM4OS4zODkgMCAwMC4zODQuNDQ5aDIuMzk1YS40NTQuNDU0IDAgMDAuNDQ4LS4zODNsLjUzNi0zLjM5YS42NDguNjQ4IDAgMDEuNjQtLjU0N2gxLjQ3N2MzLjA3NCAwIDQuODQ5LTEuNDg3IDUuMzEyLTQuNDM0LjIwOS0xLjI4OC4wMDgtMi4zLS41OTUtMy4wMS0uNjY0LS43NzktMS44NC0xLjE5MS0zLjQwMi0xLjE5MXoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPgogICAgPHBhdGggZmlsbD0iIzY5NkY3RCIgZmlsbC1vcGFjaXR5PSIuNiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNy43MzggMTguMzY4Yy0uMjU1IDEuNjc0LTEuNTM0IDEuNjc0LTIuNzcyIDEuNjc0aC0uNzA0bC40OTQtMy4xMjZhLjM4OC4zODggMCAwMS4zODQtLjMyN2guMzIzYy44NDMgMCAxLjYzOCAwIDIuMDQ4LjQ3OS4yNDYuMjg3LjMyLjcxMi4yMjcgMS4zek03LjIgMTRIMi41MzNjLS4zMiAwLS41OTEuMjMyLS42NDEuNTQ3TC4wMDUgMjYuNTA2YS4zODkuMzg5IDAgMDAuMzg0LjQ0OWgyLjIyOWMuMzE4IDAgLjU5LS4yMzIuNjQtLjU0N2wuNTEtMy4yMjZhLjY0OC42NDggMCAwMS42NC0uNTQ3aDEuNDc2YzMuMDc1IDAgNC44NS0xLjQ4NyA1LjMxMi00LjQzNC4yMS0xLjI4OC4wMDktMi4zLS41OTUtMy4wMUM5LjkzOCAxNC40MTMgOC43NjEgMTQgNy4yIDE0ek0xOC4wMzUgMjIuNjZjLS4yMTYgMS4yNzctMS4yMyAyLjEzNC0yLjUyMyAyLjEzNC0uNjQ4IDAtMS4xNjctLjIwOS0xLjUtLjYwMy0uMzMtLjM5MS0uNDU1LS45NDktLjM1LTEuNTY5LjItMS4yNjUgMS4yMy0yLjE0OSAyLjUwNC0yLjE0OS42MzQgMCAxLjE1LjIxIDEuNDkuNjA5LjM0Mi40MDEuNDc3Ljk2MS4zNzkgMS41Nzl6bTMuMTE0LTQuMzQ2aC0yLjIzNWEuMzkuMzkgMCAwMC0uMzg0LjMyOGwtLjA5OC42MjUtLjE1Ni0uMjI2Yy0uNDg0LS43MDItMS41NjMtLjkzNy0yLjY0LS45MzctMi40NyAwLTQuNTc4IDEuODctNC45ODkgNC40OTItLjIxMyAxLjMwOC4wOSAyLjU1OC44MzIgMy40My42ODIuODAyIDEuNjU1IDEuMTM2IDIuODE1IDEuMTM2IDEuOTkgMCAzLjA5NC0xLjI3NyAzLjA5NC0xLjI3N2wtLjEuNjJhLjM4OS4zODkgMCAwMC4zODQuNDVoMi4wMTNjLjMyIDAgLjU5LS4yMzIuNjQtLjU0N2wxLjIwOS03LjY0NWEuMzg5LjM4OSAwIDAwLS4zODUtLjQ0OXoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPgogICAgPHBhdGggZmlsbD0iI0E0QTlCNSIgZmlsbC1vcGFjaXR5PSIuNiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNTEuMzIyIDIyLjY2Yy0uMjE2IDEuMjc3LTEuMjMgMi4xMzQtMi41MjIgMi4xMzQtLjY0OCAwLTEuMTY4LS4yMDktMS41MDEtLjYwMy0uMzMxLS4zOTEtLjQ1NS0uOTQ5LS4zNS0xLjU2OS4yLTEuMjY1IDEuMjMtMi4xNDkgMi41MDQtMi4xNDkuNjM1IDAgMS4xNS4yMSAxLjQ5LjYwOS4zNDIuNDAxLjQ3Ny45NjEuMzggMS41Nzl6bTMuMTE1LTQuMzQ2aC0yLjIzNWEuMzkuMzkgMCAwMC0uMzg1LjMyOGwtLjA5OC42MjUtLjE1Ni0uMjI2Yy0uNDg0LS43MDItMS41NjMtLjkzNy0yLjY0LS45MzctMi40NjkgMC00LjU3OCAxLjg3LTQuOTg4IDQuNDkyLS4yMTQgMS4zMDguMDkgMi41NTguODMyIDMuNDMuNjgyLjgwMiAxLjY1NSAxLjEzNiAyLjgxNCAxLjEzNiAxLjk5IDAgMy4wOTQtMS4yNzcgMy4wOTQtMS4yNzdsLS4xLjYyYS4zODkuMzg5IDAgMDAuMzg1LjQ1aDIuMDEyYy4zMiAwIC41OTEtLjIzMi42NC0uNTQ3bDEuMjEtNy42NDVhLjM4OS4zODkgMCAwMC0uMzg1LS40NDl6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz4KICAgIDxwYXRoIGZpbGw9IiM2OTZGN0QiIGZpbGwtb3BhY2l0eT0iLjYiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTMzLjA1MiAxOC4zMTRoLTIuMjQ3YS42NDcuNjQ3IDAgMDAtLjUzNi4yODVsLTMuMDk4IDQuNTYtMS4zMTMtNC4zODJhLjY1LjY1IDAgMDAtLjYyMi0uNDYzaC0yLjIwOGEuMzg5LjM4OSAwIDAwLS4zNjguNTE0bDIuNDczIDcuMjU2LTIuMzI2IDMuMjhhLjM4OS4zODkgMCAwMC4zMTcuNjEzaDIuMjQ0YS42NS42NSAwIDAwLjUzMy0uMjc5bDcuNDctMTAuNzc0YS4zODkuMzg5IDAgMDAtLjMyLS42MXoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPgogICAgPHBhdGggZmlsbD0iI0E0QTlCNSIgZmlsbC1vcGFjaXR5PSIuNiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNTcuMDcgMTQuMzI5bC0xLjkxNCAxMi4xNzdhLjM4OS4zODkgMCAwMC4zODMuNDVoMS45MjdjLjMxOSAwIC41OTEtLjIzMy42NC0uNTQ4bDEuODktMTEuOTU5QS4zODkuMzg5IDAgMDA1OS42MSAxNGgtMi4xNTZhLjM4OC4zODggMCAwMC0uMzg0LjMyOXoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPgogIDwvZz4KICA8ZGVmcz4KICAgIDxjbGlwUGF0aCBpZD0iY2xpcDAiPgogICAgICA8cGF0aCBmaWxsPSIjZmZmIiBkPSJNMCAwaDYwdjQ0SDB6Ii8+CiAgICA8L2NsaXBQYXRoPgogIDwvZGVmcz4KPC9zdmc+Cg=="},33195:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0NCIgaGVpZ2h0PSI0NCIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDQ0IDQ0Ij4KICA8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDApIj4KICAgIDxwYXRoIGZpbGw9IiM2OTZGN0QiIGZpbGwtb3BhY2l0eT0iLjYiIGQ9Ik0xNy40NjUgNi4xOGwtNC4xMzEgOS44OGgtMi43MTJMOC41ODUgOC4xNzZjLS4xMjUtLjQ4NS0uMjIzLS42NjctLjYwNy0uODdhMTAuNzEzIDEwLjcxMyAwIDAwLTIuNTIyLS44NGwuMDYtLjI4Nmg0LjM0OWExLjE5MSAxLjE5MSAwIDAxMS4xOCAxLjAwN2wxLjA3NSA1LjcxOCAyLjY2Ny02LjcyNWgyLjY3OHptMTAuNTg2IDYuNjY3YzAtMi42MS0zLjYwNC0yLjc1My0zLjU4LTMuOTE4IDAtLjM1My4zNDUtLjczMSAxLjA4NS0uODI3YTQuODA3IDQuODA3IDAgMDEyLjUyLjQ0NWwuNDQ0LTIuMDk2YTYuODg4IDYuODg4IDAgMDAtMi4zODktLjQ0NGMtMi41MjkgMC00LjMwNCAxLjMzMy00LjMyIDMuMjY0LS4wMTUgMS40MjIgMS4yNzEgMi4yMjIgMi4yMzggMi42OTEuOTY3LjQ3IDEuMzMzLjc5NCAxLjMzMyAxLjIyNyAwIC42NjctLjc5My45NTYtMS41MjYuOTY3YTUuMzMzIDUuMzMzIDAgMDEtMi42MzQtLjYzMWwtLjQ2NCAyLjE2NmMuOTA2LjM1MyAxLjg3LjUzMyAyLjg0Mi41MzEgMi42ODcgMCA0LjQ0NS0xLjMzMyA0LjQ0NS0zLjM4bC4wMDYuMDA1em02LjY2IDMuMjJoMi4zNjNMMzUuMDIyIDYuMThoLTIuMThhMS4xNjIgMS4xNjIgMCAwMC0xLjA4OC43MjVsLTMuODM2IDkuMTU1aDIuNjg0bC41MzQtMS40NzVoMy4yNzdsLjI5OCAxLjQ4MnptLTIuODQtMy41MDdsMS4zNDUtMy43MS43ODQgMy43MWgtMi4xMjl6bS0xMC43Ni02LjM4bC0yLjEwNiA5Ljg4aC0yLjU2bDIuMTEzLTkuODhoMi41NTN6Ii8+CiAgICA8cGF0aCBmaWxsPSIjNjk2RjdEIiBmaWxsLW9wYWNpdHk9Ii42IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xLjA0MiAyMi4wMjlINDMuMXYyMS4wMjlIMS4wNDJ2LTIxLjAzem0xOS4wOCAxMy4yNDljLjQ0My4wMTQuODgzLS4wNjIgMS4yOTYtLjIyMmwtLjE1Ni0uNzFjLS4zMTYuMTItLjY1Mi4xOC0uOTkuMTc5LTEuMTAzIDAtMS43NC0uNjk2LTEuNzQtMS43OTIgMC0xLjE5Ny43MzMtMS44MzUgMS43NDYtMS44MzUuMzM2LS4wMDQuNjY5LjA2Mi45NzguMTkzbC4xOTMtLjcyN2EyLjg5IDIuODkgMCAwMC0xLjIwNy0uMjIyYy0xLjUxNyAwLTIuNjY2Ljk4NS0yLjY2NiAyLjYyNyAwIDEuNTE4Ljk2MiAyLjUwOSAyLjU0NiAyLjUwOXptLTkuODAyLTEuMDU2Yy4zNy4yMDYuNzg0LjMxNSAxLjIwNy4zMTguNTc4IDAgLjkwNC0uMjczLjkwNC0uNjgyIDAtLjQwOS0uMjUzLS41OTgtLjg4OS0uODI5LS44MjktLjI4OS0xLjM1My0uNzMxLTEuMzUzLTEuNDQyIDAtLjgyMi42OC0xLjQzNiAxLjc3OC0xLjQzNi40MS0uMDEuODE4LjA3NCAxLjE5MS4yNDVsLS4yMjIuNzRhMi4xNDIgMi4xNDIgMCAwMC0uOTk0LS4yNDdjLS41NzcgMC0uODIyLjMwNC0uODIyLjYgMCAuMzg0LjI5LjU2Mi45NTYuODEzLjg2NC4zMzQgMS4yOC43NzEgMS4yOCAxLjQ4IDAgLjgwNy0uNjA3IDEuNDk2LTEuODg3IDEuNDk2YTIuOTU0IDIuOTU0IDAgMDEtMS4zNTUtLjMxMWwuMjA2LS43NDV6bTYuNTY5LTEuMjNoLTEuODc2djEuNDY2aDIuMDk4di43NDZoLTMuMDA3di00Ljk4MmgyLjg5di43NDdoLTJ2MS4yODloMS44OTV2LjczM3ptNi4xMzUtMi43N3YyLjkxYzAgLjk3Ny40MDcgMS40MjggMS4wMjMgMS40MjguNjY2IDAgMS4wNS0uNDQ1IDEuMDUtMS40Mjl2LTIuOTA5SDI2djIuODVjMCAxLjU0LS43OTMgMi4yMjEtMiAyLjIyMS0xLjE1NiAwLTEuOTA0LS42NDQtMS45MDQtMi4yMjJ2LTIuODQ5aC45Mjh6bTUuMzMyLS4wNDRhNy44NDMgNy44NDMgMCAwMC0xLjM3OC4xMXY0LjkxN2guOTExdi0yLjA1MmguNDU4Yy41MS4wMTYuNzQyLjIyMy44ODkuODc0LjA3My40MDIuMTg1Ljc5Ni4zMzMgMS4xNzhoLjkzM2MtLjE1Ny0uNDU2LS4yODktLjkyLS4zOTMtMS4zOTItLjExOC0uNDgyLS4zMzMtLjgyOS0uNjk2LS45NjJ2LS4wMjJhMS4zMTMgMS4zMTMgMCAwMC45MTItMS4yNDUgMS4yNjcgMS4yNjcgMCAwMC0uNDMtMS4wMDZjLS4zNDItLjI4LS44MjItLjQtMS41NC0uNHptLjA2NiAyLjMxaC0uNTR2LTEuNTc3YTIuNjEgMi42MSAwIDAxLjU2My0uMDQ0Yy41OSAwIC45NjguMjYuOTY4LjggMCAuNDk1LS4zNzcuODIyLS45OS44MjJ6bTUuNDg1LjUwM2gtMS44OHYxLjQ2N2gyLjEwMnYuNzQ2SDMxLjExdi00Ljk4MmgyLjl2Ljc0N2gtMnYxLjI4OWgxLjg4bC4wMTYuNzMzeiIgY2xpcC1ydWxlPSJldmVub2RkIi8+CiAgPC9nPgogIDxkZWZzPgogICAgPGNsaXBQYXRoIGlkPSJjbGlwMCI+CiAgICAgIDxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0wIDBoNDR2NDRIMHoiLz4KICAgIDwvY2xpcFBhdGg+CiAgPC9kZWZzPgo8L3N2Zz4K"},41073:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDE2IDE2Ij4KICA8cGF0aCBmaWxsPSIjZmZmIiBkPSJNMCAzLjVhMSAxIDAgMDExLTFoMTRhMSAxIDAgMDExIDF2OWExIDEgMCAwMS0xIDFIMWExIDEgMCAwMS0xLTF2LTl6Ii8+CiAgPHBhdGggZmlsbD0iI0VFRUZGMyIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTUgM0gxYS41LjUgMCAwMC0uNS41djlhLjUuNSAwIDAwLjUuNWgxNGEuNS41IDAgMDAuNS0uNXYtOUEuNS41IDAgMDAxNSAzek0xIDIuNWExIDEgMCAwMC0xIDF2OWExIDEgMCAwMDEgMWgxNGExIDEgMCAwMDEtMXYtOWExIDEgMCAwMC0xLTFIMXoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0xMiAxMS4zMzNhLjY2Ny42NjcgMCAwMS0uNjY3LjY2N0g0VjRoNy4zMzNjLjM2OCAwIC42NjcuMjk4LjY2Ny42Njd2Ni42NjZ6Ii8+CiAgPHBhdGggZmlsbD0iIzA2OTBGRiIgZD0iTTEyIDEydi0xLjI2OGgtLjk2NWwtLjQ5Ny0uNTUtLjUuNTVINi44NTd2LTIuNTZINS44M2wxLjI3NC0yLjg4M2gxLjIyOWwuNDM5Ljk4N1Y1LjI5aDEuNTJsLjI2NC43NDQuMjY2LS43NDRIMTJWNEg0djhoOHptLS44MDMtMS41ODhIMTJsLTEuMDYyLTEuMTI2TDEyIDguMTczaC0uNzlsLS42NTUuNzE2LS42NS0uNzE2aC0uODAzbDEuMDU2IDEuMTItMS4wNTYgMS4xMTloLjc4bC42Ni0uNzIzLjY1NS43MjN6bS4xODgtMS4xMjVMMTIgOS45NFY4LjYzOGwtLjYxNS42NDl6bS0zLjU3OC42MDd2LS4zNDlIOS4wN1Y5LjA0SDcuODA3VjguNjloMS4yOTV2LS41MThINy4xOTZ2Mi4yMzloMS45MDZ2LS41MThINy44MDd6bTMuNTg4LTIuMDQ2SDEyVjUuNjA5aC0uOTRsLS41MDMgMS4zOTUtLjQ5OC0xLjM5NWgtLjk1N3YyLjIzOWguNjA1VjYuMjgxbC41NzUgMS41NjdoLjUzOGwuNTc1LTEuNTd2MS41N3ptLTIuOTggMGguNjg3bC0uOTg4LTIuMjM5aC0uNzg3TDYuMzQgNy44NDhoLjY3MmwuMTg1LS40NDhoMS4wM2wuMTg5LjQ0OHptLS40LS45NWgtLjYwOGwuMzA0LS43MzIuMzA0LjczMnoiLz4KPC9zdmc+Cg=="},97989:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDE2IDE2Ij4KICA8cGF0aCBmaWxsPSIjZmZmIiBkPSJNMCAzLjVhMSAxIDAgMDExLTFoMTRhMSAxIDAgMDExIDF2OWExIDEgMCAwMS0xIDFIMWExIDEgMCAwMS0xLTF2LTl6Ii8+CiAgPHBhdGggZmlsbD0iI0VFRUZGMyIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTUgM0gxYS41LjUgMCAwMC0uNS41djlhLjUuNSAwIDAwLjUuNWgxNGEuNS41IDAgMDAuNS0uNXYtOUEuNS41IDAgMDAxNSAzek0xIDIuNWExIDEgMCAwMC0xIDF2OWExIDEgMCAwMDEgMWgxNGExIDEgMCAwMDEtMXYtOWExIDEgMCAwMC0xLTFIMXoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPgogIDxwYXRoIGZpbGw9IiNFMjFGMjgiIGQ9Ik0xMS41NzggNy43NGwxLjkyNiAyLjIzM2EzLjQyMSAzLjQyMSAwIDAwLS4wNjgtNC4wNUwxMS41NzggNy43NHpNNi4xMzMgNS43NjZjMS40MzMgMCAyLjUxOC4zMiAyLjYzMSAxLjQ5bDEuNTE3LTEuNTVoMy4wMzNhMy41NDQgMy41NDQgMCAwMC0xLjIzNi0uOTAyQTMuNjA1IDMuNjA1IDAgMDAxMC41NyA0LjVINC43OTFjLS41Mi4wMDUtMS4wMzEuMTItMS41LjM0YTMuNTY0IDMuNTY0IDAgMDAtMS4yMTUuOTI2aDQuMDU3em0tMi4zNjYgMS40OUwzLjI1OSA4LjYxaDIuMDYzYy42MTQgMCAuNzU4LS4yNDYuOTMyLS43NDUuMTc1LS40OTktLjIwNC0uNjEtLjYyMi0uNjFIMy43Njd6bTYuNTE0IDIuOTE4bC0xLjU5My0xLjk4Yy0uMjk1IDEuMzQ4LTEuMjY2IDEuOTgtMy4wNzggMS45OEgyYy4zMzMuNDE0Ljc1OC43NDcgMS4yNC45NzcuNDg0LjIzIDEuMDE0LjM0OSAxLjU1LjM0OWg1Ljc4YTMuNjIgMy42MiAwIDAwMS41NTctLjM0NmMuNDg2LS4yMy45MTMtLjU2NSAxLjI0OC0uOThoLTMuMDk0eiIvPgo8L3N2Zz4K"},66694:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDE2IDE2Ij4KICA8cGF0aCBmaWxsPSIjZmZmIiBkPSJNMCAzLjVhMSAxIDAgMDExLTFoMTRhMSAxIDAgMDExIDF2OWExIDEgMCAwMS0xIDFIMWExIDEgMCAwMS0xLTF2LTl6Ii8+CiAgPHBhdGggZmlsbD0iI0VFRUZGMyIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTUgM0gxYS41LjUgMCAwMC0uNS41djlhLjUuNSAwIDAwLjUuNWgxNGEuNS41IDAgMDAuNS0uNXYtOUEuNS41IDAgMDAxNSAzek0xIDIuNWExIDEgMCAwMC0xIDF2OWExIDEgMCAwMDEgMWgxNGExIDEgMCAwMDEtMXYtOWExIDEgMCAwMC0xLTFIMXoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPgogIDxwYXRoIGZpbGw9IiNGRkZGRkUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTMuNjY3IDguMDdhMy44NiAzLjg2IDAgMDEzLjg2LTMuODYzIDMuODYgMy44NiAwIDAxMy44NTggMy44NjIgMy44NiAzLjg2IDAgMDEtMy44NTkgMy44NjJBMy44NiAzLjg2IDAgMDEzLjY2NyA4LjA3eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+CiAgPHBhdGggZmlsbD0iIzAxNjdBQSIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNOS44NiA3Ljk5M2EyLjMyMyAyLjMyMyAwIDAwLTEuNDktMi4xNjZ2NC4zMzJhMi4zMjMgMi4zMjMgMCAwMDEuNDktMi4xNjZ6bS0zLjE1IDIuMTY1VjUuODI3QTIuMzI1IDIuMzI1IDAgMDA1LjIyIDcuOTkzYy4wMDIuOTg5LjYyIDEuODMgMS40ODkgMi4xNjV6bS44My01LjgyN2EzLjY2IDMuNjYgMCAwMC0zLjY1OCAzLjY2MiAzLjY2IDMuNjYgMCAwMDMuNjU4IDMuNjYxIDMuNjYxIDMuNjYxIDAgMDAwLTcuMzIzek03LjUzMSAxMmMtMi4yMS4wMS00LjAzMS0xLjc4My00LjAzMS0zLjk2NUMzLjUgNS42NDkgNS4zMiA0IDcuNTMxIDRoMS4wMzdjMi4xODUgMCA0LjE4IDEuNjQ5IDQuMTggNC4wMzUgMCAyLjE4Mi0xLjk5NSAzLjk2NS00LjE4IDMuOTY1SDcuNTN6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz4KPC9zdmc+Cg=="},49371:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDE2IDE2Ij4KICA8cGF0aCBmaWxsPSIjZmZmIiBkPSJNMCAzLjVhMSAxIDAgMDExLTFoMTRhMSAxIDAgMDExIDF2OWExIDEgMCAwMS0xIDFIMWExIDEgMCAwMS0xLTF2LTl6Ii8+CiAgPHBhdGggZmlsbD0iI0VFRUZGMyIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTUgM0gxYS41LjUgMCAwMC0uNS41djlhLjUuNSAwIDAwLjUuNWgxNGEuNS41IDAgMDAuNS0uNXYtOUEuNS41IDAgMDAxNSAzek0xIDIuNWExIDEgMCAwMC0xIDF2OWExIDEgMCAwMDEgMWgxNGExIDEgMCAwMDEtMXYtOWExIDEgMCAwMC0xLTFIMXoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPgogIDxwYXRoIGZpbGw9IiM2MTkzQzgiIGQ9Ik01LjU3NyAxMC41NjRhLjk1Ny45NTcgMCAwMC43NjctLjM2OCAxLjA3IDEuMDcgMCAwMC4yNjItLjY3NFY4LjQ3NUgzLjc1YzAgLjE1MyAwIC4zMzcuMDM3LjU0NS4xMjcgMS43NDYuNjA5IDIuNjk2IDEuNzU0IDMuMTVsLjAzNi0xLjYwNnptLTEuNzQyLTMuNTloMi43NTNzLjA0OS0xLjg3NS40OTMtMi40MmEyLjU1IDIuNTUgMCAwMTIuMDA0LS45OTloLjA2N2MtLjI5OCAwLS42MDktLjA0OS0uOTc0LS4wNTVoLS4zM0M1LjA2NiAzLjUzIDQgNC4zMzMgMy43OTQgNi45NzRoLjA0MnptOC4zOTkuMDI0Yy0uMTQ2LTEuOTYtLjc2Mi0yLjkxLTIuMTgtMy4yNzd2MS45NzJjLS4xNzEgMC0xLjA2IDAtMS4zNy40NmExLjM5NSAxLjM5NSAwIDAwLS4yMDIuNDcydi4wNDlhLjEwNS4xMDUgMCAwMDAgLjA0Mi4wOC4wOCAwIDAxMCAuMDM3di4xNTNoMS42MDh2MS41NjlIOC40NDZ2MS41MTNjLS4wMjguMzctLjEwNS43MzYtLjIzMiAxLjA4NWEyLjA5NCAyLjA5NCAwIDAxLTEuNjI2IDEuMzI5aC0uMDM3Yy40My4wNjQuODY0LjA5NyAxLjI5OC4wOThoLjMyOWMyLjc4OS0uMDM3IDMuODU1LS44NCA0LjA1Ni0zLjUwNC4wNDItLjU4Mi4wNDItLjk4Ny4wNDItLjk4N3MwLS40MDQtLjA0Mi0xLjAxeiIvPgo8L3N2Zz4K"},55020:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDE2IDE2Ij4KICA8cGF0aCBmaWxsPSIjZmZmIiBkPSJNMCAzLjVhMSAxIDAgMDExLTFoMTRhMSAxIDAgMDExIDF2OWExIDEgMCAwMS0xIDFIMWExIDEgMCAwMS0xLTF2LTl6Ii8+CiAgPHBhdGggZmlsbD0iI0VFRUZGMyIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTUgM0gxYS41LjUgMCAwMC0uNS41djlhLjUuNSAwIDAwLjUuNWgxNGEuNS41IDAgMDAuNS0uNXYtOUEuNS41IDAgMDAxNSAzek0xIDIuNWExIDEgMCAwMC0xIDF2OWExIDEgMCAwMDEgMWgxNGExIDEgMCAwMDEtMXYtOWExIDEgMCAwMC0xLTFIMXoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPgogIDxwYXRoIGZpbGw9InVybCgjcGFpbnQwX2xpbmVhcikiIGQ9Ik02LjA0OCA0LjA3NEgyLjh2Ny44MzhoMy4yNDdWNC4wNzR6Ii8+CiAgPHBhdGggZmlsbD0idXJsKCNwYWludDFfbGluZWFyKSIgZD0iTTkuNjU5IDRINi4yNjZ2Ny45MTJIOS42NlY0eiIvPgogIDxwYXRoIGZpbGw9InVybCgjcGFpbnQyX2xpbmVhcikiIGQ9Ik0xMy4xOTcgNC4wNzRIOS44MDV2Ny44NzRoMy4zOTJWNC4wNzR6Ii8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTMuODE0IDEwLjY4MWMwIC40OS0uMjAyLjk2OC0uNTUzIDEuMzA4LS4zMzcuMzI2LS43OS41MDgtMS4yNTYuNTA5SDIuMjI2Yy0uMDA2IDAtLjA0LjAwNS0uMDQ1IDAtLjAwNS0uMDA1IDAtLjA0IDAtLjA0NlY1LjM1NWMwLS4yOTguMDYtLjU5LjE5NC0uODU4LjIxNi0uNDI3LjYtLjc2IDEuMDU1LS45MDguMjAxLS4wNjYuNDA5LS4wODkuNjItLjA4OUgxMy44MTR2Ny4xODF6bS0xMC45Ni0yLjA2Yy0uMDIyLS4wMS0uMDIyLS4wMDYtLjAyNi0uMDIyLS4wMDItLjAxIDAtLjAyNCAwLS4wMzNWNS41NjdjMC0uMDczLS4wMDItLjE0Ny4wMDEtLjIyLjAxNi0uMzYyLjE4Ni0uNzA2LjQ2Mi0uOTM4LjE5Ny0uMTY2LjQ0Mi0uMjcuNjk3LS4yOTcuMTUxLS4wMTUuMzA2LS4wMDYuNDU4LS4wMDZINS45NjhjLjAwNyAwIC4wNDMtLjAwNS4wNDggMCAuMDAzLjAwMiAwIC4wMiAwIC4wMjR2Ni40NjVhMS4zMTIgMS4zMTIgMCAwMS0uNDIxLjk1OCAxLjI5IDEuMjkgMCAwMS0uNjk4LjMyOGMtLjE1Ni4wMi0uMzE2LjAxMS0uNDczLjAxMUgyLjg1M2MtLjAyNSAwLS4wMi4wMDUtLjAyNS0uMDA5LS4wMDMtLjAxIDAtLjAyNiAwLS4wMzZ2LTIuNjljLjI1Mi4wNjkuNTE1LjEwNy43NzQuMTMzLjI1Mi4wMjUuNTA3LjAzNi43Ni4wMjQuMzU0LS4wMTcuNzQyLS4wNzMgMS4wMzMtLjI5LjEyMi0uMDkuMjItLjIxLjI3OS0uMzUuMDU2LS4xMzUuMDc2LS4yOC4wNzYtLjQyNVY2Ljc3MWMwLS4wMTQuMDAzLS4wMTUtLjAwNi0uMDItLjAwOS0uMDA1LS4wMzYgMC0uMDQ2IDBINC42OTRjLS4wMTUgMC0uMDUtLjAwNS0uMDU2LjAwNS0uMDA1LjAwOCAwIC4wMzMgMCAuMDQzdjEuNDU4YS42MzUuNjM1IDAgMDEtLjE5Ni40NzZjLS4xNzkuMTYtLjQyMy4xNzktLjY1LjE2YTIuNTI1IDIuNTI1IDAgMDEtLjc2LS4xOTIgMy42NiAzLjY2IDAgMDEtLjE3OC0uMDh6bTMuNTc3LTEuNTRhMS4xODkgMS4xODkgMCAwMC0uMDI3LjAyMnYtMS40NmMwLS4xMTMtLjAwNS0uMjI3LjAwNC0uMzM4QTEuMzA3IDEuMzA3IDAgMDE3LjUzIDQuMTE2Yy4xNDYtLjAxOC4yOTUtLjAxLjQ0Mi0uMDFIOS41M2MuMDEgMCAuMDU2LS4wMDYuMDYxIDAgLjAwMy4wMDQgMCAuMDI0IDAgLjAyOXY2LjQ0NmMwIC40OTUtLjI3Ni45NTctLjcyIDEuMTc3YTEuMzU2IDEuMzU2IDAgMDEtLjYxMi4xMzRINi41MTJjLS4wMyAwLS4wNjUuMDA2LS4wOTUgMC0uMDE5LS4wMDMtLjAwOS4wMDQtLjAxMy0uMDA4LS4wMDMtLjAwOCAwLS4wMjIgMC0uMDNWOC44OTZjLjIxMS4xODIuNDc5LjI4NS43NDcuMzQ0LjIwNC4wNDYuNDEzLjA2Ny42MjIuMDc1YTQuODM4IDQuODM4IDAgMDAxLjIzMy0uMTA3Yy4wNTItLjAxLjEwNC0uMDIyLjE1NS0uMDMzLjAxMy0uMDAzLjA2NS0uMDA4LjA3Mi0uMDE4LjAwNS0uMDA3IDAtLjAzNiAwLS4wNDV2LS41MDRjLS4yMjIuMTEyLS40NTQuMi0uNjk3LjI0OS0uMjk3LjA1OC0uNjI2LjA3NS0uOTEtLjA0N2EuODE4LjgxOCAwIDAxLS40ODUtLjY5OWMtLjAzLS4zMTguMDY1LS42NTIuMzM2LS44NC4yOC0uMTk1LjY0OC0uMTk3Ljk3My0uMTQ1YTIuNTYyIDIuNTYyIDAgMDEuNzgzLjI2NHYtLjUwNGMwLS4wMDguMDA1LS4wMzkgMC0uMDQ1LS4wMDgtLjAxLS4wNTgtLjAxNS0uMDcyLS4wMThhNi4wNDMgNi4wNDMgMCAwMC0uNjkxLS4xMTggNC44MTYgNC44MTYgMCAwMC0uNjEtLjAyNGMtLjIwNy4wMDQtLjQxNS4wMi0uNjE4LjA1OGExLjkxNCAxLjkxNCAwIDAwLS43MTguMjcyIDEuMjkyIDEuMjkyIDAgMDAtLjA5My4wN3ptNC4xOCAxLjA3NmguNzQxYy4wOTIgMCAuMTc5LjAyMy4yNDguMDg2YS4zNDguMzQ4IDAgMDEtLjA1My41NTEuNDMuNDMgMCAwMS0uMjI5LjA0N0gxMC43Yy0uMDIgMC0uMDguMDA5LS4wODctLjAwNi0uMDA1LS4wMSAwLS4wMzIgMC0uMDQydi0uNjM3em0xLjAwNS0uNzc1YS4zMjMuMzIzIDAgMDEtLjA3OC4yOTIuMzQyLjM0MiAwIDAxLS4yNDYuMDk3aC0uNjIzYy0uMDEgMC0uMDQ2LjAwNi0uMDU0IDAtLjAxLS4wMDctLjAwMy0uMDU1LS4wMDMtLjA2OHYtLjUxOGMwLS4wMS0uMDA0LS4wMyAwLS4wNC4wMDQtLjAxLjAwNy0uMDA2LjAyMi0uMDA2SDExLjIwM2MuMDQyIDAgLjA4NC0uMDAyLjEyNi4wMDJhLjMyMS4zMjEgMCAwMS4yMjguMTE2LjMxLjMxIDAgMDEuMDYuMTI1em0xLjU0Ny0zLjI3NmguMDA1VjEwLjU5M2MtLjAwMi40MS0uMTk1LjgtLjUyMyAxLjA0NC0uMjQuMTc5LS41Mi4yNTUtLjgxNS4yNTVoLTEuNzQ2Yy0uMDE1IDAtLjA5Ni4wMS0uMTA0IDAtLjAwNC0uMDA1IDAtLjAyNiAwLS4wMzFWOS4yNjdjMC0uMDE1LS4wMDMtLjAxNi4wMDctLjAyLjAxNS0uMDA3LjA1IDAgLjA2NiAwaDEuODA3Yy4wOTIgMCAuMTg1LjAwMi4yNzctLjAxYS44NDguODQ4IDAgMDAuNTAyLS4yMjYuNTg2LjU4NiAwIDAwLjExMi0uNjU4Yy0uMDkxLS4xODYtLjI4LS4yOTctLjQ3NC0uMzQ3YTEuMTQgMS4xNCAwIDAwLS4xODQtLjAzMmMtLjAwNCAwLS4wMjQgMC0uMDI3LS4wMDItLjAxMS0uMDEzLjAxLS4wMTYuMDE1LS4wMTguMDM5LS4wMTIuMDgyLS4wMTYuMTIxLS4wMjguMjA0LS4wNjEuMzgtLjIwNy40MzQtLjQyYS41Ni41NiAwIDAwLS4yLS41OS44NzcuODc3IDAgMDAtLjQ1Mi0uMTU2Yy0uMTYzLS4wMTUtLjMyOC0uMDA5LS40OTEtLjAwOUgxMGMtLjAyOCAwLS4wMi0uMDA3LS4wMi0uMDMzVjUuNDgyYTEuMzA0IDEuMzA0IDAgMDEuMzM5LS45NTRjLjIxMi0uMjM0LjUwOS0uMzg0LjgyMy0uNDE2LjE4Mi0uMDE4LjM3LS4wMDYuNTUyLS4wMDZIMTMuMTYzeiIgY2xpcC1ydWxlPSJldmVub2RkIi8+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MF9saW5lYXIiIHgxPSIyLjgwMSIgeDI9IjYuMDQ4IiB5MT0iNy40NjMiIHkyPSI3LjQ2MyIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjMUQyOTcwIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzAwNkRCQSIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQxX2xpbmVhciIgeDE9IjYuMjY2IiB4Mj0iOS42NTkiIHkxPSI3LjQyMiIgeTI9IjcuNDIyIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiM2RjJCMkYiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjRTMwMTM4Ii8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDJfbGluZWFyIiB4MT0iOS44MDUiIHgyPSIxMy4xOTciIHkxPSI3LjQ3OSIgeTI9IjcuNDc5IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiMwMDdCNDAiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjNTVCMzMwIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogIDwvZGVmcz4KPC9zdmc+Cg=="},10738:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDE2IDE2Ij4KICA8cGF0aCBmaWxsPSIjZmZmIiBkPSJNMCAzLjVhMSAxIDAgMDExLTFoMTRhMSAxIDAgMDExIDF2OWExIDEgMCAwMS0xIDFIMWExIDEgMCAwMS0xLTF2LTl6Ii8+CiAgPHBhdGggZmlsbD0iI0VFRUZGMyIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTUgM0gxYS41LjUgMCAwMC0uNS41djlhLjUuNSAwIDAwLjUuNWgxNGEuNS41IDAgMDAuNS0uNXYtOUEuNS41IDAgMDAxNSAzek0xIDIuNWExIDEgMCAwMC0xIDF2OWExIDEgMCAwMDEgMWgxNGExIDEgMCAwMDEtMXYtOWExIDEgMCAwMC0xLTFIMXoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPgogIDxwYXRoIGZpbGw9IiM2QzZCQkQiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTYuNjQ4IDEwLjQzaDIuNzA0VjUuNTdINi42NDh2NC44NnoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPgogIDxwYXRoIGZpbGw9IiNFQjAwMUIiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTYuODIgOGMwLS45ODUuNDYxLTEuODYzIDEuMTgtMi40M2EzLjA5IDMuMDkgMCAxMDAgNC44NkEzLjA4NSAzLjA4NSAwIDAxNi44MiA4eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+CiAgPHBhdGggZmlsbD0iIzAwOTlERiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTIuOTAzIDkuOTE1di0uMTJoLS4wM2wtLjAzNy4wODMtLjAzNi0uMDgzaC0uMDMxdi4xMmguMDIydi0uMDlsLjAzNC4wNzhoLjAyM2wuMDMzLS4wNzh2LjA5aC4wMjJ6bS0uMTk4IDB2LS4xaC4wNHYtLjAyaC0uMTAydi4wMmguMDR2LjFoLjAyMnpNMTMgOGEzLjA5IDMuMDkgMCAwMS01IDIuNDNBMy4wODUgMy4wODUgMCAwMDkuMTggOGMwLS45ODUtLjQ2MS0xLjg2My0xLjE4LTIuNDNBMy4wOSAzLjA5IDAgMDExMyA4eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+Cjwvc3ZnPgo="},70123:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDE2IDE2Ij4KICA8cGF0aCBmaWxsPSIjZmZmIiBkPSJNMCAzLjVhMSAxIDAgMDExLTFoMTRhMSAxIDAgMDExIDF2OWExIDEgMCAwMS0xIDFIMWExIDEgMCAwMS0xLTF2LTl6Ii8+CiAgPHBhdGggZmlsbD0iI0VFRUZGMyIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTUgM0gxYS41LjUgMCAwMC0uNS41djlhLjUuNSAwIDAwLjUuNWgxNGEuNS41IDAgMDAuNS0uNXYtOUEuNS41IDAgMDAxNSAzek0xIDIuNWExIDEgMCAwMC0xIDF2OWExIDEgMCAwMDEgMWgxNGExIDEgMCAwMDEtMXYtOWExIDEgMCAwMC0xLTFIMXoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPgogIDxwYXRoIGZpbGw9IiNGRjVGMDAiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTYuNjQ4IDEwLjQzaDIuNzA0VjUuNTdINi42NDh2NC44NnoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPgogIDxwYXRoIGZpbGw9IiNFQjAwMUIiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTYuODIgOGMwLS45ODUuNDYxLTEuODYzIDEuMTgtMi40M2EzLjA5IDMuMDkgMCAxMDAgNC44NkEzLjA4NSAzLjA4NSAwIDAxNi44MiA4eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+CiAgPHBhdGggZmlsbD0iI0Y3OUUxQiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTIuOTAzIDkuOTE1di0uMTJoLS4wM2wtLjAzNy4wODMtLjAzNi0uMDgzaC0uMDMxdi4xMmguMDIydi0uMDlsLjAzNC4wNzhoLjAyM2wuMDMzLS4wNzh2LjA5aC4wMjJ6bS0uMTk4IDB2LS4xaC4wNHYtLjAyaC0uMTAydi4wMmguMDR2LjFoLjAyMnpNMTMgOGEzLjA5IDMuMDkgMCAwMS01IDIuNDNBMy4wODUgMy4wODUgMCAwMDkuMTggOGMwLS45ODUtLjQ2MS0xLjg2My0xLjE4LTIuNDNBMy4wOSAzLjA5IDAgMDExMyA4eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+Cjwvc3ZnPgo="},69511:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDE2IDE2Ij4KICA8cGF0aCBmaWxsPSIjZmZmIiBkPSJNMCAzLjVhMSAxIDAgMDExLTFoMTRhMSAxIDAgMDExIDF2OWExIDEgMCAwMS0xIDFIMWExIDEgMCAwMS0xLTF2LTl6Ii8+CiAgPHBhdGggZmlsbD0iI0VFRUZGMyIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTUgM0gxYS41LjUgMCAwMC0uNS41djlhLjUuNSAwIDAwLjUuNWgxNGEuNS41IDAgMDAuNS0uNXYtOUEuNS41IDAgMDAxNSAzek0xIDIuNWExIDEgMCAwMC0xIDF2OWExIDEgMCAwMDEgMWgxNGExIDEgMCAwMDEtMXYtOWExIDEgMCAwMC0xLTFIMXoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPgogIDxwYXRoIGZpbGw9IiMyNTNCODAiIGQ9Ik02LjcwNSAxMS4zNGwuMTIyLS43OC0uMjczLS4wMDZINS4yNDlsLjkwNy01Ljc1YS4wNzQuMDc0IDAgMDEuMDc0LS4wNjNoMi4yYy43MyAwIDEuMjM1LjE1MSAxLjQ5OC40NTEuMTIzLjE0MS4yMDIuMjg4LjI0LjQ1LjA0LjE3LjA0LjM3My4wMDIuNjJsLS4wMDMuMDE4di4xNTlsLjEyMy4wN2EuODY2Ljg2NiAwIDAxLjI1LjE5Yy4xMDUuMTIuMTc0LjI3NC4yMDMuNDU1LjAzLjE4Ni4wMi40MDgtLjAzLjY2LS4wNTYuMjg5LS4xNDcuNTQtLjI3Ljc0Ni0uMTEzLjE5LS4yNTcuMzQ3LS40MjguNDdhMS43MzYgMS43MzYgMCAwMS0uNTc2LjI2IDIuODc1IDIuODc1IDAgMDEtLjcyMS4wODNoLS4xNzFhLjUyLjUyIDAgMDAtLjUxLjQzNWwtLjAxMi4wNy0uMjE3IDEuMzczLS4wMS4wNWMtLjAwMy4wMTctLjAwNy4wMjUtLjAxNC4wM2EuMDM2LjAzNiAwIDAxLS4wMjIuMDA4SDYuNzA1eiIvPgogIDxwYXRoIGZpbGw9IiMxNzlCRDciIGQ9Ik0xMC40MDcgNi4yOTlhMy43OTMgMy43OTMgMCAwMS0uMDIzLjEyOWMtLjI5IDEuNDktMS4yODMgMi4wMDQtMi41NSAyLjAwNGgtLjY0NmEuMzE0LjMxNCAwIDAwLS4zMS4yNjZsLS4zMyAyLjA5Ni0uMDk0LjU5NGMtLjAxNi4xLjA2MS4xOTEuMTYzLjE5MWgxLjE0NWMuMTM1IDAgLjI1LS4wOTguMjcyLS4yMzJsLjAxMS0uMDU4LjIxNi0xLjM2OC4wMTQtLjA3NWEuMjc1LjI3NSAwIDAxLjI3Mi0uMjMzaC4xNzFjMS4xMSAwIDEuOTc4LS40NSAyLjIzMi0xLjc1NC4xMDYtLjU0NC4wNS0uOTk5LS4yMy0xLjMxOWExLjA5NyAxLjA5NyAwIDAwLS4zMTMtLjI0MXoiLz4KICA8cGF0aCBmaWxsPSIjMjIyRDY1IiBkPSJNMTAuMTAzIDYuMTc4YTIuMjk0IDIuMjk0IDAgMDAtLjI4Mi0uMDYzIDMuNTg2IDMuNTg2IDAgMDAtLjU2OS0uMDQySDcuNTI3YS4yNzQuMjc0IDAgMDAtLjI3Mi4yMzNMNi44ODggOC42M2wtLjAxLjA2OGEuMzE0LjMxNCAwIDAxLjMxLS4yNjZoLjY0NWMxLjI2OCAwIDIuMjYxLS41MTUgMi41NTEtMi4wMDQuMDA5LS4wNDQuMDE2LS4wODcuMDIzLS4xM2ExLjU0NyAxLjU0NyAwIDAwLS4zMDQtLjEyeiIvPgogIDxwYXRoIGZpbGw9IiMyNTNCODAiIGQ9Ik03LjI1NSA2LjMwNmEuMjc0LjI3NCAwIDAxLjI3Mi0uMjMyaDEuNzI1YTMuNTg1IDMuNTg1IDAgMDEuNzE0LjA2OSAyLjI5IDIuMjkgMCAwMS4yMDMuMDU1Yy4wODUuMDI4LjE2NS4wNjIuMjM4LjEuMDg2LS41NSAwLS45MjUtLjI5OC0xLjI2NEM5Ljc4IDQuNjYgOS4xODkgNC41IDguNDMgNC41aC0yLjJhLjMxNC4zMTQgMCAwMC0uMzExLjI2NmwtLjkxNyA1LjgxYS4xOS4xOSAwIDAwLjE4Ny4yMThoMS4zNThsLjM0MS0yLjE2NC4zNjctMi4zMjR6Ii8+Cjwvc3ZnPgo="},53324:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDE2IDE2Ij4KICA8cGF0aCBmaWxsPSIjZmZmIiBkPSJNMCAzLjVhMSAxIDAgMDExLTFoMTRhMSAxIDAgMDExIDF2OWExIDEgMCAwMS0xIDFIMWExIDEgMCAwMS0xLTF2LTl6Ii8+CiAgPHBhdGggZmlsbD0iI0VFRUZGMyIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTUgM0gxYS41LjUgMCAwMC0uNS41djlhLjUuNSAwIDAwLjUuNWgxNGEuNS41IDAgMDAuNS0uNXYtOUEuNS41IDAgMDAxNSAzek0xIDIuNWExIDEgMCAwMC0xIDF2OWExIDEgMCAwMDEgMWgxNGExIDEgMCAwMDEtMXYtOWExIDEgMCAwMC0xLTFIMXoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPgogIDxwYXRoIGZpbGw9IiMwMTc5OEEiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTEwLjIxNyA0LjUwMWMtLjM3Ny4wMTItLjgzOS4zMS0uOTIzLjY3NmwtMS4yNzYgNS42NDZjLS4wODQuMzcuMTQ1LjY3MS41MTMuNjc3aDIuODM0YS45MDIuOTAyIDAgMDAuNzk3LS42NzRsMS4yNzYtNS42NDdjLjA4Ni0uMzczLS4xNDktLjY3Ny0uNTIzLS42NzdoLTIuNjk3eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+CiAgPHBhdGggZmlsbD0iIzAyNDM4MSIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNOC4wMTggMTAuODIzbDEuMjc2LTUuNjQ2Yy4wODQtLjM2Ny41NDYtLjY2NC45MTctLjY3NUw5LjEzOCA0LjVINy4yMDVjLS4zNzIuMDA3LS44NC4zMDctLjkyMy42NzZsLTEuMjc2IDUuNjQ2Yy0uMDg1LjM3LjE0NC42NzEuNTEyLjY3N0g4LjUzYy0uMzY4LS4wMDUtLjU5Ny0uMzA3LS41MTMtLjY3NyIgY2xpcC1ydWxlPSJldmVub2RkIi8+CiAgPHBhdGggZmlsbD0iI0REMDIyOCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNS4wMDYgMTAuODIzbDEuMjc2LTUuNjQ2Yy4wODQtLjM3LjU1Mi0uNjY5LjkyMy0uNjc2TDQuNzMgNC41Yy0uMzczIDAtLjg1My4zMDMtLjkzOC42NzdsLTEuMjc2IDUuNjQ2YS43MDkuNzA5IDAgMDAtLjAxNS4xMDJ2LjEwNGMuMDI1LjI3LjIzMS40NjYuNTI3LjQ3MWgyLjQ5MWMtLjM2OC0uMDA1LS41OTctLjMwNy0uNTEyLS42NzciIGNsaXAtcnVsZT0iZXZlbm9kZCIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTcuMjU3IDguNjE1aC4wNDdjLjA0MyAwIC4wNzItLjAxNS4wODYtLjA0M2wuMTIyLS4xODJoLjMyNmwtLjA2OC4xMmguMzlsLS4wNDkuMTgzaC0uNDY1Yy0uMDU0LjA4LS4xMi4xMTktLjE5OS4xMTRoLS4yNDJsLjA1Mi0uMTkyem0tLjA1My4yNjNoLjg1NmwtLjA1NC4ySDcuNjZsLS4wNTIuMTkyaC4zMzVsLS4wNTUuMmgtLjMzNWwtLjA3OC4yODRjLS4wMTkuMDQ4LjAwNi4wNy4wNzYuMDY0aC4yNzNsLS4wNS4xODZINy4yNWMtLjEgMC0uMTM0LS4wNTctLjEwMi0uMTcxbC4xLS4zNjNoLS4yMTVsLjA1NC0uMmguMjE1bC4wNTItLjE5Mkg3LjE1bC4wNTUtLjJ6bTEuMzY3LS40OWwtLjAxNC4xMTdzLjE2Mi0uMTIxLjMwOS0uMTIxaC41NDJsLS4yMDcuNzVjLS4wMTguMDg2LS4wOTEuMTI5LS4yMjIuMTI5aC0uNjE0bC0uMTQ0LjUyN2MtLjAwOC4wMjguMDAzLjA0My4wMzQuMDQzaC4xMjFsLS4wNDQuMTYzaC0uMzA4Yy0uMTE4IDAtLjE2Ny0uMDM1LS4xNDctLjEwNmwuNDA3LTEuNTAyaC4yODd6bS40Ni4yMTJoLS40ODVsLS4wNTguMjAzcy4wOC0uMDU4LjIxNi0uMDZjLjEzNC0uMDAyLjI4NyAwIC4yODcgMGwuMDQtLjE0M3ptLS4xNzYuNDdjLjAzNi4wMDUuMDU2LS4wMDkuMDU4LS4wNDJsLjAzLS4xMDdoLS40ODVsLS4wNC4xNWguNDM3em0tLjMyNy4yNDNoLjI4bC0uMDA2LjEyaC4wNzRjLjAzOCAwIC4wNTctLjAxMS4wNTctLjAzNWwuMDIyLS4wNzhoLjIzMmwtLjAzMS4xMTRjLS4wMjYuMDk1LS4wOTYuMTQ1LS4yMDkuMTVoLS4xNDl2LjIwNmMtLjAwMy4wMzMuMDI3LjA1LjA4OC4wNWguMTRsLS4wNDUuMTY0aC0uMzM1Yy0uMDk0LjAwNC0uMTQtLjA0LS4xNC0uMTM2bC4wMjItLjU1NXpNNS4xNDIgNy4zODhhLjY4My42ODMgMCAwMS0uMjYyLjQzYy0uMTM1LjEtLjMwOS4xNS0uNTIyLjE1LS4yIDAtLjM0OC0uMDUyLS40NDItLjE1NGEuNC40IDAgMDEtLjA5Ny0uMjc3Ljc0Ljc0IDAgMDEuMDE2LS4xNDlsLjIyOC0xLjA5NWguMzQzbC0uMjI0IDEuMDgzYS4zNS4zNSAwIDAwLS4wMS4wODNjMCAuMDU1LjAxNC4xLjA0Mi4xMzYuMDQuMDUzLjEwNi4wNzkuMTk4LjA3OWEuNDE0LjQxNCAwIDAwLjI2LS4wNzguMzU4LjM1OCAwIDAwLjEzMi0uMjJsLjIyNC0xLjA4M2guMzQybC0uMjI4IDEuMDk1ek02LjU4MyA2Ljk1N2guMjY5bC0uMjEuOTc4aC0uMjY5bC4yMS0uOTc4em0uMDg1LS4zNTZoLjI3bC0uMDUuMjM3aC0uMjdsLjA1LS4yMzd6TTcuMDkgNy44NmEuMzYuMzYgMCAwMS0uMTA2LS4yNzIuNjM2LjYzNiAwIDAxLjAxNC0uMTM4LjY2My42NjMgMCAwMS4yMDQtLjM3OC41NDcuNTQ3IDAgMDEuMzc4LS4xNGMuMTIgMCAuMjE2LjAzMy4yODcuMS4wNy4wNjkuMTA1LjE2LjEwNS4yNzdhLjY2OC42NjggMCAwMS0uMDE2LjE0LjY0NS42NDUgMCAwMS0uMjAzLjM3My41NS41NSAwIDAxLS4zNzYuMTM4LjQuNCAwIDAxLS4yODctLjF6bS41MTItLjE5M2EuNDc3LjQ3NyAwIDAwLjEwMi0uMjMzLjU3Ny41NzcgMCAwMC4wMS0uMDk2LjE5OC4xOTggMCAwMC0uMDQ2LS4xNGMtLjAzMS0uMDM0LS4wNzUtLjA1LS4xMy0uMDVhLjIzNS4yMzUgMCAwMC0uMTgzLjA3OC40OTIuNDkyIDAgMDAtLjEwNC4yMzcuMzQ5LjM0OSAwIDAwLS4wMS4wOTNjMCAuMDYuMDE2LjEwNy4wNDcuMTQuMDMuMDMyLjA3NC4wNDguMTMxLjA0OGEuMjM2LjIzNiAwIDAwLjE4My0uMDc3TTkuNzE1IDguNjIzbC4wNjUtLjIyOGguMzI4bC0uMDE0LjA4NHMuMTY3LS4wODQuMjg4LS4wODRoLjQwNWwtLjA2NS4yMjhoLS4wNjNMMTAuMzUzIDkuN2guMDY0bC0uMDYxLjIxM2gtLjA2NGwtLjAyNi4wOTNoLS4zMTdsLjAyNi0uMDkzaC0uNjI2TDkuNDEgOS43aC4wNjNsLjMwNi0xLjA3NmgtLjA2NHptLjM1NCAwbC0uMDg0LjI5MXMuMTQzLS4wNTQuMjY2LS4wN2MuMDI3LS4xMDIuMDYzLS4yMi4wNjMtLjIyaC0uMjQ1em0tLjEyMi40MjhsLS4wODQuMzA1cy4xNTgtLjA3OC4yNjctLjA4NWMuMDMxLS4xMTguMDYyLS4yMi4wNjItLjIyaC0uMjQ1em0uMDYxLjY0OGwuMDYzLS4yMjFoLS4yNDVsLS4wNjMuMjJoLjI0NXpNMTAuOCA4LjM4aC4zMDhsLjAxMy4xMTRjLS4wMDIuMDI5LjAxNi4wNDIuMDUyLjA0MmguMDU0bC0uMDU1LjE5M2gtLjIyNmMtLjA4Ni4wMDQtLjEzLS4wMjktLjEzNS0uMWwtLjAxLS4yNDl6bS45MDguNDEzbC0uMDU5LjIwN2gtLjMxN2wtLjA1NS4xOTJoLjMxN2wtLjA1OC4yMDZoLS4zNTRsLS4wOC4xMjFoLjE3M2wuMDQuMjQzYy4wMDUuMDI0LjAyNi4wMzUuMDYzLjAzNWguMDUzbC0uMDU2LjJoLS4xOWMtLjA5OS4wMDUtLjE1LS4wMjgtLjE1NC0uMWwtLjA0Ni0uMjItLjE1Ny4yMzRhLjE3LjE3IDAgMDEtLjE3Mi4wOTNoLS4yOWwuMDU2LS4yaC4wOTFjLjAzNyAwIC4wNjgtLjAxNi4wOTYtLjA1bC4yNDctLjM1NmgtLjMxOGwuMDU5LS4yMDZoLjM0NGwuMDU1LS4xOTJoLS4zNDVsLjA2LS4yMDdoLjk5N3pNNS40NTggNi45NTdoLjI0M2wtLjAyOC4xNDEuMDM1LS4wNGEuMzc3LjM3NyAwIDAxLjI4Ni0uMTI2Yy4xMDIgMCAuMTc2LjAzLjIyMi4wOS4wNDYuMDU5LjA1OC4xNDEuMDM2LjI0N2wtLjEzMy42NjZoLS4yNWwuMTIxLS42MDRjLjAxMy0uMDYyLjAxLS4xMDktLjAxLS4xMzktLjAxOS0uMDMtLjA1NS0uMDQ0LS4xMDctLjA0NGEuMjMzLjIzMyAwIDAwLS4xNjIuMDYuMjk2LjI5NiAwIDAwLS4wODcuMTY1bC0uMTExLjU2MmgtLjI1bC4xOTUtLjk3OHpNOC4yMzcgNi45NTdoLjI0M2wtLjAyOC4xNDEuMDM1LS4wNGEuMzc4LjM3OCAwIDAxLjI4Ny0uMTI2Yy4xMDEgMCAuMTc1LjAzLjIyMS4wOS4wNDUuMDU5LjA1OC4xNDEuMDM2LjI0N2wtLjEzMy42NjZoLS4yNWwuMTIxLS42MDRjLjAxMy0uMDYyLjAxLS4xMDktLjAxLS4xMzktLjAyLS4wMy0uMDU1LS4wNDQtLjEwNy0uMDQ0YS4yMzUuMjM1IDAgMDAtLjE2Mi4wNi4yOTIuMjkyIDAgMDAtLjA4Ny4xNjVsLS4xMTIuNTYyaC0uMjQ5bC4xOTUtLjk3OE05LjQzNiA2LjM1aC43MDRjLjEzNiAwIC4yNC4wMzEuMzEzLjA5MS4wNzEuMDYxLjEwNy4xNDkuMTA3LjI2M3YuMDAzYS45NDQuOTQ0IDAgMDEtLjAwNC4wNzMgMS4wMzcgMS4wMzcgMCAwMS0uMDEzLjA4LjYwNi42MDYgMCAwMS0uNjEuNTAyaC0uMzc4bC0uMTE3LjU3M2gtLjMyN2wuMzI1LTEuNTg1em0uMTc2LjczN2guMzEzYS4zMDQuMzA0IDAgMDAuMTk0LS4wNTcuMjk2LjI5NiAwIDAwLjA5NS0uMTc0bC4wMDctLjA0LjAwMi0uMDM0YzAtLjA1Ni0uMDItLjA5Ni0uMDYtLjEyMmEuMzU3LjM1NyAwIDAwLS4xOS0uMDM4aC0uMjY1bC0uMDk2LjQ2NU0xMi4wMjMgOC4xMjRjLS4xMDMuMjItLjIwMi4zNDgtLjI2LjQwOC0uMDU3LjA1OS0uMTcyLjE5Ni0uNDQ4LjE4NmwuMDI0LS4xNjhjLjIzMi0uMDcyLjM1OC0uMzk1LjQzLS41MzhsLS4wODYtMS4wNTIuMTgtLjAwM2guMTVsLjAxNy42Ni4yODMtLjY2aC4yODZsLS41NzYgMS4xNjdNMTEuMjIzIDcuMDM3bC0uMTE0LjA3OGMtLjExOS0uMDkzLS4yMjctLjE1LS40MzctLjA1My0uMjg1LjEzMi0uNTIzIDEuMTQ2LjI2Mi44MTJsLjA0NS4wNTMuMzA5LjAwOC4yMDMtLjkyMi0uMjY4LjAyNHptLS4xNzYuNTA0Yy0uMDUuMTQ2LS4xNi4yNDMtLjI0Ny4yMTUtLjA4Ny0uMDI2LS4xMTgtLjE2OC0uMDY4LS4zMTQuMDUtLjE0Ny4xNjEtLjI0NC4yNDgtLjIxNi4wODYuMDI3LjExOC4xNjguMDY3LjMxNXoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPgo8L3N2Zz4K"},8306:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDE2IDE2Ij4KICA8cGF0aCBmaWxsPSIjZmZmIiBkPSJNMCAzLjVhMSAxIDAgMDExLTFoMTRhMSAxIDAgMDExIDF2OWExIDEgMCAwMS0xIDFIMWExIDEgMCAwMS0xLTF2LTl6Ii8+CiAgPHBhdGggZmlsbD0iI0VFRUZGMyIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTUgM0gxYS41LjUgMCAwMC0uNS41djlhLjUuNSAwIDAwLjUuNWgxNGEuNS41IDAgMDAuNS0uNXYtOUEuNS41IDAgMDAxNSAzek0xIDIuNWExIDEgMCAwMC0xIDF2OWExIDEgMCAwMDEgMWgxNGExIDEgMCAwMDEtMXYtOWExIDEgMCAwMC0xLTFIMXoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPgogIDxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMCkiPgogICAgPHBhdGggZmlsbD0iIzFBMUY3MSIgZD0iTTYuNTU2IDUuNTY4bC0xLjU3IDMuNzQ4SDMuOTZsLS43NzMtMi45OWMtLjA0Ny0uMTg1LS4wODgtLjI1Mi0uMjMtLjMzLS4yMzQtLjEyNy0uNjE5LS4yNDUtLjk1Ny0uMzE5bC4wMjMtLjEwOWgxLjY1Yy4yMSAwIC40LjE0LjQ0Ny4zODJsLjQwOSAyLjE3IDEuMDA4LTIuNTUyaDEuMDJ6bTEuMzg2IDBMNy4xNCA5LjMxNmgtLjk3bC44MDItMy43NDhoLjk3em0yLjYzIDIuNTI1Yy4wMDQtLjk5LTEuMzY3LTEuMDQ0LTEuMzU4LTEuNDg2LjAwMy0uMTM0LjEzLS4yNzcuNDExLS4zMTQuMTM5LS4wMTguNTIyLS4wMzIuOTU2LjE2OGwuMTctLjc5NWEyLjYxNCAyLjYxNCAwIDAwLS45MDctLjE2NmMtLjk1OCAwLTEuNjMzLjUxLTEuNjM4IDEuMjM5LS4wMDYuNTQuNDgyLjg0Ljg0OCAxLjAyLjM3OC4xODQuNTA1LjMwMi41MDMuNDY2LS4wMDIuMjUxLS4zMDEuMzYzLS41OC4zNjctLjQ4Ny4wMDctLjc3LS4xMzItLjk5NS0uMjM3bC0uMTc2LjgyMWMuMjI2LjEwNC42NDUuMTk1IDEuMDc4LjIgMS4wMTkgMCAxLjY4NS0uNTA0IDEuNjg4LTEuMjgzem0yLjUzMiAxLjIyM0gxNGwtLjc4My0zLjc0OGgtLjgyOGEuNDQxLjQ0MSAwIDAwLS40MTIuMjc1bC0xLjQ1NSAzLjQ3M2gxLjAxOGwuMjAyLS41NmgxLjI0NGwuMTE3LjU2ek0xMi4wMiA3Ljk5bC41MS0xLjQwOC4yOTQgMS40MDhoLS44MDR6bS0yLjgzOCAyLjM2aC0uMzk0di4zNjZoLjQ0di4xMWgtLjU3M1Y5LjgwOGguNTV2LjExSDguNzl2LjMyMWguMzk0di4xMXptLjI1LS41OTZoLjEzM3YxLjA3MmgtLjEzM1Y5Ljc1M3ptLjQ2OC43M2MuMDAzLjE4LjExNi4yNTUuMjUuMjU1YS40NzcuNDc3IDAgMDAuMjAzLS4wMzhsLjAyNC4wOTVhLjU5Ni41OTYgMCAwMS0uMjQ1LjA0N2MtLjIyNSAwLS4zNTktLjE1LS4zNTktLjM3cy4xMy0uMzkzLjM0My0uMzkzYy4yNCAwIC4zMDEuMjA5LjMwMS4zNDNhLjMxNi4zMTYgMCAwMS0uMDA0LjA2Mkg5Ljl6bS4zOS0uMDk0YzAtLjA4My0uMDM2LS4yMTQtLjE4NS0uMjE0LS4xMzYgMC0uMTkzLjEyMi0uMjA0LjIxNGguMzg4em0uODUuNDFhLjUxNC41MTQgMCAwMS0uMjEuMDQzYy0uMjIgMC0uMzYzLS4xNS0uMzYzLS4zNzMgMC0uMjI1LjE1NC0uMzkuMzkyLS4zOS4wNzkgMCAuMTQ4LjAyLjE4NC4wNGwtLjAzLjFhLjMyNS4zMjUgMCAwMC0uMTU0LS4wMzRjLS4xNjggMC0uMjU4LjEyNS0uMjU4LjI3NiAwIC4xNy4xMDkuMjc0LjI1NC4yNzRhLjM4LjM4IDAgMDAuMTYyLS4wMzVsLjAyMy4xem0uMzczLS44OHYuMTc2aC4xOXYuMWgtLjE5di4zOTVjMCAuMDkuMDI1LjE0Mi4xLjE0MmEuMjQ2LjI0NiAwIDAwLjA3Ni0uMDFsLjAwNi4xMDJhLjM2NC4zNjQgMCAwMS0uMTE3LjAxOC4xOS4xOSAwIDAxLS4xNDQtLjA1NmMtLjAzNi0uMDQtLjA1MS0uMTA2LS4wNTEtLjE5MnYtLjM5OGgtLjExM3YtLjEwMWguMTEzdi0uMTM2bC4xMy0uMDR6bS4zNzUuNDAzYzAtLjA4Ni0uMDAxLS4xNi0uMDA2LS4yMjdIMTJsLjAwNi4xNDRoLjAwNGMuMDMzLS4wOTguMTE1LS4xNi4yMDQtLjE2LjAxMyAwIC4wMjQuMDAyLjAzNi4wMDN2LjEyNmMtLjAxNC0uMDAzLS4wMjctLjAwMy0uMDQ1LS4wMDMtLjA5NCAwLS4xNi4wNy0uMTc4LjE2OWEuNDEyLjQxMiAwIDAwLS4wMDUuMDYydi4zOWgtLjEzM3YtLjUwNHptMS4xNzcuMTMyYzAgLjI3LS4xODguMzg4LS4zNjMuMzg4LS4xOTcgMC0uMzUtLjE0NS0uMzUtLjM3NiAwLS4yNDMuMTYxLS4zODYuMzYyLS4zODYuMjEgMCAuMzUxLjE1Mi4zNTEuMzc0em0tLjU3OC4wMDdjMCAuMTYuMDkuMjgxLjIyLjI4MS4xMjcgMCAuMjIzLS4xMi4yMjMtLjI4NCAwLS4xMjMtLjA2Mi0uMjc5LS4yMi0uMjc5LS4xNTUgMC0uMjIzLjE0NS0uMjIzLjI4MnptLjc4Mi0uMTY5YTIuNjUgMi42NSAwIDAwLS4wMDYtLjE5N2guMTE4bC4wMDcuMTJoLjAwM2EuMjcuMjcgMCAwMS4yNDItLjEzNmMuMSAwIC4yNTguMDYuMjU4LjMxMXYuNDM1aC0uMTMzdi0uNDIxYzAtLjExOC0uMDQ0LS4yMTYtLjE3LS4yMTZhLjE5Mi4xOTIgMCAwMC0uMTc3LjEzNi4xOS4xOSAwIDAwLS4wMS4wNjJ2LjQ0aC0uMTMydi0uNTM0eiIvPgogIDwvZz4KICA8ZGVmcz4KICAgIDxjbGlwUGF0aCBpZD0iY2xpcDAiPgogICAgICA8cGF0aCBmaWxsPSIjZmZmIiBkPSJNMCAwaDEydjUuMzQ0SDB6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyIDUuNSkiLz4KICAgIDwvY2xpcFBhdGg+CiAgPC9kZWZzPgo8L3N2Zz4K"},45742:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDE2IDE2Ij4KICA8cGF0aCBmaWxsPSIjZmZmIiBkPSJNMCAzLjVhMSAxIDAgMDExLTFoMTRhMSAxIDAgMDExIDF2OWExIDEgMCAwMS0xIDFIMWExIDEgMCAwMS0xLTF2LTl6Ii8+CiAgPHBhdGggZmlsbD0iI0VFRUZGMyIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTUgM0gxYS41LjUgMCAwMC0uNS41djlhLjUuNSAwIDAwLjUuNWgxNGEuNS41IDAgMDAuNS0uNXYtOUEuNS41IDAgMDAxNSAzek0xIDIuNWExIDEgMCAwMC0xIDF2OWExIDEgMCAwMDEgMWgxNGExIDEgMCAwMDEtMXYtOWExIDEgMCAwMC0xLTFIMXoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPgogIDxwYXRoIGZpbGw9IiMxODJFNjYiIGQ9Ik01LjI4MyA2LjEyNWwtLjkzNiAyLjU4Ny0uMTEtLjU1Ny0uMzMtMS42OTFzLS4wNC0uMzM5LS40NjctLjMzOUgxLjg5MmwtLjAxNy4wNjMuMDEyLjAwM2MuMDc5LjAyLjUyNi4xMzggMS4wMjYuNDdsLjg0MiAzLjIyNmgxLjAyM0w2LjM0IDYuMTI1SDUuMjgzek03LjA5MSA5Ljg4N2gtMS4wM2wuNjQ0LTMuNzYyaDEuMDNsLS42NDQgMy43NjJ6Ii8+CiAgPHBhdGggZmlsbD0iIzE4MkU2NiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTMuMTIxIDYuMTI1bC43NTQgMy43NjJoLTEuMTQzbC0uMTEtLjU1OWgtMS4xOTdsLS4xOTcuNTU5aC0uOThsMS40MDMtMy40ODJzLjA4NS0uMjguNDM0LS4yOGgxLjAzNnptLS44MDMgMS4xNTdsLS41MzYgMS40NDdoLjgzN2wtLjMwMS0xLjQ0N3oiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPgogIDxwYXRoIGZpbGw9IiMxODJFNjYiIGQ9Ik0xMC4zOTMgNy4wNjRsLjEzMy0uNzhzLS40MS0uMTU5LS44NC0uMTU5Yy0uNDYzIDAtMS41NjMuMjA1LTEuNTYzIDEuMjAzIDAgLjU0NS40MzQuNzc3LjguOTczLjI2NC4xNDEuNDkxLjI2NC40OTEuNDcgMCAuNDk0LTEuMTU4LjQwNS0xLjU0LjA5NWwtLjEzOS44MTVzLjQxNy4yMDYgMS4wNTQuMjA2IDEuNTk4LS4zMzUgMS41OTgtMS4yNDRjMC0uNTctLjQ3My0uODI4LS44NDktMS4wMzMtLjI0OC0uMTM2LS40NTMtLjI0OC0uNDUzLS40MTEgMC0uNDEuOTA5LS4zNTggMS4zMDgtLjEzNXoiLz4KPC9zdmc+Cg=="},60654:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNjgiIGhlaWdodD0iMTY2IiBmaWxsPSJub25lIiB2aWV3Qm94PSIwIDAgMTY4IDE2NiI+CiAgPGRlZnMvPgogIDxwYXRoIGZpbGw9IiNFQkVERjMiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTk5LjAzIDIySDM1LjZhNS42IDUuNiAwIDAwLTUuNiA1LjZ2MTI0LjhhNS42IDUuNiAwIDAwNS42IDUuNmg5Ny42YTUuNiA1LjYgMCAwMDUuNi01LjZWNjEuNzdMOTkuMDMgMjJ6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz4KICA8cGF0aCBmaWxsPSJ1cmwoI3BhaW50MF9saW5lYXIpIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik04My42OCA4Ny42N2E3LjQzIDcuNDMgMCAxMS0xNC44NiAwIDcuNDMgNy40MyAwIDAxMTQuODYgMHptLTYuMzMgMjQuNDJsMTQuMTctMTguNThhMi4yNiAyLjI2IDAgMDEzLjU4IDBsMTcuOTYgMjMuNTNjLjk2IDEuMjQuMDcgMy4xLTEuNTEgMy4xSDU2LjI5YTIuMiAyLjIgMCAwMS0xLjcyLTMuNThsMTEuMjktMTQuNDVhMi4yIDIuMiAwIDAxMy41IDBsNy44NSA5Ljk4Yy4wNy4wNy4xNC4wNy4xNCAweiIgY2xpcC1ydWxlPSJldmVub2RkIi8+CiAgPG1hc2sgaWQ9ImEiIHdpZHRoPSI2MiIgaGVpZ2h0PSI3OSIgeD0iMzAiIHk9IjIyIiBtYXNrVW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgIDxwYXRoIGZpbGw9IiNDNEM0QzQiIGQ9Ik05MSAyMkgzMHY3OC41N2g2MVYyMnoiLz4KICA8L21hc2s+CiAgPGcgZmlsdGVyPSJ1cmwoI2ZpbHRlcjBfZikiIG1hc2s9InVybCgjYSkiIG9wYWNpdHk9Ii4zIj4KICAgIDxwYXRoIGZpbGw9IiMyMjE1NDgiIGQ9Ik02Ny40LTEuMDhMMzAgMjJ2NTQuNTFsMTIuMjQtOC41NmE1OC45MyA1OC45MyAwIDAwMjUuMTUtNDguMjlWLTEuMDh6Ii8+CiAgPC9nPgogIDxwYXRoIGZpbGw9IiNGOEY4RjgiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTk5LjAzIDIybDM5Ljc3IDM5Ljc3aC0zNC4xN2E1LjYgNS42IDAgMDEtNS42LTUuNlYyMnoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPgogIDxwYXRoIGZpbGw9InVybCgjcGFpbnQxX2xpbmVhcikiIGQ9Ik02MCAzMGEzMCAzMCAwIDEwLTYwIDAgMzAgMzAgMCAwMDYwIDB6Ii8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgZD0iTTI3LjEgMTcuODlhMi45IDIuOSAwIDAxNS44IDBMMzIuOTggMzJhMi45OCAyLjk4IDAgMTEtNS45NiAwbC4wOC0xNC4xMXoiLz4KICA8Y2lyY2xlIGN4PSIzMCIgY3k9IjQyLjIiIHI9IjMiIGZpbGw9IiNmZmYiLz4KICA8ZGVmcz4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQwX2xpbmVhciIgeDE9IjgzLjc3IiB4Mj0iODMuNzciIHkxPSI4MC4yMyIgeTI9IjEyMC4xNCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjNUI2ODk4Ii8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzUwNTk2QSIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQxX2xpbmVhciIgeDE9IjMwIiB4Mj0iMzAiIHkxPSIzLjE2IiB5Mj0iNjMuNTUiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iI0ZGNzE3MSIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNFNjM3NTciLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8ZmlsdGVyIGlkPSJmaWx0ZXIwX2YiIHdpZHRoPSI3MC43OSIgaGVpZ2h0PSIxMTAuOTgiIHg9IjEzLjMiIHk9Ii0xNy43OCIgY29sb3ItaW50ZXJwb2xhdGlvbi1maWx0ZXJzPSJzUkdCIiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8ZmVGbG9vZCBmbG9vZC1vcGFjaXR5PSIwIiByZXN1bHQ9IkJhY2tncm91bmRJbWFnZUZpeCIvPgogICAgICA8ZmVCbGVuZCBpbj0iU291cmNlR3JhcGhpYyIgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIHJlc3VsdD0ic2hhcGUiLz4KICAgICAgPGZlR2F1c3NpYW5CbHVyIHJlc3VsdD0iZWZmZWN0MV9mb3JlZ3JvdW5kQmx1ciIgc3RkRGV2aWF0aW9uPSI4LjM1Ii8+CiAgICA8L2ZpbHRlcj4KICA8L2RlZnM+Cjwvc3ZnPgo="},72761:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMTAiIGhlaWdodD0iMTM2IiBmaWxsPSJub25lIiB2aWV3Qm94PSIwIDAgMTEwIDEzNiI+CiAgPGRlZnMvPgogIDxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMCkiPgogICAgPHBhdGggZmlsbD0iI0VCRURGMyIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNzAuMDMgMEg2LjZBNS42IDUuNiAwIDAwMSA1LjZ2MTI0LjhhNS42IDUuNiAwIDAwNS42IDUuNmg5Ny42YTUuNiA1LjYgMCAwMDUuNi01LjZWMzkuNzdMNzAuMDMgMHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPgogICAgPHBhdGggZmlsbD0idXJsKCNwYWludDBfbGluZWFyKSIgZD0iTTc4Ljc4IDc1LjZhMjguMDMgMjguMDMgMCAwMC01Ljk0LTcuM2wtMy4zMyAzLjQxYTIxLjgzIDIxLjgzIDAgMDE1LjE1IDYuMjJjLjUyLjkxLjUyIDIuMDIgMCAyLjkzQTIyLjY4IDIyLjY4IDAgMDE1NC45IDkyLjQyYy0xLjcgMC0zLjQtLjItNS4wNy0uNTlsLTMuNzYgMy44NGEyNy41NCAyNy41NCAwIDAwOC44MyAxLjQ3YzkuOSAwIDE5LjA1LTUuMzUgMjMuODgtMTMuOThhNy43OSA3Ljc5IDAgMDAwLTcuNTd6Ii8+CiAgICA8cGF0aCBmaWxsPSJ1cmwoI3BhaW50MV9saW5lYXIpIiBkPSJNNTQuODYgODkuNjVhMTAuMjYgMTAuMjYgMCAwMDkuODYtMTMuMDdMNTIuMjUgODkuMzRjLjgzLjIgMS43NC4zMSAyLjYxLjMxeiIvPgogICAgPHBhdGggZmlsbD0idXJsKCNwYWludDJfbGluZWFyKSIgZD0iTTc1LjE0IDU2LjRhMiAyIDAgMDAtMi44Mi4wM2wtNy4wOCA3LjI0YTI2Ljk0IDI2Ljk0IDAgMDAtMTAuMzgtMi4wNmMtOS45IDAtMTkuMDUgNS4zNS0yMy44OCAxMy45OGE3Ljc5IDcuNzkgMCAwMDAgNy41NyAyNy40OCAyNy40OCAwIDAwNy4xMyA4LjI0bC02LjY4IDYuODRhMiAyIDAgMDAuMDMgMi44M2wuNTUuNTNhMiAyIDAgMDAyLjgyLS4wM2w0MC44OS00MS44MWEyIDIgMCAwMC0uMDMtMi44M2wtLjU1LS41M3pNMzUuMSA4MC44NmEyLjk3IDIuOTcgMCAwMTAtMi45MyAyMi42OCAyMi42OCAwIDAxMTkuNzYtMTEuNTYgMjIuMyAyMi4zIDAgMDE2LjcgMS4wM0w1OS4wMiA3MGExMC40MiAxMC40MiAwIDAwLTQuMTYtLjg3IDEwLjI2IDEwLjI2IDAgMDAtOS4yNyAxNC42MUw0MS40NCA4OGEyMi45IDIyLjkgMCAwMS02LjM0LTcuMTN6Ii8+CiAgICA8cGF0aCBmaWxsPSIjRjhGOEY4IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03MC4wMyAwbDM5Ljc3IDM5Ljc3SDc1LjYzYTUuNiA1LjYgMCAwMS01LjYtNS42VjB6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz4KICA8L2c+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MF9saW5lYXIiIHgxPSI2Mi45MiIgeDI9IjYyLjkyIiB5MT0iNjguMzEiIHkyPSI5Ny4xNCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjNUI2ODk4Ii8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzQzNEI1QiIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQxX2xpbmVhciIgeDE9IjU4LjY4IiB4Mj0iNTguNjgiIHkxPSI3Ni41OCIgeTI9Ijg5LjY1IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiM1QjY4OTgiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjNDM0QjVCIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDJfbGluZWFyIiB4MT0iNTMuNTYiIHgyPSI1My41NiIgeTE9IjU1IiB5Mj0iMTAzIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiM1QjY4OTgiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjNDM0QjVCIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGNsaXBQYXRoIGlkPSJjbGlwMCI+CiAgICAgIDxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0wIDBoMTEwdjEzNkgweiIvPgogICAgPC9jbGlwUGF0aD4KICA8L2RlZnM+Cjwvc3ZnPgo="},23021:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDI0IDI0Ij4KICA8ZyBjbGlwLXBhdGg9InVybCgjY2xpcDApIj4KICAgIDxwYXRoIGZpbGw9InVybCgjcGFpbnQwX2xpbmVhcikiIGQ9Ik0xMyAyMEgzYTEgMSAwIDAxLTEtMVY3YTEgMSAwIDAxMS0xaDEwdjE0eiIvPgogICAgPHBhdGggZmlsbD0idXJsKCNwYWludDFfbGluZWFyKSIgZD0iTTEzIDIwaDhhMSAxIDAgMDAxLTFWN2ExIDEgMCAwMC0xLTFoLTh2MTR6Ii8+CiAgICA8cGF0aCBmaWxsPSIjRkZFM0JBIiBmaWxsLW9wYWNpdHk9Ii43IiBkPSJNMTkgN2gtM3YxM2gzVjd6Ii8+CiAgICA8cGF0aCBmaWxsPSIjRkZFM0JBIiBkPSJNOSA3SDZ2MTNoM1Y3eiIvPgogICAgPHBhdGggZmlsbD0idXJsKCNwYWludDJfbGluZWFyKSIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTcgMi41YTIuNSAyLjUgMCAwMC01IDBWNWgyLjVBMi41IDIuNSAwIDAwMTcgMi41em0tMSAwYTEuNSAxLjUgMCAwMC0zIDBWNGgxLjVBMS41IDEuNSAwIDAwMTYgMi41eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+CiAgICA8cGF0aCBmaWxsPSJ1cmwoI3BhaW50M19saW5lYXIpIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik04IDIuNWEyLjUgMi41IDAgMDE1IDBWNWgtMi41QTIuNSAyLjUgMCAwMTggMi41em0xIDBhMS41IDEuNSAwIDExMyAwVjRoLTEuNUExLjUgMS41IDAgMDE5IDIuNXoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPgogICAgPHBhdGggZmlsbD0idXJsKCNwYWludDRfbGluZWFyKSIgZD0iTTEgNGgxMnYzSDFWNHoiLz4KICAgIDxwYXRoIGZpbGw9InVybCgjcGFpbnQ1X2xpbmVhcikiIGQ9Ik0xMyA0aDEwdjNIMTNWNHoiLz4KICAgIDxwYXRoIGZpbGw9IiNGRkUzQkEiIGZpbGwtb3BhY2l0eT0iLjUiIGQ9Ik0xOSA0aC0zdjNoM1Y0ek05IDRINnYzaDNWNHoiLz4KICA8L2c+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MF9saW5lYXIiIHgxPSI5LjI3IiB4Mj0iMy4xNTkiIHkxPSI2LjExMSIgeTI9IjE5LjM2NyIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjRkZEMzkxIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI0ZGQTI2RCIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQxX2xpbmVhciIgeDE9IjIyLjA4NCIgeDI9IjkuNjExIiB5MT0iMjAiIHkyPSIxMC41NyIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjRkY3RTYyIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI0ZGQTI2RCIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQyX2xpbmVhciIgeDE9IjE1IiB4Mj0iMTUiIHkxPSIwIiB5Mj0iNSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjRkZCRjgzIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI0ZGOEY2OCIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQzX2xpbmVhciIgeDE9IjEwIiB4Mj0iMTAiIHkxPSIwIiB5Mj0iNSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjRkZCRjgzIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI0ZGOEY2OCIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQ0X2xpbmVhciIgeDE9IjciIHgyPSI3IiB5MT0iNCIgeTI9IjciIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iI0ZGQzg4OSIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNGRjk4NkEiLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50NV9saW5lYXIiIHgxPSIxOCIgeDI9IjE4IiB5MT0iNCIgeTI9IjciIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iI0ZGOTE2OCIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNGRjg0NjQiLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8Y2xpcFBhdGggaWQ9ImNsaXAwIj4KICAgICAgPHBhdGggZmlsbD0iI2ZmZiIgZD0iTTAgMGgyNHYyNEgweiIvPgogICAgPC9jbGlwUGF0aD4KICA8L2RlZnM+Cjwvc3ZnPgo="},19190:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjE4IiB2aWV3Qm94PSIwIDAgMTggMTgiIHdpZHRoPSIxOCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Im0xNy42NCA5LjIwNDU0NTQ1YzAtLjYzODE4MTgxLS4wNTcyNzI3LTEuMjUxODE4MTgtLjE2MzYzNjQtMS44NDA5MDkwOWgtOC40NzYzNjM2djMuNDgxMzYzNjRoNC44NDM2MzY0Yy0uMjA4NjM2NCAxLjEyNS0uODQyNzI3MyAyLjA3ODE4MTgtMS43OTU5MDkxIDIuNzE2MzYzNnYyLjI1ODE4MTloMi45MDg2MzYzYzEuNzAxODE4Mi0xLjU2NjgxODIgMi42ODM2MzY0LTMuODc0MDkxIDIuNjgzNjM2NC02LjYxNTAwMDA1eiIgZmlsbD0iIzQyODVmNCIvPjxwYXRoIGQ9Im05IDE4YzIuNDMgMCA0LjQ2NzI3MjctLjgwNTkwOTEgNS45NTYzNjM2LTIuMTgwNDU0NWwtMi45MDg2MzYzLTIuMjU4MTgxOWMtLjgwNTkwOTEuNTQtMS44MzY4MTgyLjg1OTA5MDktMy4wNDc3MjczLjg1OTA5MDktMi4zNDQwOTA5MSAwLTQuMzI4MTgxODItMS41ODMxODE4LTUuMDM1OTA5MDktMy43MTA0NTQ1aC0zLjAwNjgxODE4djIuMzMxODE4MmMxLjQ4MDkwOTA5IDIuOTQxMzYzNiA0LjUyNDU0NTQ1IDQuOTU4MTgxOCA4LjA0MjcyNzI3IDQuOTU4MTgxOHoiIGZpbGw9IiMzNGE4NTMiLz48cGF0aCBkPSJtMy45NjQwOTA5MSAxMC43MWMtLjE4LS41NC0uMjgyMjcyNzMtMS4xMTY4MTgxOC0uMjgyMjcyNzMtMS43MXMuMTAyMjcyNzMtMS4xNy4yODIyNzI3My0xLjcxdi0yLjMzMTgxODE4aC0zLjAwNjgxODE4Yy0uNjA5NTQ1NDYgMS4yMTUtLjk1NzI3MjczIDIuNTg5NTQ1NDUtLjk1NzI3MjczIDQuMDQxODE4MTggMCAxLjQ1MjI3MjcuMzQ3NzI3MjcgMi44MjY4MTgyLjk1NzI3MjczIDQuMDQxODE4MnoiIGZpbGw9IiNmYmJjMDUiLz48cGF0aCBkPSJtOSAzLjU3OTU0NTQ1YzEuMzIxMzYzNiAwIDIuNTA3NzI3My40NTQwOTA5MSAzLjQ0MDQ1NDUgMS4zNDU5MDkxbDIuNTgxMzYzNy0yLjU4MTM2MzY0Yy0xLjU1ODYzNjQtMS40NTIyNzI3My0zLjU5NTkwOTEtMi4zNDQwOTA5MS02LjAyMTgxODItMi4zNDQwOTA5MS0zLjUxODE4MTgyIDAtNi41NjE4MTgxOCAyLjAxNjgxODE4LTguMDQyNzI3MjcgNC45NTgxODE4MmwzLjAwNjgxODE4IDIuMzMxODE4MThjLjcwNzcyNzI3LTIuMTI3MjcyNzMgMi42OTE4MTgxOC0zLjcxMDQ1NDU1IDUuMDM1OTA5MDktMy43MTA0NTQ1NXoiIGZpbGw9IiNlYTQzMzUiLz48cGF0aCBkPSJtMCAwaDE4djE4aC0xOHoiLz48L2c+PC9zdmc+Cg=="},53630:function(e,t,n){"use strict";e.exports=n.p+"assets/bcda4e35c7807c029bdf.svg"},12375:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzODQiIGhlaWdodD0iMjE2IiBmaWxsPSJub25lIiB2aWV3Qm94PSIwIDAgMzg0IDIxNiI+CiAgPGRlZnMvPgogIDxwYXRoIGZpbGw9InVybCgjcGFpbnQwX2xpbmVhcikiIGQ9Ik0zMDMuNTQgNDUuMTRIODIuOTRBNS45NCA1Ljk0IDAgMDA3NyA1MS4wOFYxNTloMjMyLjQ4VjUxLjA4YTUuOTQgNS45NCAwIDAwLTUuOTQtNS45NHoiLz4KICA8cGF0aCBmaWxsPSIjMzgzRjRFIiBkPSJNOTEuNiA1OC4yNXMtNC4zLS4xNC01LjE4IDQuNzl2My4zNnMuMDMuMzYgMSAxLjA5Yy45OS43MyAzLjUxIDIuNzggNC4xOCAyLjc4LjY2IDAgMy4xOC0yLjA1IDQuMTYtMi43OHMxLjAxLTEuMSAxLjAxLTEuMXYtMy4zNWMtLjg4LTQuOTMtNS4xNy00Ljc5LTUuMTctNC43OXptMi45NCA2LjYyaC01Ljg5di0xLjgzYy42LTIuNDUgMi45NC0yLjQ4IDIuOTQtMi40OHMyLjM1LjAzIDIuOTQgMi40OHYxLjgzeiIvPgogIDxwYXRoIGZpbGw9IiMzODNGNEUiIGQ9Ik05MS42IDcxLjAzcy0uNjctLjA3LTEuMi0uNDRsLTMuOTgtMi45NXY1LjA5cy4wMy41OS42NS41OWg5LjA1Yy42MiAwIC42NS0uNi42NS0uNnYtNS4wOGwtMy45OSAyLjk1Yy0uNTIuMzctMS4xOC40NC0xLjE4LjQ0eiIvPgogIDxwYXRoIGZpbGw9IiMzOTQwNEYiIGQ9Ik0zMDkuNDQgODQuMkgxNjUuNTZhMy4xMiAzLjEyIDAgMDAtMy4xMiAzLjF2MTMuNGgxNDdWODQuMnoiLz4KICA8cGF0aCBmaWxsPSIjMzgzRjRFIiBkPSJNMjc2LjIyIDU5LjY4SDE2NC43OGEyLjM0IDIuMzQgMCAwMC0yLjM0IDIuMzR2OC4wN2EyLjM0IDIuMzQgMCAwMDIuMzQgMi4zM2gxMTEuNDRhMi4zNCAyLjM0IDAgMDAyLjM0LTIuMzN2LTguMDdhMi4zNCAyLjM0IDAgMDAtMi4zNC0yLjM0eiIvPgogIDxwYXRoIGZpbGw9IiNGNEY2RjkiIGQ9Ik0zMDkuNDQgMTAwLjdoLTE0N1YxNTloMTQ3di01OC4zeiIvPgogIDxwYXRoIGZpbGw9IiM2NTdFRTQiIGQ9Ik0xNDcuNTIgODQuMmgtNTkuOWEyLjM0IDIuMzQgMCAwMC0yLjM1IDIuMzN2OS43YTIuMzQgMi4zNCAwIDAwMi4zNCAyLjM0aDU5LjkxYTIuMzQgMi4zNCAwIDAwMi4zNC0yLjM0di05LjdhMi4zNCAyLjM0IDAgMDAtMi4zNC0yLjM0eiIvPgogIDxwYXRoIGZpbGw9IiM0NzUyNjkiIGQ9Ik0xMTMuNzggMTE0LjM5SDg2Ljg1Yy0uODYgMC0xLjU4LS42NC0xLjU4LTEuNDIgMC0uNzcuNzItMS40IDEuNTgtMS40aDI2LjkzYy44NiAwIDEuNTguNjMgMS41OCAxLjQgMCAuNzgtLjcyIDEuNDItMS41OCAxLjQyem0tMTAuNTkgMTEuNUg4Ni44NWMtLjg2IDAtMS41OC0uNjMtMS41OC0xLjQgMC0uNzguNzItMS40MiAxLjU4LTEuNDJoMTYuMzRjLjg2IDAgMS41Ny42NCAxLjU3IDEuNDIuMDQuNzctLjY3IDEuNC0xLjU3IDEuNHptNy44IDIzLjM5SDg2Ljg0Yy0uODYgMC0xLjU4LS42NC0xLjU4LTEuNDIgMC0uNzcuNzItMS40IDEuNTgtMS40aDI0LjEzYy44NiAwIDEuNTguNjMgMS41OCAxLjQuMDMuNzgtLjY4IDEuNDItMS41OCAxLjQyeiIvPgogIDxwYXRoIGZpbGw9IiNGNEY2RjkiIGQ9Ik0yNzEuMTkgMTEzLjQ1aC03Ni43NGMtLjg2IDAtMS41Ny0uNjQtMS41Ny0xLjQxIDAtLjc4LjcxLTEuNDIgMS41Ny0xLjQyaDc2Ljc0Yy44NiAwIDEuNTcuNjQgMS41NyAxLjQyLjA0Ljc3LS42NyAxLjQxLTEuNTcgMS40MXptLTU1Ljk0IDguNzZoLTIwLjhjLS44NiAwLTEuNTctLjY0LTEuNTctMS40MSAwLS43Ny43MS0xLjQxIDEuNTctMS40MWgyMC44Yy44NiAwIDEuNTguNjQgMS41OCAxLjQuMDMuODItLjY4IDEuNDItMS41OCAxLjQyeiIvPgogIDxwYXRoIGZpbGw9IiM0NzUyNjkiIGQ9Ik0xMTYuNzggMTM3LjU5SDg2Ljg1Yy0uODYgMC0xLjU4LS42NC0xLjU4LTEuNDIgMC0uNzcuNzItMS40IDEuNTgtMS40aDI5LjkzYy44NiAwIDEuNTguNjMgMS41OCAxLjQgMCAuNzgtLjcyIDEuNDItMS41OCAxLjQyeiIvPgogIDxwYXRoIGZpbGw9IiMzODNGNEUiIGQ9Ik0yOTcuODUgNzMuMTJhNy4wNiA3LjA2IDAgMTAtNy4wNi03LjA2YzAgMy45IDMuMTYgNy4wNiA3LjA2IDcuMDZ6Ii8+CiAgPHBhdGggZmlsbD0iIzFGMjIyQSIgZD0iTTI5Ny41NCA2NS41YTEuNDUgMS40NSAwIDEwMC0yLjkgMS40NSAxLjQ1IDAgMDAwIDIuOXptLTIuMDMgNC4wOGMtLjg2IDAtMS40NC0uOTQtMS4wMy0xLjY4YTMuNDggMy40OCAwIDAxMy4wMy0xLjhjMS4yOCAwIDIuNDQuNzEgMy4wMiAxLjguNDIuNzQtLjE2IDEuNjgtMS4wMyAxLjY4aC0zLjk5eiIvPgogIDxwYXRoIGZpbGw9IiNGNEY2RjkiIGQ9Ik0xODIuOTkgMTA5LjAyaC04LjkzYTMuMTIgMy4xMiAwIDAwLTMuMTIgMy4xMXY4LjkzYTMuMTIgMy4xMiAwIDAwMy4xMiAzLjEyaDguOTNhMy4xMiAzLjEyIDAgMDAzLjExLTMuMTJ2LTguOTNhMy4xMiAzLjEyIDAgMDAtMy4xMS0zLjExem02OS4zNyAzMGgtNTcuOWMtLjg3IDAtMS41OC0uNjQtMS41OC0xLjQxIDAtLjc3LjcxLTEuNDEgMS41Ny0xLjQxaDU3LjljLjg3IDAgMS41OC42NCAxLjU4IDEuNDEuMDQuNzctLjY3IDEuNDEtMS41NyAxLjQxem0xOS4zOSA4Ljc2aC03Ny4zYy0uODYgMC0xLjU3LS42NC0xLjU3LTEuNCAwLS43OC43MS0xLjQyIDEuNTctMS40Mmg3Ny4zYy44NiAwIDEuNTcuNjQgMS41NyAxLjQxLjA0Ljc3LS42NyAxLjQxLTEuNTcgMS40MXptLTg4Ljc2LTEzLjIzaC04LjkzYTMuMTIgMy4xMiAwIDAwLTMuMTIgMy4xMnY4LjkzYTMuMTIgMy4xMiAwIDAwMy4xMiAzLjExaDguOTNhMy4xMiAzLjEyIDAgMDAzLjExLTMuMTF2LTguOTNhMy4xMiAzLjEyIDAgMDAtMy4xMS0zLjEyeiIvPgogIDxnIGZpbHRlcj0idXJsKCNmaWx0ZXIwX2QpIiBvcGFjaXR5PSIuMjMiPgogICAgPGNpcmNsZSBjeD0iMTQxLjI5IiBjeT0iNjUuNSIgcj0iNTUuNSIgZmlsbD0iIzFEN0VGMSIvPgogIDwvZz4KICA8Y2lyY2xlIGN4PSIxNDEuMjkiIGN5PSI2NC41IiByPSIyOS41IiBmaWxsPSJ1cmwoI3BhaW50MV9saW5lYXIpIiBmaWxsLW9wYWNpdHk9Ii41Ii8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgZD0iTTEzMy45IDU3LjYxaDMuMjZ2My4yN2gtMy4yN3YtMy4yN3ptNi41NCAwaDMuMjd2My4yN2gtMy4yN3YtMy4yN3ptOS44MiAwaC0zLjI4djMuMjdoMy4yOHYtMy4yN3ptLTE2LjM3IDEzLjFoMy4yN3YzLjI3aC0zLjI3VjcwLjd6bTkuODIgMGgtMy4yN3YzLjI3aDMuMjdWNzAuN3ptMy4yNyAwaDMuMjh2My4yN2gtMy4yOFY3MC43em0tOS44Mi02LjU1aC0zLjI3djMuMjdoMy4yN3YtMy4yN3ptMy4yOCAwaDMuMjd2My4yN2gtMy4yN3YtMy4yN3ptOS44MiAwaC0zLjI4djMuMjdoMy4yOHYtMy4yN3oiLz4KICA8ZyBmaWxsPSIjOUNBMEFBIj4KICAgIDxwYXRoIGQ9Ik0xMDkuNyAxODFzLTYuMzgtLjItNy43IDYuODd2NC44MnMuMDYuNTIgMS41IDEuNTdjMS40NiAxLjA1IDUuMjIgNCA2LjIgNHM0Ljc0LTIuOTUgNi4yLTRjMS40NC0xLjA1IDEuNS0xLjU3IDEuNS0xLjU3di00LjgyYy0xLjMyLTcuMDgtNy43LTYuODctNy43LTYuODd6bTQuMzcgOS41aC04Ljc0di0yLjYzYy44OS0zLjUxIDQuMzctMy41NiA0LjM3LTMuNTZzMy40OC4wNSA0LjM3IDMuNTZ2Mi42M3oiLz4KICAgIDxwYXRoIGQ9Ik0xMDkuNyAxOTkuMzVzLS45OS0uMS0xLjc2LS42NGMtLjc4LS41NC01Ljk0LTQuMjItNS45NC00LjIydjcuM3MuMDQuODUuOTguODVoMTMuNDRjLjk0IDAgLjk4LS44NS45OC0uODV2LTcuM3MtNS4xNiAzLjY4LTUuOTQgNC4yMmMtLjc3LjU0LTEuNzYuNjQtMS43Ni42NHoiLz4KICA8L2c+CiAgPHBhdGggZmlsbD0iIzlDQTBBQSIgZD0iTTE3NC42NiAxODMuNTdhMi41NyAyLjU3IDAgMDAtLjc1LTEuODIgMi41NiAyLjU2IDAgMDAtMy42NCAwIDIuNTcgMi41NyAwIDAwLS43NSAxLjgydi4wOGwtMTEuMTcgMy41NmEyLjU4IDIuNTggMCAwMC00LjI2LjAzIDIuNTMgMi41MyAwIDAwLS4zNyAxLjljLjA2LjMyLjE5LjYzLjM3LjlsLjAyLjA0YTIuNTYgMi41NiAwIDAwMi4xOCAxLjFjLjI2IDAgLjUzLS4wNC43OC0uMTNsNy4zNCA5LjE3YTIuNTMgMi41MyAwIDAwMS4zMyAzLjMzaC4wMmEyLjU3IDIuNTcgMCAwMDMuMzYtMS4zM2MuMjEtLjUuMjYtMS4wNS4xMy0xLjU4YTIuNTIgMi41MiAwIDAwLS44Mi0xLjM0bDMuOS0xMy4yYTIuNTQgMi41NCAwIDAwMi4zMS0yLjU0aC4wMnptLTcuOTQgMTUuMDZhMi42IDIuNiAwIDAwLTEuMTMuMjhsLTcuMTctOC45OGEyLjUyIDIuNTIgMCAwMC4zNi0xLjA2bDExLjQxLTMuNi40LjM1LTMuODYgMTN2LjAxek0yMjQuOCAxODUuNjRoLS4xN2E1LjY1IDUuNjUgMCAwMC0xMC42NS4yNSA0LjY4IDQuNjggMCAwMC4zNyA5LjM1aDMuMzZ2LTIuMjFoLTIuNDZsNC4zOC00LjM4IDQuMzggNC4zOGgtMi41M3YyLjJoLTMuNzN2Mi4yMWgtMi41NGw0LjM4IDQuMzggNC4zOC00LjM4aC0yLjQ2di0yLjJoMy41YTQuOCA0LjggMCAwMDQuNTgtNC45IDQuOCA0LjggMCAwMC00LjgtNC43eiIvPgogIDxnIGZpbGw9IiM5Q0EwQUEiPgogICAgPHBhdGggZD0iTTI4MC44MyAxODMuNjJoLTEuMjR2LS40NGExLjE3IDEuMTcgMCAwMC0yLjM1IDB2LjQ0aC01Ljc5di0uNDRhMS4xNiAxLjE2IDAgMDAtLjMyLS44MiAxLjE1IDEuMTUgMCAwMC0uODEtLjM2aC0uMDRhMS4xIDEuMSAwIDAwLS43OS4yNSAxLjA3IDEuMDcgMCAwMC0uMzguOTN2LjQ0aC0xLjE3YTIuMyAyLjMgMCAwMC0yLjI3IDIuMzJ2MTMuMTNhMi4zNiAyLjM2IDAgMDAyLjM0IDIuMzVoMTIuODJhMi4zNyAyLjM3IDAgMDAyLjM0LTIuMzVWMTg1LjlhMi41NiAyLjU2IDAgMDAtMi4zNC0yLjI3em0uNjYgMTUuMzhhLjY2LjY2IDAgMDEtLjY1LjY2aC0xMi45YS42NS42NSAwIDAxLS42Ni0uNjV2LTExLjE0aDE0LjJsLjAxIDExLjEzeiIvPgogICAgPHBhdGggZD0iTTI3MSAxOTYuMWEyLjAxIDIuMDEgMCAwMS0xLjUtLjc1bC0uOTIuOTFhMy4wMyAzLjAzIDAgMDAyLjU4IDEuMDljMS44NCAwIDIuODQtMSAyLjg0LTIuMjV2LS4wOGExLjcyIDEuNzIgMCAwMC0xLjY3LTEuNzYgMS43IDEuNyAwIDAwMS40Mi0xLjc1YzAtMS0uOTItMS45Mi0yLjQyLTEuODNhMy40IDMuNCAwIDAwLTIuNSAxbC44My45MWExLjkyIDEuOTIgMCAwMTEuNDItLjY2Yy41OCAwIDEgLjMzIDEgLjgzIDAgLjY3LS40MiAxLTEuMDggMWgtLjQybC0uMTcgMS4xN2guNTljLjc1IDAgMS4xNi4zMyAxLjE2IDEuMDhhMS4wOCAxLjA4IDAgMDEtMS4xNiAxLjA5em02LjUgMS4zM2MxLjg0IDAgMi44NC0xLjQyIDIuODQtMy45MnMtMS0zLjgzLTIuODQtMy44My0yLjgzIDEuMzMtMi44MyAzLjgzIDEgMy45MiAyLjgzIDMuOTJ6bS4wOC02LjVjLjY3IDAgMSAuNTggMSAyLjU4cy0uMjUgMi41OS0xIDIuNTljLS42NiAwLTEtLjU5LTEtMi41OXMuMjUtMi41OCAxLTIuNTh6Ii8+CiAgPC9nPgogIDxkZWZzPgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDBfbGluZWFyIiB4MT0iMTk5LjgzIiB4Mj0iMTk5LjgzIiB5MT0iNDUuMTQiIHkyPSIxNTkiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iIzEzMTUxQSIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMzOTQwNTAiLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MV9saW5lYXIiIHgxPSIxMzQuNjgiIHgyPSIxNDEuMjkiIHkxPSI0NS45OSIgeTI9Ijk0IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiM2RkIxRkYiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjNUFCMEZGIiBzdG9wLW9wYWNpdHk9Ii40NCIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxmaWx0ZXIgaWQ9ImZpbHRlcjBfZCIgd2lkdGg9IjEzOSIgaGVpZ2h0PSIxMzkiIHg9IjcxLjc5IiB5PSI3IiBjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnM9InNSR0IiIGZpbHRlclVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgICAgIDxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+CiAgICAgIDxmZUNvbG9yTWF0cml4IGluPSJTb3VyY2VBbHBoYSIgdmFsdWVzPSIwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAxMjcgMCIvPgogICAgICA8ZmVPZmZzZXQgZHk9IjExIi8+CiAgICAgIDxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjciLz4KICAgICAgPGZlQ29sb3JNYXRyaXggdmFsdWVzPSIwIDAgMCAwIDAuMDg2Mjc0NSAwIDAgMCAwIDAuMDk4MDM5MiAwIDAgMCAwIDAuMTE3NjQ3IDAgMCAwIDEgMCIvPgogICAgICA8ZmVCbGVuZCBpbjI9IkJhY2tncm91bmRJbWFnZUZpeCIgcmVzdWx0PSJlZmZlY3QxX2Ryb3BTaGFkb3ciLz4KICAgICAgPGZlQmxlbmQgaW49IlNvdXJjZUdyYXBoaWMiIGluMj0iZWZmZWN0MV9kcm9wU2hhZG93IiByZXN1bHQ9InNoYXBlIi8+CiAgICA8L2ZpbHRlcj4KICA8L2RlZnM+Cjwvc3ZnPgo="},22011:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzODQiIGhlaWdodD0iMjE2IiBmaWxsPSJub25lIiB2aWV3Qm94PSIwIDAgMzg0IDIxNiI+CiAgPGRlZnMvPgogIDxwYXRoIGZpbGw9InVybCgjcGFpbnQwX2xpbmVhcikiIGQ9Ik0xOTIgMTkyYTgwIDgwIDAgMTAwLTE2MCA4MCA4MCAwIDAwMCAxNjB6Ii8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgZD0iTTIxNC43IDk5LjA1aC00NC43M2E2LjU5IDYuNTkgMCAwMC02LjU5IDYuNTh2NTYuMTVhNi41OSA2LjU5IDAgMDA2LjU5IDYuNTloNDQuNzNhNi41OSA2LjU5IDAgMDA2LjU5LTYuNTl2LTU2LjE1YTYuNTkgNi41OSAwIDAwLTYuNTktNi41OHoiLz4KICA8cGF0aCBmaWxsPSIjNzA5MkIwIiBkPSJNMTg4LjMgMTQ1Ljg4SDE3NnYxLjY1aDEyLjN2LTEuNjV6bTE5LjQgMGgtMTcuMXYxLjY1aDE3LjF2LTEuNjV6bS04LjY2IDYuNjRoLTE0LjU3djEuNjRoMTQuNTd2LTEuNjR6bS02LjU0LTEyLjQ3YTE0LjA2IDE0LjA2IDAgMTAwLTI4LjEyIDE0LjA2IDE0LjA2IDAgMDAwIDI4LjEyeiIvPgogIDxwYXRoIGZpbGw9IiNERkVBRjQiIGQ9Ik0xOTIuNSAxMjguNzRhNS4zNiA1LjM2IDAgMTAwLTEwLjcyIDUuMzYgNS4zNiAwIDAwMCAxMC43MnptMCAxMS4zMWMzLjk1IDAgNy41LTEuNiAxMC4wNC00LjIyLTIuMzQtMi45OC01Ljk1LTQuODUtMTAuMDQtNC44NXMtNy43IDEuOS0xMC4wNCA0Ljg1YTE0LjA4IDE0LjA4IDAgMDAxMC4wNCA0LjIyeiIvPgogIDxwYXRoIGZpbGw9IiM3ODhERkYiIGQ9Ik0xOTguNiAxMDUuNDFoLTEyLjI2YS45NC45NCAwIDAxLS45My0uOTRjMC0uNTEuNDItLjk0LjkzLS45NGgxMi4yNmMuNTEgMCAuOTMuNDMuOTMuOTRhLjk0Ljk0IDAgMDEtLjkzLjk0eiIvPgogIDxwYXRoIGZpbGw9IiMzNTM1NTgiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTIwMy4yMSAzMi43OGwtMTcuOCA2Ni4zM2gxNS43M2wxNi44Mi02Mi44YTc5LjUgNzkuNSAwIDAwLTE0Ljc1LTMuNTN6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz4KICA8cGF0aCBmaWxsPSJ1cmwoI3BhaW50MV9saW5lYXIpIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNjYuOTYgMzZsMTYuOSA2My4xMWgxNS43M2wtMTcuODMtNjYuNDZhNzkuNTMgNzkuNTMgMCAwMC0xNC44IDMuMzV6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz4KICA8cGF0aCBmaWxsPSIjMzUzNTU4IiBkPSJNMjM4Ljc0IDkyLjUzYTQuMzggNC4zOCAwIDEwMC04Ljc3IDQuMzggNC4zOCAwIDAwMCA4Ljc3eiIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0xNTMuNDUgMTE0LjM3bC01LjktMi4xNy0yLjctMS4wMS0xLjAxLTIuNzEtMi4xNy01LjktMi4xOCA1LjktMSAyLjcxLTIuNzIgMS01Ljg5IDIuMTggNS45IDIuMTggMi43IDEgMSAyLjcxIDIuMTkgNS45IDIuMTctNS45IDEtMi43MSAyLjcyLTEgNS44OS0yLjE4eiIvPgogIDxkZWZzPgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDBfbGluZWFyIiB4MT0iMTkyIiB4Mj0iMTkyIiB5MT0iMzIiIHkyPSIxOTIiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iI0RGRUFGNCIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNFMkRGRjQiLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MV9saW5lYXIiIHgxPSIxNzAuODIiIHgyPSIxOTAuMTIiIHkxPSIyNCIgeTI9IjEwOC4yNCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjQTVGRkZGIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzcyODBGRiIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICA8L2RlZnM+Cjwvc3ZnPgo="},42763:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNzgiIGhlaWdodD0iMTk0IiBmaWxsPSJub25lIiB2aWV3Qm94PSIwIDAgMjc4IDE5NCI+CiAgPGRlZnMvPgogIDxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMCkiPgogICAgPHBhdGggZmlsbD0idXJsKCNwYWludDBfbGluZWFyKSIgZD0iTTI0Mi4wNiAzNUgyMS45NEE1Ljk0IDUuOTQgMCAwMDE2IDQwLjk0VjE5NGgyMzJWNDAuOTRhNS45NCA1Ljk0IDAgMDAtNS45NC01Ljk0eiIvPgogICAgPHBhdGggZmlsbD0iIzM4M0Y0RSIgZD0iTTMwLjYgNDguMjVzLTQuMy0uMTQtNS4xOCA0Ljc5djMuMzZzLjAzLjM2IDEgMS4wOWMuOTguNzMgMy41MSAyLjc4IDQuMTcgMi43OC42NyAwIDMuMi0yLjA1IDQuMTctMi43OC45OC0uNzMgMS4wMS0xLjEgMS4wMS0xLjF2LTMuMzVjLS44OC00LjkzLTUuMTgtNC43OS01LjE4LTQuNzl6bTIuOTMgNi42MmgtNS44OHYtMS44M2MuNi0yLjQ1IDIuOTQtMi40OCAyLjk0LTIuNDhzMi4zNS4wMyAyLjk0IDIuNDh2MS44M3oiLz4KICAgIDxwYXRoIGZpbGw9IiMzODNGNEUiIGQ9Ik0zMC42IDYxLjAzcy0uNjctLjA3LTEuMi0uNDRsLTMuOTgtMi45NXY1LjA5cy4wMy41OS42NS41OWg5LjA0Yy42MyAwIC42Ni0uNi42Ni0uNnYtNS4wOGwtMy45OSAyLjk1Yy0uNTIuMzctMS4xOS40NC0xLjE5LjQ0eiIvPgogICAgPHBhdGggZmlsbD0iIzM5NDA0RiIgZD0iTTI0OCA3NEgxMDQuMTJhMy4xNiAzLjE2IDAgMDAtMy4xMiAzLjIxVjkxaDE0N1Y3NHoiLz4KICAgIDxwYXRoIGZpbGw9IiMzODNGNEUiIGQ9Ik0xNzMuOTQgNTBoLTcwLjg4Yy0xLjE0IDAtMi4wNiAxLjA1LTIuMDYgMi4zNHY3LjMyYzAgMS4zLjkyIDIuMzQgMi4wNiAyLjM0aDcwLjg4YzEuMTQgMCAyLjA2LTEuMDUgMi4wNi0yLjM0di03LjMyYzAtMS4zLS45Mi0yLjM0LTIuMDYtMi4zNHoiLz4KICAgIDxwYXRoIGZpbGw9IiNGNEY2RjkiIGQ9Ik0yNDggOTFIMTAxdjEwM2gxNDdWOTF6Ii8+CiAgICA8cGF0aCBmaWxsPSIjNjU3RUU0IiBkPSJNODYuNTIgNzQuMmgtNTkuOWEyLjM0IDIuMzQgMCAwMC0yLjM1IDIuMzN2OS43YTIuMzQgMi4zNCAwIDAwMi4zNCAyLjM0aDU5LjkxYTIuMzQgMi4zNCAwIDAwMi4zNC0yLjM0di05LjdhMi4zNCAyLjM0IDAgMDAtMi4zNC0yLjM0eiIvPgogICAgPHBhdGggZmlsbD0iIzQ3NTI2OSIgZD0iTTUyLjc4IDEwNC4zOUgyNS44NWMtLjg3IDAtMS41OC0uNjQtMS41OC0xLjQyIDAtLjc3LjcyLTEuNCAxLjU4LTEuNGgyNi45M2MuODYgMCAxLjU4LjYzIDEuNTggMS40IDAgLjc4LS43MiAxLjQyLTEuNTggMS40MnptLTEwLjU5IDExLjVIMjUuODVjLS44NyAwLTEuNTgtLjYzLTEuNTgtMS40IDAtLjc4LjcyLTEuNDIgMS41OC0xLjQyaDE2LjM0Yy44NiAwIDEuNTcuNjQgMS41NyAxLjQyLjA0Ljc3LS42NyAxLjQtMS41NyAxLjR6bTcuOCAyMy4zOUgyNS44NGMtLjg3IDAtMS41OC0uNjQtMS41OC0xLjQyIDAtLjc3LjcyLTEuNCAxLjU4LTEuNGgyNC4xM2MuODYgMCAxLjU4LjYzIDEuNTggMS40LjAzLjc4LS42OCAxLjQyLTEuNTggMS40MnoiLz4KICAgIDxwYXRoIGZpbGw9IiNGNEY2RjkiIGQ9Ik0yMTAuMTkgMTAzLjQ1aC03Ni43NGMtLjg2IDAtMS41Ny0uNjQtMS41Ny0xLjQxIDAtLjc4LjcxLTEuNDIgMS41Ny0xLjQyaDc2Ljc0Yy44NiAwIDEuNTcuNjQgMS41NyAxLjQyLjA0Ljc3LS42NyAxLjQxLTEuNTcgMS40MXptLTU1Ljk0IDguNzZoLTIwLjhjLS44NiAwLTEuNTctLjY0LTEuNTctMS40MSAwLS43Ny43MS0xLjQxIDEuNTctMS40MWgyMC44Yy44NiAwIDEuNTguNjQgMS41OCAxLjQuMDMuODItLjY4IDEuNDItMS41OCAxLjQyeiIvPgogICAgPHBhdGggZmlsbD0iIzQ3NTI2OSIgZD0iTTU1Ljc4IDEyNy41OUgyNS44NWMtLjg3IDAtMS41OC0uNjQtMS41OC0xLjQyIDAtLjc3LjcyLTEuNCAxLjU4LTEuNGgyOS45M2MuODYgMCAxLjU4LjYzIDEuNTggMS40IDAgLjc4LS43MiAxLjQyLTEuNTggMS40MnptLTYuMDcgMzQuOTNIMjUuNTdjLS44NiAwLTEuNTctLjY0LTEuNTctMS40MiAwLS43Ny43MS0xLjQgMS41Ny0xLjRoMjQuMTRjLjg2IDAgMS41Ny42MyAxLjU3IDEuNC4wNC43OC0uNjcgMS40Mi0xLjU3IDEuNDJ6bTUuOC0xMS43SDI1LjU3Yy0uODYgMC0xLjU3LS42My0xLjU3LTEuNCAwLS43OC43MS0xLjQyIDEuNTctMS40MmgyOS45NGMuODYgMCAxLjU3LjY0IDEuNTcgMS40MSAwIC43OC0uNzEgMS40MS0xLjU3IDEuNDF6bS01LjggMzQuN0gyNS41N2MtLjg2IDAtMS41Ny0uNjQtMS41Ny0xLjQyIDAtLjc3LjcxLTEuNCAxLjU3LTEuNGgyNC4xNGMuODYgMCAxLjU3LjYzIDEuNTcgMS40LjA0Ljc4LS42NyAxLjQyLTEuNTcgMS40MnptNS44LTExLjdIMjUuNTdjLS44NiAwLTEuNTctLjYzLTEuNTctMS40IDAtLjc4LjcxLTEuNDIgMS41Ny0xLjQyaDI5Ljk0Yy44NiAwIDEuNTcuNjQgMS41NyAxLjQxIDAgLjc4LS43MSAxLjQxLTEuNTcgMS40MXoiLz4KICAgIDxwYXRoIGZpbGw9IiMzODNGNEUiIGQ9Ik0yMzcuMDYgNjMuMTJhNy4wNiA3LjA2IDAgMTAtNy4wNi03LjA2YzAgMy45IDMuMTYgNy4wNiA3LjA2IDcuMDZ6Ii8+CiAgICA8cGF0aCBmaWxsPSIjMUYyMjJBIiBkPSJNMjM3LjIgNTUuNWExLjQ1IDEuNDUgMCAxMDAtMi45IDEuNDUgMS40NSAwIDAwMCAyLjl6bS0yLjAzIDQuMDhjLS44NyAwLTEuNDUtLjk0LTEuMDMtMS42N2EzLjQ4IDMuNDggMCAwMTMuMDItMS44YzEuMjkgMCAyLjQ0LjcgMy4wMiAxLjguNDIuNzQtLjE2IDEuNjctMS4wMyAxLjY3aC0zLjk4eiIvPgogICAgPHBhdGggZmlsbD0iI0Y0RjZGOSIgZD0iTTEyMS45OSA5OS4wMmgtOC45M2EzLjEyIDMuMTIgMCAwMC0zLjEyIDMuMTF2OC45M2EzLjEyIDMuMTIgMCAwMDMuMTIgMy4xMmg4LjkzYTMuMTIgMy4xMiAwIDAwMy4xMS0zLjEydi04LjkzYTMuMTIgMy4xMiAwIDAwLTMuMTEtMy4xMXptNjkuMzcgMzBoLTU3LjljLS44NyAwLTEuNTgtLjY0LTEuNTgtMS40MSAwLS43Ny43MS0xLjQxIDEuNTctMS40MWg1Ny45Yy44NyAwIDEuNTguNjQgMS41OCAxLjQxLjA0Ljc3LS42NyAxLjQxLTEuNTcgMS40MXptMTkuMzkgOC43NmgtNzcuM2MtLjg2IDAtMS41Ny0uNjQtMS41Ny0xLjQgMC0uNzguNzEtMS40MiAxLjU3LTEuNDJoNzcuM2MuODYgMCAxLjU3LjY0IDEuNTcgMS40MS4wNC43Ny0uNjcgMS40MS0xLjU3IDEuNDF6bS04OC43Ni0xMy4yM2gtOC45M2EzLjEyIDMuMTIgMCAwMC0zLjEyIDMuMTJ2OC45M2EzLjEyIDMuMTIgMCAwMDMuMTIgMy4xMWg4LjkzYTMuMTIgMy4xMiAwIDAwMy4xMS0zLjExdi04LjkzYTMuMTIgMy4xMiAwIDAwLTMuMTEtMy4xMnoiLz4KICAgIDxyZWN0IHdpZHRoPSI0MSIgaGVpZ2h0PSI1IiB4PSIzOSIgeT0iNTEiIGZpbGw9IiMzODNGNEUiIHJ4PSIyIi8+CiAgICA8cmVjdCB3aWR0aD0iMzIiIGhlaWdodD0iMyIgeD0iMzkiIHk9IjU5IiBmaWxsPSIjMzgzRjRFIiByeD0iMS41Ii8+CiAgICA8ZyBmaWx0ZXI9InVybCgjZmlsdGVyMF9kKSIgb3BhY2l0eT0iLjIzIj4KICAgICAgPGNpcmNsZSBjeD0iMjA5LjUiIGN5PSI1NS41IiByPSI1NS41IiBmaWxsPSIjMUQ3RUYxIi8+CiAgICA8L2c+CiAgICA8Y2lyY2xlIGN4PSIyMDkuNSIgY3k9IjU1LjUiIHI9IjI5LjUiIGZpbGw9InVybCgjcGFpbnQxX2xpbmVhcikiIGZpbGwtb3BhY2l0eT0iLjUiLz4KICAgIDxwYXRoIGZpbGw9IiNmZmYiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTIwNy44IDQ0aDQuNDJsLjkzIDIuOTVjLjM1LjEzLjcuMjcgMS4wNC40NGwyLjc0LTEuNDMgMy4xMyAzLjEzLTEuNDMgMi43NGMuMTcuMzQuMzEuNjkuNDQgMS4wNWwyLjkzLjkzdjQuNDJsLTIuOTUuOTFjLS4xMi4zNi0uMjcuNy0uNDMgMS4wNGwxLjQyIDIuNzQtMy4xMyAzLjE0LTIuNzQtMS40M2E5Ljk4IDkuOTggMCAwMS0xLjA0LjQ0TDIxMi4yIDY4aC00LjQxbC0uOTMtMi45M2E5LjkgOS45IDAgMDEtMS4wNS0uNDRsLTIuNzQgMS40My0zLjEzLTMuMTQgMS40My0yLjc0YTkuODMgOS44MyAwIDAxLS40NC0xLjA0TDE5OCA1OC4ydi00LjQybDIuOTMtLjkzYy4xMy0uMzYuMjctLjcuNDQtMS4wNGwtMS40My0yLjc1IDMuMTUtMy4xMyAyLjc0IDEuNDNhOS45OCA5Ljk4IDAgMDExLjA0LS40NGwuOTMtMi45M3ptMS4yNSAxLjcxbC0uODIgMi42LS40My4xMmE4LjI5IDguMjkgMCAwMC0xLjU3LjY2bC0uNC4yMi0yLjQyLTEuMjYtMS4zNiAxLjM1IDEuMjUgMi40Mi0uMjEuNGE4LjIzIDguMjMgMCAwMC0uNjYgMS41N2wtLjEzLjQ0LTIuNTkuODJ2MS45bDIuNi44Mi4xMi40NGMuMTYuNTQuMzggMS4wNi42NiAxLjU3bC4yMS40LTEuMjYgMi40MiAxLjM2IDEuMzUgMi40Mi0xLjI2LjQuMjJhOC4zIDguMyAwIDAwMS41Ny42NmwuNDMuMTMuODIgMi41OWgxLjlsLjgzLTIuNi40My0uMTJhOC4yOSA4LjI5IDAgMDAxLjU3LS42NmwuNC0uMjIgMi40MiAxLjI2IDEuMzUtMS4zNS0xLjI2LTIuNDIuMjItLjRhOC4yOSA4LjI5IDAgMDAuNjUtMS41N2wuMTMtLjQ0IDIuNi0uOHYtMS45MWwtMi41OC0uODItLjEzLS40M2E4LjIyIDguMjIgMCAwMC0uNjYtMS41N2wtLjIxLS40IDEuMjYtMi40Mi0xLjM2LTEuMzYtMi40MiAxLjI2LS40LS4yMmE4LjMgOC4zIDAgMDAtMS41Ny0uNjVsLS40My0uMTMtLjgyLTIuNmgtMS45em0uOTQgNi41NGEzLjc1IDMuNzUgMCAwMC0zLjc0IDMuNzUgMy43NSAzLjc1IDAgMTA3LjUgMCAzLjc1IDMuNzUgMCAwMC0zLjc2LTMuNzV6TTIwNC41MyA1NmE1LjQ2IDUuNDYgMCAwMTUuNDYtNS40NiA1LjQ2IDUuNDYgMCAwMTUuNDcgNS40NiA1LjQ2IDUuNDYgMCAwMS01LjQ3IDUuNDYgNS40NiA1LjQ2IDAgMDEtNS40Ni01LjQ2eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+CiAgPC9nPgogIDxkZWZzPgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDBfbGluZWFyIiB4MT0iMTM4LjU3IiB4Mj0iMTM4LjU3IiB5MT0iMzUiIHkyPSIxOTQiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iIzEzMTUxQSIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMzOTQwNTAiLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MV9saW5lYXIiIHgxPSIyMDIuODkiIHgyPSIyMDkuNSIgeTE9IjM2Ljk5IiB5Mj0iODUiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iIzZGQjFGRiIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiM1QUIwRkYiIHN0b3Atb3BhY2l0eT0iLjQ0Ii8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGNsaXBQYXRoIGlkPSJjbGlwMCI+CiAgICAgIDxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0wIDBoMjc4djE5NEgweiIvPgogICAgPC9jbGlwUGF0aD4KICAgIDxmaWx0ZXIgaWQ9ImZpbHRlcjBfZCIgd2lkdGg9IjEzOSIgaGVpZ2h0PSIxMzkiIHg9IjE0MCIgeT0iLTMiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiIgZmlsdGVyVW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPGZlRmxvb2QgZmxvb2Qtb3BhY2l0eT0iMCIgcmVzdWx0PSJCYWNrZ3JvdW5kSW1hZ2VGaXgiLz4KICAgICAgPGZlQ29sb3JNYXRyaXggaW49IlNvdXJjZUFscGhhIiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDEyNyAwIi8+CiAgICAgIDxmZU9mZnNldCBkeT0iMTEiLz4KICAgICAgPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iNyIvPgogICAgICA8ZmVDb2xvck1hdHJpeCB2YWx1ZXM9IjAgMCAwIDAgMC4wODYyNzQ1IDAgMCAwIDAgMC4wOTgwMzkyIDAgMCAwIDAgMC4xMTc2NDcgMCAwIDAgMSAwIi8+CiAgICAgIDxmZUJsZW5kIGluMj0iQmFja2dyb3VuZEltYWdlRml4IiByZXN1bHQ9ImVmZmVjdDFfZHJvcFNoYWRvdyIvPgogICAgICA8ZmVCbGVuZCBpbj0iU291cmNlR3JhcGhpYyIgaW4yPSJlZmZlY3QxX2Ryb3BTaGFkb3ciIHJlc3VsdD0ic2hhcGUiLz4KICAgIDwvZmlsdGVyPgogIDwvZGVmcz4KPC9zdmc+Cg=="},1247:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzODQiIGhlaWdodD0iMjE2IiBmaWxsPSJub25lIiB2aWV3Qm94PSIwIDAgMzg0IDIxNiI+CiAgPGRlZnMvPgogIDxwYXRoIGZpbGw9IiMzODM4NUYiIGQ9Ik0zNDQuNTggMTcwLjQzYS44OS44OSAwIDAxMS42LjAzbDYuNDUgMTMuOUgzMzcuM2w3LjI3LTEzLjkzeiIvPgogIDxwYXRoIGZpbGw9IiM1QUQwOTgiIGQ9Ik0yNDAuMSAxNzAuNDNhLjg5Ljg5IDAgMDExLjYuMDNsNi40NSAxMy45aC0xNS4zMWw3LjI3LTEzLjkzem0xMTcuMjMuNTJhLjg5Ljg5IDAgMDExLjYuNTN2MTIuODhoLTExLjdsMTAuMS0xMy40MXoiLz4KICA8cGF0aCBmaWxsPSJ1cmwoI3BhaW50MF9saW5lYXIpIiBkPSJNMjcyLjUgMTI4LjEzSDExOS43MWEyLjc0IDIuNzQgMCAwMS0yLjcyLTIuNzVWOTguNzVjMC0xLjUgMS4yMy0yLjc1IDIuNzItMi43NWgxNTIuNzVjMS41MSAwIDIuNzIgMS4yNCAyLjcyIDIuNzV2MjYuNjNhMi43MSAyLjcxIDAgMDEtMi43IDIuNzV6IiBvcGFjaXR5PSIuMyIvPgogIDxwYXRoIGZpbGw9IiNFQTc5NUEiIGQ9Ik0zMTYuNzMgMTEzLjdoLTE1LjV2NzAuMTFoMTUuNVYxMTMuN3oiLz4KICA8cGF0aCBmaWxsPSJ1cmwoI3BhaW50MV9saW5lYXIpIiBkPSJNMzE2LjczIDE1NS42MmwtMTUuNS04LjM4di0yOS4wMWgxNS41djM3LjR6Ii8+CiAgPHBhdGggZmlsbD0idXJsKCNwYWludDJfbGluZWFyKSIgZD0iTTM1OS4wNyAxMjcuNDFoLTk3Ljc1YTIuODMgMi44MyAwIDAxLTIuODMtMi44M1Y5Ni45NGEyMi44MSAyMi44MSAwIDAxMjIuODEtMjIuODJoNTQuOUEyMi44MSAyMi44MSAwIDAxMzU5IDk2Ljk0djMwLjQ3aC4wNnoiLz4KICA8cGF0aCBmaWxsPSJ1cmwoI3BhaW50M19saW5lYXIpIiBkPSJNMzAxLjIyIDEyNy40MWgtMzkuNjlWOTYuODhhMTkuODQgMTkuODQgMCAwMTM5LjY2IDB2MzAuNTNoLjAzeiIvPgogIDxwYXRoIGZpbGw9InVybCgjcGFpbnQ0X2xpbmVhcikiIGQ9Ik0zMDEuMDQgMTI3LjA4aC0zOS42OVY5Ni41NWExOS44NCAxOS44NCAwIDAxMzkuNjYgMHYzMC41M2guMDN6Ii8+CiAgPHBhdGggZmlsbD0idXJsKCNwYWludDVfbGluZWFyKSIgZD0iTTI4Mi4xMyAxMjcuOGgtNDIuNzdhMi43NCAyLjc0IDAgMDEtMi43Mi0yLjc2Vjk4LjQxYzAtMS41IDEuMjMtMi43NSAyLjcyLTIuNzVoNDIuNzVjMS41MSAwIDIuNzIgMS4yNCAyLjcyIDIuNzV2MjYuNjNhMi43MSAyLjcxIDAgMDEtMi43IDIuNzV6Ii8+CiAgPHBhdGggZmlsbD0idXJsKCNwYWludDZfbGluZWFyKSIgZD0iTTI1OC45OCAxMTQuMTZhMi43NiAyLjc2IDAgMDAzLjUgMGwyMS41OS0xNy43OGEyLjc1IDIuNzUgMCAwMC0xLjg2LS43MmgtNDIuOTVjLS43MiAwLTEuMzcuMjgtMS44Ni43MmwyMS41OCAxNy43OHoiLz4KICA8cGF0aCBmaWxsPSJ1cmwoI3BhaW50N19saW5lYXIpIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0zMjAuNDggNjcuODNoMTcuMDZjLjk2IDAgMS43My0uNzcgMS43My0xLjczVjUzLjczYzAtLjk1LS43Ny0xLjczLTEuNzMtMS43M2gtMjEuNTNhMS43MyAxLjczIDAgMDAtMS43MyAxLjczdjQ4LjA3YTMuMTIgMy4xMiAwIDAwMy4xIDMuMSAzLjEgMy4xIDAgMDAzLjEtMy4xVjY3LjgzeiIgY2xpcC1ydWxlPSJldmVub2RkIi8+CiAgPHBhdGggZmlsbD0idXJsKCNwYWludDhfbGluZWFyKSIgZD0iTTMwMS4yMiAxMjcuNDFoLTMuODV2MS43M2gtMzUuODRsLTkuODcgNy4xcy0yLjUzIDEuODUtMy4yOCA0LjQ0bC0uMi0uMjR2MS42N2MwIDEuMjkuNTMgMi43MiAyIDQuMTIgNC42NCAzLjk0IDIxLjYxIDUuMTMgMzQuMTYtNC4zMiAxMi41My05LjQ2IDE2Ljg4LTEyLjggMTYuODgtMTIuOHYtMS43eiIvPgogIDxwYXRoIGZpbGw9IiNCOEUyRkYiIGQ9Ik0yNjEuNTMgMTI3LjQxbC05Ljg3IDcuMXMtNi43NCA0Ljk1LTEuNDkgMTAuMDJjNC42NSAzLjkzIDIxLjYyIDUuMTMgMzQuMTctNC4zMiAxMi41Ni05LjQ2IDE2Ljg4LTEyLjggMTYuODgtMTIuOGgtMzkuNjl6Ii8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgZD0iTTMxNy4zOCAxMDMuMzVhMS40NiAxLjQ2IDAgMTAwLTIuOTIgMS40NiAxLjQ2IDAgMDAwIDIuOTJ6Ii8+CiAgPGcgb3BhY2l0eT0iLjciPgogICAgPHBhdGggZmlsbD0iIzZENkQ2RCIgZD0iTTQyLjU2IDE3MC40M2EuODkuODkgMCAwMTEuNi4wM2w2LjQ0IDEzLjlIMzUuMjlsNy4yNy0xMy45M3oiLz4KICAgIDxwYXRoIGZpbGw9IiNFMUUxRTEiIGQ9Ik0zMi4xMSAxNzAuNDNhLjg5Ljg5IDAgMDExLjYuMDNsNi40NCAxMy45SDI0Ljg0bDcuMjctMTMuOTN6bTExMC4xNi41MmEuODkuODkgMCAwMTEuNi41M3YxMi44OGgtMTEuN2wxMC4xLTEzLjQxem0tNjcuNS01Ny4yNUg5MC4zdjcwLjExSDc0Ljc3VjExMy43eiIvPgogICAgPHBhdGggZmlsbD0idXJsKCNwYWludDlfbGluZWFyKSIgZD0iTTc0Ljc4IDE1NS42MmwxNS41LTguMzh2LTI5LjAxaC0xNS41djM3LjR6Ii8+CiAgICA8cGF0aCBmaWxsPSJ1cmwoI3BhaW50MTBfbGluZWFyKSIgZD0iTTMyIDEyNy4yOWg5Ny43NWEyLjgzIDIuODMgMCAwMDIuODMtMi44NFY5Ni44MUEyMi44MSAyMi44MSAwIDAwMTA5Ljc3IDc0aC01NC45YTIyLjgxIDIyLjgxIDAgMDAtMjIuODEgMjIuODF2MzAuNDhIMzJ6Ii8+CiAgICA8cGF0aCBmaWxsPSJ1cmwoI3BhaW50MTFfbGluZWFyKSIgZD0iTTkwLjQ2IDEyNy4wOGgzOS43Vjk2LjU1YTE5Ljg0IDE5Ljg0IDAgMDAtMzkuNjcgMHYzMC41M2gtLjAzeiIvPgogICAgPHBhdGggZmlsbD0idXJsKCNwYWludDEyX2xpbmVhcikiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTQwLjY3IDEwNC43NHYxNy4wNmExLjczIDEuNzMgMCAwMS0xLjczIDEuNzNIMjYuNTdhMS43MyAxLjczIDAgMDEtMS43My0xLjczdi0yMS41M2MwLS45NS43Ny0xLjczIDEuNzMtMS43M2g0OC4wN2MxLjcgMCAzLjEgMS40IDMuMSAzLjFhMy4xIDMuMSAwIDAxLTMuMSAzLjFINDAuNjd6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz4KICAgIDxwYXRoIGZpbGw9InVybCgjcGFpbnQxM19saW5lYXIpIiBkPSJNOTAuMjggMTI3LjQxaDMuODV2MS43M2gzNS44NGw5Ljg3IDcuMXMyLjU0IDEuODUgMy4yOCA0LjQ0bC4yMS0uMjR2MS42N2MwIDEuMjgtLjUzIDIuNzItMiA0LjEyLTQuNjUgMy45My0yMS42MSA1LjEzLTM0LjE3LTQuMzNhMzE5MS42NSAzMTkxLjY1IDAgMDEtMTYuODctMTIuNzl2LTEuN3oiLz4KICAgIDxwYXRoIGZpbGw9IiNFMUUxRTEiIGQ9Ik0xMjkuOTcgMTI3LjQxbDkuODcgNy4xczYuNzQgNC45NSAxLjUgMTAuMDJjLTQuNjYgMy45My0yMS42MiA1LjEzLTM0LjE4LTQuMzJhMjA3MC42MyAyMDcwLjYzIDAgMDEtMTYuODgtMTIuOGgzOS43eiIvPgogICAgPHBhdGggZmlsbD0iI2ZmZiIgZD0iTTc0LjEyIDEwMy4zNWExLjQ2IDEuNDYgMCAxMTAtMi45MyAxLjQ2IDEuNDYgMCAwMTAgMi45M3oiLz4KICA8L2c+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MF9saW5lYXIiIHgxPSIxMzEiIHgyPSIyNzUiIHkxPSIxMTIiIHkyPSIxMTIiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iI0JFQkVCRSIgc3RvcC1vcGFjaXR5PSIwIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI0JFQkVCRSIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQxX2xpbmVhciIgeDE9IjMwOC45IiB4Mj0iMzA4LjkiIHkxPSIxMjcuNjgiIHkyPSIxNDQuNzgiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iIzBEMEE0NCIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMwRDBBNDQiIHN0b3Atb3BhY2l0eT0iMCIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQyX2xpbmVhciIgeDE9IjMwOC43OCIgeDI9IjMwOC43OCIgeTE9Ijc0LjEzIiB5Mj0iMTI3LjQxIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiNCOUUyRkYiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjNzNCNUU0Ii8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDNfbGluZWFyIiB4MT0iMjk0Ljc5IiB4Mj0iMjYxLjg3IiB5MT0iOTIuNjIiIHkyPSIxMjcuMjUiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iIzBEMEE0NCIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMwRDBBNDQiIHN0b3Atb3BhY2l0eT0iMCIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQ0X2xpbmVhciIgeDE9IjI5NC42MSIgeDI9IjI2MS42OSIgeTE9IjkyLjI4IiB5Mj0iMTI2LjkyIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiMwRDBBNDQiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjMEQwQTQ0IiBzdG9wLW9wYWNpdHk9IjAiLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50NV9saW5lYXIiIHgxPSIyNjAuNzMiIHgyPSIyNjAuNzMiIHkxPSI5NS42NiIgeTI9IjEyMC45MSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjQzFERUY4Ii8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI0VDRkFGRiIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQ2X2xpbmVhciIgeDE9IjI2MC43NCIgeDI9IjI2MC43NCIgeTE9Ijg3LjYzIiB5Mj0iMTA5LjgxIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiNERUVCRjciLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjZmZmIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDdfbGluZWFyIiB4MT0iMzI2Ljc4IiB4Mj0iMzI2Ljc4IiB5MT0iNTIiIHkyPSIxMDQuOSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjRUI3QTc1Ii8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI0UwMjYyNiIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQ4X2xpbmVhciIgeDE9IjI2MC4xNiIgeDI9IjI4Ni4yNCIgeTE9IjEyOC41MyIgeTI9IjE0Ny4zNSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjQjlFMkZGIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzE1NzFCMyIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQ5X2xpbmVhciIgeDE9IjgyLjYxIiB4Mj0iODIuNjEiIHkxPSIxMjcuNjgiIHkyPSIxNDQuNzgiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iIzZENkQ2RCIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiM2RDZENkQiIHN0b3Atb3BhY2l0eT0iMCIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQxMF9saW5lYXIiIHgxPSI4Mi4yOSIgeDI9IjgyLjI5IiB5MT0iODYuMzgiIHkyPSIxMjcuMjkiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iI0UxRTFFMSIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNCRUJFQkUiLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MTFfbGluZWFyIiB4MT0iOTYuODkiIHgyPSIxMjkuODEiIHkxPSI5Mi4yOCIgeTI9IjEyNi45MiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjMUYxRjFGIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzZENkQ2RCIgc3RvcC1vcGFjaXR5PSIwIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDEyX2xpbmVhciIgeDE9IjI3LjUiIHgyPSI0OCIgeTE9IjkwLjUiIHkyPSIxMjAuNSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjREZERkRGIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iLjk3IiBzdG9wLWNvbG9yPSIjOUU5RTlFIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDEzX2xpbmVhciIgeDE9IjEzMS4zNSIgeDI9IjEwNS4yNyIgeTE9IjEyOC41MyIgeTI9IjE0Ny4zNCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjRTlFOUU5Ii8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI0E1QTVBNSIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICA8L2RlZnM+Cjwvc3ZnPgo="},47054:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzODQiIGhlaWdodD0iMjE2IiBmaWxsPSJub25lIiB2aWV3Qm94PSIwIDAgMzg0IDIxNiI+CiAgPGRlZnMvPgogIDxwYXRoIGZpbGw9IiNFQTc5NUEiIGQ9Ik0yMDUuMDMgMTE1LjkxaC0xNi43OHY3NS44N2gxNi43OFYxMTUuOXoiLz4KICA8cGF0aCBmaWxsPSJ1cmwoI3BhaW50MF9saW5lYXIpIiBkPSJNMjA1LjAzIDE2MS4yOGwtMTYuNzgtOS4wN3YtMzEuNGgxNi43OHY0MC40N3oiLz4KICA8cGF0aCBmaWxsPSJ1cmwoI3BhaW50MV9saW5lYXIpIiBkPSJNMjYxLjYyIDEzMi43MWgtMTIwLjlhMy40IDMuNCAwIDAxLTMuNC0zLjRWOTYuMDdhMjcuNDMgMjcuNDMgMCAwMTI3LjQzLTI3LjQzaDY5LjM2YTI3LjQzIDI3LjQzIDAgMDEyNy40MyAyNy40M3YzNi42NGguMDh6Ii8+CiAgPHBhdGggZmlsbD0idXJsKCNwYWludDJfbGluZWFyKSIgZD0iTTE4OC40OCAxMzIuMzFoLTQ3LjcyVjk1LjZhMjMuODYgMjMuODYgMCAwMTQ3LjY5IDB2MzYuNzFoLjAzeiIvPgogIDxwYXRoIGZpbGw9InVybCgjcGFpbnQzX2xpbmVhcikiIGQ9Ik0xNjUuNzQgMTMzLjE3aC01MS40M2EzLjMgMy4zIDAgMDEtMy4yNy0zLjNWOTcuODRhMy4zIDMuMyAwIDAxMy4yNy0zLjNoNTEuNDFhMy4zIDMuMyAwIDAxMy4yNyAzLjN2MzIuMDJhMy4yNiAzLjI2IDAgMDEtMy4yNSAzLjN6Ii8+CiAgPHBhdGggZmlsbD0idXJsKCNwYWludDRfbGluZWFyKSIgZD0iTTEzNy45IDExNi43OGEzLjMyIDMuMzIgMCAwMDQuMjEgMGwyNS45Ny0yMS4zOGEzLjMgMy4zIDAgMDAtMi4yMy0uODZoLTUxLjY2Yy0uODUgMC0xLjY0LjMzLTIuMjIuODZsMjUuOTQgMjEuMzh6Ii8+CiAgPHBhdGggZmlsbD0idXJsKCNwYWludDVfbGluZWFyKSIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMjE0LjkxIDU5LjA0aDIwLjUxYzEuMTUgMCAyLjA4LS45MyAyLjA4LTIuMDhWNDIuMDhjMC0xLjE1LS45My0yLjA4LTIuMDgtMi4wOGgtMjUuODhjLTEuMTUgMC0yLjA4LjkzLTIuMDggMi4wOHY1OS44M2EzLjc1IDMuNzUgMCAwMDMuNzIgMy43MyAzLjczIDMuNzMgMCAwMDMuNzMtMy43M1Y1OS4wNHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPgogIDxwYXRoIGZpbGw9InVybCgjcGFpbnQ2X2xpbmVhcikiIGQ9Ik0xODguNyAxMzIuNzFoLTQuNjN2Mi4wOGgtNDMuMWwtMTEuODYgOC41NHMtMy4wNSAyLjIyLTMuOTUgNS4zNGwtLjI1LS4yOXYyYzAgMS41NS42NSAzLjI3IDIuNCA0Ljk2IDUuNiA0LjczIDI2IDYuMTcgNDEuMS01LjIgMTUuMDUtMTEuMzcgMjAuMjktMTUuMzggMjAuMjktMTUuMzh2LTIuMDV6Ii8+CiAgPHBhdGggZmlsbD0iI0I4RTJGRiIgZD0iTTE0MC45OCAxMzIuNzFsLTExLjg3IDguNTRzLTguMSA1Ljk1LTEuOCAxMi4wNGM1LjYgNC43NCAyNiA2LjE3IDQxLjEtNS4yIDE1LjEtMTEuMzYgMjAuMy0xNS4zOCAyMC4zLTE1LjM4aC00Ny43M3oiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBkPSJNMjExLjE5IDEwMy43OGExLjc2IDEuNzYgMCAxMDAtMy41MiAxLjc2IDEuNzYgMCAwMDAgMy41MnoiLz4KICA8cGF0aCBmaWxsPSIjMzgzODVGIiBkPSJNMjQ5LjcgMTc4LjM2YS45Ni45NiAwIDAxMS43My4wNGw2LjMxIDEzLjZIMjQyLjZsNy4xMi0xMy42NHoiLz4KICA8cGF0aCBmaWxsPSIjNUFEMDk4IiBkPSJNMTMxLjMzIDE3OC4zNmEuOTYuOTYgMCAwMTEuNzMuMDRsNi4zIDEzLjZoLTE1LjE1bDcuMTItMTMuNjR6bTEzMC45Mi41NmEuOTYuOTYgMCAwMTEuNzMuNThWMTkySDI1Mi40bDkuODYtMTMuMDh6Ii8+CiAgPHBhdGggZmlsbD0iI0NFRDJFMiIgZD0iTTczLjM5IDE1NC43N2E0LjM4IDQuMzggMCAxMDAtOC43NyA0LjM4IDQuMzggMCAwMDAgOC43N3pNMzE1IDgwbC01LjUtOS01LjUgOWgxMXoiIG9wYWNpdHk9Ii40NSIvPgogIDxwYXRoIGZpbGw9InVybCgjcGFpbnQ3X2xpbmVhcikiIGQ9Ik03NyA2MmEyNiAyNiAwIDExNTIgMHYyNmgtMjZhMjYgMjYgMCAwMS0yNi0yNnoiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xMTIuMjYgNTEuMjZhNy4yMiA3LjIyIDAgMDAtOS4xIDEuMDZsLTExIDExYTQuOTEgNC45MSAwIDAwLTEuNDggMy44NiA1IDUgMCAwMDIgMy42MiA0LjggNC44IDAgMDAyLjg2Ljk0IDUuNTEgNS41MSAwIDAwMy44My0xLjYybDkuNTEtOS41MWEyLjkyIDIuOTIgMCAwMC00LjEyLTQuMTRsLTYuMzQgNi4zNCAxLjI1IDEuMjUgNi4zMi02LjM0YTEuMTYgMS4xNiAwIDAxMS42NCAxLjY0bC05LjQ5IDkuNWEzLjUyIDMuNTIgMCAwMS00LjQuNTMgMy4yMiAzLjIyIDAgMDEtLjM1LTQuODJsMTEtMTFhNS40NyA1LjQ3IDAgMDE2Ljg3LS44NSA1LjI4IDUuMjggMCAwMTIuMyAzLjg2IDUuMjkgNS4yOSAwIDAxLTEuNTEgNC4xN2wtOS4zIDkuMjYgMS4yNCAxLjI1IDkuMjctOS4yNmE3LjA0IDcuMDQgMCAwMC0xLTEwLjc0eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+CiAgPHBhdGggZmlsbD0idXJsKCNwYWludDhfbGluZWFyKSIgZD0iTTI3MyAxMzVhMjYgMjYgMCAxMTUyIDAgMjYgMjYgMCAwMS01MiAweiIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTMwNS4zMyAxMjcuMjV2Mi42NmgyLjZjLjg4IDAgMS42NC43MSAxLjY0IDEuNjR2MTMuODhjMCAuOS0uNzIgMS42NC0xLjY0IDEuNjRoLTE3LjVhMS42NCAxLjY0IDAgMDEtMS42NC0xLjY0di0xMy44OGMwLS45LjcxLTEuNjQgMS42My0xLjY0aDIuNTZ2LTIuNjZhNi4xNyA2LjE3IDAgMDE2LjE4LTYuMTggNi4xNyA2LjE3IDAgMDE2LjE3IDYuMTh6bS0yLjYgMHYyLjY2aC03LjA4di0yLjY2YzAtMi40NiAxLjg4LTMuNTQgMy41NC0zLjU0czMuNTQgMS4wOCAzLjU0IDMuNTR6bS0zLjIyIDcuM2EyLjE0IDIuMTQgMCAwMTIuMTUgMi4xNWMwIC44Mi0uNDUgMS41My0xLjEzIDEuODhsLjg5IDMuODJoLTMuODJsLjg4LTMuODJhMi4xMSAyLjExIDAgMDEtMS4xMi0xLjg4IDIuMTQgMi4xNCAwIDAxMi4xNS0yLjE1eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MF9saW5lYXIiIHgxPSIxOTYuNTYiIHgyPSIxOTYuNTYiIHkxPSIxMzEuMDQiIHkyPSIxNDkuNTUiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iIzBEMEE0NCIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMwRDBBNDQiIHN0b3Atb3BhY2l0eT0iMCIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQxX2xpbmVhciIgeDE9IjE5Ny43OSIgeDI9IjE5Ny43OSIgeTE9IjY4LjY0IiB5Mj0iMTMyLjcxIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiNCOUUyRkYiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjNzNCNUU0Ii8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDJfbGluZWFyIiB4MT0iMTgwLjc1IiB4Mj0iMTQxLjE3IiB5MT0iOTAuNDciIHkyPSIxMzIuMTIiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iIzBEMEE0NCIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMwRDBBNDQiIHN0b3Atb3BhY2l0eT0iMCIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQzX2xpbmVhciIgeDE9IjE0MC4wMiIgeDI9IjE0MC4wMiIgeTE9Ijk0LjU0IiB5Mj0iMTI0Ljg5IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiNDMURFRjgiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjRUNGQUZGIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDRfbGluZWFyIiB4MT0iMTQwLjAyIiB4Mj0iMTQwLjAyIiB5MT0iODQuODgiIHkyPSIxMTEuNTUiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iI0RFRUJGNyIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZmYiLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50NV9saW5lYXIiIHgxPSIyMjIuNDgiIHgyPSIyMjIuNDgiIHkxPSI0Mi4wMyIgeTI9IjEwNS42NCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjRUI3QTc1Ii8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI0UwMjYyNiIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQ2X2xpbmVhciIgeDE9IjEzOS4zMyIgeDI9IjE3MC42OSIgeTE9IjEzNC4wNiIgeTI9IjE1Ni42OCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjQjlFMkZGIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzE1NzFCMyIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQ3X2xpbmVhciIgeDE9Ijg0IiB4Mj0iMTIzLjI2IiB5MT0iMzcuOTEiIHkyPSI4Ni43IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgICAgIDxzdG9wIG9mZnNldD0iLjAxIiBzdG9wLWNvbG9yPSIjNjZBM0ZGIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI0NDNjNGRSIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQ4X2xpbmVhciIgeDE9IjI5OSIgeDI9IjI5OSIgeTE9IjExNS4wNCIgeTI9IjE2Ni41NyIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjRkZENjZDIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI0ZGNjU4QSIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICA8L2RlZnM+Cjwvc3ZnPgo="},71948:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzODQiIGhlaWdodD0iMjE2IiBmaWxsPSJub25lIiB2aWV3Qm94PSIwIDAgMzg0IDIxNiI+CiAgPGRlZnMvPgogIDxwYXRoIGZpbGw9IiM1MDUwNkEiIGQ9Ik0yMTIuMzQgODkuMDVoLTUuMnYtNy4yMWExLjY1IDEuNjUgMCAwMC0xLjY0LTEuNjRoLTMzLjM4YTEuNjUgMS42NSAwIDAwLTEuNjMgMS42NHY2LjczaC01LjJ2LTYuNzNjMC0zLjggMy4wOC02Ljg0IDYuODMtNi44NGgzMy4zNGMzLjggMCA2Ljg0IDMuMDkgNi44NCA2Ljg0djcuMjFoLjA0eiIvPgogIDxwYXRoIGZpbGw9IiM4QjFDMUMiIGQ9Ik0yNTMuNDEgMTkxSDE1My4zOWExMC44OCAxMC44OCAwIDAxLTEwLjg5LTEwLjg5di02NC40NWgxMjMuMDN2NjMuMjJjMCA2LjctNS40MyAxMi4xMi0xMi4xMiAxMi4xMnoiLz4KICA8cGF0aCBmaWxsPSJ1cmwoI3BhaW50MF9saW5lYXIpIiBkPSJNMjMxLjUyIDE5MWgtOTguOGExMi4xMiAxMi4xMiAwIDAxLTEyLjExLTEyLjEyVjEwNmMwLTguMjkgNi43My0xNS4wMiAxNS4wMi0xNS4wMkgyNDMuNnY4Ny45NEExMi4wNSAxMi4wNSAwIDAxMjMxLjUyIDE5MXoiLz4KICA8cGF0aCBmaWxsPSJ1cmwoI3BhaW50MV9saW5lYXIpIiBkPSJNMjU2LjAxIDkwLjk0SDEzNS42NmExNS4wMiAxNS4wMiAwIDAwLTE1LjAxIDE1LjAydjMzLjZhNy4wNiA3LjA2IDAgMDA3LjA2IDcuMDZoMTA4Ljg2YTcuMDYgNy4wNiAwIDAwNy4wNi03LjA2di0xOC4yNWgxMi4zOFY5MC45NHoiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBkPSJNMTcyLjcyIDkwLjk0aC05LjY3di0yLjA4YzAtLjk2Ljc4LTEuNyAxLjcxLTEuN2g2LjI1Yy45NiAwIDEuNy43NyAxLjcgMS43djIuMDh6bTQxLjg1IDBoLTkuNjZ2LTIuMDhjMC0uOTYuNzgtMS43IDEuNy0xLjdoNi4yMWMuOTcgMCAxLjcxLjc3IDEuNzEgMS43djIuMDhoLjA0eiIvPgogIDxwYXRoIGZpbGw9InVybCgjcGFpbnQyX2xpbmVhcikiIGQ9Ik0yNjUuNTMgMTUxLjEyaC0yMS44NnYtNDkuMjVhMTAuOTIgMTAuOTIgMCAxMTIxLjg2IDB2NDkuMjV6Ii8+CiAgPHBhdGggZmlsbD0iI0VDNzQ1NCIgZD0iTTE1NC45IDE0Ni43aC05LjN2LTE5LjI2YTQuNjUgNC42NSAwIDAxOS4zIDB2MTkuMjZ6Ii8+CiAgPHBhdGggZmlsbD0iIzhCMUMxQyIgZD0iTTE1NC45IDE0Ni43aC05LjN2MTguNDdoOS4zVjE0Ni43eiIvPgogIDxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0xNTAuMjUgMTczLjAxYTQuNjUgNC42NSAwIDAxLTQuNjUtNC42NHYtMy4xNmg5LjN2My4xNmE0LjY1IDQuNjUgMCAwMS00LjY1IDQuNjR6Ii8+CiAgPHBhdGggZmlsbD0iI0VDNzQ1NCIgZD0iTTIxOS40IDE0Ni43aC05LjI4di0xOS4yNmE0LjY1IDQuNjUgMCAwMTkuMjkgMHYxOS4yNnoiLz4KICA8cGF0aCBmaWxsPSIjOEIxQzFDIiBkPSJNMjE5LjQgMTQ2LjdoLTkuMjh2MTguNDdoOS4yOVYxNDYuN3oiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBkPSJNMjE0Ljc2IDE3My4wMWE0LjY1IDQuNjUgMCAwMS00LjY0LTQuNjR2LTMuMTZoOS4yOXYzLjE2YTQuNjUgNC42NSAwIDAxLTQuNjUgNC42NHoiLz4KICA8ZyBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iMS42NSI+CiAgICA8cGF0aCBzdHJva2U9IiNGREM3NjAiIGQ9Ik0xMDQuNzIgMTkxYTEyLjc5IDEyLjc5IDAgMTAwLTI1LjU3IDEyLjc5IDEyLjc5IDAgMDAwIDI1LjU3eiIvPgogICAgPHBhdGggc3Ryb2tlPSIjRkRDNzYwIiBkPSJNODQuODYgMTc5LjJhMy41NSAzLjU1IDAgMDEzLjU2LTMuNTYgMy41NSAzLjU1IDAgMDEzLjU2IDMuNTYiLz4KICAgIDxwYXRoIHN0cm9rZT0iI0ZEQzc2MCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMTE3LjQ3IDE3OC4yMWgxNi42NmE1LjQzIDUuNDMgMCAwMTUuNDMgNS40M1YxOTEiLz4KICAgIDxwYXRoIHN0cm9rZT0iI0ZGRURDOSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNTkuMzIgMTc4LjIxaDE2LjY2YTUuNDMgNS40MyAwIDAxNS40MyA1LjQzVjE5MSIvPgogICAgPHBhdGggc3Ryb2tlPSIjRkRDNzYwIiBkPSJNNzIuMTEgMTkxYTEyLjc5IDEyLjc5IDAgMTAwLTI1LjU3IDEyLjc5IDEyLjc5IDAgMDAwIDI1LjU3eiIvPgogIDwvZz4KICA8cGF0aCBmaWxsPSIjNTA1MDZBIiBkPSJNMjg1LjM1IDkzVjU5LjAzYzAtLjYyLjUtMS4wOSAxLjEtMS4wOWguMTljLjYzIDAgMS4xLjUgMS4xIDEuMVY5M2MwIDEuNzYuMDcgMy40Ny4xOSA1LjIzbC45NCAxMi40NmgtNC42NWwuOTQtMTIuNDZjLjExLTEuNzYuMi0zLjUxLjItNS4yM3oiLz4KICA8cGF0aCBmaWxsPSJ1cmwoI3BhaW50M19saW5lYXIpIiBkPSJNMjgyIDExMC45OHY3OC4xMmMwIDEuMTcuOTQgMi4xMSAyLjEgMi4xMWgzMC44YTIuMSAyLjEgMCAwMDIuMS0yLjF2LTMuNjRjMC0uOS0uMzUtMS44LS45OC0yLjQ2bC02LjgtNy4xOWEzLjc2IDMuNzYgMCAwMS0xLTIuNTh2LTM0LjAyYzAtLjM1LjAzLS43LjE1LTEuMDVsNy44NS0yNi41N2EyLjExIDIuMTEgMCAwMC0yLTIuN2gtMzAuMDdhMi4xIDIuMSAwIDAwLTIuMTUgMi4wOHoiLz4KICA8cGF0aCBmaWxsPSJ1cmwoI3BhaW50NF9saW5lYXIpIiBkPSJNNTcuODUgOTFhMjYgMjYgMCAxMTUyIDB2MjZoLTI2YTI2IDI2IDAgMDEtMjYtMjZ6Ii8+CiAgPHBhdGggZmlsbD0iI2ZmZiIgZD0iTTgzLjQ2IDg4LjlhNC41MiA0LjUyIDAgMTAwLTkuMDQgNC41MiA0LjUyIDAgMDAwIDkuMDR6bS02LjI3IDEyLjc3Yy0yLjcgMC00LjUyLTIuOTQtMy4xNy01LjI0YTEwLjg1IDEwLjg1IDAgMDE5LjUyLTUuNjNjNC4xMiAwIDcuNjEgMi4yMiA5LjUxIDUuNjMgMS4zNSAyLjM4LS40NyA1LjI0LTMuMTcgNS4yNEg3Ny4yeiIvPgogIDxkZWZzPgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDBfbGluZWFyIiB4MT0iMTgyLjEiIHgyPSIxODIuMSIgeTE9IjExOC4xOSIgeTI9IjE2NS42NyIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjRkM0NTFDIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI0UzOEM3MCIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQxX2xpbmVhciIgeDE9IjE4OC4zMyIgeDI9IjE4OC4zMyIgeTE9IjkwLjk0IiB5Mj0iMTQ2LjYyIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiNGRkQ3QjMiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjRkZCMzlCIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDJfbGluZWFyIiB4MT0iMjU0LjYiIHgyPSIyNTQuNiIgeTE9IjkwLjk0IiB5Mj0iMTQwLjg4IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiMyOTAwMDAiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjOEExQzFDIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDNfbGluZWFyIiB4MT0iMjk5LjUiIHgyPSIyOTkuNSIgeTE9IjEwOC45MSIgeTI9IjE5MS4yMSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjREZFQUY0Ii8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI0UyREZGNCIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQ0X2xpbmVhciIgeDE9IjU3LjkzIiB4Mj0iODkuODEiIHkxPSI2NSIgeTI9IjExNy4xNyIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjNzJENUZGIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzcyQjlGRiIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICA8L2RlZnM+Cjwvc3ZnPgo="},30984:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzODQiIGhlaWdodD0iMjE2IiBmaWxsPSJub25lIiB2aWV3Qm94PSIwIDAgMzg0IDIxNiI+CiAgPGRlZnMvPgogIDxwYXRoIGZpbGw9IiM2NTdFRTQiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTEwMi43MyAxMjMuMTFjMi42OC0xNC40NSAxNS43LTE0LjAyIDE1LjctMTQuMDJzMTMuMDMtLjQyIDE1LjcxIDE0LjAydjkuODRzLS4xIDEuMDUtMy4wNyAzLjJhMTc5IDE3OSAwIDAwLTEuOTEgMS40Yy0zLjU0IDIuNjQtOS4wNiA2Ljc1LTEwLjcyIDYuNzUtMS42NiAwLTcuMTktNC4xMS0xMC43My02Ljc1YTE3OSAxNzkgMCAwMC0xLjkxLTEuNGMtMi45Ni0yLjE1LTMuMDctMy4yLTMuMDctMy4ydi05Ljg0em02Ljc5IDB2NS4zNmgxNy44M3YtNS4zNmMtMS44LTcuMTctOC45MS03LjI3LTguOTEtNy4yN3MtNy4xMS4xLTguOTIgNy4yN3oiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPgogIDxwYXRoIGZpbGw9IiM2NTdFRTQiIGQ9Ik0xMTQuODQgMTQ1LjIzYzEuNTggMS4xIDMuNiAxLjI5IDMuNiAxLjI5czIuMDItLjIgMy42LTEuM2EzMjgxIDMyODEgMCAwMDEyLjEtOC42MnYxNC45cy0uMDggMS43My0yIDEuNzNoLTI3LjQxYy0xLjkxIDAtMi0xLjczLTItMS43M3YtMTQuOXMxMC41MyA3LjUzIDEyLjEgOC42M3oiLz4KICA8cGF0aCBmaWxsPSIjNjU3RUU0IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNTAuNCAxMTguNjZoOS4xNGM0LjA5IDAgNy4zNS44NiA5LjcgMi42NyAyLjM4IDEuOCAzLjUzIDQuNSAzLjUzIDcuOTggMCAzLjY4LTEuMiA2LjUzLTMuNjggOC40LTIuNDMgMS44My01LjYyIDIuNzEtOS41IDIuNzFoLTMuNDJ2MTEuODdoLTUuNzd2LTMzLjYzem01Ljc2IDQuNzh2MTIuMTZoMy4yNGMyLjUzIDAgNC4zNC0uNSA1LjUyLTEuMzhoLjAxYzEuMTMtLjgyIDEuOC0yLjM3IDEuOC00Ljg3IDAtMi4xOC0uNjUtMy42Mi0xLjgtNC41aC0uMDFjLTEuMTktLjktMi45Ni0xLjQtNS40Mi0xLjRoLTMuMzN6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz4KICA8cGF0aCBmaWxsPSIjNjU3RUU0IiBkPSJNMjI3LjE4IDEyMC4wOHY2LjE4aDUuOTZsLS42NiA0LjY0aC01LjN2MTQuMDdjMCAxLjIyLjIgMS45OS41MSAyLjQxLjMuMzUuODQuNiAxLjc5LjYuODIgMCAxLjgtLjI4IDIuOTctLjlsLjU2LS4zIDIuMjYgMy45My0uNS4zNGExMC4xNSAxMC4xNSAwIDAxLTUuOSAxLjhjLTIuMjMgMC00LjA1LS42My01LjQtMS45N3YtLjAxYy0xLjMxLTEuMzgtMS45Mi0zLjMyLTEuOTItNS43VjEzMC45aC00LjMydi00LjY0aDQuMzJ2LTUuNWw1LjYzLS42OHptLTM5LjA2IDUuNjJjLTEuNjUgMC0zLjEyLjUyLTQuMzYgMS41Ni0uNy41Ny0xLjMgMS4zLTEuODEgMi4xNmwtLjI3LTMuMTZoLTQuOTZ2MjYuMDNoNS42MnYtMTQuN2MuNTItMi4zIDEuMjItMy45IDIuMDYtNC45YTMuOTQgMy45NCAwIDAxMy4yLTEuNDZjLjYzIDAgMS4zLjA4IDIgLjI2bC42Ny4xNyAxLjA0LTUuNTEtLjYtLjE1YTEwLjY0IDEwLjY0IDAgMDAtMi42LS4zeiIvPgogIDxwYXRoIGZpbGw9IiM2NTdFRTQiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTE5Ny41IDEyNy40NGExMS4yMyAxMS4yMyAwIDAxNi4zMi0xLjc0YzMuNjMgMCA2LjUyIDEuMjIgOC41NyAzLjcgMi4wNiAyLjQ3IDMuMDYgNS43OCAzLjA2IDkuODUgMCAyLjY0LS40NSA1LTEuMzcgNy4wN2ExMS4xMiAxMS4xMiAwIDAxLTQuMDQgNC44MyAxMS4zNiAxMS4zNiAwIDAxLTYuMjcgMS43Yy0zLjYzIDAtNi41My0xLjIyLTguNjItMy43LTIuMDYtMi40Ny0zLjA2LTUuNzctMy4wNi05Ljg1IDAtMi42NC40NS00Ljk4IDEuMzctNy4wMi45Mi0yLjA4IDIuMjctMy43IDQuMDQtNC44M3ptMi4wNCA1LjEyYy0uOTYgMS40Mi0xLjUgMy42My0xLjUgNi43NCAwIDMuMDkuNTMgNS4zIDEuNDkgNi43LjkyIDEuMzcgMi4zIDIuMDcgNC4yNCAyLjA3IDEuOTQgMCAzLjMyLS43IDQuMjQtMi4wOC45Ni0xLjQyIDEuNDktMy42MyAxLjQ5LTYuNzQgMC0zLjA5LS41My01LjMtMS40OC02LjctLjkxLTEuMzctMi4yOC0yLjA3LTQuMi0yLjA3LTEuOTYgMC0zLjM1LjctNC4yOCAyLjA4em00OC42Mi02Ljg2Yy0yLjQyIDAtNC41My41Ny02LjMxIDEuNzRhMTAuNzkgMTAuNzkgMCAwMC00LjA0IDQuODQgMTYuOTIgMTYuOTIgMCAwMC0xLjM3IDcuMDJjMCA0LjA3IDEgNy4zOCAzLjA2IDkuODUgMi4wOCAyLjQ4IDQuOTggMy43IDguNjIgMy43IDIuMzggMCA0LjQ4LS41NSA2LjI2LTEuN2ExMS4xMSAxMS4xMSAwIDAwNC4wNC00LjgzIDE3LjI1IDE3LjI1IDAgMDAxLjM3LTcuMDdjMC00LjA3LTEtNy4zOC0zLjA2LTkuODUtMi4wNS0yLjQ4LTQuOTQtMy43LTguNTctMy43em04LjU3IDMuN2wtLjUuNDIuNS0uNDJ6bS0xNC44OC0xLjk2bC4zNS41NS0uMzYtLjU0em0uNTQgMTEuODZjMC0zLjEuNTMtNS4zMiAxLjUtNi43NC45My0xLjM4IDIuMzItMi4wOCA0LjI3LTIuMDggMS45MiAwIDMuMjkuNyA0LjIgMi4wNy45NiAxLjQgMS40OCAzLjYxIDEuNDggNi43IDAgMy4xLS41MyA1LjMyLTEuNDggNi43NC0uOTMgMS4zOC0yLjMgMi4wOC00LjI1IDIuMDgtMS45NCAwLTMuMzEtLjctNC4yNC0yLjA3LS45NS0xLjQtMS40OC0zLjYxLTEuNDgtNi43eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+CiAgPHBhdGggZmlsbD0iIzY1N0VFNCIgZD0iTTI3Mi4zMiAxMjYuOTFhOS4yIDkuMiAwIDAxNC42NC0xLjIxYzIuNCAwIDQuMzMuNzEgNS43MyAyLjIyIDEuNDMgMS41IDIuMSAzLjUyIDIuMSA1Ljk4djE4LjRoLTUuNjJWMTM0LjVjMC0xLjctLjMzLTIuNzMtLjgxLTMuMjYtLjUtLjU0LTEuMjctLjg3LTIuNDMtLjg3LTEuMTggMC0yLjIuMzQtMy4wOCAxLS44OC42Ni0xLjczIDEuNjItMi41NSAyLjl2MTguMDFoLTUuNjN2LTI2LjAzaDQuOTZsLjI2IDIuNjNhMTAuMjEgMTAuMjEgMCAwMTIuNDMtMS45OHoiLz4KPC9zdmc+Cg=="},57633:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNTAiIGhlaWdodD0iMTU0IiBmaWxsPSJub25lIiB2aWV3Qm94PSIwIDAgMTUwIDE1NCI+CiAgPGRlZnMvPgogIDxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMCkiPgogICAgPHBhdGggZmlsbD0iIzRDNEI2OSIgZD0iTTc1LjU5IDE1NEgxMy43MkExMy43OCAxMy43OCAwIDAxMCAxNDAuMlYxMy43MkMwIDYuMTggNi4xOCAwIDEzLjcyIDBINzUuNkM4My4yIDAgODkuMyA2LjE4IDg5LjMgMTMuNzJWMTQwLjJjLjA4IDcuNjItNi4xIDEzLjgtMTMuNzIgMTMuOHoiLz4KICAgIDxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik03NC4yMiA1LjEzaC00Ljk1YTUuMjggNS4yOCAwIDAwLTQuOCAzLjFsLS4yOC42YTYuMiA2LjIgMCAwMS01LjYxIDMuNkgzMC43M2E2LjI4IDYuMjggMCAwMS01LjYxLTMuNmwtLjIyLS40OGE1LjI4IDUuMjggMCAwMC00LjgyLTMuMTRoLTQuOTFhOS40OSA5LjQ5IDAgMDAtOS40NyA5LjQ3VjEzOS40YTkuNDkgOS40OSAwIDAwOS40NyA5LjQ2aDU5LjA1YTkuNDkgOS40OSAwIDAwOS40Ny05LjQ2VjE0LjZhOS41NCA5LjU0IDAgMDAtOS40Ny05LjQ3eiIvPgogICAgPHJlY3Qgd2lkdGg9IjExLjg1IiBoZWlnaHQ9IjExLjg1IiB4PSIxMSIgeT0iMTA2IiBmaWxsPSIjRjBGM0Y5IiByeD0iMi4yMiIvPgogICAgPHBhdGggZmlsbD0iI0YwRjNGOSIgZD0iTTI3LjMgMTE1LjYzYzAtLjgyLjY2LTEuNDggMS40OC0xLjQ4aDQzLjA3Yy44MiAwIDEuNDguNjYgMS40OCAxLjQ4di43NGMwIC44Mi0uNjYgMS40OC0xLjQ4IDEuNDhIMjguNzhhMS40OCAxLjQ4IDAgMDEtMS40OS0xLjQ4di0uNzR6bTAtOC4xNWMwLS44Mi42Ni0xLjQ4IDEuNDgtMS40OGg0My4wN2MuODIgMCAxLjQ4LjY2IDEuNDggMS40OHYuNzRjMCAuODItLjY2IDEuNDgtMS40OCAxLjQ4SDI4Ljc4YTEuNDggMS40OCAwIDAxLTEuNDktMS40OHYtLjc0eiIvPgogICAgPG1hc2sgaWQ9ImEiIHdpZHRoPSI4NyIgaGVpZ2h0PSI4OSIgeD0iMSIgeT0iNjUiIG1hc2tVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8cGF0aCBmaWxsPSIjQzRDNEM0IiBkPSJNMiAxNTMuNTdoNzUuNDVhMTAgMTAgMCAwMDEwLTEwVjY1SDJ2ODguNTd6Ii8+CiAgICA8L21hc2s+CiAgICA8ZyBmaWx0ZXI9InVybCgjZmlsdGVyMF9mKSIgbWFzaz0idXJsKCNhKSIgb3BhY2l0eT0iLjMiPgogICAgICA8cGF0aCBmaWxsPSIjMjIxNTQ4IiBkPSJNNTkuMDUgMTcybDI4LjQtMTguNDNWNzQuNWwtNi4wNyA0LjhhNTguOTMgNTguOTMgMCAwMC0yMi4zMyA0Ni4xOVYxNzJ6Ii8+CiAgICA8L2c+CiAgICA8cmVjdCB3aWR0aD0iMTEuODUiIGhlaWdodD0iMTEuODUiIHg9IjExIiB5PSIzNiIgZmlsbD0iI0YwRjNGOSIgcng9IjIuMjIiLz4KICAgIDxyZWN0IHdpZHRoPSIxMS44NSIgaGVpZ2h0PSIxMS44NSIgeD0iMTEiIHk9IjcxIiBmaWxsPSIjRjBGM0Y5IiByeD0iMi4yMiIvPgogICAgPHBhdGggZmlsbD0iI0YwRjNGOSIgZD0iTTI3LjMgNzIuNDhjMC0uODIuNjYtMS40OCAxLjQ4LTEuNDhoNDMuMDdjLjgyIDAgMS40OC42NiAxLjQ4IDEuNDh2Ljc0YzAgLjgyLS42NiAxLjQ4LTEuNDggMS40OEgyOC43OGExLjQ4IDEuNDggMCAwMS0xLjQ5LTEuNDh2LS43NHptMCA4LjE1YzAtLjgyLjY2LTEuNDggMS40OC0xLjQ4aDQzLjA3Yy44MiAwIDEuNDguNjYgMS40OCAxLjQ4di43NGMwIC44Mi0uNjYgMS40OC0xLjQ4IDEuNDhIMjguNzhhMS40OCAxLjQ4IDAgMDEtMS40OS0xLjQ4di0uNzR6bTAgOC4xNWMwLS44Mi42Ni0xLjQ4IDEuNDgtMS40OGgxMy43Yy44MiAwIDEuNDguNjYgMS40OCAxLjQ4di43NGMwIC44Mi0uNjYgMS40OC0xLjQ4IDEuNDhoLTEzLjdhMS40OCAxLjQ4IDAgMDEtMS40OS0xLjQ4di0uNzR6bTAtNTEuM2MwLS44Mi42Ni0xLjQ4IDEuNDgtMS40OGg0My4wN2MuODIgMCAxLjQ4LjY2IDEuNDggMS40OHYuNzRjMCAuODItLjY2IDEuNDgtMS40OCAxLjQ4SDI4Ljc4YTEuNDggMS40OCAwIDAxLTEuNDktMS40OHYtLjc0em0wIDg2LjNjMC0uODIuNjYtMS40OCAxLjQ4LTEuNDhoMTMuN2MuODIgMCAxLjQ4LjY2IDEuNDggMS40OHYuNzRjMCAuODItLjY2IDEuNDgtMS40OCAxLjQ4aC0xMy43YTEuNDggMS40OCAwIDAxLTEuNDktMS40OHYtLjc0em0wLTc4LjE1YzAtLjgyLjY2LTEuNDggMS40OC0xLjQ4aDQzLjA3Yy44MiAwIDEuNDguNjYgMS40OCAxLjQ4di43NGMwIC44Mi0uNjYgMS40OC0xLjQ4IDEuNDhIMjguNzhhMS40OCAxLjQ4IDAgMDEtMS40OS0xLjQ4di0uNzR6bTAgOC4xNWMwLS44Mi42Ni0xLjQ4IDEuNDgtMS40OGgxMy43Yy44MiAwIDEuNDguNjYgMS40OCAxLjQ4di43NGMwIC44Mi0uNjYgMS40OC0xLjQ4IDEuNDhoLTEzLjdhMS40OCAxLjQ4IDAgMDEtMS40OS0xLjQ4di0uNzR6Ii8+CiAgICA8cmVjdCB3aWR0aD0iODAiIGhlaWdodD0iODAiIHg9IjcwIiB5PSI3NCIgZmlsbD0idXJsKCNwYWludDBfbGluZWFyKSIgcng9IjE5Ljc1Ii8+CiAgICA8cGF0aCBmaWxsPSIjZmZmIiBkPSJNMTA5LjUzIDk0LjZzLTEwLjE1LS4zNC0xMi4yNiAxMC45MnY3LjY5cy4wNi44MiAyLjQgMi41MiA4LjI4IDYuNCA5Ljg3IDYuNGMxLjU4IDAgNy41Ni00Ljc2IDkuODUtNi40IDIuMjktMS42NCAyLjQtMi41MiAyLjQtMi41MnYtNy42OWMtMi4wNS0xMS4yNi0xMi4yNi0xMC45MS0xMi4yNi0xMC45MXptNi45OSAxNS4xNGgtMTMuOXYtNC4xNmE3LjU3IDcuNTcgMCAwMTYuOTctNS43IDcuNSA3LjUgMCAwMTYuOTggNS43djQuMTZoLS4wNXoiLz4KICAgIDxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0xMDkuNTMgMTIzLjgyYy0xLS4xMS0xLjkzLS40Ni0yLjgxLTFsLTkuNDUtNi43NHYxMS42MmMuMDYuODIuNzcgMS40IDEuNTMgMS4zNWgyMS40MWMuODIuMDUgMS41My0uNTMgMS41OS0xLjN2LTExLjY3bC05LjQ1IDYuNzVhNi40NyA2LjQ3IDAgMDEtMi44MiAxeiIvPgogIDwvZz4KICA8ZGVmcz4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQwX2xpbmVhciIgeDE9IjEwOS4zOSIgeDI9IjEwOS4zOSIgeTE9IjE1NCIgeTI9Ijc0IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiM1RDdDRjciLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjNjRBMkZGIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGNsaXBQYXRoIGlkPSJjbGlwMCI+CiAgICAgIDxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0wIDBoMTUwdjE1NEgweiIvPgogICAgPC9jbGlwUGF0aD4KICAgIDxmaWx0ZXIgaWQ9ImZpbHRlcjBfZiIgd2lkdGg9IjYxLjc5IiBoZWlnaHQ9IjEzMC44OSIgeD0iNDIuMzYiIHk9IjU3LjgiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiIgZmlsdGVyVW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPGZlRmxvb2QgZmxvb2Qtb3BhY2l0eT0iMCIgcmVzdWx0PSJCYWNrZ3JvdW5kSW1hZ2VGaXgiLz4KICAgICAgPGZlQmxlbmQgaW49IlNvdXJjZUdyYXBoaWMiIGluMj0iQmFja2dyb3VuZEltYWdlRml4IiByZXN1bHQ9InNoYXBlIi8+CiAgICAgIDxmZUdhdXNzaWFuQmx1ciByZXN1bHQ9ImVmZmVjdDFfZm9yZWdyb3VuZEJsdXIiIHN0ZERldmlhdGlvbj0iOC4zNSIvPgogICAgPC9maWx0ZXI+CiAgPC9kZWZzPgo8L3N2Zz4K"},50651:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTA5IiBoZWlnaHQ9IjE0MCIgdmlld0JveD0iMCAwIDEwOSAxNDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik05Ny42MTY3IDY5LjY0NTJINDEuNjU3MkwzOS44NTk2IDYzLjU1MjRDMzkuNDY4OCA2Mi4zODA3IDM4LjM3NDYgNjEuNTk5NiAzNy4xMjQxIDYxLjU5OTZIMTEuMDk4MkM5LjUzNTEzIDYxLjU5OTYgOC4zNjI3OSA2Mi44NDk0IDguMzYyNzkgNjQuMzMzNlY2OS42NDUyVjgyLjQ1NTdWMTMyLjY4MkgxMDAuMzUyVjcyLjQ1NzNDMTAwLjM1MiA3MC44OTUgOTkuMTc5OCA2OS42NDUyIDk3LjYxNjcgNjkuNjQ1MloiIGZpbGw9InVybCgjcGFpbnQwX2xpbmVhcikiLz4KPHBhdGggZD0iTTUzLjMxMjkgODEuNDYxOUgzLjIxNTg3QzEuMjAyNyA4MS40NjE5IC0wLjI2ODQ2NyA4My4yMzM1IDAuMDQxMjUyIDg1LjE1OTFMOC40MDM2NSAxMzcuOTIxQzguNTU4NTEgMTM5LjE1MyA5LjY0MjUzIDE0MC4wMDEgMTAuODgxNCAxNDAuMDAxSDUzLjM5MDNIOTcuODM0OUM5OS4wNzM4IDE0MC4wMDEgMTAwLjA4IDEzOS4xNTMgMTAwLjMxMyAxMzcuOTIxTDEwOC42NzUgODUuMTU5MUMxMDguOTg1IDgzLjIzMzUgMTA3LjQzNiA4MS40NjE5IDEwNS41IDgxLjQ2MTlINTMuMzEyOVoiIGZpbGw9InVybCgjcGFpbnQxX2xpbmVhcikiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03OC40Njk5IDQxLjE2MDFINTMuMTExNEM1MS41ODEyIDQxLjE2MDEgNTAuMzQwOCA0Mi40MDA1IDUwLjM0MDggNDMuOTMwN1Y5My44MDA4QzUwLjM0MDggOTUuMzMwOSA1MS41ODEyIDk2LjU3MTMgNTMuMTExNCA5Ni41NzEzSDkxLjg5OTNDOTMuNDI5NCA5Ni41NzEzIDk0LjY2OTggOTUuMzMwOSA5NC42Njk4IDkzLjgwMDhWNTcuMzZMNzguNDY5OSA0MS4xNjAxWiIgZmlsbD0iI0VCRURGMyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTc4LjQ2NjUgNDEuMTU4M0w5NC42Njk0IDU3LjM2MTNMODEuMjM3IDU3LjM2MTNDNzkuNzA2OSA1Ny4zNjEzIDc4LjQ2NjUgNTYuMTIwOCA3OC40NjY1IDU0LjU5MDdMNzguNDY2NSA0MS4xNTgzWiIgZmlsbD0iI0Y4RjhGOCIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTcyLjUwNTEgNjIuNTk3OEg2OC41MDcyQzY3LjY2NTUgNjIuNTk3OCA2Ni45NjQxIDYxLjg4MjggNjYuOTY0MSA2MS4wMjQ3VjYwLjczODdDNjYuOTY0MSA1OS44ODA3IDY3LjY2NTUgNTkuMTY1NiA2OC41MDcyIDU5LjE2NTZINzIuNTA1MVY2Mi41OTc4Wk03Mi41MDQ5IDY2LjAzMDFINzYuNTAyOEM3Ny4zNDQ1IDY2LjAzMDEgNzguMDQ1OSA2NS4zMTUxIDc4LjA0NTkgNjQuNDU3MVY2NC4xNzFDNzguMDQ1OSA2My4zMTMgNzcuMzQ0NSA2Mi41OTggNzYuNTAyOCA2Mi41OThINzIuNTA0OFY2Ni4wMjg4SDY4LjUwNjlDNjcuNjY1MyA2Ni4wMjg4IDY2Ljk2MzkgNjYuNzQzOCA2Ni45NjM5IDY3LjYwMTlWNjcuODg3OUM2Ni45NjM5IDY4Ljc0NiA2Ny42NjUzIDY5LjQ2MSA2OC41MDY5IDY5LjQ2MUg3Mi41MDQ5VjY2LjAzMDFaTTc2LjUwMjggNzIuOTU0Mkg3Mi41MDQ4VjY5LjUyMjFINzYuNTAyOEM3Ny4zNDQ1IDY5LjUyMjEgNzguMDQ1OSA3MC4yMzcxIDc4LjA0NTkgNzEuMDk1MlY3MS4zODEyQzc4LjA0NTkgNzIuMzEwNyA3Ny4zNDQ1IDcyLjk1NDIgNzYuNTAyOCA3Mi45NTQyWk02OS41NTk2IDc1LjUwMkg3NS40NTE1Qzc2LjI5MzIgNzUuNTAyIDc2Ljk5NDYgNzYuMTQ1NiA3Ni45MjQ0IDc3LjA3NTFWODUuMjk4MUM3Ni45MjQ0IDg2LjE1NjEgNzYuMjIzIDg2Ljg3MTIgNzUuMzgxMyA4Ni44NzEySDY5LjU1OTZDNjguNzE3OSA4Ni44NzEyIDY4LjAxNjUgODYuMTU2MSA2OC4wMTY1IDg1LjI5ODFWNzcuMDc1MUM2OC4wMTY1IDc2LjIxNzEgNjguNzE3OSA3NS41MDIgNjkuNTU5NiA3NS41MDJaTTc0LjM5OTQgODUuMDEyMUM3NC44OTAzIDg1LjAxMjEgNzUuMzExMiA4NC41ODMgNzUuMzExMiA4NC4wODI1VjgyLjQzNzlDNzUuMzExMiA4MS45Mzc0IDc0Ljg5MDMgODEuNTA4NCA3NC4zOTk0IDgxLjUwODRINzAuNjExN0M3MC4xMjA3IDgxLjUwODQgNjkuNjk5OSA4MS45Mzc0IDY5LjY5OTkgODIuNDM3OVY4NC4wODI1QzY5LjY5OTkgODQuNTgzIDcwLjEyMDcgODUuMDEyMSA3MC42MTE3IDg1LjAxMjFINzQuMzk5NFoiIGZpbGw9IiMzRjQzNEIiLz4KPG1hc2sgaWQ9Im1hc2swIiBzdHlsZT0ibWFzay10eXBlOmFscGhhIiBtYXNrVW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4PSI1MCIgeT0iNDEiIHdpZHRoPSI0NSIgaGVpZ2h0PSI0NiI+CjxwYXRoIGQ9Ik05NC41NzIzIDQxLjE1NjNINTAuMzQxMVY4Ni43NDA5SDk0LjU3MjNWNDEuMTU2M1oiIGZpbGw9IiNDNEM0QzQiLz4KPC9tYXNrPgo8ZyBtYXNrPSJ1cmwoI21hc2swKSI+CjxnIG9wYWNpdHk9IjAuMzciIGZpbHRlcj0idXJsKCNmaWx0ZXIwX2YpIj4KPHBhdGggZD0iTTY2LjExMDQgMjkuNDk1Nkw1MS40NjE0IDM4LjYzNjNWNjkuNjIxQzYwLjQwNDMgNjUuNDA0MSA2Ni4xMTA0IDU2LjQwNDkgNjYuMTEwNCA0Ni41MTc3VjI5LjQ5NTZaIiBmaWxsPSIjMjIxNTQ4Ii8+CjwvZz4KPC9nPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTQyLjMyMjggMEgxOC4yMTY4QzE1LjkwODQgMCAxNC4wMzcxIDEuODcxMyAxNC4wMzcxIDQuMTc5NjZWNTEuNTQ5MkMxNC4wMzcxIDUzLjg1NzUgMTUuOTA4NCA1NS43Mjg4IDE4LjIxNjggNTUuNzI4OEg1NC40NDA1QzU2Ljc0ODkgNTUuNzI4OCA1OC42MjAyIDUzLjg1NzUgNTguNjIwMiA1MS41NDkxVjE2LjI5NzRMNDIuMzIyOCAwWiIgZmlsbD0iI0VCRURGMyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTQyLjMyNTEgMC4wMDA2OTI4NUw1OC42MjExIDE2LjI5NjdMNDYuNTA0OCAxNi4yOTY3QzQ0LjE5NjQgMTYuMjk2NyA0Mi4zMjUxIDE0LjQyNTQgNDIuMzI1MSAxMi4xMTdMNDIuMzI1MSAwLjAwMDY5Mjg1WiIgZmlsbD0iI0Y4RjhGOCIvPgo8cGF0aCBkPSJNNDAuNTU2NSAzMS4wMTExTDM0LjIyMjIgMzkuMzEzM0MzNC4yMjIyIDM5LjM0NDEgMzQuMTkxNSAzOS4zNDQxIDM0LjE2MDcgMzkuMzEzM0wzMC42NTUzIDM0Ljg1NDdDMzAuMjU1NiAzNC4zMzIgMjkuNDg2OSAzNC4zMzIgMjkuMDg3MSAzNC44NTQ3TDI0LjA0NDMgNDEuMzEyQzIzLjUyMTYgNDEuOTU3OCAyMy45ODI4IDQyLjkxMSAyNC44MTMgNDIuOTExSDMxLjQ1NDhIMzYuOTg5Nkg0OS41MDQ1QzUwLjIxMTcgNDIuOTExIDUwLjYxMTUgNDIuMDgwOCA1MC4xODEgNDEuNTI3M0w0Mi4xNTU1IDMxLjAxMTFDNDEuNzU1NyAzMC40ODg0IDQwLjk1NjMgMzAuNDg4NCA0MC41NTY1IDMxLjAxMTFaIiBmaWxsPSIjNDk0RDU1Ii8+CjxwYXRoIGQ9Ik0zMy43MzA2IDMxLjcyMDhDMzUuNTY0NiAzMS43MjA4IDM3LjA1MTUgMzAuMjM0IDM3LjA1MTUgMjguMzk5OUMzNy4wNTE1IDI2LjU2NTggMzUuNTY0NiAyNS4wNzkgMzMuNzMwNiAyNS4wNzlDMzEuODk2NSAyNS4wNzkgMzAuNDA5NyAyNi41NjU4IDMwLjQwOTcgMjguMzk5OUMzMC40MDk3IDMwLjIzNCAzMS44OTY1IDMxLjcyMDggMzMuNzMwNiAzMS43MjA4WiIgZmlsbD0iIzQ5NEQ1NSIvPgo8cGF0aCBkPSJNOTMuMTczNiAxMDQuNjMxQzkzLjQ5MTggMTA0LjUzMyA5My41NTQ5IDEwNC4xMSA5My4yNzkxIDEwMy45MjRMNzQuMzcwNCA5MS4xNDEzQzc0LjAwNjYgOTAuODk1NCA3My41MTkxIDkxLjE3NDggNzMuNTQ3NCA5MS42MTI5TDc1LjAxODIgMTE0LjM4OUM3NS4wMzk2IDExNC43MjIgNzUuNDM2MyAxMTQuODgxIDc1LjY4MTQgMTE0LjY1Nkw4MS4wNjAzIDEwOS43MTdMODcuNDE1NyAxMjAuODE1Qzg3Ljc3ODMgMTIxLjQ0OCA4OC41ODU0IDEyMS42NjcgODkuMjE4MyAxMjEuMzA0TDkyLjA2MDIgMTE5LjY3NUM5Mi42OTI4IDExOS4zMTMgOTIuOTExOSAxMTguNTA2IDkyLjU0OTUgMTE3Ljg3M0w4Ni4xOTM2IDEwNi43NzVMOTMuMTczNiAxMDQuNjMxWiIgZmlsbD0iIzNGNDM0QiIgc3Ryb2tlPSJ3aGl0ZSIgc3Ryb2tlLXdpZHRoPSIxLjU4NDYzIi8+CjxkZWZzPgo8ZmlsdGVyIGlkPSJmaWx0ZXIwX2YiIHg9IjI2LjE3NjEiIHk9IjQuMjEwMjgiIHdpZHRoPSI2NS4yMTk2IiBoZWlnaHQ9IjkwLjY5NjEiIGZpbHRlclVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgY29sb3ItaW50ZXJwb2xhdGlvbi1maWx0ZXJzPSJzUkdCIj4KPGZlRmxvb2QgZmxvb2Qtb3BhY2l0eT0iMCIgcmVzdWx0PSJCYWNrZ3JvdW5kSW1hZ2VGaXgiLz4KPGZlQmxlbmQgbW9kZT0ibm9ybWFsIiBpbj0iU291cmNlR3JhcGhpYyIgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIHJlc3VsdD0ic2hhcGUiLz4KPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMTIuNjQyNyIgcmVzdWx0PSJlZmZlY3QxX2ZvcmVncm91bmRCbHVyIi8+CjwvZmlsdGVyPgo8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MF9saW5lYXIiIHgxPSI1NS4xMzcxIiB5MT0iNjEuNTk5NiIgeDI9IjU1LjEzNzEiIHkyPSIxMDUuMzQzIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CjxzdG9wIHN0b3AtY29sb3I9IiM3Q0NERkUiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjMzg4RkU1Ii8+CjwvbGluZWFyR3JhZGllbnQ+CjxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQxX2xpbmVhciIgeDE9IjU0LjkzODkiIHkxPSI4MS4zODUyIiB4Mj0iNTQuOTM4OSIgeTI9IjEzNy4yMjgiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0iIzgxRDJGRiIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiM2RUI3RkYiLz4KPC9saW5lYXJHcmFkaWVudD4KPC9kZWZzPgo8L3N2Zz4K"},67944:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMzQiIGhlaWdodD0iMTg2IiBmaWxsPSJub25lIiB2aWV3Qm94PSIwIDAgMTM0IDE4NiI+CiAgPGRlZnMvPgogIDxwYXRoIGZpbGw9InVybCgjcGFpbnQwX2xpbmVhcikiIGQ9Ik0wIDQ0YTE0IDE0IDAgMDExNC0xNGgxMDZhMTQgMTQgMCAwMTE0IDE0djEyN2ExNCAxNCAwIDAxLTE0IDE0SDE0YTE0IDE0IDAgMDEtMTQtMTRWNDR6Ii8+CiAgPG1hc2sgaWQ9ImEiIHdpZHRoPSIxMzQiIGhlaWdodD0iMzMiIHg9IjAiIHk9IjE1MiIgbWFza1VuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgICA8cGF0aCBmaWxsPSIjQzRDNEM0IiBkPSJNMCAxNTJoMTM0djI3YTYgNiAwIDAxLTYgNkgwdi0zM3oiLz4KICA8L21hc2s+CiAgPGcgZmlsdGVyPSJ1cmwoI2ZpbHRlcjBfZikiIG1hc2s9InVybCgjYSkiIG9wYWNpdHk9Ii42Ij4KICAgIDxwYXRoIGZpbGw9IiMyMjE1NDgiIGQ9Ik0xMi41IDE3OC44MkwxMCAxNjUuODZoMTEzYTE4LjM4IDE4LjM4IDAgMDEtMTcuNTcgMTIuOTZIMTIuNXoiLz4KICA8L2c+CiAgPHBhdGggZmlsbD0idXJsKCNwYWludDFfbGluZWFyKSIgZD0iTTYgMTQwYTkgOSAwIDAxOS05aDExM3YzOGExMCAxMCAwIDAxLTEwIDEwSDE2YTEwIDEwIDAgMDEtMTAtMTB2LTI5eiIvPgogIDxwYXRoIGZpbGw9InVybCgjcGFpbnQyX2xpbmVhcikiIGQ9Ik02IDQ2YTEwIDEwIDAgMDExMC0xMGgxMDJhMTAgMTAgMCAwMTEwIDEwdjg1bC00NyA0OEgxNmExMCAxMCAwIDAxLTEwLTEwVjQ2eiIvPgogIDxwYXRoIGZpbGw9IiNDQkNCRDgiIGQ9Ik00NSAxMTcuNWExLjUgMS41IDAgMDExLjUtMS41aDQwYTEuNSAxLjUgMCAwMTAgM2gtNDBhMS41IDEuNSAwIDAxLTEuNS0xLjV6bTUgOGExLjUgMS41IDAgMDExLjUtMS41SDU5YTEuNSAxLjUgMCAwMTAgM2gtNy41YTEuNSAxLjUgMCAwMS0xLjUtMS41em0xNCAwYTEuNSAxLjUgMCAwMTEuNS0xLjVoMTZhMS41IDEuNSAwIDAxMCAzaC0xNmExLjUgMS41IDAgMDEtMS41LTEuNXoiIG9wYWNpdHk9Ii40NiIvPgogIDxwYXRoIGZpbGw9InVybCgjcGFpbnQzX2xpbmVhcikiIGQ9Ik0xMjggMTMxbC00NyA0OHYtNDJhNiA2IDAgMDE2LTZoNDF6Ii8+CiAgPG1hc2sgaWQ9ImIiIHdpZHRoPSIxMjIiIGhlaWdodD0iMzMiIHg9IjYiIHk9IjQwIiBtYXNrVW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgIDxwYXRoIGZpbGw9IiNDNEM0QzQiIGQ9Ik02IDQwaDEyMnYyN2E2IDYgMCAwMS02IDZINlY0MHoiLz4KICA8L21hc2s+CiAgPGcgZmlsdGVyPSJ1cmwoI2ZpbHRlcjFfZikiIG1hc2s9InVybCgjYikiIG9wYWNpdHk9Ii40Ij4KICAgIDxwYXRoIGZpbGw9IiMyMjE1NDgiIGQ9Ik0zMSA0OVYzNmg3M3YxM0gzMXoiLz4KICA8L2c+CiAgPHBhdGggZmlsbD0idXJsKCNwYWludDRfbGluZWFyKSIgZD0iTTY2Ljk5IDBBMTMuOTggMTMuOTggMCAwMDUzIDEzLjk2VjMzaDI4VjEzLjk2QTE0IDE0IDAgMDA2Ni45OSAwem0wIDIwLjM4YTYuMTIgNi4xMiAwIDAxLTYuMTQtNi4xMyA2LjEyIDYuMTIgMCAwMTYuMTQtNi4xMyA2LjEyIDYuMTIgMCAwMTYuMTMgNi4xM0E2LjEyIDYuMTIgMCAwMTY3IDIwLjM4eiIvPgogIDxwYXRoIGZpbGw9InVybCgjcGFpbnQ1X2xpbmVhcikiIGQ9Ik0xMDcuOTcgNDdIMjZWMzEuODlBOC44IDguOCAwIDAxMzQuNzMgMjNoNjQuNTRhOC44IDguOCAwIDAxOC43MyA4Ljg5VjQ3aC0uMDN6Ii8+CiAgPHBhdGggZmlsbD0iIzRBNzY5RiIgZD0iTTI2IDQ0aDgydjNIMjZ6Ii8+CiAgPHBhdGggZmlsbD0idXJsKCNwYWludDZfbGluZWFyKSIgZD0iTTI2LjAzIDM0SDEwOHYtMi4xMUE4LjggOC44IDAgMDA5OS4yNyAyM0gzNC43M0E4LjggOC44IDAgMDAyNiAzMS44OVYzNGguMDN6Ii8+CiAgPHBhdGggZmlsbD0iI0NCQ0JEOCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNjMuNzQgNjcuNWE3Ljk5IDcuOTkgMCAwMTIuOC0uNWMuOTcgMCAxLjkyLjE4IDIuOC41YTEuNSAxLjUgMCAwMS0xLjA2IDIuODEgNC45OSA0Ljk5IDAgMDAtMS43NS0uMzFjLS42MSAwLTEuMi4xMS0xLjc0LjMxYTEuNSAxLjUgMCAxMS0xLjA1LTIuOHptOC4zNiAzLjgyYTEuNSAxLjUgMCAwMTEuOTMuODggOCA4IDAgMDEwIDUuNiAxLjUgMS41IDAgMDEtMi44LTEuMDUgNSA1IDAgMDAwLTMuNSAxLjUgMS41IDAgMDEuODctMS45M3ptLTExLjEzIDBhMS41IDEuNSAwIDAxLjg4IDEuOTMgNC45OSA0Ljk5IDAgMDAtLjMyIDEuNzVjMCAuNjIuMTEgMS4yLjMyIDEuNzVhMS41IDEuNSAwIDAxLTIuODEgMS4wNSA3Ljk5IDcuOTkgMCAwMS0uNS0yLjhjMC0uOTguMTctMS45Mi41LTIuOGExLjUgMS41IDAgMDExLjkzLS44OHptMS44OSA5LjI1YTEuNSAxLjUgMCAwMTEuOTMtLjg4IDUgNSAwIDAwMy41IDAgMS41IDEuNSAwIDExMS4wNCAyLjggNy45OSA3Ljk5IDAgMDEtMi44LjUxIDcuOTkgNy45OSAwIDAxLTIuOC0uNSAxLjUgMS41IDAgMDEtLjg3LTEuOTN6bTMuMTcgOC45M2MtLjcgMC0xLjQuMDQtMi4wOC4xMmExLjUgMS41IDAgMDEtLjM2LTIuOTggMjEuMDggMjEuMDggMCAwMTQuODggMCAxLjUgMS41IDAgMDEtLjM0IDIuOTggMTguMSAxOC4xIDAgMDAtMi4xLS4xMnptNS4yNy0uODNhMS41IDEuNSAwIDAxMS45NC0uODggMTguOTkgMTguOTkgMCAwMTQuMzMgMi4zMiAxLjUgMS41IDAgMDEtMS43NCAyLjQ0IDE1Ljk5IDE1Ljk5IDAgMDAtMy42Ni0xLjk1IDEuNSAxLjUgMCAwMS0uODctMS45M3ptLTEwLjUzIDBhMS41IDEuNSAwIDAxLS44NyAxLjk0IDE2LjM1IDE2LjM1IDAgMDAtMy42NiAxLjk2IDEuNSAxLjUgMCAwMS0xLjc0LTIuNDUgMTkuMzUgMTkuMzUgMCAwMTQuMzQtMi4zMSAxLjUgMS41IDAgMDExLjkzLjg3em0tNy43NiA0LjZhMS41IDEuNSAwIDAxLjIyIDIuMSAxNC4yNCAxNC4yNCAwIDAwLTEuMTggMS43IDguNyA4LjcgMCAwMC0xLjA4IDIuNTIgMS41IDEuNSAwIDExLTIuOTQtLjY0Yy4yNC0xLjA4LjczLTIuMjMgMS40NS0zLjQzLjQyLS43LjktMS4zOSAxLjQyLTIuMDNhMS41IDEuNSAwIDAxMi4xMS0uMjJ6bTI2LjA0IDBhMS41IDEuNSAwIDAxMi4xMS4yMmMuNTIuNjQgMSAxLjMyIDEuNDMgMi4wMi43MiAxLjIgMS4yMiAyLjM0IDEuNDUgMy40NGExLjUgMS41IDAgMTEtMi45My42MyA4LjM2IDguMzYgMCAwMC0xLjA5LTIuNSAxNS4zMSAxNS4zMSAwIDAwLTEuMTktMS43IDEuNSAxLjUgMCAwMS4yMi0yLjF6bTIuNTEgMTAuNDNhMS41IDEuNSAwIDAxLTEuMDMgMS44NmMtMS4wNy4zLTIuOTguNDQtNC4zMi40NGgtMi41NGExLjUgMS41IDAgMDEwLTNoMi41NGMxLjEzIDAgMi43Ni0uMTEgMy41LS4zM2ExLjUgMS41IDAgMDExLjg1IDEuMDN6bS0zMS4wMyAwYTEuNSAxLjUgMCAwMTEuODUtMS4wM2MuNzUuMiAyLjM0LjMzIDMuNDcuMzNoMi41NWExLjUgMS41IDAgMDEwIDNoLTIuNTRjLTEuMzQgMC0zLjIyLS4xNC00LjI5LS40NWExLjUgMS41IDAgMDEtMS4wNC0xLjg1em0xMS40Ni44YTEuNSAxLjUgMCAwMTEuNS0xLjVoNS4wOWExLjUgMS41IDAgMDEwIDNoLTUuMDlhMS41IDEuNSAwIDAxLTEuNS0xLjV6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIG9wYWNpdHk9Ii40NiIvPgogIDxkZWZzPgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDBfbGluZWFyIiB4MT0iNjciIHgyPSI2NyIgeTE9IjIwIiB5Mj0iMTg1IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiNFODkxNkMiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjQ0U3NzVCIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDFfbGluZWFyIiB4MT0iNzEuNSIgeDI9IjE2OSIgeTE9IjE2OCIgeTI9IjEzOC41IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiNDMkMwQzkiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjRjlGOUY5Ii8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDJfbGluZWFyIiB4MT0iMTA4LjUiIHgyPSI0OS44OSIgeTE9IjI0MSIgeTI9IjQzLjA2IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiNFMERGRTIiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjRjlGOUY5Ii8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDNfbGluZWFyIiB4MT0iMTE0IiB4Mj0iOTYuMyIgeTE9IjE3MS41IiB5Mj0iMTM2LjEiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iI0UwREZFMiIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZmYiLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50NF9saW5lYXIiIHgxPSI2NyIgeDI9IjY3IiB5MT0iLTEiIHkyPSIyNiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjQjVFREZGIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzZDQjBGRiIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQ1X2xpbmVhciIgeDE9IjY3IiB4Mj0iNjciIHkxPSIyMyIgeTI9IjQ3IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiNEN0UwRTMiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjOTJDM0ZDIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDZfbGluZWFyIiB4MT0iNTciIHgyPSI2NyIgeTE9IjE2IiB5Mj0iMzQiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iI2ZmZiIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iMCIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxmaWx0ZXIgaWQ9ImZpbHRlcjBfZiIgd2lkdGg9IjE0Ni4zOSIgaGVpZ2h0PSI0Ni4zNiIgeD0iLTYuNyIgeT0iMTQ5LjE2IiBjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnM9InNSR0IiIGZpbHRlclVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgICAgIDxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+CiAgICAgIDxmZUJsZW5kIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9IkJhY2tncm91bmRJbWFnZUZpeCIgcmVzdWx0PSJzaGFwZSIvPgogICAgICA8ZmVHYXVzc2lhbkJsdXIgcmVzdWx0PSJlZmZlY3QxX2ZvcmVncm91bmRCbHVyIiBzdGREZXZpYXRpb249IjguMzUiLz4KICAgIDwvZmlsdGVyPgogICAgPGZpbHRlciBpZD0iZmlsdGVyMV9mIiB3aWR0aD0iODUiIGhlaWdodD0iMjUiIHg9IjI1IiB5PSIzMCIgY29sb3ItaW50ZXJwb2xhdGlvbi1maWx0ZXJzPSJzUkdCIiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8ZmVGbG9vZCBmbG9vZC1vcGFjaXR5PSIwIiByZXN1bHQ9IkJhY2tncm91bmRJbWFnZUZpeCIvPgogICAgICA8ZmVCbGVuZCBpbj0iU291cmNlR3JhcGhpYyIgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIHJlc3VsdD0ic2hhcGUiLz4KICAgICAgPGZlR2F1c3NpYW5CbHVyIHJlc3VsdD0iZWZmZWN0MV9mb3JlZ3JvdW5kQmx1ciIgc3RkRGV2aWF0aW9uPSIzIi8+CiAgICA8L2ZpbHRlcj4KICA8L2RlZnM+Cjwvc3ZnPgo="},24900:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxODQiIGhlaWdodD0iMTU2IiBmaWxsPSJub25lIiB2aWV3Qm94PSIwIDAgMTg0IDE1NiI+CiAgPGRlZnMvPgogIDxwYXRoIGZpbGw9IiNFQTc5NUEiIGQ9Ik0xMDUuOSA1Ni4xMUg4My45M3Y5OS40MmgyMS45OVY1Ni4xMXoiLz4KICA8cGF0aCBmaWxsPSJ1cmwoI3BhaW50MF9saW5lYXIpIiBkPSJNMTA1LjkgMTE1LjU2bC0yMS45OC0xMS44OFY2Mi41NGgyMS45OXY1My4wMnoiLz4KICA8cGF0aCBmaWxsPSJ1cmwoI3BhaW50MV9saW5lYXIpIiBkPSJNMTY1Ljk1IDc1LjU2SDI3LjM1YTQuMDEgNC4wMSAwIDAxLTQuMDItNC4wMnYtMzkuMkEzMi4zNSAzMi4zNSAwIDAxNTUuNjggMGg3Ny44NGEzMi4zNSAzMi4zNSAwIDAxMzIuMzUgMzIuMzV2NDMuMjFoLjA4eiIvPgogIDxwYXRoIGZpbGw9InVybCgjcGFpbnQyX2xpbmVhcikiIGQ9Ik04My45MiA3NS41NkgyNy42NHYtNDMuM0EyOC4xMyAyOC4xMyAwIDAxNTUuNzYgNC4xNGEyOC4xMyAyOC4xMyAwIDAxMjguMTIgMjguMTJ2NDMuM2guMDR6Ii8+CiAgPHBhdGggZmlsbD0idXJsKCNwYWludDNfbGluZWFyKSIgZD0iTTgzLjY3IDc1LjA5SDI3LjM5di00My4zQTI4LjEzIDI4LjEzIDAgMDE1NS41MSAzLjY3IDI4LjEzIDI4LjEzIDAgMDE4My42MyAzMS44djQzLjNoLjA0eiIvPgogIDxwYXRoIGZpbGw9InVybCgjcGFpbnQ0X2xpbmVhcikiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTE1NS40MSA0My40MnYyNC4xOWEyLjQ1IDIuNDUgMCAwMDIuNDUgMi40NWgxNy41NWMxLjM1IDAgMi40NS0xLjEgMi40NS0yLjQ1VjM3LjA4YTIuNDUgMi40NSAwIDAwLTIuNDUtMi40NWgtNjguMTZhNC40MiA0LjQyIDAgMDAtNC40IDQuNCA0LjQgNC40IDAgMDA0LjQgNC40aDQ4LjE2eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+CiAgPHBhdGggZmlsbD0idXJsKCNwYWludDVfbGluZWFyKSIgZD0iTTgzLjkyIDc1LjU2aC01LjQ1djIuNDVIMjcuNjRsLTE0IDEwLjA3UzEwLjA2IDkwLjcgOSA5NC4zOGwtLjMtLjM0djIuMzdjMCAxLjgxLjc2IDMuODQgMi44MyA1LjgzIDYuNiA1LjU4IDMwLjY2IDcuMjcgNDguNDYtNi4xM2E0NjU3LjAxIDQ2NTcuMDEgMCAwMDIzLjkzLTE4LjE0di0yLjR6Ii8+CiAgPHBhdGggZmlsbD0iI0I4RTJGRiIgZD0iTTI3LjY0IDc1LjU2bC0xNCAxMC4wNnMtOS41NSA3LjAyLTIuMSAxNC4yMWM2LjU5IDUuNTggMzAuNjUgNy4yNyA0OC40NS02LjEzIDE3LjgtMTMuNCAyMy45My0xOC4xNCAyMy45My0xOC4xNEgyNy42NHoiLz4KICA8cGF0aCBmaWxsPSIjZmZmIiBkPSJNMTA2Ljg0IDQxLjQ0YTIuMDcgMi4wNyAwIDEwMC00LjE0IDIuMDcgMi4wNyAwIDAwMCA0LjE0eiIvPgogIDxwYXRoIGZpbGw9IiMzODM4NUYiIGQ9Ik0xNjQuNTYgMTM3Ljc1YTEuMTUgMS4xNSAwIDAxMi4wNy4wNWw4LjM2IDE4LjAzaC0xOS44Nmw5LjQzLTE4LjA4eiIvPgogIDxwYXRoIGZpbGw9IiM1QUQwOTgiIGQ9Ik05LjQzIDEzNy43NWExLjE1IDEuMTUgMCAwMTIuMDcuMDVsOC4zNiAxOC4wM0gwbDkuNDMtMTguMDh6bTE3MS42Ni42OGExLjE1IDEuMTUgMCAwMTIuMDguN3YxNi43SDE2OGwxMy4xLTE3LjR6Ii8+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MF9saW5lYXIiIHgxPSI5NC44MSIgeDI9Ijk0LjgxIiB5MT0iNzUuOTQiIHkyPSIxMDAuMTkiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iIzBEMEE0NCIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMwRDBBNDQiIHN0b3Atb3BhY2l0eT0iMCIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQxX2xpbmVhciIgeDE9Ijk0LjY0IiB4Mj0iOTQuNjQiIHkxPSIwIiB5Mj0iNzUuNTYiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iI0I5RTJGRiIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiM3M0I1RTQiLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50Ml9saW5lYXIiIHgxPSI3NC44MSIgeDI9IjI4LjEyIiB5MT0iMjYuMjIiIHkyPSI3NS4zMyIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjMEQwQTQ0Ii8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzBEMEE0NCIgc3RvcC1vcGFjaXR5PSIwIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDNfbGluZWFyIiB4MT0iNzQuNTUiIHgyPSIyNy44NyIgeTE9IjI1Ljc1IiB5Mj0iNzQuODYiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iIzBEMEE0NCIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMwRDBBNDQiIHN0b3Atb3BhY2l0eT0iMCIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQ0X2xpbmVhciIgeDE9IjE0OC4yIiB4Mj0iMTQ4LjIiIHkxPSIzNC44IiB5Mj0iNjkuNiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjRUI3QTc1Ii8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI0UwMjYyNiIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQ1X2xpbmVhciIgeDE9IjI1LjciIHgyPSI2Mi42OCIgeTE9Ijc3LjE1IiB5Mj0iMTAzLjgzIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiNCOUUyRkYiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjMTU3MUIzIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogIDwvZGVmcz4KPC9zdmc+Cg=="},58519:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNDYiIGhlaWdodD0iMTU2IiBmaWxsPSJub25lIiB2aWV3Qm94PSIwIDAgMTQ2IDE1NiI+CiAgPGRlZnMvPgogIDxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMCkiPgogICAgPHBhdGggZmlsbD0iI0VCRURGMyIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNODkuMDkgMEgyMi4yNkE2LjI2IDYuMjYgMCAwMDE2IDYuMjZ2MTMxLjQ4YTYuMjYgNi4yNiAwIDAwNi4yNiA2LjI2aDEwMi42OGE2LjI2IDYuMjYgMCAwMDYuMjYtNi4yNlY0Mi4xMUw4OS4wOS4wMXoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPgogICAgPHBhdGggZmlsbD0iI0Y4RjhGOCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNODkuMDkgMGw0Mi4xIDQyLjFIOTUuMzZhNi4yNiA2LjI2IDAgMDEtNi4yNi02LjI1VjB6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz4KICAgIDxnIGZpbHRlcj0idXJsKCNmaWx0ZXIwX2YpIiBvcGFjaXR5PSIuMzEiPgogICAgICA8cGF0aCBmaWxsPSIjMjIxNTQ4IiBkPSJNODAuMDYgMTEzLjQ4QTMwLjA1IDMwLjA1IDAgMDE0NS4yOCA5MS44bC0uMDctLjI4YTMwLjcgMzAuNyAwIDAxMy43LTI0LjQxTDYwLjcgNDguNWwtMy40NCAyMi45QTE4LjggMTguOCAwIDAwNzUuODYgOTNoNC4wOWExOC44MyAxOC44MyAwIDAxMTEuOTcgNC4zbDMuMjggMi43IDE2LjUgMTUuNSAyMC41IDI4LjVoLTcuNWwtMzQuNS0zMi41LTEwLjE1IDEuOTh6Ii8+CiAgICA8L2c+CiAgICA8cGF0aCBmaWxsPSJ1cmwoI3BhaW50MF9saW5lYXIpIiBkPSJNOTguMDMgMTE0LjE0YTIgMiAwIDAxMC0yLjgybDcuNzgtNy43OGEyIDIgMCAwMTIuODMgMGwzMC45MiAzMC45MmE3LjUgNy41IDAgMDEtMTAuNiAxMC42bC0zMC45My0zMC45MnoiLz4KICAgIDxwYXRoIGZpbGw9IiM4Mzg1OTciIGQ9Ik05MS42NyAxMDIuMTJsNC45NS00Ljk1IDcuNzggNy43OC00Ljk1IDQuOTUtNy43OC03Ljc4eiIvPgogICAgPHBhdGggZmlsbD0idXJsKCNwYWludDFfbGluZWFyKSIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNOTcuMzMgMTAyLjEyYTM0IDM0IDAgMTAtNDguMDktNDguMDggMzQgMzQgMCAwMDQ4LjA5IDQ4LjA4em0tMy41NC0zLjUzYTI5IDI5IDAgMTAtNDEuMDEtNDEuMDEgMjkgMjkgMCAwMDQxLjAxIDQxeiIgY2xpcC1ydWxlPSJldmVub2RkIi8+CiAgICA8Y2lyY2xlIGN4PSI3My4yOCIgY3k9Ijc4LjA4IiByPSIyOSIgZmlsbD0idXJsKCNwYWludDJfbGluZWFyKSIgdHJhbnNmb3JtPSJyb3RhdGUoLTQ1IDczLjI4IDc4LjA4KSIvPgogICAgPGVsbGlwc2UgY3g9IjgyLjMzIiBjeT0iNjAuNDgiIGZpbGw9IiNmZmYiIHJ4PSI1LjQ0IiByeT0iOS45NCIgdHJhbnNmb3JtPSJyb3RhdGUoLTYxLjkyIDgyLjMzIDYwLjQ4KSIvPgogIDwvZz4KICA8ZGVmcz4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQwX2xpbmVhciIgeDE9IjEyMS4yIiB4Mj0iMTA2LjYxIiB5MT0iMTIyLjUiIHkyPSIxMzguMiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjRkZBMTgwIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzg0MEQwRCIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQxX2xpbmVhciIgeDE9Ijc2LjI0IiB4Mj0iNTIuMiIgeTE9IjExMi41MyIgeTI9IjQzLjUiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iIzk2OTdBQiIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNEQ0RFRTMiLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50Ml9saW5lYXIiIHgxPSI2Ni41NyIgeDI9IjgxLjkzIiB5MT0iMTA4LjAyIiB5Mj0iNDIuMzgiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iI0VCRURGMyIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iLjc0Ii8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGNsaXBQYXRoIGlkPSJjbGlwMCI+CiAgICAgIDxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0wIDBoMTQ2djE1NkgweiIvPgogICAgPC9jbGlwUGF0aD4KICAgIDxmaWx0ZXIgaWQ9ImZpbHRlcjBfZiIgd2lkdGg9IjExOC4wNSIgaGVpZ2h0PSIxMjUuNSIgeD0iMjkuMTUiIHk9IjMzLjUiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiIgZmlsdGVyVW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPGZlRmxvb2QgZmxvb2Qtb3BhY2l0eT0iMCIgcmVzdWx0PSJCYWNrZ3JvdW5kSW1hZ2VGaXgiLz4KICAgICAgPGZlQmxlbmQgaW49IlNvdXJjZUdyYXBoaWMiIGluMj0iQmFja2dyb3VuZEltYWdlRml4IiByZXN1bHQ9InNoYXBlIi8+CiAgICAgIDxmZUdhdXNzaWFuQmx1ciByZXN1bHQ9ImVmZmVjdDFfZm9yZWdyb3VuZEJsdXIiIHN0ZERldmlhdGlvbj0iNy41Ii8+CiAgICA8L2ZpbHRlcj4KICA8L2RlZnM+Cjwvc3ZnPgo="},37506:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMTYiIGhlaWdodD0iMTUyIiBmaWxsPSJub25lIiB2aWV3Qm94PSIwIDAgMjE2IDE1MiI+CiAgPGRlZnMvPgogIDxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMCkiPgogICAgPHBhdGggZmlsbD0idXJsKCNwYWludDBfbGluZWFyKSIgZD0iTTE4MC4xNSA2NC43NGEzNC43MiAzNC43MiAwIDExMCA2OS40M2gtMTUuMTFMMTQyLjkxIDE1MnYtMTcuODNoLTQuOThhMzQuNzIgMzQuNzIgMCAwMTAtNjkuNDNoNDIuMjJ6Ii8+CiAgICA8cGF0aCBmaWxsPSIjZmZmIiBkPSJNMTM2LjA1IDk0LjNhMi4zNSAyLjM1IDAgMDEyLjM0LTIuMzVoMTMuMTRhMi4zNSAyLjM1IDAgMTEwIDQuN2gtMTMuMTRhMi4zNSAyLjM1IDAgMDEtMi4zNC0yLjM1em0yNC40IDBhMi4zNSAyLjM1IDAgMDEyLjM0LTIuMzVoMjEuNThhMi4zNSAyLjM1IDAgMDEwIDQuN2gtMjEuNThhMi4zNSAyLjM1IDAgMDEtMi4zNS0yLjM1em0tMjQuNCAxMy4xM2EyLjM1IDIuMzUgMCAwMTIuMzQtMi4zNGgyMS41OWEyLjM1IDIuMzUgMCAwMTAgNC42OWgtMjEuNTlhMi4zNSAyLjM1IDAgMDEtMi4zNC0yLjM1eiIvPgogICAgPHBhdGggZmlsbD0idXJsKCNwYWludDFfbGluZWFyKSIgZD0iTTE3LjgzIDBBMTcuODMgMTcuODMgMCAwMDAgMTcuODN2MzUuNjVjMCA5Ljg1IDcuOTggMTcuODMgMTcuODMgMTcuODNoMzMuM2wzMC4yIDIzLjkzVjcxLjNoNC4wNWM5Ljg1IDAgMTcuODMtNy45OCAxNy44My0xNy44M1YxNy44M0MxMDMuMjEgNy45OCA5NS4yMyAwIDg1LjM4IDBIMTcuODN6Ii8+CiAgICA8Y2lyY2xlIGN4PSIzNC43MiIgY3k9IjM2LjU5IiByPSI0LjY5IiBmaWxsPSIjZmZmIi8+CiAgICA8Y2lyY2xlIGN4PSI1MS42IiBjeT0iMzYuNTkiIHI9IjQuNjkiIGZpbGw9IiNmZmYiLz4KICAgIDxjaXJjbGUgY3g9IjY4LjQ5IiBjeT0iMzYuNTkiIHI9IjQuNjkiIGZpbGw9IiNmZmYiLz4KICA8L2c+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MF9saW5lYXIiIHgxPSIxNzguMjciIHgyPSIxNzcuNTUiIHkxPSIxNTIiIHkyPSI0Ni40NSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjQTNDRUY0Ii8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI0QwRjRGRiIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQxX2xpbmVhciIgeDE9IjU0Ljg5IiB4Mj0iNTYuNzciIHkxPSIwIiB5Mj0iOTYuNjQiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iIzQ2RDNGRiIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiM0MzhFRkYiLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8Y2xpcFBhdGggaWQ9ImNsaXAwIj4KICAgICAgPHBhdGggZmlsbD0iI2ZmZiIgZD0iTTAgMGgyMTZ2MTUySDB6Ii8+CiAgICA8L2NsaXBQYXRoPgogIDwvZGVmcz4KPC9zdmc+Cg=="},16995:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNjgiIGhlaWdodD0iMTY0IiBmaWxsPSJub25lIiB2aWV3Qm94PSIwIDAgMTY4IDE2NCI+CiAgPGRlZnMvPgogIDxwYXRoIGZpbGw9InVybCgjcGFpbnQwX2xpbmVhcikiIGQ9Ik0xNTcuNzMgMTY0SDEwLjFDNC40OCAxNjQgMCAxNTkuNTMgMCAxNTMuOVY1N2gxNjh2OTYuOWExMC40IDEwLjQgMCAwMS0xMC4yNyAxMC4xeiIvPgogIDxwYXRoIGZpbGw9IiMzRDRGODIiIGQ9Ik0wIDU3bDgzLjY4IDU5LjExTDE2OCA1N0gweiIvPgogIDxwYXRoIGZpbGw9IiMzQjRDODAiIGQ9Ik0xNjggNTdMODguNjUgMS42MmE4LjQ2IDguNDYgMCAwMC05Ljk0IDBMMCA1N2gxNjh6Ii8+CiAgPHBhdGggZmlsbD0idXJsKCNwYWludDFfbGluZWFyKSIgZD0iTTE0My42NiA3My44NmwtNTkuOTggNDIuMjUtNTkuODItNDIuMjVWMTQuN2gxMTkuOHY1OS4xNnoiLz4KICA8cGF0aCBmaWxsPSIjNjE5MUZDIiBkPSJNODMuNTQgNDBzLTEzLjU3LS40Ny0xNi40IDE0LjU5djEwLjI4cy4wOSAxLjEgMy4yMiAzLjM3YzMuMTQgMi4yNyAxMS4wNiA4LjU1IDEzLjE4IDguNTUgMi4xMiAwIDEwLjEyLTYuMzYgMTMuMTgtOC41NSAzLjA2LTIuMiAzLjIxLTMuMzcgMy4yMS0zLjM3VjU0LjU5Qzk3LjIgMzkuNTMgODMuNTQgNDAgODMuNTQgNDB6bTkuMzMgMjAuMjRINzQuMjh2LTUuNTdhMTAuMTIgMTAuMTIgMCAwMTkuMzQtNy42YzQuNDcuMTUgOC4yMyAzLjI5IDkuMzMgNy42djUuNTdoLS4wOHoiLz4KICA8cGF0aCBmaWxsPSIjNjE5MUZDIiBkPSJNODMuNTQgNzkuMDZhOS40MyA5LjQzIDAgMDEtMy43Ny0xLjMzTDY3LjE0IDY4Ljd2MTUuNTNhMS45MiAxLjkyIDAgMDAyLjA0IDEuOGgyOC42M2MxLjEuMDggMi4wNC0uNyAyLjEyLTEuNzJWNjguN0w4Ny4zIDc3LjczYTguNjYgOC42NiAwIDAxLTMuNzYgMS4zM3oiLz4KICA8cGF0aCBmaWxsPSJ1cmwoI3BhaW50Ml9saW5lYXIpIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNi4xNSAxNjMuODhoMTQxLjFhMTAuNCAxMC40IDAgMDAxMC4yNy0xMC4xMVY1Ny4zNEwxNi4xNSAxNjMuODh6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz4KICA8ZGVmcz4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQwX2xpbmVhciIgeDE9IjI0LjUiIHgyPSI2IiB5MT0iNTciIHkyPSIxODEuNSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjOUFENkZGIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzRGQjZGRiIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQxX2xpbmVhciIgeDE9IjgzLjc2IiB4Mj0iODMuNzYiIHkxPSIxNC43MSIgeTI9IjExNi4xMSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjZmZmIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI0ZGRjNFRiIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQyX2xpbmVhciIgeDE9IjE1OS41IiB4Mj0iOTIuMSIgeTE9IjU3LjM0IiB5Mj0iMTY0LjA1IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiM5QUQ2RkYiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjNEZCNkZGIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogIDwvZGVmcz4KPC9zdmc+Cg=="},34019:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNDkiIGhlaWdodD0iODIiIHZpZXdCb3g9IjAgMCAxNDkgODIiPjxnPjxnIHN0cm9rZT0iI2RkZTZlYyIgZmlsbD0ibm9uZSI+PGc+PHBhdGggc3Ryb2tlPSJub25lIiBkPSJNMCAwaDE0OXY4MmgtMTQ5eiIvPjxwYXRoIGQ9Ik0uNS41aDE0OHY4MWgtMTQ4eiIvPjwvZz48Zz48cGF0aCBkPSJNMiAwaDExNGEyIDIgMCAwIDEgMiAydjY3aC0xMTh2LTY3YTIgMiAwIDAgMSAyLTJ6IiBzdHJva2U9Im5vbmUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI3IDEzKSIvPjxwYXRoIGQ9Ik0yIC41aDExNGExLjUgMS41IDAgMCAxIDEuNSAxLjV2NjZhLjUuNSAwIDAgMS0uNS41aC0xMTZhLjUuNSAwIDAgMS0uNS0uNXYtNjZhMS41IDEuNSAwIDAgMSAxLjUtMS41eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjcgMTMpIi8+PC9nPjxwYXRoIGQ9Ik01LjUuNXY4MSIvPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzMzIC02NjEpIHRyYW5zbGF0ZSgtMTczIDgzKSI+PHBhdGggc3Ryb2tlPSIjZGRlNmVjIiBmaWxsPSJub25lIiBkPSJNNTk3LjUgNTk1LjVoMzkiLz48cGF0aCBkPSJNNTkyLjUgNjA1LjVoNTgiIHN0cm9rZT0iI2RkZTZlYyIgZmlsbD0ibm9uZSIvPjxjaXJjbGUgY3g9IjEuNSIgY3k9IjEuNSIgcj0iMS41IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1OTggNTk5KSIgZmlsbD0iI2RkZTZlYyIvPjxjaXJjbGUgY3g9IjEuNSIgY3k9IjEuNSIgcj0iMS41IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2MDIgNTk5KSIgZmlsbD0iI2RkZTZlYyIvPjxjaXJjbGUgY3g9IjEuNSIgY3k9IjEuNSIgcj0iMS41IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2MDYgNTk5KSIgZmlsbD0iI2RkZTZlYyIvPjxwYXRoIHN0cm9rZT0iI2RkZTZlYyIgZmlsbD0ibm9uZSIgZD0iTTYzOS41IDU5NS41aDYiLz48cGF0aCBzdHJva2U9IiNkZGU2ZWMiIGZpbGw9Im5vbmUiIGQ9Ik02MzkuNSA2MDAuNWg2Ii8+PHBhdGggc3Ryb2tlPSIjZGRlNmVjIiBmaWxsPSJub25lIiBkPSJNNTk3LjUgNjEzLjVoNDgiLz48ZyBzdHJva2U9IiNkZGU2ZWMiIGZpbGw9Im5vbmUiPjxwYXRoIHN0cm9rZT0ibm9uZSIgZD0iTTU5OCA2MTloNDh2MzFoLTQ4eiIvPjxwYXRoIGQ9Ik01OTguNSA2MTkuNWg0N3YzMGgtNDd6Ii8+PC9nPjxwYXRoIHN0cm9rZT0iI2RkZTZlYyIgZmlsbD0ibm9uZSIgZD0iTTU5OC41IDYyNS41aDQ3Ii8+PHBhdGggc3Ryb2tlPSIjZGRlNmVjIiBmaWxsPSJub25lIiBkPSJNNjAzLjUgNjMxLjVoMzgiLz48cGF0aCBzdHJva2U9IiNkZGU2ZWMiIGZpbGw9Im5vbmUiIGQ9Ik02MDMuNSA2MzQuNWgzOCIvPjxwYXRoIHN0cm9rZT0iI2RkZTZlYyIgZmlsbD0ibm9uZSIgZD0iTTYwMy41IDYzNy41aDM4Ii8+PHBhdGggZD0iTTYwMy41IDY0MC41aDI4IiBzdHJva2U9IiNkZGU2ZWMiIGZpbGw9Im5vbmUiLz48cGF0aCBkPSJNNjAzLjUgNjQzLjVoOCIgc3Ryb2tlPSIjZGRlNmVjIiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTU5Mi40MjcgNTkxLjU3M3Y2Ny42NDEiIHN0cm9rZT0iI2RkZTZlYyIgZmlsbD0ibm9uZSIvPjwvZz48ZyBzdHJva2U9IiM2NTdlZTQiPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zMzMgLTY2MSkgdHJhbnNsYXRlKDM2MCA2NzQpIiBzdHJva2Utd2lkdGg9IjIiIGZpbGw9Im5vbmUiPjxwYXRoIGQ9Ik0yIDBoNTd2MTZoLTU5di0xNGEyIDIgMCAwIDEgMi0yeiIgc3Ryb2tlPSJub25lIi8+PHJlY3QgeD0iMSIgeT0iMSIgd2lkdGg9IjU3IiBoZWlnaHQ9IjE0IiByeD0iMSIvPjwvZz48Zz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzMzIC02NjEpIHRyYW5zbGF0ZSgzNjQgNjc4KSIgZmlsbD0ibm9uZSI+PGNpcmNsZSBjeD0iNCIgY3k9IjQiIHI9IjQiIHN0cm9rZT0ibm9uZSIvPjxjaXJjbGUgY3g9IjQiIGN5PSI0IiByPSIzLjUiLz48L2c+PHBhdGggc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIiBkPSJNNDEuNSAxOWgxNCIvPjxwYXRoIGQ9Ik00MS41IDIzLjVoMjQiIGZpbGw9Im5vbmUiLz48cGF0aCBkPSJNNzQgMTloNyIgZmlsbD0ibm9uZSIvPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zMzMgLTY2MSkgdHJhbnNsYXRlKDQwNyA2ODQpIiBmaWxsPSIjNjU3ZWU0Ij48Y2lyY2xlIGN4PSIuNSIgY3k9Ii41IiByPSIuNSIgc3Ryb2tlPSJub25lIi8+PGNpcmNsZSBjeD0iLjUiIGN5PSIuNSIgZmlsbD0ibm9uZSIvPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzMzIC02NjEpIHRyYW5zbGF0ZSg0MDkgNjg0KSIgZmlsbD0iIzY1N2VlNCI+PGNpcmNsZSBjeD0iLjUiIGN5PSIuNSIgcj0iLjUiIHN0cm9rZT0ibm9uZSIvPjxjaXJjbGUgY3g9Ii41IiBjeT0iLjUiIGZpbGw9Im5vbmUiLz48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTMzMyAtNjYxKSB0cmFuc2xhdGUoNDExIDY4NCkiIGZpbGw9IiM2NTdlZTQiPjxjaXJjbGUgY3g9Ii41IiBjeT0iLjUiIHI9Ii41IiBzdHJva2U9Im5vbmUiLz48Y2lyY2xlIGN4PSIuNSIgY3k9Ii41IiBmaWxsPSJub25lIi8+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zMzMgLTY2MSkgdHJhbnNsYXRlKDQxMyA2ODQpIiBmaWxsPSIjNjU3ZWU0Ij48Y2lyY2xlIGN4PSIuNSIgY3k9Ii41IiByPSIuNSIgc3Ryb2tlPSJub25lIi8+PGNpcmNsZSBjeD0iLjUiIGN5PSIuNSIgZmlsbD0ibm9uZSIvPjwvZz48L2c+PC9nPjxnIHN0cm9rZT0iIzY1N2VlNCI+PGcgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIj48cGF0aCBzdHJva2U9Im5vbmUiIGQ9Ik0yNyAyN2g1OXYxNmgtNTl6Ii8+PHBhdGggZD0iTTI4IDI4aDU3djE0aC01N3oiLz48L2c+PGc+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzEgMzEpIiBmaWxsPSJub25lIj48Y2lyY2xlIGN4PSI0IiBjeT0iNCIgcj0iNCIgc3Ryb2tlPSJub25lIi8+PGNpcmNsZSBjeD0iNCIgY3k9IjQiIHI9IjMuNSIvPjwvZz48cGF0aCBzdHJva2Utd2lkdGg9IjIiIGZpbGw9Im5vbmUiIGQ9Ik00MS41IDMzaDE0Ii8+PHBhdGggZD0iTTQxLjUgMzcuNWgyNCIgZmlsbD0ibm9uZSIvPjxwYXRoIGQ9Ik03NCAzM2g3IiBmaWxsPSJub25lIi8+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNzQgMzcpIiBmaWxsPSIjNjU3ZWU0Ij48Y2lyY2xlIGN4PSIuNSIgY3k9Ii41IiByPSIuNSIgc3Ryb2tlPSJub25lIi8+PGNpcmNsZSBjeD0iLjUiIGN5PSIuNSIgZmlsbD0ibm9uZSIvPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3NiAzNykiIGZpbGw9IiM2NTdlZTQiPjxjaXJjbGUgY3g9Ii41IiBjeT0iLjUiIHI9Ii41IiBzdHJva2U9Im5vbmUiLz48Y2lyY2xlIGN4PSIuNSIgY3k9Ii41IiBmaWxsPSJub25lIi8+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDc4IDM3KSIgZmlsbD0iIzY1N2VlNCI+PGNpcmNsZSBjeD0iLjUiIGN5PSIuNSIgcj0iLjUiIHN0cm9rZT0ibm9uZSIvPjxjaXJjbGUgY3g9Ii41IiBjeT0iLjUiIGZpbGw9Im5vbmUiLz48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoODAgMzcpIiBmaWxsPSIjNjU3ZWU0Ij48Y2lyY2xlIGN4PSIuNSIgY3k9Ii41IiByPSIuNSIgc3Ryb2tlPSJub25lIi8+PGNpcmNsZSBjeD0iLjUiIGN5PSIuNSIgZmlsbD0ibm9uZSIvPjwvZz48L2c+PC9nPjxnIHN0cm9rZT0iIzY1N2VlNCI+PGcgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIj48cGF0aCBzdHJva2U9Im5vbmUiIGQ9Ik0yNyA0MWg1OXYxNmgtNTl6Ii8+PHBhdGggZD0iTTI4IDQyaDU3djE0aC01N3oiLz48L2c+PGc+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzEgNDUpIiBmaWxsPSJub25lIj48Y2lyY2xlIGN4PSI0IiBjeT0iNCIgcj0iNCIgc3Ryb2tlPSJub25lIi8+PGNpcmNsZSBjeD0iNCIgY3k9IjQiIHI9IjMuNSIvPjwvZz48cGF0aCBzdHJva2Utd2lkdGg9IjIiIGZpbGw9Im5vbmUiIGQ9Ik00MS41IDQ3aDE0Ii8+PHBhdGggZD0iTTQxLjUgNTEuNWgyNCIgZmlsbD0ibm9uZSIvPjxwYXRoIGQ9Ik03NCA0N2g3IiBmaWxsPSJub25lIi8+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNzQgNTEpIiBmaWxsPSIjNjU3ZWU0Ij48Y2lyY2xlIGN4PSIuNSIgY3k9Ii41IiByPSIuNSIgc3Ryb2tlPSJub25lIi8+PGNpcmNsZSBjeD0iLjUiIGN5PSIuNSIgZmlsbD0ibm9uZSIvPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3NiA1MSkiIGZpbGw9IiM2NTdlZTQiPjxjaXJjbGUgY3g9Ii41IiBjeT0iLjUiIHI9Ii41IiBzdHJva2U9Im5vbmUiLz48Y2lyY2xlIGN4PSIuNSIgY3k9Ii41IiBmaWxsPSJub25lIi8+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDc4IDUxKSIgZmlsbD0iIzY1N2VlNCI+PGNpcmNsZSBjeD0iLjUiIGN5PSIuNSIgcj0iLjUiIHN0cm9rZT0ibm9uZSIvPjxjaXJjbGUgY3g9Ii41IiBjeT0iLjUiIGZpbGw9Im5vbmUiLz48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoODAgNTEpIiBmaWxsPSIjNjU3ZWU0Ij48Y2lyY2xlIGN4PSIuNSIgY3k9Ii41IiByPSIuNSIgc3Ryb2tlPSJub25lIi8+PGNpcmNsZSBjeD0iLjUiIGN5PSIuNSIgZmlsbD0ibm9uZSIvPjwvZz48L2c+PC9nPjwvZz48L3N2Zz4="},35334:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNDkiIGhlaWdodD0iODIiIHZpZXdCb3g9IjAgMCAxNDkgODIiPjxnPjxnIHN0cm9rZT0iI2RkZTZlYyIgZmlsbD0ibm9uZSI+PGc+PHBhdGggc3Ryb2tlPSJub25lIiBkPSJNMCAwaDE0OXY4MmgtMTQ5eiIvPjxwYXRoIGQ9Ik0uNS41aDE0OHY4MWgtMTQ4eiIvPjwvZz48Zz48cGF0aCBkPSJNMiAwaDExNGEyIDIgMCAwIDEgMiAydjY3aC0xMTh2LTY3YTIgMiAwIDAgMSAyLTJ6IiBzdHJva2U9Im5vbmUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI3IDEzKSIvPjxwYXRoIGQ9Ik0yIC41aDExNGExLjUgMS41IDAgMCAxIDEuNSAxLjV2NjZhLjUuNSAwIDAgMS0uNS41aC0xMTZhLjUuNSAwIDAgMS0uNS0uNXYtNjZhMS41IDEuNSAwIDAgMSAxLjUtMS41eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjcgMTMpIi8+PC9nPjxwYXRoIGQ9Ik01LjUuNXY4MSIvPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtOTAzIC02NjIpIHRyYW5zbGF0ZSgzOTcgODQpIj48cGF0aCBzdHJva2U9IiNkZGU2ZWMiIGZpbGw9Im5vbmUiIGQ9Ik01OTcuNSA1OTUuNWgzOSIvPjxwYXRoIGQ9Ik01OTIuNSA2MDUuNWg1OCIgc3Ryb2tlPSIjZGRlNmVjIiBmaWxsPSJub25lIi8+PGNpcmNsZSBjeD0iMS41IiBjeT0iMS41IiByPSIxLjUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDU5OCA1OTkpIiBmaWxsPSIjZGRlNmVjIi8+PGNpcmNsZSBjeD0iMS41IiBjeT0iMS41IiByPSIxLjUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYwMiA1OTkpIiBmaWxsPSIjZGRlNmVjIi8+PGNpcmNsZSBjeD0iMS41IiBjeT0iMS41IiByPSIxLjUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYwNiA1OTkpIiBmaWxsPSIjZGRlNmVjIi8+PHBhdGggc3Ryb2tlPSIjZGRlNmVjIiBmaWxsPSJub25lIiBkPSJNNjM5LjUgNTk1LjVoNiIvPjxwYXRoIHN0cm9rZT0iI2RkZTZlYyIgZmlsbD0ibm9uZSIgZD0iTTYzOS41IDYwMC41aDYiLz48cGF0aCBzdHJva2U9IiNkZGU2ZWMiIGZpbGw9Im5vbmUiIGQ9Ik01OTcuNSA2MTMuNWg0OCIvPjxnIHN0cm9rZT0iI2RkZTZlYyIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSJub25lIiBkPSJNNTk4IDYxOWg0OHYzMWgtNDh6Ii8+PHBhdGggZD0iTTU5OC41IDYxOS41aDQ3djMwaC00N3oiLz48L2c+PHBhdGggc3Ryb2tlPSIjZGRlNmVjIiBmaWxsPSJub25lIiBkPSJNNTk4LjUgNjI1LjVoNDciLz48cGF0aCBzdHJva2U9IiNkZGU2ZWMiIGZpbGw9Im5vbmUiIGQ9Ik02MDMuNSA2MzEuNWgzOCIvPjxwYXRoIHN0cm9rZT0iI2RkZTZlYyIgZmlsbD0ibm9uZSIgZD0iTTYwMy41IDYzNC41aDM4Ii8+PHBhdGggc3Ryb2tlPSIjZGRlNmVjIiBmaWxsPSJub25lIiBkPSJNNjAzLjUgNjM3LjVoMzgiLz48cGF0aCBkPSJNNjAzLjUgNjQwLjVoMjgiIHN0cm9rZT0iI2RkZTZlYyIgZmlsbD0ibm9uZSIvPjxwYXRoIGQ9Ik02MDMuNSA2NDMuNWg4IiBzdHJva2U9IiNkZGU2ZWMiIGZpbGw9Im5vbmUiLz48cGF0aCBkPSJNNTkyLjQyNyA1OTEuNTczdjY3LjY0MSIgc3Ryb2tlPSIjZGRlNmVjIiBmaWxsPSJub25lIi8+PC9nPjxnIHN0cm9rZT0iIzY1N2VlNCI+PGc+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjcgMTMpIiBzdHJva2Utd2lkdGg9IjIiIGZpbGw9Im5vbmUiPjxwYXRoIGQ9Ik0yIDBoNTd2MTJoLTU5di0xMGEyIDIgMCAwIDEgMi0yeiIgc3Ryb2tlPSJub25lIi8+PHJlY3QgeD0iMSIgeT0iMSIgd2lkdGg9IjU3IiBoZWlnaHQ9IjEwIiByeD0iMSIvPjwvZz48Zz48cGF0aCBzdHJva2Utd2lkdGg9IjIiIGZpbGw9Im5vbmUiIGQ9Ik0zOS41IDE4aDE0Ii8+PHBhdGggZD0iTTM5LjUgMjAuNWgyNCIgZmlsbD0ibm9uZSIvPjxwYXRoIGQ9Ik03NCAxOGg3IiBmaWxsPSJub25lIi8+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNzQgMjApIiBmaWxsPSIjNjU3ZWU0Ij48Y2lyY2xlIGN4PSIuNSIgY3k9Ii41IiByPSIuNSIgc3Ryb2tlPSJub25lIi8+PGNpcmNsZSBjeD0iLjUiIGN5PSIuNSIgZmlsbD0ibm9uZSIvPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3NiAyMCkiIGZpbGw9IiM2NTdlZTQiPjxjaXJjbGUgY3g9Ii41IiBjeT0iLjUiIHI9Ii41IiBzdHJva2U9Im5vbmUiLz48Y2lyY2xlIGN4PSIuNSIgY3k9Ii41IiBmaWxsPSJub25lIi8+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDc4IDIwKSIgZmlsbD0iIzY1N2VlNCI+PGNpcmNsZSBjeD0iLjUiIGN5PSIuNSIgcj0iLjUiIHN0cm9rZT0ibm9uZSIvPjxjaXJjbGUgY3g9Ii41IiBjeT0iLjUiIGZpbGw9Im5vbmUiLz48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoODAgMjApIiBmaWxsPSIjNjU3ZWU0Ij48Y2lyY2xlIGN4PSIuNSIgY3k9Ii41IiByPSIuNSIgc3Ryb2tlPSJub25lIi8+PGNpcmNsZSBjeD0iLjUiIGN5PSIuNSIgZmlsbD0ibm9uZSIvPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzMiAxNykiIGZpbGw9Im5vbmUiPjxyZWN0IHdpZHRoPSI0IiBoZWlnaHQ9IjQiIHJ4PSIxIiBzdHJva2U9Im5vbmUiLz48cmVjdCB4PSIuNSIgeT0iLjUiIHdpZHRoPSIzIiBoZWlnaHQ9IjMiIHJ4PSIuNSIvPjwvZz48L2c+PC9nPjxnPjxnIHN0cm9rZS13aWR0aD0iMiIgZmlsbD0ibm9uZSI+PHBhdGggc3Ryb2tlPSJub25lIiBkPSJNMjcgMjNoNTl2MTJoLTU5eiIvPjxwYXRoIGQ9Ik0yOCAyNGg1N3YxMGgtNTd6Ii8+PC9nPjxnPjxwYXRoIHN0cm9rZS13aWR0aD0iMiIgZmlsbD0ibm9uZSIgZD0iTTM5LjUgMjhoMTQiLz48cGF0aCBkPSJNMzkuNSAzMC41aDI0IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTc0IDI4aDciIGZpbGw9Im5vbmUiLz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3NCAzMCkiIGZpbGw9IiM2NTdlZTQiPjxjaXJjbGUgY3g9Ii41IiBjeT0iLjUiIHI9Ii41IiBzdHJva2U9Im5vbmUiLz48Y2lyY2xlIGN4PSIuNSIgY3k9Ii41IiBmaWxsPSJub25lIi8+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDc2IDMwKSIgZmlsbD0iIzY1N2VlNCI+PGNpcmNsZSBjeD0iLjUiIGN5PSIuNSIgcj0iLjUiIHN0cm9rZT0ibm9uZSIvPjxjaXJjbGUgY3g9Ii41IiBjeT0iLjUiIGZpbGw9Im5vbmUiLz48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNzggMzApIiBmaWxsPSIjNjU3ZWU0Ij48Y2lyY2xlIGN4PSIuNSIgY3k9Ii41IiByPSIuNSIgc3Ryb2tlPSJub25lIi8+PGNpcmNsZSBjeD0iLjUiIGN5PSIuNSIgZmlsbD0ibm9uZSIvPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg4MCAzMCkiIGZpbGw9IiM2NTdlZTQiPjxjaXJjbGUgY3g9Ii41IiBjeT0iLjUiIHI9Ii41IiBzdHJva2U9Im5vbmUiLz48Y2lyY2xlIGN4PSIuNSIgY3k9Ii41IiBmaWxsPSJub25lIi8+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMyIDI3KSIgZmlsbD0ibm9uZSI+PHJlY3Qgd2lkdGg9IjQiIGhlaWdodD0iNCIgcng9IjEiIHN0cm9rZT0ibm9uZSIvPjxyZWN0IHg9Ii41IiB5PSIuNSIgd2lkdGg9IjMiIGhlaWdodD0iMyIgcng9Ii41Ii8+PC9nPjwvZz48L2c+PGc+PGcgc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIj48cGF0aCBzdHJva2U9Im5vbmUiIGQ9Ik0yNyAzM2g1OXYxMmgtNTl6Ii8+PHBhdGggZD0iTTI4IDM0aDU3djEwaC01N3oiLz48L2c+PGc+PHBhdGggc3Ryb2tlLXdpZHRoPSIyIiBmaWxsPSJub25lIiBkPSJNMzkuNSAzOGgxNCIvPjxwYXRoIGQ9Ik0zOS41IDQwLjVoMjQiIGZpbGw9Im5vbmUiLz48cGF0aCBkPSJNNzQgMzhoNyIgZmlsbD0ibm9uZSIvPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDc0IDQwKSIgZmlsbD0iIzY1N2VlNCI+PGNpcmNsZSBjeD0iLjUiIGN5PSIuNSIgcj0iLjUiIHN0cm9rZT0ibm9uZSIvPjxjaXJjbGUgY3g9Ii41IiBjeT0iLjUiIGZpbGw9Im5vbmUiLz48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNzYgNDApIiBmaWxsPSIjNjU3ZWU0Ij48Y2lyY2xlIGN4PSIuNSIgY3k9Ii41IiByPSIuNSIgc3Ryb2tlPSJub25lIi8+PGNpcmNsZSBjeD0iLjUiIGN5PSIuNSIgZmlsbD0ibm9uZSIvPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3OCA0MCkiIGZpbGw9IiM2NTdlZTQiPjxjaXJjbGUgY3g9Ii41IiBjeT0iLjUiIHI9Ii41IiBzdHJva2U9Im5vbmUiLz48Y2lyY2xlIGN4PSIuNSIgY3k9Ii41IiBmaWxsPSJub25lIi8+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDgwIDQwKSIgZmlsbD0iIzY1N2VlNCI+PGNpcmNsZSBjeD0iLjUiIGN5PSIuNSIgcj0iLjUiIHN0cm9rZT0ibm9uZSIvPjxjaXJjbGUgY3g9Ii41IiBjeT0iLjUiIGZpbGw9Im5vbmUiLz48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzIgMzcpIiBmaWxsPSJub25lIj48cmVjdCB3aWR0aD0iNCIgaGVpZ2h0PSI0IiByeD0iMSIgc3Ryb2tlPSJub25lIi8+PHJlY3QgeD0iLjUiIHk9Ii41IiB3aWR0aD0iMyIgaGVpZ2h0PSIzIiByeD0iLjUiLz48L2c+PC9nPjwvZz48Zz48ZyBzdHJva2Utd2lkdGg9IjIiIGZpbGw9Im5vbmUiPjxwYXRoIHN0cm9rZT0ibm9uZSIgZD0iTTI3IDQzaDU5djEyaC01OXoiLz48cGF0aCBkPSJNMjggNDRoNTd2MTBoLTU3eiIvPjwvZz48Zz48cGF0aCBzdHJva2Utd2lkdGg9IjIiIGZpbGw9Im5vbmUiIGQ9Ik0zOS41IDQ4aDE0Ii8+PHBhdGggZD0iTTM5LjUgNTAuNWgyNCIgZmlsbD0ibm9uZSIvPjxwYXRoIGQ9Ik03NCA0OGg3IiBmaWxsPSJub25lIi8+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNzQgNTApIiBmaWxsPSIjNjU3ZWU0Ij48Y2lyY2xlIGN4PSIuNSIgY3k9Ii41IiByPSIuNSIgc3Ryb2tlPSJub25lIi8+PGNpcmNsZSBjeD0iLjUiIGN5PSIuNSIgZmlsbD0ibm9uZSIvPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3NiA1MCkiIGZpbGw9IiM2NTdlZTQiPjxjaXJjbGUgY3g9Ii41IiBjeT0iLjUiIHI9Ii41IiBzdHJva2U9Im5vbmUiLz48Y2lyY2xlIGN4PSIuNSIgY3k9Ii41IiBmaWxsPSJub25lIi8+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDc4IDUwKSIgZmlsbD0iIzY1N2VlNCI+PGNpcmNsZSBjeD0iLjUiIGN5PSIuNSIgcj0iLjUiIHN0cm9rZT0ibm9uZSIvPjxjaXJjbGUgY3g9Ii41IiBjeT0iLjUiIGZpbGw9Im5vbmUiLz48L2c+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoODAgNTApIiBmaWxsPSIjNjU3ZWU0Ij48Y2lyY2xlIGN4PSIuNSIgY3k9Ii41IiByPSIuNSIgc3Ryb2tlPSJub25lIi8+PGNpcmNsZSBjeD0iLjUiIGN5PSIuNSIgZmlsbD0ibm9uZSIvPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzMiA0NykiIGZpbGw9Im5vbmUiPjxyZWN0IHdpZHRoPSI0IiBoZWlnaHQ9IjQiIHJ4PSIxIiBzdHJva2U9Im5vbmUiLz48cmVjdCB4PSIuNSIgeT0iLjUiIHdpZHRoPSIzIiBoZWlnaHQ9IjMiIHJ4PSIuNSIvPjwvZz48L2c+PC9nPjwvZz48L2c+PC9zdmc+"},8554:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNDkiIGhlaWdodD0iODIiIHZpZXdCb3g9IjAgMCAxNDkgODIiPjxkZWZzPjxzdHlsZT4uYSwuY3tmaWxsOnRyYW5zcGFyZW50O30uYSwuYntzdHJva2U6I2RkZTZlYzt9LmIsLmQsLmZ7ZmlsbDpub25lO30uYywuZHtzdHJva2U6IzY1N2VlNDt9LmN7c3Ryb2tlLXdpZHRoOjJweDt9LmV7c3Ryb2tlOm5vbmU7fTwvc3R5bGU+PC9kZWZzPjxnIGNsYXNzPSJhIj48cGF0aCBjbGFzcz0iZSIgZD0iTTAgMGgxNDl2ODJoLTE0OXoiLz48cGF0aCBjbGFzcz0iZiIgZD0iTS41LjVoMTQ4djgxaC0xNDh6Ii8+PC9nPjxwYXRoIGNsYXNzPSJiIiBkPSJNNS41LjV2ODEiLz48ZyBjbGFzcz0iYyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNy45NTIgNi40MDkpIj48cmVjdCBjbGFzcz0iZSIgd2lkdGg9IjEzMy4wNDgiIGhlaWdodD0iNzEuNTkxIiByeD0iMyIvPjxyZWN0IGNsYXNzPSJmIiB4PSIxIiB5PSIxIiB3aWR0aD0iMTMxLjA0OCIgaGVpZ2h0PSI2OS41OTEiIHJ4PSIyIi8+PC9nPjxwYXRoIGNsYXNzPSJkIiBkPSJNOC40NTIgMjcuMjJoMTMwLjY5MU04LjQ1MiA3MS41aDEzMC42OTFNMTQuNDUyIDM3LjIxaDExOS4wNDhNMTQuNDUyIDQzLjg2OWgyNE0xNC40NTIgNTAuNTI5aDM0TTE0LjQ1MiA1Ny4xODloMTQiLz48L3N2Zz4="},32394:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNDkiIGhlaWdodD0iODIiIHZpZXdCb3g9IjAgMCAxNDkgODIiPjxkZWZzPjxzdHlsZT4uYSwuY3tmaWxsOnRyYW5zcGFyZW50O30uYSwuYntzdHJva2U6I2RkZTZlYzt9LmIsLmQsLmZ7ZmlsbDpub25lO30uYywuZHtzdHJva2U6IzY1N2VlNDt9LmN7c3Ryb2tlLXdpZHRoOjJweDt9LmV7c3Ryb2tlOm5vbmU7fTwvc3R5bGU+PC9kZWZzPjxnIGNsYXNzPSJhIj48cGF0aCBjbGFzcz0iZSIgZD0iTTAgMGgxNDl2ODJoLTE0OXoiLz48cGF0aCBjbGFzcz0iZiIgZD0iTS41LjVoMTQ4djgxaC0xNDh6Ii8+PC9nPjxnIGNsYXNzPSJhIj48cGF0aCBjbGFzcz0iZSIgZD0iTTIgMGgxMTRhMiAyIDAgMCAxIDIgMnY2N2gtMTE4di02N2EyIDIgMCAwIDEgMi0yeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjcgMTMpIi8+PHBhdGggY2xhc3M9ImYiIGQ9Ik0yIC41aDExNGExLjUgMS41IDAgMCAxIDEuNSAxLjV2NjZhLjUuNSAwIDAgMS0uNS41aC0xMTZhLjUuNSAwIDAgMS0uNS0uNXYtNjZhMS41IDEuNSAwIDAgMSAxLjUtMS41eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjcgMTMpIi8+PC9nPjxwYXRoIGNsYXNzPSJiIiBkPSJNNS41LjV2ODEiLz48ZyBjbGFzcz0iYyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTUwNiAtNDI4KSB0cmFuc2xhdGUoNTg3IDQ2MikiPjxyZWN0IGNsYXNzPSJlIiB3aWR0aD0iNTgiIGhlaWdodD0iNDMiIHJ4PSIzIi8+PHJlY3QgY2xhc3M9ImYiIHg9IjEiIHk9IjEiIHdpZHRoPSI1NiIgaGVpZ2h0PSI0MSIgcng9IjIiLz48L2c+PHBhdGggY2xhc3M9ImQiIGQ9Ik04MS41IDQ2LjVoNTUuNjQ0TTgxLjUgNzAuNWg1NS42NDRNODcuNSA1Mi41aDQ0TTg3LjUgNTYuNWgyNE04Ny41IDYwLjVoMzRNODcuNSA2NC41aDE0Ii8+PC9zdmc+"},76414:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNDkiIGhlaWdodD0iODIiIHZpZXdCb3g9IjAgMCAxNDkgODIiPjxkZWZzPjxzdHlsZT4uYSwuYywuZHtmaWxsOnRyYW5zcGFyZW50O30uYSwuYntzdHJva2U6I2RkZTZlYzt9LmIsLmUsLmh7ZmlsbDpub25lO30uYywuZCwuZXtzdHJva2U6IzY1N2VlNDt9LmN7c3Ryb2tlLXdpZHRoOjJweDt9LmZ7ZmlsbDojZGRlNmVjO30uZ3tzdHJva2U6bm9uZTt9PC9zdHlsZT48L2RlZnM+PGcgY2xhc3M9ImEiPjxwYXRoIGNsYXNzPSJnIiBkPSJNMCAwaDE0OXY4MmgtMTQ5eiIvPjxwYXRoIGNsYXNzPSJoIiBkPSJNLjUuNWgxNDh2ODFoLTE0OHoiLz48L2c+PGcgY2xhc3M9ImEiPjxwYXRoIGNsYXNzPSJnIiBkPSJNMiAwaDExNGEyIDIgMCAwIDEgMiAydjY3aC0xMTh2LTY3YTIgMiAwIDAgMSAyLTJ6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNyAxMykiLz48cGF0aCBjbGFzcz0iaCIgZD0iTTIgLjVoMTE0YTEuNSAxLjUgMCAwIDEgMS41IDEuNXY2NmEuNS41IDAgMCAxLS41LjVoLTExNmEuNS41IDAgMCAxLS41LS41di02NmExLjUgMS41IDAgMCAxIDEuNS0xLjV6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNyAxMykiLz48L2c+PHBhdGggY2xhc3M9ImIiIGQ9Ik01LjUuNXY4MSIvPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC01MDYgLTU4OCkgdHJhbnNsYXRlKDAgMTApIj48ZyBjbGFzcz0iYyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNTMzIDU5MSkiPjxwYXRoIGNsYXNzPSJnIiBkPSJNMiAwaDU3djY5aC01OXYtNjdhMiAyIDAgMCAxIDItMnoiLz48cmVjdCBjbGFzcz0iaCIgeD0iMSIgeT0iMSIgd2lkdGg9IjU3IiBoZWlnaHQ9IjY3IiByeD0iMSIvPjwvZz48ZyBjbGFzcz0iZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNTM4IDU5NSkiPjxjaXJjbGUgY2xhc3M9ImciIGN4PSIyLjUiIGN5PSIyLjUiIHI9IjIuNSIvPjxjaXJjbGUgY2xhc3M9ImgiIGN4PSIyLjUiIGN5PSIyLjUiIHI9IjIiLz48L2c+PHBhdGggY2xhc3M9ImUiIGQ9Ik01NDUuNSA1OTYuNWgxNE01NDUuNSA1OTguNWgyNE01NzkuNSA1OTYuNWg4TTU4NC41IDU5OC41aDNNNTM0LjUgNjAyLjVoNTYiLz48ZyBjbGFzcz0iZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNTM4IDU5NSkiPjxjaXJjbGUgY2xhc3M9ImciIGN4PSIyLjUiIGN5PSIyLjUiIHI9IjIuNSIvPjxjaXJjbGUgY2xhc3M9ImgiIGN4PSIyLjUiIGN5PSIyLjUiIHI9IjIiLz48L2c+PHBhdGggY2xhc3M9ImUiIGQ9Ik01NDUuNSA1OTYuNWgxNE01NDUuNSA1OTguNWgyNE01NzkuNSA1OTYuNWg4TTU4NC41IDU5OC41aDNNNTM0LjUgNjAyLjVoNTYiLz48ZyBjbGFzcz0iZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCAyMCkgdHJhbnNsYXRlKDUzOCA1OTUpIj48Y2lyY2xlIGNsYXNzPSJnIiBjeD0iMi41IiBjeT0iMi41IiByPSIyLjUiLz48Y2lyY2xlIGNsYXNzPSJoIiBjeD0iMi41IiBjeT0iMi41IiByPSIyIi8+PC9nPjxwYXRoIGNsYXNzPSJlIiBkPSJNNTQ1LjUgNjE2LjVoMTRNNTQ1LjUgNjE4LjVoMjRNNTc5LjUgNjE2LjVoOE01ODQuNSA2MTguNWgzTTUzNC41IDYyMi41aDU2Ii8+PGcgY2xhc3M9ImQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAgMzApIHRyYW5zbGF0ZSg1MzggNTk1KSI+PGNpcmNsZSBjbGFzcz0iZyIgY3g9IjIuNSIgY3k9IjIuNSIgcj0iMi41Ii8+PGNpcmNsZSBjbGFzcz0iaCIgY3g9IjIuNSIgY3k9IjIuNSIgcj0iMiIvPjwvZz48cGF0aCBjbGFzcz0iZSIgZD0iTTU0NS41IDYyNi41aDE0TTU0NS41IDYyOC41aDI0TTU3OS41IDYyNi41aDhNNTg0LjUgNjI4LjVoM001MzQuNSA2MzIuNWg1NiIvPjxnIGNsYXNzPSJkIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIDQwKSB0cmFuc2xhdGUoNTM4IDU5NSkiPjxjaXJjbGUgY2xhc3M9ImciIGN4PSIyLjUiIGN5PSIyLjUiIHI9IjIuNSIvPjxjaXJjbGUgY2xhc3M9ImgiIGN4PSIyLjUiIGN5PSIyLjUiIHI9IjIiLz48L2c+PHBhdGggY2xhc3M9ImUiIGQ9Ik01NDUuNSA2MzYuNWgxNE01NDUuNSA2MzguNWgyNE01NzkuNSA2MzYuNWg4TTU4NC41IDYzOC41aDNNNTM0LjUgNjQyLjVoNTYiLz48ZyBjbGFzcz0iZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCA1MCkgdHJhbnNsYXRlKDUzOCA1OTUpIj48Y2lyY2xlIGNsYXNzPSJnIiBjeD0iMi41IiBjeT0iMi41IiByPSIyLjUiLz48Y2lyY2xlIGNsYXNzPSJoIiBjeD0iMi41IiBjeT0iMi41IiByPSIyIi8+PC9nPjxwYXRoIGNsYXNzPSJlIiBkPSJNNTQ1LjUgNjQ2LjVoMTRNNTQ1LjUgNjQ4LjVoMjRNNTc5LjUgNjQ2LjVoOE01ODQuNSA2NDguNWgzTTUzNC41IDY1Mi41aDU2Ii8+PGcgY2xhc3M9ImUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAgNjApIHRyYW5zbGF0ZSg1MzggNTk1KSI+PGNpcmNsZSBjbGFzcz0iZyIgY3g9IjIuNSIgY3k9IjIuNSIgcj0iMi41Ii8+PGNpcmNsZSBjbGFzcz0iaCIgY3g9IjIuNSIgY3k9IjIuNSIgcj0iMiIvPjwvZz48cGF0aCBjbGFzcz0iZSIgZD0iTTU0NS41IDY1Ni41aDE0TTU0NS41IDY1OC41aDI0TTU3OS41IDY1Ni41aDhNNTg0LjUgNjU4LjVoMyIvPjxwYXRoIGNsYXNzPSJiIiBkPSJNNTk3LjUgNTk1LjVoMzlNNTkyLjUgNjA1LjVoNTgiLz48Y2lyY2xlIGNsYXNzPSJmIiBjeD0iMS41IiBjeT0iMS41IiByPSIxLjUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDU5OCA1OTkpIi8+PGNpcmNsZSBjbGFzcz0iZiIgY3g9IjEuNSIgY3k9IjEuNSIgcj0iMS41IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2MDIgNTk5KSIvPjxjaXJjbGUgY2xhc3M9ImYiIGN4PSIxLjUiIGN5PSIxLjUiIHI9IjEuNSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjA2IDU5OSkiLz48cGF0aCBjbGFzcz0iYiIgZD0iTTYzOS41IDU5NS41aDZNNjM5LjUgNjAwLjVoNk01OTcuNSA2MTMuNWg0OCIvPjxnIGNsYXNzPSJhIj48cGF0aCBjbGFzcz0iZyIgZD0iTTU5OCA2MTloNDh2MzFoLTQ4eiIvPjxwYXRoIGNsYXNzPSJoIiBkPSJNNTk4LjUgNjE5LjVoNDd2MzBoLTQ3eiIvPjwvZz48cGF0aCBjbGFzcz0iYiIgZD0iTTU5OC41IDYyNS41aDQ3TTYwMy41IDYzMS41aDM4TTYwMy41IDYzNC41aDM4TTYwMy41IDYzNy41aDM4TTYwMy41IDY0MC41aDI4TTYwMy41IDY0My41aDgiLz48L2c+PC9zdmc+"},50068:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNDkiIGhlaWdodD0iODIiIHZpZXdCb3g9IjAgMCAxNDkgODIiPjxkZWZzPjxzdHlsZT4uYSwuYywuZHtmaWxsOnRyYW5zcGFyZW50O30uYSwuYntzdHJva2U6I2RkZTZlYzt9LmIsLmUsLmd7ZmlsbDpub25lO30uYywuZCwuZXtzdHJva2U6IzY1N2VlNDt9LmN7c3Ryb2tlLXdpZHRoOjJweDt9LmZ7c3Ryb2tlOm5vbmU7fTwvc3R5bGU+PC9kZWZzPjxnIGNsYXNzPSJhIj48cGF0aCBjbGFzcz0iZiIgZD0iTTAgMGgxNDl2ODJoLTE0OXoiLz48cGF0aCBjbGFzcz0iZyIgZD0iTS41LjVoMTQ4djgxaC0xNDh6Ii8+PC9nPjxnIGNsYXNzPSJhIj48cGF0aCBjbGFzcz0iZiIgZD0iTTIgMGgxMTRhMiAyIDAgMCAxIDIgMnY2N2gtMTE4di02N2EyIDIgMCAwIDEgMi0yeiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjcgMTMpIi8+PHBhdGggY2xhc3M9ImciIGQ9Ik0yIC41aDExNGExLjUgMS41IDAgMCAxIDEuNSAxLjV2NjZhLjUuNSAwIDAgMS0uNS41aC0xMTZhLjUuNSAwIDAgMS0uNS0uNXYtNjZhMS41IDEuNSAwIDAgMSAxLjUtMS41eiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjcgMTMpIi8+PC9nPjxwYXRoIGNsYXNzPSJiIiBkPSJNNS41LjV2ODEiLz48ZyBjbGFzcz0iYyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjcgMTMpIj48cGF0aCBjbGFzcz0iZiIgZD0iTTIgMGgxMTRhMiAyIDAgMCAxIDIgMnY2N2gtMTE4di02N2EyIDIgMCAwIDEgMi0yeiIvPjxyZWN0IGNsYXNzPSJnIiB4PSIxIiB5PSIxIiB3aWR0aD0iMTE2IiBoZWlnaHQ9IjY3IiByeD0iMSIvPjwvZz48ZyBjbGFzcz0iZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzIgMTYpIj48Y2lyY2xlIGNsYXNzPSJmIiBjeD0iMi41IiBjeT0iMi41IiByPSIyLjUiLz48Y2lyY2xlIGNsYXNzPSJnIiBjeD0iMi41IiBjeT0iMi41IiByPSIyIi8+PC9nPjxwYXRoIGNsYXNzPSJlIiBkPSJNMzkuNSAxOC41aDE0TTY1LjUgMTguNWgyNE0xMzEuNSAxOC41aDhNMTIyLjUgMTguNWgzTTI4LjUgMjIuNWgxMTUiLz48ZyBjbGFzcz0iZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzIgMjQpIj48Y2lyY2xlIGNsYXNzPSJmIiBjeD0iMi41IiBjeT0iMi41IiByPSIyLjUiLz48Y2lyY2xlIGNsYXNzPSJnIiBjeD0iMi41IiBjeT0iMi41IiByPSIyIi8+PC9nPjxwYXRoIGNsYXNzPSJlIiBkPSJNMzkuNSAyNi41aDE0TTY1LjUgMjYuNWgyNE0xMzEuNSAyNi41aDhNMTIyLjUgMjYuNWgzTTI4LjUgMzAuNWgxMTUiLz48ZyBjbGFzcz0iZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzIgMzIpIj48Y2lyY2xlIGNsYXNzPSJmIiBjeD0iMi41IiBjeT0iMi41IiByPSIyLjUiLz48Y2lyY2xlIGNsYXNzPSJnIiBjeD0iMi41IiBjeT0iMi41IiByPSIyIi8+PC9nPjxwYXRoIGNsYXNzPSJlIiBkPSJNMzkuNSAzNC41aDE0TTY1LjUgMzQuNWgyNE0xMzEuNSAzNC41aDhNMTIyLjUgMzQuNWgzTTI4LjUgMzguNWgxMTUiLz48ZyBjbGFzcz0iZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzIgNDApIj48Y2lyY2xlIGNsYXNzPSJmIiBjeD0iMi41IiBjeT0iMi41IiByPSIyLjUiLz48Y2lyY2xlIGNsYXNzPSJnIiBjeD0iMi41IiBjeT0iMi41IiByPSIyIi8+PC9nPjxwYXRoIGNsYXNzPSJlIiBkPSJNMzkuNSA0Mi41aDE0TTY1LjUgNDIuNWgyNE0xMzEuNSA0Mi41aDhNMTIyLjUgNDIuNWgzTTI4LjUgNDYuNWgxMTUiLz48ZyBjbGFzcz0iZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzIgNDgpIj48Y2lyY2xlIGNsYXNzPSJmIiBjeD0iMi41IiBjeT0iMi41IiByPSIyLjUiLz48Y2lyY2xlIGNsYXNzPSJnIiBjeD0iMi41IiBjeT0iMi41IiByPSIyIi8+PC9nPjxwYXRoIGNsYXNzPSJlIiBkPSJNMzkuNSA1MC41aDE0TTY1LjUgNTAuNWgyNE0xMzEuNSA1MC41aDhNMTIyLjUgNTAuNWgzTTI4LjUgNTQuNWgxMTUiLz48ZyBjbGFzcz0iZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzIgNTYpIj48Y2lyY2xlIGNsYXNzPSJmIiBjeD0iMi41IiBjeT0iMi41IiByPSIyLjUiLz48Y2lyY2xlIGNsYXNzPSJnIiBjeD0iMi41IiBjeT0iMi41IiByPSIyIi8+PC9nPjxwYXRoIGNsYXNzPSJlIiBkPSJNMzkuNSA1OC41aDE0TTY1LjUgNTguNWgyNE0xMzEuNSA1OC41aDhNMTIyLjUgNTguNWgzTTI4LjUgNjIuNWgxMTUiLz48ZyBjbGFzcz0iZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzIgNjQpIj48Y2lyY2xlIGNsYXNzPSJmIiBjeD0iMi41IiBjeT0iMi41IiByPSIyLjUiLz48Y2lyY2xlIGNsYXNzPSJnIiBjeD0iMi41IiBjeT0iMi41IiByPSIyIi8+PC9nPjxwYXRoIGNsYXNzPSJlIiBkPSJNMzkuNSA2Ni41aDE0TTY1LjUgNjYuNWgyNE0xMzEuNSA2Ni41aDhNMTIyLjUgNjYuNWgzTTI4LjUgNzAuNWgxMTUiLz48ZyBjbGFzcz0iZCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzIgNzIpIj48Y2lyY2xlIGNsYXNzPSJmIiBjeD0iMi41IiBjeT0iMi41IiByPSIyLjUiLz48Y2lyY2xlIGNsYXNzPSJnIiBjeD0iMi41IiBjeT0iMi41IiByPSIyIi8+PC9nPjxwYXRoIGNsYXNzPSJlIiBkPSJNMzkuNSA3NC41aDE0TTY1LjUgNzQuNWgyNE0xMzEuNSA3NC41aDhNMTIyLjUgNzQuNWgzTTI4LjUgNzguNWgxMTUiLz48L3N2Zz4="},19056:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNDYiIGhlaWdodD0iMTYyIiBmaWxsPSJub25lIiB2aWV3Qm94PSIwIDAgMzQ2IDE2MiI+CiAgPGRlZnMvPgogIDxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMCkiPgogICAgPHBhdGggZmlsbD0iI0VCRURFRCIgZD0iTTg1LjY4IDI4LjQzQTkuNDMgOS40MyAwIDAxOTUuMTEgMTlIMjYxYTkuNDMgOS40MyAwIDAxOS40MyA5LjQzdjEwLjIySDg1LjY4VjI4LjQzeiIvPgogICAgPHBhdGggZmlsbD0idXJsKCNwYWludDBfbGluZWFyKSIgZD0iTTg1LjY4IDM4LjY1aDE4NC43NHY5Ni45MmE5LjQzIDkuNDMgMCAwMS05LjQzIDkuNDNIOTUuMWE5LjQzIDkuNDMgMCAwMS05LjQzLTkuNDNWMzguNjV6Ii8+CiAgICA8cGF0aCBmaWxsPSIjRUJFREVEIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yNjAuOTkgMjAuNEg5NS4xYTguMDMgOC4wMyAwIDAwLTguMDMgOC4wM3YxMDcuMTRhOC4wMyA4LjAzIDAgMDA4LjAzIDguMDNIMjYxYTguMDMgOC4wMyAwIDAwOC4wMy04LjAzVjI4LjQzYTguMDMgOC4wMyAwIDAwLTguMDMtOC4wM3pNOTUuMSAxOWE5LjQzIDkuNDMgMCAwMC05LjQzIDkuNDN2MTA3LjE0YTkuNDMgOS40MyAwIDAwOS40MyA5LjQzSDI2MWE5LjQzIDkuNDMgMCAwMDkuNDMtOS40M1YyOC40M2E5LjQzIDkuNDMgMCAwMC05LjQzLTkuNDNIOTUuMXoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPgogICAgPGNpcmNsZSBjeD0iOTguMjYiIGN5PSIyOS4yMiIgcj0iMy4xNSIgZmlsbD0iI0MzQzhDQyIvPgogICAgPGNpcmNsZSBjeD0iMTA3LjY5IiBjeT0iMjkuMjIiIHI9IjMuMTUiIGZpbGw9IiNDM0M4Q0MiLz4KICAgIDxjaXJjbGUgY3g9IjExNy4xMyIgY3k9IjI5LjIyIiByPSIzLjE1IiBmaWxsPSIjQzNDOENDIi8+CiAgICA8cGF0aCBmaWxsPSIjRUJFREVEIiBkPSJNMTc3LjU0IDEyMGgydjI0aC0ydi0yNHoiLz4KICAgIDxwYXRoIGZpbGw9IiMzRjY0RTYiIGQ9Ik0xODQuOTMgMTMwaC0xMi45bDMuNDctNi45OGg1LjkzbDMuNSA2Ljk4eiIvPgogICAgPHBhdGggZmlsbD0idXJsKCNwYWludDFfbGluZWFyKSIgZD0iTTIyNi4yNCA1OC40MmMwIDMwLjYtMjQuOCA2NS40Ni00Ny44IDY1LjQ2UzEzMC43IDg5LjAzIDEzMC43IDU4LjQyYzAtMzAuNiAyMS40LTUyLjQyIDQ3Ljc5LTUyLjQyczQ3Ljc2IDIxLjc4IDQ3Ljc2IDUyLjQyeiIvPgogICAgPGVsbGlwc2UgY3g9IjE1Ni4zNyIgY3k9IjM3Ljg2IiBmaWxsPSJ1cmwoI3BhaW50Ml9saW5lYXIpIiByeD0iMTIuMjQiIHJ5PSIxOC45MyIgdHJhbnNmb3JtPSJyb3RhdGUoMzkuNDIgMTU2LjM3IDM3Ljg2KSIvPgogICAgPHBhdGggZmlsbD0iI2ZmZiIgZD0iTTE3OC44MiA0OC4wM3MtMTAuNjYtLjM3LTEyLjg4IDExLjQ3djguMDhzLjA2Ljg2IDIuNTMgMi42NWMyLjQ2IDEuNzkgOC42OSA2LjcyIDEwLjM1IDYuNzIgMS42NyAwIDcuOTYtNSAxMC4zNi02LjcyIDIuNC0xLjczIDIuNTMtMi42NSAyLjUzLTIuNjVWNTkuNWMtMi4xNi0xMS44NC0xMi44OS0xMS40Ny0xMi44OS0xMS40N3ptNy4zNCAxNS45MWgtMTQuNjF2LTQuMzhhNy45NiA3Ljk2IDAgMDE3LjM0LTUuOTggNy44OSA3Ljg5IDAgMDE3LjMzIDUuOTh2NC4zOGgtLjA2eiIvPgogICAgPHBhdGggZmlsbD0iI2ZmZiIgZD0iTTE3OC44MiA3OC43NGE3LjQzIDcuNDMgMCAwMS0yLjk2LTEuMDVsLTkuOTItNy4xVjgyLjhjLjA2Ljg3LjggMS40OCAxLjYgMS40MmgyMi41Yy44Ny4wNiAxLjYtLjU1IDEuNjctMS4zNVY3MC42bC05LjkzIDcuMDlhNi44IDYuOCAwIDAxLTIuOTYgMS4wNXoiLz4KICAgIDxwYXRoIGZpbGw9InVybCgjcGFpbnQzX2xpbmVhcikiIGQ9Ik0yNDYgMjMuNzVhMjMuNzUgMjMuNzUgMCAxMTQ3LjUgMCAyMy43NSAyMy43NSAwIDAxLTQ3LjUgMHoiLz4KICAgIDxwYXRoIGZpbGw9IiNmZmYiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTI3OS40MiAxNi45MWMuNi42LjYgMS41NyAwIDIuMTdMMjY4LjQgMzAuMTlhMS41MyAxLjUzIDAgMDEtMi4xNyAwbC01LjY0LTUuNjlhMS41MyAxLjUzIDAgMTEyLjE3LTIuMTVsNC41NiA0LjYgOS45NC0xMC4wM2ExLjUzIDEuNTMgMCAwMTIuMTcgMHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPgogICAgPHBhdGggZmlsbD0iIzgwRTVENCIgZD0iTTQ2LjEgMzYuNjVMNDIuNjQgMzQgMzQgNDUuMjZsMy40NiAyLjY1IDguNjQtMTEuMjZ6Ii8+CiAgICA8cGF0aCBmaWxsPSIjNjU3RUUzIiBkPSJNODMuMjcgNzdMODAgNzkuODhsOS4zOCAxMC42NSAzLjI3LTIuODhMODMuMjcgNzd6Ii8+CiAgICA8cGF0aCBmaWxsPSIjRUI3NUIzIiBkPSJNNTQuMDUgMTE5LjFhMy4wNSAzLjA1IDAgMTAwLTYuMSAzLjA1IDMuMDUgMCAwMDAgNi4xeiIvPgogICAgPHBhdGggZmlsbD0iIzU5Q0E2QyIgZD0iTTM0My4wNSA5OC4xYTMuMDUgMy4wNSAwIDEwMC02LjEgMy4wNSAzLjA1IDAgMDAwIDYuMXoiLz4KICAgIDxwYXRoIGZpbGw9IiNGRkI3QjciIGQ9Ik03NS40MiA0aC00LjI4TDY5IDcuN2wyLjE0IDMuNzRoNC4yOEw3Ny42IDcuNyA3NS40MyA0eiIvPgogICAgPHBhdGggZmlsbD0iIzUwNTA2QSIgZD0iTTYuNzkgNjUuNjhsLTMuODYgOS4wOCA5Ljc3LTEuMTgtNS45LTcuOXoiLz4KICAgIDxwYXRoIGZpbGw9IiNGRkQ1ODUiIGQ9Ik0yNDguMTggNjMuNjFMMjQ0LjEzIDYyIDI0MCA3Mi4zOWw0LjA1IDEuNiA0LjEzLTEwLjM4eiIvPgogICAgPHBhdGggZmlsbD0iI0M1ODBFNSIgZD0iTTMxNi41OCA2OS44NUwzMTQuNTMgNjYgMzAyIDcyLjY2bDIuMDQgMy44NSAxMi41NC02LjY2eiIvPgogICAgPHBhdGggZmlsbD0iIzUwNTA2QSIgZD0iTTM0My40MyAyMmgtNC4yOUwzMzcgMjUuN2wyLjE0IDMuNzRoNC4yOWwyLjE0LTMuNzQtMi4xNC0zLjd6Ii8+CiAgICA8cGF0aCBmaWxsPSIjRUI3NUIzIiBkPSJNMzE1LjczIDEyNWwtNy43MyA2LjEgOS4xOCAzLjYzLTEuNDUtOS43M3oiLz4KICAgIDxwYXRoIGZpbGw9InVybCgjcGFpbnQ0X2xpbmVhcikiIGQ9Ik0xMTQgMTI4aC0xNHYyOC45OGEzIDMgMCAwMDQuNDIgMi42NGw4LjE2LTQuMzlhMyAzIDAgMDEyLjg0IDBsOC4xNiA0LjRhMyAzIDAgMDA0LjQyLTIuNjVWMTI4aC0xNHoiLz4KICAgIDxwYXRoIGZpbGw9InVybCgjcGFpbnQ1X2xpbmVhcikiIGQ9Ik0xMTQgMTQxYTE5IDE5IDAgMTAwLTM4IDE5IDE5IDAgMDAwIDM4eiIvPgogICAgPHBhdGggZmlsbD0iI0EwMUQ0OCIgZD0iTTExNCAxMzNhMTEgMTEgMCAxMDAtMjIgMTEgMTEgMCAwMDAgMjJ6Ii8+CiAgPC9nPgogIDxkZWZzPgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDBfbGluZWFyIiB4MT0iMTc4LjA1IiB4Mj0iMTc4LjA1IiB5MT0iNjUuNzgiIHkyPSIxNTUiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iI2ZmZiIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNGREZFRkUiLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MV9saW5lYXIiIHgxPSIxNzcuNzQiIHgyPSIxNzcuNzQiIHkxPSIxMzIuNDQiIHkyPSI2MC4xOSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjMzc1OUUxIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzY0QTJGRiIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQyX2xpbmVhciIgeDE9IjY2LjczIiB4Mj0iMTYwLjY0IiB5MT0iMzMuNDciIHkyPSI5Ljc0IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiNmZmYiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9IjAiLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50M19saW5lYXIiIHgxPSIyNjkuNzUiIHgyPSIyNjkuNzUiIHkxPSIwIiB5Mj0iNDcuNSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjNUJDQjZBIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzFDQjc4RiIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQ0X2xpbmVhciIgeDE9IjExNCIgeDI9IjEwNC40NyIgeTE9IjE3NCIgeTI9IjEyNC4zMyIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjRkY1N0E1Ii8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzlBMEYyRSIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQ1X2xpbmVhciIgeDE9IjEwMi41IiB4Mj0iMTQxIiB5MT0iMTAxIiB5Mj0iMTQ3LjUiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iI0ZGNTc3NSIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNDNzFCNUUiLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8Y2xpcFBhdGggaWQ9ImNsaXAwIj4KICAgICAgPHBhdGggZmlsbD0iI2ZmZiIgZD0iTTAgMGgzNDZ2MTYySDB6Ii8+CiAgICA8L2NsaXBQYXRoPgogIDwvZGVmcz4KPC9zdmc+Cg=="},44248:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNDYiIGhlaWdodD0iMTYyIiBmaWxsPSJub25lIiB2aWV3Qm94PSIwIDAgMzQ2IDE2MiI+CiAgPGRlZnMvPgogIDxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMCkiPgogICAgPHBhdGggZmlsbD0iI0VCRURFRCIgZD0iTTg1LjY4IDI4LjQzQTkuNDMgOS40MyAwIDAxOTUuMTEgMTlIMjYxYTkuNDMgOS40MyAwIDAxOS40MyA5LjQzdjEwLjIySDg1LjY4VjI4LjQzeiIvPgogICAgPHBhdGggZmlsbD0idXJsKCNwYWludDBfbGluZWFyKSIgZD0iTTg1LjY4IDM4LjY1aDE4NC43NHY5Ni45MmE5LjQzIDkuNDMgMCAwMS05LjQzIDkuNDNIOTUuMWE5LjQzIDkuNDMgMCAwMS05LjQzLTkuNDNWMzguNjV6Ii8+CiAgICA8cGF0aCBmaWxsPSIjRUJFREVEIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yNjAuOTkgMjAuNEg5NS4xYTguMDMgOC4wMyAwIDAwLTguMDMgOC4wM3YxMDcuMTRhOC4wMyA4LjAzIDAgMDA4LjAzIDguMDNIMjYxYTguMDMgOC4wMyAwIDAwOC4wMy04LjAzVjI4LjQzYTguMDMgOC4wMyAwIDAwLTguMDMtOC4wM3pNOTUuMSAxOWE5LjQzIDkuNDMgMCAwMC05LjQzIDkuNDN2MTA3LjE0YTkuNDMgOS40MyAwIDAwOS40MyA5LjQzSDI2MWE5LjQzIDkuNDMgMCAwMDkuNDMtOS40M1YyOC40M2E5LjQzIDkuNDMgMCAwMC05LjQzLTkuNDNIOTUuMXoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPgogICAgPGNpcmNsZSBjeD0iOTguMjYiIGN5PSIyOS4yMiIgcj0iMy4xNSIgZmlsbD0iI0MzQzhDQyIvPgogICAgPGNpcmNsZSBjeD0iMTA3LjY5IiBjeT0iMjkuMjIiIHI9IjMuMTUiIGZpbGw9IiNDM0M4Q0MiLz4KICAgIDxjaXJjbGUgY3g9IjExNy4xMyIgY3k9IjI5LjIyIiByPSIzLjE1IiBmaWxsPSIjQzNDOENDIi8+CiAgICA8cGF0aCBmaWxsPSIjRUJFREVEIiBkPSJNMTc3LjU0IDEyMGgydjI0aC0ydi0yNHoiLz4KICAgIDxwYXRoIGZpbGw9IiMxRUI4OEYiIGQ9Ik0xODQuOTMgMTMwaC0xMi45bDMuNDctNi45OGg1LjkzbDMuNSA2Ljk4eiIvPgogICAgPHBhdGggZmlsbD0idXJsKCNwYWludDFfbGluZWFyKSIgZD0iTTIyNi4yNCA1OC40MmMwIDMwLjYtMjQuOCA2NS40Ni00Ny44IDY1LjQ2UzEzMC43IDg5LjAzIDEzMC43IDU4LjQyYzAtMzAuNiAyMS40LTUyLjQyIDQ3Ljc5LTUyLjQyczQ3Ljc2IDIxLjc4IDQ3Ljc2IDUyLjQyeiIvPgogICAgPGVsbGlwc2UgY3g9IjE1Ni4zNyIgY3k9IjM3Ljg2IiBmaWxsPSJ1cmwoI3BhaW50Ml9saW5lYXIpIiByeD0iMTIuMjQiIHJ5PSIxOC45MyIgdHJhbnNmb3JtPSJyb3RhdGUoMzkuNDIgMTU2LjM3IDM3Ljg2KSIvPgogICAgPHBhdGggZmlsbD0idXJsKCNwYWludDNfbGluZWFyKSIgZD0iTTI0NiAyNGEyNCAyNCAwIDExNDggMCAyNCAyNCAwIDAxLTQ4IDB6Ii8+CiAgICA8cGF0aCBmaWxsPSIjZmZmIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yNzUuODUgMTYuODR2Mi40NmgyLjRjLjgxIDAgMS41LjY2IDEuNSAxLjUxdjEyLjgyYzAgLjgyLS42NiAxLjUxLTEuNSAxLjUxaC0xNi4xN2ExLjUxIDEuNTEgMCAwMS0xLjUtMS41VjIwLjhjMC0uODIuNjUtMS41MSAxLjUtMS41MWgyLjM3di0yLjQ2YTUuNyA1LjcgMCAwMTUuNy01LjcgNS43IDUuNyAwIDAxNS43IDUuN3ptLTIuNCAwdjIuNDZoLTYuNTR2LTIuNDZjMC0yLjI2IDEuNzMtMy4yNiAzLjI3LTMuMjYgMS41MyAwIDMuMjcgMSAzLjI3IDMuMjZ6bS0yLjk4IDYuNzRjMS4xIDAgMS45OC44OSAxLjk4IDEuOTkgMCAuNzUtLjQgMS40MS0xLjA0IDEuNzNsLjgyIDMuNTNoLTMuNTNsLjgyLTMuNTNhMS45OCAxLjk4IDAgMDEuOTQtMy43MnoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPgogICAgPHBhdGggZmlsbD0iIzgwRTVENCIgZD0iTTQ2LjEgMzYuNjVMNDIuNjQgMzQgMzQgNDUuMjZsMy40NiAyLjY1IDguNjQtMTEuMjZ6Ii8+CiAgICA8cGF0aCBmaWxsPSIjNjU3RUUzIiBkPSJNODMuMjcgNzdMODAgNzkuODhsOS4zOCAxMC42NSAzLjI3LTIuODhMODMuMjcgNzd6Ii8+CiAgICA8cGF0aCBmaWxsPSIjRUI3NUIzIiBkPSJNNTQuMDUgMTE5LjFhMy4wNSAzLjA1IDAgMTAwLTYuMSAzLjA1IDMuMDUgMCAwMDAgNi4xeiIvPgogICAgPHBhdGggZmlsbD0iIzU5Q0E2QyIgZD0iTTM0My4wNSA5OC4xYTMuMDUgMy4wNSAwIDEwMC02LjEgMy4wNSAzLjA1IDAgMDAwIDYuMXoiLz4KICAgIDxwYXRoIGZpbGw9IiNGRkI3QjciIGQ9Ik03NS40MiA0aC00LjI4TDY5IDcuN2wyLjE0IDMuNzRoNC4yOEw3Ny42IDcuNyA3NS40MyA0eiIvPgogICAgPHBhdGggZmlsbD0iIzUwNTA2QSIgZD0iTTYuNzkgNjUuNjhsLTMuODYgOS4wOCA5Ljc3LTEuMTgtNS45LTcuOXoiLz4KICAgIDxwYXRoIGZpbGw9IiNGRkQ1ODUiIGQ9Ik0yNDguMTggNjMuNjFMMjQ0LjEzIDYyIDI0MCA3Mi4zOWw0LjA1IDEuNiA0LjEzLTEwLjM4eiIvPgogICAgPHBhdGggZmlsbD0iI0M1ODBFNSIgZD0iTTMxNi41OCA2OS44NUwzMTQuNTMgNjYgMzAyIDcyLjY2bDIuMDQgMy44NSAxMi41NC02LjY2eiIvPgogICAgPHBhdGggZmlsbD0iIzUwNTA2QSIgZD0iTTM0My40MyAyMmgtNC4yOUwzMzcgMjUuN2wyLjE0IDMuNzRoNC4yOWwyLjE0LTMuNzQtMi4xNC0zLjd6Ii8+CiAgICA8cGF0aCBmaWxsPSIjRUI3NUIzIiBkPSJNMzE1LjczIDEyNWwtNy43MyA2LjEgOS4xOCAzLjYzLTEuNDUtOS43M3oiLz4KICAgIDxwYXRoIGZpbGw9InVybCgjcGFpbnQ0X2xpbmVhcikiIGQ9Ik0xMTQgMTI4aC0xNHYyOC45OGEzIDMgMCAwMDQuNDIgMi42NGw4LjE2LTQuMzlhMyAzIDAgMDEyLjg0IDBsOC4xNiA0LjRhMyAzIDAgMDA0LjQyLTIuNjVWMTI4aC0xNHoiLz4KICAgIDxwYXRoIGZpbGw9InVybCgjcGFpbnQ1X2xpbmVhcikiIGQ9Ik0xMTQgMTQxYTE5IDE5IDAgMTAwLTM4IDE5IDE5IDAgMDAwIDM4eiIvPgogICAgPHBhdGggZmlsbD0iI0EwMUQ0OCIgZD0iTTExNCAxMzNhMTEgMTEgMCAxMDAtMjIgMTEgMTEgMCAwMDAgMjJ6Ii8+CiAgICA8cGF0aCBmaWxsPSIjZmZmIiBkPSJNMTk3LjI4IDU0Ljg1YTQuODggNC44OCAwIDAwLTEuNC0zLjQzIDQuOCA0LjggMCAwMC0xLjU2LTEuMDUgNC43OCA0Ljc4IDAgMDAtNS4yNCAxLjA1IDQuODggNC44OCAwIDAwLTEuNCAzLjQzVjU1bC0yMC45MSA2Ljc0YTQuODIgNC44MiAwIDAwLTMuMDgtMi4wMiA0Ljc5IDQuNzkgMCAwMC0zLjYuNzYgNC43NCA0Ljc0IDAgMDAtMS4zIDEuMzEgNC44IDQuOCAwIDAwLS43IDMuNTljLjEyLjYxLjM2IDEuMi43IDEuNzJsLjA0LjA1YTQuODEgNC44MSAwIDAwMS43NyAxLjU2Yy43Mi4zNyAxLjUuNTUgMi4zLjUzYTQuNDMgNC40MyAwIDAwMS40Ni0uMjZsMTMuNzQgMTcuMzRhNC44MyA0LjgzIDAgMDAtLjA0IDMuNjYgNC43NiA0Ljc2IDAgMDAyLjUzIDIuNjJsLjA0LjAxYzEuMTcuNSAyLjQ4LjUyIDMuNjYuMDVhNC44MyA0LjgzIDAgMDAyLjYzLTIuNTdjLjQtLjk0LjQ5LTEuOTguMjUtMi45OGE0Ljc3IDQuNzcgMCAwMC0xLjU1LTIuNTRsNy4zLTI0Ljk1YTQuNzIgNC43MiAwIDAwMy4wOS0xLjUzIDQuOCA0LjggMCAwMDEuMjUtMy4yNGguMDJ6bS0xNC44NCAyOC40NmE0LjggNC44IDAgMDAtMi4xMy41M2wtMTMuNDItMTYuOThhNC43NSA0Ljc1IDAgMDAuNjgtMmwyMS4zNi02LjhjLjIzLjI0LjQ3LjQ2Ljc0LjY3bC03LjIxIDI0LjU3aC0uMDN2LjAxeiIvPgogIDwvZz4KICA8ZGVmcz4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQwX2xpbmVhciIgeDE9IjE3OC4wNSIgeDI9IjE3OC4wNSIgeTE9IjY1Ljc4IiB5Mj0iMTU1IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiNmZmYiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjRkRGRUZFIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDFfbGluZWFyIiB4MT0iMTc4LjQ2IiB4Mj0iMTc4LjQ2IiB5MT0iNiIgeTI9IjEyMy44OCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjNUJDQjZBIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzFDQjc4RiIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQyX2xpbmVhciIgeDE9IjY2LjczIiB4Mj0iMTYwLjY0IiB5MT0iMzMuNDciIHkyPSI5Ljc0IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiNmZmYiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9IjAiLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50M19saW5lYXIiIHgxPSIyNzAiIHgyPSIyNzAiIHkxPSI1LjU3IiB5Mj0iNTMuMTQiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iI0ZGRDY2QyIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNGRjY1OEEiLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50NF9saW5lYXIiIHgxPSIxMTQiIHgyPSIxMDQuNDciIHkxPSIxNzQiIHkyPSIxMjQuMzMiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iI0ZGNTdBNSIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiM5QTBGMkUiLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50NV9saW5lYXIiIHgxPSIxMDIuNSIgeDI9IjE0MSIgeTE9IjEwMSIgeTI9IjE0Ny41IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiNGRjU3NzUiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjQzcxQjVFIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGNsaXBQYXRoIGlkPSJjbGlwMCI+CiAgICAgIDxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0wIDBoMzQ2djE2MkgweiIvPgogICAgPC9jbGlwUGF0aD4KICA8L2RlZnM+Cjwvc3ZnPgo="},57477:function(e,t,n){"use strict";e.exports=n.p+"assets/0c4d61ce4c16cb2a0521.svg"},37904:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMTM1IiBoZWlnaHQ9IjQwIiB2aWV3Qm94PSIwIDAgMTM1IDQwIj4KICA8ZGVmcz4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0ibGluZWFyLWdyYWRpZW50IiB4MT0iMC45MTUiIHkxPSI2LjYxNCIgeDI9Ii0wLjM4MiIgeTI9IjUuOTQ1IiBncmFkaWVudFVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCI+CiAgICAgIDxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iIzAwYTBmZiIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjAuMDEiIHN0b3AtY29sb3I9IiMwMGExZmYiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIwLjI2IiBzdG9wLWNvbG9yPSIjMDBiZWZmIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMC41MSIgc3RvcC1jb2xvcj0iIzAwZDJmZiIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjAuNzYiIHN0b3AtY29sb3I9IiMwMGRmZmYiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjMDBlM2ZmIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJsaW5lYXItZ3JhZGllbnQtMiIgeDE9IjEuMDc3IiB5MT0iMTcuMDg5IiB4Mj0iLTEuMzA2IiB5Mj0iMTcuMDg5IiBncmFkaWVudFVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCI+CiAgICAgIDxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2ZmZTAwMCIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjAuNDEiIHN0b3AtY29sb3I9IiNmZmJkMDAiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIwLjc4IiBzdG9wLWNvbG9yPSJvcmFuZ2UiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjZmY5YzAwIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJsaW5lYXItZ3JhZGllbnQtMyIgeDE9IjAuODYzIiB5MT0iMTAuODU1IiB4Mj0iLTAuNTAyIiB5Mj0iOS4wODciIGdyYWRpZW50VW5pdHM9Im9iamVjdEJvdW5kaW5nQm94Ij4KICAgICAgPHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmYzYTQ0Ii8+CiAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI2MzMTE2MiIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0ibGluZWFyLWdyYWRpZW50LTQiIHgxPSItMC4xODgiIHkxPSIxMy41NzYiIHgyPSIwLjQyMSIgeTI9IjEyLjc4NiIgZ3JhZGllbnRVbml0cz0ib2JqZWN0Qm91bmRpbmdCb3giPgogICAgICA8c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiMzMmEwNzEiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIwLjA3IiBzdG9wLWNvbG9yPSIjMmRhNzcxIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMC40OCIgc3RvcC1jb2xvcj0iIzE1Y2Y3NCIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjAuOCIgc3RvcC1jb2xvcj0iIzA2ZTc3NSIvPgogICAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMwMGYwNzYiLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgPC9kZWZzPgogIDxnIGlkPSJnb29nbGUtcGxheS1iYWRnZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEwIC0xMCkiPgogICAgPHJlY3QgaWQ9IlJlY3RhbmdsZV8xODE2IiBkYXRhLW5hbWU9IlJlY3RhbmdsZSAxODE2IiB3aWR0aD0iMTM1IiBoZWlnaHQ9IjQwIiByeD0iNSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTAgMTApIi8+CiAgICA8cGF0aCBpZD0iVHJhY8OpXzUyNDgiIGRhdGEtbmFtZT0iVHJhY8OpIDUyNDgiIGQ9Ik0xNDAsMTAuOGE0LjIsNC4yLDAsMCwxLDQuMiw0LjJWNDVhNC4yLDQuMiwwLDAsMS00LjIsNC4ySDE1QTQuMiw0LjIsMCwwLDEsMTAuOCw0NVYxNUE0LjIsNC4yLDAsMCwxLDE1LDEwLjhIMTQwbTAtLjhIMTVhNSw1LDAsMCwwLTUsNVY0NWE1LDUsMCwwLDAsNSw1SDE0MGE1LDUsMCwwLDAsNS01VjE1QTUsNSwwLDAsMCwxNDAsMTBaIiBmaWxsPSIjYTZhNmE2Ii8+CiAgICA8cGF0aCBpZD0iVHJhY8OpXzUyNDkiIGRhdGEtbmFtZT0iVHJhY8OpIDUyNDkiIGQ9Ik01Ny40MiwyMC4yNGEyLjcyLDIuNzIsMCwwLDEtLjc1LDIsMi45LDIuOSwwLDAsMS0yLjIuODgsMywzLDAsMCwxLTIuMjEtLjksMy4xMzUsMy4xMzUsMCwwLDEsMy40NC01LjExLDIuNTQsMi41NCwwLDAsMSwuOTQuNjdsLS41My41M2EyLDIsMCwwLDAtMS42NC0uNzIsMi40LDIuNCwwLDEsMCwxLjY4LDQuMTMsMS45MiwxLjkyLDAsMCwwLC41LTEuMjJINTQuNDd2LS43MmgyLjkxYTMuNzUsMy43NSwwLDAsMSwuMDQuNDZaIiBmaWxsPSIjZmZmIiBzdHJva2U9IiNmZmYiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIwLjIiLz4KICAgIDxwYXRoIGlkPSJUcmFjw6lfNTI1MCIgZGF0YS1uYW1lPSJUcmFjw6kgNTI1MCIgZD0iTTYyLDE3Ljc0SDU5LjN2MS45aDIuNDZ2LjcySDU5LjN2MS45SDYyVjIzSDU4LjUyVjE3SDYyWiIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjZmZmIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iMC4yIi8+CiAgICA8cGF0aCBpZD0iVHJhY8OpXzUyNTEiIGRhdGEtbmFtZT0iVHJhY8OpIDUyNTEiIGQ9Ik02NS4yOCwyM2gtLjc3VjE3Ljc0SDYyLjgzVjE3SDY3di43NEg2NS4yOFoiIGZpbGw9IiNmZmYiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2Utd2lkdGg9IjAuMiIvPgogICAgPHBhdGggaWQ9IlRyYWPDqV81MjUyIiBkYXRhLW5hbWU9IlRyYWPDqSA1MjUyIiBkPSJNNjkuOTQsMjNWMTdoLjc3djZaIiBmaWxsPSIjZmZmIiBzdHJva2U9IiNmZmYiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIwLjIiLz4KICAgIDxwYXRoIGlkPSJUcmFjw6lfNTI1MyIgZGF0YS1uYW1lPSJUcmFjw6kgNTI1MyIgZD0iTTc0LjEzLDIzaC0uNzdWMTcuNzRINzEuNjhWMTdINzUuOHYuNzRINzQuMTNaIiBmaWxsPSIjZmZmIiBzdHJva2U9IiNmZmYiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIwLjIiLz4KICAgIDxwYXRoIGlkPSJUcmFjw6lfNTI1NCIgZGF0YS1uYW1lPSJUcmFjw6kgNTI1NCIgZD0iTTgzLjYxLDIyLjIyYTMuMTEsMy4xMSwwLDAsMS00LjQsMCwzLjI0LDMuMjQsMCwwLDEsMC00LjQ0LDIuOTMsMi45MywwLDAsMSwyLjItLjkxLDMsMywwLDAsMSwyLjIuOTFBMy4wNywzLjA3LDAsMCwxLDg0LjQ5LDIwLDMsMywwLDAsMSw4My42MSwyMi4yMlptLTMuODMtLjVhMi4yOSwyLjI5LDAsMCwwLDMuMjYsMCwyLjU0LDIuNTQsMCwwLDAsMC0zLjQ0LDIuMjksMi4yOSwwLDAsMC0zLjI2LDAsMi41NCwyLjU0LDAsMCwwLDAsMy40NFoiIGZpbGw9IiNmZmYiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2Utd2lkdGg9IjAuMiIvPgogICAgPHBhdGggaWQ9IlRyYWPDqV81MjU1IiBkYXRhLW5hbWU9IlRyYWPDqSA1MjU1IiBkPSJNODUuNTgsMjNWMTdoLjkzbDIuOTIsNC42N2gwVjE3aC43N3Y2aC0uOGwtMy4wNS00Ljg5aDBWMjNaIiBmaWxsPSIjZmZmIiBzdHJva2U9IiNmZmYiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIwLjIiLz4KICAgIDxwYXRoIGlkPSJUcmFjw6lfNTI1NiIgZGF0YS1uYW1lPSJUcmFjw6kgNTI1NiIgZD0iTTc4LjE0LDMxLjc1QTQuMjYsNC4yNiwwLDEsMCw4Mi40MSwzNmE0LjE5LDQuMTksMCwwLDAtNC4yNy00LjI1Wm0wLDYuODNBMi41OCwyLjU4LDAsMSwxLDgwLjU0LDM2YTIuNDYsMi40NiwwLDAsMS0yLjQsMi41OFptLTkuMzItNi44M0E0LjI2LDQuMjYsMCwxLDAsNzMuMDksMzZhNC4xOSw0LjE5LDAsMCwwLTQuMjctNC4yNVptMCw2LjgzQTIuNTgsMi41OCwwLDEsMSw3MS4yMiwzNmEyLjQ2LDIuNDYsMCwwLDEtMi40LDIuNThaTTU3Ljc0LDMzLjA2djEuOGg0LjMyYTMuNzcsMy43NywwLDAsMS0xLDIuMjcsNC40Miw0LjQyLDAsMCwxLTMuMzQsMS4zMiw0LjgsNC44LDAsMCwxLDAtOS42QTQuNjQsNC42NCwwLDAsMSw2MSwzMC4xNGwxLjI3LTEuMjdhNi4zLDYuMywwLDAsMC00LjUzLTEuODIsNi42MSw2LjYxLDAsMSwwLDAsMTMuMjEsNi4wNyw2LjA3LDAsMCwwLDQuNjEtMS44NSw2LDYsMCwwLDAsMS41Ni00LjIzLDYuMjcsNi4yNywwLDAsMC0uMDktMS4xMlptNDUuMzEsMS40QTMuOTI5LDMuOTI5LDAsMCwwLDk1LjQxLDM2YTQuMjMsNC4yMywwLDAsMCw3Ljc2LDIuMzdsLTEuNDUtMWEyLjQxLDIuNDEsMCwwLDEtMi4wOSwxLjE3LDIuMTUsMi4xNSwwLDAsMS0yLjA2LTEuMjlsNS42OS0yLjM1Wm0tNS44LDEuNDJhMi4zNCwyLjM0LDAsMCwxLDIuMjMtMi40OSwxLjY0LDEuNjQsMCwwLDEsMS41Ny45MVpNOTIuNjMsNDBIOTQuNVYyNy41SDkyLjYzWm0tMy4wNi03LjNIODkuNWEyLjk0LDIuOTQsMCwwLDAtMi4yNC0xLDQuMjYsNC4yNiwwLDAsMCwwLDguNTEsMi44OCwyLjg4LDAsMCwwLDIuMjQtMWguMDd2LjYxYzAsMS42My0uODcsMi41LTIuMjcsMi41YTIuMzYsMi4zNiwwLDAsMS0yLjE1LTEuNTFsLTEuNjIuNjdBNCw0LDAsMCwwLDg3LjMsNDRjMi4xOSwwLDQtMS4yOSw0LTQuNDNWMzJIODkuNTdabS0yLjE1LDUuODhhMi41OCwyLjU4LDAsMCwxLDAtNS4xNUEyLjM5LDIuMzksMCwwLDEsODkuNywzNmEyLjM4LDIuMzgsMCwwLDEtMi4yOCwyLjU4Wk0xMTEuODEsMjcuNWgtNC40OFY0MGgxLjg3VjM1LjI2aDIuNjFhMy44OSwzLjg5LDAsMSwwLDAtNy43NlptMCw2SDEwOS4yVjI5LjI0aDIuNjVhMi4xNCwyLjE0LDAsMCwxLDAsNC4yOFptMTEuNTQtMS43OWEzLjQ5LDMuNDksMCwwLDAtMy4zMywxLjkxbDEuNjUuNjlhMS43OCwxLjc4LDAsMCwxLDEuNzEtLjkxLDEuOCwxLjgsMCwwLDEsMiwxLjYxdi4xMmE0LjE4LDQuMTgsMCwwLDAtMS45NS0uNDhjLTEuNzgsMC0zLjYsMS0zLjYsMi44MmEyLjg5LDIuODksMCwwLDAsMy4xMSwyLjc1QTIuNjUsMi42NSwwLDAsMCwxMjUuMzIsMzloLjA2djFoMS44VjM1LjE5YzAtMi4xOS0xLjY2LTMuNDYtMy43OS0zLjQ2Wm0tLjIzLDYuODVjLS42MSwwLTEuNDYtLjMxLTEuNDYtMS4wNiwwLTEsMS4wNi0xLjM0LDItMS4zNGEzLjMyLDMuMzIsMCwwLDEsMS43LjQyLDIuMjYsMi4yNiwwLDAsMS0yLjIsMlpNMTMzLjc0LDMybC0yLjE0LDUuNDJoLS4wNkwxMjkuMzIsMzJoLTJsMy4zMyw3LjU4LTEuOSw0LjIxaDEuOTVMMTM1LjgyLDMyWm0tMTYuOCw4aDEuODZWMjcuNWgtMS44NloiIGZpbGw9IiNmZmYiLz4KICAgIDxwYXRoIGlkPSJUcmFjw6lfNTI1NyIgZGF0YS1uYW1lPSJUcmFjw6kgNTI1NyIgZD0iTTIwLjQ0LDE3LjU0YTIsMiwwLDAsMC0uNDcsMS40VjQxLjA2YTEuOTQsMS45NCwwLDAsMCwuNDcsMS40bC4wNy4wOEwzMi45LDMwLjE1di0uM0wyMC41MSwxNy40N1oiIGZpbGw9InVybCgjbGluZWFyLWdyYWRpZW50KSIvPgogICAgPHBhdGggaWQ9IlRyYWPDqV81MjU4IiBkYXRhLW5hbWU9IlRyYWPDqSA1MjU4IiBkPSJNMzcsMzQuMjhsLTQuMS00LjEzdi0uM0wzNywyNS43MmwuMDkuMDZMNDIsMjguNTZjMS40Ljc5LDEuNCwyLjA5LDAsMi44OWwtNC44OSwyLjc4WiIgZmlsbD0idXJsKCNsaW5lYXItZ3JhZGllbnQtMikiLz4KICAgIDxwYXRoIGlkPSJUcmFjw6lfNTI1OSIgZGF0YS1uYW1lPSJUcmFjw6kgNTI1OSIgZD0iTTM3LjEyLDM0LjIyLDMyLjksMzAsMjAuNDQsNDIuNDZhMS42MiwxLjYyLDAsMCwwLDIuMDcuMDdsMTQuNjEtOC4zMSIgZmlsbD0idXJsKCNsaW5lYXItZ3JhZGllbnQtMykiLz4KICAgIDxwYXRoIGlkPSJUcmFjw6lfNTI2MCIgZGF0YS1uYW1lPSJUcmFjw6kgNTI2MCIgZD0iTTM3LjEyLDI1Ljc4bC0xNC42MS04LjNhMS42MSwxLjYxLDAsMCwwLTIuMDcuMDZMMzIuOSwzMFoiIGZpbGw9InVybCgjbGluZWFyLWdyYWRpZW50LTQpIi8+CiAgICA8cGF0aCBpZD0iVHJhY8OpXzUyNjEiIGRhdGEtbmFtZT0iVHJhY8OpIDUyNjEiIGQ9Ik0zNywzNC4xMywyMi41MSw0Mi4zOGExLjY2LDEuNjYsMCwwLDEtMiwwaDBsLS4wNy4wN2gwbC4wNy4wOGgwYTEuNjYsMS42NiwwLDAsMCwyLDBsMTQuNjEtOC4zMVoiIG9wYWNpdHk9IjAuMiIgc3R5bGU9Imlzb2xhdGlvbjogaXNvbGF0ZSIvPgogICAgPHBhdGggaWQ9IlRyYWPDqV81MjYyIiBkYXRhLW5hbWU9IlRyYWPDqSA1MjYyIiBkPSJNMjAuNDQsNDIuMzJBMiwyLDAsMCwxLDIwLDQwLjkxdi4xNWExLjk0LDEuOTQsMCwwLDAsLjQ3LDEuNGwuMDctLjA3WiIgb3BhY2l0eT0iMC4xMiIgc3R5bGU9Imlzb2xhdGlvbjogaXNvbGF0ZSIvPgogICAgPHBhdGggaWQ9IlRyYWPDqV81MjYzIiBkYXRhLW5hbWU9IlRyYWPDqSA1MjYzIiBkPSJNNDIsMzEuM2wtNSwyLjgzLjA5LjA5TDQyLDMxLjQ0QTEuNzUsMS43NSwwLDAsMCw0My4wNiwzMGgwQTEuODYsMS44NiwwLDAsMSw0MiwzMS4zWiIgb3BhY2l0eT0iMC4xMiIgc3R5bGU9Imlzb2xhdGlvbjogaXNvbGF0ZSIvPgogICAgPHBhdGggaWQ9IlRyYWPDqV81MjY0IiBkYXRhLW5hbWU9IlRyYWPDqSA1MjY0IiBkPSJNMjIuNTEsMTcuNjIsNDIsMjguN0ExLjg2LDEuODYsMCwwLDEsNDMuMDYsMzBoMEExLjc1LDEuNzUsMCwwLDAsNDIsMjguNTZMMjIuNTEsMTcuNDhjLTEuMzktLjgtMi41NC0uMTQtMi41NCwxLjQ2di4xNUMyMCwxNy40OSwyMS4xMiwxNi44MywyMi41MSwxNy42MloiIGZpbGw9IiNmZmYiIG9wYWNpdHk9IjAuMjUiIHN0eWxlPSJpc29sYXRpb246IGlzb2xhdGUiLz4KICA8L2c+Cjwvc3ZnPgo="},24875:function(){},36826:function(){},48043:function(){},15915:function(){}}]);
//# sourceMappingURL=7118.95eff3ea.chunk.js.map